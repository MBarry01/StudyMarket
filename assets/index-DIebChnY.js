function Sz(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var rO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sO={exports:{}},E0={},iO={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=Symbol.for("react.element"),Ez=Symbol.for("react.portal"),Pz=Symbol.for("react.fragment"),Cz=Symbol.for("react.strict_mode"),Tz=Symbol.for("react.profiler"),Rz=Symbol.for("react.provider"),kz=Symbol.for("react.context"),Iz=Symbol.for("react.forward_ref"),Az=Symbol.for("react.suspense"),Oz=Symbol.for("react.memo"),Mz=Symbol.for("react.lazy"),Q2=Symbol.iterator;function Dz(t){return t===null||typeof t!="object"?null:(t=Q2&&t[Q2]||t["@@iterator"],typeof t=="function"?t:null)}var aO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oO=Object.assign,lO={};function Bh(t,e,n){this.props=t,this.context=e,this.refs=lO,this.updater=n||aO}Bh.prototype.isReactComponent={};Bh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cO(){}cO.prototype=Bh.prototype;function LN(t,e,n){this.props=t,this.context=e,this.refs=lO,this.updater=n||aO}var FN=LN.prototype=new cO;FN.constructor=LN;oO(FN,Bh.prototype);FN.isPureReactComponent=!0;var Y2=Array.isArray,uO=Object.prototype.hasOwnProperty,$N={current:null},dO={key:!0,ref:!0,__self:!0,__source:!0};function hO(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)uO.call(e,r)&&!dO.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:pg,type:t,key:a,ref:o,props:s,_owner:$N.current}}function Lz(t,e){return{$$typeof:pg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function VN(t){return typeof t=="object"&&t!==null&&t.$$typeof===pg}function Fz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J2=/\/+/g;function fb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fz(""+t.key):e.toString(36)}function _y(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pg:case Ez:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fb(o,0):r,Y2(s)?(n="",t!=null&&(n=t.replace(J2,"$&/")+"/"),_y(s,e,n,"",function(d){return d})):s!=null&&(VN(s)&&(s=Lz(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(J2,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Y2(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+fb(a,l);o+=_y(a,e,n,u,s)}else if(u=Dz(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+fb(a,l++),o+=_y(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Av(t,e,n){if(t==null)return t;var r=[],s=0;return _y(t,r,"","",function(a){return e.call(n,a,s++)}),r}function $z(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ps={current:null},jy={transition:null},Vz={ReactCurrentDispatcher:ps,ReactCurrentBatchConfig:jy,ReactCurrentOwner:$N};function fO(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Av,forEach:function(t,e,n){Av(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Av(t,function(){e++}),e},toArray:function(t){return Av(t,function(e){return e})||[]},only:function(t){if(!VN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Bh;kt.Fragment=Pz;kt.Profiler=Tz;kt.PureComponent=LN;kt.StrictMode=Cz;kt.Suspense=Az;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vz;kt.act=fO;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oO({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=$N.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)uO.call(e,u)&&!dO.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:pg,type:t.type,key:s,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:kz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rz,_context:t},t.Consumer=t};kt.createElement=hO;kt.createFactory=function(t){var e=hO.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:Iz,render:t}};kt.isValidElement=VN;kt.lazy=function(t){return{$$typeof:Mz,_payload:{_status:-1,_result:t},_init:$z}};kt.memo=function(t,e){return{$$typeof:Oz,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=jy.transition;jy.transition={};try{t()}finally{jy.transition=e}};kt.unstable_act=fO;kt.useCallback=function(t,e){return ps.current.useCallback(t,e)};kt.useContext=function(t){return ps.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return ps.current.useDeferredValue(t)};kt.useEffect=function(t,e){return ps.current.useEffect(t,e)};kt.useId=function(){return ps.current.useId()};kt.useImperativeHandle=function(t,e,n){return ps.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return ps.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return ps.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return ps.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return ps.current.useReducer(t,e,n)};kt.useRef=function(t){return ps.current.useRef(t)};kt.useState=function(t){return ps.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return ps.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return ps.current.useTransition()};kt.version="18.3.1";iO.exports=kt;var w=iO.exports;const oe=zo(w),zN=Sz({__proto__:null,default:oe},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zz=w,Uz=Symbol.for("react.element"),Bz=Symbol.for("react.fragment"),Wz=Object.prototype.hasOwnProperty,Hz=zz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qz={key:!0,ref:!0,__self:!0,__source:!0};function mO(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wz.call(e,r)&&!qz.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Uz,type:t,key:a,ref:o,props:s,_owner:Hz.current}}E0.Fragment=Bz;E0.jsx=mO;E0.jsxs=mO;sO.exports=E0;var i=sO.exports,pO={exports:{}},ei={},gO={exports:{}},vO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var q=z.length;z.push(H);e:for(;0<q;){var X=q-1>>>1,me=z[X];if(0<s(me,H))z[X]=H,z[q]=me,q=X;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],q=z.pop();if(q!==H){z[0]=q;e:for(var X=0,me=z.length,Ee=me>>>1;X<Ee;){var Fe=2*(X+1)-1,Me=z[Fe],ue=Fe+1,ye=z[ue];if(0>s(Me,q))ue<me&&0>s(ye,Me)?(z[X]=ye,z[ue]=q,X=ue):(z[X]=Me,z[Fe]=q,X=Fe);else if(ue<me&&0>s(ye,q))z[X]=ye,z[ue]=q,X=ue;else break e}}return H}function s(z,H){var q=z.sortIndex-H.sortIndex;return q!==0?q:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,v=!1,N=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function C(z){if(b=!1,S(z),!N)if(n(u)!==null)N=!0,ee(R);else{var H=n(d);H!==null&&Z(C,H.startTime-z)}}function R(z,H){N=!1,b&&(b=!1,_(I),I=-1),v=!0;var q=p;try{for(S(H),m=n(u);m!==null&&(!(m.expirationTime>H)||z&&!M());){var X=m.callback;if(typeof X=="function"){m.callback=null,p=m.priorityLevel;var me=X(m.expirationTime<=H);H=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(u)&&r(u),S(H)}else r(u);m=n(u)}if(m!==null)var Ee=!0;else{var Fe=n(d);Fe!==null&&Z(C,Fe.startTime-H),Ee=!1}return Ee}finally{m=null,p=q,v=!1}}var V=!1,k=null,I=-1,$=5,T=-1;function M(){return!(t.unstable_now()-T<$)}function D(){if(k!==null){var z=t.unstable_now();T=z;var H=!0;try{H=k(!0,z)}finally{H?O():(V=!1,k=null)}}else V=!1}var O;if(typeof x=="function")O=function(){x(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Y=B.port2;B.port1.onmessage=D,O=function(){Y.postMessage(null)}}else O=function(){j(D,0)};function ee(z){k=z,V||(V=!0,O())}function Z(z,H){I=j(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){N||v||(N=!0,ee(R))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var q=p;p=H;try{return z()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=p;p=z;try{return H()}finally{p=q}},t.unstable_scheduleCallback=function(z,H,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=q+me,z={id:h++,callback:H,priorityLevel:z,startTime:q,expirationTime:me,sortIndex:-1},q>X?(z.sortIndex=q,e(d,z),n(u)===null&&z===n(d)&&(b?(_(I),I=-1):b=!0,Z(C,q-X))):(z.sortIndex=me,e(u,z),N||v||(N=!0,ee(R))),z},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(z){var H=p;return function(){var q=p;p=H;try{return z.apply(this,arguments)}finally{p=q}}}})(vO);gO.exports=vO;var Gz=gO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kz=w,Ys=Gz;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yO=new Set,Km={};function Pu(t,e){ah(t,e),ah(t+"Capture",e)}function ah(t,e){for(Km[t]=e,t=0;t<e.length;t++)yO.add(e[t])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),W_=Object.prototype.hasOwnProperty,Zz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X2={},eC={};function Qz(t){return W_.call(eC,t)?!0:W_.call(X2,t)?!1:Zz.test(t)?eC[t]=!0:(X2[t]=!0,!1)}function Yz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jz(t,e,n,r){if(e===null||typeof e>"u"||Yz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gs(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lr[t]=new gs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lr[e]=new gs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lr[t]=new gs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lr[t]=new gs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lr[t]=new gs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lr[t]=new gs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lr[t]=new gs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lr[t]=new gs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lr[t]=new gs(t,5,!1,t.toLowerCase(),null,!1,!1)});var UN=/[\-:]([a-z])/g;function BN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(UN,BN);Lr[e]=new gs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(UN,BN);Lr[e]=new gs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(UN,BN);Lr[e]=new gs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lr[t]=new gs(t,1,!1,t.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new gs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lr[t]=new gs(t,1,!1,t.toLowerCase(),null,!0,!0)});function WN(t,e,n,r){var s=Lr.hasOwnProperty(e)?Lr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jz(e,n,s,r)&&(n=null),r||s===null?Qz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Uo=Kz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ov=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Rd=Symbol.for("react.fragment"),HN=Symbol.for("react.strict_mode"),H_=Symbol.for("react.profiler"),xO=Symbol.for("react.provider"),wO=Symbol.for("react.context"),qN=Symbol.for("react.forward_ref"),q_=Symbol.for("react.suspense"),G_=Symbol.for("react.suspense_list"),GN=Symbol.for("react.memo"),hl=Symbol.for("react.lazy"),bO=Symbol.for("react.offscreen"),tC=Symbol.iterator;function Uf(t){return t===null||typeof t!="object"?null:(t=tC&&t[tC]||t["@@iterator"],typeof t=="function"?t:null)}var Mn=Object.assign,mb;function cm(t){if(mb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mb=e&&e[1]||""}return`
`+mb+t}var pb=!1;function gb(t,e){if(!t||pb)return"";pb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{pb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cm(t):""}function Xz(t){switch(t.tag){case 5:return cm(t.type);case 16:return cm("Lazy");case 13:return cm("Suspense");case 19:return cm("SuspenseList");case 0:case 2:case 15:return t=gb(t.type,!1),t;case 11:return t=gb(t.type.render,!1),t;case 1:return t=gb(t.type,!0),t;default:return""}}function K_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rd:return"Fragment";case Td:return"Portal";case H_:return"Profiler";case HN:return"StrictMode";case q_:return"Suspense";case G_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wO:return(t.displayName||"Context")+".Consumer";case xO:return(t._context.displayName||"Context")+".Provider";case qN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GN:return e=t.displayName||null,e!==null?e:K_(t.type)||"Memo";case hl:e=t._payload,t=t._init;try{return K_(t(e))}catch{}}return null}function eU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K_(e);case 8:return e===HN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ql(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _O(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tU(t){var e=_O(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mv(t){t._valueTracker||(t._valueTracker=tU(t))}function jO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_O(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Z_(t,e){var n=e.checked;return Mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ql(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NO(t,e){e=e.checked,e!=null&&WN(t,"checked",e,!1)}function Q_(t,e){NO(t,e);var n=ql(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Y_(t,e.type,n):e.hasOwnProperty("defaultValue")&&Y_(t,e.type,ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Y_(t,e,n){(e!=="number"||nx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var um=Array.isArray;function Wd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ql(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function J_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(um(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ql(n)}}function SO(t,e){var n=ql(e.value),r=ql(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dv,PO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dv=Dv||document.createElement("div"),Dv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nU=["Webkit","ms","Moz","O"];Object.keys(Pm).forEach(function(t){nU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pm[e]=Pm[t]})});function CO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pm.hasOwnProperty(t)&&Pm[t]?(""+e).trim():e+"px"}function TO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=CO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rU=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e1(t,e){if(e){if(rU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function t1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=null;function KN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var r1=null,Hd=null,qd=null;function aC(t){if(t=yg(t)){if(typeof r1!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=k0(e),r1(t.stateNode,t.type,e))}}function RO(t){Hd?qd?qd.push(t):qd=[t]:Hd=t}function kO(){if(Hd){var t=Hd,e=qd;if(qd=Hd=null,aC(t),e)for(t=0;t<e.length;t++)aC(e[t])}}function IO(t,e){return t(e)}function AO(){}var vb=!1;function OO(t,e,n){if(vb)return t(e,n);vb=!0;try{return IO(t,e,n)}finally{vb=!1,(Hd!==null||qd!==null)&&(AO(),kO())}}function Qm(t,e){var n=t.stateNode;if(n===null)return null;var r=k0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var s1=!1;if(No)try{var Bf={};Object.defineProperty(Bf,"passive",{get:function(){s1=!0}}),window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch{s1=!1}function sU(t,e,n,r,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Cm=!1,rx=null,sx=!1,i1=null,iU={onError:function(t){Cm=!0,rx=t}};function aU(t,e,n,r,s,a,o,l,u){Cm=!1,rx=null,sU.apply(iU,arguments)}function oU(t,e,n,r,s,a,o,l,u){if(aU.apply(this,arguments),Cm){if(Cm){var d=rx;Cm=!1,rx=null}else throw Error(Ie(198));sx||(sx=!0,i1=d)}}function Cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oC(t){if(Cu(t)!==t)throw Error(Ie(188))}function lU(t){var e=t.alternate;if(!e){if(e=Cu(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return oC(s),t;if(a===r)return oC(s),e;a=a.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function DO(t){return t=lU(t),t!==null?LO(t):null}function LO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LO(t);if(e!==null)return e;t=t.sibling}return null}var FO=Ys.unstable_scheduleCallback,lC=Ys.unstable_cancelCallback,cU=Ys.unstable_shouldYield,uU=Ys.unstable_requestPaint,Gn=Ys.unstable_now,dU=Ys.unstable_getCurrentPriorityLevel,ZN=Ys.unstable_ImmediatePriority,$O=Ys.unstable_UserBlockingPriority,ix=Ys.unstable_NormalPriority,hU=Ys.unstable_LowPriority,VO=Ys.unstable_IdlePriority,P0=null,Ca=null;function fU(t){if(Ca&&typeof Ca.onCommitFiberRoot=="function")try{Ca.onCommitFiberRoot(P0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ui=Math.clz32?Math.clz32:gU,mU=Math.log,pU=Math.LN2;function gU(t){return t>>>=0,t===0?32:31-(mU(t)/pU|0)|0}var Lv=64,Fv=4194304;function dm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ax(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=dm(l):(a&=o,a!==0&&(r=dm(a)))}else o=n&~s,o!==0?r=dm(o):a!==0&&(r=dm(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ui(e),s=1<<n,r|=t[n],e&=~s;return r}function vU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ui(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=vU(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function a1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zO(){var t=Lv;return Lv<<=1,!(Lv&4194240)&&(Lv=64),t}function yb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ui(e),t[e]=n}function xU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ui(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function QN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ui(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Jt=0;function UO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BO,YN,WO,HO,qO,o1=!1,$v=[],kl=null,Il=null,Al=null,Ym=new Map,Jm=new Map,gl=[],wU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cC(t,e){switch(t){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Ym.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jm.delete(e.pointerId)}}function Wf(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=yg(e),e!==null&&YN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bU(t,e,n,r,s){switch(e){case"focusin":return kl=Wf(kl,t,e,n,r,s),!0;case"dragenter":return Il=Wf(Il,t,e,n,r,s),!0;case"mouseover":return Al=Wf(Al,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ym.set(a,Wf(Ym.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Jm.set(a,Wf(Jm.get(a)||null,t,e,n,r,s)),!0}return!1}function GO(t){var e=$c(t.target);if(e!==null){var n=Cu(e);if(n!==null){if(e=n.tag,e===13){if(e=MO(n),e!==null){t.blockedOn=e,qO(t.priority,function(){WO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ny(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=l1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);n1=r,n.target.dispatchEvent(r),n1=null}else return e=yg(n),e!==null&&YN(e),t.blockedOn=n,!1;e.shift()}return!0}function uC(t,e,n){Ny(t)&&n.delete(e)}function _U(){o1=!1,kl!==null&&Ny(kl)&&(kl=null),Il!==null&&Ny(Il)&&(Il=null),Al!==null&&Ny(Al)&&(Al=null),Ym.forEach(uC),Jm.forEach(uC)}function Hf(t,e){t.blockedOn===e&&(t.blockedOn=null,o1||(o1=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,_U)))}function Xm(t){function e(s){return Hf(s,t)}if(0<$v.length){Hf($v[0],t);for(var n=1;n<$v.length;n++){var r=$v[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kl!==null&&Hf(kl,t),Il!==null&&Hf(Il,t),Al!==null&&Hf(Al,t),Ym.forEach(e),Jm.forEach(e),n=0;n<gl.length;n++)r=gl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gl.length&&(n=gl[0],n.blockedOn===null);)GO(n),n.blockedOn===null&&gl.shift()}var Gd=Uo.ReactCurrentBatchConfig,ox=!0;function jU(t,e,n,r){var s=Jt,a=Gd.transition;Gd.transition=null;try{Jt=1,JN(t,e,n,r)}finally{Jt=s,Gd.transition=a}}function NU(t,e,n,r){var s=Jt,a=Gd.transition;Gd.transition=null;try{Jt=4,JN(t,e,n,r)}finally{Jt=s,Gd.transition=a}}function JN(t,e,n,r){if(ox){var s=l1(t,e,n,r);if(s===null)Cb(t,e,r,lx,n),cC(t,r);else if(bU(s,t,e,n,r))r.stopPropagation();else if(cC(t,r),e&4&&-1<wU.indexOf(t)){for(;s!==null;){var a=yg(s);if(a!==null&&BO(a),a=l1(t,e,n,r),a===null&&Cb(t,e,r,lx,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Cb(t,e,r,null,n)}}var lx=null;function l1(t,e,n,r){if(lx=null,t=KN(r),t=$c(t),t!==null)if(e=Cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lx=t,null}function KO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dU()){case ZN:return 1;case $O:return 4;case ix:case hU:return 16;case VO:return 536870912;default:return 16}default:return 16}}var Sl=null,XN=null,Sy=null;function ZO(){if(Sy)return Sy;var t,e=XN,n=e.length,r,s="value"in Sl?Sl.value:Sl.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Sy=s.slice(t,1<r?1-r:void 0)}function Ey(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vv(){return!0}function dC(){return!1}function ti(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Vv:dC,this.isPropagationStopped=dC,this}return Mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vv)},persist:function(){},isPersistent:Vv}),e}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eS=ti(Wh),vg=Mn({},Wh,{view:0,detail:0}),SU=ti(vg),xb,wb,qf,C0=Mn({},vg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qf&&(qf&&t.type==="mousemove"?(xb=t.screenX-qf.screenX,wb=t.screenY-qf.screenY):wb=xb=0,qf=t),xb)},movementY:function(t){return"movementY"in t?t.movementY:wb}}),hC=ti(C0),EU=Mn({},C0,{dataTransfer:0}),PU=ti(EU),CU=Mn({},vg,{relatedTarget:0}),bb=ti(CU),TU=Mn({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),RU=ti(TU),kU=Mn({},Wh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IU=ti(kU),AU=Mn({},Wh,{data:0}),fC=ti(AU),OU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DU[t])?!!e[t]:!1}function tS(){return LU}var FU=Mn({},vg,{key:function(t){if(t.key){var e=OU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ey(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tS,charCode:function(t){return t.type==="keypress"?Ey(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ey(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$U=ti(FU),VU=Mn({},C0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mC=ti(VU),zU=Mn({},vg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tS}),UU=ti(zU),BU=Mn({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),WU=ti(BU),HU=Mn({},C0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qU=ti(HU),GU=[9,13,27,32],nS=No&&"CompositionEvent"in window,Tm=null;No&&"documentMode"in document&&(Tm=document.documentMode);var KU=No&&"TextEvent"in window&&!Tm,QO=No&&(!nS||Tm&&8<Tm&&11>=Tm),pC=" ",gC=!1;function YO(t,e){switch(t){case"keyup":return GU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kd=!1;function ZU(t,e){switch(t){case"compositionend":return JO(e);case"keypress":return e.which!==32?null:(gC=!0,pC);case"textInput":return t=e.data,t===pC&&gC?null:t;default:return null}}function QU(t,e){if(kd)return t==="compositionend"||!nS&&YO(t,e)?(t=ZO(),Sy=XN=Sl=null,kd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QO&&e.locale!=="ko"?null:e.data;default:return null}}var YU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YU[t.type]:e==="textarea"}function XO(t,e,n,r){RO(r),e=cx(e,"onChange"),0<e.length&&(n=new eS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rm=null,ep=null;function JU(t){u4(t,0)}function T0(t){var e=Od(t);if(jO(e))return t}function XU(t,e){if(t==="change")return e}var e4=!1;if(No){var _b;if(No){var jb="oninput"in document;if(!jb){var yC=document.createElement("div");yC.setAttribute("oninput","return;"),jb=typeof yC.oninput=="function"}_b=jb}else _b=!1;e4=_b&&(!document.documentMode||9<document.documentMode)}function xC(){Rm&&(Rm.detachEvent("onpropertychange",t4),ep=Rm=null)}function t4(t){if(t.propertyName==="value"&&T0(ep)){var e=[];XO(e,ep,t,KN(t)),OO(JU,e)}}function eB(t,e,n){t==="focusin"?(xC(),Rm=e,ep=n,Rm.attachEvent("onpropertychange",t4)):t==="focusout"&&xC()}function tB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return T0(ep)}function nB(t,e){if(t==="click")return T0(e)}function rB(t,e){if(t==="input"||t==="change")return T0(e)}function sB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zi=typeof Object.is=="function"?Object.is:sB;function tp(t,e){if(Zi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!W_.call(e,s)||!Zi(t[s],e[s]))return!1}return!0}function wC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bC(t,e){var n=wC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wC(n)}}function n4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r4(){for(var t=window,e=nx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nx(t.document)}return e}function rS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iB(t){var e=r4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n4(n.ownerDocument.documentElement,n)){if(r!==null&&rS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=bC(n,a);var o=bC(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aB=No&&"documentMode"in document&&11>=document.documentMode,Id=null,c1=null,km=null,u1=!1;function _C(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;u1||Id==null||Id!==nx(r)||(r=Id,"selectionStart"in r&&rS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),km&&tp(km,r)||(km=r,r=cx(c1,"onSelect"),0<r.length&&(e=new eS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Id)))}function zv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ad={animationend:zv("Animation","AnimationEnd"),animationiteration:zv("Animation","AnimationIteration"),animationstart:zv("Animation","AnimationStart"),transitionend:zv("Transition","TransitionEnd")},Nb={},s4={};No&&(s4=document.createElement("div").style,"AnimationEvent"in window||(delete Ad.animationend.animation,delete Ad.animationiteration.animation,delete Ad.animationstart.animation),"TransitionEvent"in window||delete Ad.transitionend.transition);function R0(t){if(Nb[t])return Nb[t];if(!Ad[t])return t;var e=Ad[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s4)return Nb[t]=e[n];return t}var i4=R0("animationend"),a4=R0("animationiteration"),o4=R0("animationstart"),l4=R0("transitionend"),c4=new Map,jC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oc(t,e){c4.set(t,e),Pu(e,[t])}for(var Sb=0;Sb<jC.length;Sb++){var Eb=jC[Sb],oB=Eb.toLowerCase(),lB=Eb[0].toUpperCase()+Eb.slice(1);oc(oB,"on"+lB)}oc(i4,"onAnimationEnd");oc(a4,"onAnimationIteration");oc(o4,"onAnimationStart");oc("dblclick","onDoubleClick");oc("focusin","onFocus");oc("focusout","onBlur");oc(l4,"onTransitionEnd");ah("onMouseEnter",["mouseout","mouseover"]);ah("onMouseLeave",["mouseout","mouseover"]);ah("onPointerEnter",["pointerout","pointerover"]);ah("onPointerLeave",["pointerout","pointerover"]);Pu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cB=new Set("cancel close invalid load scroll toggle".split(" ").concat(hm));function NC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oU(r,e,void 0,t),t.currentTarget=null}function u4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;NC(s,l,d),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;NC(s,l,d),a=u}}}if(sx)throw t=i1,sx=!1,i1=null,t}function vn(t,e){var n=e[p1];n===void 0&&(n=e[p1]=new Set);var r=t+"__bubble";n.has(r)||(d4(e,t,2,!1),n.add(r))}function Pb(t,e,n){var r=0;e&&(r|=4),d4(n,t,r,e)}var Uv="_reactListening"+Math.random().toString(36).slice(2);function np(t){if(!t[Uv]){t[Uv]=!0,yO.forEach(function(n){n!=="selectionchange"&&(cB.has(n)||Pb(n,!1,t),Pb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uv]||(e[Uv]=!0,Pb("selectionchange",!1,e))}}function d4(t,e,n,r){switch(KO(e)){case 1:var s=jU;break;case 4:s=NU;break;default:s=JN}n=s.bind(null,e,n,t),s=void 0,!s1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cb(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=$c(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}OO(function(){var d=a,h=KN(n),m=[];e:{var p=c4.get(t);if(p!==void 0){var v=eS,N=t;switch(t){case"keypress":if(Ey(n)===0)break e;case"keydown":case"keyup":v=$U;break;case"focusin":N="focus",v=bb;break;case"focusout":N="blur",v=bb;break;case"beforeblur":case"afterblur":v=bb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=hC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=PU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=UU;break;case i4:case a4:case o4:v=RU;break;case l4:v=WU;break;case"scroll":v=SU;break;case"wheel":v=qU;break;case"copy":case"cut":case"paste":v=IU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=mC}var b=(e&4)!==0,j=!b&&t==="scroll",_=b?p!==null?p+"Capture":null:p;b=[];for(var x=d,S;x!==null;){S=x;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,_!==null&&(C=Qm(x,_),C!=null&&b.push(rp(x,C,S)))),j)break;x=x.return}0<b.length&&(p=new v(p,N,null,n,h),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==n1&&(N=n.relatedTarget||n.fromElement)&&($c(N)||N[So]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(N=n.relatedTarget||n.toElement,v=d,N=N?$c(N):null,N!==null&&(j=Cu(N),N!==j||N.tag!==5&&N.tag!==6)&&(N=null)):(v=null,N=d),v!==N)){if(b=hC,C="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=mC,C="onPointerLeave",_="onPointerEnter",x="pointer"),j=v==null?p:Od(v),S=N==null?p:Od(N),p=new b(C,x+"leave",v,n,h),p.target=j,p.relatedTarget=S,C=null,$c(h)===d&&(b=new b(_,x+"enter",N,n,h),b.target=S,b.relatedTarget=j,C=b),j=C,v&&N)t:{for(b=v,_=N,x=0,S=b;S;S=hd(S))x++;for(S=0,C=_;C;C=hd(C))S++;for(;0<x-S;)b=hd(b),x--;for(;0<S-x;)_=hd(_),S--;for(;x--;){if(b===_||_!==null&&b===_.alternate)break t;b=hd(b),_=hd(_)}b=null}else b=null;v!==null&&SC(m,p,v,b,!1),N!==null&&j!==null&&SC(m,j,N,b,!0)}}e:{if(p=d?Od(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var R=XU;else if(vC(p))if(e4)R=rB;else{R=tB;var V=eB}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=nB);if(R&&(R=R(t,d))){XO(m,R,n,h);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Y_(p,"number",p.value)}switch(V=d?Od(d):window,t){case"focusin":(vC(V)||V.contentEditable==="true")&&(Id=V,c1=d,km=null);break;case"focusout":km=c1=Id=null;break;case"mousedown":u1=!0;break;case"contextmenu":case"mouseup":case"dragend":u1=!1,_C(m,n,h);break;case"selectionchange":if(aB)break;case"keydown":case"keyup":_C(m,n,h)}var k;if(nS)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else kd?YO(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(QO&&n.locale!=="ko"&&(kd||I!=="onCompositionStart"?I==="onCompositionEnd"&&kd&&(k=ZO()):(Sl=h,XN="value"in Sl?Sl.value:Sl.textContent,kd=!0)),V=cx(d,I),0<V.length&&(I=new fC(I,t,null,n,h),m.push({event:I,listeners:V}),k?I.data=k:(k=JO(n),k!==null&&(I.data=k)))),(k=KU?ZU(t,n):QU(t,n))&&(d=cx(d,"onBeforeInput"),0<d.length&&(h=new fC("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=k))}u4(m,e)})}function rp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Qm(t,n),a!=null&&r.unshift(rp(t,a,s)),a=Qm(t,e),a!=null&&r.push(rp(t,a,s))),t=t.return}return r}function hd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SC(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Qm(n,a),u!=null&&o.unshift(rp(n,u,l))):s||(u=Qm(n,a),u!=null&&o.push(rp(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uB=/\r\n?/g,dB=/\u0000|\uFFFD/g;function EC(t){return(typeof t=="string"?t:""+t).replace(uB,`
`).replace(dB,"")}function Bv(t,e,n){if(e=EC(e),EC(t)!==e&&n)throw Error(Ie(425))}function ux(){}var d1=null,h1=null;function f1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var m1=typeof setTimeout=="function"?setTimeout:void 0,hB=typeof clearTimeout=="function"?clearTimeout:void 0,PC=typeof Promise=="function"?Promise:void 0,fB=typeof queueMicrotask=="function"?queueMicrotask:typeof PC<"u"?function(t){return PC.resolve(null).then(t).catch(mB)}:m1;function mB(t){setTimeout(function(){throw t})}function Tb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xm(e)}function Ol(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function CC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hh=Math.random().toString(36).slice(2),xa="__reactFiber$"+Hh,sp="__reactProps$"+Hh,So="__reactContainer$"+Hh,p1="__reactEvents$"+Hh,pB="__reactListeners$"+Hh,gB="__reactHandles$"+Hh;function $c(t){var e=t[xa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[So]||n[xa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=CC(t);t!==null;){if(n=t[xa])return n;t=CC(t)}return e}t=n,n=t.parentNode}return null}function yg(t){return t=t[xa]||t[So],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Od(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function k0(t){return t[sp]||null}var g1=[],Md=-1;function lc(t){return{current:t}}function wn(t){0>Md||(t.current=g1[Md],g1[Md]=null,Md--)}function hn(t,e){Md++,g1[Md]=t.current,t.current=e}var Gl={},Xr=lc(Gl),Rs=lc(!1),iu=Gl;function oh(t,e){var n=t.type.contextTypes;if(!n)return Gl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ks(t){return t=t.childContextTypes,t!=null}function dx(){wn(Rs),wn(Xr)}function TC(t,e,n){if(Xr.current!==Gl)throw Error(Ie(168));hn(Xr,e),hn(Rs,n)}function h4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ie(108,eU(t)||"Unknown",s));return Mn({},n,r)}function hx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gl,iu=Xr.current,hn(Xr,t),hn(Rs,Rs.current),!0}function RC(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=h4(t,e,iu),r.__reactInternalMemoizedMergedChildContext=t,wn(Rs),wn(Xr),hn(Xr,t)):wn(Rs),hn(Rs,n)}var mo=null,I0=!1,Rb=!1;function f4(t){mo===null?mo=[t]:mo.push(t)}function vB(t){I0=!0,f4(t)}function cc(){if(!Rb&&mo!==null){Rb=!0;var t=0,e=Jt;try{var n=mo;for(Jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mo=null,I0=!1}catch(s){throw mo!==null&&(mo=mo.slice(t+1)),FO(ZN,cc),s}finally{Jt=e,Rb=!1}}return null}var Dd=[],Ld=0,fx=null,mx=0,di=[],hi=0,au=null,go=1,vo="";function Ic(t,e){Dd[Ld++]=mx,Dd[Ld++]=fx,fx=t,mx=e}function m4(t,e,n){di[hi++]=go,di[hi++]=vo,di[hi++]=au,au=t;var r=go;t=vo;var s=32-Ui(r)-1;r&=~(1<<s),n+=1;var a=32-Ui(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,go=1<<32-Ui(e)+s|n<<s|r,vo=a+t}else go=1<<a|n<<s|r,vo=t}function sS(t){t.return!==null&&(Ic(t,1),m4(t,1,0))}function iS(t){for(;t===fx;)fx=Dd[--Ld],Dd[Ld]=null,mx=Dd[--Ld],Dd[Ld]=null;for(;t===au;)au=di[--hi],di[hi]=null,vo=di[--hi],di[hi]=null,go=di[--hi],di[hi]=null}var Gs=null,Ws=null,Sn=!1,Fi=null;function p4(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gs=t,Ws=Ol(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gs=t,Ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=au!==null?{id:go,overflow:vo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gs=t,Ws=null,!0):!1;default:return!1}}function v1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function y1(t){if(Sn){var e=Ws;if(e){var n=e;if(!kC(t,e)){if(v1(t))throw Error(Ie(418));e=Ol(n.nextSibling);var r=Gs;e&&kC(t,e)?p4(r,n):(t.flags=t.flags&-4097|2,Sn=!1,Gs=t)}}else{if(v1(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,Sn=!1,Gs=t}}}function IC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gs=t}function Wv(t){if(t!==Gs)return!1;if(!Sn)return IC(t),Sn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!f1(t.type,t.memoizedProps)),e&&(e=Ws)){if(v1(t))throw g4(),Error(Ie(418));for(;e;)p4(t,e),e=Ol(e.nextSibling)}if(IC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ws=Ol(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ws=null}}else Ws=Gs?Ol(t.stateNode.nextSibling):null;return!0}function g4(){for(var t=Ws;t;)t=Ol(t.nextSibling)}function lh(){Ws=Gs=null,Sn=!1}function aS(t){Fi===null?Fi=[t]:Fi.push(t)}var yB=Uo.ReactCurrentBatchConfig;function Gf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function Hv(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AC(t){var e=t._init;return e(t._payload)}function v4(t){function e(_,x){if(t){var S=_.deletions;S===null?(_.deletions=[x],_.flags|=16):S.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=Fl(_,x),_.index=0,_.sibling=null,_}function a(_,x,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<x?(_.flags|=2,x):S):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,x,S,C){return x===null||x.tag!==6?(x=Lb(S,_.mode,C),x.return=_,x):(x=s(x,S),x.return=_,x)}function u(_,x,S,C){var R=S.type;return R===Rd?h(_,x,S.props.children,C,S.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===hl&&AC(R)===x.type)?(C=s(x,S.props),C.ref=Gf(_,x,S),C.return=_,C):(C=Ay(S.type,S.key,S.props,null,_.mode,C),C.ref=Gf(_,x,S),C.return=_,C)}function d(_,x,S,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Fb(S,_.mode,C),x.return=_,x):(x=s(x,S.children||[]),x.return=_,x)}function h(_,x,S,C,R){return x===null||x.tag!==7?(x=Zc(S,_.mode,C,R),x.return=_,x):(x=s(x,S),x.return=_,x)}function m(_,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Lb(""+x,_.mode,S),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ov:return S=Ay(x.type,x.key,x.props,null,_.mode,S),S.ref=Gf(_,null,x),S.return=_,S;case Td:return x=Fb(x,_.mode,S),x.return=_,x;case hl:var C=x._init;return m(_,C(x._payload),S)}if(um(x)||Uf(x))return x=Zc(x,_.mode,S,null),x.return=_,x;Hv(_,x)}return null}function p(_,x,S,C){var R=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:l(_,x,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ov:return S.key===R?u(_,x,S,C):null;case Td:return S.key===R?d(_,x,S,C):null;case hl:return R=S._init,p(_,x,R(S._payload),C)}if(um(S)||Uf(S))return R!==null?null:h(_,x,S,C,null);Hv(_,S)}return null}function v(_,x,S,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(S)||null,l(x,_,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ov:return _=_.get(C.key===null?S:C.key)||null,u(x,_,C,R);case Td:return _=_.get(C.key===null?S:C.key)||null,d(x,_,C,R);case hl:var V=C._init;return v(_,x,S,V(C._payload),R)}if(um(C)||Uf(C))return _=_.get(S)||null,h(x,_,C,R,null);Hv(x,C)}return null}function N(_,x,S,C){for(var R=null,V=null,k=x,I=x=0,$=null;k!==null&&I<S.length;I++){k.index>I?($=k,k=null):$=k.sibling;var T=p(_,k,S[I],C);if(T===null){k===null&&(k=$);break}t&&k&&T.alternate===null&&e(_,k),x=a(T,x,I),V===null?R=T:V.sibling=T,V=T,k=$}if(I===S.length)return n(_,k),Sn&&Ic(_,I),R;if(k===null){for(;I<S.length;I++)k=m(_,S[I],C),k!==null&&(x=a(k,x,I),V===null?R=k:V.sibling=k,V=k);return Sn&&Ic(_,I),R}for(k=r(_,k);I<S.length;I++)$=v(k,_,I,S[I],C),$!==null&&(t&&$.alternate!==null&&k.delete($.key===null?I:$.key),x=a($,x,I),V===null?R=$:V.sibling=$,V=$);return t&&k.forEach(function(M){return e(_,M)}),Sn&&Ic(_,I),R}function b(_,x,S,C){var R=Uf(S);if(typeof R!="function")throw Error(Ie(150));if(S=R.call(S),S==null)throw Error(Ie(151));for(var V=R=null,k=x,I=x=0,$=null,T=S.next();k!==null&&!T.done;I++,T=S.next()){k.index>I?($=k,k=null):$=k.sibling;var M=p(_,k,T.value,C);if(M===null){k===null&&(k=$);break}t&&k&&M.alternate===null&&e(_,k),x=a(M,x,I),V===null?R=M:V.sibling=M,V=M,k=$}if(T.done)return n(_,k),Sn&&Ic(_,I),R;if(k===null){for(;!T.done;I++,T=S.next())T=m(_,T.value,C),T!==null&&(x=a(T,x,I),V===null?R=T:V.sibling=T,V=T);return Sn&&Ic(_,I),R}for(k=r(_,k);!T.done;I++,T=S.next())T=v(k,_,I,T.value,C),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?I:T.key),x=a(T,x,I),V===null?R=T:V.sibling=T,V=T);return t&&k.forEach(function(D){return e(_,D)}),Sn&&Ic(_,I),R}function j(_,x,S,C){if(typeof S=="object"&&S!==null&&S.type===Rd&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ov:e:{for(var R=S.key,V=x;V!==null;){if(V.key===R){if(R=S.type,R===Rd){if(V.tag===7){n(_,V.sibling),x=s(V,S.props.children),x.return=_,_=x;break e}}else if(V.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===hl&&AC(R)===V.type){n(_,V.sibling),x=s(V,S.props),x.ref=Gf(_,V,S),x.return=_,_=x;break e}n(_,V);break}else e(_,V);V=V.sibling}S.type===Rd?(x=Zc(S.props.children,_.mode,C,S.key),x.return=_,_=x):(C=Ay(S.type,S.key,S.props,null,_.mode,C),C.ref=Gf(_,x,S),C.return=_,_=C)}return o(_);case Td:e:{for(V=S.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(_,x.sibling),x=s(x,S.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=Fb(S,_.mode,C),x.return=_,_=x}return o(_);case hl:return V=S._init,j(_,x,V(S._payload),C)}if(um(S))return N(_,x,S,C);if(Uf(S))return b(_,x,S,C);Hv(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,S),x.return=_,_=x):(n(_,x),x=Lb(S,_.mode,C),x.return=_,_=x),o(_)):n(_,x)}return j}var ch=v4(!0),y4=v4(!1),px=lc(null),gx=null,Fd=null,oS=null;function lS(){oS=Fd=gx=null}function cS(t){var e=px.current;wn(px),t._currentValue=e}function x1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Kd(t,e){gx=t,oS=Fd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Es=!0),t.firstContext=null)}function _i(t){var e=t._currentValue;if(oS!==t)if(t={context:t,memoizedValue:e,next:null},Fd===null){if(gx===null)throw Error(Ie(308));Fd=t,gx.dependencies={lanes:0,firstContext:t}}else Fd=Fd.next=t;return e}var Vc=null;function uS(t){Vc===null?Vc=[t]:Vc.push(t)}function x4(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,uS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Eo(t,r)}function Eo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fl=!1;function dS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ml(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Eo(t,n)}return s=r.interleaved,s===null?(e.next=e,uS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Eo(t,n)}function Py(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,QN(t,n)}}function OC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vx(t,e,n,r){var s=t.updateQueue;fl=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,h=d=u=null,l=a;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,b=l;switch(p=e,v=n,b.tag){case 1:if(N=b.payload,typeof N=="function"){m=N.call(v,m,p);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=b.payload,p=typeof N=="function"?N.call(v,m,p):N,p==null)break e;m=Mn({},m,p);break e;case 2:fl=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,u=m):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);lu|=o,t.lanes=o,t.memoizedState=m}}function MC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ie(191,s));s.call(r)}}}var xg={},Ta=lc(xg),ip=lc(xg),ap=lc(xg);function zc(t){if(t===xg)throw Error(Ie(174));return t}function hS(t,e){switch(hn(ap,e),hn(ip,t),hn(Ta,xg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:X_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=X_(e,t)}wn(Ta),hn(Ta,e)}function uh(){wn(Ta),wn(ip),wn(ap)}function b4(t){zc(ap.current);var e=zc(Ta.current),n=X_(e,t.type);e!==n&&(hn(ip,t),hn(Ta,n))}function fS(t){ip.current===t&&(wn(Ta),wn(ip))}var An=lc(0);function yx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kb=[];function mS(){for(var t=0;t<kb.length;t++)kb[t]._workInProgressVersionPrimary=null;kb.length=0}var Cy=Uo.ReactCurrentDispatcher,Ib=Uo.ReactCurrentBatchConfig,ou=0,On=null,pr=null,Sr=null,xx=!1,Im=!1,op=0,xB=0;function zr(){throw Error(Ie(321))}function pS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zi(t[n],e[n]))return!1;return!0}function gS(t,e,n,r,s,a){if(ou=a,On=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cy.current=t===null||t.memoizedState===null?jB:NB,t=n(r,s),Im){a=0;do{if(Im=!1,op=0,25<=a)throw Error(Ie(301));a+=1,Sr=pr=null,e.updateQueue=null,Cy.current=SB,t=n(r,s)}while(Im)}if(Cy.current=wx,e=pr!==null&&pr.next!==null,ou=0,Sr=pr=On=null,xx=!1,e)throw Error(Ie(300));return t}function vS(){var t=op!==0;return op=0,t}function ma(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?On.memoizedState=Sr=t:Sr=Sr.next=t,Sr}function ji(){if(pr===null){var t=On.alternate;t=t!==null?t.memoizedState:null}else t=pr.next;var e=Sr===null?On.memoizedState:Sr.next;if(e!==null)Sr=e,pr=t;else{if(t===null)throw Error(Ie(310));pr=t,t={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sr===null?On.memoizedState=Sr=t:Sr=Sr.next=t}return Sr}function lp(t,e){return typeof e=="function"?e(t):e}function Ab(t){var e=ji(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=pr,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((ou&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,On.lanes|=h,lu|=h}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=l,Zi(r,e.memoizedState)||(Es=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,On.lanes|=a,lu|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ob(t){var e=ji(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Zi(a,e.memoizedState)||(Es=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function _4(){}function j4(t,e){var n=On,r=ji(),s=e(),a=!Zi(r.memoizedState,s);if(a&&(r.memoizedState=s,Es=!0),r=r.queue,yS(E4.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Sr!==null&&Sr.memoizedState.tag&1){if(n.flags|=2048,cp(9,S4.bind(null,n,r,s,e),void 0,null),Pr===null)throw Error(Ie(349));ou&30||N4(n,e,s)}return s}function N4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=On.updateQueue,e===null?(e={lastEffect:null,stores:null},On.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S4(t,e,n,r){e.value=n,e.getSnapshot=r,P4(e)&&C4(t)}function E4(t,e,n){return n(function(){P4(e)&&C4(t)})}function P4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zi(t,n)}catch{return!0}}function C4(t){var e=Eo(t,1);e!==null&&Bi(e,t,1,-1)}function DC(t){var e=ma();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lp,lastRenderedState:t},e.queue=t,t=t.dispatch=_B.bind(null,On,t),[e.memoizedState,t]}function cp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=On.updateQueue,e===null?(e={lastEffect:null,stores:null},On.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T4(){return ji().memoizedState}function Ty(t,e,n,r){var s=ma();On.flags|=t,s.memoizedState=cp(1|e,n,void 0,r===void 0?null:r)}function A0(t,e,n,r){var s=ji();r=r===void 0?null:r;var a=void 0;if(pr!==null){var o=pr.memoizedState;if(a=o.destroy,r!==null&&pS(r,o.deps)){s.memoizedState=cp(e,n,a,r);return}}On.flags|=t,s.memoizedState=cp(1|e,n,a,r)}function LC(t,e){return Ty(8390656,8,t,e)}function yS(t,e){return A0(2048,8,t,e)}function R4(t,e){return A0(4,2,t,e)}function k4(t,e){return A0(4,4,t,e)}function I4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A4(t,e,n){return n=n!=null?n.concat([t]):null,A0(4,4,I4.bind(null,e,t),n)}function xS(){}function O4(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function M4(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function D4(t,e,n){return ou&21?(Zi(n,e)||(n=zO(),On.lanes|=n,lu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Es=!0),t.memoizedState=n)}function wB(t,e){var n=Jt;Jt=n!==0&&4>n?n:4,t(!0);var r=Ib.transition;Ib.transition={};try{t(!1),e()}finally{Jt=n,Ib.transition=r}}function L4(){return ji().memoizedState}function bB(t,e,n){var r=Ll(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F4(t))$4(e,n);else if(n=x4(t,e,n,r),n!==null){var s=ds();Bi(n,t,r,s),V4(n,e,r)}}function _B(t,e,n){var r=Ll(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F4(t))$4(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zi(l,o)){var u=e.interleaved;u===null?(s.next=s,uS(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=x4(t,e,s,r),n!==null&&(s=ds(),Bi(n,t,r,s),V4(n,e,r))}}function F4(t){var e=t.alternate;return t===On||e!==null&&e===On}function $4(t,e){Im=xx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,QN(t,n)}}var wx={readContext:_i,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},jB={readContext:_i,useCallback:function(t,e){return ma().memoizedState=[t,e===void 0?null:e],t},useContext:_i,useEffect:LC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ty(4194308,4,I4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ty(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ty(4,2,t,e)},useMemo:function(t,e){var n=ma();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ma();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bB.bind(null,On,t),[r.memoizedState,t]},useRef:function(t){var e=ma();return t={current:t},e.memoizedState=t},useState:DC,useDebugValue:xS,useDeferredValue:function(t){return ma().memoizedState=t},useTransition:function(){var t=DC(!1),e=t[0];return t=wB.bind(null,t[1]),ma().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=On,s=ma();if(Sn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),Pr===null)throw Error(Ie(349));ou&30||N4(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,LC(E4.bind(null,r,a,t),[t]),r.flags|=2048,cp(9,S4.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ma(),e=Pr.identifierPrefix;if(Sn){var n=vo,r=go;n=(r&~(1<<32-Ui(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=op++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NB={readContext:_i,useCallback:O4,useContext:_i,useEffect:yS,useImperativeHandle:A4,useInsertionEffect:R4,useLayoutEffect:k4,useMemo:M4,useReducer:Ab,useRef:T4,useState:function(){return Ab(lp)},useDebugValue:xS,useDeferredValue:function(t){var e=ji();return D4(e,pr.memoizedState,t)},useTransition:function(){var t=Ab(lp)[0],e=ji().memoizedState;return[t,e]},useMutableSource:_4,useSyncExternalStore:j4,useId:L4,unstable_isNewReconciler:!1},SB={readContext:_i,useCallback:O4,useContext:_i,useEffect:yS,useImperativeHandle:A4,useInsertionEffect:R4,useLayoutEffect:k4,useMemo:M4,useReducer:Ob,useRef:T4,useState:function(){return Ob(lp)},useDebugValue:xS,useDeferredValue:function(t){var e=ji();return pr===null?e.memoizedState=t:D4(e,pr.memoizedState,t)},useTransition:function(){var t=Ob(lp)[0],e=ji().memoizedState;return[t,e]},useMutableSource:_4,useSyncExternalStore:j4,useId:L4,unstable_isNewReconciler:!1};function Mi(t,e){if(t&&t.defaultProps){e=Mn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function w1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Mn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var O0={isMounted:function(t){return(t=t._reactInternals)?Cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ds(),s=Ll(t),a=bo(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ml(t,a,s),e!==null&&(Bi(e,t,s,r),Py(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ds(),s=Ll(t),a=bo(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ml(t,a,s),e!==null&&(Bi(e,t,s,r),Py(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ds(),r=Ll(t),s=bo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ml(t,s,r),e!==null&&(Bi(e,t,r,n),Py(e,t,r))}};function FC(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!tp(n,r)||!tp(s,a):!0}function z4(t,e,n){var r=!1,s=Gl,a=e.contextType;return typeof a=="object"&&a!==null?a=_i(a):(s=ks(e)?iu:Xr.current,r=e.contextTypes,a=(r=r!=null)?oh(t,s):Gl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=O0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function $C(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&O0.enqueueReplaceState(e,e.state,null)}function b1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dS(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=_i(a):(a=ks(e)?iu:Xr.current,s.context=oh(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(w1(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&O0.enqueueReplaceState(s,s.state,null),vx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function dh(t,e){try{var n="",r=e;do n+=Xz(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Mb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var EB=typeof WeakMap=="function"?WeakMap:Map;function U4(t,e,n){n=bo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_x||(_x=!0,I1=r),_1(t,e)},n}function B4(t,e,n){n=bo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){_1(t,e),typeof r!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new EB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VB.bind(null,t,e,n),e.then(t,t))}function zC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UC(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bo(-1,1),e.tag=2,Ml(n,e,1))),n.lanes|=1),t)}var PB=Uo.ReactCurrentOwner,Es=!1;function os(t,e,n,r){e.child=t===null?y4(e,null,n,r):ch(e,t.child,n,r)}function BC(t,e,n,r,s){n=n.render;var a=e.ref;return Kd(e,s),r=gS(t,e,n,r,a,s),n=vS(),t!==null&&!Es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Po(t,e,s)):(Sn&&n&&sS(e),e.flags|=1,os(t,e,r,s),e.child)}function WC(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!PS(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,W4(t,e,a,r,s)):(t=Ay(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:tp,n(o,r)&&t.ref===e.ref)return Po(t,e,s)}return e.flags|=1,t=Fl(a,r),t.ref=e.ref,t.return=e,e.child=t}function W4(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(tp(a,r)&&t.ref===e.ref)if(Es=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Es=!0);else return e.lanes=t.lanes,Po(t,e,s)}return j1(t,e,n,r,s)}function H4(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(Vd,Us),Us|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,hn(Vd,Us),Us|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,hn(Vd,Us),Us|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,hn(Vd,Us),Us|=r;return os(t,e,s,n),e.child}function q4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function j1(t,e,n,r,s){var a=ks(n)?iu:Xr.current;return a=oh(e,a),Kd(e,s),n=gS(t,e,n,r,a,s),r=vS(),t!==null&&!Es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Po(t,e,s)):(Sn&&r&&sS(e),e.flags|=1,os(t,e,n,s),e.child)}function HC(t,e,n,r,s){if(ks(n)){var a=!0;hx(e)}else a=!1;if(Kd(e,s),e.stateNode===null)Ry(t,e),z4(e,n,r),b1(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=_i(d):(d=ks(n)?iu:Xr.current,d=oh(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&$C(e,o,r,d),fl=!1;var p=e.memoizedState;o.state=p,vx(e,r,o,s),u=e.memoizedState,l!==r||p!==u||Rs.current||fl?(typeof h=="function"&&(w1(e,n,h,r),u=e.memoizedState),(l=fl||FC(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w4(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Mi(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_i(u):(u=ks(n)?iu:Xr.current,u=oh(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&$C(e,o,r,u),fl=!1,p=e.memoizedState,o.state=p,vx(e,r,o,s);var N=e.memoizedState;l!==m||p!==N||Rs.current||fl?(typeof v=="function"&&(w1(e,n,v,r),N=e.memoizedState),(d=fl||FC(e,n,d,r,p,N,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return N1(t,e,n,r,a,s)}function N1(t,e,n,r,s,a){q4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&RC(e,n,!1),Po(t,e,a);r=e.stateNode,PB.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ch(e,t.child,null,a),e.child=ch(e,null,l,a)):os(t,e,l,a),e.memoizedState=r.state,s&&RC(e,n,!0),e.child}function G4(t){var e=t.stateNode;e.pendingContext?TC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TC(t,e.context,!1),hS(t,e.containerInfo)}function qC(t,e,n,r,s){return lh(),aS(s),e.flags|=256,os(t,e,n,r),e.child}var S1={dehydrated:null,treeContext:null,retryLane:0};function E1(t){return{baseLanes:t,cachePool:null,transitions:null}}function K4(t,e,n){var r=e.pendingProps,s=An.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),hn(An,s&1),t===null)return y1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=L0(o,r,0,null),t=Zc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=E1(n),e.memoizedState=S1,t):wS(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return CB(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fl(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Fl(l,a):(a=Zc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?E1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=S1,r}return a=t.child,t=a.sibling,r=Fl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wS(t,e){return e=L0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qv(t,e,n,r){return r!==null&&aS(r),ch(e,t.child,null,n),t=wS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CB(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Mb(Error(Ie(422))),qv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=L0({mode:"visible",children:r.children},s,0,null),a=Zc(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ch(e,t.child,null,o),e.child.memoizedState=E1(o),e.memoizedState=S1,a);if(!(e.mode&1))return qv(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ie(419)),r=Mb(a,r,void 0),qv(t,e,o,r)}if(l=(o&t.childLanes)!==0,Es||l){if(r=Pr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Eo(t,s),Bi(r,t,s,-1))}return ES(),r=Mb(Error(Ie(421))),qv(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zB.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ws=Ol(s.nextSibling),Gs=e,Sn=!0,Fi=null,t!==null&&(di[hi++]=go,di[hi++]=vo,di[hi++]=au,go=t.id,vo=t.overflow,au=e),e=wS(e,r.children),e.flags|=4096,e)}function GC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),x1(t.return,e,n)}function Db(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Z4(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(os(t,e,r.children,n),r=An.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GC(t,n,e);else if(t.tag===19)GC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hn(An,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Db(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Db(e,!0,n,null,a);break;case"together":Db(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ry(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Po(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=Fl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TB(t,e,n){switch(e.tag){case 3:G4(e),lh();break;case 5:b4(e);break;case 1:ks(e.type)&&hx(e);break;case 4:hS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;hn(px,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(An,An.current&1),e.flags|=128,null):n&e.child.childLanes?K4(t,e,n):(hn(An,An.current&1),t=Po(t,e,n),t!==null?t.sibling:null);hn(An,An.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z4(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),hn(An,An.current),r)break;return null;case 22:case 23:return e.lanes=0,H4(t,e,n)}return Po(t,e,n)}var Q4,P1,Y4,J4;Q4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P1=function(){};Y4=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,zc(Ta.current);var a=null;switch(n){case"input":s=Z_(t,s),r=Z_(t,r),a=[];break;case"select":s=Mn({},s,{value:void 0}),r=Mn({},r,{value:void 0}),a=[];break;case"textarea":s=J_(t,s),r=J_(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ux)}e1(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Km.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Km.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&vn("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};J4=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kf(t,e){if(!Sn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ur(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RB(t,e,n){var r=e.pendingProps;switch(iS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(e),null;case 1:return ks(e.type)&&dx(),Ur(e),null;case 3:return r=e.stateNode,uh(),wn(Rs),wn(Xr),mS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fi!==null&&(M1(Fi),Fi=null))),P1(t,e),Ur(e),null;case 5:fS(e);var s=zc(ap.current);if(n=e.type,t!==null&&e.stateNode!=null)Y4(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return Ur(e),null}if(t=zc(Ta.current),Wv(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[xa]=e,r[sp]=a,t=(e.mode&1)!==0,n){case"dialog":vn("cancel",r),vn("close",r);break;case"iframe":case"object":case"embed":vn("load",r);break;case"video":case"audio":for(s=0;s<hm.length;s++)vn(hm[s],r);break;case"source":vn("error",r);break;case"img":case"image":case"link":vn("error",r),vn("load",r);break;case"details":vn("toggle",r);break;case"input":nC(r,a),vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},vn("invalid",r);break;case"textarea":sC(r,a),vn("invalid",r)}e1(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Bv(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Bv(r.textContent,l,t),s=["children",""+l]):Km.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&vn("scroll",r)}switch(n){case"input":Mv(r),rC(r,a,!0);break;case"textarea":Mv(r),iC(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ux)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xa]=e,t[sp]=r,Q4(t,e,!1,!1),e.stateNode=t;e:{switch(o=t1(n,r),n){case"dialog":vn("cancel",t),vn("close",t),s=r;break;case"iframe":case"object":case"embed":vn("load",t),s=r;break;case"video":case"audio":for(s=0;s<hm.length;s++)vn(hm[s],t);s=r;break;case"source":vn("error",t),s=r;break;case"img":case"image":case"link":vn("error",t),vn("load",t),s=r;break;case"details":vn("toggle",t),s=r;break;case"input":nC(t,r),s=Z_(t,r),vn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Mn({},r,{value:void 0}),vn("invalid",t);break;case"textarea":sC(t,r),s=J_(t,r),vn("invalid",t);break;default:s=r}e1(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?TO(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&PO(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zm(t,u):typeof u=="number"&&Zm(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Km.hasOwnProperty(a)?u!=null&&a==="onScroll"&&vn("scroll",t):u!=null&&WN(t,a,u,o))}switch(n){case"input":Mv(t),rC(t,r,!1);break;case"textarea":Mv(t),iC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ql(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Wd(t,!!r.multiple,a,!1):r.defaultValue!=null&&Wd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ux)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ur(e),null;case 6:if(t&&e.stateNode!=null)J4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=zc(ap.current),zc(Ta.current),Wv(e)){if(r=e.stateNode,n=e.memoizedProps,r[xa]=e,(a=r.nodeValue!==n)&&(t=Gs,t!==null))switch(t.tag){case 3:Bv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bv(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xa]=e,e.stateNode=r}return Ur(e),null;case 13:if(wn(An),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Sn&&Ws!==null&&e.mode&1&&!(e.flags&128))g4(),lh(),e.flags|=98560,a=!1;else if(a=Wv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ie(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ie(317));a[xa]=e}else lh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ur(e),a=!1}else Fi!==null&&(M1(Fi),Fi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||An.current&1?gr===0&&(gr=3):ES())),e.updateQueue!==null&&(e.flags|=4),Ur(e),null);case 4:return uh(),P1(t,e),t===null&&np(e.stateNode.containerInfo),Ur(e),null;case 10:return cS(e.type._context),Ur(e),null;case 17:return ks(e.type)&&dx(),Ur(e),null;case 19:if(wn(An),a=e.memoizedState,a===null)return Ur(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Kf(a,!1);else{if(gr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yx(t),o!==null){for(e.flags|=128,Kf(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hn(An,An.current&1|2),e.child}t=t.sibling}a.tail!==null&&Gn()>hh&&(e.flags|=128,r=!0,Kf(a,!1),e.lanes=4194304)}else{if(!r)if(t=yx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Sn)return Ur(e),null}else 2*Gn()-a.renderingStartTime>hh&&n!==1073741824&&(e.flags|=128,r=!0,Kf(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Gn(),e.sibling=null,n=An.current,hn(An,r?n&1|2:n&1),e):(Ur(e),null);case 22:case 23:return SS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Us&1073741824&&(Ur(e),e.subtreeFlags&6&&(e.flags|=8192)):Ur(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function kB(t,e){switch(iS(e),e.tag){case 1:return ks(e.type)&&dx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uh(),wn(Rs),wn(Xr),mS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fS(e),null;case 13:if(wn(An),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));lh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wn(An),null;case 4:return uh(),null;case 10:return cS(e.type._context),null;case 22:case 23:return SS(),null;case 24:return null;default:return null}}var Gv=!1,Gr=!1,IB=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function $d(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function C1(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var KC=!1;function AB(t,e){if(d1=ox,t=r4(),rS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===s&&(l=o),p===a&&++h===r&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(h1={focusedElem:t,selectionRange:n},ox=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var b=N.memoizedProps,j=N.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:Mi(e.type,b),j);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(C){Vn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return N=KC,KC=!1,N}function Am(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&C1(e,n,a)}s=s.next}while(s!==r)}}function M0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function T1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X4(t){var e=t.alternate;e!==null&&(t.alternate=null,X4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xa],delete e[sp],delete e[p1],delete e[pB],delete e[gB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eM(t){return t.tag===5||t.tag===3||t.tag===4}function ZC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ux));else if(r!==4&&(t=t.child,t!==null))for(R1(t,e,n),t=t.sibling;t!==null;)R1(t,e,n),t=t.sibling}function k1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(k1(t,e,n),t=t.sibling;t!==null;)k1(t,e,n),t=t.sibling}var kr=null,Di=!1;function rl(t,e,n){for(n=n.child;n!==null;)tM(t,e,n),n=n.sibling}function tM(t,e,n){if(Ca&&typeof Ca.onCommitFiberUnmount=="function")try{Ca.onCommitFiberUnmount(P0,n)}catch{}switch(n.tag){case 5:Gr||$d(n,e);case 6:var r=kr,s=Di;kr=null,rl(t,e,n),kr=r,Di=s,kr!==null&&(Di?(t=kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kr.removeChild(n.stateNode));break;case 18:kr!==null&&(Di?(t=kr,n=n.stateNode,t.nodeType===8?Tb(t.parentNode,n):t.nodeType===1&&Tb(t,n),Xm(t)):Tb(kr,n.stateNode));break;case 4:r=kr,s=Di,kr=n.stateNode.containerInfo,Di=!0,rl(t,e,n),kr=r,Di=s;break;case 0:case 11:case 14:case 15:if(!Gr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&C1(n,e,o),s=s.next}while(s!==r)}rl(t,e,n);break;case 1:if(!Gr&&($d(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Vn(n,e,l)}rl(t,e,n);break;case 21:rl(t,e,n);break;case 22:n.mode&1?(Gr=(r=Gr)||n.memoizedState!==null,rl(t,e,n),Gr=r):rl(t,e,n);break;default:rl(t,e,n)}}function QC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IB),e.forEach(function(r){var s=UB.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:kr=l.stateNode,Di=!1;break e;case 3:kr=l.stateNode.containerInfo,Di=!0;break e;case 4:kr=l.stateNode.containerInfo,Di=!0;break e}l=l.return}if(kr===null)throw Error(Ie(160));tM(a,o,s),kr=null,Di=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Vn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nM(e,t),e=e.sibling}function nM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ii(e,t),ua(t),r&4){try{Am(3,t,t.return),M0(3,t)}catch(b){Vn(t,t.return,b)}try{Am(5,t,t.return)}catch(b){Vn(t,t.return,b)}}break;case 1:Ii(e,t),ua(t),r&512&&n!==null&&$d(n,n.return);break;case 5:if(Ii(e,t),ua(t),r&512&&n!==null&&$d(n,n.return),t.flags&32){var s=t.stateNode;try{Zm(s,"")}catch(b){Vn(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&NO(s,a),t1(l,o);var d=t1(l,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?TO(s,m):h==="dangerouslySetInnerHTML"?PO(s,m):h==="children"?Zm(s,m):WN(s,h,m,d)}switch(l){case"input":Q_(s,a);break;case"textarea":SO(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Wd(s,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Wd(s,!!a.multiple,a.defaultValue,!0):Wd(s,!!a.multiple,a.multiple?[]:"",!1))}s[sp]=a}catch(b){Vn(t,t.return,b)}}break;case 6:if(Ii(e,t),ua(t),r&4){if(t.stateNode===null)throw Error(Ie(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(b){Vn(t,t.return,b)}}break;case 3:if(Ii(e,t),ua(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xm(e.containerInfo)}catch(b){Vn(t,t.return,b)}break;case 4:Ii(e,t),ua(t);break;case 13:Ii(e,t),ua(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(jS=Gn())),r&4&&QC(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Gr=(d=Gr)||h,Ii(e,t),Gr=d):Ii(e,t),ua(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Xe=t,h=t.child;h!==null;){for(m=Xe=h;Xe!==null;){switch(p=Xe,v=p.child,p.tag){case 0:case 11:case 14:case 15:Am(4,p,p.return);break;case 1:$d(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(b){Vn(r,n,b)}}break;case 5:$d(p,p.return);break;case 22:if(p.memoizedState!==null){JC(m);continue}}v!==null?(v.return=p,Xe=v):JC(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=CO("display",o))}catch(b){Vn(t,t.return,b)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Vn(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ii(e,t),ua(t),r&4&&QC(t);break;case 21:break;default:Ii(e,t),ua(t)}}function ua(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eM(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zm(s,""),r.flags&=-33);var a=ZC(t);k1(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ZC(t);R1(t,l,o);break;default:throw Error(Ie(161))}}catch(u){Vn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OB(t,e,n){Xe=t,rM(t)}function rM(t,e,n){for(var r=(t.mode&1)!==0;Xe!==null;){var s=Xe,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Gv;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Gr;l=Gv;var d=Gr;if(Gv=o,(Gr=u)&&!d)for(Xe=s;Xe!==null;)o=Xe,u=o.child,o.tag===22&&o.memoizedState!==null?XC(s):u!==null?(u.return=o,Xe=u):XC(s);for(;a!==null;)Xe=a,rM(a),a=a.sibling;Xe=s,Gv=l,Gr=d}YC(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Xe=a):YC(t)}}function YC(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gr||M0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&MC(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}MC(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Xm(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Gr||e.flags&512&&T1(e)}catch(p){Vn(e,e.return,p)}}if(e===t){Xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function JC(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function XC(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{M0(4,e)}catch(u){Vn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Vn(e,s,u)}}var a=e.return;try{T1(e)}catch(u){Vn(e,a,u)}break;case 5:var o=e.return;try{T1(e)}catch(u){Vn(e,o,u)}}}catch(u){Vn(e,e.return,u)}if(e===t){Xe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Xe=l;break}Xe=e.return}}var MB=Math.ceil,bx=Uo.ReactCurrentDispatcher,bS=Uo.ReactCurrentOwner,vi=Uo.ReactCurrentBatchConfig,Ft=0,Pr=null,ar=null,Mr=0,Us=0,Vd=lc(0),gr=0,up=null,lu=0,D0=0,_S=0,Om=null,Ns=null,jS=0,hh=1/0,fo=null,_x=!1,I1=null,Dl=null,Kv=!1,El=null,jx=0,Mm=0,A1=null,ky=-1,Iy=0;function ds(){return Ft&6?Gn():ky!==-1?ky:ky=Gn()}function Ll(t){return t.mode&1?Ft&2&&Mr!==0?Mr&-Mr:yB.transition!==null?(Iy===0&&(Iy=zO()),Iy):(t=Jt,t!==0||(t=window.event,t=t===void 0?16:KO(t.type)),t):1}function Bi(t,e,n,r){if(50<Mm)throw Mm=0,A1=null,Error(Ie(185));gg(t,n,r),(!(Ft&2)||t!==Pr)&&(t===Pr&&(!(Ft&2)&&(D0|=n),gr===4&&vl(t,Mr)),Is(t,r),n===1&&Ft===0&&!(e.mode&1)&&(hh=Gn()+500,I0&&cc()))}function Is(t,e){var n=t.callbackNode;yU(t,e);var r=ax(t,t===Pr?Mr:0);if(r===0)n!==null&&lC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lC(n),e===1)t.tag===0?vB(eT.bind(null,t)):f4(eT.bind(null,t)),fB(function(){!(Ft&6)&&cc()}),n=null;else{switch(UO(r)){case 1:n=ZN;break;case 4:n=$O;break;case 16:n=ix;break;case 536870912:n=VO;break;default:n=ix}n=dM(n,sM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sM(t,e){if(ky=-1,Iy=0,Ft&6)throw Error(Ie(327));var n=t.callbackNode;if(Zd()&&t.callbackNode!==n)return null;var r=ax(t,t===Pr?Mr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nx(t,r);else{e=r;var s=Ft;Ft|=2;var a=aM();(Pr!==t||Mr!==e)&&(fo=null,hh=Gn()+500,Kc(t,e));do try{FB();break}catch(l){iM(t,l)}while(!0);lS(),bx.current=a,Ft=s,ar!==null?e=0:(Pr=null,Mr=0,e=gr)}if(e!==0){if(e===2&&(s=a1(t),s!==0&&(r=s,e=O1(t,s))),e===1)throw n=up,Kc(t,0),vl(t,r),Is(t,Gn()),n;if(e===6)vl(t,r);else{if(s=t.current.alternate,!(r&30)&&!DB(s)&&(e=Nx(t,r),e===2&&(a=a1(t),a!==0&&(r=a,e=O1(t,a))),e===1))throw n=up,Kc(t,0),vl(t,r),Is(t,Gn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:Ac(t,Ns,fo);break;case 3:if(vl(t,r),(r&130023424)===r&&(e=jS+500-Gn(),10<e)){if(ax(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ds(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=m1(Ac.bind(null,t,Ns,fo),e);break}Ac(t,Ns,fo);break;case 4:if(vl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ui(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MB(r/1960))-r,10<r){t.timeoutHandle=m1(Ac.bind(null,t,Ns,fo),r);break}Ac(t,Ns,fo);break;case 5:Ac(t,Ns,fo);break;default:throw Error(Ie(329))}}}return Is(t,Gn()),t.callbackNode===n?sM.bind(null,t):null}function O1(t,e){var n=Om;return t.current.memoizedState.isDehydrated&&(Kc(t,e).flags|=256),t=Nx(t,e),t!==2&&(e=Ns,Ns=n,e!==null&&M1(e)),t}function M1(t){Ns===null?Ns=t:Ns.push.apply(Ns,t)}function DB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Zi(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vl(t,e){for(e&=~_S,e&=~D0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ui(e),r=1<<n;t[n]=-1,e&=~r}}function eT(t){if(Ft&6)throw Error(Ie(327));Zd();var e=ax(t,0);if(!(e&1))return Is(t,Gn()),null;var n=Nx(t,e);if(t.tag!==0&&n===2){var r=a1(t);r!==0&&(e=r,n=O1(t,r))}if(n===1)throw n=up,Kc(t,0),vl(t,e),Is(t,Gn()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ac(t,Ns,fo),Is(t,Gn()),null}function NS(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(hh=Gn()+500,I0&&cc())}}function cu(t){El!==null&&El.tag===0&&!(Ft&6)&&Zd();var e=Ft;Ft|=1;var n=vi.transition,r=Jt;try{if(vi.transition=null,Jt=1,t)return t()}finally{Jt=r,vi.transition=n,Ft=e,!(Ft&6)&&cc()}}function SS(){Us=Vd.current,wn(Vd)}function Kc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hB(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(iS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dx();break;case 3:uh(),wn(Rs),wn(Xr),mS();break;case 5:fS(r);break;case 4:uh();break;case 13:wn(An);break;case 19:wn(An);break;case 10:cS(r.type._context);break;case 22:case 23:SS()}n=n.return}if(Pr=t,ar=t=Fl(t.current,null),Mr=Us=e,gr=0,up=null,_S=D0=lu=0,Ns=Om=null,Vc!==null){for(e=0;e<Vc.length;e++)if(n=Vc[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Vc=null}return t}function iM(t,e){do{var n=ar;try{if(lS(),Cy.current=wx,xx){for(var r=On.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xx=!1}if(ou=0,Sr=pr=On=null,Im=!1,op=0,bS.current=null,n===null||n.return===null){gr=1,up=e,ar=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=Mr,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=zC(o);if(v!==null){v.flags&=-257,UC(v,o,l,a,e),v.mode&1&&VC(a,d,e),e=v,u=d;var N=e.updateQueue;if(N===null){var b=new Set;b.add(u),e.updateQueue=b}else N.add(u);break e}else{if(!(e&1)){VC(a,d,e),ES();break e}u=Error(Ie(426))}}else if(Sn&&l.mode&1){var j=zC(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),UC(j,o,l,a,e),aS(dh(u,l));break e}}a=u=dh(u,l),gr!==4&&(gr=2),Om===null?Om=[a]:Om.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=U4(a,u,e);OC(a,_);break e;case 1:l=u;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Dl===null||!Dl.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=B4(a,l,e);OC(a,C);break e}}a=a.return}while(a!==null)}lM(n)}catch(R){e=R,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function aM(){var t=bx.current;return bx.current=wx,t===null?wx:t}function ES(){(gr===0||gr===3||gr===2)&&(gr=4),Pr===null||!(lu&268435455)&&!(D0&268435455)||vl(Pr,Mr)}function Nx(t,e){var n=Ft;Ft|=2;var r=aM();(Pr!==t||Mr!==e)&&(fo=null,Kc(t,e));do try{LB();break}catch(s){iM(t,s)}while(!0);if(lS(),Ft=n,bx.current=r,ar!==null)throw Error(Ie(261));return Pr=null,Mr=0,gr}function LB(){for(;ar!==null;)oM(ar)}function FB(){for(;ar!==null&&!cU();)oM(ar)}function oM(t){var e=uM(t.alternate,t,Us);t.memoizedProps=t.pendingProps,e===null?lM(t):ar=e,bS.current=null}function lM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kB(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gr=6,ar=null;return}}else if(n=RB(n,e,Us),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);gr===0&&(gr=5)}function Ac(t,e,n){var r=Jt,s=vi.transition;try{vi.transition=null,Jt=1,$B(t,e,n,r)}finally{vi.transition=s,Jt=r}return null}function $B(t,e,n,r){do Zd();while(El!==null);if(Ft&6)throw Error(Ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(xU(t,a),t===Pr&&(ar=Pr=null,Mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kv||(Kv=!0,dM(ix,function(){return Zd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=vi.transition,vi.transition=null;var o=Jt;Jt=1;var l=Ft;Ft|=4,bS.current=null,AB(t,n),nM(n,t),iB(h1),ox=!!d1,h1=d1=null,t.current=n,OB(n),uU(),Ft=l,Jt=o,vi.transition=a}else t.current=n;if(Kv&&(Kv=!1,El=t,jx=s),a=t.pendingLanes,a===0&&(Dl=null),fU(n.stateNode),Is(t,Gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_x)throw _x=!1,t=I1,I1=null,t;return jx&1&&t.tag!==0&&Zd(),a=t.pendingLanes,a&1?t===A1?Mm++:(Mm=0,A1=t):Mm=0,cc(),null}function Zd(){if(El!==null){var t=UO(jx),e=vi.transition,n=Jt;try{if(vi.transition=null,Jt=16>t?16:t,El===null)var r=!1;else{if(t=El,El=null,jx=0,Ft&6)throw Error(Ie(331));var s=Ft;for(Ft|=4,Xe=t.current;Xe!==null;){var a=Xe,o=a.child;if(Xe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Xe=d;Xe!==null;){var h=Xe;switch(h.tag){case 0:case 11:case 15:Am(8,h,a)}var m=h.child;if(m!==null)m.return=h,Xe=m;else for(;Xe!==null;){h=Xe;var p=h.sibling,v=h.return;if(X4(h),h===d){Xe=null;break}if(p!==null){p.return=v,Xe=p;break}Xe=v}}}var N=a.alternate;if(N!==null){var b=N.child;if(b!==null){N.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}Xe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Xe=o;else e:for(;Xe!==null;){if(a=Xe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Am(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Xe=_;break e}Xe=a.return}}var x=t.current;for(Xe=x;Xe!==null;){o=Xe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Xe=S;else e:for(o=x;Xe!==null;){if(l=Xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:M0(9,l)}}catch(R){Vn(l,l.return,R)}if(l===o){Xe=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Xe=C;break e}Xe=l.return}}if(Ft=s,cc(),Ca&&typeof Ca.onPostCommitFiberRoot=="function")try{Ca.onPostCommitFiberRoot(P0,t)}catch{}r=!0}return r}finally{Jt=n,vi.transition=e}}return!1}function tT(t,e,n){e=dh(n,e),e=U4(t,e,1),t=Ml(t,e,1),e=ds(),t!==null&&(gg(t,1,e),Is(t,e))}function Vn(t,e,n){if(t.tag===3)tT(t,t,n);else for(;e!==null;){if(e.tag===3){tT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dl===null||!Dl.has(r))){t=dh(n,t),t=B4(e,t,1),e=Ml(e,t,1),t=ds(),e!==null&&(gg(e,1,t),Is(e,t));break}}e=e.return}}function VB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ds(),t.pingedLanes|=t.suspendedLanes&n,Pr===t&&(Mr&n)===n&&(gr===4||gr===3&&(Mr&130023424)===Mr&&500>Gn()-jS?Kc(t,0):_S|=n),Is(t,e)}function cM(t,e){e===0&&(t.mode&1?(e=Fv,Fv<<=1,!(Fv&130023424)&&(Fv=4194304)):e=1);var n=ds();t=Eo(t,e),t!==null&&(gg(t,e,n),Is(t,n))}function zB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cM(t,n)}function UB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),cM(t,n)}var uM;uM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rs.current)Es=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Es=!1,TB(t,e,n);Es=!!(t.flags&131072)}else Es=!1,Sn&&e.flags&1048576&&m4(e,mx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ry(t,e),t=e.pendingProps;var s=oh(e,Xr.current);Kd(e,n),s=gS(null,e,r,t,s,n);var a=vS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ks(r)?(a=!0,hx(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dS(e),s.updater=O0,e.stateNode=s,s._reactInternals=e,b1(e,r,t,n),e=N1(null,e,r,!0,a,n)):(e.tag=0,Sn&&a&&sS(e),os(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ry(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=WB(r),t=Mi(r,t),s){case 0:e=j1(null,e,r,t,n);break e;case 1:e=HC(null,e,r,t,n);break e;case 11:e=BC(null,e,r,t,n);break e;case 14:e=WC(null,e,r,Mi(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mi(r,s),j1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mi(r,s),HC(t,e,r,s,n);case 3:e:{if(G4(e),t===null)throw Error(Ie(387));r=e.pendingProps,a=e.memoizedState,s=a.element,w4(t,e),vx(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=dh(Error(Ie(423)),e),e=qC(t,e,r,n,s);break e}else if(r!==s){s=dh(Error(Ie(424)),e),e=qC(t,e,r,n,s);break e}else for(Ws=Ol(e.stateNode.containerInfo.firstChild),Gs=e,Sn=!0,Fi=null,n=y4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lh(),r===s){e=Po(t,e,n);break e}os(t,e,r,n)}e=e.child}return e;case 5:return b4(e),t===null&&y1(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,f1(r,s)?o=null:a!==null&&f1(r,a)&&(e.flags|=32),q4(t,e),os(t,e,o,n),e.child;case 6:return t===null&&y1(e),null;case 13:return K4(t,e,n);case 4:return hS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ch(e,null,r,n):os(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mi(r,s),BC(t,e,r,s,n);case 7:return os(t,e,e.pendingProps,n),e.child;case 8:return os(t,e,e.pendingProps.children,n),e.child;case 12:return os(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,hn(px,r._currentValue),r._currentValue=o,a!==null)if(Zi(a.value,o)){if(a.children===s.children&&!Rs.current){e=Po(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=bo(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),x1(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),x1(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}os(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Kd(e,n),s=_i(s),r=r(s),e.flags|=1,os(t,e,r,n),e.child;case 14:return r=e.type,s=Mi(r,e.pendingProps),s=Mi(r.type,s),WC(t,e,r,s,n);case 15:return W4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mi(r,s),Ry(t,e),e.tag=1,ks(r)?(t=!0,hx(e)):t=!1,Kd(e,n),z4(e,r,s),b1(e,r,s,n),N1(null,e,r,!0,t,n);case 19:return Z4(t,e,n);case 22:return H4(t,e,n)}throw Error(Ie(156,e.tag))};function dM(t,e){return FO(t,e)}function BB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,r){return new BB(t,e,n,r)}function PS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WB(t){if(typeof t=="function")return PS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qN)return 11;if(t===GN)return 14}return 2}function Fl(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ay(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")PS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rd:return Zc(n.children,s,a,e);case HN:o=8,s|=8;break;case H_:return t=mi(12,n,e,s|2),t.elementType=H_,t.lanes=a,t;case q_:return t=mi(13,n,e,s),t.elementType=q_,t.lanes=a,t;case G_:return t=mi(19,n,e,s),t.elementType=G_,t.lanes=a,t;case bO:return L0(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xO:o=10;break e;case wO:o=9;break e;case qN:o=11;break e;case GN:o=14;break e;case hl:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=mi(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Zc(t,e,n,r){return t=mi(7,t,r,e),t.lanes=n,t}function L0(t,e,n,r){return t=mi(22,t,r,e),t.elementType=bO,t.lanes=n,t.stateNode={isHidden:!1},t}function Lb(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function Fb(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yb(0),this.expirationTimes=yb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function CS(t,e,n,r,s,a,o,l,u){return t=new HB(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=mi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dS(a),t}function qB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Td,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hM(t){if(!t)return Gl;t=t._reactInternals;e:{if(Cu(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ks(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(ks(n))return h4(t,n,e)}return e}function fM(t,e,n,r,s,a,o,l,u){return t=CS(n,r,!0,t,s,a,o,l,u),t.context=hM(null),n=t.current,r=ds(),s=Ll(n),a=bo(r,s),a.callback=e??null,Ml(n,a,s),t.current.lanes=s,gg(t,s,r),Is(t,r),t}function F0(t,e,n,r){var s=e.current,a=ds(),o=Ll(s);return n=hM(n),e.context===null?e.context=n:e.pendingContext=n,e=bo(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ml(s,e,o),t!==null&&(Bi(t,s,o,a),Py(t,s,o)),o}function Sx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TS(t,e){nT(t,e),(t=t.alternate)&&nT(t,e)}function GB(){return null}var mM=typeof reportError=="function"?reportError:function(t){console.error(t)};function RS(t){this._internalRoot=t}$0.prototype.render=RS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));F0(t,e,null,null)};$0.prototype.unmount=RS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cu(function(){F0(null,t,null,null)}),e[So]=null}};function $0(t){this._internalRoot=t}$0.prototype.unstable_scheduleHydration=function(t){if(t){var e=HO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gl.length&&e!==0&&e<gl[n].priority;n++);gl.splice(n,0,t),n===0&&GO(t)}};function kS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function V0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rT(){}function KB(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=Sx(o);a.call(d)}}var o=fM(e,r,t,0,null,!1,!1,"",rT);return t._reactRootContainer=o,t[So]=o.current,np(t.nodeType===8?t.parentNode:t),cu(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Sx(u);l.call(d)}}var u=CS(t,0,!1,null,null,!1,!1,"",rT);return t._reactRootContainer=u,t[So]=u.current,np(t.nodeType===8?t.parentNode:t),cu(function(){F0(e,u,n,r)}),u}function z0(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=Sx(o);l.call(u)}}F0(e,o,t,s)}else o=KB(n,e,t,s,r);return Sx(o)}BO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dm(e.pendingLanes);n!==0&&(QN(e,n|1),Is(e,Gn()),!(Ft&6)&&(hh=Gn()+500,cc()))}break;case 13:cu(function(){var r=Eo(t,1);if(r!==null){var s=ds();Bi(r,t,1,s)}}),TS(t,1)}};YN=function(t){if(t.tag===13){var e=Eo(t,134217728);if(e!==null){var n=ds();Bi(e,t,134217728,n)}TS(t,134217728)}};WO=function(t){if(t.tag===13){var e=Ll(t),n=Eo(t,e);if(n!==null){var r=ds();Bi(n,t,e,r)}TS(t,e)}};HO=function(){return Jt};qO=function(t,e){var n=Jt;try{return Jt=t,e()}finally{Jt=n}};r1=function(t,e,n){switch(e){case"input":if(Q_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=k0(r);if(!s)throw Error(Ie(90));jO(r),Q_(r,s)}}}break;case"textarea":SO(t,n);break;case"select":e=n.value,e!=null&&Wd(t,!!n.multiple,e,!1)}};IO=NS;AO=cu;var ZB={usingClientEntryPoint:!1,Events:[yg,Od,k0,RO,kO,NS]},Zf={findFiberByHostInstance:$c,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QB={bundleType:Zf.bundleType,version:Zf.version,rendererPackageName:Zf.rendererPackageName,rendererConfig:Zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DO(t),t===null?null:t.stateNode},findFiberByHostInstance:Zf.findFiberByHostInstance||GB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zv.isDisabled&&Zv.supportsFiber)try{P0=Zv.inject(QB),Ca=Zv}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZB;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kS(e))throw Error(Ie(200));return qB(t,e,null,n)};ei.createRoot=function(t,e){if(!kS(t))throw Error(Ie(299));var n=!1,r="",s=mM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=CS(t,1,!1,null,null,n,!1,r,s),t[So]=e.current,np(t.nodeType===8?t.parentNode:t),new RS(e)};ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=DO(e),t=t===null?null:t.stateNode,t};ei.flushSync=function(t){return cu(t)};ei.hydrate=function(t,e,n){if(!V0(e))throw Error(Ie(200));return z0(null,t,e,!0,n)};ei.hydrateRoot=function(t,e,n){if(!kS(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=mM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fM(e,null,t,1,n??null,s,!1,a,o),t[So]=e.current,np(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $0(e)};ei.render=function(t,e,n){if(!V0(e))throw Error(Ie(200));return z0(null,t,e,!1,n)};ei.unmountComponentAtNode=function(t){if(!V0(t))throw Error(Ie(40));return t._reactRootContainer?(cu(function(){z0(null,null,t,!1,function(){t._reactRootContainer=null,t[So]=null})}),!0):!1};ei.unstable_batchedUpdates=NS;ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!V0(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return z0(t,e,n,!1,r)};ei.version="18.3.1-next-f1338f8080-20240426";function pM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pM)}catch(t){console.error(t)}}pM(),pO.exports=ei;var qh=pO.exports;const YB=zo(qh);var gM,sT=qh;gM=sT.createRoot,sT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}var Pl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pl||(Pl={}));const iT="popstate";function JB(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=Tu(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),D1("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof a=="string"?a:Ex(a))}function r(s,a){IS(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return e7(e,n,r,t)}function Yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function IS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XB(){return Math.random().toString(36).substr(2,8)}function aT(t,e){return{usr:t.state,key:t.key,idx:e}}function D1(t,e,n,r){return n===void 0&&(n=null),dp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tu(e):e,{state:n,key:e&&e.key||r||XB()})}function Ex(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function e7(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Pl.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(dp({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=Pl.Pop;let j=h(),_=j==null?null:j-d;d=j,u&&u({action:l,location:b.location,delta:_})}function p(j,_){l=Pl.Push;let x=D1(b.location,j,_);n&&n(x,j),d=h()+1;let S=aT(x,d),C=b.createHref(x);try{o.pushState(S,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}a&&u&&u({action:l,location:b.location,delta:1})}function v(j,_){l=Pl.Replace;let x=D1(b.location,j,_);n&&n(x,j),d=h();let S=aT(x,d),C=b.createHref(x);o.replaceState(S,"",C),a&&u&&u({action:l,location:b.location,delta:0})}function N(j){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof j=="string"?j:Ex(j);return x=x.replace(/ $/,"%20"),Yn(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let b={get action(){return l},get location(){return t(s,o)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(iT,m),u=j,()=>{s.removeEventListener(iT,m),u=null}},createHref(j){return e(s,j)},createURL:N,encodeLocation(j){let _=N(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:v,go(j){return o.go(j)}};return b}var oT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oT||(oT={}));function t7(t,e,n){return n===void 0&&(n="/"),n7(t,e,n)}function n7(t,e,n,r){let s=typeof e=="string"?Tu(e):e,a=AS(s.pathname||"/",n);if(a==null)return null;let o=vM(t);r7(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=p7(a);l=h7(o[u],d)}return l}function vM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Yn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=$l([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(Yn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vM(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:u7(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of yM(a.path))s(a,o,u)}),e}function yM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=yM(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function r7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s7=/^:[\w-]+$/,i7=3,a7=2,o7=1,l7=10,c7=-2,lT=t=>t==="*";function u7(t,e){let n=t.split("/"),r=n.length;return n.some(lT)&&(r+=c7),e&&(r+=a7),n.filter(s=>!lT(s)).reduce((s,a)=>s+(s7.test(a)?i7:a===""?o7:l7),r)}function d7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function h7(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=f7({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:$l([a,m.pathname]),pathnameBase:x7($l([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=$l([a,m.pathnameBase]))}return o}function f7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m7(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let b=l[m]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const N=l[m];return v&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function m7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),IS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function p7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return IS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function AS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function g7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Tu(t):t;return{pathname:n?n.startsWith("/")?n:v7(n,e):e,search:w7(r),hash:b7(s)}}function v7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $b(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function OS(t,e){let n=y7(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function MS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Tu(t):(s=dp({},t),Yn(!s.pathname||!s.pathname.includes("?"),$b("?","pathname","search",s)),Yn(!s.pathname||!s.pathname.includes("#"),$b("#","pathname","hash",s)),Yn(!s.search||!s.search.includes("#"),$b("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=g7(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const $l=t=>t.join("/").replace(/\/\/+/g,"/"),x7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xM=["post","put","patch","delete"];new Set(xM);const j7=["get",...xM];new Set(j7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(this,arguments)}const DS=w.createContext(null),N7=w.createContext(null),uc=w.createContext(null),U0=w.createContext(null),Bo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),wM=w.createContext(null);function S7(t,e){let{relative:n}=e===void 0?{}:e;Gh()||Yn(!1);let{basename:r,navigator:s}=w.useContext(uc),{hash:a,pathname:o,search:l}=_M(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:$l([r,o])),s.createHref({pathname:u,search:l,hash:a})}function Gh(){return w.useContext(U0)!=null}function Wo(){return Gh()||Yn(!1),w.useContext(U0).location}function bM(t){w.useContext(uc).static||w.useLayoutEffect(t)}function xr(){let{isDataRoute:t}=w.useContext(Bo);return t?F7():E7()}function E7(){Gh()||Yn(!1);let t=w.useContext(DS),{basename:e,future:n,navigator:r}=w.useContext(uc),{matches:s}=w.useContext(Bo),{pathname:a}=Wo(),o=JSON.stringify(OS(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return bM(()=>{l.current=!0}),w.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=MS(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:$l([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,a,t])}function LS(){let{matches:t}=w.useContext(Bo),e=t[t.length-1];return e?e.params:{}}function _M(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(uc),{matches:s}=w.useContext(Bo),{pathname:a}=Wo(),o=JSON.stringify(OS(s,r.v7_relativeSplatPath));return w.useMemo(()=>MS(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function P7(t,e){return C7(t,e)}function C7(t,e,n,r){Gh()||Yn(!1);let{navigator:s}=w.useContext(uc),{matches:a}=w.useContext(Bo),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Wo(),h;if(e){var m;let j=typeof e=="string"?Tu(e):e;u==="/"||(m=j.pathname)!=null&&m.startsWith(u)||Yn(!1),h=j}else h=d;let p=h.pathname||"/",v=p;if(u!=="/"){let j=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=t7(t,{pathname:v}),b=A7(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:$l([u,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:$l([u,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,n,r);return e&&b?w.createElement(U0.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Pl.Pop}},b):b}function T7(){let t=L7(),e=_7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,null)}const R7=w.createElement(T7,null);class k7 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Bo.Provider,{value:this.props.routeContext},w.createElement(wM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I7(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(DS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Bo.Provider,{value:e},r)}function A7(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||Yn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:v}=n,N=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let v,N=!1,b=null,j=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||R7,u&&(d<0&&p===0?($7("route-fallback"),N=!0,j=null):d===p&&(N=!0,j=m.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),x=()=>{let S;return v?S=b:N?S=j:m.route.Component?S=w.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,w.createElement(I7,{match:m,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(k7,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var jM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jM||{}),NM=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(NM||{});function O7(t){let e=w.useContext(DS);return e||Yn(!1),e}function M7(t){let e=w.useContext(N7);return e||Yn(!1),e}function D7(t){let e=w.useContext(Bo);return e||Yn(!1),e}function SM(t){let e=D7(),n=e.matches[e.matches.length-1];return n.route.id||Yn(!1),n.route.id}function L7(){var t;let e=w.useContext(wM),n=M7(),r=SM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F7(){let{router:t}=O7(jM.UseNavigateStable),e=SM(NM.UseNavigateStable),n=w.useRef(!1);return bM(()=>{n.current=!0}),w.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,hp({fromRouteId:e},a)))},[t,e])}const cT={};function $7(t,e,n){cT[t]||(cT[t]=!0)}function V7(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function z7(t){let{to:e,replace:n,state:r,relative:s}=t;Gh()||Yn(!1);let{future:a,static:o}=w.useContext(uc),{matches:l}=w.useContext(Bo),{pathname:u}=Wo(),d=xr(),h=MS(e,OS(l,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(h);return w.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function yn(t){Yn(!1)}function U7(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Pl.Pop,navigator:a,static:o=!1,future:l}=t;Gh()&&Yn(!1);let u=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:u,navigator:a,static:o,future:hp({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=Tu(r));let{pathname:h="/",search:m="",hash:p="",state:v=null,key:N="default"}=r,b=w.useMemo(()=>{let j=AS(h,u);return j==null?null:{location:{pathname:j,search:m,hash:p,state:v,key:N},navigationType:s}},[u,h,m,p,v,N,s]);return b==null?null:w.createElement(uc.Provider,{value:d},w.createElement(U0.Provider,{children:n,value:b}))}function B7(t){let{children:e,location:n}=t;return P7(L1(e),n)}new Promise(()=>{});function L1(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let a=[...e,s];if(r.type===w.Fragment){n.push.apply(n,L1(r.props.children,a));return}r.type!==yn&&Yn(!1),!r.props.index||!r.props.children||Yn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=L1(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(this,arguments)}function W7(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function H7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function q7(t,e){return t.button===0&&(!e||e==="_self")&&!H7(t)}function $1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function G7(t,e){let n=$1(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const K7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Z7="6";try{window.__reactRouterVersion=Z7}catch{}const Q7="startTransition",uT=zN[Q7];function Y7(t){let{basename:e,children:n,future:r,window:s}=t,a=w.useRef();a.current==null&&(a.current=JB({window:s,v5Compat:!0}));let o=a.current,[l,u]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=w.useCallback(m=>{d&&uT?uT(()=>u(m)):u(m)},[u,d]);return w.useLayoutEffect(()=>o.listen(h),[o,h]),w.useEffect(()=>V7(r),[r]),w.createElement(U7,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const J7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=W7(e,K7),{basename:v}=w.useContext(uc),N,b=!1;if(typeof d=="string"&&X7.test(d)&&(N=d,J7))try{let S=new URL(window.location.href),C=d.startsWith("//")?new URL(S.protocol+d):new URL(d),R=AS(C.pathname,v);C.origin===S.origin&&R!=null?d=R+C.search+C.hash:b=!0}catch{}let j=S7(d,{relative:s}),_=eW(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:m});function x(S){r&&r(S),S.defaultPrevented||_(S)}return w.createElement("a",F1({},p,{href:N||j,onClick:b||a?r:x,ref:n,target:u}))});var dT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dT||(dT={}));var hT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hT||(hT={}));function eW(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=xr(),d=Wo(),h=_M(t,{relative:o});return w.useCallback(m=>{if(q7(m,n)){m.preventDefault();let p=r!==void 0?r:Ex(d)===Ex(h);u(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,r,s,n,t,a,o,l])}function FS(t){let e=w.useRef($1(t)),n=w.useRef(!1),r=Wo(),s=w.useMemo(()=>G7(r.search,n.current?null:e.current),[r.search]),a=xr(),o=w.useCallback((l,u)=>{const d=$1(typeof l=="function"?l(s):l);n.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var Px=["light","dark"],$S="(prefers-color-scheme: dark)",tW=typeof window>"u",VS=w.createContext(void 0),nW={setTheme:t=>{},themes:[]},rW=()=>{var t;return(t=w.useContext(VS))!=null?t:nW},sW=t=>w.useContext(VS)?t.children:w.createElement(aW,{...t}),iW=["light","dark"],aW=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:a=iW,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:u,children:d,nonce:h})=>{let[m,p]=w.useState(()=>fT(s,o)),[v,N]=w.useState(()=>fT(s)),b=u?Object.values(u):a,j=w.useCallback(C=>{let R=C;if(!R)return;C==="system"&&n&&(R=mT());let V=u?u[R]:R,k=e?lW():null,I=document.documentElement;if(l==="class"?(I.classList.remove(...b),V&&I.classList.add(V)):V?I.setAttribute(l,V):I.removeAttribute(l),r){let $=Px.includes(o)?o:null,T=Px.includes(R)?R:$;I.style.colorScheme=T}k==null||k()},[]),_=w.useCallback(C=>{let R=typeof C=="function"?C(C):C;p(R);try{localStorage.setItem(s,R)}catch{}},[t]),x=w.useCallback(C=>{let R=mT(C);N(R),m==="system"&&n&&!t&&j("system")},[m,t]);w.useEffect(()=>{let C=window.matchMedia($S);return C.addListener(x),x(C),()=>C.removeListener(x)},[x]),w.useEffect(()=>{let C=R=>{if(R.key!==s)return;let V=R.newValue||o;_(V)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[_]),w.useEffect(()=>{j(t??m)},[t,m]);let S=w.useMemo(()=>({theme:m,setTheme:_,forcedTheme:t,resolvedTheme:m==="system"?v:m,themes:n?[...a,"system"]:a,systemTheme:n?v:void 0}),[m,_,t,v,n,a]);return w.createElement(VS.Provider,{value:S},w.createElement(oW,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:a,defaultTheme:o,attribute:l,value:u,children:d,attrs:b,nonce:h}),d)},oW=w.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:u})=>{let d=a==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=s?Px.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(N,b=!1,j=!0)=>{let _=o?o[N]:N,x=b?N+"|| ''":`'${_}'`,S="";return s&&j&&!b&&Px.includes(N)&&(S+=`d.style.colorScheme = '${N}';`),n==="class"?b||_?S+=`c.add(${x})`:S+="null":_&&(S+=`d[s](n,${x})`),S},v=t?`!function(){${h}${p(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${$S}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${m}}catch(t){}}();`;return w.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:v}})}),fT=(t,e)=>{if(tW)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},lW=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},mT=t=>(t||(t=window.matchMedia($S)),t.matches?"dark":"light");let cW={data:""},uW=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||cW,dW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hW=/\/\*[^]*?\*\/|  +/g,pT=/\n+/g,yl=(t,e)=>{let n="",r="",s="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?yl(o,a):a+"{"+yl(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=yl(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=yl.p?yl.p(a,o):a+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},oo={},EM=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+EM(t[n]);return e}return t},fW=(t,e,n,r,s)=>{let a=EM(t),o=oo[a]||(oo[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!oo[o]){let u=a!==t?t:(d=>{let h,m,p=[{}];for(;h=dW.exec(d.replace(hW,""));)h[4]?p.shift():h[3]?(m=h[3].replace(pT," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][h[1]]=h[2].replace(pT," ").trim();return p[0]})(t);oo[o]=yl(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&oo.g?oo.g:null;return n&&(oo.g=oo[o]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(oo[o],e,r,l),o},mW=(t,e,n)=>t.reduce((r,s,a)=>{let o=e[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":yl(l,""):l===!1?"":l}return r+s+(o??"")},"");function B0(t){let e=this||{},n=t.call?t(e.p):t;return fW(n.unshift?n.raw?mW(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,uW(e.target),e.g,e.o,e.k)}let PM,V1,z1;B0.bind({g:1});let Co=B0.bind({k:1});function pW(t,e,n,r){yl.p=e,PM=t,V1=n,z1=r}function dc(t,e){let n=this||{};return function(){let r=arguments;function s(a,o){let l=Object.assign({},a),u=l.className||s.className;n.p=Object.assign({theme:V1&&V1()},l),n.o=/ *go\d+/.test(u),l.className=B0.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),z1&&d[0]&&z1(l),PM(d,l)}return s}}var gW=t=>typeof t=="function",Cx=(t,e)=>gW(t)?t(e):t,vW=(()=>{let t=0;return()=>(++t).toString()})(),CM=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),yW=20,TM=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,yW)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return TM(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},Oy=[],Uc={toasts:[],pausedAt:void 0},Ru=t=>{Uc=TM(Uc,t),Oy.forEach(e=>{e(Uc)})},xW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wW=(t={})=>{let[e,n]=w.useState(Uc),r=w.useRef(Uc);w.useEffect(()=>(r.current!==Uc&&n(Uc),Oy.push(n),()=>{let a=Oy.indexOf(n);a>-1&&Oy.splice(a,1)}),[]);let s=e.toasts.map(a=>{var o,l,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||xW[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:s}},bW=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||vW()}),wg=t=>(e,n)=>{let r=bW(e,t,n);return Ru({type:2,toast:r}),r.id},Kn=(t,e)=>wg("blank")(t,e);Kn.error=wg("error");Kn.success=wg("success");Kn.loading=wg("loading");Kn.custom=wg("custom");Kn.dismiss=t=>{Ru({type:3,toastId:t})};Kn.remove=t=>Ru({type:4,toastId:t});Kn.promise=(t,e,n)=>{let r=Kn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Cx(e.success,s):void 0;return a?Kn.success(a,{id:r,...n,...n==null?void 0:n.success}):Kn.dismiss(r),s}).catch(s=>{let a=e.error?Cx(e.error,s):void 0;a?Kn.error(a,{id:r,...n,...n==null?void 0:n.error}):Kn.dismiss(r)}),t};var _W=(t,e)=>{Ru({type:1,toast:{id:t,height:e}})},jW=()=>{Ru({type:5,time:Date.now()})},Dm=new Map,NW=1e3,SW=(t,e=NW)=>{if(Dm.has(t))return;let n=setTimeout(()=>{Dm.delete(t),Ru({type:4,toastId:t})},e);Dm.set(t,n)},EW=t=>{let{toasts:e,pausedAt:n}=wW(t);w.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(u<0){l.visible&&Kn.dismiss(l.id);return}return setTimeout(()=>Kn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=w.useCallback(()=>{n&&Ru({type:6,time:Date.now()})},[n]),s=w.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:d}=o||{},h=e.filter(v=>(v.position||d)===(a.position||d)&&v.height),m=h.findIndex(v=>v.id===a.id),p=h.filter((v,N)=>N<m&&v.visible).length;return h.filter(v=>v.visible).slice(...l?[p+1]:[0,p]).reduce((v,N)=>v+(N.height||0)+u,0)},[e]);return w.useEffect(()=>{e.forEach(a=>{if(a.dismissed)SW(a.id,a.removeDelay);else{let o=Dm.get(a.id);o&&(clearTimeout(o),Dm.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:_W,startPause:jW,endPause:r,calculateOffset:s}}},PW=Co`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CW=Co`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TW=Co`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RW=dc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${TW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,kW=Co`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,IW=dc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${kW} 1s linear infinite;
`,AW=Co`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,OW=Co`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,MW=dc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${OW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,DW=dc("div")`
  position: absolute;
`,LW=dc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,FW=Co`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$W=dc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${FW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,VW=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?w.createElement($W,null,e):e:n==="blank"?null:w.createElement(LW,null,w.createElement(IW,{...r}),n!=="loading"&&w.createElement(DW,null,n==="error"?w.createElement(RW,{...r}):w.createElement(MW,{...r})))},zW=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UW=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,BW="0%{opacity:0;} 100%{opacity:1;}",WW="0%{opacity:1;} 100%{opacity:0;}",HW=dc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qW=dc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,GW=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=CM()?[BW,WW]:[zW(n),UW(n)];return{animation:e?`${Co(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Co(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},KW=w.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?GW(t.position||e||"top-center",t.visible):{opacity:0},a=w.createElement(VW,{toast:t}),o=w.createElement(qW,{...t.ariaProps},Cx(t.message,t));return w.createElement(HW,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):w.createElement(w.Fragment,null,a,o))});pW(w.createElement);var ZW=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let a=w.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return w.createElement("div",{ref:a,className:e,style:n},s)},QW=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:CM()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},YW=B0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Qv=16,JW=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:u}=EW(n);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Qv,left:Qv,right:Qv,bottom:Qv,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let h=d.position||e,m=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),p=QW(h,m);return w.createElement(ZW,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?YW:"",style:p},d.type==="custom"?Cx(d.message,d):s?s(d):w.createElement(KW,{toast:d,position:h}))}))},je=Kn,gT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XW=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},kM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),r.push(n[h],n[m],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XW(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||m==null)throw new eH;const p=a<<2|l>>4;if(r.push(p),d!==64){const v=l<<4&240|d>>2;if(r.push(v),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tH=function(t){const e=RM(t);return kM.encodeByteArray(e,!0)},Tx=function(t){return tH(t).replace(/\./g,"")},IM=function(t){try{return kM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=()=>nH().__FIREBASE_DEFAULTS__,sH=()=>{if(typeof process>"u"||typeof gT>"u")return;const t=gT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IM(t[1]);return e&&JSON.parse(e)},W0=()=>{try{return rH()||sH()||iH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AM=t=>{var e,n;return(n=(e=W0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},OM=t=>{const e=AM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MM=()=>{var t;return(t=W0())===null||t===void 0?void 0:t.config},DM=t=>{var e;return(e=W0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tx(JSON.stringify(n)),Tx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(es())}function lH(){var t;const e=(t=W0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hH(){const t=es();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fH(){return!lH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mH(){try{return typeof indexedDB=="object"}catch{return!1}}function pH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="FirebaseError";class Wa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gH,Object.setPrototypeOf(this,Wa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bg.prototype.create)}}class bg{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?vH(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Wa(s,l,r)}}function vH(t,e){return t.replace(yH,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yH=/\{\$([^}]+)}/g;function xH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rx(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(vT(a)&&vT(o)){if(!Rx(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function mm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wH(t,e){const n=new bH(t,e);return n.subscribe.bind(n)}class bH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_H(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vb),s.error===void 0&&(s.error=Vb),s.complete===void 0&&(s.complete=Vb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _H(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class Kl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SH(e))try{this.getOrInitializeService({instanceIdentifier:Oc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oc){return this.instances.has(e)}getOptions(e=Oc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oc){return this.component?this.component.multipleInstances?e:Oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NH(t){return t===Oc?void 0:t}function SH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mt||(Mt={}));const PH={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},CH=Mt.INFO,TH={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},RH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=TH[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zS{constructor(e){this.name=e,this._logLevel=CH,this._logHandler=RH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}const kH=(t,e)=>e.some(n=>t instanceof n);let yT,xT;function IH(){return yT||(yT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AH(){return xT||(xT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FM=new WeakMap,U1=new WeakMap,$M=new WeakMap,zb=new WeakMap,US=new WeakMap;function OH(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Vl(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FM.set(n,t)}).catch(()=>{}),US.set(e,t),e}function MH(t){if(U1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});U1.set(t,e)}let B1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return U1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$M.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DH(t){B1=t(B1)}function LH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ub(this),e,...n);return $M.set(r,e.sort?e.sort():[e]),Vl(r)}:AH().includes(t)?function(...e){return t.apply(Ub(this),e),Vl(FM.get(this))}:function(...e){return Vl(t.apply(Ub(this),e))}}function FH(t){return typeof t=="function"?LH(t):(t instanceof IDBTransaction&&MH(t),kH(t,IH())?new Proxy(t,B1):t)}function Vl(t){if(t instanceof IDBRequest)return OH(t);if(zb.has(t))return zb.get(t);const e=FH(t);return e!==t&&(zb.set(t,e),US.set(e,t)),e}const Ub=t=>US.get(t);function $H(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Vl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Vl(o.result),u.oldVersion,u.newVersion,Vl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const VH=["get","getKey","getAll","getAllKeys","count"],zH=["put","add","delete","clear"],Bb=new Map;function wT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bb.get(e))return Bb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=zH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VH.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Bb.set(e,a),a}DH(t=>({...t,get:(e,n,r)=>wT(e,n)||t.get(e,n,r),has:(e,n)=>!!wT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const W1="@firebase/app",bT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new zS("@firebase/app"),WH="@firebase/app-compat",HH="@firebase/analytics-compat",qH="@firebase/analytics",GH="@firebase/app-check-compat",KH="@firebase/app-check",ZH="@firebase/auth",QH="@firebase/auth-compat",YH="@firebase/database",JH="@firebase/data-connect",XH="@firebase/database-compat",eq="@firebase/functions",tq="@firebase/functions-compat",nq="@firebase/installations",rq="@firebase/installations-compat",sq="@firebase/messaging",iq="@firebase/messaging-compat",aq="@firebase/performance",oq="@firebase/performance-compat",lq="@firebase/remote-config",cq="@firebase/remote-config-compat",uq="@firebase/storage",dq="@firebase/storage-compat",hq="@firebase/firestore",fq="@firebase/vertexai-preview",mq="@firebase/firestore-compat",pq="firebase",gq="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="[DEFAULT]",vq={[W1]:"fire-core",[WH]:"fire-core-compat",[qH]:"fire-analytics",[HH]:"fire-analytics-compat",[KH]:"fire-app-check",[GH]:"fire-app-check-compat",[ZH]:"fire-auth",[QH]:"fire-auth-compat",[YH]:"fire-rtdb",[JH]:"fire-data-connect",[XH]:"fire-rtdb-compat",[eq]:"fire-fn",[tq]:"fire-fn-compat",[nq]:"fire-iid",[rq]:"fire-iid-compat",[sq]:"fire-fcm",[iq]:"fire-fcm-compat",[aq]:"fire-perf",[oq]:"fire-perf-compat",[lq]:"fire-rc",[cq]:"fire-rc-compat",[uq]:"fire-gcs",[dq]:"fire-gcs-compat",[hq]:"fire-fst",[mq]:"fire-fst-compat",[fq]:"fire-vertex","fire-js":"fire-js",[pq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Map,yq=new Map,q1=new Map;function _T(t,e){try{t.container.addComponent(e)}catch(n){To.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uu(t){const e=t.name;if(q1.has(e))return To.debug(`There were multiple attempts to register component ${e}.`),!1;q1.set(e,t);for(const n of kx.values())_T(n,t);for(const n of yq.values())_T(n,t);return!0}function H0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zl=new bg("app","Firebase",xq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=gq;function VM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:H1,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zl.create("bad-app-name",{appName:String(s)});if(n||(n=MM()),!n)throw zl.create("no-options");const a=kx.get(s);if(a){if(Rx(n,a.options)&&Rx(r,a.config))return a;throw zl.create("duplicate-app",{appName:s})}const o=new EH(s);for(const u of q1.values())o.addComponent(u);const l=new wq(n,r,o);return kx.set(s,l),l}function BS(t=H1){const e=kx.get(t);if(!e&&t===H1&&MM())return VM();if(!e)throw zl.create("no-app",{appName:t});return e}function Ra(t,e,n){var r;let s=(r=vq[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),To.warn(l.join(" "));return}uu(new Kl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="firebase-heartbeat-database",_q=1,fp="firebase-heartbeat-store";let Wb=null;function zM(){return Wb||(Wb=$H(bq,_q,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fp)}catch(n){console.warn(n)}}}}).catch(t=>{throw zl.create("idb-open",{originalErrorMessage:t.message})})),Wb}async function jq(t){try{const n=(await zM()).transaction(fp),r=await n.objectStore(fp).get(UM(t));return await n.done,r}catch(e){if(e instanceof Wa)To.warn(e.message);else{const n=zl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});To.warn(n.message)}}}async function jT(t,e){try{const r=(await zM()).transaction(fp,"readwrite");await r.objectStore(fp).put(e,UM(t)),await r.done}catch(n){if(n instanceof Wa)To.warn(n.message);else{const r=zl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});To.warn(r.message)}}}function UM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=1024,Sq=30*24*60*60*1e3;class Eq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Cq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=NT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Sq}),this._storage.overwrite(this._heartbeatsCache))}catch(r){To.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NT(),{heartbeatsToSend:r,unsentEntries:s}=Pq(this._heartbeatsCache.heartbeats),a=Tx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return To.warn(n),""}}}function NT(){return new Date().toISOString().substring(0,10)}function Pq(t,e=Nq){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),ST(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ST(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Cq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mH()?pH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ST(t){return Tx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t){uu(new Kl("platform-logger",e=>new UH(e),"PRIVATE")),uu(new Kl("heartbeat",e=>new Eq(e),"PRIVATE")),Ra(W1,bT,t),Ra(W1,bT,"esm2017"),Ra("fire-js","")}Tq("");var wa=function(){return wa=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wa.apply(this,arguments)};function jg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Rq(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function BM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kq=BM,WM=new bg("auth","Firebase",BM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new zS("@firebase/auth");function Iq(t,...e){Ix.logLevel<=Mt.WARN&&Ix.warn(`Auth (${ku}): ${t}`,...e)}function My(t,...e){Ix.logLevel<=Mt.ERROR&&Ix.error(`Auth (${ku}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t,...e){throw HS(t,...e)}function ka(t,...e){return HS(t,...e)}function WS(t,e,n){const r=Object.assign(Object.assign({},kq()),{[e]:n});return new bg("auth","Firebase",r).create(e,{appName:t.name})}function Wi(t){return WS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Aq(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ni(t,"argument-error"),WS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function HS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WM.create(t,...e)}function dt(t,e,...n){if(!t)throw HS(e,...n)}function yo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw My(e),new Error(e)}function Ro(t,e){t||yo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Oq(){return ET()==="http:"||ET()==="https:"}function ET(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Oq()||uH()||"connection"in navigator)?navigator.onLine:!0}function Dq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ro(n>e,"Short delay should be less than long delay!"),this.isMobile=oH()||dH()}get(){return Mq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){Ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=new Ng(3e4,6e4);function Ho(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ta(t,e,n,r,s={}){return qM(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=_g(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return cH()||(d.referrerPolicy="no-referrer"),HM.fetch()(GM(t,t.config.apiHost,n,l),d)})}async function qM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Lq),e);try{const s=new Vq(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Yv(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yv(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Yv(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Yv(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw WS(t,h,d);Ni(t,h)}}catch(s){if(s instanceof Wa)throw s;Ni(t,"network-request-failed",{message:String(s)})}}async function Sg(t,e,n,r,s={}){const a=await ta(t,e,n,r,s);return"mfaPendingCredential"in a&&Ni(t,"multi-factor-auth-required",{_serverResponse:a}),a}function GM(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?qS(t.config,s):`${t.config.apiScheme}://${s}`}function $q(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ka(this.auth,"network-request-failed")),Fq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ka(t,e,r);return s.customData._tokenResponse=n,s}function PT(t){return t!==void 0&&t.enterprise!==void 0}class zq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $q(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Uq(t,e){return ta(t,"GET","/v2/recaptchaConfig",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bq(t,e){return ta(t,"POST","/v1/accounts:delete",e)}async function KM(t,e){return ta(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wq(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),s=GS(r);dt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Lm(Hb(s.auth_time)),issuedAtTime:Lm(Hb(s.iat)),expirationTime:Lm(Hb(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hb(t){return Number(t)*1e3}function GS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return My("JWT malformed, contained fewer than 3 sections"),null;try{const s=IM(n);return s?JSON.parse(s):(My("Failed to decode base64 JWT payload"),null)}catch(s){return My("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function CT(t){const e=GS(t);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wa&&Hq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lm(this.lastLoginAt),this.creationTime=Lm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t){var e;const n=t.auth,r=await t.getIdToken(),s=await du(t,KM(n,{idToken:r}));dt(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ZM(a.providerUserInfo):[],l=Gq(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new K1(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function pm(t){const e=Wt(t);await Ax(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ZM(t){return t.map(e=>{var{providerId:n}=e,r=jg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(t,e){const n=await qM(t,{},async()=>{const r=_g({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=GM(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",HM.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Zq(t,e){return ta(t,"POST","/v2/accounts:revokeToken",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=CT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await Kq(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Qd;return r&&(dt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(dt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(dt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qd,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e){dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xo{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new K1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Wq(this,e)}reload(){return pm(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ax(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await du(this,Bq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:C,isAnonymous:R,providerData:V,stsTokenManager:k}=n;dt(S&&k,e,"internal-error");const I=Qd.fromJSON(this.name,k);dt(typeof S=="string",e,"internal-error"),sl(m,e.name),sl(p,e.name),dt(typeof C=="boolean",e,"internal-error"),dt(typeof R=="boolean",e,"internal-error"),sl(v,e.name),sl(N,e.name),sl(b,e.name),sl(j,e.name),sl(_,e.name),sl(x,e.name);const $=new xo({uid:S,auth:e,email:p,emailVerified:C,displayName:m,isAnonymous:R,photoURL:N,phoneNumber:v,tenantId:b,stsTokenManager:I,createdAt:_,lastLoginAt:x});return V&&Array.isArray(V)&&($.providerData=V.map(T=>Object.assign({},T))),j&&($._redirectEventId=j),$}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qd;s.updateFromServerResponse(n);const a=new xo({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ax(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];dt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ZM(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Qd;l.updateFromIdToken(r);const u=new xo({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Map;function wo(t){Ro(t instanceof Function,"Expected a class definition");let e=TT.get(t);return e?(Ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QM.type="NONE";const RT=QM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e,n){return`firebase:${t}:${e}:${n}`}class Yd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Dy(this.userKey,s.apiKey,a),this.fullPersistenceKey=Dy("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yd(wo(RT),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||wo(RT);const o=Dy(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){const m=xo._fromJSON(e,h);d!==a&&(l=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Yd(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Yd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nD(e))return"Blackberry";if(rD(e))return"Webos";if(JM(e))return"Safari";if((e.includes("chrome/")||XM(e))&&!e.includes("edge/"))return"Chrome";if(tD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YM(t=es()){return/firefox\//i.test(t)}function JM(t=es()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XM(t=es()){return/crios\//i.test(t)}function eD(t=es()){return/iemobile/i.test(t)}function tD(t=es()){return/android/i.test(t)}function nD(t=es()){return/blackberry/i.test(t)}function rD(t=es()){return/webos/i.test(t)}function KS(t=es()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qq(t=es()){var e;return KS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Yq(){return hH()&&document.documentMode===10}function sD(t=es()){return KS(t)||tD(t)||rD(t)||nD(t)||/windows phone/i.test(t)||eD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e=[]){let n;switch(t){case"Browser":n=kT(es());break;case"Worker":n=`${kT(es())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ku}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq(t,e={}){return ta(t,"GET","/v2/passwordPolicy",Ho(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=6;class tG{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IT(this),this.idTokenSubscription=new IT(this),this.beforeStateQueue=new Jq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wo(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Yd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KM(this,{idToken:e}),r=await xo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ax(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Dq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(Wi(this));const n=e?Wt(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xq(this),n=new tG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bg("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wo(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await Yd.create(this,[wo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Iq(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qo(t){return Wt(t)}class IT{constructor(e){this.auth=e,this.observer=null,this.addObserver=wH(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rG(t){q0=t}function aD(t){return q0.loadJS(t)}function sG(){return q0.recaptchaEnterpriseScript}function iG(){return q0.gapiScript}function aG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const oG="recaptcha-enterprise",lG="NO_RECAPTCHA";class cG{constructor(e){this.type=oG,this.auth=qo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Uq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new zq(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;PT(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(lG)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&PT(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=sG();u.length!==0&&(u+=l),aD(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function AT(t,e,n,r=!1){const s=new cG(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Z1(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await AT(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await AT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(t,e){const n=H0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Rx(a,e??{}))return s;Ni(s,"already-initialized")}return n.initialize({options:e})}function dG(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hG(t,e,n){const r=qo(t);dt(r._canInitEmulator,r,"emulator-config-failed"),dt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=oD(e),{host:o,port:l}=fG(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),mG()}function oD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fG(t){const e=oD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:OT(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:OT(o)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mG(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,n){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}}async function pG(t,e){return ta(t,"POST","/v1/accounts:update",e)}async function gG(t,e){return ta(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vG(t,e){return Sg(t,"POST","/v1/accounts:signInWithPassword",Ho(t,e))}async function yG(t,e){return ta(t,"POST","/v1/accounts:sendOobCode",Ho(t,e))}async function xG(t,e){return yG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e){return Sg(t,"POST","/v1/accounts:signInWithEmailLink",Ho(t,e))}async function bG(t,e){return Sg(t,"POST","/v1/accounts:signInWithEmailLink",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends ZS{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new mp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z1(e,n,"signInWithPassword",vG);case"emailLink":return wG(e,{email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z1(e,r,"signUpPassword",gG);case"emailLink":return bG(e,{idToken:n,email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(t,e){return Sg(t,"POST","/v1/accounts:signInWithIdp",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G="http://localhost";class hu extends ZS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=jg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hu(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Jd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jd(e,n)}buildRequest(){const e={requestUri:_G,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_g(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NG(t){const e=fm(mm(t)).link,n=e?fm(mm(e)).deep_link_id:null,r=fm(mm(t)).deep_link_id;return(r?fm(mm(r)).link:null)||r||n||e||t}class QS{constructor(e){var n,r,s,a,o,l;const u=fm(mm(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=jG((s=u.mode)!==null&&s!==void 0?s:null);dt(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=NG(e);try{return new QS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,n){return mp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=QS.parseLink(n);return dt(r,"argument-error"),mp._fromEmailAndCode(e,r.code,r.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends YS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Eg{constructor(){super("facebook.com")}static credential(e){return hu._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xl.credential(e.oauthAccessToken)}catch{return null}}}xl.FACEBOOK_SIGN_IN_METHOD="facebook.com";xl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Eg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hu._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return po.credential(n,r)}catch{return null}}}po.GOOGLE_SIGN_IN_METHOD="google.com";po.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Eg{constructor(){super("github.com")}static credential(e){return hu._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.GITHUB_SIGN_IN_METHOD="github.com";wl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Eg{constructor(){super("twitter.com")}static credential(e,n){return hu._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bl.credential(n,r)}catch{return null}}}bl.TWITTER_SIGN_IN_METHOD="twitter.com";bl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SG(t,e){return Sg(t,"POST","/v1/accounts:signUp",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await xo._fromIdTokenResponse(e,r,s),o=MT(r);return new fu({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=MT(r);return new fu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function MT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Wa{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ox.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ox(e,n,r,s)}}function lD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ox._fromErrorAndOperation(t,a,e,r):a})}async function EG(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e,n=!1){const{auth:r}=t;if(pi(r.app))return Promise.reject(Wi(r));const s="reauthenticate";try{const a=await du(t,lD(r,s,e,t),n);dt(a.idToken,r,"internal-error");const o=GS(a.idToken);dt(o,r,"internal-error");const{sub:l}=o;return dt(t.uid===l,r,"user-mismatch"),fu._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ni(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e,n=!1){if(pi(t.app))return Promise.reject(Wi(t));const r="signIn",s=await lD(t,r,e),a=await fu._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function PG(t,e){return uD(qo(t),e)}async function DT(t,e){return cD(Wt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CG(t,e,n){var r;dt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),dt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(dt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(dt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t){const e=qo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hD(t,e,n){if(pi(t.app))return Promise.reject(Wi(t));const r=qo(t),o=await Z1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SG).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dD(t),u}),l=await fu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function TG(t,e,n){return pi(t.app)?Promise.reject(Wi(t)):PG(Wt(t),Zl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dD(t),r})}async function qb(t,e){const n=Wt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&CG(n.auth,s,e);const{email:a}=await xG(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RG(t,e){return ta(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Wt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await du(r,RG(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function kG(t,e){const n=Wt(t);return pi(n.auth.app)?Promise.reject(Wi(n.auth)):fD(n,e,null)}function IG(t,e){return fD(Wt(t),null,e)}async function fD(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await du(t,pG(r,a));await t._updateTokensIfNecessary(o,!0)}function AG(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function OG(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}function MG(t,e,n,r){return Wt(t).onAuthStateChanged(e,n,r)}function DG(t){return Wt(t).signOut()}async function LG(t){return Wt(t).delete()}const Mx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mx,"1"),this.storage.removeItem(Mx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FG=1e3,$G=10;class pD extends mD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Yq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$G):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pD.type="LOCAL";const VG=pD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends mD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gD.type="SESSION";const vD=gD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new G0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await zG(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}G0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=JS("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(){return window}function BG(t){Ia().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return typeof Ia().WorkerGlobalScope<"u"&&typeof Ia().importScripts=="function"}async function WG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qG(){return yD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="firebaseLocalStorageDb",GG=1,Dx="firebaseLocalStorage",wD="fbase_key";class Pg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function K0(t,e){return t.transaction([Dx],e?"readwrite":"readonly").objectStore(Dx)}function KG(){const t=indexedDB.deleteDatabase(xD);return new Pg(t).toPromise()}function Q1(){const t=indexedDB.open(xD,GG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dx,{keyPath:wD})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dx)?e(r):(r.close(),await KG(),e(await Q1()))})})}async function LT(t,e,n){const r=K0(t,!0).put({[wD]:e,value:n});return new Pg(r).toPromise()}async function ZG(t,e){const n=K0(t,!1).get(e),r=await new Pg(n).toPromise();return r===void 0?null:r.value}function FT(t,e){const n=K0(t,!0).delete(e);return new Pg(n).toPromise()}const QG=800,YG=3;class bD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YG)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=G0._getInstance(qG()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WG(),!this.activeServiceWorker)return;this.sender=new UG(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q1();return await LT(e,Mx,"1"),await FT(e,Mx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>LT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZG(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=K0(s,!1).getAll();return new Pg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bD.type="LOCAL";const JG=bD;new Ng(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t,e){return e?wo(e):(dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends ZS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XG(t){return uD(t.auth,new XS(t),t.bypassAuthState)}function eK(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),cD(n,new XS(t),t.bypassAuthState)}async function tK(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),EG(n,new XS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XG;case"linkViaPopup":case"linkViaRedirect":return tK;case"reauthViaPopup":case"reauthViaRedirect":return eK;default:Ni(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=new Ng(2e3,1e4);class zd extends jD{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,zd.currentPopupAction&&zd.currentPopupAction.cancel(),zd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=JS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nK.get())};e()}}zd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK="pendingRedirect",Ly=new Map;class sK extends jD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ly.get(this.auth._key());if(!e){try{const r=await iK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ly.set(this.auth._key(),e)}return this.bypassAuthState||Ly.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iK(t,e){const n=SD(e),r=ND(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function aK(t,e){return ND(t)._set(SD(e),"true")}function oK(t,e){Ly.set(t._key(),e)}function ND(t){return wo(t._redirectPersistence)}function SD(t){return Dy(rK,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t,e,n){return cK(t,e,n)}async function cK(t,e,n){if(pi(t.app))return Promise.reject(Wi(t));const r=qo(t);Aq(t,e,YS),await r._initializationPromise;const s=_D(r,n);return await aK(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function uK(t,e){return await qo(t)._initializationPromise,ED(t,e,!1)}async function ED(t,e,n=!1){if(pi(t.app))return Promise.reject(Wi(t));const r=qo(t),s=_D(r,e),o=await new sK(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=10*60*1e3;class hK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PD(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ka(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dK&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mK(t,e={}){return ta(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gK=/^https?/;async function vK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mK(t);for(const n of e)try{if(yK(n))return}catch{}Ni(t,"unauthorized-domain")}function yK(t){const e=G1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gK.test(n))return!1;if(pK.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=new Ng(3e4,6e4);function VT(){const t=Ia().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wK(t){return new Promise((e,n)=>{var r,s,a;function o(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),n(ka(t,"network-request-failed"))},timeout:xK.get()})}if(!((s=(r=Ia().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ia().gapi)===null||a===void 0)&&a.load)o();else{const l=aG("iframefcb");return Ia()[l]=()=>{gapi.load?o():n(ka(t,"network-request-failed"))},aD(`${iG()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Fy=null,e})}let Fy=null;function bK(t){return Fy=Fy||wK(t),Fy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=new Ng(5e3,15e3),jK="__/auth/iframe",NK="emulator/auth/iframe",SK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PK(t){const e=t.config;dt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qS(e,NK):`https://${t.config.authDomain}/${jK}`,r={apiKey:e.apiKey,appName:t.name,v:ku},s=EK.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${_g(r).slice(1)}`}async function CK(t){const e=await bK(t),n=Ia().gapi;return dt(n,t,"internal-error"),e.open({where:document.body,url:PK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SK,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=ka(t,"network-request-failed"),l=Ia().setTimeout(()=>{a(o)},_K.get());function u(){Ia().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RK=500,kK=600,IK="_blank",AK="http://localhost";class zT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OK(t,e,n,r=RK,s=kK){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},TK),{width:r.toString(),height:s.toString(),top:a,left:o}),d=es().toLowerCase();n&&(l=XM(d)?IK:n),YM(d)&&(e=e||AK,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[v,N])=>`${p}${v}=${N},`,"");if(Qq(d)&&l!=="_self")return MK(e||"",l),new zT(null);const m=window.open(e||"",l,h);dt(m,t,"popup-blocked");try{m.focus()}catch{}return new zT(m)}function MK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK="__/auth/handler",LK="emulator/auth/handler",FK=encodeURIComponent("fac");async function UT(t,e,n,r,s,a){dt(t.config.authDomain,t,"auth-domain-config-required"),dt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ku,eventId:s};if(e instanceof YS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Eg){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${FK}=${encodeURIComponent(u)}`:"";return`${$K(t)}?${_g(l).slice(1)}${d}`}function $K({config:t}){return t.emulator?qS(t,LK):`https://${t.authDomain}/${DK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="webStorageSupport";class VK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vD,this._completeRedirectFn=ED,this._overrideRedirectResult=oK}async _openPopup(e,n,r,s){var a;Ro((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await UT(e,n,r,G1(),s);return OK(e,o,JS())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await UT(e,n,r,G1(),s);return BG(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Ro(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CK(e),r=new hK(e);return n.register("authEvent",s=>(dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gb,{type:Gb},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Gb];o!==void 0&&n(!!o),Ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sD()||JM()||KS()}}const zK=VK;var BT="@firebase/auth",WT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WK(t){uu(new Kl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iD(t)},d=new nG(r,s,a,u);return dG(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),uu(new Kl("auth-internal",e=>{const n=qo(e.getProvider("auth").getImmediate());return(r=>new UK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ra(BT,WT,BK(t)),Ra(BT,WT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=5*60,qK=DM("authIdTokenMaxAge")||HK;let HT=null;const GK=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qK)return;const s=n==null?void 0:n.token;HT!==s&&(HT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KK(t=BS()){const e=H0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uG(t,{popupRedirectResolver:zK,persistence:[JG,VG,vD]}),r=DM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=GK(a.toString());OG(n,o,()=>o(n.currentUser)),AG(n,l=>o(l))}}const s=AM("auth");return s&&hG(n,`http://${s}`),n}function ZK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ka("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",ZK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WK("Browser");var qT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qc,CD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function $(){}$.prototype=I.prototype,k.D=I.prototype,k.prototype=new $,k.prototype.constructor=k,k.C=function(T,M,D){for(var O=Array(arguments.length-2),B=2;B<arguments.length;B++)O[B-2]=arguments[B];return I.prototype[M].apply(T,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,I,$){$||($=0);var T=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)T[M]=I.charCodeAt($++)|I.charCodeAt($++)<<8|I.charCodeAt($++)<<16|I.charCodeAt($++)<<24;else for(M=0;16>M;++M)T[M]=I[$++]|I[$++]<<8|I[$++]<<16|I[$++]<<24;I=k.g[0],$=k.g[1],M=k.g[2];var D=k.g[3],O=I+(D^$&(M^D))+T[0]+3614090360&4294967295;I=$+(O<<7&4294967295|O>>>25),O=D+(M^I&($^M))+T[1]+3905402710&4294967295,D=I+(O<<12&4294967295|O>>>20),O=M+($^D&(I^$))+T[2]+606105819&4294967295,M=D+(O<<17&4294967295|O>>>15),O=$+(I^M&(D^I))+T[3]+3250441966&4294967295,$=M+(O<<22&4294967295|O>>>10),O=I+(D^$&(M^D))+T[4]+4118548399&4294967295,I=$+(O<<7&4294967295|O>>>25),O=D+(M^I&($^M))+T[5]+1200080426&4294967295,D=I+(O<<12&4294967295|O>>>20),O=M+($^D&(I^$))+T[6]+2821735955&4294967295,M=D+(O<<17&4294967295|O>>>15),O=$+(I^M&(D^I))+T[7]+4249261313&4294967295,$=M+(O<<22&4294967295|O>>>10),O=I+(D^$&(M^D))+T[8]+1770035416&4294967295,I=$+(O<<7&4294967295|O>>>25),O=D+(M^I&($^M))+T[9]+2336552879&4294967295,D=I+(O<<12&4294967295|O>>>20),O=M+($^D&(I^$))+T[10]+4294925233&4294967295,M=D+(O<<17&4294967295|O>>>15),O=$+(I^M&(D^I))+T[11]+2304563134&4294967295,$=M+(O<<22&4294967295|O>>>10),O=I+(D^$&(M^D))+T[12]+1804603682&4294967295,I=$+(O<<7&4294967295|O>>>25),O=D+(M^I&($^M))+T[13]+4254626195&4294967295,D=I+(O<<12&4294967295|O>>>20),O=M+($^D&(I^$))+T[14]+2792965006&4294967295,M=D+(O<<17&4294967295|O>>>15),O=$+(I^M&(D^I))+T[15]+1236535329&4294967295,$=M+(O<<22&4294967295|O>>>10),O=I+(M^D&($^M))+T[1]+4129170786&4294967295,I=$+(O<<5&4294967295|O>>>27),O=D+($^M&(I^$))+T[6]+3225465664&4294967295,D=I+(O<<9&4294967295|O>>>23),O=M+(I^$&(D^I))+T[11]+643717713&4294967295,M=D+(O<<14&4294967295|O>>>18),O=$+(D^I&(M^D))+T[0]+3921069994&4294967295,$=M+(O<<20&4294967295|O>>>12),O=I+(M^D&($^M))+T[5]+3593408605&4294967295,I=$+(O<<5&4294967295|O>>>27),O=D+($^M&(I^$))+T[10]+38016083&4294967295,D=I+(O<<9&4294967295|O>>>23),O=M+(I^$&(D^I))+T[15]+3634488961&4294967295,M=D+(O<<14&4294967295|O>>>18),O=$+(D^I&(M^D))+T[4]+3889429448&4294967295,$=M+(O<<20&4294967295|O>>>12),O=I+(M^D&($^M))+T[9]+568446438&4294967295,I=$+(O<<5&4294967295|O>>>27),O=D+($^M&(I^$))+T[14]+3275163606&4294967295,D=I+(O<<9&4294967295|O>>>23),O=M+(I^$&(D^I))+T[3]+4107603335&4294967295,M=D+(O<<14&4294967295|O>>>18),O=$+(D^I&(M^D))+T[8]+1163531501&4294967295,$=M+(O<<20&4294967295|O>>>12),O=I+(M^D&($^M))+T[13]+2850285829&4294967295,I=$+(O<<5&4294967295|O>>>27),O=D+($^M&(I^$))+T[2]+4243563512&4294967295,D=I+(O<<9&4294967295|O>>>23),O=M+(I^$&(D^I))+T[7]+1735328473&4294967295,M=D+(O<<14&4294967295|O>>>18),O=$+(D^I&(M^D))+T[12]+2368359562&4294967295,$=M+(O<<20&4294967295|O>>>12),O=I+($^M^D)+T[5]+4294588738&4294967295,I=$+(O<<4&4294967295|O>>>28),O=D+(I^$^M)+T[8]+2272392833&4294967295,D=I+(O<<11&4294967295|O>>>21),O=M+(D^I^$)+T[11]+1839030562&4294967295,M=D+(O<<16&4294967295|O>>>16),O=$+(M^D^I)+T[14]+4259657740&4294967295,$=M+(O<<23&4294967295|O>>>9),O=I+($^M^D)+T[1]+2763975236&4294967295,I=$+(O<<4&4294967295|O>>>28),O=D+(I^$^M)+T[4]+1272893353&4294967295,D=I+(O<<11&4294967295|O>>>21),O=M+(D^I^$)+T[7]+4139469664&4294967295,M=D+(O<<16&4294967295|O>>>16),O=$+(M^D^I)+T[10]+3200236656&4294967295,$=M+(O<<23&4294967295|O>>>9),O=I+($^M^D)+T[13]+681279174&4294967295,I=$+(O<<4&4294967295|O>>>28),O=D+(I^$^M)+T[0]+3936430074&4294967295,D=I+(O<<11&4294967295|O>>>21),O=M+(D^I^$)+T[3]+3572445317&4294967295,M=D+(O<<16&4294967295|O>>>16),O=$+(M^D^I)+T[6]+76029189&4294967295,$=M+(O<<23&4294967295|O>>>9),O=I+($^M^D)+T[9]+3654602809&4294967295,I=$+(O<<4&4294967295|O>>>28),O=D+(I^$^M)+T[12]+3873151461&4294967295,D=I+(O<<11&4294967295|O>>>21),O=M+(D^I^$)+T[15]+530742520&4294967295,M=D+(O<<16&4294967295|O>>>16),O=$+(M^D^I)+T[2]+3299628645&4294967295,$=M+(O<<23&4294967295|O>>>9),O=I+(M^($|~D))+T[0]+4096336452&4294967295,I=$+(O<<6&4294967295|O>>>26),O=D+($^(I|~M))+T[7]+1126891415&4294967295,D=I+(O<<10&4294967295|O>>>22),O=M+(I^(D|~$))+T[14]+2878612391&4294967295,M=D+(O<<15&4294967295|O>>>17),O=$+(D^(M|~I))+T[5]+4237533241&4294967295,$=M+(O<<21&4294967295|O>>>11),O=I+(M^($|~D))+T[12]+1700485571&4294967295,I=$+(O<<6&4294967295|O>>>26),O=D+($^(I|~M))+T[3]+2399980690&4294967295,D=I+(O<<10&4294967295|O>>>22),O=M+(I^(D|~$))+T[10]+4293915773&4294967295,M=D+(O<<15&4294967295|O>>>17),O=$+(D^(M|~I))+T[1]+2240044497&4294967295,$=M+(O<<21&4294967295|O>>>11),O=I+(M^($|~D))+T[8]+1873313359&4294967295,I=$+(O<<6&4294967295|O>>>26),O=D+($^(I|~M))+T[15]+4264355552&4294967295,D=I+(O<<10&4294967295|O>>>22),O=M+(I^(D|~$))+T[6]+2734768916&4294967295,M=D+(O<<15&4294967295|O>>>17),O=$+(D^(M|~I))+T[13]+1309151649&4294967295,$=M+(O<<21&4294967295|O>>>11),O=I+(M^($|~D))+T[4]+4149444226&4294967295,I=$+(O<<6&4294967295|O>>>26),O=D+($^(I|~M))+T[11]+3174756917&4294967295,D=I+(O<<10&4294967295|O>>>22),O=M+(I^(D|~$))+T[2]+718787259&4294967295,M=D+(O<<15&4294967295|O>>>17),O=$+(D^(M|~I))+T[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var $=I-this.blockSize,T=this.B,M=this.h,D=0;D<I;){if(M==0)for(;D<=$;)s(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<I;)if(T[M++]=k.charCodeAt(D++),M==this.blockSize){s(this,T),M=0;break}}else for(;D<I;)if(T[M++]=k[D++],M==this.blockSize){s(this,T),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var $=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=$&255,$/=256;for(this.u(k),k=Array(16),I=$=0;4>I;++I)for(var T=0;32>T;T+=8)k[$++]=this.g[I]>>>T&255;return k};function a(k,I){var $=l;return Object.prototype.hasOwnProperty.call($,k)?$[k]:$[k]=I(k)}function o(k,I){this.h=I;for(var $=[],T=!0,M=k.length-1;0<=M;M--){var D=k[M]|0;T&&D==I||($[M]=D,T=!1)}this.g=$}var l={};function u(k){return-128<=k&&128>k?a(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return j(d(-k));for(var I=[],$=1,T=0;k>=$;T++)I[T]=k/$|0,$*=4294967296;return new o(I,0)}function h(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return j(h(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var $=d(Math.pow(I,8)),T=m,M=0;M<k.length;M+=8){var D=Math.min(8,k.length-M),O=parseInt(k.substring(M,M+D),I);8>D?(D=d(Math.pow(I,D)),T=T.j(D).add(d(O))):(T=T.j($),T=T.add(d(O)))}return T}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-j(this).m();for(var k=0,I=1,$=0;$<this.g.length;$++){var T=this.i($);k+=(0<=T?T:4294967296+T)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(b(this))return"-"+j(this).toString(k);for(var I=d(Math.pow(k,6)),$=this,T="";;){var M=C($,I).g;$=_($,M.j(I));var D=((0<$.g.length?$.g[0]:$.h)>>>0).toString(k);if($=M,N($))return D+T;for(;6>D.length;)D="0"+D;T=D+T}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function b(k){return k.h==-1}t.l=function(k){return k=_(this,k),b(k)?-1:N(k)?0:1};function j(k){for(var I=k.g.length,$=[],T=0;T<I;T++)$[T]=~k.g[T];return new o($,~k.h).add(p)}t.abs=function(){return b(this)?j(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),$=[],T=0,M=0;M<=I;M++){var D=T+(this.i(M)&65535)+(k.i(M)&65535),O=(D>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);T=O>>>16,D&=65535,O&=65535,$[M]=O<<16|D}return new o($,$[$.length-1]&-2147483648?-1:0)};function _(k,I){return k.add(j(I))}t.j=function(k){if(N(this)||N(k))return m;if(b(this))return b(k)?j(this).j(j(k)):j(j(this).j(k));if(b(k))return j(this.j(j(k)));if(0>this.l(v)&&0>k.l(v))return d(this.m()*k.m());for(var I=this.g.length+k.g.length,$=[],T=0;T<2*I;T++)$[T]=0;for(T=0;T<this.g.length;T++)for(var M=0;M<k.g.length;M++){var D=this.i(T)>>>16,O=this.i(T)&65535,B=k.i(M)>>>16,Y=k.i(M)&65535;$[2*T+2*M]+=O*Y,x($,2*T+2*M),$[2*T+2*M+1]+=D*Y,x($,2*T+2*M+1),$[2*T+2*M+1]+=O*B,x($,2*T+2*M+1),$[2*T+2*M+2]+=D*B,x($,2*T+2*M+2)}for(T=0;T<I;T++)$[T]=$[2*T+1]<<16|$[2*T];for(T=I;T<2*I;T++)$[T]=0;return new o($,0)};function x(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function S(k,I){this.g=k,this.h=I}function C(k,I){if(N(I))throw Error("division by zero");if(N(k))return new S(m,m);if(b(k))return I=C(j(k),I),new S(j(I.g),j(I.h));if(b(I))return I=C(k,j(I)),new S(j(I.g),I.h);if(30<k.g.length){if(b(k)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var $=p,T=I;0>=T.l(k);)$=R($),T=R(T);var M=V($,1),D=V(T,1);for(T=V(T,2),$=V($,2);!N(T);){var O=D.add(T);0>=O.l(k)&&(M=M.add($),D=O),T=V(T,1),$=V($,1)}return I=_(k,M.j(I)),new S(M,I)}for(M=m;0<=k.l(I);){for($=Math.max(1,Math.floor(k.m()/I.m())),T=Math.ceil(Math.log($)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),D=d($),O=D.j(I);b(O)||0<O.l(k);)$-=T,D=d($),O=D.j(I);N(D)&&(D=p),M=M.add(D),k=_(k,O)}return new S(M,k)}t.A=function(k){return C(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),$=[],T=0;T<I;T++)$[T]=this.i(T)&k.i(T);return new o($,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),$=[],T=0;T<I;T++)$[T]=this.i(T)|k.i(T);return new o($,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),$=[],T=0;T<I;T++)$[T]=this.i(T)^k.i(T);return new o($,this.h^k.h)};function R(k){for(var I=k.g.length+1,$=[],T=0;T<I;T++)$[T]=k.i(T)<<1|k.i(T-1)>>>31;return new o($,k.h)}function V(k,I){var $=I>>5;I%=32;for(var T=k.g.length-$,M=[],D=0;D<T;D++)M[D]=0<I?k.i(D+$)>>>I|k.i(D+$+1)<<32-I:k.i(D+$);return new o(M,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Qc=o}).apply(typeof qT<"u"?qT:typeof self<"u"?self:typeof window<"u"?window:{});var Jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TD,gm,RD,$y,Y1,kD,ID,AD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,P,F){return g==Array.prototype||g==Object.prototype||(g[P]=F.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jv=="object"&&Jv];for(var P=0;P<g.length;++P){var F=g[P];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function s(g,P){if(P)e:{var F=r;g=g.split(".");for(var W=0;W<g.length-1;W++){var le=g[W];if(!(le in F))break e;F=F[le]}g=g[g.length-1],W=F[g],P=P(W),P!=W&&P!=null&&e(F,g,{configurable:!0,writable:!0,value:P})}}function a(g,P){g instanceof String&&(g+="");var F=0,W=!1,le={next:function(){if(!W&&F<g.length){var pe=F++;return{value:P(pe,g[pe]),done:!1}}return W=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}s("Array.prototype.values",function(g){return g||function(){return a(this,function(P,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var P=typeof g;return P=P!="object"?P:g?Array.isArray(g)?"array":P:"null",P=="array"||P=="object"&&typeof g.length=="number"}function d(g){var P=typeof g;return P=="object"&&g!=null||P=="function"}function h(g,P,F){return g.call.apply(g.bind,arguments)}function m(g,P,F){if(!g)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,W),g.apply(P,le)}}return function(){return g.apply(P,arguments)}}function p(g,P,F){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function v(g,P){var F=Array.prototype.slice.call(arguments,1);return function(){var W=F.slice();return W.push.apply(W,arguments),g.apply(this,W)}}function N(g,P){function F(){}F.prototype=P.prototype,g.aa=P.prototype,g.prototype=new F,g.prototype.constructor=g,g.Qb=function(W,le,pe){for(var Le=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)Le[Kt-2]=arguments[Kt];return P.prototype[le].apply(W,Le)}}function b(g){const P=g.length;if(0<P){const F=Array(P);for(let W=0;W<P;W++)F[W]=g[W];return F}return[]}function j(g,P){for(let F=1;F<arguments.length;F++){const W=arguments[F];if(u(W)){const le=g.length||0,pe=W.length||0;g.length=le+pe;for(let Le=0;Le<pe;Le++)g[le+Le]=W[Le]}else g.push(W)}}class _{constructor(P,F){this.i=P,this.j=F,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function x(g){return/^[\s\xa0]*$/.test(g)}function S(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function C(g){return C[" "](g),g}C[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(g,P,F){for(const W in g)P.call(F,g[W],W,g)}function k(g,P){for(const F in g)P.call(void 0,g[F],F,g)}function I(g){const P={};for(const F in g)P[F]=g[F];return P}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(g,P){let F,W;for(let le=1;le<arguments.length;le++){W=arguments[le];for(F in W)g[F]=W[F];for(let pe=0;pe<$.length;pe++)F=$[pe],Object.prototype.hasOwnProperty.call(W,F)&&(g[F]=W[F])}}function M(g){var P=1;g=g.split(":");const F=[];for(;0<P&&g.length;)F.push(g.shift()),P--;return g.length&&F.push(g.join(":")),F}function D(g){l.setTimeout(()=>{throw g},0)}function O(){var g=H;let P=null;return g.g&&(P=g.g,g.g=g.g.next,g.g||(g.h=null),P.next=null),P}class B{constructor(){this.h=this.g=null}add(P,F){const W=Y.get();W.set(P,F),this.h?this.h.next=W:this.g=W,this.h=W}}var Y=new _(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(P,F){this.h=P,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,z=!1,H=new B,q=()=>{const g=l.Promise.resolve(void 0);Z=()=>{g.then(X)}};var X=()=>{for(var g;g=O();){try{g.h.call(g.g)}catch(F){D(F)}var P=Y;P.j(g),100>P.h&&(P.h++,g.next=P.g,P.g=g)}z=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(g,P){this.type=g,this.g=this.target=P,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,P=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const F=()=>{};l.addEventListener("test",F,P),l.removeEventListener("test",F,P)}catch{}return g}();function Me(g,P){if(Ee.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var F=this.type=g.type,W=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=P,P=g.relatedTarget){if(R){e:{try{C(P.nodeName);var le=!0;break e}catch{}le=!1}le||(P=null)}}else F=="mouseover"?P=g.fromElement:F=="mouseout"&&(P=g.toElement);this.relatedTarget=P,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:ue[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Me.aa.h.call(this)}}N(Me,Ee);var ue={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),J=0;function te(g,P,F,W,le){this.listener=g,this.proxy=null,this.src=P,this.type=F,this.capture=!!W,this.ha=le,this.key=++J,this.da=this.fa=!1}function ne(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function K(g){this.src=g,this.g={},this.h=0}K.prototype.add=function(g,P,F,W,le){var pe=g.toString();g=this.g[pe],g||(g=this.g[pe]=[],this.h++);var Le=he(g,P,W,le);return-1<Le?(P=g[Le],F||(P.fa=!1)):(P=new te(P,this.src,pe,!!W,le),P.fa=F,g.push(P)),P};function ie(g,P){var F=P.type;if(F in g.g){var W=g.g[F],le=Array.prototype.indexOf.call(W,P,void 0),pe;(pe=0<=le)&&Array.prototype.splice.call(W,le,1),pe&&(ne(P),g.g[F].length==0&&(delete g.g[F],g.h--))}}function he(g,P,F,W){for(var le=0;le<g.length;++le){var pe=g[le];if(!pe.da&&pe.listener==P&&pe.capture==!!F&&pe.ha==W)return le}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),xe={};function se(g,P,F,W,le){if(Array.isArray(P)){for(var pe=0;pe<P.length;pe++)se(g,P[pe],F,W,le);return null}return F=Ce(F),g&&g[ye]?g.K(P,F,d(W)?!!W.capture:!1,le):we(g,P,F,!1,W,le)}function we(g,P,F,W,le,pe){if(!P)throw Error("Invalid event type");var Le=d(le)?!!le.capture:!!le,Kt=Re(g);if(Kt||(g[_e]=Kt=new K(g)),F=Kt.add(P,F,W,Le,pe),F.proxy)return F;if(W=Ne(),F.proxy=W,W.src=g,W.listener=F,g.addEventListener)Fe||(le=Le),le===void 0&&(le=!1),g.addEventListener(P.toString(),W,le);else if(g.attachEvent)g.attachEvent(ae(P.toString()),W);else if(g.addListener&&g.removeListener)g.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Ne(){function g(F){return P.call(g.src,g.listener,F)}const P=de;return g}function He(g,P,F,W,le){if(Array.isArray(P))for(var pe=0;pe<P.length;pe++)He(g,P[pe],F,W,le);else W=d(W)?!!W.capture:!!W,F=Ce(F),g&&g[ye]?(g=g.i,P=String(P).toString(),P in g.g&&(pe=g.g[P],F=he(pe,F,W,le),-1<F&&(ne(pe[F]),Array.prototype.splice.call(pe,F,1),pe.length==0&&(delete g.g[P],g.h--)))):g&&(g=Re(g))&&(P=g.g[P.toString()],g=-1,P&&(g=he(P,F,W,le)),(F=-1<g?P[g]:null)&&G(F))}function G(g){if(typeof g!="number"&&g&&!g.da){var P=g.src;if(P&&P[ye])ie(P.i,g);else{var F=g.type,W=g.proxy;P.removeEventListener?P.removeEventListener(F,W,g.capture):P.detachEvent?P.detachEvent(ae(F),W):P.addListener&&P.removeListener&&P.removeListener(W),(F=Re(P))?(ie(F,g),F.h==0&&(F.src=null,P[_e]=null)):ne(g)}}}function ae(g){return g in xe?xe[g]:xe[g]="on"+g}function de(g,P){if(g.da)g=!0;else{P=new Me(P,this);var F=g.listener,W=g.ha||g.src;g.fa&&G(g),g=F.call(W,P)}return g}function Re(g){return g=g[_e],g instanceof K?g:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(g){return typeof g=="function"?g:(g[ke]||(g[ke]=function(P){return g.handleEvent(P)}),g[ke])}function De(){me.call(this),this.i=new K(this),this.M=this,this.F=null}N(De,me),De.prototype[ye]=!0,De.prototype.removeEventListener=function(g,P,F,W){He(this,g,P,F,W)};function We(g,P){var F,W=g.F;if(W)for(F=[];W;W=W.F)F.push(W);if(g=g.M,W=P.type||P,typeof P=="string")P=new Ee(P,g);else if(P instanceof Ee)P.target=P.target||g;else{var le=P;P=new Ee(W,g),T(P,le)}if(le=!0,F)for(var pe=F.length-1;0<=pe;pe--){var Le=P.g=F[pe];le=tt(Le,W,!0,P)&&le}if(Le=P.g=g,le=tt(Le,W,!0,P)&&le,le=tt(Le,W,!1,P)&&le,F)for(pe=0;pe<F.length;pe++)Le=P.g=F[pe],le=tt(Le,W,!1,P)&&le}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var g=this.i,P;for(P in g.g){for(var F=g.g[P],W=0;W<F.length;W++)ne(F[W]);delete g.g[P],g.h--}}this.F=null},De.prototype.K=function(g,P,F,W){return this.i.add(String(g),P,!1,F,W)},De.prototype.L=function(g,P,F,W){return this.i.add(String(g),P,!0,F,W)};function tt(g,P,F,W){if(P=g.i.g[String(P)],!P)return!0;P=P.concat();for(var le=!0,pe=0;pe<P.length;++pe){var Le=P[pe];if(Le&&!Le.da&&Le.capture==F){var Kt=Le.listener,tr=Le.ha||Le.src;Le.fa&&ie(g.i,Le),le=Kt.call(tr,W)!==!1&&le}}return le&&!W.defaultPrevented}function Ht(g,P,F){if(typeof g=="function")F&&(g=p(g,F));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:l.setTimeout(g,P||0)}function Ln(g){g.g=Ht(()=>{g.g=null,g.i&&(g.i=!1,Ln(g))},g.l);const P=g.h;g.h=null,g.m.apply(null,P)}class Tn extends me{constructor(P,F){super(),this.m=P,this.l=F,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Ln(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(g){me.call(this),this.h=g,this.g={}}N(Je,me);var dr=[];function ys(g){V(g.g,function(P,F){this.g.hasOwnProperty(F)&&G(P)},g),g.g={}}Je.prototype.N=function(){Je.aa.N.call(this),ys(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ia=l.JSON.stringify,zu=l.JSON.parse,Za=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Go(){}Go.prototype.h=null;function rv(g){return g.h||(g.h=g.i())}function ff(){}var Ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uu(){Ee.call(this,"d")}N(Uu,Ee);function mf(){Ee.call(this,"c")}N(mf,Ee);var Qa={},sv=null;function Bu(){return sv=sv||new De}Qa.La="serverreachability";function iv(g){Ee.call(this,Qa.La,g)}N(iv,Ee);function yc(g){const P=Bu();We(P,new iv(P))}Qa.STAT_EVENT="statevent";function Wu(g,P){Ee.call(this,Qa.STAT_EVENT,g),this.stat=P}N(Wu,Ee);function Cr(g){const P=Bu();We(P,new Wu(P,g))}Qa.Ma="timingevent";function av(g,P){Ee.call(this,Qa.Ma,g),this.size=P}N(av,Ee);function xc(g,P){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},P)}function wc(){this.g=!0}wc.prototype.xa=function(){this.g=!1};function ri(g,P,F,W,le,pe){g.info(function(){if(g.g)if(pe)for(var Le="",Kt=pe.split("&"),tr=0;tr<Kt.length;tr++){var Dt=Kt[tr].split("=");if(1<Dt.length){var tn=Dt[0];Dt=Dt[1];var kn=tn.split("_");Le=2<=kn.length&&kn[1]=="type"?Le+(tn+"="+Dt+"&"):Le+(tn+"=redacted&")}}else Le=null;else Le=pe;return"XMLHTTP REQ ("+W+") [attempt "+le+"]: "+P+`
`+F+`
`+Le})}function lt(g,P,F,W,le,pe,Le){g.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+le+"]: "+P+`
`+F+`
`+pe+" "+Le})}function Ya(g,P,F,W){g.info(function(){return"XMLHTTP TEXT ("+P+"): "+lv(g,F)+(W?" "+W:"")})}function ov(g,P){g.info(function(){return"TIMEOUT: "+P})}wc.prototype.info=function(){};function lv(g,P){if(!g.g)return P;if(!P)return null;try{var F=JSON.parse(P);if(F){for(g=0;g<F.length;g++)if(Array.isArray(F[g])){var W=F[g];if(!(2>W.length)){var le=W[1];if(Array.isArray(le)&&!(1>le.length)){var pe=le[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var Le=1;Le<le.length;Le++)le[Le]=""}}}}return ia(F)}catch{return P}}var bc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qu;function Pi(){}N(Pi,Go),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},qu=new Pi;function Ci(g,P,F,W){this.j=g,this.i=P,this.l=F,this.R=W||1,this.U=new Je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cv}function cv(){this.i=null,this.g="",this.h=!1}var uv={},pf={};function gf(g,P,F){g.L=1,g.v=ii(Fn(P)),g.m=F,g.P=!0,vf(g,null)}function vf(g,P){g.F=Date.now(),Ku(g),g.A=Fn(g.v);var F=g.A,W=g.R;Array.isArray(W)||(W=[String(W)]),fv(F.i,"t",W),g.C=0,F=g.j.J,g.h=new cv,g.g=wv(g.j,F?P:null,!g.m),0<g.O&&(g.M=new Tn(p(g.Y,g,g.g),g.O)),P=g.U,F=g.g,W=g.ca;var le="readystatechange";Array.isArray(le)||(le&&(dr[0]=le.toString()),le=dr);for(var pe=0;pe<le.length;pe++){var Le=se(F,le[pe],W||P.handleEvent,!1,P.h||P);if(!Le)break;P.g[Le.key]=Le}P=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,P)):(g.u="GET",g.g.ea(g.A,g.u,null,P)),yc(),ri(g.i,g.u,g.A,g.l,g.R,g.m)}Ci.prototype.ca=function(g){g=g.target;const P=this.M;P&&rs(g)==3?P.j():this.Y(g)},Ci.prototype.Y=function(g){try{if(g==this.g)e:{const kn=rs(this.g);var P=this.g.Ba();const tl=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||Af(this.g)))){this.J||kn!=4||P==7||(P==8||0>=tl?yc(3):yc(2)),yf(this);var F=this.g.Z();this.X=F;t:if(dv(this)){var W=Af(this.g);g="";var le=W.length,pe=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ja(this),_c(this);var Le="";break t}this.h.i=new l.TextDecoder}for(P=0;P<le;P++)this.h.h=!0,g+=this.h.i.decode(W[P],{stream:!(pe&&P==le-1)});W.length=0,this.h.g+=g,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=F==200,lt(this.i,this.u,this.A,this.l,this.R,kn,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,tr=this.g;if((Kt=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Kt)){var Dt=Kt;break t}}Dt=null}if(F=Dt)Ya(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jc(this,F);else{this.o=!1,this.s=3,Cr(12),Ja(this),_c(this);break e}}if(this.P){F=!0;let Hn;for(;!this.J&&this.C<Le.length;)if(Hn=Gu(this,Le),Hn==pf){kn==4&&(this.s=4,Cr(14),F=!1),Ya(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==uv){this.s=4,Cr(15),Ya(this.i,this.l,Le,"[Invalid Chunk]"),F=!1;break}else Ya(this.i,this.l,Hn,null),jc(this,Hn);if(dv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||Le.length!=0||this.h.h||(this.s=1,Cr(16),F=!1),this.o=this.o&&F,!F)Ya(this.i,this.l,Le,"[Invalid Chunked Response]"),Ja(this),_c(this);else if(0<Le.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),rd(tn),tn.M=!0,Cr(11))}}else Ya(this.i,this.l,Le,null),jc(this,Le);kn==4&&Ja(this),this.o&&!this.J&&(kn==4?Mf(this.j,this):(this.o=!1,Ku(this)))}else ab(this.g),F==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Cr(12)):(this.s=0,Cr(13)),Ja(this),_c(this)}}}catch{}finally{}};function dv(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Gu(g,P){var F=g.C,W=P.indexOf(`
`,F);return W==-1?pf:(F=Number(P.substring(F,W)),isNaN(F)?uv:(W+=1,W+F>P.length?pf:(P=P.slice(W,W+F),g.C=W+F,P)))}Ci.prototype.cancel=function(){this.J=!0,Ja(this)};function Ku(g){g.S=Date.now()+g.I,hv(g,g.I)}function hv(g,P){if(g.B!=null)throw Error("WatchDog timer not null");g.B=xc(p(g.ba,g),P)}function yf(g){g.B&&(l.clearTimeout(g.B),g.B=null)}Ci.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ov(this.i,this.A),this.L!=2&&(yc(),Cr(17)),Ja(this),this.s=2,_c(this)):hv(this,this.S-g)};function _c(g){g.j.G==0||g.J||Mf(g.j,g)}function Ja(g){yf(g);var P=g.M;P&&typeof P.ma=="function"&&P.ma(),g.M=null,ys(g.U),g.g&&(P=g.g,g.g=null,P.abort(),P.ma())}function jc(g,P){try{var F=g.j;if(F.G!=0&&(F.g==g||It(F.h,g))){if(!g.K&&It(F.h,g)&&F.G==3){try{var W=F.Da.g.parse(P)}catch{W=null}if(Array.isArray(W)&&W.length==3){var le=W;if(le[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<g.F)id(F),td(F);else break e;nd(F),Cr(18)}}else F.za=le[1],0<F.za-F.T&&37500>le[2]&&F.F&&F.v==0&&!F.C&&(F.C=xc(p(F.Za,F),6e3));if(1>=Zo(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else ro(F,11)}else if((g.K||F.g==g)&&id(F),!x(P))for(le=F.Da.g.parse(P),P=0;P<le.length;P++){let Dt=le[P];if(F.T=Dt[0],Dt=Dt[1],F.G==2)if(Dt[0]=="c"){F.K=Dt[1],F.ia=Dt[2];const tn=Dt[3];tn!=null&&(F.la=tn,F.j.info("VER="+F.la));const kn=Dt[4];kn!=null&&(F.Aa=kn,F.j.info("SVER="+F.Aa));const tl=Dt[5];tl!=null&&typeof tl=="number"&&0<tl&&(W=1.5*tl,F.L=W,F.j.info("backChannelRequestTimeoutMs_="+W)),W=F;const Hn=g.g;if(Hn){const od=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var pe=W.h;pe.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(on(pe,pe.h),pe.h=null))}if(W.D){const la=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;la&&(W.ya=la,gt(W.I,W.D,la))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-g.F,F.j.info("Handshake RTT: "+F.R+"ms")),W=F;var Le=g;if(W.qa=ad(W,W.J?W.ia:null,W.W),Le.K){Sc(W.h,Le);var Kt=Le,tr=W.L;tr&&(Kt.I=tr),Kt.B&&(yf(Kt),Ku(Kt)),W.g=Le}else ki(W);0<F.i.length&&el(F)}else Dt[0]!="stop"&&Dt[0]!="close"||ro(F,7);else F.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?ro(F,7):ed(F):Dt[0]!="noop"&&F.l&&F.l.ta(Dt),F.v=0)}}yc(4)}catch{}}var Nc=class{constructor(g,P){this.g=g,this.map=P}};function xf(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wf(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Zo(g){return g.h?1:g.g?g.g.size:0}function It(g,P){return g.h?g.h==P:g.g?g.g.has(P):!1}function on(g,P){g.g?g.g.add(P):g.h=P}function Sc(g,P){g.h&&g.h==P?g.h=null:g.g&&g.g.has(P)&&g.g.delete(P)}xf.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Xa(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let P=g.i;for(const F of g.g.values())P=P.concat(F.D);return P}return b(g.i)}function Qo(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var P=[],F=g.length,W=0;W<F;W++)P.push(g[W]);return P}P=[],F=0;for(W in g)P[F++]=g[W];return P}function bf(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var P=[];g=g.length;for(var F=0;F<g;F++)P.push(F);return P}P=[],F=0;for(const W in g)P[F++]=W;return P}}}function St(g,P){if(g.forEach&&typeof g.forEach=="function")g.forEach(P,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,P,void 0);else for(var F=bf(g),W=Qo(g),le=W.length,pe=0;pe<le;pe++)P.call(void 0,W[pe],F&&F[pe],g)}var _n=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _f(g,P){if(g){g=g.split("&");for(var F=0;F<g.length;F++){var W=g[F].indexOf("="),le=null;if(0<=W){var pe=g[F].substring(0,W);le=g[F].substring(W+1)}else pe=g[F];P(pe,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function si(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof si){this.h=g.h,Zu(this,g.j),this.o=g.o,this.g=g.g,eo(this,g.s),this.l=g.l;var P=g.i,F=new to;F.i=P.i,P.g&&(F.g=new Map(P.g),F.h=P.h),aa(this,F),this.m=g.m}else g&&(P=String(g).match(_n))?(this.h=!1,Zu(this,P[1]||"",!0),this.o=Ti(P[2]||""),this.g=Ti(P[3]||"",!0),eo(this,P[4]),this.l=Ti(P[5]||"",!0),aa(this,P[6]||"",!0),this.m=Ti(P[7]||"")):(this.h=!1,this.i=new to(null,this.h))}si.prototype.toString=function(){var g=[],P=this.j;P&&g.push(Ri(P,Yo,!0),":");var F=this.g;return(F||P=="file")&&(g.push("//"),(P=this.o)&&g.push(Ri(P,Yo,!0),"@"),g.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&g.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&g.push("/"),g.push(Ri(F,F.charAt(0)=="/"?Sf:Nf,!0))),(F=this.i.toString())&&g.push("?",F),(F=this.m)&&g.push("#",Ri(F,Ef)),g.join("")};function Fn(g){return new si(g)}function Zu(g,P,F){g.j=F?Ti(P,!0):P,g.j&&(g.j=g.j.replace(/:$/,""))}function eo(g,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);g.s=P}else g.s=null}function aa(g,P,F){P instanceof to?(g.i=P,ai(g.i,g.h)):(F||(P=Ri(P,Qu)),g.i=new to(P,g.h))}function gt(g,P,F){g.i.set(P,F)}function ii(g){return gt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ti(g,P){return g?P?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ri(g,P,F){return typeof g=="string"?(g=encodeURI(g).replace(P,jf),F&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function jf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Yo=/[#\/\?@]/g,Nf=/[#\?:]/g,Sf=/[#\?]/g,Qu=/[#\?@]/g,Ef=/#/g;function to(g,P){this.h=this.g=null,this.i=g||null,this.j=!!P}function Ds(g){g.g||(g.g=new Map,g.h=0,g.i&&_f(g.i,function(P,F){g.add(decodeURIComponent(P.replace(/\+/g," ")),F)}))}t=to.prototype,t.add=function(g,P){Ds(this),this.i=null,g=ht(this,g);var F=this.g.get(g);return F||this.g.set(g,F=[]),F.push(P),this.h+=1,this};function Pf(g,P){Ds(g),P=ht(g,P),g.g.has(P)&&(g.i=null,g.h-=g.g.get(P).length,g.g.delete(P))}function Yu(g,P){return Ds(g),P=ht(g,P),g.g.has(P)}t.forEach=function(g,P){Ds(this),this.g.forEach(function(F,W){F.forEach(function(le){g.call(P,le,W,this)},this)},this)},t.na=function(){Ds(this);const g=Array.from(this.g.values()),P=Array.from(this.g.keys()),F=[];for(let W=0;W<P.length;W++){const le=g[W];for(let pe=0;pe<le.length;pe++)F.push(P[W])}return F},t.V=function(g){Ds(this);let P=[];if(typeof g=="string")Yu(this,g)&&(P=P.concat(this.g.get(ht(this,g))));else{g=Array.from(this.g.values());for(let F=0;F<g.length;F++)P=P.concat(g[F])}return P},t.set=function(g,P){return Ds(this),this.i=null,g=ht(this,g),Yu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[P]),this.h+=1,this},t.get=function(g,P){return g?(g=this.V(g),0<g.length?String(g[0]):P):P};function fv(g,P,F){Pf(g,P),0<F.length&&(g.i=null,g.g.set(ht(g,P),b(F)),g.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],P=Array.from(this.g.keys());for(var F=0;F<P.length;F++){var W=P[F];const pe=encodeURIComponent(String(W)),Le=this.V(W);for(W=0;W<Le.length;W++){var le=pe;Le[W]!==""&&(le+="="+encodeURIComponent(String(Le[W]))),g.push(le)}}return this.i=g.join("&")};function ht(g,P){return P=String(P),g.j&&(P=P.toLowerCase()),P}function ai(g,P){P&&!g.j&&(Ds(g),g.i=null,g.g.forEach(function(F,W){var le=W.toLowerCase();W!=le&&(Pf(this,W),fv(this,le,F))},g)),g.j=P}function en(g,P){const F=new wc;if(l.Image){const W=new Image;W.onload=v(oi,F,"TestLoadImage: loaded",!0,P,W),W.onerror=v(oi,F,"TestLoadImage: error",!1,P,W),W.onabort=v(oi,F,"TestLoadImage: abort",!1,P,W),W.ontimeout=v(oi,F,"TestLoadImage: timeout",!1,P,W),l.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=g}else P(!1)}function mv(g,P){const F=new wc,W=new AbortController,le=setTimeout(()=>{W.abort(),oi(F,"TestPingServer: timeout",!1,P)},1e4);fetch(g,{signal:W.signal}).then(pe=>{clearTimeout(le),pe.ok?oi(F,"TestPingServer: ok",!0,P):oi(F,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(le),oi(F,"TestPingServer: error",!1,P)})}function oi(g,P,F,W,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),W(F)}catch{}}function Cf(){this.g=new Za}function Tf(g,P,F){const W=F||"";try{St(g,function(le,pe){let Le=le;d(le)&&(Le=ia(le)),P.push(W+pe+"="+encodeURIComponent(Le))})}catch(le){throw P.push(W+"type="+encodeURIComponent("_badmap")),le}}function li(g){this.l=g.Ub||null,this.j=g.eb||!1}N(li,Go),li.prototype.g=function(){return new Jo(this.l,this.j)},li.prototype.i=function(g){return function(){return g}}({});function Jo(g,P){De.call(this),this.D=g,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Jo,De),t=Jo.prototype,t.open=function(g,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=P,this.readyState=1,Ls(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(P.body=g),(this.D||l).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var P=g.value?g.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!g.done}))&&(this.response=this.responseText+=P)}g.done?Rn(this):Ls(this),this.readyState==3&&Xo(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Rn(this))},t.Qa=function(g){this.g&&(this.response=g,Rn(this))},t.ga=function(){this.g&&Rn(this)};function Rn(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ls(g)}t.setRequestHeader=function(g,P){this.u.append(g,P)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],P=this.h.entries();for(var F=P.next();!F.done;)F=F.value,g.push(F[0]+": "+F[1]),F=P.next();return g.join(`\r
`)};function Ls(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Rf(g){let P="";return V(g,function(F,W){P+=W,P+=":",P+=F,P+=`\r
`}),P}function Ju(g,P,F){e:{for(W in F){var W=!1;break e}W=!0}W||(F=Rf(F),typeof g=="string"?F!=null&&encodeURIComponent(String(F)):gt(g,P,F))}function jn(g){De.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(jn,De);var pv=/^https?$/i,kf=["POST","PUT"];t=jn.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,P,F,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);P=P?P.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qu.g(),this.v=this.o?rv(this.o):rv(qu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(P,String(g),!0),this.B=!1}catch(pe){gv(this,pe);return}if(g=F||"",F=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var le in W)F.set(le,W[le]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const pe of W.keys())F.set(pe,W.get(pe));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(F.keys()).find(pe=>pe.toLowerCase()=="content-type"),le=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(kf,P,void 0))||W||le||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Le]of F)this.g.setRequestHeader(pe,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xs(this),this.u=!0,this.g.send(g),this.u=!1}catch(pe){gv(this,pe)}};function gv(g,P){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=P,g.m=5,If(g),Xu(g)}function If(g){g.A||(g.A=!0,We(g,"complete"),We(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,We(this,"complete"),We(this,"abort"),Xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xu(this,!0)),jn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tt(this):this.bb())},t.bb=function(){Tt(this)};function Tt(g){if(g.h&&typeof o<"u"&&(!g.v[1]||rs(g)!=4||g.Z()!=2)){if(g.u&&rs(g)==4)Ht(g.Ea,0,g);else if(We(g,"readystatechange"),rs(g)==4){g.h=!1;try{const Le=g.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var F;if(!(F=P)){var W;if(W=Le===0){var le=String(g.D).match(_n)[1]||null;!le&&l.self&&l.self.location&&(le=l.self.location.protocol.slice(0,-1)),W=!pv.test(le?le.toLowerCase():"")}F=W}if(F)We(g,"complete"),We(g,"success");else{g.m=6;try{var pe=2<rs(g)?g.g.statusText:""}catch{pe=""}g.l=pe+" ["+g.Z()+"]",If(g)}}finally{Xu(g)}}}}function Xu(g,P){if(g.g){xs(g);const F=g.g,W=g.v[0]?()=>{}:null;g.g=null,g.v=null,P||We(g,"ready");try{F.onreadystatechange=W}catch{}}}function xs(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function rs(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var P=this.g.responseText;return g&&P.indexOf(g)==0&&(P=P.substring(g.length)),zu(P)}};function Af(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ab(g){const P={};g=(g.g&&2<=rs(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<g.length;W++){if(x(g[W]))continue;var F=M(g[W]);const le=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const pe=P[le]||[];P[le]=pe,pe.push(F)}k(P,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(g,P,F){return F&&F.internalChannelParams&&F.internalChannelParams[g]||P}function vv(g){this.Aa=0,this.i=[],this.j=new wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,g),this.cb=no("retryDelaySeedMs",1e4,g),this.Wa=no("forwardChannelMaxRetries",2,g),this.wa=no("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new xf(g&&g.concurrentRequestLimit),this.Da=new Cf,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vv.prototype,t.la=8,t.G=1,t.connect=function(g,P,F,W){Cr(0),this.W=g,this.H=P||{},F&&W!==void 0&&(this.H.OSID=F,this.H.OAID=W),this.F=this.X,this.I=ad(this,null,this.W),el(this)};function ed(g){if(yv(g),g.G==3){var P=g.U++,F=Fn(g.I);if(gt(F,"SID",g.K),gt(F,"RID",P),gt(F,"TYPE","terminate"),Ec(g,F),P=new Ci(g,g.j,P),P.L=2,P.v=ii(Fn(F)),F=!1,l.navigator&&l.navigator.sendBeacon)try{F=l.navigator.sendBeacon(P.v.toString(),"")}catch{}!F&&l.Image&&(new Image().src=P.v,F=!0),F||(P.g=wv(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Ku(P)}xv(g)}function td(g){g.g&&(rd(g),g.g.cancel(),g.g=null)}function yv(g){td(g),g.u&&(l.clearTimeout(g.u),g.u=null),id(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function el(g){if(!wf(g.h)&&!g.s){g.s=!0;var P=g.Ga;Z||q(),z||(Z(),z=!0),H.add(P,g),g.B=0}}function ob(g,P){return Zo(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=P.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=xc(p(g.Ga,g,P),Df(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const le=new Ci(this,this.j,g);let pe=this.o;if(this.S&&(pe?(pe=I(pe),T(pe,this.S)):pe=this.S),this.m!==null||this.O||(le.H=pe,pe=null),this.P)e:{for(var P=0,F=0;F<this.i.length;F++){t:{var W=this.i[F];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(P+=W,4096<P){P=F;break e}if(P===4096||F===this.i.length-1){P=F+1;break e}}P=1e3}else P=1e3;P=Of(this,le,P),F=Fn(this.I),gt(F,"RID",g),gt(F,"CVER",22),this.D&&gt(F,"X-HTTP-Session-Id",this.D),Ec(this,F),pe&&(this.O?P="headers="+encodeURIComponent(String(Rf(pe)))+"&"+P:this.m&&Ju(F,this.m,pe)),on(this.h,le),this.Ua&&gt(F,"TYPE","init"),this.P?(gt(F,"$req",P),gt(F,"SID","null"),le.T=!0,gf(le,F,null)):gf(le,F,P),this.G=2}}else this.G==3&&(g?Fs(this,g):this.i.length==0||wf(this.h)||Fs(this))};function Fs(g,P){var F;P?F=P.l:F=g.U++;const W=Fn(g.I);gt(W,"SID",g.K),gt(W,"RID",F),gt(W,"AID",g.T),Ec(g,W),g.m&&g.o&&Ju(W,g.m,g.o),F=new Ci(g,g.j,F,g.B+1),g.m===null&&(F.H=g.o),P&&(g.i=P.D.concat(g.i)),P=Of(g,F,1e3),F.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),on(g.h,F),gf(F,W,P)}function Ec(g,P){g.H&&V(g.H,function(F,W){gt(P,W,F)}),g.l&&St({},function(F,W){gt(P,W,F)})}function Of(g,P,F){F=Math.min(g.i.length,F);var W=g.l?p(g.l.Na,g.l,g):null;e:{var le=g.i;let pe=-1;for(;;){const Le=["count="+F];pe==-1?0<F?(pe=le[0].g,Le.push("ofs="+pe)):pe=0:Le.push("ofs="+pe);let Kt=!0;for(let tr=0;tr<F;tr++){let Dt=le[tr].g;const tn=le[tr].map;if(Dt-=pe,0>Dt)pe=Math.max(0,le[tr].g-100),Kt=!1;else try{Tf(tn,Le,"req"+Dt+"_")}catch{W&&W(tn)}}if(Kt){W=Le.join("&");break e}}}return g=g.i.splice(0,F),P.D=g,W}function ki(g){if(!g.g&&!g.u){g.Y=1;var P=g.Fa;Z||q(),z||(Z(),z=!0),H.add(P,g),g.v=0}}function nd(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=xc(p(g.Fa,g),Df(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,sd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=xc(p(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cr(10),td(this),sd(this))};function rd(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function sd(g){g.g=new Ci(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var P=Fn(g.qa);gt(P,"RID","rpc"),gt(P,"SID",g.K),gt(P,"AID",g.T),gt(P,"CI",g.F?"0":"1"),!g.F&&g.ja&&gt(P,"TO",g.ja),gt(P,"TYPE","xmlhttp"),Ec(g,P),g.m&&g.o&&Ju(P,g.m,g.o),g.L&&(g.g.I=g.L);var F=g.g;g=g.ia,F.L=1,F.v=ii(Fn(P)),F.m=null,F.P=!0,vf(F,g)}t.Za=function(){this.C!=null&&(this.C=null,td(this),nd(this),Cr(19))};function id(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Mf(g,P){var F=null;if(g.g==P){id(g),rd(g),g.g=null;var W=2}else if(It(g.h,P))F=P.D,Sc(g.h,P),W=1;else return;if(g.G!=0){if(P.o)if(W==1){F=P.m?P.m.length:0,P=Date.now()-P.F;var le=g.B;W=Bu(),We(W,new av(W,F)),el(g)}else ki(g);else if(le=P.s,le==3||le==0&&0<P.X||!(W==1&&ob(g,P)||W==2&&nd(g)))switch(F&&0<F.length&&(P=g.h,P.i=P.i.concat(F)),le){case 1:ro(g,5);break;case 4:ro(g,10);break;case 3:ro(g,6);break;default:ro(g,2)}}}function Df(g,P){let F=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(F*=2),F*P}function ro(g,P){if(g.j.info("Error code "+P),P==2){var F=p(g.fb,g),W=g.Xa;const le=!W;W=new si(W||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zu(W,"https"),ii(W),le?en(W.toString(),F):mv(W.toString(),F)}else Cr(2);g.G=0,g.l&&g.l.sa(P),xv(g),yv(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Cr(2)):(this.j.info("Failed to ping google.com"),Cr(1))};function xv(g){if(g.G=0,g.ka=[],g.l){const P=Xa(g.h);(P.length!=0||g.i.length!=0)&&(j(g.ka,P),j(g.ka,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.ra()}}function ad(g,P,F){var W=F instanceof si?Fn(F):new si(F);if(W.g!="")P&&(W.g=P+"."+W.g),eo(W,W.s);else{var le=l.location;W=le.protocol,P=P?P+"."+le.hostname:le.hostname,le=+le.port;var pe=new si(null);W&&Zu(pe,W),P&&(pe.g=P),le&&eo(pe,le),F&&(pe.l=F),W=pe}return F=g.D,P=g.ya,F&&P&&gt(W,F,P),gt(W,"VER",g.la),Ec(g,W),W}function wv(g,P,F){if(P&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=g.Ca&&!g.pa?new jn(new li({eb:F})):new jn(g.pa),P.Ha(g.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lf(){}t=Lf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pc(){}Pc.prototype.g=function(g,P){return new br(g,P)};function br(g,P){De.call(this),this.g=new vv(P),this.l=g,this.h=P&&P.messageUrlParams||null,g=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(g?g["X-WebChannel-Content-Type"]=P.messageContentType:g={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(g?g["X-WebChannel-Client-Profile"]=P.va:g={"X-WebChannel-Client-Profile":P.va}),this.g.S=g,(g=P&&P.Sb)&&!x(g)&&(this.g.m=g),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!x(P)&&(this.g.D=P,g=this.h,g!==null&&P in g&&(g=this.h,P in g&&delete g[P])),this.j=new ci(this)}N(br,De),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){ed(this.g)},br.prototype.o=function(g){var P=this.g;if(typeof g=="string"){var F={};F.__data__=g,g=F}else this.u&&(F={},F.__data__=ia(g),g=F);P.i.push(new Nc(P.Ya++,g)),P.G==3&&el(P)},br.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,br.aa.N.call(this)};function oa(g){Uu.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var P=g.__sm__;if(P){e:{for(const F in P){g=F;break e}g=void 0}(this.i=g)&&(g=this.i,P=P!==null&&g in P?P[g]:void 0),this.data=P}else this.data=g}N(oa,Uu);function bv(){mf.call(this),this.status=1}N(bv,mf);function ci(g){this.g=g}N(ci,Lf),ci.prototype.ua=function(){We(this.g,"a")},ci.prototype.ta=function(g){We(this.g,new oa(g))},ci.prototype.sa=function(g){We(this.g,new bv)},ci.prototype.ra=function(){We(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,AD=function(){return new Pc},ID=function(){return Bu()},kD=Qa,Y1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bc.NO_ERROR=0,bc.TIMEOUT=8,bc.HTTP_ERROR=6,$y=bc,Hu.COMPLETE="complete",RD=Hu,ff.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",De.prototype.listen=De.prototype.K,gm=ff,jn.prototype.listenOnce=jn.prototype.L,jn.prototype.getLastError=jn.prototype.Ka,jn.prototype.getLastErrorCode=jn.prototype.Ba,jn.prototype.getStatus=jn.prototype.Z,jn.prototype.getResponseJson=jn.prototype.Oa,jn.prototype.getResponseText=jn.prototype.oa,jn.prototype.send=jn.prototype.ea,jn.prototype.setWithCredentials=jn.prototype.Ha,TD=jn}).apply(typeof Jv<"u"?Jv:typeof self<"u"?self:typeof window<"u"?window:{});const GT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new zS("@firebase/firestore");function Qf(){return mu.logLevel}function st(t,...e){if(mu.logLevel<=Mt.DEBUG){const n=e.map(eE);mu.debug(`Firestore (${Kh}): ${t}`,...n)}}function ko(t,...e){if(mu.logLevel<=Mt.ERROR){const n=e.map(eE);mu.error(`Firestore (${Kh}): ${t}`,...n)}}function fh(t,...e){if(mu.logLevel<=Mt.WARN){const n=e.map(eE);mu.warn(`Firestore (${Kh}): ${t}`,...n)}}function eE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${Kh}) INTERNAL ASSERTION FAILED: `+t;throw ko(e),new Error(e)}function Xt(t,e){t||vt()}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Wa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qr.UNAUTHENTICATED))}shutdown(){}}class YK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JK{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xt(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new _o;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _o,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _o)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt(typeof r.accessToken=="string"),new OD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xt(e===null||typeof e=="string"),new qr(e)}}class XK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new XK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xt(this.o===void 0);const r=a=>{a.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,st("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xt(typeof n.token=="string"),this.R=n.token,new tZ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=rZ(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Vt(t,e){return t<e?-1:t>e?1:0}function mh(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new yr(0,0))}static max(){return new wt(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(),r===void 0?r=e.length-n:r>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dn extends gp{construct(e,n,r){return new dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new dn(n)}static emptyPath(){return new dn([])}}const sZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends gp{construct(e,n,r){return new Ar(e,n,r)}static isValidIdentifier(e){return sZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ve(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ve(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new Ve(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(n)}static emptyPath(){return new Ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(dn.fromString(e))}static fromName(e){return new ut(dn.fromString(e).popFirst(5))}static empty(){return new ut(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new dn(e.slice()))}}function iZ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=wt.fromTimestamp(r===1e9?new yr(n+1,0):new yr(n,r));return new Ql(s,ut.empty(),e)}function aZ(t){return new Ql(t.readTime,t.key,-1)}class Ql{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ql(wt.min(),ut.empty(),-1)}static max(){return new Ql(wt.max(),ut.empty(),-1)}}function oZ(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Vt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==lZ)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Te((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Te?n:Te.resolve(n)}catch(n){return Te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.reject(n)}static resolve(e){return new Te((n,r)=>{n(e)})}static reject(e){return new Te((n,r)=>{r(e)})}static waitFor(e){return new Te((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=Te.resolve(!1);for(const r of e)n=n.next(s=>s?Te.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Te((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new Te((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function uZ(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tg(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tE.oe=-1;function Z0(t){return t==null}function Lx(t){return t===0&&1/t==-1/0}function dZ(t){return typeof t=="number"&&Number.isInteger(t)&&!Lx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Iu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.comparator=e,this.root=n||Ir.EMPTY}insert(e,n){return new Dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xv(this.root,e,this.comparator,!0)}}class Xv{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ir{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Ir.RED,this.left=s??Ir.EMPTY,this.right=a??Ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Ir(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ir.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1;Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ZT(this.data.getIterator())}getIteratorFrom(e){return new ZT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dr(this.comparator);return n.data=e,n}}class ZT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new Hs([])}unionWith(e){let n=new Dr(Ar.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new LD("Invalid base64 string: "+a):a}}(e);return new Fr(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const hZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(t){if(Xt(!!t),typeof t=="string"){let e=0;const n=hZ.exec(t);if(Xt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pu(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nE(t){const e=t.mapValue.fields.__previous_value__;return Q0(e)?nE(e):e}function vp(t){const e=Yl(t.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e,n,r,s,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class yp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey={mapValue:{}};function gu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q0(t)?4:pZ(t)?9007199254740991:mZ(t)?10:11:vt()}function $a(t,e){if(t===e)return!0;const n=gu(t);if(n!==gu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vp(t).isEqual(vp(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Yl(s.timestampValue),l=Yl(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return pu(s.bytesValue).isEqual(pu(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return qn(s.geoPointValue.latitude)===qn(a.geoPointValue.latitude)&&qn(s.geoPointValue.longitude)===qn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return qn(s.integerValue)===qn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=qn(s.doubleValue),l=qn(a.doubleValue);return o===l?Lx(o)===Lx(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return mh(t.arrayValue.values||[],e.arrayValue.values||[],$a);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(KT(o)!==KT(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!$a(o[u],l[u])))return!1;return!0}(t,e);default:return vt()}}function xp(t,e){return(t.values||[]).find(n=>$a(n,e))!==void 0}function ph(t,e){if(t===e)return 0;const n=gu(t),r=gu(e);if(n!==r)return Vt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=qn(a.integerValue||a.doubleValue),u=qn(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return QT(t.timestampValue,e.timestampValue);case 4:return QT(vp(t),vp(e));case 5:return Vt(t.stringValue,e.stringValue);case 6:return function(a,o){const l=pu(a),u=pu(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Vt(l[d],u[d]);if(h!==0)return h}return Vt(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Vt(qn(a.latitude),qn(o.latitude));return l!==0?l:Vt(qn(a.longitude),qn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YT(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const m=a.fields||{},p=o.fields||{},v=(l=m.value)===null||l===void 0?void 0:l.arrayValue,N=(u=p.value)===null||u===void 0?void 0:u.arrayValue,b=Vt(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=N==null?void 0:N.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:YT(v,N)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ey.mapValue&&o===ey.mapValue)return 0;if(a===ey.mapValue)return 1;if(o===ey.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Vt(u[m],h[m]);if(p!==0)return p;const v=ph(l[u[m]],d[h[m]]);if(v!==0)return v}return Vt(u.length,h.length)}(t.mapValue,e.mapValue);default:throw vt()}}function QT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Vt(t,e);const n=Yl(t),r=Yl(e),s=Vt(n.seconds,r.seconds);return s!==0?s:Vt(n.nanos,r.nanos)}function YT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=ph(n[s],r[s]);if(a)return a}return Vt(n.length,r.length)}function gh(t){return J1(t)}function J1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=J1(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${J1(n.fields[o])}`;return s+"}"}(t.mapValue):vt()}function Fx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function X1(t){return!!t&&"integerValue"in t}function rE(t){return!!t&&"arrayValue"in t}function JT(t){return!!t&&"nullValue"in t}function XT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vy(t){return!!t&&"mapValue"in t}function mZ(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Fm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Iu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pZ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fm(n)}setAll(e){let n=Ar.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Fm(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Vy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $a(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Iu(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Ss(Fm(this.value))}}function FD(t){const e=[];return Iu(t.fields,(n,r)=>{const s=new Ar([n]);if(Vy(r)){const a=FD(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Hs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Kr(e,0,wt.min(),wt.min(),wt.min(),Ss.empty(),0)}static newFoundDocument(e,n,r,s){return new Kr(e,1,n,wt.min(),r,s,0)}static newNoDocument(e,n){return new Kr(e,2,n,wt.min(),wt.min(),Ss.empty(),0)}static newUnknownDocument(e,n){return new Kr(e,3,n,wt.min(),wt.min(),Ss.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.position=e,this.inclusive=n}}function eR(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=ph(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function tR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$a(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n="asc"){this.field=e,this.dir=n}}function gZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $D=class{};class or extends $D{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yZ(e,n,r):n==="array-contains"?new bZ(e,r):n==="in"?new _Z(e,r):n==="not-in"?new jZ(e,r):n==="array-contains-any"?new NZ(e,r):new or(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xZ(e,r):new wZ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ph(n,this.value)):n!==null&&gu(this.value)===gu(n)&&this.matchesComparison(ph(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qi extends $D{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qi(e,n)}matches(e){return VD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function VD(t){return t.op==="and"}function zD(t){return vZ(t)&&VD(t)}function vZ(t){for(const e of t.filters)if(e instanceof Qi)return!1;return!0}function ej(t){if(t instanceof or)return t.field.canonicalString()+t.op.toString()+gh(t.value);if(zD(t))return t.filters.map(e=>ej(e)).join(",");{const e=t.filters.map(n=>ej(n)).join(",");return`${t.op}(${e})`}}function UD(t,e){return t instanceof or?function(r,s){return s instanceof or&&r.op===s.op&&r.field.isEqual(s.field)&&$a(r.value,s.value)}(t,e):t instanceof Qi?function(r,s){return s instanceof Qi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&UD(o,s.filters[l]),!0):!1}(t,e):void vt()}function BD(t){return t instanceof or?function(n){return`${n.field.canonicalString()} ${n.op} ${gh(n.value)}`}(t):t instanceof Qi?function(n){return n.op.toString()+" {"+n.getFilters().map(BD).join(" ,")+"}"}(t):"Filter"}class yZ extends or{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class xZ extends or{constructor(e,n){super(e,"in",n),this.keys=WD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wZ extends or{constructor(e,n){super(e,"not-in",n),this.keys=WD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class bZ extends or{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rE(n)&&xp(n.arrayValue,this.value)}}class _Z extends or{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xp(this.value.arrayValue,n)}}class jZ extends or{constructor(e,n){super(e,"not-in",n)}matches(e){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xp(this.value.arrayValue,n)}}class NZ extends or{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function nR(t,e=null,n=[],r=[],s=null,a=null,o=null){return new SZ(t,e,n,r,s,a,o)}function sE(t){const e=Nt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ej(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Z0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gh(r)).join(",")),e.ue=n}return e.ue}function iE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tR(t.startAt,e.startAt)&&tR(t.endAt,e.endAt)}function tj(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function EZ(t,e,n,r,s,a,o,l){return new Au(t,e,n,r,s,a,o,l)}function Y0(t){return new Au(t)}function rR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aE(t){return t.collectionGroup!==null}function Xd(t){const e=Nt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Dr(Ar.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new wp(a,r))}),n.has(Ar.keyField().canonicalString())||e.ce.push(new wp(Ar.keyField(),r))}return e.ce}function Aa(t){const e=Nt(t);return e.le||(e.le=PZ(e,Xd(t))),e.le}function PZ(t,e){if(t.limitType==="F")return nR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new wp(s.field,a)});const n=t.endAt?new vh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vh(t.startAt.position,t.startAt.inclusive):null;return nR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nj(t,e){const n=t.filters.concat([e]);return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $x(t,e,n){return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function J0(t,e){return iE(Aa(t),Aa(e))&&t.limitType===e.limitType}function HD(t){return`${sE(Aa(t))}|lt:${t.limitType}`}function Sd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BD(s)).join(", ")}]`),Z0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gh(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gh(s)).join(",")),`Target(${r})`}(Aa(t))}; limitType=${t.limitType})`}function X0(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ut.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Xd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=eR(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Xd(r),s)||r.endAt&&!function(o,l,u){const d=eR(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Xd(r),s))}(t,e)}function CZ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qD(t){return(e,n)=>{let r=!1;for(const s of Xd(t)){const a=TZ(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function TZ(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?ph(u,d):vt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return DD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RZ=new Dn(ut.comparator);function Io(){return RZ}const GD=new Dn(ut.comparator);function vm(...t){let e=GD;for(const n of t)e=e.insert(n.key,n);return e}function KD(t){let e=GD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bc(){return $m()}function ZD(){return $m()}function $m(){return new Zh(t=>t.toString(),(t,e)=>t.isEqual(e))}const kZ=new Dn(ut.comparator),IZ=new Dr(ut.comparator);function Ot(...t){let e=IZ;for(const n of t)e=e.add(n);return e}const AZ=new Dr(Vt);function OZ(){return AZ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lx(e)?"-0":e}}function QD(t){return{integerValue:""+t}}function MZ(t,e){return dZ(e)?QD(e):oE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this._=void 0}}function DZ(t,e,n){return t instanceof bp?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Q0(a)&&(a=nE(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof _p?JD(t,e):t instanceof jp?XD(t,e):function(s,a){const o=YD(s,a),l=sR(o)+sR(s.Pe);return X1(o)&&X1(s.Pe)?QD(l):oE(s.serializer,l)}(t,e)}function LZ(t,e,n){return t instanceof _p?JD(t,e):t instanceof jp?XD(t,e):n}function YD(t,e){return t instanceof Vx?function(r){return X1(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class bp extends ew{}class _p extends ew{constructor(e){super(),this.elements=e}}function JD(t,e){const n=eL(e);for(const r of t.elements)n.some(s=>$a(s,r))||n.push(r);return{arrayValue:{values:n}}}class jp extends ew{constructor(e){super(),this.elements=e}}function XD(t,e){let n=eL(e);for(const r of t.elements)n=n.filter(s=>!$a(s,r));return{arrayValue:{values:n}}}class Vx extends ew{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sR(t){return qn(t.integerValue||t.doubleValue)}function eL(t){return rE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e,n){this.field=e,this.transform=n}}function $Z(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _p&&s instanceof _p||r instanceof jp&&s instanceof jp?mh(r.elements,s.elements,$a):r instanceof Vx&&s instanceof Vx?$a(r.Pe,s.Pe):r instanceof bp&&s instanceof bp}(t.transform,e.transform)}class VZ{constructor(e,n){this.version=e,this.transformResults=n}}class hs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tw{}function tL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nw(t.key,hs.none()):new Rg(t.key,t.data,hs.none());{const n=t.data,r=Ss.empty();let s=new Dr(Ar.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new hc(t.key,r,new Hs(s.toArray()),hs.none())}}function zZ(t,e,n){t instanceof Rg?function(s,a,o){const l=s.value.clone(),u=aR(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hc?function(s,a,o){if(!zy(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=aR(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(nL(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vm(t,e,n,r){return t instanceof Rg?function(a,o,l,u){if(!zy(a.precondition,o))return l;const d=a.value.clone(),h=oR(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof hc?function(a,o,l,u){if(!zy(a.precondition,o))return l;const d=oR(a.fieldTransforms,u,o),h=o.data;return h.setAll(nL(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return zy(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function UZ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=YD(r.transform,s||null);a!=null&&(n===null&&(n=Ss.empty()),n.set(r.field,a))}return n||null}function iR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mh(r,s,(a,o)=>$Z(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rg extends tw{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hc extends tw{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aR(t,e,n){const r=new Map;Xt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,LZ(o,l,n[s]))}return r}function oR(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,DZ(a,o,e))}return r}class nw extends tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BZ extends tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&zZ(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZD();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=tL(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ot())}isEqual(e){return this.batchId===e.batchId&&mh(this.mutations,e.mutations,(n,r)=>iR(n,r))&&mh(this.baseMutations,e.baseMutations,(n,r)=>iR(n,r))}}class lE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xt(e.mutations.length===r.length);let s=function(){return kZ}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new lE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HZ=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr,Lt;function GZ(t){switch(t){default:return vt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function rL(t){if(t===void 0)return ko("GRPC error has no .code"),be.UNKNOWN;switch(t){case rr.OK:return be.OK;case rr.CANCELLED:return be.CANCELLED;case rr.UNKNOWN:return be.UNKNOWN;case rr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case rr.INTERNAL:return be.INTERNAL;case rr.UNAVAILABLE:return be.UNAVAILABLE;case rr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case rr.NOT_FOUND:return be.NOT_FOUND;case rr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case rr.ABORTED:return be.ABORTED;case rr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case rr.DATA_LOSS:return be.DATA_LOSS;default:return vt()}}(Lt=rr||(rr={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KZ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZZ=new Qc([4294967295,4294967295],0);function lR(t){const e=KZ().encode(t),n=new CD;return n.update(e),new Uint8Array(n.digest())}function cR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Qc([n,r],0),new Qc([s,a],0)]}class cE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ym(`Invalid padding: ${n}`);if(r<0)throw new ym(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ym(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ym(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qc.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qc.fromNumber(r)));return s.compare(ZZ)===1&&(s=new Qc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=lR(e),[r,s]=cR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new cE(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=lR(e),[r,s]=cR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,kg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rw(wt.min(),s,new Dn(Vt),Io(),Ot())}}class kg{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kg(r,n,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class sL{constructor(e,n){this.targetId=e,this.me=n}}class iL{constructor(e,n,r=Fr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class uR{constructor(){this.fe=0,this.ge=hR(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ot(),n=Ot(),r=Ot();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:vt()}}),new kg(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=hR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Io(),this.qe=dR(),this.Qe=new Dn(Vt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(tj(a))if(r===0){const o=new ut(a.path);this.Ue(n,o,Kr.newNoDocument(o,wt.min()))}else Xt(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=pu(r).toUint8Array()}catch(u){if(u instanceof LD)return fh("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new cE(o,s,a)}catch(u){return fh(u instanceof ym?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&tj(l.target)){const u=new ut(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Kr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=Ot();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new rw(e,n,this.Qe,this.ke,r);return this.ke=Io(),this.qe=dR(),this.Qe=new Dn(Vt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uR,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dr(Vt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uR),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function dR(){return new Dn(ut.comparator)}function hR(){return new Dn(ut.comparator)}const YZ={asc:"ASCENDING",desc:"DESCENDING"},JZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XZ={and:"AND",or:"OR"};class eQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rj(t,e){return t.useProto3Json||Z0(e)?e:{value:e}}function zx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tQ(t,e){return zx(t,e.toTimestamp())}function Oa(t){return Xt(!!t),wt.fromTimestamp(function(n){const r=Yl(n);return new yr(r.seconds,r.nanos)}(t))}function uE(t,e){return sj(t,e).canonicalString()}function sj(t,e){const n=function(s){return new dn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oL(t){const e=dn.fromString(t);return Xt(hL(e)),e}function ij(t,e){return uE(t.databaseId,e.path)}function Kb(t,e){const n=oL(e);if(n.get(1)!==t.databaseId.projectId)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(cL(n))}function lL(t,e){return uE(t.databaseId,e)}function nQ(t){const e=oL(t);return e.length===4?dn.emptyPath():cL(e)}function aj(t){return new dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cL(t){return Xt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fR(t,e,n){return{name:ij(t,e),fields:n.value.mapValue.fields}}function rQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Xt(h===void 0||typeof h=="string"),Fr.fromBase64String(h||"")):(Xt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Fr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?be.UNKNOWN:rL(d.code);return new Ve(h,d.message||"")}(o);n=new iL(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kb(t,r.document.name),a=Oa(r.document.updateTime),o=r.document.createTime?Oa(r.document.createTime):wt.min(),l=new Ss({mapValue:{fields:r.document.fields}}),u=Kr.newFoundDocument(s,a,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Uy(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kb(t,r.document),a=r.readTime?Oa(r.readTime):wt.min(),o=Kr.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Uy([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kb(t,r.document),a=r.removedTargetIds||[];n=new Uy([],a,s,null)}else{if(!("filter"in e))return vt();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new qZ(s,a),l=r.targetId;n=new sL(l,o)}}return n}function sQ(t,e){let n;if(e instanceof Rg)n={update:fR(t,e.key,e.value)};else if(e instanceof nw)n={delete:ij(t,e.key)};else if(e instanceof hc)n={update:fR(t,e.key,e.data),updateMask:fQ(e.fieldMask)};else{if(!(e instanceof BZ))return vt();n={verify:ij(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof bp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _p)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vx)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw vt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:tQ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:vt()}(t,e.precondition)),n}function iQ(t,e){return t&&t.length>0?(Xt(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?Oa(s.updateTime):Oa(a);return o.isEqual(wt.min())&&(o=Oa(a)),new VZ(o,s.transformResults||[])}(n,e))):[]}function aQ(t,e){return{documents:[lL(t,e.path)]}}function oQ(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lL(t,s);const a=function(d){if(d.length!==0)return dL(Qi.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ed(p.field),direction:uQ(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=rj(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function lQ(t){let e=nQ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xt(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=uL(m);return p instanceof Qi&&zD(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(N){return new wp(Pd(N.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Z0(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new vh(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new vh(v,p)}(n.endAt)),EZ(e,s,o,a,l,"F",u,d)}function cQ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pd(n.unaryFilter.field);return or.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pd(n.unaryFilter.field);return or.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pd(n.unaryFilter.field);return or.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pd(n.unaryFilter.field);return or.create(o,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(n){return or.create(Pd(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qi.create(n.compositeFilter.filters.map(r=>uL(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(t):vt()}function uQ(t){return YZ[t]}function dQ(t){return JZ[t]}function hQ(t){return XZ[t]}function Ed(t){return{fieldPath:t.canonicalString()}}function Pd(t){return Ar.fromServerFormat(t.fieldPath)}function dL(t){return t instanceof or?function(n){if(n.op==="=="){if(XT(n.value))return{unaryFilter:{field:Ed(n.field),op:"IS_NAN"}};if(JT(n.value))return{unaryFilter:{field:Ed(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XT(n.value))return{unaryFilter:{field:Ed(n.field),op:"IS_NOT_NAN"}};if(JT(n.value))return{unaryFilter:{field:Ed(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(n.field),op:dQ(n.op),value:n.value}}}(t):t instanceof Qi?function(n){const r=n.getFilters().map(s=>dL(s));return r.length===1?r[0]:{compositeFilter:{op:hQ(n.op),filters:r}}}(t):vt()}function fQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,s,a=wt.min(),o=wt.min(),l=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e){this.ct=e}}function pQ(t){const e=lQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$x(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(){this.un=new vQ}addToCollectionParentIndex(e,n){return this.un.add(n),Te.resolve()}getCollectionParents(e,n){return Te.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Te.resolve()}deleteFieldIndex(e,n){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,n){return Te.resolve()}getDocumentsMatchingTarget(e,n){return Te.resolve(null)}getIndexType(e,n){return Te.resolve(0)}getFieldIndexes(e,n){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,n){return Te.resolve(Ql.min())}getMinOffsetFromCollectionGroup(e,n){return Te.resolve(Ql.min())}updateCollectionGroup(e,n,r){return Te.resolve()}updateIndexEntries(e,n){return Te.resolve()}}class vQ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Dr(dn.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dr(dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yh(0)}static kn(){return new yh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(){this.changes=new Zh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vm(r.mutation,s,Hs.empty(),yr.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ot()){const s=Bc();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=vm();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ot()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Io();const o=$m(),l=function(){return $m()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof hc)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Vm(h.mutation,d,h.mutation.getFieldMask(),yr.now())):o.set(d.key,Hs.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return l.set(d,new xQ(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=$m();let s=new Dn((o,l)=>o-l),a=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Hs.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(s.get(l.batchId)||Ot()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=ZD();h.forEach(p=>{if(!a.has(p)){const v=tL(n.get(p),r.get(p));v!==null&&m.set(p,v),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Te.resolve(Bc());let l=-1,u=a;return o.next(d=>Te.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?Te.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ot())).next(h=>({batchId:l,changes:KD(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let s=vm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=vm();return this.indexManager.getCollectionParents(e,a).next(l=>Te.forEach(l,u=>{const d=function(m,p){return new Au(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Kr.newInvalidDocument(h)))});let l=vm();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&Vm(h.mutation,d,Hs.empty(),yr.now()),X0(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Te.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Oa(s.createTime)}}(n)),Te.resolve()}getNamedQuery(e,n){return Te.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:pQ(s.bundledQuery),readTime:Oa(s.readTime)}}(n)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(){this.overlays=new Dn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return Te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bc();return Te.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),Te.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),Te.resolve()}getOverlaysForCollection(e,n,r){const s=Bc(),a=n.length+1,o=new ut(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Te.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Dn((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Bc(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Bc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return Te.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HZ(n,r));let a=this.Ir.get(n);a===void 0&&(a=Ot(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.Tr=new Dr(Nr.Er),this.dr=new Dr(Nr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Nr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Nr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new dn([])),r=new Nr(n,e),s=new Nr(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new dn([])),r=new Nr(n,e),s=new Nr(n,e+1);let a=Ot();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Nr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Vt(e.wr,n.wr)}static Ar(e,n){return Vt(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dr(Nr.Er)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WZ(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Nr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,n){return Te.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nr(n,0),s=new Nr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dr(Vt);return n.forEach(s=>{const a=new Nr(s,0),o=new Nr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),Te.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ut.isDocumentKey(a)||(a=a.child(""));const o=new Nr(new ut(a),0);let l=new Dr(Vt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),Te.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Te.forEach(n.mutations,s=>{const a=new Nr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Nr(n,0),s=this.br.firstAfterOrEqual(r);return Te.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e){this.Mr=e,this.docs=function(){return new Dn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Te.resolve(r?r.document.mutableCopy():Kr.newInvalidDocument(n))}getEntries(e,n){let r=Io();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Kr.newInvalidDocument(s))}),Te.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Io();const o=n.path,l=new ut(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||oZ(aZ(h),r)<=0||(s.has(h.key)||X0(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,n,r,s){vt()}Or(e,n){return Te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EQ(this)}getSize(e){return Te.resolve(this.size)}}class EQ extends yQ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Te.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(e){this.persistence=e,this.Nr=new Zh(n=>sE(n),iE),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dE,this.targetCount=0,this.kr=yh.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Te.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yh(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Te.resolve()}updateTargetData(e,n){return this.Kn(n),Te.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Te.waitFor(a).next(()=>s)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Te.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Te.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Te.resolve(r)}containsKey(e,n){return Te.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tE(0),this.Kr=!1,this.Kr=!0,this.$r=new jQ,this.referenceDelegate=e(this),this.Ur=new PQ(this),this.indexManager=new gQ,this.remoteDocumentCache=function(s){return new SQ(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mQ(n),this.Gr=new bQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _Q,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NQ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){st("MemoryPersistence","Starting transaction:",e);const s=new TQ(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return Te.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TQ extends cZ{constructor(e){super(),this.currentSequenceNumber=e}}class hE{constructor(e){this.persistence=e,this.Jr=new dE,this.Yr=null}static Zr(e){return new hE(e)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Te.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Te.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Xr,r=>{const s=ut.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,wt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Te.or([()=>Te.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ot(),s=Ot();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new fE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fH()?8:uZ(es())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new RQ;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Qf()<=Mt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Sd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Te.resolve()):(Qf()<=Mt.DEBUG&&st("QueryEngine","Query:",Sd(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Qf()<=Mt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Sd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(n))):Te.resolve())}Yi(e,n){if(rR(n))return Te.resolve(null);let r=Aa(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$x(n,null,"F"),r=Aa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Ot(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,$x(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return rR(n)||s.isEqual(wt.min())?Te.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?Te.resolve(null):(Qf()<=Mt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sd(n)),this.rs(e,o,n,iZ(s,-1)).next(l=>l))})}ts(e,n){let r=new Dr(qD(e));return n.forEach((s,a)=>{X0(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Qf()<=Mt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Sd(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ql.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Dn(Vt),this._s=new Zh(a=>sE(a),iE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wQ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function AQ(t,e,n,r){return new IQ(t,e,n,r)}async function fL(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=Ot();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function OQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let v=Te.resolve();return p.forEach(N=>{v=v.next(()=>h.getEntry(u,N)).next(b=>{const j=d.docVersions.get(N);Xt(j!==null),b.version.compareTo(j)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ot();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mL(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function MQ(t,e){const n=Nt(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let v=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Fr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(m,v),function(b,j,_){return b.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,v,h)&&l.push(n.Ur.updateTargetData(a,v))});let u=Io(),d=Ot();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(DQ(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(wt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return Te.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function DQ(t,e,n){let r=Ot(),s=Ot();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Io();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(wt.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):st("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function LQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,Te.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Cl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function oj(t,e,n){const r=Nt(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Tg(o))throw o;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function mR(t,e,n){const r=Nt(t);let s=wt.min(),a=Ot();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=Nt(u),p=m._s.get(h);return p!==void 0?Te.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(r,o,Aa(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:wt.min(),n?a:Ot())).next(l=>($Q(r,CZ(e),l),{documents:l,Ts:a})))}function $Q(t,e,n){let r=t.us.get(e)||wt.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class pR{constructor(){this.activeTargetIds=OZ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VQ{constructor(){this.so=new pR,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ty=null;function Zb(){return ty===null?ty=function(){return 268435456+Math.round(2147483648*Math.random())}():ty++,"0x"+ty.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="WebChannelConnection";class WQ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=Zb(),u=this.xo(n,r.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(h=>(st("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw fh("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=UQ[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Zb();return new Promise((o,l)=>{const u=new TD;u.setWithCredentials(!0),u.listenOnce(RD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $y.NO_ERROR:const h=u.getResponseJson();st(Br,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case $y.TIMEOUT:st(Br,`RPC '${e}' ${a} timed out`),l(new Ve(be.DEADLINE_EXCEEDED,"Request time out"));break;case $y.HTTP_ERROR:const m=u.getStatus();if(st(Br,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const N=function(j){const _=j.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(_)>=0?_:be.UNKNOWN}(v.status);l(new Ve(N,v.message))}else l(new Ve(be.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ve(be.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{st(Br,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);st(Br,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Zb(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AD(),l=ID(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");st(Br,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,v=!1;const N=new BQ({Io:j=>{v?st(Br,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(p||(st(Br,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),st(Br,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},To:()=>m.close()}),b=(j,_,x)=>{j.listen(_,S=>{try{x(S)}catch(C){setTimeout(()=>{throw C},0)}})};return b(m,gm.EventType.OPEN,()=>{v||(st(Br,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),b(m,gm.EventType.CLOSE,()=>{v||(v=!0,st(Br,`RPC '${e}' stream ${s} transport closed`),N.So())}),b(m,gm.EventType.ERROR,j=>{v||(v=!0,fh(Br,`RPC '${e}' stream ${s} transport errored:`,j),N.So(new Ve(be.UNAVAILABLE,"The operation could not be completed")))}),b(m,gm.EventType.MESSAGE,j=>{var _;if(!v){const x=j.data[0];Xt(!!x);const S=x,C=S.error||((_=S[0])===null||_===void 0?void 0:_.error);if(C){st(Br,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let V=function($){const T=rr[$];if(T!==void 0)return rL(T)}(R),k=C.message;V===void 0&&(V=be.INTERNAL,k="Unknown error status: "+R+" with message "+C.message),v=!0,N.So(new Ve(V,k)),m.close()}else st(Br,`RPC '${e}' stream ${s} received:`,x),N.bo(x)}}),b(l,kD.STAT_EVENT,j=>{j.stat===Y1.PROXY?st(Br,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Y1.NOPROXY&&st(Br,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Qb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){return new eQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&st("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r,s,a,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pL(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(ko(n.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ve(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HQ extends gL{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rQ(this.serializer,e),r=function(a){if(!("targetChange"in a))return wt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?wt.min():o.readTime?Oa(o.readTime):wt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=aj(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=tj(u)?{documents:aQ(a,u)}:{query:oQ(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=aL(a,o.resumeToken);const d=rj(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(wt.min())>0){l.readTime=zx(a,o.snapshotVersion.toTimestamp());const d=rj(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=cQ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=aj(this.serializer),n.removeTarget=e,this.a_(n)}}class qQ extends gL{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xt(!!e.streamToken),this.lastStreamToken=e.streamToken,Xt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=iQ(e.writeResults,e.commitTime),r=Oa(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=aj(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sQ(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,sj(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(be.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,sj(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(be.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class KQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ko(n),this.D_=!1):st("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ou(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Nt(u);d.L_.add(4),await Ig(d),d.q_.set("Unknown"),d.L_.delete(4),await iw(d)}(this))})}),this.q_=new KQ(r,s)}}async function iw(t){if(Ou(t))for(const e of t.B_)await e(!0)}async function Ig(t){for(const e of t.B_)await e(!1)}function vL(t,e){const n=Nt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vE(n)?gE(n):Qh(n).r_()&&pE(n,e))}function mE(t,e){const n=Nt(t),r=Qh(n);n.N_.delete(e),r.r_()&&yL(n,e),n.N_.size===0&&(r.r_()?r.o_():Ou(n)&&n.q_.set("Unknown"))}function pE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qh(t).A_(e)}function yL(t,e){t.Q_.xe(e),Qh(t).R_(e)}function gE(t){t.Q_=new QZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qh(t).start(),t.q_.v_()}function vE(t){return Ou(t)&&!Qh(t).n_()&&t.N_.size>0}function Ou(t){return Nt(t).L_.size===0}function xL(t){t.Q_=void 0}async function QQ(t){t.q_.set("Online")}async function YQ(t){t.N_.forEach((e,n)=>{pE(t,e)})}async function JQ(t,e){xL(t),vE(t)?(t.q_.M_(e),gE(t)):t.q_.set("Unknown")}async function XQ(t,e,n){if(t.q_.set("Online"),e instanceof iL&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ux(t,r)}else if(e instanceof Uy?t.Q_.Ke(e):e instanceof sL?t.Q_.He(e):t.Q_.We(e),!n.isEqual(wt.min()))try{const r=await mL(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Fr.EMPTY_BYTE_STRING,h.snapshotVersion)),yL(a,u);const m=new Cl(h.target,u,d,h.sequenceNumber);pE(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){st("RemoteStore","Failed to raise snapshot:",r),await Ux(t,r)}}async function Ux(t,e,n){if(!Tg(e))throw e;t.L_.add(1),await Ig(t),t.q_.set("Offline"),n||(n=()=>mL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await iw(t)})}function wL(t,e){return e().catch(n=>Ux(t,n,e))}async function aw(t){const e=Nt(t),n=Jl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eY(e);)try{const s=await LQ(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,tY(e,s)}catch(s){await Ux(e,s)}bL(e)&&_L(e)}function eY(t){return Ou(t)&&t.O_.length<10}function tY(t,e){t.O_.push(e);const n=Jl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bL(t){return Ou(t)&&!Jl(t).n_()&&t.O_.length>0}function _L(t){Jl(t).start()}async function nY(t){Jl(t).p_()}async function rY(t){const e=Jl(t);for(const n of t.O_)e.m_(n.mutations)}async function sY(t,e,n){const r=t.O_.shift(),s=lE.from(r,e,n);await wL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await aw(t)}async function iY(t,e){e&&Jl(t).V_&&await async function(r,s){if(function(o){return GZ(o)&&o!==be.ABORTED}(s.code)){const a=r.O_.shift();Jl(r).s_(),await wL(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await aw(r)}}(t,e),bL(t)&&_L(t)}async function vR(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=Ou(n);n.L_.add(3),await Ig(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await iw(n)}async function aY(t,e){const n=Nt(t);e?(n.L_.delete(2),await iw(n)):e||(n.L_.add(2),await Ig(n),n.q_.set("Unknown"))}function Qh(t){return t.K_||(t.K_=function(n,r,s){const a=Nt(n);return a.w_(),new HQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:QQ.bind(null,t),Ro:YQ.bind(null,t),mo:JQ.bind(null,t),d_:XQ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vE(t)?gE(t):t.q_.set("Unknown")):(await t.K_.stop(),xL(t))})),t.K_}function Jl(t){return t.U_||(t.U_=function(n,r,s){const a=Nt(n);return a.w_(),new qQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nY.bind(null,t),mo:iY.bind(null,t),f_:rY.bind(null,t),g_:sY.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await aw(t)):(await t.U_.stop(),t.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new _o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new yE(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xE(t,e){if(ko("AsyncQueue",`${e}: ${t}`),Tg(t))return new Ve(be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=vm(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new eh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.W_=new Dn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):vt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xh{constructor(e,n,r,s,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xh(e,n,eh.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&J0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lY{constructor(){this.queries=xR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Nt(n),a=s.queries;s.queries=xR(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Ve(be.ABORTED,"Firestore shutting down"))}}function xR(){return new Zh(t=>HD(t),J0)}async function wE(t,e){const n=Nt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new oY,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=xE(o,`Initialization of query '${Sd(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&_E(n)}async function bE(t,e){const n=Nt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cY(t,e){const n=Nt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&_E(n)}function uY(t,e,n){const r=Nt(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function _E(t){t.Y_.forEach(e=>{e.next()})}var lj,wR;(wR=lj||(lj={})).ea="default",wR.Cache="cache";class jE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.key=e}}class NL{constructor(e){this.key=e}}class dY{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=qD(e),this.Ra=new eh(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new yR,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),v=X0(this.query,m)?m:null,N=!!p&&this.mutatedKeys.has(p.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let j=!1;p&&v?p.data.isEqual(v.data)?N!==b&&(r.track({type:3,doc:v}),j=!0):this.ga(p,v)||(r.track({type:2,doc:v}),j=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),j=!0):p&&!v&&(r.track({type:1,doc:p}),j=!0,(u||d)&&(l=!0)),j&&(v?(o=o.add(v),a=b?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(v,N){const b=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return b(v)-b(N)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new xh(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ot(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new NL(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jL(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ot();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fY{constructor(e){this.key=e,this.va=!1}}class mY{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zh(l=>HD(l),J0),this.Ma=new Map,this.xa=new Set,this.Oa=new Dn(ut.comparator),this.Na=new Map,this.La=new dE,this.Ba={},this.ka=new Map,this.qa=yh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pY(t,e,n=!0){const r=RL(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await SL(r,e,n,!0),s}async function gY(t,e){const n=RL(t);await SL(n,e,!0,!1)}async function SL(t,e,n,r){const s=await FQ(t.localStore,Aa(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await vY(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vL(t.remoteStore,s),l}async function vY(t,e,n,r,s){t.Ka=(m,p,v)=>async function(b,j,_,x){let S=j.view.ma(_);S.ns&&(S=await mR(b.localStore,j.query,!1).then(({documents:k})=>j.view.ma(k,S)));const C=x&&x.targetChanges.get(j.targetId),R=x&&x.targetMismatches.get(j.targetId)!=null,V=j.view.applyChanges(S,b.isPrimaryClient,C,R);return _R(b,j.targetId,V.wa),V.snapshot}(t,m,p,v);const a=await mR(t.localStore,e,!0),o=new dY(e,a.Ts),l=o.ma(a.documents),u=kg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);_R(t,n,d.wa);const h=new hY(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function yY(t,e,n){const r=Nt(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!J0(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await oj(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mE(r.remoteStore,s.targetId),cj(r,s.targetId)}).catch(Cg)):(cj(r,s.targetId),await oj(r.localStore,s.targetId,!0))}async function xY(t,e){const n=Nt(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mE(n.remoteStore,r.targetId))}async function wY(t,e,n){const r=PY(t);try{const s=await function(o,l){const u=Nt(o),d=yr.now(),h=l.reduce((v,N)=>v.add(N.key),Ot());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let N=Io(),b=Ot();return u.cs.getEntries(v,h).next(j=>{N=j,N.forEach((_,x)=>{x.isValidDocument()||(b=b.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,N)).next(j=>{m=j;const _=[];for(const x of l){const S=UZ(x,m.get(x.key).overlayedDocument);S!=null&&_.push(new hc(x.key,S,FD(S.value.mapValue),hs.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,_,l)}).next(j=>{p=j;const _=j.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(v,j.batchId,_)})}).then(()=>({batchId:p.batchId,changes:KD(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Dn(Vt)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ag(r,s.changes),await aw(r.remoteStore)}catch(s){const a=xE(s,"Failed to persist write");n.reject(a)}}async function EL(t,e){const n=Nt(t);try{const r=await MQ(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(Xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Xt(o.va):s.removedDocuments.size>0&&(Xt(o.va),o.va=!1))}),await Ag(n,r,e)}catch(r){await Cg(r)}}function bR(t,e,n){const r=Nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Nt(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(l)&&(d=!0)}),d&&_E(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bY(t,e,n){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Dn(ut.comparator);o=o.insert(a,Kr.newNoDocument(a,wt.min()));const l=Ot().add(a),u=new rw(wt.min(),new Map,new Dn(Vt),o,l);await EL(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),NE(r)}else await oj(r.localStore,e,!1).then(()=>cj(r,e,n)).catch(Cg)}async function _Y(t,e){const n=Nt(t),r=e.batch.batchId;try{const s=await OQ(n.localStore,e);CL(n,r,null),PL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ag(n,s)}catch(s){await Cg(s)}}async function jY(t,e,n){const r=Nt(t);try{const s=await function(o,l){const u=Nt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Xt(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);CL(r,e,n),PL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ag(r,s)}catch(s){await Cg(s)}}function PL(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CL(t,e,n){const r=Nt(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function cj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TL(t,r)})}function TL(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mE(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),NE(t))}function _R(t,e,n){for(const r of n)r instanceof jL?(t.La.addReference(r.key,e),NY(t,r)):r instanceof NL?(st("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TL(t,r.key)):vt()}function NY(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(st("SyncEngine","New document in limbo: "+n),t.xa.add(r),NE(t))}function NE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(dn.fromString(e)),r=t.qa.next();t.Na.set(r,new fY(n)),t.Oa=t.Oa.insert(n,r),vL(t.remoteStore,new Cl(Aa(Y0(n.path)),r,"TargetPurposeLimboResolution",tE.oe))}}async function Ag(t,e,n){const r=Nt(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=fE.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=Nt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Te.forEach(d,p=>Te.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>Te.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!Tg(m))throw m;st("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.os.get(p),N=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(N);h.os=h.os.insert(p,b)}}}(r.localStore,a))}async function SY(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=await fL(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new Ve(be.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ag(n,r.hs)}}function EY(t,e){const n=Nt(t),r=n.Na.get(e);if(r&&r.va)return Ot().add(r.key);{let s=Ot();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function RL(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bY.bind(null,e),e.Ca.d_=cY.bind(null,e.eventManager),e.Ca.$a=uY.bind(null,e.eventManager),e}function PY(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_Y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jY.bind(null,e),e}class Bx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AQ(this.persistence,new kQ,e.initialUser,this.serializer)}Ga(e){return new CQ(hE.Zr,this.serializer)}Wa(e){return new VQ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bx.provider={build:()=>new Bx};class uj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SY.bind(null,this.syncEngine),await aY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lY}()}createDatastore(e){const n=sw(e.databaseInfo.databaseId),r=function(a){return new WQ(a)}(e.databaseInfo);return function(a,o,l,u){return new GQ(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new ZQ(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>bR(this.syncEngine,n,0),function(){return gR.D()?new gR:new zQ}())}createSyncEngine(e,n){return function(s,a,o,l,u,d,h){const m=new mY(s,a,o,l,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Nt(s);st("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Ig(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}uj.provider={build:()=>new uj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qr.UNAUTHENTICATED,this.clientId=MD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{st("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(st("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yb(t,e){t.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await fL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TY(t);st("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>vR(e.remoteStore,s)),t._onlineComponents=e}async function TY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===be.FAILED_PRECONDITION||s.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fh("Error using user provided cache. Falling back to memory cache: "+n),await Yb(t,new Bx)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await Yb(t,new Bx);return t._offlineComponents}async function kL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await jR(t,t._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await jR(t,new uj))),t._onlineComponents}function RY(t){return kL(t).then(e=>e.syncEngine)}async function Wx(t){const e=await kL(t),n=e.eventManager;return n.onListen=pY.bind(null,e.syncEngine),n.onUnlisten=yY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xY.bind(null,e.syncEngine),n}function kY(t,e,n={}){const r=new _o;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new SE({next:p=>{h.Za(),o.enqueueAndForget(()=>bE(a,m));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new Ve(be.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new Ve(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new jE(Y0(l.path),h,{includeMetadataChanges:!0,_a:!0});return wE(a,m)}(await Wx(t),t.asyncQueue,e,n,r)),r.promise}function IY(t,e,n={}){const r=new _o;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new SE({next:p=>{h.Za(),o.enqueueAndForget(()=>bE(a,m)),p.fromCache&&u.source==="server"?d.reject(new Ve(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new jE(l,h,{includeMetadataChanges:!0,_a:!0});return wE(a,m)}(await Wx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e,n){if(!n)throw new Ve(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AY(t,e,n,r){if(e===!0&&r===!0)throw new Ve(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SR(t){if(!ut.isDocumentKey(t))throw new Ve(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ER(t){if(ut.isDocumentKey(t))throw new Ve(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ow(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ow(t);throw new Ve(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OY(t,e){if(e<=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ve(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QK;switch(r.type){case"firstParty":return new eZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NR.get(n);r&&(st("ComponentProvider","Removing Datastore"),NR.delete(n),r.terminate())}(this),Promise.resolve()}}function MY(t,e,n,r={}){var s;const a=(t=fs(t,lw))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&fh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=qr.MOCK_USER;else{l=LM(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Ve(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qr(d)}t._authCredentials=new YK(new OD(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ha(this.firestore,e,this._query)}}class Jr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jr(this.firestore,e,this._key)}}class Ul extends Ha{constructor(e,n,r){super(e,n,Y0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jr(this.firestore,null,new ut(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function Ut(t,e,...n){if(t=Wt(t),AL("collection","path",e),t instanceof lw){const r=dn.fromString(e,...n);return ER(r),new Ul(t,null,r)}{if(!(t instanceof Jr||t instanceof Ul))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dn.fromString(e,...n));return ER(r),new Ul(t.firestore,null,r)}}function _t(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=MD.newId()),AL("doc","path",e),t instanceof lw){const r=dn.fromString(e,...n);return SR(r),new Jr(t,null,new ut(r))}{if(!(t instanceof Jr||t instanceof Ul))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dn.fromString(e,...n));return SR(r),new Jr(t.firestore,t instanceof Ul?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pL(this,"async_queue_retry"),this.Vu=()=>{const r=Qb();r&&st("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _o;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Tg(e))throw e;st("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw ko("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=yE.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&vt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function TR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Va extends lw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new CR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CR(e),this._firestoreClient=void 0,await e}}}function OL(t,e){const n=typeof t=="object"?t:BS(),r=typeof t=="string"?t:"(default)",s=H0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=OM("firestore");a&&MY(s,...a)}return s}function Og(t){if(t._terminated)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DY(t),t._firestoreClient}function DY(t){var e,n,r;const s=t._freezeSettings(),a=function(l,u,d,h){return new fZ(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IL(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new CY(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wh(Fr.fromBase64String(e))}catch(n){throw new Ve(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wh(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=/^__.*__$/;class FY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rg(e,this.data,n,this.fieldTransforms)}}class ML{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class CE{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new CE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DL(this.Cu)&&LY.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $Y{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sw(e)}Qu(e,n,r,s=!1){return new CE({Cu:e,methodName:n,qu:r,path:Ar.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(t){const e=t._freezeSettings(),n=sw(t._databaseId);return new $Y(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TE(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);kE("Data must be an object, but it was:",o,r);const l=VL(r,o);let u,d;if(a.merge)u=new Hs(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=dj(e,m,n);if(!o.contains(p))throw new Ve(be.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);UL(h,p)||h.push(p)}u=new Hs(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new FY(new Ss(l),u,d)}class uw extends cw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uw}}class RE extends cw{_toFieldTransform(e){return new FZ(e.path,new bp)}isEqual(e){return e instanceof RE}}function LL(t,e,n,r){const s=t.Qu(1,e,n);kE("Data must be an object, but it was:",s,r);const a=[],o=Ss.empty();Iu(r,(u,d)=>{const h=IE(e,u,n);d=Wt(d);const m=s.Nu(h);if(d instanceof uw)a.push(h);else{const p=Dg(d,m);p!=null&&(a.push(h),o.set(h,p))}});const l=new Hs(a);return new ML(o,l,s.fieldTransforms)}function FL(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[dj(e,r,n)],u=[s];if(a.length%2!=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(dj(e,a[p])),u.push(a[p+1]);const d=[],h=Ss.empty();for(let p=l.length-1;p>=0;--p)if(!UL(d,l[p])){const v=l[p];let N=u[p];N=Wt(N);const b=o.Nu(v);if(N instanceof uw)d.push(v);else{const j=Dg(N,b);j!=null&&(d.push(v),h.set(v,j))}}const m=new Hs(d);return new ML(h,m,o.fieldTransforms)}function $L(t,e,n,r=!1){return Dg(n,t.Qu(r?4:3,e))}function Dg(t,e){if(zL(t=Wt(t)))return kE("Unsupported field value:",e,t),VL(t,e);if(t instanceof cw)return function(r,s){if(!DL(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=Dg(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MZ(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=yr.fromDate(r);return{timestampValue:zx(s.serializer,a)}}if(r instanceof yr){const a=new yr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zx(s.serializer,a)}}if(r instanceof EE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wh)return{bytesValue:aL(s.serializer,r._byteString)};if(r instanceof Jr){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:uE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof PE)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return oE(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ow(r)}`)}(t,e)}function VL(t,e){const n={};return DD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Iu(t,(r,s)=>{const a=Dg(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function zL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yr||t instanceof EE||t instanceof wh||t instanceof Jr||t instanceof cw||t instanceof PE)}function kE(t,e,n){if(!zL(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ow(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function dj(t,e,n){if((e=Wt(e))instanceof Mg)return e._internalPath;if(typeof e=="string")return IE(t,e);throw Hx("Field path arguments must be of type string or ",t,!1,void 0,n)}const VY=new RegExp("[~\\*/\\[\\]]");function IE(t,e,n){if(e.search(VY)>=0)throw Hx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mg(...e.split("."))._internalPath}catch{throw Hx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hx(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Ve(be.INVALID_ARGUMENT,l+t+u)}function UL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zY extends AE{data(){return super.data()}}function dw(t,e){return typeof e=="string"?IE(t,e):e instanceof Mg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OE{}class hw extends OE{}function Pn(t,e,...n){let r=[];e instanceof OE&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof ME).length,l=a.filter(u=>u instanceof fw).length;if(o>1||o>0&&l>0)throw new Ve(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fw extends hw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fw(e,n,r)}_apply(e){const n=this._parse(e);return WL(e._query,n),new Ha(e.firestore,e.converter,nj(e._query,n))}_parse(e){const n=Yh(e.firestore);return function(a,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){IR(m,h);const v=[];for(const N of m)v.push(kR(u,a,N));p={arrayValue:{values:v}}}else p=kR(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||IR(m,h),p=$L(l,o,m,h==="in"||h==="not-in");return or.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lr(t,e,n){const r=e,s=dw("where",t);return fw._create(s,r,n)}class ME extends OE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ME(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)WL(o,u),o=nj(o,u)}(e._query,n),new Ha(e.firestore,e.converter,nj(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DE extends hw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new DE(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wp(a,o)}(e._query,this._field,this._direction);return new Ha(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Au(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function RR(t,e="asc"){const n=e,r=dw("orderBy",t);return DE._create(r,n)}class LE extends hw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new LE(e,n,r)}_apply(e){return new Ha(e.firestore,e.converter,$x(e._query,this._limit,this._limitType))}}function yi(t){return OY("limit",t),LE._create("limit",t,"F")}class FE extends hw{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new FE(e,n,r)}_apply(e){const n=BY(e,this.type,this._docOrFields,this._inclusive);return new Ha(e.firestore,e.converter,function(s,a){return new Au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,n))}}function UY(...t){return FE._create("startAfter",t,!1)}function BY(t,e,n,r){if(n[0]=Wt(n[0]),n[0]instanceof AE)return function(a,o,l,u,d){if(!u)throw new Ve(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of Xd(a))if(m.field.isKeyField())h.push(Fx(o,u.key));else{const p=u.data.field(m.field);if(Q0(p))throw new Ve(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const v=m.field.canonicalString();throw new Ve(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(p)}return new vh(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Yh(t.firestore);return function(o,l,u,d,h,m){const p=o.explicitOrderBy;if(h.length>p.length)throw new Ve(be.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let N=0;N<h.length;N++){const b=h[N];if(p[N].field.isKeyField()){if(typeof b!="string")throw new Ve(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!aE(o)&&b.indexOf("/")!==-1)throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const j=o.path.child(dn.fromString(b));if(!ut.isDocumentKey(j))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const _=new ut(j);v.push(Fx(l,_))}else{const j=$L(u,d,b);v.push(j)}}return new vh(v,m)}(t._query,t.firestore._databaseId,s,e,n,r)}}function kR(t,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new Ve(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(e)&&n.indexOf("/")!==-1)throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dn.fromString(n));if(!ut.isDocumentKey(r))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fx(t,new ut(r))}if(n instanceof Jr)return Fx(t,n._key);throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ow(n)}.`)}function IR(t,e){if(!Array.isArray(t)||t.length===0)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WL(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ve(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WY{convertValue(e,n="none"){switch(gu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Iu(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qn(o.doubleValue));return new PE(a)}convertGeoPoint(e){return new EE(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const n=Yl(e);return new yr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dn.fromString(e);Xt(hL(r));const s=new yp(r.get(1),r.get(3)),a=new ut(r.popFirst(5));return s.isEqual(n)||ko(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HL extends AE{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new By(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class By extends HL{data(e={}){return super.data(e)}}class qL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xm(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new By(this._firestore,this._userDataWriter,r.key,r,new xm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new By(s._firestore,s._userDataWriter,l.doc.key,l.doc,new xm(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new By(s._firestore,s._userDataWriter,l.doc.key,l.doc,new xm(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:HY(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t){t=fs(t,Jr);const e=fs(t.firestore,Va);return kY(Og(e),t._key).then(n=>GL(e,t,n))}class VE extends WY{constructor(e){super(),this.firestore=e}convertBytes(e){return new wh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,n)}}function Zn(t){t=fs(t,Ha);const e=fs(t.firestore,Va),n=Og(e),r=new VE(e);return BL(t._query),IY(n,t._query).then(s=>new qL(e,r,t,s))}function Wc(t,e,n){t=fs(t,Jr);const r=fs(t.firestore,Va),s=$E(t.converter,e,n);return Lg(r,[TE(Yh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hs.none())])}function En(t,e,n,...r){t=fs(t,Jr);const s=fs(t.firestore,Va),a=Yh(s);let o;return o=typeof(e=Wt(e))=="string"||e instanceof Mg?FL(a,"updateDoc",t._key,e,n,r):LL(a,"updateDoc",t._key,e),Lg(s,[o.toMutation(t._key,hs.exists(!0))])}function bh(t){return Lg(fs(t.firestore,Va),[new nw(t._key,hs.none())])}function Xl(t,e){const n=fs(t.firestore,Va),r=_t(t),s=$E(t.converter,e);return Lg(n,[TE(Yh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hs.exists(!1))]).then(()=>r)}function AR(t,...e){var n,r,s;t=Wt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TR(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(TR(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,h;if(t instanceof Jr)d=fs(t.firestore,Va),h=Y0(t._key.path),u={next:m=>{e[o]&&e[o](GL(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=fs(t,Ha);d=fs(m.firestore,Va),h=m._query;const p=new VE(d);u={next:v=>{e[o]&&e[o](new qL(d,p,m,v))},error:e[o+1],complete:e[o+2]},BL(t._query)}return function(p,v,N,b){const j=new SE(b),_=new jE(v,j,N);return p.asyncQueue.enqueueAndForget(async()=>wE(await Wx(p),_)),()=>{j.Za(),p.asyncQueue.enqueueAndForget(async()=>bE(await Wx(p),_))}}(Og(d),h,l,u)}function Lg(t,e){return function(r,s){const a=new _o;return r.asyncQueue.enqueueAndForget(async()=>wY(await RY(r),s,a)),a.promise}(Og(t),e)}function GL(t,e,n){const r=n.docs.get(e._key),s=new VE(t);return new HL(t,s,e._key,r,new xm(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yh(e)}set(e,n,r){this._verifyNotCommitted();const s=Jb(e,this._firestore),a=$E(s.converter,n,r),o=TE(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,hs.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Jb(e,this._firestore);let o;return o=typeof(n=Wt(n))=="string"||n instanceof Mg?FL(this._dataReader,"WriteBatch.update",a._key,n,r,s):LL(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jb(e,this._firestore);return this._mutations=this._mutations.concat(new nw(n._key,hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jb(t,e){if((t=Wt(t)).firestore!==e)throw new Ve(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function mr(){return new RE("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t){return Og(t=fs(t,Va)),new qY(t,e=>Lg(t,e))}(function(e,n=!0){(function(s){Kh=s})(ku),uu(new Kl("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Va(new JK(r.getProvider("auth-internal")),new nZ(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yp(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Ra(GT,"4.7.3",e),Ra(GT,"4.7.3","esm2017")})();var GY="firebase",KY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra(GY,KY,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="firebasestorage.googleapis.com",QL="storageBucket",ZY=2*60*1e3,QY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Wa{constructor(e,n,r=0){super(Xb(e),`Firebase Storage: ${n} (${Xb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bn||(Bn={}));function Xb(t){return"storage/"+t}function zE(){const t="An unknown error occurred, please check the error payload for server response.";return new Wn(Bn.UNKNOWN,t)}function YY(t){return new Wn(Bn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JY(t){return new Wn(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wn(Bn.UNAUTHENTICATED,t)}function eJ(){return new Wn(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tJ(t){return new Wn(Bn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nJ(){return new Wn(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rJ(){return new Wn(Bn.CANCELED,"User canceled the upload/download.")}function sJ(t){return new Wn(Bn.INVALID_URL,"Invalid URL '"+t+"'.")}function iJ(t){return new Wn(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aJ(){return new Wn(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+QL+"' property when initializing the app?")}function oJ(){return new Wn(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lJ(){return new Wn(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cJ(t){return new Wn(Bn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hj(t){return new Wn(Bn.INVALID_ARGUMENT,t)}function YL(){return new Wn(Bn.APP_DELETED,"The Firebase app was deleted.")}function uJ(t){return new Wn(Bn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zm(t,e){return new Wn(Bn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yf(t){throw new Wn(Bn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qs.makeFromUrl(e,n)}catch{return new qs(e,"")}if(r.path==="")return r;throw iJ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),N={bucket:1,path:3},b=n===ZL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",_=new RegExp(`^https?://${b}/${s}/${j}`,"i"),S=[{regex:l,indices:u,postModify:a},{regex:v,indices:N,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<S.length;C++){const R=S[C],V=R.regex.exec(e);if(V){const k=V[R.indices.bucket];let I=V[R.indices.path];I||(I=""),r=new qs(k,I),R.postModify(r);break}}if(r==null)throw sJ(e);return r}}class dJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hJ(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...j){d||(d=!0,e.apply(null,j))}function m(j){s=setTimeout(()=>{s=null,t(v,u())},j)}function p(){a&&clearTimeout(a)}function v(j,..._){if(d){p();return}if(j){p(),h.call(null,j,..._);return}if(u()||o){p(),h.call(null,j,..._);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,m(S)}let N=!1;function b(j){N||(N=!0,p(),!d&&(s!==null?(j||(l=2),clearTimeout(s),m(0)):j||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,b(!0)},n),b}function fJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(t){return t!==void 0}function pJ(t){return typeof t=="object"&&!Array.isArray(t)}function UE(t){return typeof t=="string"||t instanceof String}function OR(t){return BE()&&t instanceof Blob}function BE(){return typeof Blob<"u"}function MR(t,e,n,r){if(r<e)throw hj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hj(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Yc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yc||(Yc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ{constructor(e,n,r,s,a,o,l,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,N)=>{this.resolve_=v,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ny(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Yc.NO_ERROR,u=a.getStatus();if(!l||gJ(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Yc.ABORT;r(!1,new ny(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ny(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());mJ(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=zE();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?YL():rJ();o(u)}else{const u=nJ();o(u)}};this.canceled_?n(!1,new ny(!1,null,!0)):this.backoffId_=hJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ny{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function yJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function xJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _J(t,e,n,r,s,a,o=!0){const l=JL(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return wJ(d,e),yJ(d,n),xJ(d,a),bJ(d,r),new vJ(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NJ(...t){const e=jJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(BE())return new Blob(t);throw new Wn(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){if(typeof atob>"u")throw cJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class e_{constructor(e,n){this.data=e,this.contentType=n||null}}function PJ(t,e){switch(t){case ja.RAW:return new e_(XL(e));case ja.BASE64:case ja.BASE64URL:return new e_(e3(t,e));case ja.DATA_URL:return new e_(TJ(e),RJ(e))}throw zE()}function XL(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CJ(t){let e;try{e=decodeURIComponent(t)}catch{throw zm(ja.DATA_URL,"Malformed data URL.")}return XL(e)}function e3(t,e){switch(t){case ja.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw zm(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ja.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw zm(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EJ(e)}catch(s){throw s.message.includes("polyfill")?s:zm(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class t3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw zm(ja.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=kJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TJ(t){const e=new t3(t);return e.base64?e3(ja.BASE64,e.rest):CJ(e.rest)}function RJ(t){return new t3(t).contentType}function kJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){let r=0,s="";OR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(OR(this.data_)){const r=this.data_,s=SJ(r,e,n);return s===null?null:new _l(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new _l(r,!0)}}static getBlob(...e){if(BE()){const n=e.map(r=>r instanceof _l?r.data_:r);return new _l(NJ.apply(null,n))}else{const n=e.map(o=>UE(o)?PJ(ja.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new _l(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){let e;try{e=JSON.parse(t)}catch{return null}return pJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function AJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function r3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t,e){return e}class is{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||OJ}}let ry=null;function MJ(t){return!UE(t)||t.length<2?t:r3(t)}function s3(){if(ry)return ry;const t=[];t.push(new is("bucket")),t.push(new is("generation")),t.push(new is("metageneration")),t.push(new is("name","fullPath",!0));function e(a,o){return MJ(o)}const n=new is("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new is("size");return s.xform=r,t.push(s),t.push(new is("timeCreated")),t.push(new is("updated")),t.push(new is("md5Hash",null,!0)),t.push(new is("cacheControl",null,!0)),t.push(new is("contentDisposition",null,!0)),t.push(new is("contentEncoding",null,!0)),t.push(new is("contentLanguage",null,!0)),t.push(new is("contentType",null,!0)),t.push(new is("metadata","customMetadata",!0)),ry=t,ry}function DJ(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new qs(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function LJ(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return DJ(r,t),r}function i3(t,e,n){const r=n3(e);return r===null?null:LJ(t,r,n)}function FJ(t,e,n,r){const s=n3(e);if(s===null||!UE(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),v=WE(p,n,r),N=JL({alt:"media",token:d});return v+N})[0]}function $J(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class a3{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){if(!t)throw zE()}function VJ(t,e){function n(r,s){const a=i3(t,s,e);return o3(a!==null),a}return n}function zJ(t,e){function n(r,s){const a=i3(t,s,e);return o3(a!==null),FJ(a,s,t.host,t._protocol)}return n}function l3(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=eJ():s=XY():n.getStatus()===402?s=JY(t.bucket):n.getStatus()===403?s=tJ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function UJ(t){const e=l3(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=YY(t.path)),a.serverResponse=s.serverResponse,a}return n}function BJ(t,e,n){const r=e.fullServerUrl(),s=WE(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new a3(s,a,zJ(t,n),o);return l.errorHandler=UJ(e),l}function WJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function HJ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=WJ(null,e)),r}function qJ(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let C=0;C<2;C++)S=S+Math.random().toString().slice(2);return S}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=HJ(e,r,s),h=$J(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=_l.getBlob(m,r,p);if(v===null)throw oJ();const N={name:d.fullPath},b=WE(a,t.host,t._protocol),j="POST",_=t.maxUploadRetryTime,x=new a3(b,j,VJ(t,n),_);return x.urlParams=N,x.headers=o,x.body=v.uploadData(),x.errorHandler=l3(e),x}class GJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Yf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KJ extends GJ{initXhr(){this.xhr_.responseType="text"}}function c3(){return new KJ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this._service=e,n instanceof qs?this._location=n:this._location=qs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vu(e,n)}get root(){const e=new qs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r3(this._location.path)}get storage(){return this._service}get parent(){const e=IJ(this._location.path);if(e===null)return null;const n=new qs(this._location.bucket,e);return new vu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uJ(e)}}function ZJ(t,e,n){t._throwIfRoot("uploadBytes");const r=qJ(t.storage,t._location,s3(),new _l(e,!0),n);return t.storage.makeRequestWithTokens(r,c3).then(s=>({metadata:s,ref:t}))}function QJ(t){t._throwIfRoot("getDownloadURL");const e=BJ(t.storage,t._location,s3());return t.storage.makeRequestWithTokens(e,c3).then(n=>{if(n===null)throw lJ();return n})}function YJ(t,e){const n=AJ(t._location.path,e),r=new qs(t._location.bucket,n);return new vu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(t){return/^[A-Za-z]+:\/\//.test(t)}function XJ(t,e){return new vu(t,e)}function u3(t,e){if(t instanceof HE){const n=t;if(n._bucket==null)throw aJ();const r=new vu(n,n._bucket);return e!=null?u3(r,e):r}else return e!==void 0?YJ(t,e):t}function eX(t,e){if(e&&JJ(e)){if(t instanceof HE)return XJ(t,e);throw hj("To use ref(service, url), the first argument must be a Storage instance.")}else return u3(t,e)}function DR(t,e){const n=e==null?void 0:e[QL];return n==null?null:qs.makeFromBucketSpec(n,t)}function tX(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:LM(s,t.app.options.projectId))}class HE{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=ZL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZY,this._maxUploadRetryTime=QY,this._requests=new Set,s!=null?this._bucket=qs.makeFromBucketSpec(s,this._host):this._bucket=DR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qs.makeFromBucketSpec(this._url,e):this._bucket=DR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vu(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new dJ(YL());{const o=_J(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const LR="@firebase/storage",FR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="storage";function qE(t,e,n){return t=Wt(t),ZJ(t,e,n)}function GE(t){return t=Wt(t),QJ(t)}function KE(t,e){return t=Wt(t),eX(t,e)}function nX(t=BS(),e){t=Wt(t);const r=H0(t,d3).getImmediate({identifier:e}),s=OM("storage");return s&&rX(r,...s),r}function rX(t,e,n,r={}){tX(t,e,n,r)}function sX(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new HE(n,r,s,e,ku)}function iX(){uu(new Kl(d3,sX,"PUBLIC").setMultipleInstances(!0)),Ra(LR,FR,""),Ra(LR,FR,"esm2017")}iX();const aX={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},ZE=VM(aX),va=KK(ZE),Ue=OL(ZE),QE=nX(ZE),h3=w.createContext(null),t_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},bn=()=>{const t=w.useContext(h3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},oX=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(null),[a,o]=w.useState(!0),l=async b=>{try{const j=localStorage.getItem("pendingUserData");if(j){const _=JSON.parse(j);console.log("🚨 Données récupérées depuis localStorage:",_);const x=_t(Ue,"users",b.uid),S=await Ks(x);if(S.exists()){const C=S.data();console.log("📊 Données actuelles dans Firestore:",C);const R={...C,..._,id:b.uid,email:b.email,createdAt:C.createdAt||new Date,lastSeen:new Date},V=t_(R);return await En(x,V),console.log("✅ Données récupérées et mises à jour !"),s(R),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),je.success("Données de profil récupérées !"),!0}}return!1}catch(j){return console.error("❌ Erreur récupération:",j),!1}},u=async(b,j)=>{const _=_t(Ue,"users",b.uid),x=await Ks(_);if(x.exists()){const S=x.data();if(console.log("📊 Données existantes trouvées:",S),!await l(b)){const R={id:b.uid,email:b.email,lastSeen:new Date};S.displayName||(R.displayName=b.displayName||"Utilisateur"),S.university||(R.university="Université non spécifiée"),S.fieldOfStudy||(R.fieldOfStudy="Non spécifié");const V=t_(R);await En(_,V);const k={...S,...V};s(k),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const S={id:b.uid,email:b.email,displayName:b.displayName||(j==null?void 0:j.displayName)||"Utilisateur",photoURL:b.photoURL||(j==null?void 0:j.photoURL)||void 0,phone:(j==null?void 0:j.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(j==null?void 0:j.university)||"Université non spécifiée",otherUniversity:(j==null?void 0:j.otherUniversity)||void 0,studentId:(j==null?void 0:j.studentId)||void 0,graduationYear:(j==null?void 0:j.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(j==null?void 0:j.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(j==null?void 0:j.otherFieldOfStudy)||void 0,campus:(j==null?void 0:j.campus)||"Campus principal",bio:(j==null?void 0:j.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},C=t_(S);await Wc(_,C),s(S)}},d=async(b,j)=>{try{await TG(va,b,j),je.success("Connexion réussie !")}catch(_){const x=_ instanceof Error?_.message:"Erreur inconnue";throw je.error("Erreur de connexion : "+x),_}},h=async(b,j,_,x)=>{try{const{user:S}=await hD(va,b,j);await pp(S,{displayName:_}),await u(S,x),je.success("Compte créé avec succès !")}catch(S){const C=S instanceof Error?S.message:"Erreur inconnue";throw je.error("Erreur lors de la création du compte : "+C),S}},m=async()=>{try{const b=new po;b.setCustomParameters({prompt:"select_account"}),b.addScope("email"),b.addScope("profile"),await lK(va,b)}catch(b){console.error("Google sign in error:",b);const j=b instanceof Error?b.message:"Erreur inconnue";throw je.error("Erreur de connexion Google : "+j),b}},p=async()=>{try{await DG(va),s(null),je.success("Déconnexion réussie !")}catch(b){throw je.error("Erreur lors de la déconnexion"),b}},v=async b=>{if(!(!e||!r))try{const j=_t(Ue,"users",e.uid),_=Object.fromEntries(Object.entries(b).filter(([,x])=>x!==void 0));if(_.updatedAt=new Date,Object.keys(_).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await En(j,_),s({...r,..._}),console.log("Profil mis à jour avec:",_),je.success("Profil mis à jour !")}catch(j){throw console.error("Erreur mise à jour profil:",j),je.error("Erreur lors de la mise à jour du profil"),j}};w.useEffect(()=>{const b=MG(va,async _=>{n(_),_?await u(_):s(null),o(!1)});return(async()=>{try{const _=await uK(va);_!=null&&_.user&&(await u(_.user),je.success("Connexion Google réussie !"))}catch(_){if(console.error("Redirect result error:",_),_&&typeof _=="object"&&"code"in _&&_.code!=="auth/null-user"){const x=_ instanceof Error?_.message:"Erreur inconnue";je.error("Erreur de connexion Google : "+x)}}})(),b},[]);const N={currentUser:e,userProfile:r,loading:a,signIn:d,signUp:h,signInWithGoogle:m,logout:p,updateUserProfile:v};return i.jsx(h3.Provider,{value:N,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f3=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},u)=>w.createElement("svg",{ref:u,...cX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:f3("lucide",s),...l},[...o.map(([d,h])=>w.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=w.forwardRef(({className:r,...s},a)=>w.createElement(uX,{ref:a,iconNode:e,className:f3(`lucide-${lX(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=Se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Se("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=Se("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Se("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=Se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=Se("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=Se("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=Se("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=Se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=Se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=Se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=Se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=Se("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=Se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=Se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=Se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Se("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=Se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=Se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=Se("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=Se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=Se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Se("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=Se("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=Se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=Se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=Se("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Se("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=Se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=Se("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=Se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=Se("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=Se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=Se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=Se("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=Se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=Se("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=Se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Se("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=Se("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function BR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function yw(...t){return e=>{let n=!1;const r=t.map(s=>{const a=BR(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():BR(t[s],null)}}}}function pt(...t){return w.useCallback(yw(...t),t)}function nc(t){const e=BX(t),n=w.forwardRef((r,s)=>{const{children:a,...o}=r,l=w.Children.toArray(a),u=l.find(HX);if(u){const d=u.props.children,h=l.map(m=>m===u?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:m);return i.jsx(e,{...o,ref:s,children:w.isValidElement(d)?w.cloneElement(d,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var UX=nc("Slot");function BX(t){const e=w.forwardRef((n,r)=>{const{children:s,...a}=n;if(w.isValidElement(s)){const o=GX(s),l=qX(a,s.props);return s.type!==w.Fragment&&(l.ref=r?yw(r,o):o),w.cloneElement(s,l)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var WX=Symbol("radix.slottable");function HX(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===WX}function qX(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const u=a(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function GX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function I3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=I3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function A3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=I3(t))&&(r&&(r+=" "),r+=e);return r}const WR=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,HR=A3,xw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return HR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],m=a==null?void 0:a[d];if(h===null)return null;const p=WR(h)||WR(m);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[m,p]=h;return p===void 0||(d[m]=p),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:m,className:p,...v}=h;return Object.entries(v).every(N=>{let[b,j]=N;return Array.isArray(j)?j.includes({...a,...l}[b]):{...a,...l}[b]===j})?[...d,m,p]:d},[]);return HR(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},XE="-",KX=t=>{const e=QX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(XE);return l[0]===""&&l.length!==1&&l.shift(),O3(l,e)||ZX(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},O3=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?O3(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(XE);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},qR=/^\[(.+)\]$/,ZX=t=>{if(qR.test(t)){const e=qR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},QX=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return JX(Object.entries(t.classGroups),n).forEach(([a,o])=>{gj(o,r,a,e)}),r},gj=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:GR(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(YX(s)){gj(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{gj(o,GR(e,a),n,r)})})},GR=(t,e)=>{let n=t;return e.split(XE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},YX=t=>t.isThemeGetter,JX=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,XX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},M3="!",eee=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const u=[];let d=0,h=0,m;for(let j=0;j<l.length;j++){let _=l[j];if(d===0){if(_===s&&(r||l.slice(j,j+a)===e)){u.push(l.slice(h,j)),h=j+a;continue}if(_==="/"){m=j;continue}}_==="["?d++:_==="]"&&d--}const p=u.length===0?l:l.substring(h),v=p.startsWith(M3),N=v?p.substring(1):p,b=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:N,maybePostfixModifierPosition:b}};return n?l=>n({className:l,parseClassName:o}):o},tee=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},nee=t=>({cache:XX(t.cacheSize),parseClassName:eee(t),...KX(t)}),ree=/\s+/,see=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(ree);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:v}=n(d);let N=!!v,b=r(N?p.substring(0,v):p);if(!b){if(!N){l=d+(l.length>0?" "+l:l);continue}if(b=r(p),!b){l=d+(l.length>0?" "+l:l);continue}N=!1}const j=tee(h).join(":"),_=m?j+M3:j,x=_+b;if(a.includes(x))continue;a.push(x);const S=s(b,N);for(let C=0;C<S.length;++C){const R=S[C];a.push(_+R)}l=d+(l.length>0?" "+l:l)}return l};function iee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=D3(e))&&(r&&(r+=" "),r+=n);return r}const D3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=D3(t[r]))&&(n&&(n+=" "),n+=e);return n};function aee(t,...e){let n,r,s,a=o;function o(u){const d=e.reduce((h,m)=>m(h),t());return n=nee(d),r=n.cache.get,s=n.cache.set,a=l,l(u)}function l(u){const d=r(u);if(d)return d;const h=see(u,n);return s(u,h),h}return function(){return a(iee.apply(null,arguments))}}const gn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},L3=/^\[(?:([a-z-]+):)?(.+)\]$/i,oee=/^\d+\/\d+$/,lee=new Set(["px","full","screen"]),cee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lo=t=>th(t)||lee.has(t)||oee.test(t),il=t=>tf(t,"length",bee),th=t=>!!t&&!Number.isNaN(Number(t)),i_=t=>tf(t,"number",th),Jf=t=>!!t&&Number.isInteger(Number(t)),mee=t=>t.endsWith("%")&&th(t.slice(0,-1)),Et=t=>L3.test(t),al=t=>cee.test(t),pee=new Set(["length","size","percentage"]),gee=t=>tf(t,pee,F3),vee=t=>tf(t,"position",F3),yee=new Set(["image","url"]),xee=t=>tf(t,yee,jee),wee=t=>tf(t,"",_ee),Xf=()=>!0,tf=(t,e,n)=>{const r=L3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},bee=t=>uee.test(t)&&!dee.test(t),F3=()=>!1,_ee=t=>hee.test(t),jee=t=>fee.test(t),Nee=()=>{const t=gn("colors"),e=gn("spacing"),n=gn("blur"),r=gn("brightness"),s=gn("borderColor"),a=gn("borderRadius"),o=gn("borderSpacing"),l=gn("borderWidth"),u=gn("contrast"),d=gn("grayscale"),h=gn("hueRotate"),m=gn("invert"),p=gn("gap"),v=gn("gradientColorStops"),N=gn("gradientColorStopPositions"),b=gn("inset"),j=gn("margin"),_=gn("opacity"),x=gn("padding"),S=gn("saturate"),C=gn("scale"),R=gn("sepia"),V=gn("skew"),k=gn("space"),I=gn("translate"),$=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Et,e],D=()=>[Et,e],O=()=>["",lo,il],B=()=>["auto",th,Et],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Et],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[th,Et];return{cacheSize:500,separator:":",theme:{colors:[Xf],spacing:[lo,il],blur:["none","",al,Et],brightness:X(),borderColor:[t],borderRadius:["none","","full",al,Et],borderSpacing:D(),borderWidth:O(),contrast:X(),grayscale:H(),hueRotate:X(),invert:H(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[mee,il],inset:M(),margin:M(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:H(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Et]}],container:["container"],columns:[{columns:[al]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Et]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jf,Et]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Et]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Jf,Et]}],"grid-cols":[{"grid-cols":[Xf]}],"col-start-end":[{col:["auto",{span:["full",Jf,Et]},Et]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Xf]}],"row-start-end":[{row:["auto",{span:[Jf,Et]},Et]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Et]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Et,e]}],"min-w":[{"min-w":[Et,e,"min","max","fit"]}],"max-w":[{"max-w":[Et,e,"none","full","min","max","fit","prose",{screen:[al]},al]}],h:[{h:[Et,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Et,e,"auto","min","max","fit"]}],"font-size":[{text:["base",al,il]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",i_]}],"font-family":[{font:[Xf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Et]}],"line-clamp":[{"line-clamp":["none",th,i_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",lo,Et]}],"list-image":[{"list-image":["none",Et]}],"list-style-type":[{list:["none","disc","decimal",Et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",lo,il]}],"underline-offset":[{"underline-offset":["auto",lo,Et]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),vee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[lo,Et]}],"outline-w":[{outline:[lo,il]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[lo,il]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",al,wee]}],"shadow-color":[{shadow:[Xf]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",al,Et]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Et]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Et]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Jf,Et]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[lo,il,i_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},See=aee(Nee);function ot(...t){return See(A3(t))}const vj=xw("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?UX:"button";return i.jsx(o,{className:ot(vj({variant:e,size:n,className:t})),ref:a,...s})});re.displayName="Button";const Ke=w.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:ot("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ke.displayName="Input";function $e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Eee(t,e){const n=w.createContext(e),r=a=>{const{children:o,...l}=a,u=w.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(a){const o=w.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function $r(t,e=[]){let n=[];function r(a,o){const l=w.createContext(o),u=n.length;n=[...n,o];const d=m=>{var _;const{scope:p,children:v,...N}=m,b=((_=p==null?void 0:p[t])==null?void 0:_[u])||l,j=w.useMemo(()=>N,Object.values(N));return i.jsx(b.Provider,{value:j,children:v})};d.displayName=a+"Provider";function h(m,p){var b;const v=((b=p==null?void 0:p[t])==null?void 0:b[u])||l,N=w.useContext(v);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[d,h]}const s=()=>{const a=n.map(o=>w.createContext(o));return function(l){const u=(l==null?void 0:l[t])||a;return w.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,Pee(s,...e)]}function Pee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const m=u(a)[`__scope${d}`];return{...l,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var er=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},Cee=zN[" useInsertionEffect ".trim().toString()]||er;function Js({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=Tee({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const h=w.useRef(t!==void 0);w.useEffect(()=>{const m=h.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=w.useCallback(h=>{var m;if(l){const p=Ree(h)?h(t):h;p!==t&&((m=o.current)==null||m.call(o,p))}else a(h)},[l,t,a,o]);return[u,d]}function Tee({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),s=w.useRef(n),a=w.useRef(e);return Cee(()=>{a.current=e},[e]),w.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function Ree(t){return typeof t=="function"}var kee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=kee.reduce((t,e)=>{const n=nc(`Primitive.${e}`),r=w.forwardRef((s,a)=>{const{asChild:o,...l}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $3(t,e){t&&qh.flushSync(()=>t.dispatchEvent(e))}function Vg(t){const e=t+"CollectionProvider",[n,r]=$r(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:j,children:_}=b,x=oe.useRef(null),S=oe.useRef(new Map).current;return i.jsx(s,{scope:j,itemMap:S,collectionRef:x,children:_})};o.displayName=e;const l=t+"CollectionSlot",u=nc(l),d=oe.forwardRef((b,j)=>{const{scope:_,children:x}=b,S=a(l,_),C=pt(j,S.collectionRef);return i.jsx(u,{ref:C,children:x})});d.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",p=nc(h),v=oe.forwardRef((b,j)=>{const{scope:_,children:x,...S}=b,C=oe.useRef(null),R=pt(j,C),V=a(h,_);return oe.useEffect(()=>(V.itemMap.set(C,{ref:C,...S}),()=>void V.itemMap.delete(C))),i.jsx(p,{[m]:"",ref:R,children:x})});v.displayName=h;function N(b){const j=a(t+"CollectionConsumer",b);return oe.useCallback(()=>{const x=j.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((V,k)=>S.indexOf(V.ref.current)-S.indexOf(k.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:v},N,r]}var Iee=w.createContext(void 0);function Du(t){const e=w.useContext(Iee);return t||e||"ltr"}function Er(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Aee(t,e=globalThis==null?void 0:globalThis.document){const n=Er(t);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Oee="DismissableLayer",yj="dismissableLayer.update",Mee="dismissableLayer.pointerDownOutside",Dee="dismissableLayer.focusOutside",KR,V3=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zg=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=t,d=w.useContext(V3),[h,m]=w.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=w.useState({}),N=pt(e,k=>m(k)),b=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(j),x=h?b.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,C=x>=_,R=$ee(k=>{const I=k.target,$=[...d.branches].some(T=>T.contains(I));!C||$||(s==null||s(k),o==null||o(k),k.defaultPrevented||l==null||l())},p),V=Vee(k=>{const I=k.target;[...d.branches].some(T=>T.contains(I))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},p);return Aee(k=>{x===d.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),w.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(KR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),ZR(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=KR)}},[h,p,n,d]),w.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),ZR())},[h,d]),w.useEffect(()=>{const k=()=>v({});return document.addEventListener(yj,k),()=>document.removeEventListener(yj,k)},[]),i.jsx(Qe.div,{...u,ref:N,style:{pointerEvents:S?C?"auto":"none":void 0,...t.style},onFocusCapture:$e(t.onFocusCapture,V.onFocusCapture),onBlurCapture:$e(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:$e(t.onPointerDownCapture,R.onPointerDownCapture)})});zg.displayName=Oee;var Lee="DismissableLayerBranch",Fee=w.forwardRef((t,e)=>{const n=w.useContext(V3),r=w.useRef(null),s=pt(e,r);return w.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(Qe.div,{...t,ref:s})});Fee.displayName=Lee;function $ee(t,e=globalThis==null?void 0:globalThis.document){const n=Er(t),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){z3(Mee,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Vee(t,e=globalThis==null?void 0:globalThis.document){const n=Er(t),r=w.useRef(!1);return w.useEffect(()=>{const s=a=>{a.target&&!r.current&&z3(Dee,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZR(){const t=new CustomEvent(yj);document.dispatchEvent(t)}function z3(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$3(s,a):s.dispatchEvent(a)}var a_=0;function ww(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??QR()),document.body.insertAdjacentElement("beforeend",t[1]??QR()),a_++,()=>{a_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a_--}},[])}function QR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var o_="focusScope.autoFocusOnMount",l_="focusScope.autoFocusOnUnmount",YR={bubbles:!1,cancelable:!0},zee="FocusScope",Ug=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,u]=w.useState(null),d=Er(s),h=Er(a),m=w.useRef(null),p=pt(e,b=>u(b)),v=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let b=function(S){if(v.paused||!l)return;const C=S.target;l.contains(C)?m.current=C:dl(m.current,{select:!0})},j=function(S){if(v.paused||!l)return;const C=S.relatedTarget;C!==null&&(l.contains(C)||dl(m.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&dl(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",j);const x=new MutationObserver(_);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",j),x.disconnect()}}},[r,l,v.paused]),w.useEffect(()=>{if(l){XR.add(v);const b=document.activeElement;if(!l.contains(b)){const _=new CustomEvent(o_,YR);l.addEventListener(o_,d),l.dispatchEvent(_),_.defaultPrevented||(Uee(Gee(U3(l)),{select:!0}),document.activeElement===b&&dl(l))}return()=>{l.removeEventListener(o_,d),setTimeout(()=>{const _=new CustomEvent(l_,YR);l.addEventListener(l_,h),l.dispatchEvent(_),_.defaultPrevented||dl(b??document.body,{select:!0}),l.removeEventListener(l_,h),XR.remove(v)},0)}}},[l,d,h,v]);const N=w.useCallback(b=>{if(!n&&!r||v.paused)return;const j=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(j&&_){const x=b.currentTarget,[S,C]=Bee(x);S&&C?!b.shiftKey&&_===C?(b.preventDefault(),n&&dl(S,{select:!0})):b.shiftKey&&_===S&&(b.preventDefault(),n&&dl(C,{select:!0})):_===x&&b.preventDefault()}},[n,r,v.paused]);return i.jsx(Qe.div,{tabIndex:-1,...o,ref:p,onKeyDown:N})});Ug.displayName=zee;function Uee(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(dl(r,{select:e}),document.activeElement!==n)return}function Bee(t){const e=U3(t),n=JR(e,t),r=JR(e.reverse(),t);return[n,r]}function U3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function JR(t,e){for(const n of t)if(!Wee(n,{upTo:e}))return n}function Wee(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Hee(t){return t instanceof HTMLInputElement&&"select"in t}function dl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Hee(t)&&e&&t.select()}}var XR=qee();function qee(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ek(t,e),t.unshift(e)},remove(e){var n;t=ek(t,e),(n=t[0])==null||n.resume()}}}function ek(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Gee(t){return t.filter(e=>e.tagName!=="A")}var Kee=zN[" useId ".trim().toString()]||(()=>{}),Zee=0;function Zs(t){const[e,n]=w.useState(Kee());return er(()=>{n(r=>r??String(Zee++))},[t]),e?`radix-${e}`:""}const Qee=["top","right","bottom","left"],rc=Math.min,Bs=Math.max,Zx=Math.round,sy=Math.floor,Ma=t=>({x:t,y:t}),Yee={left:"right",right:"left",bottom:"top",top:"bottom"},Jee={start:"end",end:"start"};function xj(t,e,n){return Bs(t,rc(e,n))}function Oo(t,e){return typeof t=="function"?t(e):t}function Mo(t){return t.split("-")[0]}function nf(t){return t.split("-")[1]}function eP(t){return t==="x"?"y":"x"}function tP(t){return t==="y"?"height":"width"}function Sa(t){return["top","bottom"].includes(Mo(t))?"y":"x"}function nP(t){return eP(Sa(t))}function Xee(t,e,n){n===void 0&&(n=!1);const r=nf(t),s=nP(t),a=tP(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Qx(o)),[o,Qx(o)]}function ete(t){const e=Qx(t);return[wj(t),e,wj(e)]}function wj(t){return t.replace(/start|end/g,e=>Jee[e])}function tte(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function nte(t,e,n,r){const s=nf(t);let a=tte(Mo(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(wj)))),a}function Qx(t){return t.replace(/left|right|bottom|top/g,e=>Yee[e])}function rte(t){return{top:0,right:0,bottom:0,left:0,...t}}function B3(t){return typeof t!="number"?rte(t):{top:t,right:t,bottom:t,left:t}}function Yx(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function tk(t,e,n){let{reference:r,floating:s}=t;const a=Sa(e),o=nP(e),l=tP(o),u=Mo(e),d=a==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(u){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-s.width,y:m};break;default:v={x:r.x,y:r.y}}switch(nf(e)){case"start":v[o]-=p*(n&&d?-1:1);break;case"end":v[o]+=p*(n&&d?-1:1);break}return v}const ste=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:m}=tk(d,r,u),p=r,v={},N=0;for(let b=0;b<l.length;b++){const{name:j,fn:_}=l[b],{x,y:S,data:C,reset:R}=await _({x:h,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:d,platform:o,elements:{reference:t,floating:e}});h=x??h,m=S??m,v={...v,[j]:{...v[j],...C}},R&&N<=50&&(N++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(d=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:m}=tk(d,p,u)),b=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:v}};async function Ep(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:v=0}=Oo(e,t),N=B3(v),j=l[p?m==="floating"?"reference":"floating":m],_=Yx(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(j)))==null||n?j:j.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:u})),x=m==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Yx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:u}):x);return{top:(_.top-R.top+N.top)/C.y,bottom:(R.bottom-_.bottom+N.bottom)/C.y,left:(_.left-R.left+N.left)/C.x,right:(R.right-_.right+N.right)/C.x}}const ite=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:u}=e,{element:d,padding:h=0}=Oo(t,e)||{};if(d==null)return{};const m=B3(h),p={x:n,y:r},v=nP(s),N=tP(v),b=await o.getDimensions(d),j=v==="y",_=j?"top":"left",x=j?"bottom":"right",S=j?"clientHeight":"clientWidth",C=a.reference[N]+a.reference[v]-p[v]-a.floating[N],R=p[v]-a.reference[v],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=V?V[S]:0;(!k||!await(o.isElement==null?void 0:o.isElement(V)))&&(k=l.floating[S]||a.floating[N]);const I=C/2-R/2,$=k/2-b[N]/2-1,T=rc(m[_],$),M=rc(m[x],$),D=T,O=k-b[N]-M,B=k/2-b[N]/2+I,Y=xj(D,B,O),ee=!u.arrow&&nf(s)!=null&&B!==Y&&a.reference[N]/2-(B<D?T:M)-b[N]/2<0,Z=ee?B<D?B-D:B-O:0;return{[v]:p[v]+Z,data:{[v]:Y,centerOffset:B-Y-Z,...ee&&{alignmentOffset:Z}},reset:ee}}}),ate=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:b=!0,...j}=Oo(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const _=Mo(s),x=Sa(l),S=Mo(l)===l,C=await(u.isRTL==null?void 0:u.isRTL(d.floating)),R=p||(S||!b?[Qx(l)]:ete(l)),V=N!=="none";!p&&V&&R.push(...nte(l,b,N,C));const k=[l,...R],I=await Ep(e,j),$=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&$.push(I[_]),m){const B=Xee(s,o,C);$.push(I[B[0]],I[B[1]])}if(T=[...T,{placement:s,overflows:$}],!$.every(B=>B<=0)){var M,D;const B=(((M=a.flip)==null?void 0:M.index)||0)+1,Y=k[B];if(Y&&(!(m==="alignment"?x!==Sa(Y):!1)||T.every(z=>z.overflows[0]>0&&Sa(z.placement)===x)))return{data:{index:B,overflows:T},reset:{placement:Y}};let ee=(D=T.filter(Z=>Z.overflows[0]<=0).sort((Z,z)=>Z.overflows[1]-z.overflows[1])[0])==null?void 0:D.placement;if(!ee)switch(v){case"bestFit":{var O;const Z=(O=T.filter(z=>{if(V){const H=Sa(z.placement);return H===x||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,q)=>H+q,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:O[0];Z&&(ee=Z);break}case"initialPlacement":ee=l;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function nk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rk(t){return Qee.some(e=>t[e]>=0)}const ote=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Oo(t,e);switch(r){case"referenceHidden":{const a=await Ep(e,{...s,elementContext:"reference"}),o=nk(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rk(o)}}}case"escaped":{const a=await Ep(e,{...s,altBoundary:!0}),o=nk(a,n.floating);return{data:{escapedOffsets:o,escaped:rk(o)}}}default:return{}}}}};async function lte(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Mo(n),l=nf(n),u=Sa(n)==="y",d=["left","top"].includes(o)?-1:1,h=a&&u?-1:1,m=Oo(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:N}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof N=="number"&&(v=l==="end"?N*-1:N),u?{x:v*h,y:p*d}:{x:p*d,y:v*h}}const cte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,u=await lte(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:o}}}}},ute=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:_,y:x}=j;return{x:_,y:x}}},...u}=Oo(t,e),d={x:n,y:r},h=await Ep(e,u),m=Sa(Mo(s)),p=eP(m);let v=d[p],N=d[m];if(a){const j=p==="y"?"top":"left",_=p==="y"?"bottom":"right",x=v+h[j],S=v-h[_];v=xj(x,v,S)}if(o){const j=m==="y"?"top":"left",_=m==="y"?"bottom":"right",x=N+h[j],S=N-h[_];N=xj(x,N,S)}const b=l.fn({...e,[p]:v,[m]:N});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:a,[m]:o}}}}}},dte=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=Oo(t,e),h={x:n,y:r},m=Sa(s),p=eP(m);let v=h[p],N=h[m];const b=Oo(l,e),j=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const S=p==="y"?"height":"width",C=a.reference[p]-a.floating[S]+j.mainAxis,R=a.reference[p]+a.reference[S]-j.mainAxis;v<C?v=C:v>R&&(v=R)}if(d){var _,x;const S=p==="y"?"width":"height",C=["top","left"].includes(Mo(s)),R=a.reference[m]-a.floating[S]+(C&&((_=o.offset)==null?void 0:_[m])||0)+(C?0:j.crossAxis),V=a.reference[m]+a.reference[S]+(C?0:((x=o.offset)==null?void 0:x[m])||0)-(C?j.crossAxis:0);N<R?N=R:N>V&&(N=V)}return{[p]:v,[m]:N}}}},hte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:u=()=>{},...d}=Oo(t,e),h=await Ep(e,d),m=Mo(s),p=nf(s),v=Sa(s)==="y",{width:N,height:b}=a.floating;let j,_;m==="top"||m==="bottom"?(j=m,_=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=m,j=p==="end"?"top":"bottom");const x=b-h.top-h.bottom,S=N-h.left-h.right,C=rc(b-h[j],x),R=rc(N-h[_],S),V=!e.middlewareData.shift;let k=C,I=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=x),V&&!p){const T=Bs(h.left,0),M=Bs(h.right,0),D=Bs(h.top,0),O=Bs(h.bottom,0);v?I=N-2*(T!==0||M!==0?T+M:Bs(h.left,h.right)):k=b-2*(D!==0||O!==0?D+O:Bs(h.top,h.bottom))}await u({...e,availableWidth:I,availableHeight:k});const $=await o.getDimensions(l.floating);return N!==$.width||b!==$.height?{reset:{rects:!0}}:{}}}};function bw(){return typeof window<"u"}function rf(t){return W3(t)?(t.nodeName||"").toLowerCase():"#document"}function Qs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qa(t){var e;return(e=(W3(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function W3(t){return bw()?t instanceof Node||t instanceof Qs(t).Node:!1}function Yi(t){return bw()?t instanceof Element||t instanceof Qs(t).Element:!1}function za(t){return bw()?t instanceof HTMLElement||t instanceof Qs(t).HTMLElement:!1}function sk(t){return!bw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Qs(t).ShadowRoot}function Bg(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ji(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function fte(t){return["table","td","th"].includes(rf(t))}function _w(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function rP(t){const e=sP(),n=Yi(t)?Ji(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function mte(t){let e=sc(t);for(;za(e)&&!Eh(e);){if(rP(e))return e;if(_w(e))return null;e=sc(e)}return null}function sP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Eh(t){return["html","body","#document"].includes(rf(t))}function Ji(t){return Qs(t).getComputedStyle(t)}function jw(t){return Yi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sc(t){if(rf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sk(t)&&t.host||qa(t);return sk(e)?e.host:e}function H3(t){const e=sc(t);return Eh(e)?t.ownerDocument?t.ownerDocument.body:t.body:za(e)&&Bg(e)?e:H3(e)}function Pp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=H3(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Qs(s);if(a){const l=bj(o);return e.concat(o,o.visualViewport||[],Bg(s)?s:[],l&&n?Pp(l):[])}return e.concat(s,Pp(s,[],n))}function bj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function q3(t){const e=Ji(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=za(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Zx(n)!==a||Zx(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function iP(t){return Yi(t)?t:t.contextElement}function nh(t){const e=iP(t);if(!za(e))return Ma(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=q3(e);let o=(a?Zx(n.width):n.width)/r,l=(a?Zx(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const pte=Ma(0);function G3(t){const e=Qs(t);return!sP()||!e.visualViewport?pte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gte(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Qs(t)?!1:e}function xu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=iP(t);let o=Ma(1);e&&(r?Yi(r)&&(o=nh(r)):o=nh(t));const l=gte(a,n,r)?G3(a):Ma(0);let u=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,m=s.height/o.y;if(a){const p=Qs(a),v=r&&Yi(r)?Qs(r):r;let N=p,b=bj(N);for(;b&&r&&v!==N;){const j=nh(b),_=b.getBoundingClientRect(),x=Ji(b),S=_.left+(b.clientLeft+parseFloat(x.paddingLeft))*j.x,C=_.top+(b.clientTop+parseFloat(x.paddingTop))*j.y;u*=j.x,d*=j.y,h*=j.x,m*=j.y,u+=S,d+=C,N=Qs(b),b=bj(N)}}return Yx({width:h,height:m,x:u,y:d})}function aP(t,e){const n=jw(t).scrollLeft;return e?e.left+n:xu(qa(t)).left+n}function K3(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:aP(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function vte(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=qa(r),l=e?_w(e.floating):!1;if(r===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},d=Ma(1);const h=Ma(0),m=za(r);if((m||!m&&!a)&&((rf(r)!=="body"||Bg(o))&&(u=jw(r)),za(r))){const v=xu(r);d=nh(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=o&&!m&&!a?K3(o,u,!0):Ma(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-u.scrollTop*d.y+h.y+p.y}}function yte(t){return Array.from(t.getClientRects())}function xte(t){const e=qa(t),n=jw(t),r=t.ownerDocument.body,s=Bs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Bs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+aP(t);const l=-n.scrollTop;return Ji(r).direction==="rtl"&&(o+=Bs(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function wte(t,e){const n=Qs(t),r=qa(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;const d=sP();(!d||d&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:a,height:o,x:l,y:u}}function bte(t,e){const n=xu(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=za(t)?nh(t):Ma(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,u=s*a.x,d=r*a.y;return{width:o,height:l,x:u,y:d}}function ik(t,e,n){let r;if(e==="viewport")r=wte(t,n);else if(e==="document")r=xte(qa(t));else if(Yi(e))r=bte(e,n);else{const s=G3(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Yx(r)}function Z3(t,e){const n=sc(t);return n===e||!Yi(n)||Eh(n)?!1:Ji(n).position==="fixed"||Z3(n,e)}function _te(t,e){const n=e.get(t);if(n)return n;let r=Pp(t,[],!1).filter(l=>Yi(l)&&rf(l)!=="body"),s=null;const a=Ji(t).position==="fixed";let o=a?sc(t):t;for(;Yi(o)&&!Eh(o);){const l=Ji(o),u=rP(o);!u&&l.position==="fixed"&&(s=null),(a?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Bg(o)&&!u&&Z3(t,o))?r=r.filter(h=>h!==o):s=l,o=sc(o)}return e.set(t,r),r}function jte(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?_w(e)?[]:_te(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,h)=>{const m=ik(e,h,s);return d.top=Bs(m.top,d.top),d.right=rc(m.right,d.right),d.bottom=rc(m.bottom,d.bottom),d.left=Bs(m.left,d.left),d},ik(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Nte(t){const{width:e,height:n}=q3(t);return{width:e,height:n}}function Ste(t,e,n){const r=za(e),s=qa(e),a=n==="fixed",o=xu(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const u=Ma(0);function d(){u.x=aP(s)}if(r||!r&&!a)if((rf(e)!=="body"||Bg(s))&&(l=jw(e)),r){const v=xu(e,!0,a,e);u.x=v.x+e.clientLeft,u.y=v.y+e.clientTop}else s&&d();a&&!r&&s&&d();const h=s&&!r&&!a?K3(s,l):Ma(0),m=o.left+l.scrollLeft-u.x-h.x,p=o.top+l.scrollTop-u.y-h.y;return{x:m,y:p,width:o.width,height:o.height}}function c_(t){return Ji(t).position==="static"}function ak(t,e){if(!za(t)||Ji(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qa(t)===n&&(n=n.ownerDocument.body),n}function Q3(t,e){const n=Qs(t);if(_w(t))return n;if(!za(t)){let s=sc(t);for(;s&&!Eh(s);){if(Yi(s)&&!c_(s))return s;s=sc(s)}return n}let r=ak(t,e);for(;r&&fte(r)&&c_(r);)r=ak(r,e);return r&&Eh(r)&&c_(r)&&!rP(r)?n:r||mte(t)||n}const Ete=async function(t){const e=this.getOffsetParent||Q3,n=this.getDimensions,r=await n(t.floating);return{reference:Ste(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Pte(t){return Ji(t).direction==="rtl"}const Cte={convertOffsetParentRelativeRectToViewportRelativeRect:vte,getDocumentElement:qa,getClippingRect:jte,getOffsetParent:Q3,getElementRects:Ete,getClientRects:yte,getDimensions:Nte,getScale:nh,isElement:Yi,isRTL:Pte};function Y3(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Tte(t,e){let n=null,r;const s=qa(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const d=t.getBoundingClientRect(),{left:h,top:m,width:p,height:v}=d;if(l||e(),!p||!v)return;const N=sy(m),b=sy(s.clientWidth-(h+p)),j=sy(s.clientHeight-(m+v)),_=sy(h),S={rootMargin:-N+"px "+-b+"px "+-j+"px "+-_+"px",threshold:Bs(0,rc(1,u))||1};let C=!0;function R(V){const k=V[0].intersectionRatio;if(k!==u){if(!C)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!Y3(d,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(R,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,S)}n.observe(t)}return o(!0),a}function Rte(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=iP(t),h=s||a?[...d?Pp(d):[],...Pp(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),a&&_.addEventListener("resize",n)});const m=d&&l?Tte(d,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(_=>{let[x]=_;x&&x.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=v)==null||S.observe(e)})),n()}),d&&!u&&v.observe(d),v.observe(e));let N,b=u?xu(t):null;u&&j();function j(){const _=xu(t);b&&!Y3(b,_)&&n(),b=_,N=requestAnimationFrame(j)}return n(),()=>{var _;h.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),m==null||m(),(_=v)==null||_.disconnect(),v=null,u&&cancelAnimationFrame(N)}}const kte=cte,Ite=ute,Ate=ate,Ote=hte,Mte=ote,ok=ite,Dte=dte,Lte=(t,e,n)=>{const r=new Map,s={platform:Cte,...n},a={...s.platform,_c:r};return ste(t,e,{...s,platform:a})};var Fte=typeof document<"u",$te=function(){},Wy=Fte?w.useLayoutEffect:$te;function Jx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jx(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Jx(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function J3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function lk(t,e){const n=J3(t);return Math.round(e*n)/n}function u_(t){const e=w.useRef(t);return Wy(()=>{e.current=t}),e}function Vte(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,m]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=w.useState(r);Jx(p,r)||v(r);const[N,b]=w.useState(null),[j,_]=w.useState(null),x=w.useCallback(z=>{z!==V.current&&(V.current=z,b(z))},[]),S=w.useCallback(z=>{z!==k.current&&(k.current=z,_(z))},[]),C=a||N,R=o||j,V=w.useRef(null),k=w.useRef(null),I=w.useRef(h),$=u!=null,T=u_(u),M=u_(s),D=u_(d),O=w.useCallback(()=>{if(!V.current||!k.current)return;const z={placement:e,strategy:n,middleware:p};M.current&&(z.platform=M.current),Lte(V.current,k.current,z).then(H=>{const q={...H,isPositioned:D.current!==!1};B.current&&!Jx(I.current,q)&&(I.current=q,qh.flushSync(()=>{m(q)}))})},[p,e,n,M,D]);Wy(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,m(z=>({...z,isPositioned:!1})))},[d]);const B=w.useRef(!1);Wy(()=>(B.current=!0,()=>{B.current=!1}),[]),Wy(()=>{if(C&&(V.current=C),R&&(k.current=R),C&&R){if(T.current)return T.current(C,R,O);O()}},[C,R,O,T,$]);const Y=w.useMemo(()=>({reference:V,floating:k,setReference:x,setFloating:S}),[x,S]),ee=w.useMemo(()=>({reference:C,floating:R}),[C,R]),Z=w.useMemo(()=>{const z={position:n,left:0,top:0};if(!ee.floating)return z;const H=lk(ee.floating,h.x),q=lk(ee.floating,h.y);return l?{...z,transform:"translate("+H+"px, "+q+"px)",...J3(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:q}},[n,l,ee.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:O,refs:Y,elements:ee,floatingStyles:Z}),[h,O,Y,ee,Z])}const zte=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ok({element:r.current,padding:s}).fn(n):{}:r?ok({element:r,padding:s}).fn(n):{}}}},Ute=(t,e)=>({...kte(t),options:[t,e]}),Bte=(t,e)=>({...Ite(t),options:[t,e]}),Wte=(t,e)=>({...Dte(t),options:[t,e]}),Hte=(t,e)=>({...Ate(t),options:[t,e]}),qte=(t,e)=>({...Ote(t),options:[t,e]}),Gte=(t,e)=>({...Mte(t),options:[t,e]}),Kte=(t,e)=>({...zte(t),options:[t,e]});var Zte="Arrow",X3=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(Qe.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});X3.displayName=Zte;var Qte=X3;function Nw(t){const[e,n]=w.useState(void 0);return er(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var oP="Popper",[eF,sf]=$r(oP),[Yte,tF]=eF(oP),nF=t=>{const{__scopePopper:e,children:n}=t,[r,s]=w.useState(null);return i.jsx(Yte,{scope:e,anchor:r,onAnchorChange:s,children:n})};nF.displayName=oP;var rF="PopperAnchor",sF=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=tF(rF,n),o=w.useRef(null),l=pt(e,o);return w.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Qe.div,{...s,ref:l})});sF.displayName=rF;var lP="PopperContent",[Jte,Xte]=eF(lP),iF=w.forwardRef((t,e)=>{var ye,J,te,ne,K,ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:N,...b}=t,j=tF(lP,n),[_,x]=w.useState(null),S=pt(e,he=>x(he)),[C,R]=w.useState(null),V=Nw(C),k=(V==null?void 0:V.width)??0,I=(V==null?void 0:V.height)??0,$=r+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],D=M.length>0,O={padding:T,boundary:M.filter(tne),altBoundary:D},{refs:B,floatingStyles:Y,placement:ee,isPositioned:Z,middlewareData:z}=Vte({strategy:"fixed",placement:$,whileElementsMounted:(...he)=>Rte(...he,{animationFrame:v==="always"}),elements:{reference:j.anchor},middleware:[Ute({mainAxis:s+I,alignmentAxis:o}),u&&Bte({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Wte():void 0,...O}),u&&Hte({...O}),qte({...O,apply:({elements:he,rects:_e,availableWidth:xe,availableHeight:se})=>{const{width:we,height:Ne}=_e.reference,He=he.floating.style;He.setProperty("--radix-popper-available-width",`${xe}px`),He.setProperty("--radix-popper-available-height",`${se}px`),He.setProperty("--radix-popper-anchor-width",`${we}px`),He.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),C&&Kte({element:C,padding:l}),nne({arrowWidth:k,arrowHeight:I}),p&&Gte({strategy:"referenceHidden",...O})]}),[H,q]=lF(ee),X=Er(N);er(()=>{Z&&(X==null||X())},[Z,X]);const me=(ye=z.arrow)==null?void 0:ye.x,Ee=(J=z.arrow)==null?void 0:J.y,Fe=((te=z.arrow)==null?void 0:te.centerOffset)!==0,[Me,ue]=w.useState();return er(()=>{_&&ue(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:Z?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(ne=z.transformOrigin)==null?void 0:ne.x,(K=z.transformOrigin)==null?void 0:K.y].join(" "),...((ie=z.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(Jte,{scope:n,placedSide:H,onArrowChange:R,arrowX:me,arrowY:Ee,shouldHideArrow:Fe,children:i.jsx(Qe.div,{"data-side":H,"data-align":q,...b,ref:S,style:{...b.style,animation:Z?void 0:"none"}})})})});iF.displayName=lP;var aF="PopperArrow",ene={top:"bottom",right:"left",bottom:"top",left:"right"},oF=w.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=Xte(aF,r),o=ene[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Qte,{...s,ref:n,style:{...s.style,display:"block"}})})});oF.displayName=aF;function tne(t){return t!==null}var nne=t=>({name:"transformOrigin",options:t,fn(e){var j,_,x;const{placement:n,rects:r,middlewareData:s}=e,o=((j=s.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=lF(n),m={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,v=(((x=s.arrow)==null?void 0:x.y)??0)+u/2;let N="",b="";return d==="bottom"?(N=o?m:`${p}px`,b=`${-u}px`):d==="top"?(N=o?m:`${p}px`,b=`${r.floating.height+u}px`):d==="right"?(N=`${-u}px`,b=o?m:`${v}px`):d==="left"&&(N=`${r.floating.width+u}px`,b=o?m:`${v}px`),{data:{x:N,y:b}}}});function lF(t){const[e,n="center"]=t.split("-");return[e,n]}var cP=nF,Sw=sF,uP=iF,dP=oF,rne="Portal",Wg=w.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=w.useState(!1);er(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?YB.createPortal(i.jsx(Qe.div,{...r,ref:e}),o):null});Wg.displayName=rne;function sne(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Vr=t=>{const{present:e,children:n}=t,r=ine(e),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),a=pt(r.ref,ane(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:a}):null};Vr.displayName="Presence";function ine(t){const[e,n]=w.useState(),r=w.useRef(null),s=w.useRef(t),a=w.useRef("none"),o=t?"mounted":"unmounted",[l,u]=sne(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=iy(r.current);a.current=l==="mounted"?d:"none"},[l]),er(()=>{const d=r.current,h=s.current;if(h!==t){const p=a.current,v=iy(d);t?u("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),er(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,m=v=>{const b=iy(r.current).includes(v.animationName);if(v.target===e&&b&&(u("ANIMATION_END"),!s.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},p=v=>{v.target===e&&(a.current=iy(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function iy(t){return(t==null?void 0:t.animationName)||"none"}function ane(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var d_="rovingFocusGroup.onEntryFocus",one={bubbles:!1,cancelable:!0},Hg="RovingFocusGroup",[_j,cF,lne]=Vg(Hg),[cne,Ew]=$r(Hg,[lne]),[une,dne]=cne(Hg),uF=w.forwardRef((t,e)=>i.jsx(_j.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(_j.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(hne,{...t,ref:e})})}));uF.displayName=Hg;var hne=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=t,p=w.useRef(null),v=pt(e,p),N=Du(a),[b,j]=Js({prop:o,defaultProp:l??null,onChange:u,caller:Hg}),[_,x]=w.useState(!1),S=Er(d),C=cF(n),R=w.useRef(!1),[V,k]=w.useState(0);return w.useEffect(()=>{const I=p.current;if(I)return I.addEventListener(d_,S),()=>I.removeEventListener(d_,S)},[S]),i.jsx(une,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:b,onItemFocus:w.useCallback(I=>j(I),[j]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:w.useCallback(()=>k(I=>I-1),[]),children:i.jsx(Qe.div,{tabIndex:_||V===0?-1:0,"data-orientation":r,...m,ref:v,style:{outline:"none",...t.style},onMouseDown:$e(t.onMouseDown,()=>{R.current=!0}),onFocus:$e(t.onFocus,I=>{const $=!R.current;if(I.target===I.currentTarget&&$&&!_){const T=new CustomEvent(d_,one);if(I.currentTarget.dispatchEvent(T),!T.defaultPrevented){const M=C().filter(ee=>ee.focusable),D=M.find(ee=>ee.active),O=M.find(ee=>ee.id===b),Y=[D,O,...M].filter(Boolean).map(ee=>ee.ref.current);fF(Y,h)}}R.current=!1}),onBlur:$e(t.onBlur,()=>x(!1))})})}),dF="RovingFocusGroupItem",hF=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,u=Zs(),d=a||u,h=dne(dF,n),m=h.currentTabStopId===d,p=cF(n),{onFocusableItemAdd:v,onFocusableItemRemove:N,currentTabStopId:b}=h;return w.useEffect(()=>{if(r)return v(),()=>N()},[r,v,N]),i.jsx(_j.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:i.jsx(Qe.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:$e(t.onMouseDown,j=>{r?h.onItemFocus(d):j.preventDefault()}),onFocus:$e(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:$e(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){h.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const _=pne(j,h.orientation,h.dir);if(_!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let S=p().filter(C=>C.focusable).map(C=>C.ref.current);if(_==="last")S.reverse();else if(_==="prev"||_==="next"){_==="prev"&&S.reverse();const C=S.indexOf(j.currentTarget);S=h.loop?gne(S,C+1):S.slice(C+1)}setTimeout(()=>fF(S))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:b!=null}):o})})});hF.displayName=dF;var fne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mne(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pne(t,e,n){const r=mne(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fne[r]}function fF(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function gne(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var mF=uF,pF=hF,vne=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},fd=new WeakMap,ay=new WeakMap,oy={},h_=0,gF=function(t){return t&&(t.host||gF(t.parentNode))},yne=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},xne=function(t,e,n,r){var s=yne(e,Array.isArray(t)?t:[t]);oy[n]||(oy[n]=new WeakMap);var a=oy[n],o=[],l=new Set,u=new Set(s),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};s.forEach(d);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),N=v!==null&&v!=="false",b=(fd.get(p)||0)+1,j=(a.get(p)||0)+1;fd.set(p,b),a.set(p,j),o.push(p),b===1&&N&&ay.set(p,!0),j===1&&p.setAttribute(n,"true"),N||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),h_++,function(){o.forEach(function(m){var p=fd.get(m)-1,v=a.get(m)-1;fd.set(m,p),a.set(m,v),p||(ay.has(m)||m.removeAttribute(r),ay.delete(m)),v||m.removeAttribute(n)}),h_--,h_||(fd=new WeakMap,fd=new WeakMap,ay=new WeakMap,oy={})}},Pw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=vne(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),xne(r,s,n,"aria-hidden")):function(){return null}},Hy="right-scroll-bar-position",qy="width-before-scroll-bar",wne="with-scroll-bars-hidden",bne="--removed-body-scroll-bar-size";function f_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function _ne(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var jne=typeof window<"u"?w.useLayoutEffect:w.useEffect,ck=new WeakMap;function Nne(t,e){var n=_ne(null,function(r){return t.forEach(function(s){return f_(s,r)})});return jne(function(){var r=ck.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||f_(l,null)}),a.forEach(function(l){s.has(l)||f_(l,o)})}ck.set(n,t)},[t]),n}function Sne(t){return t}function Ene(t,e){e===void 0&&(e=Sne);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var u=function(){var h=o;o=[],h.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function Pne(t){t===void 0&&(t={});var e=Ene(null);return e.options=wa({async:!0,ssr:!1},t),e}var vF=function(t){var e=t.sideCar,n=jg(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,wa({},n))};vF.isSideCarExport=!0;function Cne(t,e){return t.useMedium(e),vF}var yF=Pne(),m_=function(){},Cw=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:m_,onWheelCapture:m_,onTouchMoveCapture:m_}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,m=t.shards,p=t.sideCar,v=t.noRelative,N=t.noIsolation,b=t.inert,j=t.allowPinchZoom,_=t.as,x=_===void 0?"div":_,S=t.gapMode,C=jg(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,V=Nne([n,e]),k=wa(wa({},C),s);return w.createElement(w.Fragment,null,h&&w.createElement(R,{sideCar:yF,removeScrollBar:d,shards:m,noRelative:v,noIsolation:N,inert:b,setCallbacks:a,allowPinchZoom:!!j,lockRef:n,gapMode:S}),o?w.cloneElement(w.Children.only(l),wa(wa({},k),{ref:V})):w.createElement(x,wa({},k,{className:u,ref:V}),l))});Cw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cw.classNames={fullWidth:qy,zeroRight:Hy};var Tne=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rne(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Tne();return e&&t.setAttribute("nonce",e),t}function kne(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ine(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ane=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Rne())&&(kne(e,n),Ine(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},One=function(){var t=Ane();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},xF=function(){var t=One(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Mne={left:0,top:0,right:0,gap:0},p_=function(t){return parseInt(t||"",10)||0},Dne=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[p_(n),p_(r),p_(s)]},Lne=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Mne;var e=Dne(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Fne=xF(),rh="data-scroll-locked",$ne=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(wne,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(rh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hy,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qy,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Hy," .").concat(Hy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qy," .").concat(qy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rh,`] {
    `).concat(bne,": ").concat(l,`px;
  }
`)},uk=function(){var t=parseInt(document.body.getAttribute(rh)||"0",10);return isFinite(t)?t:0},Vne=function(){w.useEffect(function(){return document.body.setAttribute(rh,(uk()+1).toString()),function(){var t=uk()-1;t<=0?document.body.removeAttribute(rh):document.body.setAttribute(rh,t.toString())}},[])},zne=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Vne();var a=w.useMemo(function(){return Lne(s)},[s]);return w.createElement(Fne,{styles:$ne(a,!e,s,n?"":"!important")})},jj=!1;if(typeof window<"u")try{var ly=Object.defineProperty({},"passive",{get:function(){return jj=!0,!0}});window.addEventListener("test",ly,ly),window.removeEventListener("test",ly,ly)}catch{jj=!1}var md=jj?{passive:!1}:!1,Une=function(t){return t.tagName==="TEXTAREA"},wF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Une(t)&&n[e]==="visible")},Bne=function(t){return wF(t,"overflowY")},Wne=function(t){return wF(t,"overflowX")},dk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bF(t,r);if(s){var a=_F(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Hne=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},qne=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bF=function(t,e){return t==="v"?Bne(e):Wne(e)},_F=function(t,e){return t==="v"?Hne(e):qne(e)},Gne=function(t,e){return t==="h"&&e==="rtl"?-1:1},Kne=function(t,e,n,r,s){var a=Gne(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,u=e.contains(l),d=!1,h=o>0,m=0,p=0;do{if(!l)break;var v=_F(t,l),N=v[0],b=v[1],j=v[2],_=b-j-a*N;(N||_)&&bF(t,l)&&(m+=_,p+=N);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(h&&Math.abs(m)<1||!h&&Math.abs(p)<1)&&(d=!0),d},cy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},hk=function(t){return[t.deltaX,t.deltaY]},fk=function(t){return t&&"current"in t?t.current:t},Zne=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qne=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Yne=0,pd=[];function Jne(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(Yne++)[0],a=w.useState(xF)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=Rq([t.lockRef.current],(t.shards||[]).map(fk),!0).filter(Boolean);return b.forEach(function(j){return j.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=w.useCallback(function(b,j){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var _=cy(b),x=n.current,S="deltaX"in b?b.deltaX:x[0]-_[0],C="deltaY"in b?b.deltaY:x[1]-_[1],R,V=b.target,k=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in b&&k==="h"&&V.type==="range")return!1;var I=dk(k,V);if(!I)return!0;if(I?R=k:(R=k==="v"?"h":"v",I=dk(k,V)),!I)return!1;if(!r.current&&"changedTouches"in b&&(S||C)&&(r.current=R),!R)return!0;var $=r.current||R;return Kne($,j,b,$==="h"?S:C)},[]),u=w.useCallback(function(b){var j=b;if(!(!pd.length||pd[pd.length-1]!==a)){var _="deltaY"in j?hk(j):cy(j),x=e.current.filter(function(R){return R.name===j.type&&(R.target===j.target||j.target===R.shadowParent)&&Zne(R.delta,_)})[0];if(x&&x.should){j.cancelable&&j.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(fk).filter(Boolean).filter(function(R){return R.contains(j.target)}),C=S.length>0?l(j,S[0]):!o.current.noIsolation;C&&j.cancelable&&j.preventDefault()}}},[]),d=w.useCallback(function(b,j,_,x){var S={name:b,delta:j,target:_,should:x,shadowParent:Xne(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(C){return C!==S})},1)},[]),h=w.useCallback(function(b){n.current=cy(b),r.current=void 0},[]),m=w.useCallback(function(b){d(b.type,hk(b),b.target,l(b,t.lockRef.current))},[]),p=w.useCallback(function(b){d(b.type,cy(b),b.target,l(b,t.lockRef.current))},[]);w.useEffect(function(){return pd.push(a),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",u,md),document.addEventListener("touchmove",u,md),document.addEventListener("touchstart",h,md),function(){pd=pd.filter(function(b){return b!==a}),document.removeEventListener("wheel",u,md),document.removeEventListener("touchmove",u,md),document.removeEventListener("touchstart",h,md)}},[]);var v=t.removeScrollBar,N=t.inert;return w.createElement(w.Fragment,null,N?w.createElement(a,{styles:Qne(s)}):null,v?w.createElement(zne,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Xne(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ere=Cne(yF,Jne);var qg=w.forwardRef(function(t,e){return w.createElement(Cw,wa({},t,{ref:e,sideCar:ere}))});qg.classNames=Cw.classNames;var Nj=["Enter"," "],tre=["ArrowDown","PageUp","Home"],jF=["ArrowUp","PageDown","End"],nre=[...tre,...jF],rre={ltr:[...Nj,"ArrowRight"],rtl:[...Nj,"ArrowLeft"]},sre={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Gg="Menu",[Cp,ire,are]=Vg(Gg),[Lu,NF]=$r(Gg,[are,sf,Ew]),Tw=sf(),SF=Ew(),[ore,Fu]=Lu(Gg),[lre,Kg]=Lu(Gg),EF=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=Tw(e),[u,d]=w.useState(null),h=w.useRef(!1),m=Er(a),p=Du(s);return w.useEffect(()=>{const v=()=>{h.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>h.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),i.jsx(cP,{...l,children:i.jsx(ore,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:d,children:i.jsx(lre,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:o,children:r})})})};EF.displayName=Gg;var cre="MenuAnchor",hP=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Tw(n);return i.jsx(Sw,{...s,...r,ref:e})});hP.displayName=cre;var fP="MenuPortal",[ure,PF]=Lu(fP,{forceMount:void 0}),CF=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Fu(fP,e);return i.jsx(ure,{scope:e,forceMount:n,children:i.jsx(Vr,{present:n||a.open,children:i.jsx(Wg,{asChild:!0,container:s,children:r})})})};CF.displayName=fP;var wi="MenuContent",[dre,mP]=Lu(wi),TF=w.forwardRef((t,e)=>{const n=PF(wi,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Fu(wi,t.__scopeMenu),o=Kg(wi,t.__scopeMenu);return i.jsx(Cp.Provider,{scope:t.__scopeMenu,children:i.jsx(Vr,{present:r||a.open,children:i.jsx(Cp.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(hre,{...s,ref:e}):i.jsx(fre,{...s,ref:e})})})})}),hre=w.forwardRef((t,e)=>{const n=Fu(wi,t.__scopeMenu),r=w.useRef(null),s=pt(e,r);return w.useEffect(()=>{const a=r.current;if(a)return Pw(a)},[]),i.jsx(pP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$e(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fre=w.forwardRef((t,e)=>{const n=Fu(wi,t.__scopeMenu);return i.jsx(pP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mre=nc("MenuContent.ScrollLock"),pP=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:v,disableOutsideScroll:N,...b}=t,j=Fu(wi,n),_=Kg(wi,n),x=Tw(n),S=SF(n),C=ire(n),[R,V]=w.useState(null),k=w.useRef(null),I=pt(e,k,j.onContentChange),$=w.useRef(0),T=w.useRef(""),M=w.useRef(0),D=w.useRef(null),O=w.useRef("right"),B=w.useRef(0),Y=N?qg:w.Fragment,ee=N?{as:mre,allowPinchZoom:!0}:void 0,Z=H=>{var ye,J;const q=T.current+H,X=C().filter(te=>!te.disabled),me=document.activeElement,Ee=(ye=X.find(te=>te.ref.current===me))==null?void 0:ye.textValue,Fe=X.map(te=>te.textValue),Me=Ere(Fe,q,Ee),ue=(J=X.find(te=>te.textValue===Me))==null?void 0:J.ref.current;(function te(ne){T.current=ne,window.clearTimeout($.current),ne!==""&&($.current=window.setTimeout(()=>te(""),1e3))})(q),ue&&setTimeout(()=>ue.focus())};w.useEffect(()=>()=>window.clearTimeout($.current),[]),ww();const z=w.useCallback(H=>{var X,me;return O.current===((X=D.current)==null?void 0:X.side)&&Cre(H,(me=D.current)==null?void 0:me.area)},[]);return i.jsx(dre,{scope:n,searchRef:T,onItemEnter:w.useCallback(H=>{z(H)&&H.preventDefault()},[z]),onItemLeave:w.useCallback(H=>{var q;z(H)||((q=k.current)==null||q.focus(),V(null))},[z]),onTriggerLeave:w.useCallback(H=>{z(H)&&H.preventDefault()},[z]),pointerGraceTimerRef:M,onPointerGraceIntentChange:w.useCallback(H=>{D.current=H},[]),children:i.jsx(Y,{...ee,children:i.jsx(Ug,{asChild:!0,trapped:s,onMountAutoFocus:$e(a,H=>{var q;H.preventDefault(),(q=k.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(zg,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:v,children:i.jsx(mF,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:R,onCurrentTabStopIdChange:V,onEntryFocus:$e(u,H=>{_.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(uP,{role:"menu","aria-orientation":"vertical","data-state":HF(j.open),"data-radix-menu-content":"",dir:_.dir,...x,...b,ref:I,style:{outline:"none",...b.style},onKeyDown:$e(b.onKeyDown,H=>{const X=H.target.closest("[data-radix-menu-content]")===H.currentTarget,me=H.ctrlKey||H.altKey||H.metaKey,Ee=H.key.length===1;X&&(H.key==="Tab"&&H.preventDefault(),!me&&Ee&&Z(H.key));const Fe=k.current;if(H.target!==Fe||!nre.includes(H.key))return;H.preventDefault();const ue=C().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);jF.includes(H.key)&&ue.reverse(),Nre(ue)}),onBlur:$e(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout($.current),T.current="")}),onPointerMove:$e(t.onPointerMove,Tp(H=>{const q=H.target,X=B.current!==H.clientX;if(H.currentTarget.contains(q)&&X){const me=H.clientX>B.current?"right":"left";O.current=me,B.current=H.clientX}}))})})})})})})});TF.displayName=wi;var pre="MenuGroup",gP=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Qe.div,{role:"group",...r,ref:e})});gP.displayName=pre;var gre="MenuLabel",RF=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Qe.div,{...r,ref:e})});RF.displayName=gre;var Xx="MenuItem",mk="menu.itemSelect",Rw=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=w.useRef(null),o=Kg(Xx,t.__scopeMenu),l=mP(Xx,t.__scopeMenu),u=pt(e,a),d=w.useRef(!1),h=()=>{const m=a.current;if(!n&&m){const p=new CustomEvent(mk,{bubbles:!0,cancelable:!0});m.addEventListener(mk,v=>r==null?void 0:r(v),{once:!0}),$3(m,p),p.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(kF,{...s,ref:u,disabled:n,onClick:$e(t.onClick,h),onPointerDown:m=>{var p;(p=t.onPointerDown)==null||p.call(t,m),d.current=!0},onPointerUp:$e(t.onPointerUp,m=>{var p;d.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:$e(t.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||Nj.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Rw.displayName=Xx;var kF=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=mP(Xx,n),l=SF(n),u=w.useRef(null),d=pt(e,u),[h,m]=w.useState(!1),[p,v]=w.useState("");return w.useEffect(()=>{const N=u.current;N&&v((N.textContent??"").trim())},[a.children]),i.jsx(Cp.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:i.jsx(pF,{asChild:!0,...l,focusable:!r,children:i.jsx(Qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:$e(t.onPointerMove,Tp(N=>{r?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(t.onPointerLeave,Tp(N=>o.onItemLeave(N))),onFocus:$e(t.onFocus,()=>m(!0)),onBlur:$e(t.onBlur,()=>m(!1))})})})}),vre="MenuCheckboxItem",IF=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(LF,{scope:t.__scopeMenu,checked:n,children:i.jsx(Rw,{role:"menuitemcheckbox","aria-checked":e0(n)?"mixed":n,...s,ref:e,"data-state":yP(n),onSelect:$e(s.onSelect,()=>r==null?void 0:r(e0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});IF.displayName=vre;var AF="MenuRadioGroup",[yre,xre]=Lu(AF,{value:void 0,onValueChange:()=>{}}),OF=w.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=Er(r);return i.jsx(yre,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(gP,{...s,ref:e})})});OF.displayName=AF;var MF="MenuRadioItem",DF=w.forwardRef((t,e)=>{const{value:n,...r}=t,s=xre(MF,t.__scopeMenu),a=n===s.value;return i.jsx(LF,{scope:t.__scopeMenu,checked:a,children:i.jsx(Rw,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":yP(a),onSelect:$e(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});DF.displayName=MF;var vP="MenuItemIndicator",[LF,wre]=Lu(vP,{checked:!1}),FF=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=wre(vP,n);return i.jsx(Vr,{present:r||e0(a.checked)||a.checked===!0,children:i.jsx(Qe.span,{...s,ref:e,"data-state":yP(a.checked)})})});FF.displayName=vP;var bre="MenuSeparator",$F=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});$F.displayName=bre;var _re="MenuArrow",VF=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Tw(n);return i.jsx(dP,{...s,...r,ref:e})});VF.displayName=_re;var jre="MenuSub",[K1e,zF]=Lu(jre),wm="MenuSubTrigger",UF=w.forwardRef((t,e)=>{const n=Fu(wm,t.__scopeMenu),r=Kg(wm,t.__scopeMenu),s=zF(wm,t.__scopeMenu),a=mP(wm,t.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=a,d={__scopeMenu:t.__scopeMenu},h=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>h,[h]),w.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),i.jsx(hP,{asChild:!0,...d,children:i.jsx(kF,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":HF(n.open),...t,ref:yw(e,s.onTriggerChange),onClick:m=>{var p;(p=t.onClick)==null||p.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$e(t.onPointerMove,Tp(m=>{a.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:$e(t.onPointerLeave,Tp(m=>{var v,N;h();const p=(v=n.content)==null?void 0:v.getBoundingClientRect();if(p){const b=(N=n.content)==null?void 0:N.dataset.side,j=b==="right",_=j?-5:5,x=p[j?"left":"right"],S=p[j?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x,y:p.bottom}],side:b}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:$e(t.onKeyDown,m=>{var v;const p=a.searchRef.current!=="";t.disabled||p&&m.key===" "||rre[r.dir].includes(m.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),m.preventDefault())})})})});UF.displayName=wm;var BF="MenuSubContent",WF=w.forwardRef((t,e)=>{const n=PF(wi,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Fu(wi,t.__scopeMenu),o=Kg(wi,t.__scopeMenu),l=zF(BF,t.__scopeMenu),u=w.useRef(null),d=pt(e,u);return i.jsx(Cp.Provider,{scope:t.__scopeMenu,children:i.jsx(Vr,{present:r||a.open,children:i.jsx(Cp.Slot,{scope:t.__scopeMenu,children:i.jsx(pP,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:$e(t.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:$e(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:$e(t.onKeyDown,h=>{var v;const m=h.currentTarget.contains(h.target),p=sre[o.dir].includes(h.key);m&&p&&(a.onOpenChange(!1),(v=l.trigger)==null||v.focus(),h.preventDefault())})})})})})});WF.displayName=BF;function HF(t){return t?"open":"closed"}function e0(t){return t==="indeterminate"}function yP(t){return e0(t)?"indeterminate":t?"checked":"unchecked"}function Nre(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Sre(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Ere(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Sre(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Pre(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],u=e[o],d=l.x,h=l.y,m=u.x,p=u.y;h>r!=p>r&&n<(m-d)*(r-h)/(p-h)+d&&(s=!s)}return s}function Cre(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Pre(n,e)}function Tp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Tre=EF,Rre=hP,kre=CF,Ire=TF,Are=gP,Ore=RF,Mre=Rw,Dre=IF,Lre=OF,Fre=DF,$re=FF,Vre=$F,zre=VF,Ure=UF,Bre=WF,kw="DropdownMenu",[Wre,Z1e]=$r(kw,[NF]),vs=NF(),[Hre,qF]=Wre(kw),GF=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,u=vs(e),d=w.useRef(null),[h,m]=Js({prop:s,defaultProp:a??!1,onChange:o,caller:kw});return i.jsx(Hre,{scope:e,triggerId:Zs(),triggerRef:d,contentId:Zs(),open:h,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(p=>!p),[m]),modal:l,children:i.jsx(Tre,{...u,open:h,onOpenChange:m,dir:r,modal:l,children:n})})};GF.displayName=kw;var KF="DropdownMenuTrigger",ZF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=qF(KF,n),o=vs(n);return i.jsx(Rre,{asChild:!0,...o,children:i.jsx(Qe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:yw(e,a.triggerRef),onPointerDown:$e(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:$e(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ZF.displayName=KF;var qre="DropdownMenuPortal",QF=t=>{const{__scopeDropdownMenu:e,...n}=t,r=vs(e);return i.jsx(kre,{...r,...n})};QF.displayName=qre;var YF="DropdownMenuContent",JF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=qF(YF,n),a=vs(n),o=w.useRef(!1);return i.jsx(Ire,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:$e(t.onCloseAutoFocus,l=>{var u;o.current||(u=s.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:$e(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JF.displayName=YF;var Gre="DropdownMenuGroup",Kre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Are,{...s,...r,ref:e})});Kre.displayName=Gre;var Zre="DropdownMenuLabel",XF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Ore,{...s,...r,ref:e})});XF.displayName=Zre;var Qre="DropdownMenuItem",e5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Mre,{...s,...r,ref:e})});e5.displayName=Qre;var Yre="DropdownMenuCheckboxItem",t5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Dre,{...s,...r,ref:e})});t5.displayName=Yre;var Jre="DropdownMenuRadioGroup",Xre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Lre,{...s,...r,ref:e})});Xre.displayName=Jre;var ese="DropdownMenuRadioItem",n5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Fre,{...s,...r,ref:e})});n5.displayName=ese;var tse="DropdownMenuItemIndicator",r5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx($re,{...s,...r,ref:e})});r5.displayName=tse;var nse="DropdownMenuSeparator",s5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Vre,{...s,...r,ref:e})});s5.displayName=nse;var rse="DropdownMenuArrow",sse=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(zre,{...s,...r,ref:e})});sse.displayName=rse;var ise="DropdownMenuSubTrigger",i5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Ure,{...s,...r,ref:e})});i5.displayName=ise;var ase="DropdownMenuSubContent",a5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vs(n);return i.jsx(Bre,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a5.displayName=ase;var ose=GF,lse=ZF,cse=QF,o5=JF,l5=XF,c5=e5,u5=t5,d5=n5,h5=r5,f5=s5,m5=i5,p5=a5;function fc(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var use=["color"],dse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,use);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),hse=["color"],xP=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,hse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),fse=["color"],g5=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,fse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),mse=["color"],pse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,mse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gse=["color"],v5=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,gse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),vse=["color"],yse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,vse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xse=["color"],wse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,xse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bse=["color"],_se=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=fc(t,bse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const Sj=ose,Ej=lse,jse=w.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(m5,{ref:s,className:ot("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(v5,{className:"ml-auto h-4 w-4"})]}));jse.displayName=m5.displayName;const Nse=w.forwardRef(({className:t,...e},n)=>i.jsx(p5,{ref:n,className:ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Nse.displayName=p5.displayName;const t0=w.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(cse,{children:i.jsx(o5,{ref:r,sideOffset:e,className:ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));t0.displayName=o5.displayName;const rn=w.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(c5,{ref:r,className:ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));rn.displayName=c5.displayName;const Sse=w.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(u5,{ref:s,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(h5,{children:i.jsx(xP,{className:"h-4 w-4"})})}),e]}));Sse.displayName=u5.displayName;const Ese=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(d5,{ref:r,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(h5,{children:i.jsx(_se,{className:"h-4 w-4 fill-current"})})}),e]}));Ese.displayName=d5.displayName;const Pse=w.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(l5,{ref:r,className:ot("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Pse.displayName=l5.displayName;const pa=w.forwardRef(({className:t,...e},n)=>i.jsx(f5,{ref:n,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));pa.displayName=f5.displayName;var y5={exports:{}},x5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=w;function Cse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tse=typeof Object.is=="function"?Object.is:Cse,Rse=Ph.useState,kse=Ph.useEffect,Ise=Ph.useLayoutEffect,Ase=Ph.useDebugValue;function Ose(t,e){var n=e(),r=Rse({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return Ise(function(){s.value=n,s.getSnapshot=e,g_(s)&&a({inst:s})},[t,n,e]),kse(function(){return g_(s)&&a({inst:s}),t(function(){g_(s)&&a({inst:s})})},[t]),Ase(n),n}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tse(t,n)}catch{return!0}}function Mse(t,e){return e()}var Dse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mse:Ose;x5.useSyncExternalStore=Ph.useSyncExternalStore!==void 0?Ph.useSyncExternalStore:Dse;y5.exports=x5;var wP=y5.exports;function Lse(){return wP.useSyncExternalStore(Fse,()=>!0,()=>!1)}function Fse(){return()=>{}}var bP="Avatar",[$se,Q1e]=$r(bP),[Vse,w5]=$se(bP),b5=w.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=w.useState("idle");return i.jsx(Vse,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Qe.span,{...r,ref:e})})});b5.displayName=bP;var _5="AvatarImage",j5=w.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=w5(_5,n),l=zse(r,a),u=Er(d=>{s(d),o.onImageLoadingStatusChange(d)});return er(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?i.jsx(Qe.img,{...a,ref:e,src:r}):null});j5.displayName=_5;var N5="AvatarFallback",S5=w.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=w5(N5,n),[o,l]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Qe.span,{...s,ref:e}):null});S5.displayName=N5;function pk(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function zse(t,{referrerPolicy:e,crossOrigin:n}){const r=Lse(),s=w.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=w.useState(()=>pk(a,t));return er(()=>{l(pk(a,t))},[a,t]),er(()=>{const u=m=>()=>{l(m)};if(!a)return;const d=u("loaded"),h=u("error");return a.addEventListener("load",d),a.addEventListener("error",h),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",h)}},[a,n,e]),o}var E5=b5,P5=j5,C5=S5;const Do=w.forwardRef(({className:t,...e},n)=>i.jsx(E5,{ref:n,className:ot("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Do.displayName=E5.displayName;const Lo=w.forwardRef(({className:t,...e},n)=>i.jsx(P5,{ref:n,className:ot("aspect-square h-full w-full",t),...e}));Lo.displayName=P5.displayName;const Fo=w.forwardRef(({className:t,...e},n)=>i.jsx(C5,{ref:n,className:ot("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Fo.displayName=C5.displayName;const Use=xw("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ct({className:t,variant:e,...n}){return i.jsx("div",{className:ot(Use({variant:e}),t),...n})}const Bse={},gk=t=>{let e;const n=new Set,r=(h,m)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const v=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(N=>N(e,v))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Bse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,u);return u},Wse=t=>t?gk(t):gk;var T5={exports:{}},R5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw=w,Hse=wP;function qse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gse=typeof Object.is=="function"?Object.is:qse,Kse=Hse.useSyncExternalStore,Zse=Iw.useRef,Qse=Iw.useEffect,Yse=Iw.useMemo,Jse=Iw.useDebugValue;R5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=Zse(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Yse(function(){function u(v){if(!d){if(d=!0,h=v,v=r(v),s!==void 0&&o.hasValue){var N=o.value;if(s(N,v))return m=N}return m=v}if(N=m,Gse(h,v))return N;var b=r(v);return s!==void 0&&s(N,b)?(h=v,N):(h=v,m=b)}var d=!1,h,m,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,s]);var l=Kse(t,a[0],a[1]);return Qse(function(){o.hasValue=!0,o.value=l},[l]),Jse(l),l};T5.exports=R5;var Xse=T5.exports;const eie=zo(Xse),k5={},{useDebugValue:tie}=oe,{useSyncExternalStoreWithSelector:nie}=eie;let vk=!1;const rie=t=>t;function sie(t,e=rie,n){(k5?"production":void 0)!=="production"&&n&&!vk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vk=!0);const r=nie(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tie(r),r}const yk=t=>{(k5?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Wse(t):t,n=(r,s)=>sie(e,r,s);return Object.assign(n,e),n},af=t=>t?yk(t):yk,Tc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},iie=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},aie=async(t,e,n,r,s,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:s,messagePreview:a,conversationUrl:l})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(l){console.error("Error sending email notification:",l)}},Aw=af((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const s=Pn(Ut(Ue,"conversations"),lr("participants","array-contains",n)),a=AR(s,o=>{const l=[];o.docs.forEach(u=>{const d=u.data();d.deletedFor&&d.deletedFor.includes(n)||d.blockedBy&&d.blockedBy.includes(n)||l.push({id:u.id,participants:d.participants||[],listingId:d.listingId||"",listingTitle:d.listingTitle||"",listingImage:d.listingImage,listingPrice:d.listingPrice||0,participantDetails:d.participantDetails||{},lastMessage:d.lastMessage?{...d.lastMessage,sentAt:Tc(d.lastMessage.sentAt)}:void 0,unreadCount:d.unreadCount||{},blockedBy:d.blockedBy||[],deletedFor:d.deletedFor||[],status:d.status||"active",createdAt:Tc(d.createdAt),updatedAt:Tc(d.updatedAt)})}),l.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),je.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(s){console.error("Error setting up conversations listener:",s),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const s=Pn(Ut(Ue,"conversations",n,"messages")),a=AR(s,o=>{const l=o.docs.map(u=>{const d=u.data();return{id:u.id,conversationId:n,senderId:d.senderId,senderName:d.senderName,senderAvatar:d.senderAvatar,text:d.text,type:d.type||"text",attachments:d.attachments||[],seen:d.seen||!1,sentAt:Tc(d.sentAt)}});l.sort((u,d)=>u.sentAt.getTime()-d.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),je.error("Erreur lors du chargement des messages")})}catch(s){console.error("Error setting up messages listener:",s)}},sendMessage:async(n,r,s,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:s,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(s)){je.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:s,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:mr()};console.log("Adding message to Firestore:",u);const d=await Xl(Ut(Ue,"conversations",n,"messages"),u);console.log("Message added with ID:",d.id);const h=l.participants.filter(v=>v!==s),m={};h.forEach(v=>{m[`unreadCount.${v}`]=(l.unreadCount[v]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:mr(),senderId:s,senderName:a},updatedAt:mr(),...m});const p=Object.fromEntries(Object.entries(m).filter(([,v])=>v!==void 0));await En(_t(Ue,"conversations",n),{lastMessage:{text:r,sentAt:mr(),senderId:s,senderName:a},updatedAt:mr(),...p}),h.forEach(async v=>{const N=l.participantDetails[v];if(N&&N.email){const b=l.participantDetails[s];await aie(N.email,N.name,a,(b==null?void 0:b.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),je.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,s,a,o,l,u,d,h)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const m=iie(o,l,n);console.log("Generated conversation ID:",m);const p=await Ks(_t(Ue,"conversations",m));if(p.exists()){console.log("Conversation already exists, sending message");const j=p.data(),_={id:m,participants:j.participants||[],listingId:j.listingId||"",listingTitle:j.listingTitle||"",listingImage:j.listingImage,listingPrice:j.listingPrice||0,participantDetails:j.participantDetails||{},lastMessage:j.lastMessage?{...j.lastMessage,sentAt:Tc(j.lastMessage.sentAt)}:void 0,unreadCount:j.unreadCount||{},blockedBy:j.blockedBy||[],deletedFor:j.deletedFor||[],status:j.status||"active",createdAt:Tc(j.createdAt),updatedAt:Tc(j.updatedAt)};return t({currentConversation:_}),await e().sendMessage(m,h,o,u.displayName,u.photoURL),m}console.log("Creating new conversation");const v={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:s,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[l]:{name:d.sellerName,avatar:d.sellerAvatar||null,university:d.sellerUniversity,verified:d.sellerVerified||!1,email:d.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:mr(),updatedAt:mr()};console.log("Setting conversation document:",v);const N=Object.fromEntries(Object.entries(v).filter(([,j])=>j!==void 0));await Wc(_t(Ue,"conversations",m),N);const b={id:m,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:s,participantDetails:v.participantDetails,unreadCount:v.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:b}),console.log("Sending initial message"),await e().sendMessage(m,h,o,u.displayName,u.photoURL),m}catch(m){throw console.error("Error creating conversation:",m),je.error("Erreur lors de la création de la conversation"),m}},markMessagesAsSeen:async(n,r)=>{try{const s=_t(Ue,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await En(s,a)}catch(s){console.error("Error marking messages as seen:",s)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const s=_t(Ue,"conversations",n),a=await Ks(s);if(a.exists()){const l=a.data().blockedBy||[];if(!l.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...l,r],status:"blocked",updatedAt:mr()}).filter(([,d])=>d!==void 0));await En(s,u),je.success("Utilisateur bloqué")}}}catch(s){console.error("Error blocking user:",s),je.error("Erreur lors du blocage")}},reportUser:async(n,r,s,a,o)=>{try{const l={reporterId:r,reportedUserId:s,conversationId:n,reason:a,description:o,status:"pending",createdAt:mr()},u=Object.fromEntries(Object.entries(l).filter(([,d])=>d!==void 0));await Xl(Ut(Ue,"reports"),u),je.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),je.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const s=_t(Ue,"conversations",n),a=await Ks(s);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const u=[...l,r];if(u.length===o.participants.length)await bh(s);else{const d=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:mr()}).filter(([,h])=>h!==void 0));await En(s,d)}je.success("Conversation supprimée")}}}catch(s){console.error("Error deleting conversation:",s),je.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:s}=e();return s.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),oie={};function lie(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Rp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Rp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Rp(r)(n)}}}},cie=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,_)=>({..._,...j}),...e},o=!1;const l=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...j)},r,s);const h=Rp(a.serialize),m=()=>{const j=a.partialize({...r()});let _;const x=h({state:j,version:a.version}).then(S=>d.setItem(a.name,S)).catch(S=>{_=S});if(_)throw _;return x},p=s.setState;s.setState=(j,_)=>{p(j,_),m()};const v=t((...j)=>{n(...j),m()},r,s);let N;const b=()=>{var j;if(!d)return;o=!1,l.forEach(x=>x(r()));const _=((j=a.onRehydrateStorage)==null?void 0:j.call(a,r()))||void 0;return Rp(d.getItem.bind(d))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var S;return N=a.merge(x,(S=r())!=null?S:v),n(N,!0),m()}).then(()=>{_==null||_(N,void 0),o=!0,u.forEach(x=>x(N))}).catch(x=>{_==null||_(void 0,x)})};return s.persist={setOptions:j=>{a={...a,...j},j.getStorage&&(d=j.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:j=>(l.add(j),()=>{l.delete(j)}),onFinishHydration:j=>(u.add(j),()=>{u.delete(j)})},b(),N||v},uie=(t,e)=>(n,r,s)=>{let a={storage:lie(()=>localStorage),partialize:b=>b,version:0,merge:(b,j)=>({...j,...b}),...e},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,s);const h=()=>{const b=a.partialize({...r()});return d.setItem(a.name,{state:b,version:a.version})},m=s.setState;s.setState=(b,j)=>{m(b,j),h()};const p=t((...b)=>{n(...b),h()},r,s);s.getInitialState=()=>p;let v;const N=()=>{var b,j;if(!d)return;o=!1,l.forEach(x=>{var S;return x((S=r())!=null?S:p)});const _=((j=a.onRehydrateStorage)==null?void 0:j.call(a,(b=r())!=null?b:p))||void 0;return Rp(d.getItem.bind(d))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var S;const[C,R]=x;if(v=a.merge(R,(S=r())!=null?S:p),n(v,!0),C)return h()}).then(()=>{_==null||_(v,void 0),v=r(),o=!0,u.forEach(x=>x(v))}).catch(x=>{_==null||_(void 0,x)})};return s.persist={setOptions:b=>{a={...a,...b},b.storage&&(d=b.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||N(),v||p},die=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((oie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),cie(t,e)):uie(t,e),hie=die,of=af()(hie((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n.id);t(s?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),je.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n);s&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-s.price*s.quantity})},updateQuantity:(n,r)=>{const{cart:s}=e(),a=s.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:s.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),fie=()=>{var x,S;const{currentUser:t,userProfile:e,logout:n}=bn(),{conversations:r,fetchConversations:s}=Aw(),{getCartItemCount:a}=of(),{theme:o,setTheme:l}=rW(),u=xr(),[d,h]=w.useState(""),m=oe.useMemo(()=>!t||!r.length?0:r.reduce((C,R)=>{const V=R.unreadCount[t.uid]||0;return C+V},0),[r,t]);w.useEffect(()=>{t&&s(t.uid)},[t,s]);const p=C=>{C.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},v=async()=>{try{await n(),u("/")}catch(C){console.error("Logout error:",C)}},N=a(),b=localStorage.getItem("pendingUserData"),j=b?JSON.parse(b):{};let _="";return e!=null&&e.firstName&&(e!=null&&e.lastName)?_=`${e.firstName} ${e.lastName}`:e!=null&&e.displayName?_=e.displayName:t!=null&&t.displayName?_=t.displayName:t!=null&&t.email?_=t.email.split("@")[0]:_="Utilisateur",e!=null&&e.university||j.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||j.university==="Autre université"&&j.otherUniversity)&&(e&&e.otherUniversity||j.otherUniversity),w.useEffect(()=>{b&&(t!=null&&t.emailVerified)},[t,b]),i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:i.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[i.jsxs(ze,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(Jh,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("form",{onSubmit:p,className:"flex-1 max-w-lg mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{type:"text",placeholder:"Rechercher entre étudiants...",value:d,onChange:C=>h(C.target.value),className:"pl-10 w-full"})]})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[i.jsx(DX,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(TX,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?i.jsxs(i.Fragment,{children:[i.jsx(re,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:i.jsxs(ze,{to:"/create",children:[i.jsx(eu,{className:"w-4 h-4 mr-2"}),"Publier"]})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(re,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/cart",children:i.jsx(tc,{className:"w-4 h-4"})})}),N>0&&i.jsx(ct,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:N>99?"99+":N})]}),i.jsx(re,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/saved-searches",children:i.jsx(Li,{className:"w-4 h-4"})})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(re,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/messages",children:i.jsx(Cn,{className:"w-4 h-4"})})}),m>0&&i.jsx(ct,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:m>99?"99+":m})]}),i.jsxs(Sj,{children:[i.jsx(Ej,{asChild:!0,children:i.jsxs(re,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[i.jsxs(Do,{className:"h-8 w-8",children:[i.jsx(Lo,{src:e==null?void 0:e.photoURL}),i.jsx(Fo,{children:((S=(x=e==null?void 0:e.displayName)==null?void 0:x[0])==null?void 0:S.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Bt,{className:"w-2 h-2 text-white"})})]})}),i.jsxs(t0,{className:"w-64",align:"end",children:[i.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:i.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium",children:_}),(e==null?void 0:e.isVerified)&&i.jsxs(ct,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[i.jsx(Bt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&i.jsx("div",{children:i.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Hi,{className:"w-3 h-3 text-green-600"}),i.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/profile",className:"cursor-pointer",children:[i.jsx(ms,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/settings",className:"cursor-pointer",children:[i.jsx(pw,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/orders",className:"cursor-pointer",children:[i.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/payments",className:"cursor-pointer",children:[i.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/saved-searches",className:"cursor-pointer",children:[i.jsx(YE,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(ct,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/impact",className:"cursor-pointer",children:[i.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/help",className:"cursor-pointer",children:[i.jsx(Un,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/safety",className:"cursor-pointer",children:[i.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),i.jsx(pa,{}),i.jsxs(rn,{onClick:v,className:"cursor-pointer text-destructive",children:[i.jsx(EX,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),i.jsx(re,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:i.jsx(ze,{to:"/create",children:i.jsx(eu,{className:"w-4 h-4"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx(re,{variant:"ghost",asChild:!0,children:i.jsx(ze,{to:"/auth",children:"Se connecter"})}),i.jsx(re,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:i.jsx(ze,{to:"/auth",children:"Rejoindre"})})]}),i.jsxs(Sj,{children:[i.jsx(Ej,{asChild:!0,className:"sm:hidden",children:i.jsx(re,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:i.jsx(CX,{className:"w-5 h-5"})})}),i.jsxs(t0,{className:"w-56",align:"end",children:[i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),i.jsx(rn,{asChild:!0,children:i.jsx(ze,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(pa,{}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/create",className:"cursor-pointer",children:[i.jsx(eu,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/cart",className:"cursor-pointer relative",children:[i.jsx(tc,{className:"w-4 h-4 mr-2 "}),"Panier",N>0&&i.jsx(ct,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:N})]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(ct,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function mie({icon:t,size:e=32,gradientId:n}){return i.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),i.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),i.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const pie=()=>i.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:i.jsxs("div",{className:"container mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(mie,{icon:Jh,gradientId:"gradient-footer",size:32}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(wX,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(VX,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(NX,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Navigation"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(ze,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),i.jsx("li",{children:i.jsx(ze,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),i.jsx("li",{children:i.jsx(ze,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Bt,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Étudiants 100% vérifiés"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Hi,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Impact écologique mesuré"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(As,{className:"w-4 h-4"}),i.jsx("span",{children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),i.jsx(ze,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),i.jsx(ze,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),i.jsx(ze,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),i.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),i.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[i.jsx(ze,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),i.jsx(ze,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),i.jsx(ze,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),i.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[i.jsx(Ps,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),ge=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ot("rounded-xl border bg-card text-card-foreground shadow",t),...e}));ge.displayName="Card";const et=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ot("flex flex-col space-y-1.5 p-6",t),...e}));et.displayName="CardHeader";const rt=w.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:ot("font-semibold leading-none tracking-tight",t),...e}));rt.displayName="CardTitle";const Rt=w.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:ot("text-sm text-muted-foreground",t),...e}));Rt.displayName="CardDescription";const ve=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ot("p-6 pt-0",t),...e}));ve.displayName="CardContent";const I5=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ot("flex items-center p-6 pt-0",t),...e}));I5.displayName="CardFooter";const n0=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(n0).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=n0(t[n]);r!==void 0&&(e[n]=r)}),e}return t},xk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},v_=t=>{var n,r,s,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:xk(e.createdAt),updatedAt:xk(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((s=e.location)==null?void 0:s.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},Zg=af((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:s,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=Pn(Ut(Ue,"listings"),RR("createdAt","desc"),yi(20));!r&&a&&(o=Pn(o,UY(a)));const l=await Zn(o);let u=l.docs.map(v_);if(n.category&&n.category!=="all"&&(u=u.filter(h=>h.category===n.category)),n.minPrice!==void 0&&(u=u.filter(h=>h.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(h=>h.price<=n.maxPrice)),n.query){const h=n.query.toLowerCase();u=u.filter(m=>{var p;return m.title.toLowerCase().includes(h)||m.description.toLowerCase().includes(h)||((p=m.tags)==null?void 0:p.some(v=>v.toLowerCase().includes(h)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(h=>n.condition.includes(h.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((h,m)=>h.price-m.price);break;case"price-desc":u.sort((h,m)=>m.price-h.price);break;case"date":default:u.sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime());break}const d=l.docs[l.docs.length-1];t({listings:r?u:[...s,...u],lastDoc:d,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),je.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=Pn(Ut(Ue,"listings"),RR("createdAt","desc"),yi(6)),r=await Zn(n);console.log(`📊 Found ${r.docs.length} documents`);const s=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=v_(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${s.length} featured listings`),t({featuredListings:s})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=_t(Ue,"listings",n),s=await Ks(r);if(s.exists()){const a=v_(s);await En(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),je.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),je.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,s,a,o,l,u;try{const d=n0({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((s=n.location)==null?void 0:s.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",d);const h=await Xl(Ut(Ue,"listings"),d);return je.success("Annonce créée avec succès !"),h.id}catch(d){throw console.error("Error creating listing:",d),je.error("Erreur lors de la création de l'annonce"),d}},updateListing:async(n,r)=>{try{const s=_t(Ue,"listings",n),a=n0({...r,updatedAt:new Date});await En(s,a);const{listings:o,currentListing:l}=e(),u=o.map(d=>d.id===n?{...d,...r}:d);t({listings:u,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),je.success("Annonce mise à jour !")}catch(s){throw console.error("Error updating listing:",s),je.error("Erreur lors de la mise à jour"),s}},deleteListing:async n=>{try{await bh(_t(Ue,"listings",n));const{listings:r}=e(),s=r.filter(a=>a.id!==n);t({listings:s}),je.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),je.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),wk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},A5=af((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=Pn(Ut(Ue,"favorites"),lr("userId","==",n),yi(100)),s=await Zn(r),a=[],o=new Set;s.forEach(l=>{const u=l.data(),d={id:l.id,...u,createdAt:wk(u.createdAt),updatedAt:wk(u.updatedAt)};a.push(d),o.add(d.listingId)}),a.sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),je.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var s;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){je.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((s=r.images)==null?void 0:s[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:mr(),updatedAt:mr()},l={id:(await Xl(Ut(Ue,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:d}=e(),h=new Set(d);h.add(r.id),t({favorites:[l,...u],userFavoriteIds:h});try{await En(_t(Ue,"listings",r.id),{likes:(r.likes||0)+1})}catch(m){console.error("Erreur lors de la mise à jour du compteur de likes:",m)}je.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),je.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const s=Pn(Ut(Ue,"favorites"),lr("userId","==",n),lr("listingId","==",r)),a=await Zn(s);if(a.empty){je.info("Pas dans vos favoris");return}const o=a.docs[0];await bh(_t(Ue,"favorites",o.id));const{favorites:l,userFavoriteIds:u}=e(),d=new Set(u);d.delete(r),t({favorites:l.filter(h=>h.listingId!==r),userFavoriteIds:d});try{const h=_t(Ue,"listings",r),m=await Zn(Pn(Ut(Ue,"listings"),lr("__name__","==",r)));if(!m.empty){const p=m.docs[0].data().likes||0;await En(h,{likes:Math.max(0,p-1)})}}catch(h){console.error("Erreur lors de la mise à jour du compteur de likes:",h)}je.success("Retiré des favoris")}catch(s){console.error("Erreur lors de la suppression des favoris:",s),je.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:s,addToFavorites:a,removeFromFavorites:o}=e();s(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),O5=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=bn(),{isFavorite:s,toggleFavorite:a}=A5(),o=xr(),l=s(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!r){je.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(re,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${l?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":l?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(Qr,{className:`w-4 h-4 ${l?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:l?"currentColor":"none"})})},M5=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const s=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),je.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(re,{variant:"ghost",size:"icon",onClick:s,className:`${a()} ${r}`,"aria-label":"Partager",children:i.jsx(gw,{className:"w-4 h-4"})})};function yt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ms(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ls(t,e){const n=yt(t);return isNaN(e)?Ms(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Xi(t,e){const n=yt(t);if(isNaN(e))return Ms(t,NaN);if(!e)return n;const r=n.getDate(),s=Ms(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const _P=6048e5,gie=864e5,uy=43200,bk=1440;let vie={};function lf(){return vie}function Ua(t,e){var l,u,d,h;const n=lf(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=yt(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function wu(t){return Ua(t,{weekStartsOn:1})}function D5(t){const e=yt(t),n=e.getFullYear(),r=Ms(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=wu(r),a=Ms(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=wu(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ch(t){const e=yt(t);return e.setHours(0,0,0,0),e}function Th(t){const e=yt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ea(t,e){const n=Ch(t),r=Ch(e),s=+n-Th(n),a=+r-Th(r);return Math.round((s-a)/gie)}function yie(t){const e=D5(t),n=Ms(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),wu(n)}function Pj(t,e){const n=e*7;return ls(t,n)}function xie(t,e){return Xi(t,e*12)}function wie(t){let e;return t.forEach(function(n){const r=yt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function bie(t){let e;return t.forEach(n=>{const r=yt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Gy(t,e){const n=yt(t),r=yt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function _ie(t){return Ms(t,Date.now())}function Cs(t,e){const n=Ch(t),r=Ch(e);return+n==+r}function jP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jie(t){if(!jP(t)&&typeof t!="number")return!1;const e=yt(t);return!isNaN(Number(e))}function Rh(t,e){const n=yt(t),r=yt(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function Nie(t,e,n){const r=Ua(t,n),s=Ua(e,n),a=+r-Th(r),o=+s-Th(s);return Math.round((a-o)/_P)}function Sie(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Eie(t,e){return+yt(t)-+yt(e)}function Pie(t){const e=yt(t);return e.setHours(23,59,59,999),e}function Ow(t){const e=yt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Cie(t){const e=yt(t);return+Pie(e)==+Ow(e)}function Tie(t,e){const n=yt(t),r=yt(e),s=Gy(n,r),a=Math.abs(Rh(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=Gy(n,r)===-s;Cie(yt(t))&&a===1&&Gy(t,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function Rie(t,e,n){const r=Eie(t,e)/1e3;return Sie(n==null?void 0:n.roundingMethod)(r)}function Os(t){const e=yt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function L5(t){const e=yt(t),n=Ms(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function NP(t,e){var l,u,d,h;const n=lf(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=yt(t),a=s.getDay(),o=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function F5(t){return NP(t,{weekStartsOn:1})}const kie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Iie=(t,e,n)=>{let r;const s=kie[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function sh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Aie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Die={date:sh({formats:Aie,defaultWidth:"full"}),time:sh({formats:Oie,defaultWidth:"full"}),dateTime:sh({formats:Mie,defaultWidth:"full"})},Lie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fie=(t,e,n,r)=>Lie[t];function ba(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const $ie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qie={ordinalNumber:Hie,era:ba({values:$ie,defaultWidth:"wide"}),quarter:ba({values:Vie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ba({values:zie,defaultWidth:"wide"}),day:ba({values:Uie,defaultWidth:"wide"}),dayPeriod:ba({values:Bie,defaultWidth:"wide",formattingValues:Wie,defaultFormattingWidth:"wide"})};function _a(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?Kie(l,m=>m.test(o)):Gie(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function Gie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Kie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function $5(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const Zie=/^(\d+)(th|st|nd|rd)?/i,Qie=/\d+/i,Yie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jie={any:[/^b/i,/^(a|c)/i]},Xie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eae={any:[/1/i,/2/i,/3/i,/4/i]},tae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oae={ordinalNumber:$5({matchPattern:Zie,parsePattern:Qie,valueCallback:t=>parseInt(t,10)}),era:_a({matchPatterns:Yie,defaultMatchWidth:"wide",parsePatterns:Jie,defaultParseWidth:"any"}),quarter:_a({matchPatterns:Xie,defaultMatchWidth:"wide",parsePatterns:eae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_a({matchPatterns:tae,defaultMatchWidth:"wide",parsePatterns:nae,defaultParseWidth:"any"}),day:_a({matchPatterns:rae,defaultMatchWidth:"wide",parsePatterns:sae,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:iae,defaultMatchWidth:"any",parsePatterns:aae,defaultParseWidth:"any"})},SP={code:"en-US",formatDistance:Iie,formatLong:Die,formatRelative:Fie,localize:qie,match:oae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lae(t){const e=yt(t);return Ea(e,L5(e))+1}function V5(t){const e=yt(t),n=+wu(e)-+yie(e);return Math.round(n/_P)+1}function z5(t,e){var h,m,p,v;const n=yt(t),r=n.getFullYear(),s=lf(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(p=s.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=Ms(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Ua(o,e),u=Ms(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=Ua(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function cae(t,e){var l,u,d,h;const n=lf(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=z5(t,e),a=Ms(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ua(a,e)}function U5(t,e){const n=yt(t),r=+Ua(n,e)-+cae(n,e);return Math.round(r/_P)+1}function Zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ol={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Zt(n+1,2)},d(t,e){return Zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Zt(t.getHours()%12||12,e.length)},H(t,e){return Zt(t.getHours(),e.length)},m(t,e){return Zt(t.getMinutes(),e.length)},s(t,e){return Zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Zt(s,e.length)}},gd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_k={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ol.y(t,e)},Y:function(t,e,n,r){const s=z5(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Zt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Zt(a,e.length)},R:function(t,e){const n=D5(t);return Zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ol.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=U5(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Zt(s,e.length)},I:function(t,e,n){const r=V5(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ol.d(t,e)},D:function(t,e,n){const r=lae(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Zt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Zt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Zt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=gd.noon:r===0?s=gd.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=gd.evening:r>=12?s=gd.afternoon:r>=4?s=gd.morning:s=gd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ol.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ol.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ol.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ol.s(t,e)},S:function(t,e){return ol.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Nk(r);case"XXXX":case"XX":return Mc(r);case"XXXXX":case"XXX":default:return Mc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Nk(r);case"xxxx":case"xx":return Mc(r);case"xxxxx":case"xxx":default:return Mc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jk(r,":");case"OOOO":default:return"GMT"+Mc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jk(r,":");case"zzzz":default:return"GMT"+Mc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Zt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Zt(r,e.length)}};function jk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+Zt(a,2)}function Nk(t,e){return t%60===0?(t>0?"-":"+")+Zt(Math.abs(t)/60,2):Mc(t,e)}function Mc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Zt(Math.trunc(r/60),2),a=Zt(r%60,2);return n+s+e+a}const Sk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},B5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},uae=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Sk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Sk(r,e)).replace("{{time}}",B5(s,e))},dae={p:B5,P:uae},hae=/^D+$/,fae=/^Y+$/,mae=["D","DD","YY","YYYY"];function pae(t){return hae.test(t)}function gae(t){return fae.test(t)}function vae(t,e,n){const r=yae(t,e,n);if(console.warn(r),mae.includes(t))throw new RangeError(r)}function yae(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bae=/^'([^]*?)'?$/,_ae=/''/g,jae=/[a-zA-Z]/;function vr(t,e,n){var h,m,p,v,N,b,j,_;const r=lf(),s=(n==null?void 0:n.locale)??r.locale??SP,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((_=(j=r.locale)==null?void 0:j.options)==null?void 0:_.weekStartsOn)??0,l=yt(t);if(!jie(l))throw new RangeError("Invalid time value");let u=e.match(wae).map(x=>{const S=x[0];if(S==="p"||S==="P"){const C=dae[S];return C(x,s.formatLong)}return x}).join("").match(xae).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const S=x[0];if(S==="'")return{isToken:!1,value:Nae(x)};if(_k[S])return{isToken:!0,value:x};if(S.match(jae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return u.map(x=>{if(!x.isToken)return x.value;const S=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&gae(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&pae(S))&&vae(S,e,String(t));const C=_k[S[0]];return C(l,S,s.localize,d)}).join("")}function Nae(t){const e=t.match(bae);return e?e[1].replace(_ae,"'"):t}function Sae(t,e,n){const r=lf(),s=(n==null?void 0:n.locale)??r.locale??SP,a=2520,o=Gy(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,d;o>0?(u=yt(e),d=yt(t)):(u=yt(t),d=yt(e));const h=Rie(d,u),m=(Th(d)-Th(u))/1e3,p=Math.round((h-m)/60);let v;if(p<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<bk){const N=Math.round(p/60);return s.formatDistance("aboutXHours",N,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<uy){const N=Math.round(p/bk);return s.formatDistance("xDays",N,l)}else if(p<uy*2)return v=Math.round(p/uy),s.formatDistance("aboutXMonths",v,l)}if(v=Tie(d,u),v<12){const N=Math.round(p/uy);return s.formatDistance("xMonths",N,l)}else{const N=v%12,b=Math.trunc(v/12);return N<3?s.formatDistance("aboutXYears",b,l):N<9?s.formatDistance("overXYears",b,l):s.formatDistance("almostXYears",b+1,l)}}function cf(t,e){return Sae(t,_ie(t),e)}function Eae(t){const e=yt(t),n=e.getFullYear(),r=e.getMonth(),s=Ms(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Pae(t){return Math.trunc(+yt(t)/1e3)}function Cae(t){const e=yt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Tae(t,e){return Nie(Cae(t),Os(t),e)+1}function Cj(t,e){const n=yt(t),r=yt(e);return n.getTime()>r.getTime()}function W5(t,e){const n=yt(t),r=yt(e);return+n<+r}function EP(t,e){const n=yt(t),r=yt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Rae(t,e){const n=yt(t),r=yt(e);return n.getFullYear()===r.getFullYear()}function y_(t,e){return ls(t,-e)}function x_(t,e){const n=yt(t),r=n.getFullYear(),s=n.getDate(),a=Ms(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Eae(a);return n.setMonth(e,Math.min(s,o)),n}function Ek(t,e){const n=yt(t);return isNaN(+n)?Ms(t,NaN):(n.setFullYear(e),n)}const kae={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Iae=(t,e,n)=>{let r;const s=kae[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Aae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Oae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Mae={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Dae={date:sh({formats:Aae,defaultWidth:"full"}),time:sh({formats:Oae,defaultWidth:"full"}),dateTime:sh({formats:Mae,defaultWidth:"full"})},Lae={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Fae=(t,e,n,r)=>Lae[t],$ae={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Vae={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},zae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Uae={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Bae={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Wae=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},Hae=["MMM","MMMM"],qae={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&Hae.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Wae,era:ba({values:$ae,defaultWidth:"wide"}),quarter:ba({values:Vae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ba({values:zae,defaultWidth:"wide"}),day:ba({values:Uae,defaultWidth:"wide"}),dayPeriod:ba({values:Bae,defaultWidth:"wide"})},Gae=/^(\d+)(ième|ère|ème|er|e)?/i,Kae=/\d+/i,Zae={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Qae={any:[/^av/i,/^ap/i]},Yae={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Jae={any:[/1/i,/2/i,/3/i,/4/i]},Xae={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},eoe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},toe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},noe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},roe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},soe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},ioe={ordinalNumber:$5({matchPattern:Gae,parsePattern:Kae,valueCallback:t=>parseInt(t)}),era:_a({matchPatterns:Zae,defaultMatchWidth:"wide",parsePatterns:Qae,defaultParseWidth:"any"}),quarter:_a({matchPatterns:Yae,defaultMatchWidth:"wide",parsePatterns:Jae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_a({matchPatterns:Xae,defaultMatchWidth:"wide",parsePatterns:eoe,defaultParseWidth:"any"}),day:_a({matchPatterns:toe,defaultMatchWidth:"wide",parsePatterns:noe,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:roe,defaultMatchWidth:"any",parsePatterns:soe,defaultParseWidth:"any"})},Yr={code:"fr",formatDistance:Iae,formatLong:Dae,formatRelative:Fae,localize:qae,match:ioe,options:{weekStartsOn:1,firstWeekContainsDate:4}},kp=({listing:t})=>{var m,p,v,N,b,j;const e=(_,x)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const S=x;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:S}).format(_)}catch{return`${_} €`}},n=_=>{switch(_){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=_=>{switch(_){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return _}},s=()=>{switch(t.transactionType){case"donation":return i.jsx(Nh,{className:"w-3 h-3"});case"exchange":return i.jsx(Ao,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=_=>{try{let x;if(!_)return"Date inconnue";if(_ instanceof Date)x=_;else if(typeof _=="string"||typeof _=="number")x=new Date(_);else if(_&&typeof _.toDate=="function")x=_.toDate();else if(_&&typeof _=="object"&&"seconds"in _)x=new Date(_.seconds*1e3);else return"Date inconnue";return isNaN(x.getTime())?"Date inconnue":cf(x,{addSuffix:!0,locale:Yr})}catch{return"Date inconnue"}},l=t.price||0,u=t.currency||"EUR",d=t.condition||"good",h=t.transactionType||"sale";return i.jsxs(ge,{className:"group relative bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[i.jsx(ze,{to:`/listing/${t.id}`,className:"block",children:i.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[i.jsx("img",{src:((m=t.images)==null?void 0:m[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[i.jsx(O5,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),i.jsx(M5,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),h!=="sale"&&i.jsxs(ct,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[s(),i.jsx("span",{className:"ml-1.5 text-sm",children:h==="donation"?"Don":"Troc"})]}),h==="sale"&&i.jsx(ct,{className:`absolute top-3 left-3 ${n(d)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(d)}),t.environmentalImpact&&i.jsxs(ct,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[i.jsx(Hi,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&i.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),i.jsxs(ve,{className:"p-6 space-y-4",children:[i.jsxs(ze,{to:`/listing/${t.id}`,className:"block",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`text-2xl font-bold ${h==="donation"?"text-green-600":h==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(l,u)}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[i.jsx(jh,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:t.views||0})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),h==="exchange"&&t.exchangeFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[i.jsx(Ao,{className:"w-4 h-4 text-purple-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[i.jsx(Zr,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((p=t.location)==null?void 0:p.campus)||((v=t.location)!=null&&v.city&&((N=t.location)!=null&&N.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[i.jsx(Jn,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs(Do,{className:"w-9 h-9 border-2 border-gray-100",children:[i.jsx(Lo,{src:t.sellerAvatar}),i.jsx(Fo,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((j=(b=t.sellerName)==null?void 0:b[0])==null?void 0:j.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&i.jsx(Bt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),i.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Université non spécifiée"})})]})]}),t.aiPriceEstimate&&h==="sale"&&i.jsx(ct,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var H5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pk=oe.createContext&&oe.createContext(H5),aoe=["attr","size","title"];function ooe(t,e){if(t==null)return{};var n=loe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function loe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r0.apply(this,arguments)}function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function s0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){coe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function coe(t,e,n){return e=uoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uoe(t){var e=doe(t,"string");return typeof e=="symbol"?e:e+""}function doe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q5(t){return t&&t.map((e,n)=>oe.createElement(e.tag,s0({key:n},e.attr),q5(e.child)))}function wr(t){return e=>oe.createElement(hoe,r0({attr:s0({},t.attr)},e),q5(t.child))}function hoe(t){var e=n=>{var{attr:r,size:s,title:a}=t,o=ooe(t,aoe),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),oe.createElement("svg",r0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:s0(s0({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&oe.createElement("title",null,a),t.children)};return Pk!==void 0?oe.createElement(Pk.Consumer,null,n=>e(n)):e(H5)}function foe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function moe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function poe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function goe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function voe(t){return wr({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function yoe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function xoe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function woe(t){return wr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const boe=()=>{const[t,e]=w.useState(""),n=xr(),r=s=>{s.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return i.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[i.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:i.jsx(Or,{className:"w-5 h-5"})}),i.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:s=>e(s.target.value),"aria-label":"Rechercher"}),i.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},_oe={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},joe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),Noe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),Soe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),Eoe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),Poe=[{id:"electronics",name:"Électronique",icon:goe,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:moe,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:foe,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:poe,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:voe,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:yoe,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:woe,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:xoe,color:"text-blue-600",description:"Échanges de services et objets"}],Coe=[{icon:Bt,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:Eoe,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:Hi,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:p3,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],Toe=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:joe,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:Noe,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:Soe,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],Roe=()=>{const{featuredListings:t,fetchFeaturedListings:e}=Zg();return w.useEffect(()=>{e()},[e]),i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Bienvenue sur StudyMarket"}),i.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:i.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[i.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:i.jsxs(ct,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[i.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),i.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),i.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),i.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:i.jsx(boe,{})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Toe.map((n,r)=>i.jsx(ze,{to:n.link,className:"group",children:i.jsx(ge,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:i.jsx(n.icon,{})}),i.jsx("h3",{className:"font-semibold mb-1",children:n.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(re,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:i.jsxs(ze,{to:"/listings",children:["Parcourir les annonces",i.jsx(Np,{className:"w-4 h-4 ml-2"})]})}),i.jsx(re,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:i.jsx(ze,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),i.jsx("section",{className:"py-10 sm:py-16 px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),i.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Poe.map(n=>{let r;return n.id==="jobs"?r="/jobs":n.id==="housing"?r="/housing":r=`/listings?category=${n.id}`,i.jsx(ze,{to:r,className:"group",children:i.jsx(ge,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx("img",{src:_oe[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id)})})]})}),t.length>0&&i.jsx("section",{className:"py-16 px-4 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),i.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),i.jsx(re,{variant:"outline",asChild:!0,children:i.jsxs(ze,{to:"/listings",children:["Voir tout",i.jsx(Np,{className:"w-4 h-4 ml-2"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>i.jsx(kp,{listing:n},n.id))})]})}),i.jsx("section",{className:"py-16 px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),i.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Coe.map((n,r)=>i.jsx(ge,{className:"border-0 shadow-none",children:i.jsx(ve,{className:"p-4 sm:p-6",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),i.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),i.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:i.jsx("div",{className:"container mx-auto text-center",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx(Hi,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),i.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),i.jsx(re,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:i.jsx(ze,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),i.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx(Jh,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),i.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(re,{size:"lg",variant:"secondary",asChild:!0,children:i.jsxs(ze,{to:"/auth",children:[i.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),i.jsx(re,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:i.jsx(ze,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};function Ip(t,[e,n]){return Math.min(n,Math.max(e,t))}function Mw(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var G5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),koe="VisuallyHidden",Ioe=w.forwardRef((t,e)=>i.jsx(Qe.span,{...t,ref:e,style:{...G5,...t.style}}));Ioe.displayName=koe;var Aoe=[" ","Enter","ArrowUp","ArrowDown"],Ooe=[" ","Enter"],bu="Select",[Dw,Lw,Moe]=Vg(bu),[uf,Y1e]=$r(bu,[Moe,sf]),Fw=sf(),[Doe,mc]=uf(bu),[Loe,Foe]=uf(bu),K5=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:u,dir:d,name:h,autoComplete:m,disabled:p,required:v,form:N}=t,b=Fw(e),[j,_]=w.useState(null),[x,S]=w.useState(null),[C,R]=w.useState(!1),V=Du(d),[k,I]=Js({prop:r,defaultProp:s??!1,onChange:a,caller:bu}),[$,T]=Js({prop:o,defaultProp:l,onChange:u,caller:bu}),M=w.useRef(null),D=j?N||!!j.closest("form"):!0,[O,B]=w.useState(new Set),Y=Array.from(O).map(ee=>ee.props.value).join(";");return i.jsx(cP,{...b,children:i.jsxs(Doe,{required:v,scope:e,trigger:j,onTriggerChange:_,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:Zs(),value:$,onValueChange:T,open:k,onOpenChange:I,dir:V,triggerPointerDownPosRef:M,disabled:p,children:[i.jsx(Dw.Provider,{scope:e,children:i.jsx(Loe,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(ee=>{B(Z=>new Set(Z).add(ee))},[]),onNativeOptionRemove:w.useCallback(ee=>{B(Z=>{const z=new Set(Z);return z.delete(ee),z})},[]),children:n})}),D?i.jsxs(y6,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:m,value:$,onChange:ee=>T(ee.target.value),disabled:p,form:N,children:[$===void 0?i.jsx("option",{value:""}):null,Array.from(O)]},Y):null]})})};K5.displayName=bu;var Z5="SelectTrigger",Q5=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Fw(n),o=mc(Z5,n),l=o.disabled||r,u=pt(e,o.onTriggerChange),d=Lw(n),h=w.useRef("touch"),[m,p,v]=w6(b=>{const j=d().filter(S=>!S.disabled),_=j.find(S=>S.value===o.value),x=b6(j,b,_);x!==void 0&&o.onValueChange(x.value)}),N=b=>{l||(o.onOpenChange(!0),v()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return i.jsx(Sw,{asChild:!0,...a,children:i.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":x6(o.value)?"":void 0,...s,ref:u,onClick:$e(s.onClick,b=>{b.currentTarget.focus(),h.current!=="mouse"&&N(b)}),onPointerDown:$e(s.onPointerDown,b=>{h.current=b.pointerType;const j=b.target;j.hasPointerCapture(b.pointerId)&&j.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(N(b),b.preventDefault())}),onKeyDown:$e(s.onKeyDown,b=>{const j=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(j&&b.key===" ")&&Aoe.includes(b.key)&&(N(),b.preventDefault())})})})});Q5.displayName=Z5;var Y5="SelectValue",J5=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,u=mc(Y5,n),{onValueNodeHasChildrenChange:d}=u,h=a!==void 0,m=pt(e,u.onValueNodeChange);return er(()=>{d(h)},[d,h]),i.jsx(Qe.span,{...l,ref:m,style:{pointerEvents:"none"},children:x6(u.value)?i.jsx(i.Fragment,{children:o}):a})});J5.displayName=Y5;var $oe="SelectIcon",X5=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Qe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});X5.displayName=$oe;var Voe="SelectPortal",e6=t=>i.jsx(Wg,{asChild:!0,...t});e6.displayName=Voe;var _u="SelectContent",t6=w.forwardRef((t,e)=>{const n=mc(_u,t.__scopeSelect),[r,s]=w.useState();if(er(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?qh.createPortal(i.jsx(n6,{scope:t.__scopeSelect,children:i.jsx(Dw.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(r6,{...t,ref:e})});t6.displayName=_u;var Oi=10,[n6,pc]=uf(_u),zoe="SelectContentImpl",Uoe=nc("SelectContent.RemoveScroll"),r6=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:N,hideWhenDetached:b,avoidCollisions:j,..._}=t,x=mc(_u,n),[S,C]=w.useState(null),[R,V]=w.useState(null),k=pt(e,ye=>C(ye)),[I,$]=w.useState(null),[T,M]=w.useState(null),D=Lw(n),[O,B]=w.useState(!1),Y=w.useRef(!1);w.useEffect(()=>{if(S)return Pw(S)},[S]),ww();const ee=w.useCallback(ye=>{const[J,...te]=D().map(ie=>ie.ref.current),[ne]=te.slice(-1),K=document.activeElement;for(const ie of ye)if(ie===K||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===J&&R&&(R.scrollTop=0),ie===ne&&R&&(R.scrollTop=R.scrollHeight),ie==null||ie.focus(),document.activeElement!==K))return},[D,R]),Z=w.useCallback(()=>ee([I,S]),[ee,I,S]);w.useEffect(()=>{O&&Z()},[O,Z]);const{onOpenChange:z,triggerPointerDownPosRef:H}=x;w.useEffect(()=>{if(S){let ye={x:0,y:0};const J=ne=>{var K,ie;ye={x:Math.abs(Math.round(ne.pageX)-(((K=H.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ie=H.current)==null?void 0:ie.y)??0))}},te=ne=>{ye.x<=10&&ye.y<=10?ne.preventDefault():S.contains(ne.target)||z(!1),document.removeEventListener("pointermove",J),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",J),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",te,{capture:!0})}}},[S,z,H]),w.useEffect(()=>{const ye=()=>z(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[z]);const[q,X]=w6(ye=>{const J=D().filter(K=>!K.disabled),te=J.find(K=>K.ref.current===document.activeElement),ne=b6(J,ye,te);ne&&setTimeout(()=>ne.ref.current.focus())}),me=w.useCallback((ye,J,te)=>{const ne=!Y.current&&!te;(x.value!==void 0&&x.value===J||ne)&&($(ye),ne&&(Y.current=!0))},[x.value]),Ee=w.useCallback(()=>S==null?void 0:S.focus(),[S]),Fe=w.useCallback((ye,J,te)=>{const ne=!Y.current&&!te;(x.value!==void 0&&x.value===J||ne)&&M(ye)},[x.value]),Me=r==="popper"?Tj:s6,ue=Me===Tj?{side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:N,hideWhenDetached:b,avoidCollisions:j}:{};return i.jsx(n6,{scope:n,content:S,viewport:R,onViewportChange:V,itemRefCallback:me,selectedItem:I,onItemLeave:Ee,itemTextRefCallback:Fe,focusSelectedItem:Z,selectedItemText:T,position:r,isPositioned:O,searchRef:q,children:i.jsx(qg,{as:Uoe,allowPinchZoom:!0,children:i.jsx(Ug,{asChild:!0,trapped:x.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:$e(s,ye=>{var J;(J=x.trigger)==null||J.focus({preventScroll:!0}),ye.preventDefault()}),children:i.jsx(zg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(Me,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ye=>ye.preventDefault(),..._,...ue,onPlaced:()=>B(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:$e(_.onKeyDown,ye=>{const J=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!J&&ye.key.length===1&&X(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let ne=D().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const K=ye.target,ie=ne.indexOf(K);ne=ne.slice(ie+1)}setTimeout(()=>ee(ne)),ye.preventDefault()}})})})})})})});r6.displayName=zoe;var Boe="SelectItemAlignedPosition",s6=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=mc(_u,n),o=pc(_u,n),[l,u]=w.useState(null),[d,h]=w.useState(null),m=pt(e,k=>h(k)),p=Lw(n),v=w.useRef(!1),N=w.useRef(!0),{viewport:b,selectedItem:j,selectedItemText:_,focusSelectedItem:x}=o,S=w.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&b&&j&&_){const k=a.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),$=a.valueNode.getBoundingClientRect(),T=_.getBoundingClientRect();if(a.dir!=="rtl"){const K=T.left-I.left,ie=$.left-K,he=k.left-ie,_e=k.width+he,xe=Math.max(_e,I.width),se=window.innerWidth-Oi,we=Ip(ie,[Oi,Math.max(Oi,se-xe)]);l.style.minWidth=_e+"px",l.style.left=we+"px"}else{const K=I.right-T.right,ie=window.innerWidth-$.right-K,he=window.innerWidth-k.right-ie,_e=k.width+he,xe=Math.max(_e,I.width),se=window.innerWidth-Oi,we=Ip(ie,[Oi,Math.max(Oi,se-xe)]);l.style.minWidth=_e+"px",l.style.right=we+"px"}const M=p(),D=window.innerHeight-Oi*2,O=b.scrollHeight,B=window.getComputedStyle(d),Y=parseInt(B.borderTopWidth,10),ee=parseInt(B.paddingTop,10),Z=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),H=Y+ee+O+z+Z,q=Math.min(j.offsetHeight*5,H),X=window.getComputedStyle(b),me=parseInt(X.paddingTop,10),Ee=parseInt(X.paddingBottom,10),Fe=k.top+k.height/2-Oi,Me=D-Fe,ue=j.offsetHeight/2,ye=j.offsetTop+ue,J=Y+ee+ye,te=H-J;if(J<=Fe){const K=M.length>0&&j===M[M.length-1].ref.current;l.style.bottom="0px";const ie=d.clientHeight-b.offsetTop-b.offsetHeight,he=Math.max(Me,ue+(K?Ee:0)+ie+Z),_e=J+he;l.style.height=_e+"px"}else{const K=M.length>0&&j===M[0].ref.current;l.style.top="0px";const he=Math.max(Fe,Y+b.offsetTop+(K?me:0)+ue)+te;l.style.height=he+"px",b.scrollTop=J-Fe+b.offsetTop}l.style.margin=`${Oi}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,a.trigger,a.valueNode,l,d,b,j,_,a.dir,r]);er(()=>S(),[S]);const[C,R]=w.useState();er(()=>{d&&R(window.getComputedStyle(d).zIndex)},[d]);const V=w.useCallback(k=>{k&&N.current===!0&&(S(),x==null||x(),N.current=!1)},[S,x]);return i.jsx(Hoe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:V,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(Qe.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});s6.displayName=Boe;var Woe="SelectPopperPosition",Tj=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Oi,...a}=t,o=Fw(n);return i.jsx(uP,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tj.displayName=Woe;var[Hoe,PP]=uf(_u,{}),Rj="SelectViewport",i6=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=pc(Rj,n),o=PP(Rj,n),l=pt(e,a.onViewportChange),u=w.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Dw.Slot,{scope:n,children:i.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:$e(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&m){const v=Math.abs(u.current-h.scrollTop);if(v>0){const N=window.innerHeight-Oi*2,b=parseFloat(m.style.minHeight),j=parseFloat(m.style.height),_=Math.max(b,j);if(_<N){const x=_+v,S=Math.min(N,x),C=x-S;m.style.height=S+"px",m.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});i6.displayName=Rj;var a6="SelectGroup",[qoe,Goe]=uf(a6),Koe=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Zs();return i.jsx(qoe,{scope:n,id:s,children:i.jsx(Qe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Koe.displayName=a6;var o6="SelectLabel",l6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Goe(o6,n);return i.jsx(Qe.div,{id:s.id,...r,ref:e})});l6.displayName=o6;var i0="SelectItem",[Zoe,c6]=uf(i0),u6=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=mc(i0,n),u=pc(i0,n),d=l.value===r,[h,m]=w.useState(a??""),[p,v]=w.useState(!1),N=pt(e,x=>{var S;return(S=u.itemRefCallback)==null?void 0:S.call(u,x,r,s)}),b=Zs(),j=w.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Zoe,{scope:n,value:r,disabled:s,textId:b,isSelected:d,onItemTextChange:w.useCallback(x=>{m(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(Dw.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:i.jsx(Qe.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:N,onFocus:$e(o.onFocus,()=>v(!0)),onBlur:$e(o.onBlur,()=>v(!1)),onClick:$e(o.onClick,()=>{j.current!=="mouse"&&_()}),onPointerUp:$e(o.onPointerUp,()=>{j.current==="mouse"&&_()}),onPointerDown:$e(o.onPointerDown,x=>{j.current=x.pointerType}),onPointerMove:$e(o.onPointerMove,x=>{var S;j.current=x.pointerType,s?(S=u.onItemLeave)==null||S.call(u):j.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=u.onItemLeave)==null||S.call(u))}),onKeyDown:$e(o.onKeyDown,x=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(Ooe.includes(x.key)&&_(),x.key===" "&&x.preventDefault())})})})})});u6.displayName=i0;var bm="SelectItemText",d6=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=mc(bm,n),l=pc(bm,n),u=c6(bm,n),d=Foe(bm,n),[h,m]=w.useState(null),p=pt(e,_=>m(_),u.onItemTextChange,_=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,_,u.value,u.disabled)}),v=h==null?void 0:h.textContent,N=w.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:v},u.value),[u.disabled,u.value,v]),{onNativeOptionAdd:b,onNativeOptionRemove:j}=d;return er(()=>(b(N),()=>j(N)),[b,j,N]),i.jsxs(i.Fragment,{children:[i.jsx(Qe.span,{id:u.textId,...a,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qh.createPortal(a.children,o.valueNode):null]})});d6.displayName=bm;var h6="SelectItemIndicator",f6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c6(h6,n).isSelected?i.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e}):null});f6.displayName=h6;var kj="SelectScrollUpButton",m6=w.forwardRef((t,e)=>{const n=pc(kj,t.__scopeSelect),r=PP(kj,t.__scopeSelect),[s,a]=w.useState(!1),o=pt(e,r.onScrollButtonChange);return er(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollTop>0;a(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(g6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});m6.displayName=kj;var Ij="SelectScrollDownButton",p6=w.forwardRef((t,e)=>{const n=pc(Ij,t.__scopeSelect),r=PP(Ij,t.__scopeSelect),[s,a]=w.useState(!1),o=pt(e,r.onScrollButtonChange);return er(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;a(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(g6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});p6.displayName=Ij;var g6=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=pc("SelectScrollButton",n),o=w.useRef(null),l=Lw(n),u=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>u(),[u]),er(()=>{var h;const d=l().find(m=>m.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(Qe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:$e(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:$e(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:$e(s.onPointerLeave,()=>{u()})})}),Qoe="SelectSeparator",v6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e})});v6.displayName=Qoe;var Aj="SelectArrow",Yoe=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Fw(n),a=mc(Aj,n),o=pc(Aj,n);return a.open&&o.position==="popper"?i.jsx(dP,{...s,...r,ref:e}):null});Yoe.displayName=Aj;var Joe="SelectBubbleInput",y6=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=w.useRef(null),a=pt(r,s),o=Mw(e);return w.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const m=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Qe.select,{...n,style:{...G5,...n.style},ref:a,defaultValue:e})});y6.displayName=Joe;function x6(t){return t===""||t===void 0}function w6(t){const e=Er(t),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(o=>{const l=n.current+o;e(l),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),a=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function b6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Xoe(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Xoe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var ele=K5,_6=Q5,tle=J5,nle=X5,rle=e6,j6=t6,sle=i6,N6=l6,S6=u6,ile=d6,ale=f6,E6=m6,P6=p6,C6=v6;const sn=ele,an=tle,Qt=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(_6,{ref:r,className:ot("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(nle,{asChild:!0,children:i.jsx(dse,{className:"h-4 w-4 opacity-50"})})]}));Qt.displayName=_6.displayName;const T6=w.forwardRef(({className:t,...e},n)=>i.jsx(E6,{ref:n,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(yse,{})}));T6.displayName=E6.displayName;const R6=w.forwardRef(({className:t,...e},n)=>i.jsx(P6,{ref:n,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(g5,{})}));R6.displayName=P6.displayName;const Yt=w.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(rle,{children:i.jsxs(j6,{ref:s,className:ot("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(T6,{}),i.jsx(sle,{className:ot("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(R6,{})]})}));Yt.displayName=j6.displayName;const ole=w.forwardRef(({className:t,...e},n)=>i.jsx(N6,{ref:n,className:ot("px-2 py-1.5 text-sm font-semibold",t),...e}));ole.displayName=N6.displayName;const Ze=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(S6,{ref:r,className:ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(ale,{children:i.jsx(xP,{className:"h-4 w-4"})})}),i.jsx(ile,{children:e})]}));Ze.displayName=S6.displayName;const lle=w.forwardRef(({className:t,...e},n)=>i.jsx(C6,{ref:n,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));lle.displayName=C6.displayName;var cle="Separator",Tk="horizontal",ule=["horizontal","vertical"],k6=w.forwardRef((t,e)=>{const{decorative:n,orientation:r=Tk,...s}=t,a=dle(r)?r:Tk,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Qe.div,{"data-orientation":a,...l,...s,ref:e})});k6.displayName=cle;function dle(t){return ule.includes(t)}var I6=k6;const fi=w.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(I6,{ref:s,decorative:n,orientation:e,className:ot("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));fi.displayName=I6.displayName;const w_=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Mu},{value:"vehicles",label:"Véhicules",icon:b3},{value:"real-estate",label:"Immobilier",icon:Kx},{value:"fashion",label:"Mode",icon:JE},{value:"gaming",label:"Jeux & Jouets",icon:jX},{value:"baby",label:"Bébé & Enfant",icon:hX},{value:"business",label:"Équipement Pro",icon:x3}],hle=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],fle=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],mle=()=>{var _;const[t,e]=FS(),{listings:n,loading:r,hasMore:s,fetchListings:a,searchListings:o}=Zg(),[l,u]=w.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[d,h]=w.useState("grid"),[m,p]=w.useState(!1);w.useEffect(()=>{const x={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(x),o(x)},[t,o]);const v=()=>{const x={...l};o(x);const S=new URLSearchParams;x.query&&S.set("q",x.query),x.category&&S.set("category",x.category),e(S)},N=(x,S)=>{const C={...l,[x]:S};u(C)},b=()=>{a(l,!1)},j=()=>{const x={query:"",sortBy:"date"};u(x),o(x),e({})};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:x=>N("query",x.target.value),onKeyPress:x=>x.key==="Enter"&&v(),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{onClick:v,className:"whitespace-nowrap",children:[i.jsx(Or,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),i.jsxs(re,{variant:"outline",onClick:()=>p(!m),className:"lg:hidden",children:[i.jsx(mw,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:w_.slice(1,6).map(x=>{const S=x.icon;return i.jsxs(re,{variant:l.category===x.value?"default":"outline",size:"sm",onClick:()=>N("category",l.category===x.value?"":x.value),className:"flex items-center gap-2",children:[S&&i.jsx(S,{className:"w-4 h-4"}),x.label]},x.value)})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[i.jsx("aside",{className:`lg:w-80 space-y-6 ${m?"block":"hidden lg:block"}`,children:i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Filtres"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:j,children:"Effacer"})]})}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),i.jsxs(sn,{value:l.category||"all",onValueChange:x=>N("category",x==="all"?"":x),children:[i.jsx(Qt,{children:i.jsx(an,{})}),i.jsx(Yt,{children:w_.map(x=>{const S=x.icon;return i.jsx(Ze,{value:x.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[S&&i.jsx(S,{className:"w-4 h-4"}),x.label]})},x.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ke,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:x=>N("minPrice",x.target.value?parseInt(x.target.value):void 0)}),i.jsx(Ke,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:x=>N("maxPrice",x.target.value?parseInt(x.target.value):void 0)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),i.jsx("div",{className:"space-y-2",children:hle.map(x=>{var S;return i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:((S=l.condition)==null?void 0:S.includes(x.value))||!1,onChange:C=>{const R=l.condition||[],V=C.target.checked?[...R,x.value]:R.filter(k=>k!==x.value);N("condition",V.length>0?V:void 0)},className:"rounded border-border"}),i.jsx("span",{className:"text-sm",children:x.label})]},x.value)})})]}),i.jsx(re,{onClick:v,className:"w-full",children:"Appliquer les filtres"})]})]})}),i.jsxs("main",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&i.jsxs(ct,{variant:"secondary",children:['"',l.query,'"']}),l.category&&i.jsx(ct,{variant:"secondary",children:(_=w_.find(x=>x.value===l.category))==null?void 0:_.label})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(sn,{value:l.sortBy||"date",onValueChange:x=>N("sortBy",x),children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{})}),i.jsx(Yt,{children:fle.map(x=>i.jsx(Ze,{value:x.value,children:x.label},x.value))})]}),i.jsx(fi,{orientation:"vertical",className:"h-6"}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(re,{variant:d==="grid"?"default":"ghost",size:"icon",onClick:()=>h("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:i.jsx(S3,{className:"w-4 h-4"})}),i.jsx(re,{variant:d==="list"?"default":"ghost",size:"icon",onClick:()=>h("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:i.jsx(C3,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((x,S)=>i.jsxs(ge,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ve,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},S))}):n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`grid gap-6 ${d==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(x=>i.jsx(kp,{listing:x},x.id))}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsx(re,{onClick:b,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),i.jsx(re,{onClick:j,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var $w="Dialog",[A6,J1e]=$r($w),[ple,na]=A6($w),O6=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=w.useRef(null),u=w.useRef(null),[d,h]=Js({prop:r,defaultProp:s??!1,onChange:a,caller:$w});return i.jsx(ple,{scope:e,triggerRef:l,contentRef:u,contentId:Zs(),titleId:Zs(),descriptionId:Zs(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};O6.displayName=$w;var M6="DialogTrigger",D6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=na(M6,n),a=pt(e,s.triggerRef);return i.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RP(s.open),...r,ref:a,onClick:$e(t.onClick,s.onOpenToggle)})});D6.displayName=M6;var CP="DialogPortal",[gle,L6]=A6(CP,{forceMount:void 0}),F6=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=na(CP,e);return i.jsx(gle,{scope:e,forceMount:n,children:w.Children.map(r,o=>i.jsx(Vr,{present:n||a.open,children:i.jsx(Wg,{asChild:!0,container:s,children:o})}))})};F6.displayName=CP;var a0="DialogOverlay",$6=w.forwardRef((t,e)=>{const n=L6(a0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=na(a0,t.__scopeDialog);return a.modal?i.jsx(Vr,{present:r||a.open,children:i.jsx(yle,{...s,ref:e})}):null});$6.displayName=a0;var vle=nc("DialogOverlay.RemoveScroll"),yle=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=na(a0,n);return i.jsx(qg,{as:vle,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Qe.div,{"data-state":RP(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ju="DialogContent",V6=w.forwardRef((t,e)=>{const n=L6(ju,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=na(ju,t.__scopeDialog);return i.jsx(Vr,{present:r||a.open,children:a.modal?i.jsx(xle,{...s,ref:e}):i.jsx(wle,{...s,ref:e})})});V6.displayName=ju;var xle=w.forwardRef((t,e)=>{const n=na(ju,t.__scopeDialog),r=w.useRef(null),s=pt(e,n.contentRef,r);return w.useEffect(()=>{const a=r.current;if(a)return Pw(a)},[]),i.jsx(z6,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$e(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:$e(t.onFocusOutside,a=>a.preventDefault())})}),wle=w.forwardRef((t,e)=>{const n=na(ju,t.__scopeDialog),r=w.useRef(!1),s=w.useRef(!1);return i.jsx(z6,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),z6=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=na(ju,n),u=w.useRef(null),d=pt(e,u);return ww(),i.jsxs(i.Fragment,{children:[i.jsx(Ug,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(zg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":RP(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(ble,{titleId:l.titleId}),i.jsx(jle,{contentRef:u,descriptionId:l.descriptionId})]})]})}),TP="DialogTitle",U6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=na(TP,n);return i.jsx(Qe.h2,{id:s.titleId,...r,ref:e})});U6.displayName=TP;var B6="DialogDescription",W6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=na(B6,n);return i.jsx(Qe.p,{id:s.descriptionId,...r,ref:e})});W6.displayName=B6;var H6="DialogClose",q6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=na(H6,n);return i.jsx(Qe.button,{type:"button",...r,ref:e,onClick:$e(t.onClick,()=>s.onOpenChange(!1))})});q6.displayName=H6;function RP(t){return t?"open":"closed"}var G6="DialogTitleWarning",[X1e,K6]=Eee(G6,{contentName:ju,titleName:TP,docsSlug:"dialog"}),ble=({titleId:t})=>{const e=K6(G6),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_le="DialogDescriptionWarning",jle=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${K6(_le).contentName}}.`;return w.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Nle=O6,Sle=D6,Ele=F6,Z6=$6,Q6=V6,Y6=U6,J6=W6,Ple=q6;const Da=Nle,ih=Sle,Cle=Ele,X6=w.forwardRef(({className:t,...e},n)=>i.jsx(Z6,{ref:n,className:ot("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));X6.displayName=Z6.displayName;const qi=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(Cle,{children:[i.jsx(X6,{}),i.jsxs(Q6,{ref:r,className:ot("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Ple,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(wse,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qi.displayName=Q6.displayName;const La=({className:t,...e})=>i.jsx("div",{className:ot("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});La.displayName="DialogHeader";const Ky=({className:t,...e})=>i.jsx("div",{className:ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Ky.displayName="DialogFooter";const Gi=w.forwardRef(({className:t,...e},n)=>i.jsx(Y6,{ref:n,className:ot("text-lg font-semibold leading-none tracking-tight",t),...e}));Gi.displayName=Y6.displayName;const nu=w.forwardRef(({className:t,...e},n)=>i.jsx(J6,{ref:n,className:ot("text-sm text-muted-foreground",t),...e}));nu.displayName=J6.displayName;const bi=w.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:ot("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));bi.displayName="Textarea";var Tle="Label",e$=w.forwardRef((t,e)=>i.jsx(Qe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));e$.displayName=Tle;var t$=e$;const Rle=xw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=w.forwardRef(({className:t,...e},n)=>i.jsx(t$,{ref:n,className:ot(Rle(),t),...e}));Ae.displayName=t$.displayName;const kle=xw("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qt=w.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:ot(kle({variant:e}),t),...n}));qt.displayName="Alert";const Ile=w.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:ot("mb-1 font-medium leading-none tracking-tight",t),...e}));Ile.displayName="AlertTitle";const Gt=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ot("text-sm [&_p]:leading-relaxed",t),...e}));Gt.displayName="AlertDescription";var mt=function(){return mt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mt.apply(this,arguments)};function Ale(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function n$(t,e,n){for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Qg(t){return t.mode==="multiple"}function Yg(t){return t.mode==="range"}function Vw(t){return t.mode==="single"}var Ole={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Mle(t,e){return vr(t,"LLLL y",e)}function Dle(t,e){return vr(t,"d",e)}function Lle(t,e){return vr(t,"LLLL",e)}function Fle(t){return"".concat(t)}function $le(t,e){return vr(t,"cccccc",e)}function Vle(t,e){return vr(t,"yyyy",e)}var zle=Object.freeze({__proto__:null,formatCaption:Mle,formatDay:Dle,formatMonthCaption:Lle,formatWeekNumber:Fle,formatWeekdayName:$le,formatYearCaption:Vle}),Ule=function(t,e,n){return vr(t,"do MMMM (EEEE)",n)},Ble=function(){return"Month: "},Wle=function(){return"Go to next month"},Hle=function(){return"Go to previous month"},qle=function(t,e){return vr(t,"cccc",e)},Gle=function(t){return"Week n. ".concat(t)},Kle=function(){return"Year: "},Zle=Object.freeze({__proto__:null,labelDay:Ule,labelMonthDropdown:Ble,labelNext:Wle,labelPrevious:Hle,labelWeekNumber:Gle,labelWeekday:qle,labelYearDropdown:Kle});function Qle(){var t="buttons",e=Ole,n=SP,r={},s={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:zle,labels:Zle,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Yle(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Os(r):e&&(a=new Date(e,0,1)),s?o=Ow(s):n&&(o=new Date(n,11,31)),{fromDate:a?Ch(a):void 0,toDate:o?Ch(o):void 0}}var r$=w.createContext(void 0);function Jle(t){var e,n=t.initialProps,r=Qle(),s=Yle(n),a=s.fromDate,o=s.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var u;(Vw(n)||Qg(n)||Yg(n))&&(u=n.onSelect);var d=mt(mt(mt({},r),n),{captionLayout:l,classNames:mt(mt({},r.classNames),n.classNames),components:mt({},n.components),formatters:mt(mt({},r.formatters),n.formatters),fromDate:a,labels:mt(mt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:mt(mt({},r.modifiers),n.modifiers),modifiersClassNames:mt(mt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:mt(mt({},r.styles),n.styles),toDate:o});return i.jsx(r$.Provider,{value:d,children:t.children})}function pn(){var t=w.useContext(r$);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function s$(t){var e=pn(),n=e.locale,r=e.classNames,s=e.styles,a=e.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function Xle(t){return i.jsx("svg",mt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function i$(t){var e,n,r=t.onChange,s=t.value,a=t.children,o=t.caption,l=t.className,u=t.style,d=pn(),h=(n=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Xle;return i.jsxs("div",{className:l,style:u,children:[i.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:r,children:a}),i.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function ece(t){var e,n=pn(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,u=n.classNames,d=n.components,h=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var m=[];if(Rae(r,s))for(var p=Os(r),v=r.getMonth();v<=s.getMonth();v++)m.push(x_(p,v));else for(var p=Os(new Date),v=0;v<=11;v++)m.push(x_(p,v));var N=function(j){var _=Number(j.target.value),x=x_(Os(t.displayMonth),_);t.onChange(x)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:i$;return i.jsx(b,{name:"months","aria-label":h(),className:u.dropdown_month,style:a.dropdown_month,onChange:N,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:m.map(function(j){return i.jsx("option",{value:j.getMonth(),children:l(j,{locale:o})},j.getMonth())})})}function tce(t){var e,n=t.displayMonth,r=pn(),s=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,u=r.classNames,d=r.components,h=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var v=s.getFullYear(),N=a.getFullYear(),b=v;b<=N;b++)p.push(Ek(L5(new Date),b));var j=function(x){var S=Ek(Os(n),Number(x.target.value));t.onChange(S)},_=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:i$;return i.jsx(_,{name:"years","aria-label":m(),className:u.dropdown_year,style:l.dropdown_year,onChange:j,value:n.getFullYear(),caption:h(n,{locale:o}),children:p.map(function(x){return i.jsx("option",{value:x.getFullYear(),children:h(x,{locale:o})},x.getFullYear())})})}function nce(t,e){var n=w.useState(t),r=n[0],s=n[1],a=e===void 0?r:e;return[a,s]}function rce(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,u=l===void 0?1:l;if(a&&Rh(a,s)<0){var d=-1*(u-1);s=Xi(a,d)}return o&&Rh(s,o)<0&&(s=o),Os(s)}function sce(){var t=pn(),e=rce(t),n=nce(e,t.month),r=n[0],s=n[1],a=function(o){var l;if(!t.disableNavigation){var u=Os(o);s(u),(l=t.onMonthChange)===null||l===void 0||l.call(t,u)}};return[r,a]}function ice(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Os(t),a=Os(Xi(s,r)),o=Rh(a,s),l=[],u=0;u<o;u++){var d=Xi(s,u);l.push(d)}return n&&(l=l.reverse()),l}function ace(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Os(t);if(!n)return Xi(l,o);var u=Rh(n,t);if(!(u<a))return Xi(l,o)}}function oce(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Os(t);if(!n)return Xi(l,-o);var u=Rh(l,n);if(!(u<=0))return Xi(l,-o)}}var a$=w.createContext(void 0);function lce(t){var e=pn(),n=sce(),r=n[0],s=n[1],a=ice(r,e),o=ace(r,e),l=oce(r,e),u=function(m){return a.some(function(p){return EP(m,p)})},d=function(m,p){u(m)||(p&&W5(m,p)?s(Xi(m,1+e.numberOfMonths*-1)):s(m))},h={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:u};return i.jsx(a$.Provider,{value:h,children:t.children})}function Jg(){var t=w.useContext(a$);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Rk(t){var e,n=pn(),r=n.classNames,s=n.styles,a=n.components,o=Jg().goToMonth,l=function(h){o(Xi(h,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:s$,d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:d}),i.jsx(ece,{onChange:l,displayMonth:t.displayMonth}),i.jsx(tce,{onChange:l,displayMonth:t.displayMonth})]})}function cce(t){return i.jsx("svg",mt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uce(t){return i.jsx("svg",mt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var o0=w.forwardRef(function(t,e){var n=pn(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=mt(mt({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),i.jsx("button",mt({},t,{ref:e,type:"button",className:o,style:l}))});function dce(t){var e,n,r=pn(),s=r.dir,a=r.locale,o=r.classNames,l=r.styles,u=r.labels,d=u.labelPrevious,h=u.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var p=d(t.previousMonth,{locale:a}),v=[o.nav_button,o.nav_button_previous].join(" "),N=h(t.nextMonth,{locale:a}),b=[o.nav_button,o.nav_button_next].join(" "),j=(e=m==null?void 0:m.IconRight)!==null&&e!==void 0?e:uce,_=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:cce;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(o0,{name:"previous-month","aria-label":p,className:v,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?i.jsx(j,{className:o.nav_icon,style:l.nav_icon}):i.jsx(_,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(o0,{name:"next-month","aria-label":N,className:b,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?i.jsx(_,{className:o.nav_icon,style:l.nav_icon}):i.jsx(j,{className:o.nav_icon,style:l.nav_icon})})]})}function kk(t){var e=pn().numberOfMonths,n=Jg(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(N){return EP(t.displayMonth,N)}),u=l===0,d=l===o.length-1,h=e>1&&(u||!d),m=e>1&&(d||!u),p=function(){r&&a(r)},v=function(){s&&a(s)};return i.jsx(dce,{displayMonth:t.displayMonth,hideNext:h,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:v})}function hce(t){var e,n=pn(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,u=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:s$,d;return s?d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=i.jsx(Rk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=i.jsxs(i.Fragment,{children:[i.jsx(Rk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(kk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=i.jsxs(i.Fragment,{children:[i.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(kk,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:r.caption,style:a.caption,children:d})}function fce(t){var e=pn(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?i.jsx("tfoot",{className:s,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function mce(t,e,n){for(var r=n?wu(new Date):Ua(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=ls(r,a);s.push(o)}return s}function pce(){var t=pn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,d=mce(s,a,o);return i.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:e.head_cell}),d.map(function(h,m){return i.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(h,{locale:s}),children:l(h,{locale:s})},m)})]})}function gce(){var t,e=pn(),n=e.classNames,r=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:pce;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(a,{})})}function vce(t){var e=pn(),n=e.locale,r=e.formatters.formatDay;return i.jsx(i.Fragment,{children:r(t.date,{locale:n})})}var kP=w.createContext(void 0);function yce(t){if(!Qg(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(kP.Provider,{value:e,children:t.children})}return i.jsx(xce,{initialProps:t.initialProps,children:t.children})}function xce(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,a=e.max,o=function(d,h,m){var p,v;(p=e.onDayClick)===null||p===void 0||p.call(e,d,h,m);var N=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!N){var b=!!(!h.selected&&a&&(r==null?void 0:r.length)===a);if(!b){var j=r?n$([],r):[];if(h.selected){var _=j.findIndex(function(x){return Cs(d,x)});j.splice(_,1)}else j.push(d);(v=e.onSelect)===null||v===void 0||v.call(e,j,d,h,m)}}},l={disabled:[]};r&&l.disabled.push(function(d){var h=a&&r.length>a-1,m=r.some(function(p){return Cs(p,d)});return!!(h&&!m)});var u={selected:r,onDayClick:o,modifiers:l};return i.jsx(kP.Provider,{value:u,children:n})}function IP(){var t=w.useContext(kP);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function wce(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Cs(s,t)&&Cs(r,t)?void 0:Cs(s,t)?{from:s,to:void 0}:Cs(r,t)?void 0:Cj(r,t)?{from:t,to:s}:{from:r,to:t}:s?Cj(t,s)?{from:s,to:t}:{from:t,to:s}:r?W5(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var AP=w.createContext(void 0);function bce(t){if(!Yg(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(AP.Provider,{value:e,children:t.children})}return i.jsx(_ce,{initialProps:t.initialProps,children:t.children})}function _ce(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},a=s.from,o=s.to,l=e.min,u=e.max,d=function(v,N,b){var j,_;(j=e.onDayClick)===null||j===void 0||j.call(e,v,N,b);var x=wce(v,r);(_=e.onSelect)===null||_===void 0||_.call(e,x,v,N,b)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(h.range_start=[a],o?(h.range_end=[o],Cs(a,o)||(h.range_middle=[{after:a,before:o}])):h.range_end=[a]):o&&(h.range_start=[o],h.range_end=[o]),l&&(a&&!o&&h.disabled.push({after:y_(a,l-1),before:ls(a,l-1)}),a&&o&&h.disabled.push({after:a,before:ls(a,l-1)}),!a&&o&&h.disabled.push({after:y_(o,l-1),before:ls(o,l-1)})),u){if(a&&!o&&(h.disabled.push({before:ls(a,-u+1)}),h.disabled.push({after:ls(a,u-1)})),a&&o){var m=Ea(o,a)+1,p=u-m;h.disabled.push({before:y_(a,p)}),h.disabled.push({after:ls(o,p)})}!a&&o&&(h.disabled.push({before:ls(o,-u+1)}),h.disabled.push({after:ls(o,u-1)}))}return i.jsx(AP.Provider,{value:{selected:r,onDayClick:d,modifiers:h},children:n})}function OP(){var t=w.useContext(AP);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Zy(t){return Array.isArray(t)?n$([],t):t!==void 0?[t]:[]}function jce(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=Zy(s)}),e}var ea;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ea||(ea={}));var Nce=ea.Selected,co=ea.Disabled,Sce=ea.Hidden,Ece=ea.Today,b_=ea.RangeEnd,__=ea.RangeMiddle,j_=ea.RangeStart,Pce=ea.Outside;function Cce(t,e,n){var r,s=(r={},r[Nce]=Zy(t.selected),r[co]=Zy(t.disabled),r[Sce]=Zy(t.hidden),r[Ece]=[t.today],r[b_]=[],r[__]=[],r[j_]=[],r[Pce]=[],r);return t.fromDate&&s[co].push({before:t.fromDate}),t.toDate&&s[co].push({after:t.toDate}),Qg(t)?s[co]=s[co].concat(e.modifiers[co]):Yg(t)&&(s[co]=s[co].concat(n.modifiers[co]),s[j_]=n.modifiers[j_],s[__]=n.modifiers[__],s[b_]=n.modifiers[b_]),s}var o$=w.createContext(void 0);function Tce(t){var e=pn(),n=IP(),r=OP(),s=Cce(e,n,r),a=jce(e.modifiers),o=mt(mt({},s),a);return i.jsx(o$.Provider,{value:o,children:t.children})}function l$(){var t=w.useContext(o$);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Rce(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function kce(t){return!!(t&&typeof t=="object"&&"from"in t)}function Ice(t){return!!(t&&typeof t=="object"&&"after"in t)}function Ace(t){return!!(t&&typeof t=="object"&&"before"in t)}function Oce(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Mce(t,e){var n,r=e.from,s=e.to;if(r&&s){var a=Ea(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=Ea(t,r)>=0&&Ea(s,t)>=0;return o}return s?Cs(s,t):r?Cs(r,t):!1}function Dce(t){return jP(t)}function Lce(t){return Array.isArray(t)&&t.every(jP)}function Fce(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Dce(n))return Cs(t,n);if(Lce(n))return n.includes(t);if(kce(n))return Mce(t,n);if(Oce(n))return n.dayOfWeek.includes(t.getDay());if(Rce(n)){var r=Ea(n.before,t),s=Ea(n.after,t),a=r>0,o=s<0,l=Cj(n.before,n.after);return l?o&&a:a||o}return Ice(n)?Ea(t,n.after)>0:Ace(n)?Ea(n.before,t)>0:typeof n=="function"?n(t):!1})}function MP(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return Fce(t,l)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!EP(t,n)&&(s.outside=!0),s}function $ce(t,e){for(var n=Os(t[0]),r=Ow(t[t.length-1]),s,a,o=n;o<=r;){var l=MP(o,e),u=!l.disabled&&!l.hidden;if(!u){o=ls(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=ls(o,1)}return a||s}var Vce=365;function c$(t,e){var n=e.moveBy,r=e.direction,s=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,u=s.weekStartsOn,d=s.fromDate,h=s.toDate,m=s.locale,p={day:ls,week:Pj,month:Xi,year:xie,startOfWeek:function(j){return s.ISOWeek?wu(j):Ua(j,{locale:m,weekStartsOn:u})},endOfWeek:function(j){return s.ISOWeek?F5(j):NP(j,{locale:m,weekStartsOn:u})}},v=p[n](t,r==="after"?1:-1);r==="before"&&d?v=wie([d,v]):r==="after"&&h&&(v=bie([h,v]));var N=!0;if(a){var b=MP(v,a);N=!b.disabled&&!b.hidden}return N?v:l.count>Vce?l.lastFocused:c$(v,{moveBy:n,direction:r,context:s,modifiers:a,retry:mt(mt({},l),{count:l.count+1})})}var u$=w.createContext(void 0);function zce(t){var e=Jg(),n=l$(),r=w.useState(),s=r[0],a=r[1],o=w.useState(),l=o[0],u=o[1],d=$ce(e.displayMonths,n),h=s??(l&&e.isDateDisplayed(l))?l:d,m=function(){u(s),a(void 0)},p=function(j){a(j)},v=pn(),N=function(j,_){if(s){var x=c$(s,{moveBy:j,direction:_,context:v,modifiers:n});Cs(s,x)||(e.goToDate(x,s),p(x))}},b={focusedDay:s,focusTarget:h,blur:m,focus:p,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return i.jsx(u$.Provider,{value:b,children:t.children})}function DP(){var t=w.useContext(u$);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Uce(t,e){var n=l$(),r=MP(t,n,e);return r}var LP=w.createContext(void 0);function Bce(t){if(!Vw(t.initialProps)){var e={selected:void 0};return i.jsx(LP.Provider,{value:e,children:t.children})}return i.jsx(Wce,{initialProps:t.initialProps,children:t.children})}function Wce(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var u,d,h;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,l);return}(h=e.onSelect)===null||h===void 0||h.call(e,a,a,o,l)},s={selected:e.selected,onDayClick:r};return i.jsx(LP.Provider,{value:s,children:n})}function d$(){var t=w.useContext(LP);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Hce(t,e){var n=pn(),r=d$(),s=IP(),a=OP(),o=DP(),l=o.focusDayAfter,u=o.focusDayBefore,d=o.focusWeekAfter,h=o.focusWeekBefore,m=o.blur,p=o.focus,v=o.focusMonthBefore,N=o.focusMonthAfter,b=o.focusYearBefore,j=o.focusYearAfter,_=o.focusStartOfWeek,x=o.focusEndOfWeek,S=function(Z){var z,H,q,X;Vw(n)?(z=r.onDayClick)===null||z===void 0||z.call(r,t,e,Z):Qg(n)?(H=s.onDayClick)===null||H===void 0||H.call(s,t,e,Z):Yg(n)?(q=a.onDayClick)===null||q===void 0||q.call(a,t,e,Z):(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,Z)},C=function(Z){var z;p(t),(z=n.onDayFocus)===null||z===void 0||z.call(n,t,e,Z)},R=function(Z){var z;m(),(z=n.onDayBlur)===null||z===void 0||z.call(n,t,e,Z)},V=function(Z){var z;(z=n.onDayMouseEnter)===null||z===void 0||z.call(n,t,e,Z)},k=function(Z){var z;(z=n.onDayMouseLeave)===null||z===void 0||z.call(n,t,e,Z)},I=function(Z){var z;(z=n.onDayPointerEnter)===null||z===void 0||z.call(n,t,e,Z)},$=function(Z){var z;(z=n.onDayPointerLeave)===null||z===void 0||z.call(n,t,e,Z)},T=function(Z){var z;(z=n.onDayTouchCancel)===null||z===void 0||z.call(n,t,e,Z)},M=function(Z){var z;(z=n.onDayTouchEnd)===null||z===void 0||z.call(n,t,e,Z)},D=function(Z){var z;(z=n.onDayTouchMove)===null||z===void 0||z.call(n,t,e,Z)},O=function(Z){var z;(z=n.onDayTouchStart)===null||z===void 0||z.call(n,t,e,Z)},B=function(Z){var z;(z=n.onDayKeyUp)===null||z===void 0||z.call(n,t,e,Z)},Y=function(Z){var z;switch(Z.key){case"ArrowLeft":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?l():u();break;case"ArrowRight":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?u():l();break;case"ArrowDown":Z.preventDefault(),Z.stopPropagation(),d();break;case"ArrowUp":Z.preventDefault(),Z.stopPropagation(),h();break;case"PageUp":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?b():v();break;case"PageDown":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?j():N();break;case"Home":Z.preventDefault(),Z.stopPropagation(),_();break;case"End":Z.preventDefault(),Z.stopPropagation(),x();break}(z=n.onDayKeyDown)===null||z===void 0||z.call(n,t,e,Z)},ee={onClick:S,onFocus:C,onBlur:R,onKeyDown:Y,onKeyUp:B,onMouseEnter:V,onMouseLeave:k,onPointerEnter:I,onPointerLeave:$,onTouchCancel:T,onTouchEnd:M,onTouchMove:D,onTouchStart:O};return ee}function qce(){var t=pn(),e=d$(),n=IP(),r=OP(),s=Vw(t)?e.selected:Qg(t)?n.selected:Yg(t)?r.selected:void 0;return s}function Gce(t){return Object.values(ea).includes(t)}function Kce(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(Gce(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Zce(t,e){var n=mt({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=mt(mt({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function Qce(t,e,n){var r,s,a,o=pn(),l=DP(),u=Uce(t,e),d=Hce(t,u),h=qce(),m=!!(o.onDayClick||o.mode!=="default");w.useEffect(function(){var V;u.outside||l.focusedDay&&m&&Cs(l.focusedDay,t)&&((V=n.current)===null||V===void 0||V.focus())},[l.focusedDay,t,n,m,u.outside]);var p=Kce(o,u).join(" "),v=Zce(o,u),N=!!(u.outside&&!o.showOutsideDays||u.hidden),b=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:vce,j=i.jsx(b,{date:t,displayMonth:e,activeModifiers:u}),_={style:v,className:p,children:j,role:"gridcell"},x=l.focusTarget&&Cs(l.focusTarget,t)&&!u.outside,S=l.focusedDay&&Cs(l.focusedDay,t),C=mt(mt(mt({},_),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=S||x?0:-1,r)),d),R={isButton:m,isHidden:N,activeModifiers:u,selectedDays:h,buttonProps:C,divProps:_};return R}function Yce(t){var e=w.useRef(null),n=Qce(t.date,t.displayMonth,e);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(o0,mt({name:"day",ref:e},n.buttonProps)):i.jsx("div",mt({},n.divProps))}function Jce(t){var e=t.number,n=t.dates,r=pn(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,u=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,h=d(Number(e),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:h});var m=u(Number(e),{locale:l}),p=function(v){s(e,n,v)};return i.jsx(o0,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:p,children:h})}function Xce(t){var e,n,r=pn(),s=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,u=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Yce,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Jce,h;return o&&(h=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(d,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[h,t.dates.map(function(m){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(u,{displayMonth:t.displayMonth,date:m})},Pae(m))})]})}function Ik(t,e,n){for(var r=n!=null&&n.ISOWeek?F5(e):NP(e,n),s=n!=null&&n.ISOWeek?wu(t):Ua(t,n),a=Ea(r,s),o=[],l=0;l<=a;l++)o.push(ls(s,l));var u=o.reduce(function(d,h){var m=n!=null&&n.ISOWeek?V5(h):U5(h,n),p=d.find(function(v){return v.weekNumber===m});return p?(p.dates.push(h),d):(d.push({weekNumber:m,dates:[h]}),d)},[]);return u}function eue(t,e){var n=Ik(Os(t),Ow(t),e);if(e!=null&&e.useFixedWeeks){var r=Tae(t,e);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=Pj(a,6-r),l=Ik(Pj(a,1),o,e);n.push.apply(n,l)}}return n}function tue(t){var e,n,r,s=pn(),a=s.locale,o=s.classNames,l=s.styles,u=s.hideHead,d=s.fixedWeeks,h=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,v=s.ISOWeek,N=eue(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:v,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),b=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:gce,j=(n=h==null?void 0:h.Row)!==null&&n!==void 0?n:Xce,_=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:fce;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&i.jsx(b,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:N.map(function(x){return i.jsx(j,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),i.jsx(_,{displayMonth:t.displayMonth})]})}function nue(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var rue=nue()?w.useLayoutEffect:w.useEffect,N_=!1,sue=0;function Ak(){return"react-day-picker-".concat(++sue)}function iue(t){var e,n=t??(N_?Ak():null),r=w.useState(n),s=r[0],a=r[1];return rue(function(){s===null&&a(Ak())},[]),w.useEffect(function(){N_===!1&&(N_=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function aue(t){var e,n,r=pn(),s=r.dir,a=r.classNames,o=r.styles,l=r.components,u=Jg().displayMonths,d=iue(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[a.month],p=o.month,v=t.displayIndex===0,N=t.displayIndex===u.length-1,b=!v&&!N;s==="rtl"&&(e=[v,N],N=e[0],v=e[1]),v&&(m.push(a.caption_start),p=mt(mt({},p),o.caption_start)),N&&(m.push(a.caption_end),p=mt(mt({},p),o.caption_end)),b&&(m.push(a.caption_between),p=mt(mt({},p),o.caption_between));var j=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:hce;return i.jsxs("div",{className:m.join(" "),style:p,children:[i.jsx(j,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(tue,{id:h,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function oue(t){var e=pn(),n=e.classNames,r=e.styles;return i.jsx("div",{className:n.months,style:r.months,children:t.children})}function lue(t){var e,n,r=t.initialProps,s=pn(),a=DP(),o=Jg(),l=w.useState(!1),u=l[0],d=l[1];w.useEffect(function(){s.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),d(!0)))},[s.initialFocus,u,a.focus,a.focusTarget,a]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var m=mt(mt({},s.styles.root),s.style),p=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,b){var j;return mt(mt({},N),(j={},j[b]=r[b],j))},{}),v=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:oue;return i.jsx("div",mt({className:h.join(" "),style:m,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:i.jsx(v,{children:o.displayMonths.map(function(N,b){return i.jsx(aue,{displayIndex:b,displayMonth:N},b)})})}))}function cue(t){var e=t.children,n=Ale(t,["children"]);return i.jsx(Jle,{initialProps:n,children:i.jsx(lce,{children:i.jsx(Bce,{initialProps:n,children:i.jsx(yce,{initialProps:n,children:i.jsx(bce,{initialProps:n,children:i.jsx(Tce,{children:i.jsx(zce,{children:e})})})})})})})}function uue(t){return i.jsx(cue,mt({},t,{children:i.jsx(lue,{initialProps:t})}))}function h$({className:t,classNames:e,showOutsideDays:n=!0,...r}){return i.jsx(uue,{showOutsideDays:n,className:ot("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ot(vj({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:ot("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:ot(vj({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>i.jsx(pse,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(v5,{className:"h-4 w-4"})},...r})}h$.displayName="Calendar";var zw="Popover",[f$,eje]=$r(zw,[sf]),Xg=sf(),[due,gc]=f$(zw),m$=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=Xg(e),u=w.useRef(null),[d,h]=w.useState(!1),[m,p]=Js({prop:r,defaultProp:s??!1,onChange:a,caller:zw});return i.jsx(cP,{...l,children:i.jsx(due,{scope:e,contentId:Zs(),triggerRef:u,open:m,onOpenChange:p,onOpenToggle:w.useCallback(()=>p(v=>!v),[p]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>h(!0),[]),onCustomAnchorRemove:w.useCallback(()=>h(!1),[]),modal:o,children:n})})};m$.displayName=zw;var p$="PopoverAnchor",hue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=gc(p$,n),a=Xg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return w.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Sw,{...a,...r,ref:e})});hue.displayName=p$;var g$="PopoverTrigger",v$=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=gc(g$,n),a=Xg(n),o=pt(e,s.triggerRef),l=i.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_$(s.open),...r,ref:o,onClick:$e(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Sw,{asChild:!0,...a,children:l})});v$.displayName=g$;var FP="PopoverPortal",[fue,mue]=f$(FP,{forceMount:void 0}),y$=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,a=gc(FP,e);return i.jsx(fue,{scope:e,forceMount:n,children:i.jsx(Vr,{present:n||a.open,children:i.jsx(Wg,{asChild:!0,container:s,children:r})})})};y$.displayName=FP;var kh="PopoverContent",x$=w.forwardRef((t,e)=>{const n=mue(kh,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,a=gc(kh,t.__scopePopover);return i.jsx(Vr,{present:r||a.open,children:a.modal?i.jsx(gue,{...s,ref:e}):i.jsx(vue,{...s,ref:e})})});x$.displayName=kh;var pue=nc("PopoverContent.RemoveScroll"),gue=w.forwardRef((t,e)=>{const n=gc(kh,t.__scopePopover),r=w.useRef(null),s=pt(e,r),a=w.useRef(!1);return w.useEffect(()=>{const o=r.current;if(o)return Pw(o)},[]),i.jsx(qg,{as:pue,allowPinchZoom:!0,children:i.jsx(w$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:$e(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:$e(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),vue=w.forwardRef((t,e)=>{const n=gc(kh,t.__scopePopover),r=w.useRef(!1),s=w.useRef(!1);return i.jsx(w$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),w$=w.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...m}=t,p=gc(kh,n),v=Xg(n);return ww(),i.jsx(Ug,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(zg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(uP,{"data-state":_$(p.open),role:"dialog",id:p.contentId,...v,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),b$="PopoverClose",yue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=gc(b$,n);return i.jsx(Qe.button,{type:"button",...r,ref:e,onClick:$e(t.onClick,()=>s.onOpenChange(!1))})});yue.displayName=b$;var xue="PopoverArrow",wue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Xg(n);return i.jsx(dP,{...s,...r,ref:e})});wue.displayName=xue;function _$(t){return t?"open":"closed"}var bue=m$,_ue=v$,jue=y$,j$=x$;const Nue=bue,Sue=_ue,N$=w.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>i.jsx(jue,{children:i.jsx(j$,{ref:s,align:e,sideOffset:n,className:ot("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));N$.displayName=j$.displayName;const vd=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Uw=af((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),s={...n,securityCode:r,status:"pending",createdAt:mr(),updatedAt:mr()},a=await Xl(Ut(Ue,"paymentRequests"),s),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),je.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),je.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:mr()};s&&(a.notes=s),await En(_t(Ue,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:s||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};je.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),je.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=Pn(Ut(Ue,"paymentRequests"),lr("buyerId","==",n),yi(50)),s=Pn(Ut(Ue,"paymentRequests"),lr("sellerId","==",n),yi(50)),[a,o]=await Promise.all([Zn(r),Zn(s)]),l=[];a.forEach(u=>{const d=u.data();l.push({id:u.id,...d,createdAt:vd(d.createdAt),updatedAt:vd(d.updatedAt),meetingDateTime:d.meetingDateTime?vd(d.meetingDateTime):void 0})}),o.forEach(u=>{const d=u.data();l.find(h=>h.id===u.id)||l.push({id:u.id,...d,createdAt:vd(d.createdAt),updatedAt:vd(d.updatedAt),meetingDateTime:d.meetingDateTime?vd(d.meetingDateTime):void 0})}),l.sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),je.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:s}=e(),a=s.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const s=[];switch(n){case"cash":s.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":s.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&s.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":s.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&s.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":s.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&s.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return s}}));var S$="https://js.stripe.com/v3",Eue=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Pue=function(){for(var e=document.querySelectorAll('script[src^="'.concat(S$,'"]')),n=0;n<e.length;n++){var r=e[n];if(Eue.test(r.src))return r}return null},Ok=function(e){var n="",r=document.createElement("script");r.src="".concat(S$).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Cue=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},em=null,dy=null,hy=null,Tue=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Rue=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},kue=function(e){return em!==null?em:(em=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Pue();if(!(s&&e)){if(!s)s=Ok(e);else if(s&&hy!==null&&dy!==null){var a;s.removeEventListener("load",hy),s.removeEventListener("error",dy),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=Ok(e)}}hy=Rue(n,r),dy=Tue(r),s.addEventListener("load",hy),s.addEventListener("error",dy)}catch(o){r(o);return}}),em.catch(function(n){return em=null,Promise.reject(n)}))},Iue=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return Cue(s,r),s},tm,E$=!1,P$=function(){return tm||(tm=kue(null).catch(function(e){return tm=null,Promise.reject(e)}),tm)};Promise.resolve().then(function(){return P$()}).catch(function(t){E$||console.warn(t)});var C$=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];E$=!0;var s=Date.now();return P$().then(function(a){return Iue(a,n,s)})},T$={exports:{}},Aue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oue=Aue,Mue=Oue;function R$(){}function k$(){}k$.resetWarningCache=R$;var Due=function(){function t(r,s,a,o,l,u){if(u!==Mue){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:k$,resetWarningCache:R$};return n.PropTypes=n,n};T$.exports=Due();var Lue=T$.exports;const In=zo(Lue);function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){I$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qy(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qy=function(e){return typeof e}:Qy=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function I$(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A$(t,e){return Fue(t)||$ue(t,e)||Vue(t,e)||zue()}function Fue(t){if(Array.isArray(t))return t}function $ue(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(u){a=!0,l=u}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Vue(t,e){if(t){if(typeof t=="string")return Lk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lk(t,e)}}function Lk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $s=function(e,n,r){var s=!!r,a=oe.useRef(r);oe.useEffect(function(){a.current=r},[r]),oe.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[s,n,e,a])},Oj=function(e){var n=oe.useRef(e);return oe.useEffect(function(){n.current=e},[e]),n.current},Ih=function(e){return e!==null&&Qy(e)==="object"},Uue=function(e){return Ih(e)&&typeof e.then=="function"},Bue=function(e){return Ih(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Fk="[object Object]",Wue=function t(e,n){if(!Ih(e)||!Ih(n))return e===n;var r=Array.isArray(e),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(e)===Fk,o=Object.prototype.toString.call(n)===Fk;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d={},h=0;h<l.length;h+=1)d[l[h]]=!0;for(var m=0;m<u.length;m+=1)d[u[m]]=!0;var p=Object.keys(d);if(p.length!==l.length)return!1;var v=e,N=n,b=function(_){return t(v[_],N[_])};return p.every(b)},O$=function(e,n,r){return Ih(e)?Object.keys(e).reduce(function(s,a){var o=!Ih(n)||!Wue(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?Dk(Dk({},s||{}),{},I$({},a,e[a])):s},null):null},M$="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",$k=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M$;if(e===null||Bue(e))return e;throw new Error(n)},Hue=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M$;if(Uue(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return $k(s,n)})};var r=$k(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},que=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Bw=oe.createContext(null);Bw.displayName="ElementsContext";var D$=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},L$=function(e){var n=e.stripe,r=e.options,s=e.children,a=oe.useMemo(function(){return Hue(n)},[n]),o=oe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=A$(o,2),u=l[0],d=l[1];oe.useEffect(function(){var p=!0,v=function(b){d(function(j){return j.stripe?j:{stripe:b,elements:b.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(N){N&&p&&v(N)}):a.tag==="sync"&&!u.stripe&&v(a.stripe),function(){p=!1}},[a,u,r]);var h=Oj(n);oe.useEffect(function(){h!==null&&h!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,n]);var m=Oj(r);return oe.useEffect(function(){if(u.elements){var p=O$(r,m,["clientSecret","fonts"]);p&&u.elements.update(p)}},[r,m,u.elements]),oe.useEffect(function(){que(u.stripe)},[u.stripe]),oe.createElement(Bw.Provider,{value:u},s)};L$.propTypes={stripe:In.any,options:In.object};var Gue=function(e){var n=oe.useContext(Bw);return D$(n,e)},Kue=function(){var e=Gue("calls useElements()"),n=e.elements;return n};In.func.isRequired;var F$=oe.createContext(null);F$.displayName="CustomCheckoutSdkContext";var Zue=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},Que=oe.createContext(null);Que.displayName="CustomCheckoutContext";In.any,In.shape({clientSecret:In.string.isRequired,elementsOptions:In.object}).isRequired;var Mj=function(e){var n=oe.useContext(F$),r=oe.useContext(Bw);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Zue(n,e):D$(r,e)},Yue=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cr=function(e,n){var r="".concat(Yue(e),"Element"),s=function(u){var d=u.id,h=u.className,m=u.options,p=m===void 0?{}:m,v=u.onBlur,N=u.onFocus,b=u.onReady,j=u.onChange,_=u.onEscape,x=u.onClick,S=u.onLoadError,C=u.onLoaderStart,R=u.onNetworksChange,V=u.onConfirm,k=u.onCancel,I=u.onShippingAddressChange,$=u.onShippingRateChange,T=Mj("mounts <".concat(r,">")),M="elements"in T?T.elements:null,D="customCheckoutSdk"in T?T.customCheckoutSdk:null,O=oe.useState(null),B=A$(O,2),Y=B[0],ee=B[1],Z=oe.useRef(null),z=oe.useRef(null);$s(Y,"blur",v),$s(Y,"focus",N),$s(Y,"escape",_),$s(Y,"click",x),$s(Y,"loaderror",S),$s(Y,"loaderstart",C),$s(Y,"networkschange",R),$s(Y,"confirm",V),$s(Y,"cancel",k),$s(Y,"shippingaddresschange",I),$s(Y,"shippingratechange",$),$s(Y,"change",j);var H;b&&(e==="expressCheckout"?H=b:H=function(){b(Y)}),$s(Y,"ready",H),oe.useLayoutEffect(function(){if(Z.current===null&&z.current!==null&&(M||D)){var X=null;D?X=D.createElement(e,p):M&&(X=M.create(e,p)),Z.current=X,ee(X),X&&X.mount(z.current)}},[M,D,p]);var q=Oj(p);return oe.useEffect(function(){if(Z.current){var X=O$(p,q,["paymentRequest"]);X&&"update"in Z.current&&Z.current.update(X)}},[p,q]),oe.useLayoutEffect(function(){return function(){if(Z.current&&typeof Z.current.destroy=="function")try{Z.current.destroy(),Z.current=null}catch{}}},[]),oe.createElement("div",{id:d,className:h,ref:z})},a=function(u){Mj("mounts <".concat(r,">"));var d=u.id,h=u.className;return oe.createElement("div",{id:d,className:h})},o=n?a:s;return o.propTypes={id:In.string,className:In.string,onChange:In.func,onBlur:In.func,onFocus:In.func,onReady:In.func,onEscape:In.func,onClick:In.func,onLoadError:In.func,onLoaderStart:In.func,onNetworksChange:In.func,onConfirm:In.func,onCancel:In.func,onShippingAddressChange:In.func,onShippingRateChange:In.func,options:In.object},o.displayName=r,o.__elementType=e,o},ur=typeof window>"u",Jue=oe.createContext(null);Jue.displayName="EmbeddedCheckoutProviderContext";var Xue=function(){var e=Mj("calls useStripe()"),n=e.stripe;return n};cr("auBankAccount",ur);cr("card",ur);cr("cardNumber",ur);cr("cardExpiry",ur);cr("cardCvc",ur);cr("fpxBank",ur);cr("iban",ur);cr("idealBank",ur);cr("p24Bank",ur);cr("epsBank",ur);cr("payment",ur);cr("expressCheckout",ur);cr("currencySelector",ur);cr("paymentRequestButton",ur);cr("linkAuthentication",ur);cr("address",ur);cr("shippingAddress",ur);cr("paymentMethodMessaging",ur);cr("affirmMessage",ur);cr("afterpayClearpayMessage",ur);const ede=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Xue(),Kue();const[s,a]=w.useState(!1),[o,l]=w.useState(null),u=async d=>{d.preventDefault(),a(!0),l(null);try{await new Promise(m=>setTimeout(m,2e3));const h="pi_"+Math.random().toString(36).substring(2,15);je.success("Paiement réussi !"),n(h)}catch(h){console.error("Payment error:",h),l(h.message||"Une erreur est survenue lors du paiement"),r(h.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),i.jsx(Rt,{children:"Paiement sécurisé via Stripe"})]}),i.jsx(ve,{children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("div",{className:"p-4 border rounded-md",children:i.jsx("div",{className:"h-10 flex items-center",children:i.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&i.jsxs(qt,{className:"border-red-200 bg-red-50",children:[i.jsx(Un,{className:"h-4 w-4 text-red-600"}),i.jsx(Gt,{className:"text-red-800",children:o})]}),i.jsxs(qt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(yu,{className:"h-4 w-4 text-blue-600"}),i.jsx(Gt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),i.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),i.jsx("li",{children:"Date : n'importe quelle date future"}),i.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),i.jsx(re,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-secondary",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(yu,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},Vk=C$("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),tde=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const s={appearance:{theme:"stripe"},locale:"fr"};return Vk?i.jsx(L$,{stripe:Vk,options:s,children:i.jsx(ede,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):i.jsxs(qt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Un,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Gt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},$$=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:s,calculateFees:a}=Uw(),[o,l]=w.useState({}),[u,d]=w.useState({}),[h,m]=w.useState(null),p=[{id:"card",type:"card",name:"Carte bancaire",icon:Qn,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...s],v=R=>{switch(R){case"card":return Qn;case"cash":return g3;case"transfer":return w3;case"paypal":return Qn;case"lydia":return Mu;default:return Qn}},N=R=>{switch(R){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=(R,V)=>{var I,$;const k={};switch(R){case"card":return!0;case"transfer":(I=V.bankDetails)!=null&&I.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(V.bankDetails.iban.replace(/\s/g,""))||(k.iban="Format IBAN invalide"):k.iban="IBAN requis",($=V.bankDetails)!=null&&$.accountName||(k.accountName="Nom du titulaire requis");break;case"paypal":V.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V.paypalEmail)||(k.paypalEmail="Format email invalide"):k.paypalEmail="Email PayPal requis";break;case"lydia":V.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(V.lydiaPhone.replace(/\s/g,""))||(k.lydiaPhone="Format de téléphone invalide"):k.lydiaPhone="Numéro de téléphone requis";break}return d(k),Object.keys(k).length===0},j=R=>{if(R==="card"){n(R,{});return}const V=o[R]||{};(R==="cash"||b(R,V))&&n(R,V)},_=(R,V,k)=>{l(I=>({...I,[R]:{...I[R],[V]:k}}))},x=(R,V)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:V||"EUR"}).format(R),S=R=>{m(R),n("card",{stripePaymentId:R})},C=R=>{console.error("Stripe payment error:",R)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),i.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",i.jsx("span",{className:"font-semibold text-primary",children:x(t,e)})]})]}),r==="card"?i.jsx(tde,{amount:t,currency:e,onPaymentSuccess:S,onPaymentError:C}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(R=>{var T,M,D,O,B,Y,ee,Z;const V=v(R.type),k=R.type==="card"?t*R.fees/100:a(t,R.type),I=t+k,$=r===R.type;return i.jsxs(ge,{className:`cursor-pointer transition-all hover:shadow-md ${$?"ring-2 ring-primary bg-primary/5":""} ${R.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>R.available&&j(R.type),children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(V,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx(rt,{className:"text-lg",children:R.name}),i.jsx(Rt,{className:"text-sm",children:R.description})]})]}),$&&i.jsx(At,{className:"w-6 h-6 text-green-600"})]})}),i.jsxs(ve,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jn,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:R.processingTime})]}),i.jsxs(ct,{className:N(R.securityLevel),children:[i.jsx(Bt,{className:"w-3 h-3 mr-1"}),R.securityLevel==="high"?"Très sécurisé":R.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),k>0&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Montant :"}),i.jsx("span",{children:x(t,e)})]}),i.jsxs("div",{className:"flex justify-between text-orange-600",children:[i.jsxs("span",{children:["Frais (",R.fees,"%) :"]}),i.jsx("span",{children:x(k,e)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total :"}),i.jsx("span",{children:x(I,e)})]})]}),$&&R.type!=="cash"&&R.type!=="card"&&i.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[R.type==="transfer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:`iban-${R.id}`,children:"IBAN *"}),i.jsx(Ke,{id:`iban-${R.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((M=(T=o[R.type])==null?void 0:T.bankDetails)==null?void 0:M.iban)||"",onChange:z=>{var H;return _(R.type,"bankDetails",{...(H=o[R.type])==null?void 0:H.bankDetails,iban:z.target.value})},className:u.iban?"border-red-500":""}),u.iban&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:`account-name-${R.id}`,children:"Nom du titulaire *"}),i.jsx(Ke,{id:`account-name-${R.id}`,placeholder:"Jean Dupont",value:((O=(D=o[R.type])==null?void 0:D.bankDetails)==null?void 0:O.accountName)||"",onChange:z=>{var H;return _(R.type,"bankDetails",{...(H=o[R.type])==null?void 0:H.bankDetails,accountName:z.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:`bic-${R.id}`,children:"BIC (optionnel)"}),i.jsx(Ke,{id:`bic-${R.id}`,placeholder:"BNPAFRPP",value:((Y=(B=o[R.type])==null?void 0:B.bankDetails)==null?void 0:Y.bic)||"",onChange:z=>{var H;return _(R.type,"bankDetails",{...(H=o[R.type])==null?void 0:H.bankDetails,bic:z.target.value})}})]})]}),R.type==="paypal"&&i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:`paypal-email-${R.id}`,children:"Email PayPal *"}),i.jsx(Ke,{id:`paypal-email-${R.id}`,type:"email",placeholder:"votre.email@example.com",value:((ee=o[R.type])==null?void 0:ee.paypalEmail)||"",onChange:z=>_(R.type,"paypalEmail",z.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),R.type==="lydia"&&i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:`lydia-phone-${R.id}`,children:"Numéro de téléphone *"}),i.jsx(Ke,{id:`lydia-phone-${R.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((Z=o[R.type])==null?void 0:Z.lydiaPhone)||"",onChange:z=>_(R.type,"lydiaPhone",z.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),$&&R.type!=="card"&&i.jsxs(qt,{className:"mt-3",children:[i.jsx(ec,{className:"h-4 w-4"}),i.jsxs(Gt,{children:[R.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",R.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",R.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",R.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},R.id)})}),i.jsxs(qt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Un,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Gt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function nde(t,e){const n=w.useRef(e);w.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const rde=1;function sde(t){return Object.freeze({__version:rde,map:t})}function ide(t,e){return Object.freeze({...t,...e})}const V$=w.createContext(null),z$=V$.Provider;function U$(){const t=w.useContext(V$);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function ade(t){function e(n,r){const{instance:s,context:a}=t(n).current;return w.useImperativeHandle(r,()=>s),n.children==null?null:oe.createElement(z$,{value:a},n.children)}return w.forwardRef(e)}function ode(t){function e(n,r){const{instance:s}=t(n).current;return w.useImperativeHandle(r,()=>s),null}return w.forwardRef(e)}function lde(t,e){const n=w.useRef();w.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function B$(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Dj={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(rO,function(n){var r="1.9.4";function s(c){var f,y,E,A;for(y=1,E=arguments.length;y<E;y++){A=arguments[y];for(f in A)c[f]=A[f]}return c}var a=Object.create||function(){function c(){}return function(f){return c.prototype=f,new c}}();function o(c,f){var y=Array.prototype.slice;if(c.bind)return c.bind.apply(c,y.call(arguments,1));var E=y.call(arguments,2);return function(){return c.apply(f,E.length?E.concat(y.call(arguments)):arguments)}}var l=0;function u(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function d(c,f,y){var E,A,U,Q;return Q=function(){E=!1,A&&(U.apply(y,A),A=!1)},U=function(){E?A=arguments:(c.apply(y,arguments),setTimeout(Q,f),E=!0)},U}function h(c,f,y){var E=f[1],A=f[0],U=E-A;return c===E&&y?c:((c-A)%U+U)%U+A}function m(){return!1}function p(c,f){if(f===!1)return c;var y=Math.pow(10,f===void 0?6:f);return Math.round(c*y)/y}function v(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function N(c){return v(c).split(/\s+/)}function b(c,f){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var y in f)c.options[y]=f[y];return c.options}function j(c,f,y){var E=[];for(var A in c)E.push(encodeURIComponent(y?A.toUpperCase():A)+"="+encodeURIComponent(c[A]));return(!f||f.indexOf("?")===-1?"?":"&")+E.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function x(c,f){return c.replace(_,function(y,E){var A=f[E];if(A===void 0)throw new Error("No value provided for variable "+y);return typeof A=="function"&&(A=A(f)),A})}var S=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function C(c,f){for(var y=0;y<c.length;y++)if(c[y]===f)return y;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var k=0;function I(c){var f=+new Date,y=Math.max(0,16-(f-k));return k=f+y,window.setTimeout(c,y)}var $=window.requestAnimationFrame||V("RequestAnimationFrame")||I,T=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function M(c,f,y){if(y&&$===I)c.call(f);else return $.call(window,o(c,f))}function D(c){c&&T.call(window,c)}var O={__proto__:null,extend:s,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:m,formatNum:p,trim:v,splitWords:N,setOptions:b,getParamString:j,template:x,isArray:S,indexOf:C,emptyImageUrl:R,requestFn:$,cancelFn:T,requestAnimFrame:M,cancelAnimFrame:D};function B(){}B.extend=function(c){var f=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=f.__super__=this.prototype,E=a(y);E.constructor=f,f.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(f[A]=this[A]);return c.statics&&s(f,c.statics),c.includes&&(Y(c.includes),s.apply(null,[E].concat(c.includes))),s(E,c),delete E.statics,delete E.includes,E.options&&(E.options=y.options?a(y.options):{},s(E.options,c.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,Q=E._initHooks.length;U<Q;U++)E._initHooks[U].call(this)}},f},B.include=function(c){var f=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=f,this.mergeOptions(c.options)),this},B.mergeOptions=function(c){return s(this.prototype.options,c),this},B.addInitHook=function(c){var f=Array.prototype.slice.call(arguments,1),y=typeof c=="function"?c:function(){this[c].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function Y(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=S(c)?c:[c];for(var f=0;f<c.length;f++)c[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(c,f,y){if(typeof c=="object")for(var E in c)this._on(E,c[E],f);else{c=N(c);for(var A=0,U=c.length;A<U;A++)this._on(c[A],f,y)}return this},off:function(c,f,y){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var E in c)this._off(E,c[E],f);else{c=N(c);for(var A=arguments.length===1,U=0,Q=c.length;U<Q;U++)A?this._off(c[U]):this._off(c[U],f,y)}return this},_on:function(c,f,y,E){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(c,f,y)===!1){y===this&&(y=void 0);var A={fn:f,ctx:y};E&&(A.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(A)}},_off:function(c,f,y){var E,A,U;if(this._events&&(E=this._events[c],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,U=E.length;A<U;A++)E[A].fn=m;delete this._events[c];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var Q=this._listens(c,f,y);if(Q!==!1){var ce=E[Q];this._firingCount&&(ce.fn=m,this._events[c]=E=E.slice()),E.splice(Q,1)}}},fire:function(c,f,y){if(!this.listens(c,y))return this;var E=s({},f,{type:c,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var A=this._events[c];if(A){this._firingCount=this._firingCount+1||1;for(var U=0,Q=A.length;U<Q;U++){var ce=A[U],fe=ce.fn;ce.once&&this.off(c,fe,ce.ctx),fe.call(ce.ctx||this,E)}this._firingCount--}}return y&&this._propagateEvent(E),this},listens:function(c,f,y,E){typeof c!="string"&&console.warn('"string" type argument expected');var A=f;typeof f!="function"&&(E=!!f,A=void 0,y=void 0);var U=this._events&&this._events[c];if(U&&U.length&&this._listens(c,A,y)!==!1)return!0;if(E){for(var Q in this._eventParents)if(this._eventParents[Q].listens(c,f,y,E))return!0}return!1},_listens:function(c,f,y){if(!this._events)return!1;var E=this._events[c]||[];if(!f)return!!E.length;y===this&&(y=void 0);for(var A=0,U=E.length;A<U;A++)if(E[A].fn===f&&E[A].ctx===y)return A;return!1},once:function(c,f,y){if(typeof c=="object")for(var E in c)this._on(E,c[E],f,!0);else{c=N(c);for(var A=0,U=c.length;A<U;A++)this._on(c[A],f,y,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[u(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[u(c)],this},_propagateEvent:function(c){for(var f in this._eventParents)this._eventParents[f].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var Z=B.extend(ee);function z(c,f,y){this.x=y?Math.round(c):c,this.y=y?Math.round(f):f}var H=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(c){return this.clone()._add(q(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(q(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new z(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new z(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=H(this.x),this.y=H(this.y),this},distanceTo:function(c){c=q(c);var f=c.x-this.x,y=c.y-this.y;return Math.sqrt(f*f+y*y)},equals:function(c){return c=q(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=q(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function q(c,f,y){return c instanceof z?c:S(c)?new z(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new z(c.x,c.y):new z(c,f,y)}function X(c,f){if(c)for(var y=f?[c,f]:c,E=0,A=y.length;E<A;E++)this.extend(y[E])}X.prototype={extend:function(c){var f,y;if(!c)return this;if(c instanceof z||typeof c[0]=="number"||"x"in c)f=y=q(c);else if(c=me(c),f=c.min,y=c.max,!f||!y)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=y.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(c){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var f,y;return typeof c[0]=="number"||c instanceof z?c=q(c):c=me(c),c instanceof X?(f=c.min,y=c.max):f=y=c,f.x>=this.min.x&&y.x<=this.max.x&&f.y>=this.min.y&&y.y<=this.max.y},intersects:function(c){c=me(c);var f=this.min,y=this.max,E=c.min,A=c.max,U=A.x>=f.x&&E.x<=y.x,Q=A.y>=f.y&&E.y<=y.y;return U&&Q},overlaps:function(c){c=me(c);var f=this.min,y=this.max,E=c.min,A=c.max,U=A.x>f.x&&E.x<y.x,Q=A.y>f.y&&E.y<y.y;return U&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var f=this.min,y=this.max,E=Math.abs(f.x-y.x)*c,A=Math.abs(f.y-y.y)*c;return me(q(f.x-E,f.y-A),q(y.x+E,y.y+A))},equals:function(c){return c?(c=me(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function me(c,f){return!c||c instanceof X?c:new X(c,f)}function Ee(c,f){if(c)for(var y=f?[c,f]:c,E=0,A=y.length;E<A;E++)this.extend(y[E])}Ee.prototype={extend:function(c){var f=this._southWest,y=this._northEast,E,A;if(c instanceof Me)E=c,A=c;else if(c instanceof Ee){if(E=c._southWest,A=c._northEast,!E||!A)return this}else return c?this.extend(ue(c)||Fe(c)):this;return!f&&!y?(this._southWest=new Me(E.lat,E.lng),this._northEast=new Me(A.lat,A.lng)):(f.lat=Math.min(E.lat,f.lat),f.lng=Math.min(E.lng,f.lng),y.lat=Math.max(A.lat,y.lat),y.lng=Math.max(A.lng,y.lng)),this},pad:function(c){var f=this._southWest,y=this._northEast,E=Math.abs(f.lat-y.lat)*c,A=Math.abs(f.lng-y.lng)*c;return new Ee(new Me(f.lat-E,f.lng-A),new Me(y.lat+E,y.lng+A))},getCenter:function(){return new Me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Me(this.getNorth(),this.getWest())},getSouthEast:function(){return new Me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Me||"lat"in c?c=ue(c):c=Fe(c);var f=this._southWest,y=this._northEast,E,A;return c instanceof Ee?(E=c.getSouthWest(),A=c.getNorthEast()):E=A=c,E.lat>=f.lat&&A.lat<=y.lat&&E.lng>=f.lng&&A.lng<=y.lng},intersects:function(c){c=Fe(c);var f=this._southWest,y=this._northEast,E=c.getSouthWest(),A=c.getNorthEast(),U=A.lat>=f.lat&&E.lat<=y.lat,Q=A.lng>=f.lng&&E.lng<=y.lng;return U&&Q},overlaps:function(c){c=Fe(c);var f=this._southWest,y=this._northEast,E=c.getSouthWest(),A=c.getNorthEast(),U=A.lat>f.lat&&E.lat<y.lat,Q=A.lng>f.lng&&E.lng<y.lng;return U&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,f){return c?(c=Fe(c),this._southWest.equals(c.getSouthWest(),f)&&this._northEast.equals(c.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(c,f){return c instanceof Ee?c:new Ee(c,f)}function Me(c,f,y){if(isNaN(c)||isNaN(f))throw new Error("Invalid LatLng object: ("+c+", "+f+")");this.lat=+c,this.lng=+f,y!==void 0&&(this.alt=+y)}Me.prototype={equals:function(c,f){if(!c)return!1;c=ue(c);var y=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return y<=(f===void 0?1e-9:f)},toString:function(c){return"LatLng("+p(this.lat,c)+", "+p(this.lng,c)+")"},distanceTo:function(c){return J.distance(this,ue(c))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(c){var f=180*c/40075017,y=f/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-f,this.lng-y],[this.lat+f,this.lng+y])},clone:function(){return new Me(this.lat,this.lng,this.alt)}};function ue(c,f,y){return c instanceof Me?c:S(c)&&typeof c[0]!="object"?c.length===3?new Me(c[0],c[1],c[2]):c.length===2?new Me(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Me(c.lat,"lng"in c?c.lng:c.lon,c.alt):f===void 0?null:new Me(c,f,y)}var ye={latLngToPoint:function(c,f){var y=this.projection.project(c),E=this.scale(f);return this.transformation._transform(y,E)},pointToLatLng:function(c,f){var y=this.scale(f),E=this.transformation.untransform(c,y);return this.projection.unproject(E)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var f=this.projection.bounds,y=this.scale(c),E=this.transformation.transform(f.min,y),A=this.transformation.transform(f.max,y);return new X(E,A)},infinite:!1,wrapLatLng:function(c){var f=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,y=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,E=c.alt;return new Me(y,f,E)},wrapLatLngBounds:function(c){var f=c.getCenter(),y=this.wrapLatLng(f),E=f.lat-y.lat,A=f.lng-y.lng;if(E===0&&A===0)return c;var U=c.getSouthWest(),Q=c.getNorthEast(),ce=new Me(U.lat-E,U.lng-A),fe=new Me(Q.lat-E,Q.lng-A);return new Ee(ce,fe)}},J=s({},ye,{wrapLng:[-180,180],R:6371e3,distance:function(c,f){var y=Math.PI/180,E=c.lat*y,A=f.lat*y,U=Math.sin((f.lat-c.lat)*y/2),Q=Math.sin((f.lng-c.lng)*y/2),ce=U*U+Math.cos(E)*Math.cos(A)*Q*Q,fe=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*fe}}),te=6378137,ne={R:te,MAX_LATITUDE:85.0511287798,project:function(c){var f=Math.PI/180,y=this.MAX_LATITUDE,E=Math.max(Math.min(y,c.lat),-y),A=Math.sin(E*f);return new z(this.R*c.lng*f,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(c){var f=180/Math.PI;return new Me((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*f,c.x*f/this.R)},bounds:function(){var c=te*Math.PI;return new X([-c,-c],[c,c])}()};function K(c,f,y,E){if(S(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=f,this._c=y,this._d=E}K.prototype={transform:function(c,f){return this._transform(c.clone(),f)},_transform:function(c,f){return f=f||1,c.x=f*(this._a*c.x+this._b),c.y=f*(this._c*c.y+this._d),c},untransform:function(c,f){return f=f||1,new z((c.x/f-this._b)/this._a,(c.y/f-this._d)/this._c)}};function ie(c,f,y,E){return new K(c,f,y,E)}var he=s({},J,{code:"EPSG:3857",projection:ne,transformation:function(){var c=.5/(Math.PI*ne.R);return ie(c,.5,-c,.5)}()}),_e=s({},he,{code:"EPSG:900913"});function xe(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function se(c,f){var y="",E,A,U,Q,ce,fe;for(E=0,U=c.length;E<U;E++){for(ce=c[E],A=0,Q=ce.length;A<Q;A++)fe=ce[A],y+=(A?"L":"M")+fe.x+" "+fe.y;y+=f?lt.svg?"z":"x":""}return y||"M0 0"}var we=document.documentElement.style,Ne="ActiveXObject"in window,He=Ne&&!document.addEventListener,G="msLaunchUri"in navigator&&!("documentMode"in document),ae=ri("webkit"),de=ri("android"),Re=ri("android 2")||ri("android 3"),ke=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ce=de&&ri("Google")&&ke<537&&!("AudioNode"in window),De=!!window.opera,We=!G&&ri("chrome"),tt=ri("gecko")&&!ae&&!De&&!Ne,Ht=!We&&ri("safari"),Ln=ri("phantom"),Tn="OTransition"in we,Je=navigator.platform.indexOf("Win")===0,dr=Ne&&"transition"in we,ys="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Re,ia="MozPerspective"in we,zu=!window.L_DISABLE_3D&&(dr||ys||ia)&&!Tn&&!Ln,Za=typeof orientation<"u"||ri("mobile"),Go=Za&&ae,rv=Za&&ys,ff=!window.PointerEvent&&window.MSPointerEvent,Ko=!!(window.PointerEvent||ff),Uu="ontouchstart"in window||!!window.TouchEvent,mf=!window.L_NO_TOUCH&&(Uu||Ko),Qa=Za&&De,sv=Za&&tt,Bu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,iv=function(){var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",m,f),window.removeEventListener("testPassiveEventSupport",m,f)}catch{}return c}(),yc=function(){return!!document.createElement("canvas").getContext}(),Wu=!!(document.createElementNS&&xe("svg").createSVGRect),Cr=!!Wu&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),av=!Wu&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var f=c.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),xc=navigator.platform.indexOf("Mac")===0,wc=navigator.platform.indexOf("Linux")===0;function ri(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var lt={ie:Ne,ielt9:He,edge:G,webkit:ae,android:de,android23:Re,androidStock:Ce,opera:De,chrome:We,gecko:tt,safari:Ht,phantom:Ln,opera12:Tn,win:Je,ie3d:dr,webkit3d:ys,gecko3d:ia,any3d:zu,mobile:Za,mobileWebkit:Go,mobileWebkit3d:rv,msPointer:ff,pointer:Ko,touch:mf,touchNative:Uu,mobileOpera:Qa,mobileGecko:sv,retina:Bu,passiveEvents:iv,canvas:yc,svg:Wu,vml:av,inlineSvg:Cr,mac:xc,linux:wc},Ya=lt.msPointer?"MSPointerDown":"pointerdown",ov=lt.msPointer?"MSPointerMove":"pointermove",lv=lt.msPointer?"MSPointerUp":"pointerup",bc=lt.msPointer?"MSPointerCancel":"pointercancel",Hu={touchstart:Ya,touchmove:ov,touchend:lv,touchcancel:bc},qu={touchstart:Ku,touchmove:Gu,touchend:Gu,touchcancel:Gu},Pi={},Ci=!1;function cv(c,f,y){return f==="touchstart"&&dv(),qu[f]?(y=qu[f].bind(this,y),c.addEventListener(Hu[f],y,!1),y):(console.warn("wrong event specified:",f),m)}function uv(c,f,y){if(!Hu[f]){console.warn("wrong event specified:",f);return}c.removeEventListener(Hu[f],y,!1)}function pf(c){Pi[c.pointerId]=c}function gf(c){Pi[c.pointerId]&&(Pi[c.pointerId]=c)}function vf(c){delete Pi[c.pointerId]}function dv(){Ci||(document.addEventListener(Ya,pf,!0),document.addEventListener(ov,gf,!0),document.addEventListener(lv,vf,!0),document.addEventListener(bc,vf,!0),Ci=!0)}function Gu(c,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var y in Pi)f.touches.push(Pi[y]);f.changedTouches=[f],c(f)}}function Ku(c,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Rn(f),Gu(c,f)}function hv(c){var f={},y,E;for(E in c)y=c[E],f[E]=y&&y.bind?y.bind(c):y;return c=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var yf=200;function _c(c,f){c.addEventListener("dblclick",f);var y=0,E;function A(U){if(U.detail!==1){E=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var Q=Rf(U);if(!(Q.some(function(fe){return fe instanceof HTMLLabelElement&&fe.attributes.for})&&!Q.some(function(fe){return fe instanceof HTMLInputElement||fe instanceof HTMLSelectElement}))){var ce=Date.now();ce-y<=yf?(E++,E===2&&f(hv(U))):E=1,y=ce}}}return c.addEventListener("click",A),{dblclick:f,simDblclick:A}}function Ja(c,f){c.removeEventListener("dblclick",f.dblclick),c.removeEventListener("click",f.simDblclick)}var jc=eo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nc=eo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xf=Nc==="webkitTransition"||Nc==="OTransition"?Nc+"End":"transitionend";function wf(c){return typeof c=="string"?document.getElementById(c):c}function Zo(c,f){var y=c.style[f]||c.currentStyle&&c.currentStyle[f];if((!y||y==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(c,null);y=E?E[f]:null}return y==="auto"?null:y}function It(c,f,y){var E=document.createElement(c);return E.className=f||"",y&&y.appendChild(E),E}function on(c){var f=c.parentNode;f&&f.removeChild(c)}function Sc(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Xa(c){var f=c.parentNode;f&&f.lastChild!==c&&f.appendChild(c)}function Qo(c){var f=c.parentNode;f&&f.firstChild!==c&&f.insertBefore(c,f.firstChild)}function bf(c,f){if(c.classList!==void 0)return c.classList.contains(f);var y=si(c);return y.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(y)}function St(c,f){if(c.classList!==void 0)for(var y=N(f),E=0,A=y.length;E<A;E++)c.classList.add(y[E]);else if(!bf(c,f)){var U=si(c);_f(c,(U?U+" ":"")+f)}}function _n(c,f){c.classList!==void 0?c.classList.remove(f):_f(c,v((" "+si(c)+" ").replace(" "+f+" "," ")))}function _f(c,f){c.className.baseVal===void 0?c.className=f:c.className.baseVal=f}function si(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Fn(c,f){"opacity"in c.style?c.style.opacity=f:"filter"in c.style&&Zu(c,f)}function Zu(c,f){var y=!1,E="DXImageTransform.Microsoft.Alpha";try{y=c.filters.item(E)}catch{if(f===1)return}f=Math.round(f*100),y?(y.Enabled=f!==100,y.Opacity=f):c.style.filter+=" progid:"+E+"(opacity="+f+")"}function eo(c){for(var f=document.documentElement.style,y=0;y<c.length;y++)if(c[y]in f)return c[y];return!1}function aa(c,f,y){var E=f||new z(0,0);c.style[jc]=(lt.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(y?" scale("+y+")":"")}function gt(c,f){c._leaflet_pos=f,lt.any3d?aa(c,f):(c.style.left=f.x+"px",c.style.top=f.y+"px")}function ii(c){return c._leaflet_pos||new z(0,0)}var Ti,Ri,jf;if("onselectstart"in document)Ti=function(){ht(window,"selectstart",Rn)},Ri=function(){en(window,"selectstart",Rn)};else{var Yo=eo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ti=function(){if(Yo){var c=document.documentElement.style;jf=c[Yo],c[Yo]="none"}},Ri=function(){Yo&&(document.documentElement.style[Yo]=jf,jf=void 0)}}function Nf(){ht(window,"dragstart",Rn)}function Sf(){en(window,"dragstart",Rn)}var Qu,Ef;function to(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Ds(),Qu=c,Ef=c.style.outlineStyle,c.style.outlineStyle="none",ht(window,"keydown",Ds))}function Ds(){Qu&&(Qu.style.outlineStyle=Ef,Qu=void 0,Ef=void 0,en(window,"keydown",Ds))}function Pf(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Yu(c){var f=c.getBoundingClientRect();return{x:f.width/c.offsetWidth||1,y:f.height/c.offsetHeight||1,boundingClientRect:f}}var fv={__proto__:null,TRANSFORM:jc,TRANSITION:Nc,TRANSITION_END:xf,get:wf,getStyle:Zo,create:It,remove:on,empty:Sc,toFront:Xa,toBack:Qo,hasClass:bf,addClass:St,removeClass:_n,setClass:_f,getClass:si,setOpacity:Fn,testProp:eo,setTransform:aa,setPosition:gt,getPosition:ii,get disableTextSelection(){return Ti},get enableTextSelection(){return Ri},disableImageDrag:Nf,enableImageDrag:Sf,preventOutline:to,restoreOutline:Ds,getSizedParentNode:Pf,getScale:Yu};function ht(c,f,y,E){if(f&&typeof f=="object")for(var A in f)Cf(c,A,f[A],y);else{f=N(f);for(var U=0,Q=f.length;U<Q;U++)Cf(c,f[U],y,E)}return this}var ai="_leaflet_events";function en(c,f,y,E){if(arguments.length===1)mv(c),delete c[ai];else if(f&&typeof f=="object")for(var A in f)Tf(c,A,f[A],y);else if(f=N(f),arguments.length===2)mv(c,function(ce){return C(f,ce)!==-1});else for(var U=0,Q=f.length;U<Q;U++)Tf(c,f[U],y,E);return this}function mv(c,f){for(var y in c[ai]){var E=y.split(/\d/)[0];(!f||f(E))&&Tf(c,E,null,null,y)}}var oi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cf(c,f,y,E){var A=f+u(y)+(E?"_"+u(E):"");if(c[ai]&&c[ai][A])return this;var U=function(ce){return y.call(E||c,ce||window.event)},Q=U;!lt.touchNative&&lt.pointer&&f.indexOf("touch")===0?U=cv(c,f,U):lt.touch&&f==="dblclick"?U=_c(c,U):"addEventListener"in c?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?c.addEventListener(oi[f]||f,U,lt.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(U=function(ce){ce=ce||window.event,kf(c,ce)&&Q(ce)},c.addEventListener(oi[f],U,!1)):c.addEventListener(f,Q,!1):c.attachEvent("on"+f,U),c[ai]=c[ai]||{},c[ai][A]=U}function Tf(c,f,y,E,A){A=A||f+u(y)+(E?"_"+u(E):"");var U=c[ai]&&c[ai][A];if(!U)return this;!lt.touchNative&&lt.pointer&&f.indexOf("touch")===0?uv(c,f,U):lt.touch&&f==="dblclick"?Ja(c,U):"removeEventListener"in c?c.removeEventListener(oi[f]||f,U,!1):c.detachEvent("on"+f,U),c[ai][A]=null}function li(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Jo(c){return Cf(c,"wheel",li),this}function Xo(c){return ht(c,"mousedown touchstart dblclick contextmenu",li),c._leaflet_disable_click=!0,this}function Rn(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Ls(c){return Rn(c),li(c),this}function Rf(c){if(c.composedPath)return c.composedPath();for(var f=[],y=c.target;y;)f.push(y),y=y.parentNode;return f}function Ju(c,f){if(!f)return new z(c.clientX,c.clientY);var y=Yu(f),E=y.boundingClientRect;return new z((c.clientX-E.left)/y.x-f.clientLeft,(c.clientY-E.top)/y.y-f.clientTop)}var jn=lt.linux&&lt.chrome?window.devicePixelRatio:lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pv(c){return lt.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/jn:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function kf(c,f){var y=f.relatedTarget;if(!y)return!0;try{for(;y&&y!==c;)y=y.parentNode}catch{return!1}return y!==c}var gv={__proto__:null,on:ht,off:en,stopPropagation:li,disableScrollPropagation:Jo,disableClickPropagation:Xo,preventDefault:Rn,stop:Ls,getPropagationPath:Rf,getMousePosition:Ju,getWheelDelta:pv,isExternalTarget:kf,addListener:ht,removeListener:en},If=Z.extend({run:function(c,f,y,E){this.stop(),this._el=c,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ii(c),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(c){var f=+new Date-this._startTime,y=this._duration*1e3;f<y?this._runFrame(this._easeOut(f/y),c):(this._runFrame(1),this._complete())},_runFrame:function(c,f){var y=this._startPos.add(this._offset.multiplyBy(c));f&&y._round(),gt(this._el,y),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Tt=Z.extend({options:{crs:he,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,f){f=b(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(ue(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Nc&&lt.any3d&&!lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,xf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,f,y){if(f=f===void 0?this._zoom:this._limitZoom(f),c=this._limitCenter(ue(c),f,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=s({animate:y.animate},y.zoom),y.pan=s({animate:y.animate,duration:y.duration},y.pan));var E=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,f,y.zoom):this._tryAnimatedPan(c,y.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(c,f,y.pan&&y.pan.noMoveStart),this},setZoom:function(c,f){return this._loaded?this.setView(this.getCenter(),c,{zoom:f}):(this._zoom=c,this)},zoomIn:function(c,f){return c=c||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,f)},zoomOut:function(c,f){return c=c||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,f)},setZoomAround:function(c,f,y){var E=this.getZoomScale(f),A=this.getSize().divideBy(2),U=c instanceof z?c:this.latLngToContainerPoint(c),Q=U.subtract(A).multiplyBy(1-1/E),ce=this.containerPointToLatLng(A.add(Q));return this.setView(ce,f,{zoom:y})},_getBoundsCenterZoom:function(c,f){f=f||{},c=c.getBounds?c.getBounds():Fe(c);var y=q(f.paddingTopLeft||f.padding||[0,0]),E=q(f.paddingBottomRight||f.padding||[0,0]),A=this.getBoundsZoom(c,!1,y.add(E));if(A=typeof f.maxZoom=="number"?Math.min(f.maxZoom,A):A,A===1/0)return{center:c.getCenter(),zoom:A};var U=E.subtract(y).divideBy(2),Q=this.project(c.getSouthWest(),A),ce=this.project(c.getNorthEast(),A),fe=this.unproject(Q.add(ce).divideBy(2).add(U),A);return{center:fe,zoom:A}},fitBounds:function(c,f){if(c=Fe(c),!c.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(c,f);return this.setView(y.center,y.zoom,f)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,f){return this.setView(c,this._zoom,{pan:f})},panBy:function(c,f){if(c=q(c).round(),f=f||{},!c.x&&!c.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new If,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,y,f.duration||.25,f.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,f,y){if(y=y||{},y.animate===!1||!lt.any3d)return this.setView(c,f,y);this._stop();var E=this.project(this.getCenter()),A=this.project(c),U=this.getSize(),Q=this._zoom;c=ue(c),f=f===void 0?Q:f;var ce=Math.max(U.x,U.y),fe=ce*this.getZoomScale(Q,f),Pe=A.distanceTo(E)||1,qe=1.42,ft=qe*qe;function Pt(nr){var Iv=nr?-1:1,bz=nr?fe:ce,_z=fe*fe-ce*ce+Iv*ft*ft*Pe*Pe,jz=2*bz*ft*Pe,hb=_z/jz,Z2=Math.sqrt(hb*hb+1)-hb,Nz=Z2<1e-9?-18:Math.log(Z2);return Nz}function ss(nr){return(Math.exp(nr)-Math.exp(-nr))/2}function _r(nr){return(Math.exp(nr)+Math.exp(-nr))/2}function ui(nr){return ss(nr)/_r(nr)}var ws=Pt(0);function dd(nr){return ce*(_r(ws)/_r(ws+qe*nr))}function vz(nr){return ce*(_r(ws)*ui(ws+qe*nr)-ss(ws))/ft}function yz(nr){return 1-Math.pow(1-nr,1.5)}var xz=Date.now(),G2=(Pt(1)-ws)/qe,wz=y.duration?1e3*y.duration:1e3*G2*.8;function K2(){var nr=(Date.now()-xz)/wz,Iv=yz(nr)*G2;nr<=1?(this._flyToFrame=M(K2,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(vz(Iv)/Pe)),Q),this.getScaleZoom(ce/dd(Iv),Q),{flyTo:!0})):this._move(c,f)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),K2.call(this),this},flyToBounds:function(c,f){var y=this._getBoundsCenterZoom(c,f);return this.flyTo(y.center,y.zoom,f)},setMaxBounds:function(c){return c=Fe(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var f=this.options.minZoom;return this.options.minZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var f=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,f){this._enforcingBounds=!0;var y=this.getCenter(),E=this._limitCenter(y,this._zoom,Fe(c));return y.equals(E)||this.panTo(E,f),this._enforcingBounds=!1,this},panInside:function(c,f){f=f||{};var y=q(f.paddingTopLeft||f.padding||[0,0]),E=q(f.paddingBottomRight||f.padding||[0,0]),A=this.project(this.getCenter()),U=this.project(c),Q=this.getPixelBounds(),ce=me([Q.min.add(y),Q.max.subtract(E)]),fe=ce.getSize();if(!ce.contains(U)){this._enforcingBounds=!0;var Pe=U.subtract(ce.getCenter()),qe=ce.extend(U).getSize().subtract(fe);A.x+=Pe.x<0?-qe.x:qe.x,A.y+=Pe.y<0?-qe.y:qe.y,this.panTo(this.unproject(A),f),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),E=f.divideBy(2).round(),A=y.divideBy(2).round(),U=E.subtract(A);return!U.x&&!U.y?this:(c.animate&&c.pan?this.panBy(U):(c.pan&&this._rawPanBy(U),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=o(this._handleGeolocationResponse,this),y=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,y,c):navigator.geolocation.getCurrentPosition(f,y,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var f=c.code,y=c.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var f=c.coords.latitude,y=c.coords.longitude,E=new Me(f,y),A=E.toBounds(c.coords.accuracy*2),U=this._locateOptions;if(U.setView){var Q=this.getBoundsZoom(A);this.setView(E,U.maxZoom?Math.min(Q,U.maxZoom):Q)}var ce={latlng:E,bounds:A,timestamp:c.timestamp};for(var fe in c.coords)typeof c.coords[fe]=="number"&&(ce[fe]=c.coords[fe]);this.fire("locationfound",ce)}},addHandler:function(c,f){if(!f)return this;var y=this[c]=new f(this);return this._handlers.push(y),this.options[c]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),on(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)on(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,f){var y="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),E=It("div",y,f||this._mapPane);return c&&(this._panes[c]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),f=this.unproject(c.getBottomLeft()),y=this.unproject(c.getTopRight());return new Ee(f,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,f,y){c=Fe(c),y=q(y||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),U=this.getMaxZoom(),Q=c.getNorthWest(),ce=c.getSouthEast(),fe=this.getSize().subtract(y),Pe=me(this.project(ce,E),this.project(Q,E)).getSize(),qe=lt.any3d?this.options.zoomSnap:1,ft=fe.x/Pe.x,Pt=fe.y/Pe.y,ss=f?Math.max(ft,Pt):Math.min(ft,Pt);return E=this.getScaleZoom(ss,E),qe&&(E=Math.round(E/(qe/100))*(qe/100),E=f?Math.ceil(E/qe)*qe:Math.floor(E/qe)*qe),Math.max(A,Math.min(U,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,f){var y=this._getTopLeftPoint(c,f);return new X(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,f){var y=this.options.crs;return f=f===void 0?this._zoom:f,y.scale(c)/y.scale(f)},getScaleZoom:function(c,f){var y=this.options.crs;f=f===void 0?this._zoom:f;var E=y.zoom(c*y.scale(f));return isNaN(E)?1/0:E},project:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(ue(c),f)},unproject:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(q(c),f)},layerPointToLatLng:function(c){var f=q(c).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(c){var f=this.project(ue(c))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ue(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Fe(c))},distance:function(c,f){return this.options.crs.distance(ue(c),ue(f))},containerPointToLayerPoint:function(c){return q(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return q(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var f=this.containerPointToLayerPoint(q(c));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(c)))},mouseEventToContainerPoint:function(c){return Ju(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var f=this._container=wf(c);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(f,"scroll",this._onScroll,this),this._containerId=u(f)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&lt.any3d,St(c,"leaflet-container"+(lt.touch?" leaflet-touch":"")+(lt.retina?" leaflet-retina":"")+(lt.ielt9?" leaflet-oldie":"")+(lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Zo(c,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(c.markerPane,"leaflet-zoom-hide"),St(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,f,y){gt(this._mapPane,new z(0,0));var E=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var A=this._zoom!==f;this._moveStart(A,y)._move(c,f)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(c,f){return c&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(c,f,y,E){f===void 0&&(f=this._zoom);var A=this._zoom!==f;return this._zoom=f,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),E?y&&y.pinch&&this.fire("zoom",y):((A||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){gt(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[u(this._container)]=this;var f=c?en:ht;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),lt.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,f){for(var y=[],E,A=f==="mouseout"||f==="mouseover",U=c.target||c.srcElement,Q=!1;U;){if(E=this._targets[u(U)],E&&(f==="click"||f==="preclick")&&this._draggableMoved(E)){Q=!0;break}if(E&&E.listens(f,!0)&&(A&&!kf(U,c)||(y.push(E),A))||U===this._container)break;U=U.parentNode}return!y.length&&!Q&&!A&&this.listens(f,!0)&&(y=[this]),y},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var f=c.target||c.srcElement;if(!(!this._loaded||f._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(f))){var y=c.type;y==="mousedown"&&to(f),this._fireDOMEvent(c,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,f,y){if(c.type==="click"){var E=s({},c);E.type="preclick",this._fireDOMEvent(E,E.type,y)}var A=this._findEventTargets(c,f);if(y){for(var U=[],Q=0;Q<y.length;Q++)y[Q].listens(f,!0)&&U.push(y[Q]);A=U.concat(A)}if(A.length){f==="contextmenu"&&Rn(c);var ce=A[0],fe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Pe=ce.getLatLng&&(!ce._radius||ce._radius<=10);fe.containerPoint=Pe?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(c),fe.layerPoint=this.containerPointToLayerPoint(fe.containerPoint),fe.latlng=Pe?ce.getLatLng():this.layerPointToLatLng(fe.layerPoint)}for(Q=0;Q<A.length;Q++)if(A[Q].fire(f,fe,!0),fe.originalEvent._stopped||A[Q].options.bubblingMouseEvents===!1&&C(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,f=this._handlers.length;c<f;c++)this._handlers[c].disable()},whenReady:function(c,f){return this._loaded?c.call(f||this,{target:this}):this.on("load",c,f),this},_getMapPanePos:function(){return ii(this._mapPane)||new z(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,f){var y=c&&f!==void 0?this._getNewPixelOrigin(c,f):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,f){var y=this.getSize()._divideBy(2);return this.project(c,f)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,f,y){var E=this._getNewPixelOrigin(y,f);return this.project(c,f)._subtract(E)},_latLngBoundsToNewLayerBounds:function(c,f,y){var E=this._getNewPixelOrigin(y,f);return me([this.project(c.getSouthWest(),f)._subtract(E),this.project(c.getNorthWest(),f)._subtract(E),this.project(c.getSouthEast(),f)._subtract(E),this.project(c.getNorthEast(),f)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,f,y){if(!y)return c;var E=this.project(c,f),A=this.getSize().divideBy(2),U=new X(E.subtract(A),E.add(A)),Q=this._getBoundsOffset(U,y,f);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?c:this.unproject(E.add(Q),f)},_limitOffset:function(c,f){if(!f)return c;var y=this.getPixelBounds(),E=new X(y.min.add(c),y.max.add(c));return c.add(this._getBoundsOffset(E,f))},_getBoundsOffset:function(c,f,y){var E=me(this.project(f.getNorthEast(),y),this.project(f.getSouthWest(),y)),A=E.min.subtract(c.min),U=E.max.subtract(c.max),Q=this._rebound(A.x,-U.x),ce=this._rebound(A.y,-U.y);return new z(Q,ce)},_rebound:function(c,f){return c+f>0?Math.round(c-f)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(f))},_limitZoom:function(c){var f=this.getMinZoom(),y=this.getMaxZoom(),E=lt.any3d?this.options.zoomSnap:1;return E&&(c=Math.round(c/E)*E),Math.max(f,Math.min(y,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_n(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,f){var y=this._getCenterOffset(c)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,f),!0)},_createAnimProxy:function(){var c=this._proxy=It("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(f){var y=jc,E=this._proxy.style[y];aa(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),E===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){on(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),f=this.getZoom();aa(this._proxy,this.project(c,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,f,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(f),A=this._getCenterOffset(c)._divideBy(1-1/E);return y.animate!==!0&&!this.getSize().contains(A)?!1:(M(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(c,f,!0)},this),!0)},_animateZoom:function(c,f,y,E){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=f,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:f,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_n(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xu(c,f){return new Tt(c,f)}var xs=B.extend({options:{position:"topright"},initialize:function(c){b(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var f=this._map;return f&&f.removeControl(this),this.options.position=c,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var f=this._container=this.onAdd(c),y=this.getPosition(),E=c._controlCorners[y];return St(f,"leaflet-control"),y.indexOf("bottom")!==-1?E.insertBefore(f,E.firstChild):E.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(on(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),rs=function(c){return new xs(c)};Tt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},f="leaflet-",y=this._controlContainer=It("div",f+"control-container",this._container);function E(A,U){var Q=f+A+" "+f+U;c[A+U]=It("div",Q,y)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)on(this._controlCorners[c]);on(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Af=xs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,f,y,E){return y<E?-1:E<y?1:0}},initialize:function(c,f,y){b(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in c)this._addLayer(c[E],E);for(E in f)this._addLayer(f[E],E,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return xs.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,f){return this._addLayer(c,f),this._map?this._update():this},addOverlay:function(c,f){return this._addLayer(c,f,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var f=this._getLayer(u(c));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):_n(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _n(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",f=this._container=It("div",c),y=this.options.collapsed;f.setAttribute("aria-haspopup",!0),Xo(f),Jo(f);var E=this._section=It("section",c+"-list");y&&(this._map.on("click",this.collapse,this),ht(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=It("a",c+"-toggle",f);A.href="#",A.title="Layers",A.setAttribute("role","button"),ht(A,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){Rn(U),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=It("div",c+"-base",E),this._separator=It("div",c+"-separator",E),this._overlaysList=It("div",c+"-overlays",E),f.appendChild(E)},_getLayer:function(c){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&u(this._layers[f].layer)===c)return this._layers[f]},_addLayer:function(c,f,y){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:f,overlay:y}),this.options.sortLayers&&this._layers.sort(o(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sc(this._baseLayersList),Sc(this._overlaysList),this._layerControlInputs=[];var c,f,y,E,A=0;for(y=0;y<this._layers.length;y++)E=this._layers[y],this._addItem(E),f=f||E.overlay,c=c||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(c=c&&A>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=f&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var f=this._getLayer(u(c.target)),y=f.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;y&&this._map.fire(y,f)},_createRadioElement:function(c,f){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(f?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=y,E.firstChild},_addItem:function(c){var f=document.createElement("label"),y=this._map.hasLayer(c.layer),E;c.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=y):E=this._createRadioElement("leaflet-base-layers_"+u(this),y),this._layerControlInputs.push(E),E.layerId=u(c.layer),ht(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+c.name;var U=document.createElement("span");f.appendChild(U),U.appendChild(E),U.appendChild(A);var Q=c.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,f,y,E=[],A=[];this._handlingClick=!0;for(var U=c.length-1;U>=0;U--)f=c[U],y=this._getLayer(f.layerId).layer,f.checked?E.push(y):f.checked||A.push(y);for(U=0;U<A.length;U++)this._map.hasLayer(A[U])&&this._map.removeLayer(A[U]);for(U=0;U<E.length;U++)this._map.hasLayer(E[U])||this._map.addLayer(E[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,f,y,E=this._map.getZoom(),A=c.length-1;A>=0;A--)f=c[A],y=this._getLayer(f.layerId).layer,f.disabled=y.options.minZoom!==void 0&&E<y.options.minZoom||y.options.maxZoom!==void 0&&E>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ht(c,"click",Rn),this.expand();var f=this;setTimeout(function(){en(c,"click",Rn),f._preventClick=!1})}}),ab=function(c,f,y){return new Af(c,f,y)},no=xs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var f="leaflet-control-zoom",y=It("div",f+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,f+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,f+"-out",y,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,f,y,E,A){var U=It("a",y,E);return U.innerHTML=c,U.href="#",U.title=f,U.setAttribute("role","button"),U.setAttribute("aria-label",f),Xo(U),ht(U,"click",Ls),ht(U,"click",A,this),ht(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var c=this._map,f="leaflet-disabled";_n(this._zoomInButton,f),_n(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(St(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(St(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new no,this.addControl(this.zoomControl))});var vv=function(c){return new no(c)},ed=xs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var f="leaflet-control-scale",y=It("div",f),E=this.options;return this._addScales(E,f+"-line",y),c.on(E.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),y},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,f,y){c.metric&&(this._mScale=It("div",f,y)),c.imperial&&(this._iScale=It("div",f,y))},_update:function(){var c=this._map,f=c.getSize().y/2,y=c.distance(c.containerPointToLatLng([0,f]),c.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(y)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var f=this._getRoundNum(c),y=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,y,f/c)},_updateImperial:function(c){var f=c*3.2808399,y,E,A;f>5280?(y=f/5280,E=this._getRoundNum(y),this._updateScale(this._iScale,E+" mi",E/y)):(A=this._getRoundNum(f),this._updateScale(this._iScale,A+" ft",A/f))},_updateScale:function(c,f,y){c.style.width=Math.round(this.options.maxWidth*y)+"px",c.innerHTML=f},_getRoundNum:function(c){var f=Math.pow(10,(Math.floor(c)+"").length-1),y=c/f;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,f*y}}),td=function(c){return new ed(c)},yv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',el=xs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(lt.inlineSvg?yv+" ":"")+"Leaflet</a>"},initialize:function(c){b(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=It("div","leaflet-control-attribution"),Xo(this._container);for(var f in c._layers)c._layers[f].getAttribution&&this.addAttribution(c._layers[f].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var f in this._attributions)this._attributions[f]&&c.push(f);var y=[];this.options.prefix&&y.push(this.options.prefix),c.length&&y.push(c.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new el().addTo(this)});var ob=function(c){return new el(c)};xs.Layers=Af,xs.Zoom=no,xs.Scale=ed,xs.Attribution=el,rs.layers=ab,rs.zoom=vv,rs.scale=td,rs.attribution=ob;var Fs=B.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fs.addTo=function(c,f){return c.addHandler(f,this),this};var Ec={Events:ee},Of=lt.touch?"touchstart mousedown":"mousedown",ki=Z.extend({options:{clickTolerance:3},initialize:function(c,f,y,E){b(this,E),this._element=c,this._dragStartTarget=f||c,this._preventOutline=y},enable:function(){this._enabled||(ht(this._dragStartTarget,Of,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ki._dragging===this&&this.finishDrag(!0),en(this._dragStartTarget,Of,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!bf(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ki._dragging===this&&this.finishDrag();return}if(!(ki._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ki._dragging=this,this._preventOutline&&to(this._element),Nf(),Ti(),!this._moving)){this.fire("down");var f=c.touches?c.touches[0]:c,y=Pf(this._element);this._startPoint=new z(f.clientX,f.clientY),this._startPos=ii(this._element),this._parentScale=Yu(y);var E=c.type==="mousedown";ht(document,E?"mousemove":"touchmove",this._onMove,this),ht(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var f=c.touches&&c.touches.length===1?c.touches[0]:c,y=new z(f.clientX,f.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,Rn(c),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),gt(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){_n(document.body,"leaflet-dragging"),this._lastTarget&&(_n(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),en(document,"mousemove touchmove",this._onMove,this),en(document,"mouseup touchend touchcancel",this._onUp,this),Sf(),Ri();var f=this._moved&&this._moving;this._moving=!1,ki._dragging=!1,f&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function nd(c,f,y){var E,A=[1,4,2,8],U,Q,ce,fe,Pe,qe,ft,Pt;for(U=0,qe=c.length;U<qe;U++)c[U]._code=oa(c[U],f);for(ce=0;ce<4;ce++){for(ft=A[ce],E=[],U=0,qe=c.length,Q=qe-1;U<qe;Q=U++)fe=c[U],Pe=c[Q],fe._code&ft?Pe._code&ft||(Pt=br(Pe,fe,ft,f,y),Pt._code=oa(Pt,f),E.push(Pt)):(Pe._code&ft&&(Pt=br(Pe,fe,ft,f,y),Pt._code=oa(Pt,f),E.push(Pt)),E.push(fe));c=E}return c}function rd(c,f){var y,E,A,U,Q,ce,fe,Pe,qe;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ft=ue([0,0]),Pt=Fe(c),ss=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());ss<1700&&(ft=sd(c));var _r=c.length,ui=[];for(y=0;y<_r;y++){var ws=ue(c[y]);ui.push(f.project(ue([ws.lat-ft.lat,ws.lng-ft.lng])))}for(ce=fe=Pe=0,y=0,E=_r-1;y<_r;E=y++)A=ui[y],U=ui[E],Q=A.y*U.x-U.y*A.x,fe+=(A.x+U.x)*Q,Pe+=(A.y+U.y)*Q,ce+=Q*3;ce===0?qe=ui[0]:qe=[fe/ce,Pe/ce];var dd=f.unproject(q(qe));return ue([dd.lat+ft.lat,dd.lng+ft.lng])}function sd(c){for(var f=0,y=0,E=0,A=0;A<c.length;A++){var U=ue(c[A]);f+=U.lat,y+=U.lng,E++}return ue([f/E,y/E])}var id={__proto__:null,clipPolygon:nd,polygonCenter:rd,centroid:sd};function Mf(c,f){if(!f||!c.length)return c.slice();var y=f*f;return c=wv(c,y),c=xv(c,y),c}function Df(c,f,y){return Math.sqrt(ci(c,f,y,!0))}function ro(c,f,y){return ci(c,f,y)}function xv(c,f){var y=c.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(y);A[0]=A[y-1]=1,ad(c,A,f,0,y-1);var U,Q=[];for(U=0;U<y;U++)A[U]&&Q.push(c[U]);return Q}function ad(c,f,y,E,A){var U=0,Q,ce,fe;for(ce=E+1;ce<=A-1;ce++)fe=ci(c[ce],c[E],c[A],!0),fe>U&&(Q=ce,U=fe);U>y&&(f[Q]=1,ad(c,f,y,E,Q),ad(c,f,y,Q,A))}function wv(c,f){for(var y=[c[0]],E=1,A=0,U=c.length;E<U;E++)bv(c[E],c[A])>f&&(y.push(c[E]),A=E);return A<U-1&&y.push(c[U-1]),y}var Lf;function Pc(c,f,y,E,A){var U=E?Lf:oa(c,y),Q=oa(f,y),ce,fe,Pe;for(Lf=Q;;){if(!(U|Q))return[c,f];if(U&Q)return!1;ce=U||Q,fe=br(c,f,ce,y,A),Pe=oa(fe,y),ce===U?(c=fe,U=Pe):(f=fe,Q=Pe)}}function br(c,f,y,E,A){var U=f.x-c.x,Q=f.y-c.y,ce=E.min,fe=E.max,Pe,qe;return y&8?(Pe=c.x+U*(fe.y-c.y)/Q,qe=fe.y):y&4?(Pe=c.x+U*(ce.y-c.y)/Q,qe=ce.y):y&2?(Pe=fe.x,qe=c.y+Q*(fe.x-c.x)/U):y&1&&(Pe=ce.x,qe=c.y+Q*(ce.x-c.x)/U),new z(Pe,qe,A)}function oa(c,f){var y=0;return c.x<f.min.x?y|=1:c.x>f.max.x&&(y|=2),c.y<f.min.y?y|=4:c.y>f.max.y&&(y|=8),y}function bv(c,f){var y=f.x-c.x,E=f.y-c.y;return y*y+E*E}function ci(c,f,y,E){var A=f.x,U=f.y,Q=y.x-A,ce=y.y-U,fe=Q*Q+ce*ce,Pe;return fe>0&&(Pe=((c.x-A)*Q+(c.y-U)*ce)/fe,Pe>1?(A=y.x,U=y.y):Pe>0&&(A+=Q*Pe,U+=ce*Pe)),Q=c.x-A,ce=c.y-U,E?Q*Q+ce*ce:new z(A,U)}function g(c){return!S(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function P(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(c)}function F(c,f){var y,E,A,U,Q,ce,fe,Pe;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var qe=ue([0,0]),ft=Fe(c),Pt=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Pt<1700&&(qe=sd(c));var ss=c.length,_r=[];for(y=0;y<ss;y++){var ui=ue(c[y]);_r.push(f.project(ue([ui.lat-qe.lat,ui.lng-qe.lng])))}for(y=0,E=0;y<ss-1;y++)E+=_r[y].distanceTo(_r[y+1])/2;if(E===0)Pe=_r[0];else for(y=0,U=0;y<ss-1;y++)if(Q=_r[y],ce=_r[y+1],A=Q.distanceTo(ce),U+=A,U>E){fe=(U-E)/A,Pe=[ce.x-fe*(ce.x-Q.x),ce.y-fe*(ce.y-Q.y)];break}var ws=f.unproject(q(Pe));return ue([ws.lat+qe.lat,ws.lng+qe.lng])}var W={__proto__:null,simplify:Mf,pointToSegmentDistance:Df,closestPointOnSegment:ro,clipSegment:Pc,_getEdgeIntersection:br,_getBitCode:oa,_sqClosestPointOnSegment:ci,isFlat:g,_flat:P,polylineCenter:F},le={project:function(c){return new z(c.lng,c.lat)},unproject:function(c){return new Me(c.y,c.x)},bounds:new X([-180,-90],[180,90])},pe={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var f=Math.PI/180,y=this.R,E=c.lat*f,A=this.R_MINOR/y,U=Math.sqrt(1-A*A),Q=U*Math.sin(E),ce=Math.tan(Math.PI/4-E/2)/Math.pow((1-Q)/(1+Q),U/2);return E=-y*Math.log(Math.max(ce,1e-10)),new z(c.lng*f*y,E)},unproject:function(c){for(var f=180/Math.PI,y=this.R,E=this.R_MINOR/y,A=Math.sqrt(1-E*E),U=Math.exp(-c.y/y),Q=Math.PI/2-2*Math.atan(U),ce=0,fe=.1,Pe;ce<15&&Math.abs(fe)>1e-7;ce++)Pe=A*Math.sin(Q),Pe=Math.pow((1-Pe)/(1+Pe),A/2),fe=Math.PI/2-2*Math.atan(U*Pe)-Q,Q+=fe;return new Me(Q*f,c.x*f/y)}},Le={__proto__:null,LonLat:le,Mercator:pe,SphericalMercator:ne},Kt=s({},J,{code:"EPSG:3395",projection:pe,transformation:function(){var c=.5/(Math.PI*pe.R);return ie(c,.5,-c,.5)}()}),tr=s({},J,{code:"EPSG:4326",projection:le,transformation:ie(1/180,1,-1/180,.5)}),Dt=s({},ye,{projection:le,transformation:ie(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,f){var y=f.lng-c.lng,E=f.lat-c.lat;return Math.sqrt(y*y+E*E)},infinite:!0});ye.Earth=J,ye.EPSG3395=Kt,ye.EPSG3857=he,ye.EPSG900913=_e,ye.EPSG4326=tr,ye.Simple=Dt;var tn=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[u(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[u(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var f=c.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var y=this.getEvents();f.on(y,this),this.once("remove",function(){f.off(y,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var f=u(c);return this._layers[f]?this:(this._layers[f]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var f=u(c);return this._layers[f]?(this._loaded&&c.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return u(c)in this._layers},eachLayer:function(c,f){for(var y in this._layers)c.call(f,this._layers[y]);return this},_addLayers:function(c){c=c?S(c)?c:[c]:[];for(var f=0,y=c.length;f<y;f++)this.addLayer(c[f])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[u(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var f=u(c);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,f=-1/0,y=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;c=A.minZoom===void 0?c:Math.min(c,A.minZoom),f=A.maxZoom===void 0?f:Math.max(f,A.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=c===1/0?void 0:c,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kn=tn.extend({initialize:function(c,f){b(this,f),this._layers={};var y,E;if(c)for(y=0,E=c.length;y<E;y++)this.addLayer(c[y])},addLayer:function(c){var f=this.getLayerId(c);return this._layers[f]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var f=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(c){var f=typeof c=="number"?c:this.getLayerId(c);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var f=Array.prototype.slice.call(arguments,1),y,E;for(y in this._layers)E=this._layers[y],E[c]&&E[c].apply(E,f);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,f){for(var y in this._layers)c.call(f,this._layers[y]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return u(c)}}),tl=function(c,f){return new kn(c,f)},Hn=kn.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),kn.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),kn.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Ee;for(var f in this._layers){var y=this._layers[f];c.extend(y.getBounds?y.getBounds():y.getLatLng())}return c}}),od=function(c,f){return new Hn(c,f)},la=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){b(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,f){var y=this._getIconUrl(c);if(!y){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(y,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(E,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(c,f){var y=this.options,E=y[f+"Size"];typeof E=="number"&&(E=[E,E]);var A=q(E),U=q(f==="shadow"&&y.shadowAnchor||y.iconAnchor||A&&A.divideBy(2,!0));c.className="leaflet-marker-"+f+" "+(y.className||""),U&&(c.style.marginLeft=-U.x+"px",c.style.marginTop=-U.y+"px"),A&&(c.style.width=A.x+"px",c.style.height=A.y+"px")},_createImg:function(c,f){return f=f||document.createElement("img"),f.src=c,f},_getIconUrl:function(c){return lt.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function J9(c){return new la(c)}var Ff=la.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Ff.imagePath!="string"&&(Ff.imagePath=this._detectIconPath()),(this.options.imagePath||Ff.imagePath)+la.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var f=function(y,E,A){var U=E.exec(y);return U&&U[A]};return c=f(c,/^url\((['"])?(.+)\1\)$/,2),c&&f(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=It("div","leaflet-default-icon-path",document.body),f=Zo(c,"background-image")||Zo(c,"backgroundImage");if(document.body.removeChild(c),f=this._stripUrl(f),f)return f;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),C2=Fs.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ki(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_n(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var f=this._marker,y=f._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,U=ii(f._icon),Q=y.getPixelBounds(),ce=y.getPixelOrigin(),fe=me(Q.min._subtract(ce).add(A),Q.max._subtract(ce).subtract(A));if(!fe.contains(U)){var Pe=q((Math.max(fe.max.x,U.x)-fe.max.x)/(Q.max.x-fe.max.x)-(Math.min(fe.min.x,U.x)-fe.min.x)/(Q.min.x-fe.min.x),(Math.max(fe.max.y,U.y)-fe.max.y)/(Q.max.y-fe.max.y)-(Math.min(fe.min.y,U.y)-fe.min.y)/(Q.min.y-fe.min.y)).multiplyBy(E);y.panBy(Pe,{animate:!1}),this._draggable._newPos._add(Pe),this._draggable._startPos._add(Pe),gt(f._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=M(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,c)))},_onDrag:function(c){var f=this._marker,y=f._shadow,E=ii(f._icon),A=f._map.layerPointToLatLng(E);y&&gt(y,E),f._latlng=A,c.latlng=A,c.oldLatLng=this._oldLatLng,f.fire("move",c).fire("drag",c)},_onDragEnd:function(c){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),_v=tn.extend({options:{icon:new Ff,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,f){b(this,f),this._latlng=ue(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var f=this._latlng;return this._latlng=ue(c),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=c.icon.createIcon(this._icon),E=!1;y!==this._icon&&(this._icon&&this._removeIcon(),E=!0,c.title&&(y.title=c.title),y.tagName==="IMG"&&(y.alt=c.alt||"")),St(y,f),c.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(y,"focus",this._panOnFocus,this);var A=c.icon.createShadow(this._shadow),U=!1;A!==this._shadow&&(this._removeShadow(),U=!0),A&&(St(A,f),A.alt=""),this._shadow=A,c.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&U&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&en(this._icon,"focus",this._panOnFocus,this),on(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&on(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&gt(this._icon,c),this._shadow&&gt(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),C2)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new C2(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Fn(this._icon,c),this._shadow&&Fn(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var f=this.options.icon.options,y=f.iconSize?q(f.iconSize):q(0,0),E=f.iconAnchor?q(f.iconAnchor):q(0,0);c.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:y.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function X9(c,f){return new _v(c,f)}var nl=tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return b(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jv=nl.extend({options:{fill:!0,radius:10},initialize:function(c,f){b(this,f),this._latlng=ue(c),this._radius=this.options.radius},setLatLng:function(c){var f=this._latlng;return this._latlng=ue(c),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var f=c&&c.radius||this._radius;return nl.prototype.setStyle.call(this,c),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,f=this._radiusY||c,y=this._clickTolerance(),E=[c+y,f+y];this._pxBounds=new X(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ez(c,f){return new jv(c,f)}var lb=jv.extend({initialize:function(c,f,y){if(typeof f=="number"&&(f=s({},y,{radius:f})),b(this,f),this._latlng=ue(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:nl.prototype.setStyle,_project:function(){var c=this._latlng.lng,f=this._latlng.lat,y=this._map,E=y.options.crs;if(E.distance===J.distance){var A=Math.PI/180,U=this._mRadius/J.R/A,Q=y.project([f+U,c]),ce=y.project([f-U,c]),fe=Q.add(ce).divideBy(2),Pe=y.unproject(fe).lat,qe=Math.acos((Math.cos(U*A)-Math.sin(f*A)*Math.sin(Pe*A))/(Math.cos(f*A)*Math.cos(Pe*A)))/A;(isNaN(qe)||qe===0)&&(qe=U/Math.cos(Math.PI/180*f)),this._point=fe.subtract(y.getPixelOrigin()),this._radius=isNaN(qe)?0:fe.x-y.project([Pe,c-qe]).x,this._radiusY=fe.y-Q.y}else{var ft=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(ft).x}this._updateBounds()}});function tz(c,f,y){return new lb(c,f,y)}var so=nl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,f){b(this,f),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var f=1/0,y=null,E=ci,A,U,Q=0,ce=this._parts.length;Q<ce;Q++)for(var fe=this._parts[Q],Pe=1,qe=fe.length;Pe<qe;Pe++){A=fe[Pe-1],U=fe[Pe];var ft=E(c,A,U,!0);ft<f&&(f=ft,y=E(c,A,U))}return y&&(y.distance=Math.sqrt(f)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return F(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,f){return f=f||this._defaultShape(),c=ue(c),f.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Ee,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var f=[],y=g(c),E=0,A=c.length;E<A;E++)y?(f[E]=ue(c[E]),this._bounds.extend(f[E])):f[E]=this._convertLatLngs(c[E]);return f},_project:function(){var c=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),f=new z(c,c);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(c,f,y){var E=c[0]instanceof Me,A=c.length,U,Q;if(E){for(Q=[],U=0;U<A;U++)Q[U]=this._map.latLngToLayerPoint(c[U]),y.extend(Q[U]);f.push(Q)}else for(U=0;U<A;U++)this._projectLatlngs(c[U],f,y)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,y,E,A,U,Q,ce,fe;for(y=0,A=0,U=this._rings.length;y<U;y++)for(fe=this._rings[y],E=0,Q=fe.length;E<Q-1;E++)ce=Pc(fe[E],fe[E+1],c,E,!0),ce&&(f[A]=f[A]||[],f[A].push(ce[0]),(ce[1]!==fe[E+1]||E===Q-2)&&(f[A].push(ce[1]),A++))}},_simplifyPoints:function(){for(var c=this._parts,f=this.options.smoothFactor,y=0,E=c.length;y<E;y++)c[y]=Mf(c[y],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,f){var y,E,A,U,Q,ce,fe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(y=0,U=this._parts.length;y<U;y++)for(ce=this._parts[y],E=0,Q=ce.length,A=Q-1;E<Q;A=E++)if(!(!f&&E===0)&&Df(c,ce[A],ce[E])<=fe)return!0;return!1}});function nz(c,f){return new so(c,f)}so._flat=P;var ld=so.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var f=so.prototype._convertLatLngs.call(this,c),y=f.length;return y>=2&&f[0]instanceof Me&&f[0].equals(f[y-1])&&f.pop(),f},_setLatLngs:function(c){so.prototype._setLatLngs.call(this,c),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,f=this.options.weight,y=new z(f,f);if(c=new X(c.min.subtract(y),c.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,U;E<A;E++)U=nd(this._rings[E],c,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var f=!1,y,E,A,U,Q,ce,fe,Pe;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(U=0,fe=this._parts.length;U<fe;U++)for(y=this._parts[U],Q=0,Pe=y.length,ce=Pe-1;Q<Pe;ce=Q++)E=y[Q],A=y[ce],E.y>c.y!=A.y>c.y&&c.x<(A.x-E.x)*(c.y-E.y)/(A.y-E.y)+E.x&&(f=!f);return f||so.prototype._containsPoint.call(this,c,!0)}});function rz(c,f){return new ld(c,f)}var io=Hn.extend({initialize:function(c,f){b(this,f),this._layers={},c&&this.addData(c)},addData:function(c){var f=S(c)?c:c.features,y,E,A;if(f){for(y=0,E=f.length;y<E;y++)A=f[y],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var U=this.options;if(U.filter&&!U.filter(c))return this;var Q=Nv(c,U);return Q?(Q.feature=Pv(c),Q.defaultOptions=Q.options,this.resetStyle(Q),U.onEachFeature&&U.onEachFeature(c,Q),this.addLayer(Q)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(f){this._setLayerStyle(f,c)},this)},_setLayerStyle:function(c,f){c.setStyle&&(typeof f=="function"&&(f=f(c.feature)),c.setStyle(f))}});function Nv(c,f){var y=c.type==="Feature"?c.geometry:c,E=y?y.coordinates:null,A=[],U=f&&f.pointToLayer,Q=f&&f.coordsToLatLng||cb,ce,fe,Pe,qe;if(!E&&!y)return null;switch(y.type){case"Point":return ce=Q(E),T2(U,c,ce,f);case"MultiPoint":for(Pe=0,qe=E.length;Pe<qe;Pe++)ce=Q(E[Pe]),A.push(T2(U,c,ce,f));return new Hn(A);case"LineString":case"MultiLineString":return fe=Sv(E,y.type==="LineString"?0:1,Q),new so(fe,f);case"Polygon":case"MultiPolygon":return fe=Sv(E,y.type==="Polygon"?1:2,Q),new ld(fe,f);case"GeometryCollection":for(Pe=0,qe=y.geometries.length;Pe<qe;Pe++){var ft=Nv({geometry:y.geometries[Pe],type:"Feature",properties:c.properties},f);ft&&A.push(ft)}return new Hn(A);case"FeatureCollection":for(Pe=0,qe=y.features.length;Pe<qe;Pe++){var Pt=Nv(y.features[Pe],f);Pt&&A.push(Pt)}return new Hn(A);default:throw new Error("Invalid GeoJSON object.")}}function T2(c,f,y,E){return c?c(f,y):new _v(y,E&&E.markersInheritOptions&&E)}function cb(c){return new Me(c[1],c[0],c[2])}function Sv(c,f,y){for(var E=[],A=0,U=c.length,Q;A<U;A++)Q=f?Sv(c[A],f-1,y):(y||cb)(c[A]),E.push(Q);return E}function ub(c,f){return c=ue(c),c.alt!==void 0?[p(c.lng,f),p(c.lat,f),p(c.alt,f)]:[p(c.lng,f),p(c.lat,f)]}function Ev(c,f,y,E){for(var A=[],U=0,Q=c.length;U<Q;U++)A.push(f?Ev(c[U],g(c[U])?0:f-1,y,E):ub(c[U],E));return!f&&y&&A.length>0&&A.push(A[0].slice()),A}function cd(c,f){return c.feature?s({},c.feature,{geometry:f}):Pv(f)}function Pv(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var db={toGeoJSON:function(c){return cd(this,{type:"Point",coordinates:ub(this.getLatLng(),c)})}};_v.include(db),lb.include(db),jv.include(db),so.include({toGeoJSON:function(c){var f=!g(this._latlngs),y=Ev(this._latlngs,f?1:0,!1,c);return cd(this,{type:(f?"Multi":"")+"LineString",coordinates:y})}}),ld.include({toGeoJSON:function(c){var f=!g(this._latlngs),y=f&&!g(this._latlngs[0]),E=Ev(this._latlngs,y?2:f?1:0,!0,c);return f||(E=[E]),cd(this,{type:(y?"Multi":"")+"Polygon",coordinates:E})}}),kn.include({toMultiPoint:function(c){var f=[];return this.eachLayer(function(y){f.push(y.toGeoJSON(c).geometry.coordinates)}),cd(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(c){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(c);var y=f==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var U=A.toGeoJSON(c);if(y)E.push(U.geometry);else{var Q=Pv(U);Q.type==="FeatureCollection"?E.push.apply(E,Q.features):E.push(Q)}}}),y?cd(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function R2(c,f){return new io(c,f)}var sz=R2,Cv=tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,f,y){this._url=c,this._bounds=Fe(f),b(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){on(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Xa(this._image),this},bringToBack:function(){return this._map&&Qo(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Fe(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",f=this._image=c?this._url:It("img");if(St(f,"leaflet-image-layer"),this._zoomAnimated&&St(f,"leaflet-zoom-animated"),this.options.className&&St(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onload=o(this.fire,this,"load"),f.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(c){var f=this._map.getZoomScale(c.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;aa(this._image,y,f)},_reset:function(){var c=this._image,f=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=f.getSize();gt(c,f.min),c.style.width=y.x+"px",c.style.height=y.y+"px"},_updateOpacity:function(){Fn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),iz=function(c,f,y){return new Cv(c,f,y)},k2=Cv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",f=this._image=c?this._url:It("video");if(St(f,"leaflet-image-layer"),this._zoomAnimated&&St(f,"leaflet-zoom-animated"),this.options.className&&St(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onloadeddata=o(this.fire,this,"load"),c){for(var y=f.getElementsByTagName("source"),E=[],A=0;A<y.length;A++)E.push(y[A].src);this._url=y.length>0?E:[f.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var Q=It("source");Q.src=this._url[U],f.appendChild(Q)}}});function az(c,f,y){return new k2(c,f,y)}var I2=Cv.extend({_initImage:function(){var c=this._image=this._url;St(c,"leaflet-image-layer"),this._zoomAnimated&&St(c,"leaflet-zoom-animated"),this.options.className&&St(c,this.options.className),c.onselectstart=m,c.onmousemove=m}});function oz(c,f,y){return new I2(c,f,y)}var ca=tn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,f){c&&(c instanceof Me||S(c))?(this._latlng=ue(c),b(this,f)):(b(this,c),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Fn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Fn(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Fn(this._container,0),this._removeTimeout=setTimeout(o(on,void 0,this._container),200)):on(this._container),this.options.interactive&&(_n(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ue(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Xa(this._container),this},bringToBack:function(){return this._map&&Qo(this._container),this},_prepareOpen:function(c){var f=this._source;if(!f._map)return!1;if(f instanceof Hn){f=null;var y=this._source._layers;for(var E in y)if(y[E]._map){f=y[E];break}if(!f)return!1;this._source=f}if(!c)if(f.getCenter)c=f.getCenter();else if(f.getLatLng)c=f.getLatLng();else if(f.getBounds)c=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")c.innerHTML=f;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),f=q(this.options.offset),y=this._getAnchor();this._zoomAnimated?gt(this._container,c.add(y)):f=f.add(c).add(y);var E=this._containerBottom=-f.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Tt.include({_initOverlay:function(c,f,y,E){var A=f;return A instanceof c||(A=new c(E).setContent(f)),y&&A.setLatLng(y),A}}),tn.include({_initOverlay:function(c,f,y,E){var A=y;return A instanceof c?(b(A,E),A._source=this):(A=f&&!E?f:new c(E,this),A.setContent(y)),A}});var Tv=ca.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,ca.prototype.openOn.call(this,c)},onAdd:function(c){ca.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nl||this._source.on("preclick",li))},onRemove:function(c){ca.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nl||this._source.off("preclick",li))},getEvents:function(){var c=ca.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",f=this._container=It("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=It("div",c+"-content-wrapper",f);if(this._contentNode=It("div",c+"-content",y),Xo(f),Jo(this._contentNode),ht(f,"contextmenu",li),this._tipContainer=It("div",c+"-tip-container",f),this._tip=It("div",c+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=It("a",c+"-close-button",f);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',ht(E,"click",function(A){Rn(A),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,f=c.style;f.width="",f.whiteSpace="nowrap";var y=c.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),f.width=y+1+"px",f.whiteSpace="",f.height="";var E=c.offsetHeight,A=this.options.maxHeight,U="leaflet-popup-scrolled";A&&E>A?(f.height=A+"px",St(c,U)):_n(c,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),y=this._getAnchor();gt(this._container,f.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,f=parseInt(Zo(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+f,E=this._containerWidth,A=new z(this._containerLeft,-y-this._containerBottom);A._add(ii(this._container));var U=c.layerPointToContainerPoint(A),Q=q(this.options.autoPanPadding),ce=q(this.options.autoPanPaddingTopLeft||Q),fe=q(this.options.autoPanPaddingBottomRight||Q),Pe=c.getSize(),qe=0,ft=0;U.x+E+fe.x>Pe.x&&(qe=U.x+E-Pe.x+fe.x),U.x-qe-ce.x<0&&(qe=U.x-ce.x),U.y+y+fe.y>Pe.y&&(ft=U.y+y-Pe.y+fe.y),U.y-ft-ce.y<0&&(ft=U.y-ce.y),(qe||ft)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([qe,ft]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lz=function(c,f){return new Tv(c,f)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(c,f,y){return this._initOverlay(Tv,c,f,y).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),tn.include({bindPopup:function(c,f){return this._popup=this._initOverlay(Tv,this._popup,c,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Hn||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Ls(c);var f=c.layer||c.target;if(this._popup._source===f&&!(f instanceof nl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=f,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var Rv=ca.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){ca.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){ca.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=ca.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",f=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=It("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var f,y,E=this._map,A=this._container,U=E.latLngToContainerPoint(E.getCenter()),Q=E.layerPointToContainerPoint(c),ce=this.options.direction,fe=A.offsetWidth,Pe=A.offsetHeight,qe=q(this.options.offset),ft=this._getAnchor();ce==="top"?(f=fe/2,y=Pe):ce==="bottom"?(f=fe/2,y=0):ce==="center"?(f=fe/2,y=Pe/2):ce==="right"?(f=0,y=Pe/2):ce==="left"?(f=fe,y=Pe/2):Q.x<U.x?(ce="right",f=0,y=Pe/2):(ce="left",f=fe+(qe.x+ft.x)*2,y=Pe/2),c=c.subtract(q(f,y,!0)).add(qe).add(ft),_n(A,"leaflet-tooltip-right"),_n(A,"leaflet-tooltip-left"),_n(A,"leaflet-tooltip-top"),_n(A,"leaflet-tooltip-bottom"),St(A,"leaflet-tooltip-"+ce),gt(A,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Fn(this._container,c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(f)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cz=function(c,f){return new Rv(c,f)};Tt.include({openTooltip:function(c,f,y){return this._initOverlay(Rv,c,f,y).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),tn.include({bindTooltip:function(c,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Rv,this._tooltip,c,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var f=c?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[f](y),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Hn||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&(ht(f,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ht(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var f=c.latlng,y,E;this._tooltip.options.sticky&&c.originalEvent&&(y=this._map.mouseEventToContainerPoint(c.originalEvent),E=this._map.containerPointToLayerPoint(y),f=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(f)}});var A2=la.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var f=c&&c.tagName==="DIV"?c:document.createElement("div"),y=this.options;if(y.html instanceof Element?(Sc(f),f.appendChild(y.html)):f.innerHTML=y.html!==!1?y.html:"",y.bgPos){var E=q(y.bgPos);f.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function uz(c){return new A2(c)}la.Default=Ff;var $f=tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){b(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),on(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Xa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof z?c:new z(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var f=this.getPane().children,y=-c(-1/0,1/0),E=0,A=f.length,U;E<A;E++)U=f[E].style.zIndex,f[E]!==this._container&&U&&(y=c(y,+U));isFinite(y)&&(this.options.zIndex=y+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!lt.ielt9){Fn(this._container,this.options.opacity);var c=+new Date,f=!1,y=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var U=Math.min(1,(c-A.loaded)/200);Fn(A.el,U),U<1?f=!0:(A.active?y=!0:this._onOpaqueTile(A),A.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),f&&(D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=It("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,f=this.options.maxZoom;if(c!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===c?(this._levels[y].el.style.zIndex=f-Math.abs(c-y),this._onUpdateLevel(y)):(on(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var E=this._levels[c],A=this._map;return E||(E=this._levels[c]={},E.el=It("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=f,E.origin=A.project(A.unproject(A.getPixelOrigin()),c).round(),E.zoom=c,this._setZoomTransform(E,A.getCenter(),A.getZoom()),m(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var c,f,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)f=this._tiles[c],f.retain=f.current;for(c in this._tiles)if(f=this._tiles[c],f.current&&!f.active){var E=f.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var f in this._tiles)this._tiles[f].coords.z===c&&this._removeTile(f)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)on(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,f,y,E){var A=Math.floor(c/2),U=Math.floor(f/2),Q=y-1,ce=new z(+A,+U);ce.z=+Q;var fe=this._tileCoordsToKey(ce),Pe=this._tiles[fe];return Pe&&Pe.active?(Pe.retain=!0,!0):(Pe&&Pe.loaded&&(Pe.retain=!0),Q>E?this._retainParent(A,U,Q,E):!1)},_retainChildren:function(c,f,y,E){for(var A=2*c;A<2*c+2;A++)for(var U=2*f;U<2*f+2;U++){var Q=new z(A,U);Q.z=y+1;var ce=this._tileCoordsToKey(Q),fe=this._tiles[ce];if(fe&&fe.active){fe.retain=!0;continue}else fe&&fe.loaded&&(fe.retain=!0);y+1<E&&this._retainChildren(A,U,y+1,E)}},_resetView:function(c){var f=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var f=this.options;return f.minNativeZoom!==void 0&&c<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<c?f.maxNativeZoom:c},_setView:function(c,f,y,E){var A=Math.round(f);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var U=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||U)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(c),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(c,f)},_setZoomTransforms:function(c,f){for(var y in this._levels)this._setZoomTransform(this._levels[y],c,f)},_setZoomTransform:function(c,f,y){var E=this._map.getZoomScale(y,c.zoom),A=c.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(f,y)).round();lt.any3d?aa(c.el,A,E):gt(c.el,A)},_resetGrid:function(){var c=this._map,f=c.options.crs,y=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,f.wrapLng[0]],E).x/y.x),Math.ceil(c.project([0,f.wrapLng[1]],E).x/y.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([f.wrapLat[0],0],E).y/y.x),Math.ceil(c.project([f.wrapLat[1],0],E).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var f=this._map,y=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),E=f.getZoomScale(y,this._tileZoom),A=f.project(c,this._tileZoom).floor(),U=f.getSize().divideBy(E*2);return new X(A.subtract(U),A.add(U))},_update:function(c){var f=this._map;if(f){var y=this._clampZoom(f.getZoom());if(c===void 0&&(c=f.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(c),A=this._pxBoundsToTileRange(E),U=A.getCenter(),Q=[],ce=this.options.keepBuffer,fe=new X(A.getBottomLeft().subtract([ce,-ce]),A.getTopRight().add([ce,-ce]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pe in this._tiles){var qe=this._tiles[Pe].coords;(qe.z!==this._tileZoom||!fe.contains(new z(qe.x,qe.y)))&&(this._tiles[Pe].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(c,y);return}for(var ft=A.min.y;ft<=A.max.y;ft++)for(var Pt=A.min.x;Pt<=A.max.x;Pt++){var ss=new z(Pt,ft);if(ss.z=this._tileZoom,!!this._isValidTile(ss)){var _r=this._tiles[this._tileCoordsToKey(ss)];_r?_r.current=!0:Q.push(ss)}}if(Q.sort(function(ws,dd){return ws.distanceTo(U)-dd.distanceTo(U)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ui=document.createDocumentFragment();for(Pt=0;Pt<Q.length;Pt++)this._addTile(Q[Pt],ui);this._level.el.appendChild(ui)}}}},_isValidTile:function(c){var f=this._map.options.crs;if(!f.infinite){var y=this._globalTileRange;if(!f.wrapLng&&(c.x<y.min.x||c.x>y.max.x)||!f.wrapLat&&(c.y<y.min.y||c.y>y.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(c);return Fe(this.options.bounds).overlaps(E)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var f=this._map,y=this.getTileSize(),E=c.scaleBy(y),A=E.add(y),U=f.unproject(E,c.z),Q=f.unproject(A,c.z);return[U,Q]},_tileCoordsToBounds:function(c){var f=this._tileCoordsToNwSe(c),y=new Ee(f[0],f[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var f=c.split(":"),y=new z(+f[0],+f[1]);return y.z=+f[2],y},_removeTile:function(c){var f=this._tiles[c];f&&(on(f.el),delete this._tiles[c],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){St(c,"leaflet-tile");var f=this.getTileSize();c.style.width=f.x+"px",c.style.height=f.y+"px",c.onselectstart=m,c.onmousemove=m,lt.ielt9&&this.options.opacity<1&&Fn(c,this.options.opacity)},_addTile:function(c,f){var y=this._getTilePos(c),E=this._tileCoordsToKey(c),A=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(A),this.createTile.length<2&&M(o(this._tileReady,this,c,null,A)),gt(A,y),this._tiles[E]={el:A,coords:c,current:!0},f.appendChild(A),this.fire("tileloadstart",{tile:A,coords:c})},_tileReady:function(c,f,y){f&&this.fire("tileerror",{error:f,tile:y,coords:c});var E=this._tileCoordsToKey(c);y=this._tiles[E],y&&(y.loaded=+new Date,this._map._fadeAnimated?(Fn(y.el,0),D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),f||(St(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),lt.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var f=new z(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return f.z=c.z,f},_pxBoundsToTileRange:function(c){var f=this.getTileSize();return new X(c.min.unscaleBy(f).floor(),c.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function dz(c){return new $f(c)}var ud=$f.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,f){this._url=c,f=b(this,f),f.detectRetina&&lt.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,f){return this._url===c&&f===void 0&&(f=!0),this._url=c,f||this.redraw(),this},createTile:function(c,f){var y=document.createElement("img");return ht(y,"load",o(this._tileOnLoad,this,f,y)),ht(y,"error",o(this._tileOnError,this,f,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(c),y},getTileUrl:function(c){var f={r:lt.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-c.y;this.options.tms&&(f.y=y),f["-y"]=y}return x(this._url,s(f,this.options))},_tileOnLoad:function(c,f){lt.ielt9?setTimeout(o(c,this,null,f),0):c(null,f)},_tileOnError:function(c,f,y){var E=this.options.errorTileUrl;E&&f.getAttribute("src")!==E&&(f.src=E),c(y,f)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,f=this.options.maxZoom,y=this.options.zoomReverse,E=this.options.zoomOffset;return y&&(c=f-c),c+E},_getSubdomain:function(c){var f=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var c,f;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(f=this._tiles[c].el,f.onload=m,f.onerror=m,!f.complete)){f.src=R;var y=this._tiles[c].coords;on(f),delete this._tiles[c],this.fire("tileabort",{tile:f,coords:y})}},_removeTile:function(c){var f=this._tiles[c];if(f)return f.el.setAttribute("src",R),$f.prototype._removeTile.call(this,c)},_tileReady:function(c,f,y){if(!(!this._map||y&&y.getAttribute("src")===R))return $f.prototype._tileReady.call(this,c,f,y)}});function O2(c,f){return new ud(c,f)}var M2=ud.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,f){this._url=c;var y=s({},this.defaultWmsParams);for(var E in f)E in this.options||(y[E]=f[E]);f=b(this,f);var A=f.detectRetina&&lt.retina?2:1,U=this.getTileSize();y.width=U.x*A,y.height=U.y*A,this.wmsParams=y},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,ud.prototype.onAdd.call(this,c)},getTileUrl:function(c){var f=this._tileCoordsToNwSe(c),y=this._crs,E=me(y.project(f[0]),y.project(f[1])),A=E.min,U=E.max,Q=(this._wmsVersion>=1.3&&this._crs===tr?[A.y,A.x,U.y,U.x]:[A.x,A.y,U.x,U.y]).join(","),ce=ud.prototype.getTileUrl.call(this,c);return ce+j(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(c,f){return s(this.wmsParams,c),f||this.redraw(),this}});function hz(c,f){return new M2(c,f)}ud.WMS=M2,O2.wms=hz;var ao=tn.extend({options:{padding:.1},initialize:function(c){b(this,c),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,f){var y=this._map.getZoomScale(f,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,f),U=E.multiplyBy(-y).add(A).subtract(this._map._getNewPixelOrigin(c,f));lt.any3d?aa(this._container,U,y):gt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,f=this._map.getSize(),y=this._map.containerPointToLayerPoint(f.multiplyBy(-c)).round();this._bounds=new X(y,y.add(f.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),D2=ao.extend({options:{tolerance:0},getEvents:function(){var c=ao.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ao.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ht(c,"mousemove",this._onMouseMove,this),ht(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,on(this._container),en(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var f in this._layers)c=this._layers[f],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ao.prototype._update.call(this);var c=this._bounds,f=this._container,y=c.getSize(),E=lt.retina?2:1;gt(f,c.min),f.width=E*y.x,f.height=E*y.y,f.style.width=y.x+"px",f.style.height=y.y+"px",lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){ao.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[u(c)]=c;var f=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var f=c._order,y=f.next,E=f.prev;y?y.prev=E:this._drawLast=E,E?E.next=y:this._drawFirst=y,delete c._order,delete this._layers[u(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var f=c.options.dashArray.split(/[, ]+/),y=[],E,A;for(A=0;A<f.length;A++){if(E=Number(f[A]),isNaN(E))return;y.push(E)}c.options._dashArray=y}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var f=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(c._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(c._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var f=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,f=this._redrawBounds;if(this._ctx.save(),f){var y=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)c=E.layer,(!f||c._pxBounds&&c._pxBounds.intersects(f))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,f){if(this._drawing){var y,E,A,U,Q=c._parts,ce=Q.length,fe=this._ctx;if(ce){for(fe.beginPath(),y=0;y<ce;y++){for(E=0,A=Q[y].length;E<A;E++)U=Q[y][E],fe[E?"lineTo":"moveTo"](U.x,U.y);f&&fe.closePath()}this._fillStroke(fe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var f=c._point,y=this._ctx,E=Math.max(Math.round(c._radius),1),A=(Math.max(Math.round(c._radiusY),1)||E)/E;A!==1&&(y.save(),y.scale(1,A)),y.beginPath(),y.arc(f.x,f.y/A,E,0,Math.PI*2,!1),A!==1&&y.restore(),this._fillStroke(y,c)}},_fillStroke:function(c,f){var y=f.options;y.fill&&(c.globalAlpha=y.fillOpacity,c.fillStyle=y.fillColor||y.color,c.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(c.setLineDash&&c.setLineDash(f.options&&f.options._dashArray||[]),c.globalAlpha=y.opacity,c.lineWidth=y.weight,c.strokeStyle=y.color,c.lineCap=y.lineCap,c.lineJoin=y.lineJoin,c.stroke())},_onClick:function(c){for(var f=this._map.mouseEventToLayerPoint(c),y,E,A=this._drawFirst;A;A=A.next)y=A.layer,y.options.interactive&&y._containsPoint(f)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(y))&&(E=y);this._fireEvent(E?[E]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,f)}},_handleMouseOut:function(c){var f=this._hoveredLayer;f&&(_n(this._container,"leaflet-interactive"),this._fireEvent([f],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,f){if(!this._mouseHoverThrottled){for(var y,E,A=this._drawFirst;A;A=A.next)y=A.layer,y.options.interactive&&y._containsPoint(f)&&(E=y);E!==this._hoveredLayer&&(this._handleMouseOut(c),E&&(St(this._container,"leaflet-interactive"),this._fireEvent([E],c,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,f,y){this._map._fireDOMEvent(f,y||f.type,c)},_bringToFront:function(c){var f=c._order;if(f){var y=f.next,E=f.prev;if(y)y.prev=E;else return;E?E.next=y:y&&(this._drawFirst=y),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(c)}},_bringToBack:function(c){var f=c._order;if(f){var y=f.next,E=f.prev;if(E)E.next=y;else return;y?y.prev=E:E&&(this._drawLast=E),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(c)}}});function L2(c){return lt.canvas?new D2(c):null}var Vf=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),fz={_initContainer:function(){this._container=It("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ao.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var f=c._container=Vf("shape");St(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",c._path=Vf("path"),f.appendChild(c._path),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){var f=c._container;this._container.appendChild(f),c.options.interactive&&c.addInteractiveTarget(f)},_removePath:function(c){var f=c._container;on(f),c.removeInteractiveTarget(f),delete this._layers[u(c)]},_updateStyle:function(c){var f=c._stroke,y=c._fill,E=c.options,A=c._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(f||(f=c._stroke=Vf("stroke")),A.appendChild(f),f.weight=E.weight+"px",f.color=E.color,f.opacity=E.opacity,E.dashArray?f.dashStyle=S(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=E.lineCap.replace("butt","flat"),f.joinstyle=E.lineJoin):f&&(A.removeChild(f),c._stroke=null),E.fill?(y||(y=c._fill=Vf("fill")),A.appendChild(y),y.color=E.fillColor||E.color,y.opacity=E.fillOpacity):y&&(A.removeChild(y),c._fill=null)},_updateCircle:function(c){var f=c._point.round(),y=Math.round(c._radius),E=Math.round(c._radiusY||y);this._setPath(c,c._empty()?"M0 0":"AL "+f.x+","+f.y+" "+y+","+E+" 0,"+65535*360)},_setPath:function(c,f){c._path.v=f},_bringToFront:function(c){Xa(c._container)},_bringToBack:function(c){Qo(c._container)}},kv=lt.vml?Vf:xe,zf=ao.extend({_initContainer:function(){this._container=kv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=kv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){on(this._container),en(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ao.prototype._update.call(this);var c=this._bounds,f=c.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,y.setAttribute("width",f.x),y.setAttribute("height",f.y)),gt(y,c.min),y.setAttribute("viewBox",[c.min.x,c.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(c){var f=c._path=kv("path");c.options.className&&St(f,c.options.className),c.options.interactive&&St(f,"leaflet-interactive"),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){on(c._path),c.removeInteractiveTarget(c._path),delete this._layers[u(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var f=c._path,y=c.options;f&&(y.stroke?(f.setAttribute("stroke",y.color),f.setAttribute("stroke-opacity",y.opacity),f.setAttribute("stroke-width",y.weight),f.setAttribute("stroke-linecap",y.lineCap),f.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?f.setAttribute("stroke-dasharray",y.dashArray):f.removeAttribute("stroke-dasharray"),y.dashOffset?f.setAttribute("stroke-dashoffset",y.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),y.fill?(f.setAttribute("fill",y.fillColor||y.color),f.setAttribute("fill-opacity",y.fillOpacity),f.setAttribute("fill-rule",y.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(c,f){this._setPath(c,se(c._parts,f))},_updateCircle:function(c){var f=c._point,y=Math.max(Math.round(c._radius),1),E=Math.max(Math.round(c._radiusY),1)||y,A="a"+y+","+E+" 0 1,0 ",U=c._empty()?"M0 0":"M"+(f.x-y)+","+f.y+A+y*2+",0 "+A+-y*2+",0 ";this._setPath(c,U)},_setPath:function(c,f){c._path.setAttribute("d",f)},_bringToFront:function(c){Xa(c._path)},_bringToBack:function(c){Qo(c._path)}});lt.vml&&zf.include(fz);function F2(c){return lt.svg||lt.vml?new zf(c):null}Tt.include({getRenderer:function(c){var f=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var f=this._paneRenderers[c];return f===void 0&&(f=this._createRenderer({pane:c}),this._paneRenderers[c]=f),f},_createRenderer:function(c){return this.options.preferCanvas&&L2(c)||F2(c)}});var $2=ld.extend({initialize:function(c,f){ld.prototype.initialize.call(this,this._boundsToLatLngs(c),f)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Fe(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function mz(c,f){return new $2(c,f)}zf.create=kv,zf.pointsToPath=se,io.geometryToLayer=Nv,io.coordsToLatLng=cb,io.coordsToLatLngs=Sv,io.latLngToCoords=ub,io.latLngsToCoords=Ev,io.getFeature=cd,io.asFeature=Pv,Tt.mergeOptions({boxZoom:!0});var V2=Fs.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){en(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){on(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ti(),Nf(),this._startPoint=this._map.mouseEventToContainerPoint(c),ht(document,{contextmenu:Ls,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=It("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var f=new X(this._point,this._startPoint),y=f.getSize();gt(this._box,f.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(on(this._box),_n(this._container,"leaflet-crosshair")),Ri(),Sf(),en(document,{contextmenu:Ls,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var f=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tt.addInitHook("addHandler","boxZoom",V2),Tt.mergeOptions({doubleClickZoom:!0});var z2=Fs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var f=this._map,y=f.getZoom(),E=f.options.zoomDelta,A=c.originalEvent.shiftKey?y-E:y+E;f.options.doubleClickZoom==="center"?f.setZoom(A):f.setZoomAround(c.containerPoint,A)}});Tt.addInitHook("addHandler","doubleClickZoom",z2),Tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var U2=Fs.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ki(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_n(this._map._container,"leaflet-grab"),_n(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=Fe(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var f=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(f),this._prunePositions(f)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,f){return c-(c-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;c.x<f.min.x&&(c.x=this._viscousLimit(c.x,f.min.x)),c.y<f.min.y&&(c.y=this._viscousLimit(c.y,f.min.y)),c.x>f.max.x&&(c.x=this._viscousLimit(c.x,f.max.x)),c.y>f.max.y&&(c.y=this._viscousLimit(c.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,f=Math.round(c/2),y=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-f+y)%c+f-y,U=(E+f+y)%c-f-y,Q=Math.abs(A+y)<Math.abs(U+y)?A:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(c){var f=this._map,y=f.options,E=!y.inertia||c.noInertia||this._times.length<2;if(f.fire("dragend",c),E)f.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,Q=y.easeLinearity,ce=A.multiplyBy(Q/U),fe=ce.distanceTo([0,0]),Pe=Math.min(y.inertiaMaxSpeed,fe),qe=ce.multiplyBy(Pe/fe),ft=Pe/(y.inertiaDeceleration*Q),Pt=qe.multiplyBy(-ft/2).round();!Pt.x&&!Pt.y?f.fire("moveend"):(Pt=f._limitOffset(Pt,f.options.maxBounds),M(function(){f.panBy(Pt,{duration:ft,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",U2),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var B2=Fs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ht(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),en(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,f=document.documentElement,y=c.scrollTop||f.scrollTop,E=c.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(E,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var f=this._panKeys={},y=this.keyCodes,E,A;for(E=0,A=y.left.length;E<A;E++)f[y.left[E]]=[-1*c,0];for(E=0,A=y.right.length;E<A;E++)f[y.right[E]]=[c,0];for(E=0,A=y.down.length;E<A;E++)f[y.down[E]]=[0,c];for(E=0,A=y.up.length;E<A;E++)f[y.up[E]]=[0,-1*c]},_setZoomDelta:function(c){var f=this._zoomKeys={},y=this.keyCodes,E,A;for(E=0,A=y.zoomIn.length;E<A;E++)f[y.zoomIn[E]]=c;for(E=0,A=y.zoomOut.length;E<A;E++)f[y.zoomOut[E]]=-c},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){en(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var f=c.keyCode,y=this._map,E;if(f in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(E=this._panKeys[f],c.shiftKey&&(E=q(E).multiplyBy(3)),y.options.maxBounds&&(E=y._limitOffset(q(E),y.options.maxBounds)),y.options.worldCopyJump){var A=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(E)));y.panTo(A)}else y.panBy(E)}else if(f in this._zoomKeys)y.setZoom(y.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;Ls(c)}}});Tt.addInitHook("addHandler","keyboard",B2),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var W2=Fs.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){en(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var f=pv(c),y=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var E=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),E),Ls(c)},_performZoom:function(){var c=this._map,f=c.getZoom(),y=this._map.options.zoomSnap||0;c._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,U=y?Math.ceil(A/y)*y:A,Q=c._limitZoom(f+(this._delta>0?U:-U))-f;this._delta=0,this._startTime=null,Q&&(c.options.scrollWheelZoom==="center"?c.setZoom(f+Q):c.setZoomAround(this._lastMousePos,f+Q))}});Tt.addInitHook("addHandler","scrollWheelZoom",W2);var pz=600;Tt.mergeOptions({tapHold:lt.touchNative&&lt.safari&&lt.mobile,tapTolerance:15});var H2=Fs.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){en(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var f=c.touches[0];this._startPos=this._newPos=new z(f.clientX,f.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",Rn),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),pz),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){en(document,"touchend",Rn),en(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),en(document,"touchend touchcancel contextmenu",this._cancel,this),en(document,"touchmove",this._onMove,this)},_onMove:function(c){var f=c.touches[0];this._newPos=new z(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,f){var y=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});y._simulated=!0,f.target.dispatchEvent(y)}});Tt.addInitHook("addHandler","tapHold",H2),Tt.mergeOptions({touchZoom:lt.touch,bounceAtZoomLimits:!0});var q2=Fs.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_n(this._map._container,"leaflet-touch-zoom"),en(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var f=this._map;if(!(!c.touches||c.touches.length!==2||f._animatingZoom||this._zooming)){var y=f.mouseEventToContainerPoint(c.touches[0]),E=f.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(y.add(E)._divideBy(2))),this._startDist=y.distanceTo(E),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),Rn(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var f=this._map,y=f.mouseEventToContainerPoint(c.touches[0]),E=f.mouseEventToContainerPoint(c.touches[1]),A=y.distanceTo(E)/this._startDist;if(this._zoom=f.getScaleZoom(A,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&A<1||this._zoom>f.getMaxZoom()&&A>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var U=y._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&U.x===0&&U.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var Q=o(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(Q,this,!0),Rn(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),en(document,"touchmove",this._onTouchMove,this),en(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",q2),Tt.BoxZoom=V2,Tt.DoubleClickZoom=z2,Tt.Drag=U2,Tt.Keyboard=B2,Tt.ScrollWheelZoom=W2,Tt.TapHold=H2,Tt.TouchZoom=q2,n.Bounds=X,n.Browser=lt,n.CRS=ye,n.Canvas=D2,n.Circle=lb,n.CircleMarker=jv,n.Class=B,n.Control=xs,n.DivIcon=A2,n.DivOverlay=ca,n.DomEvent=gv,n.DomUtil=fv,n.Draggable=ki,n.Evented=Z,n.FeatureGroup=Hn,n.GeoJSON=io,n.GridLayer=$f,n.Handler=Fs,n.Icon=la,n.ImageOverlay=Cv,n.LatLng=Me,n.LatLngBounds=Ee,n.Layer=tn,n.LayerGroup=kn,n.LineUtil=W,n.Map=Tt,n.Marker=_v,n.Mixin=Ec,n.Path=nl,n.Point=z,n.PolyUtil=id,n.Polygon=ld,n.Polyline=so,n.Popup=Tv,n.PosAnimation=If,n.Projection=Le,n.Rectangle=$2,n.Renderer=ao,n.SVG=zf,n.SVGOverlay=I2,n.TileLayer=ud,n.Tooltip=Rv,n.Transformation=K,n.Util=O,n.VideoOverlay=k2,n.bind=o,n.bounds=me,n.canvas=L2,n.circle=tz,n.circleMarker=ez,n.control=rs,n.divIcon=uz,n.extend=s,n.featureGroup=od,n.geoJSON=R2,n.geoJson=sz,n.gridLayer=dz,n.icon=J9,n.imageOverlay=iz,n.latLng=ue,n.latLngBounds=Fe,n.layerGroup=tl,n.map=Xu,n.marker=X9,n.point=q,n.polygon=rz,n.polyline=nz,n.popup=lz,n.rectangle=mz,n.setOptions=b,n.stamp=u,n.svg=F2,n.svgOverlay=oz,n.tileLayer=O2,n.tooltip=cz,n.transformation=ie,n.version=r,n.videoOverlay=az;var gz=window.L;n.noConflict=function(){return window.L=gz,this},window.L=n})})(Dj,Dj.exports);var Ww=Dj.exports;const df=zo(Ww);function W$(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function H$(t,e){return e==null?function(r,s){const a=w.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=w.useRef();a.current||(a.current=t(r,s));const o=w.useRef(r),{instance:l}=a.current;return w.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),a}}function cde(t,e){w.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function q$(t){return function(n){const r=U$(),s=t(B$(n,r),r);return nde(r.map,n.attribution),lde(s.current,n.eventHandlers),cde(s.current,r),s}}function ude(t,e){const n=H$(t,e),r=q$(n);return ade(r)}function dde(t,e){const n=H$(t,e),r=q$(n);return ode(r)}function hde(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function fde(){return U$().map}function $P(t){const e=fde();return w.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Lj(){return Lj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lj.apply(this,arguments)}function mde({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:o,style:l,whenReady:u,zoom:d,...h},m){const[p]=w.useState({className:s,id:a,style:l}),[v,N]=w.useState(null);w.useImperativeHandle(m,()=>(v==null?void 0:v.map)??null,[v]);const b=w.useCallback(_=>{if(_!==null&&v===null){const x=new Ww.Map(_,h);n!=null&&d!=null?x.setView(n,d):t!=null&&x.fitBounds(t,e),u!=null&&x.whenReady(u),N(sde(x))}},[]);w.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const j=v?oe.createElement(z$,{value:v},r):o??null;return oe.createElement("div",Lj({},p,{ref:b}),j)}const VP=w.forwardRef(mde),zP=ude(function({position:e,...n},r){const s=new Ww.Marker(e,n);return W$(s,ide(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),UP=dde(function({url:e,...n},r){const s=new Ww.TileLayer(e,B$(n,r));return W$(s,r)},function(e,n,r){hde(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete df.Icon.Default.prototype._getIconUrl;df.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const pde=({open:t,onOpenChange:e,listing:n})=>{var M;const{currentUser:r,userProfile:s}=bn(),{createPaymentRequest:a,loading:o}=Uw(),[l,u]=w.useState("method"),[d,h]=w.useState(null),[m,p]=w.useState({}),[v,N]=w.useState({location:"",date:void 0,time:"",notes:""}),[b,j]=w.useState(!1),[_,x]=w.useState(null),S=(D,O)=>{h(D),p(O),u("details")},C=async()=>{if(!(!r||!d))try{const D=v.date&&v.time?new Date(`${vr(v.date,"yyyy-MM-dd")} ${v.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:d,meetingLocation:v.location,meetingDateTime:D,paymentDetails:m,notes:v.notes}),e(!1),R()}catch(D){console.error("Erreur lors de la création de la demande:",D)}},R=()=>{u("method"),h(null),p({}),N({location:"",date:void 0,time:"",notes:""})},V=(D,O)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:O||"EUR"}).format(D),k=D=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[D]||D;async function I(D,O){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${D}&lon=${O}`)).json()).display_name||""}function $(){return $P({click:async D=>{x([D.latlng.lat,D.latlng.lng]),j(!0);const O=await I(D.latlng.lat,D.latlng.lng);N(B=>({...B,location:O})),j(!1),je.success("Adresse détectée automatiquement !")}}),_?i.jsx(zP,{position:_}):null}const T=()=>{if(!navigator.geolocation){je.error("La géolocalisation n'est pas supportée par ce navigateur.");return}j(!0),navigator.geolocation.getCurrentPosition(async D=>{const{latitude:O,longitude:B}=D.coords;x([O,B]);const Y=await I(O,B);Y&&N(ee=>({...ee,location:Y})),j(!1)},()=>{je.error("Impossible d'accéder à la position."),j(!1)})};return i.jsx(Da,{open:t,onOpenChange:e,children:i.jsxs(qi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(La,{children:[i.jsxs(Gi,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Demande de paiement"]}),i.jsxs(nu,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[i.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),i.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[((M=n.images)==null?void 0:M[0])&&i.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:n.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),i.jsx("p",{className:"text-lg font-bold text-primary",children:V(n.price,n.currency||"EUR")})]})]})}),l==="method"&&i.jsx($$,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:S,selectedMethod:d}),l==="details"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(At,{className:"w-5 h-5 text-green-600"}),i.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",k(d)]})]}),d==="cash"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(Zr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(Ke,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:v.location,onChange:D=>N(O=>({...O,location:D.target.value})),className:"flex-1"}),i.jsx(re,{type:"button",variant:"outline",onClick:T,disabled:b,title:"Détecter ma position",children:b?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]})]}),i.jsx("div",{className:"mt-3",children:i.jsxs(VP,{center:_||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(UP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx($,{})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{children:"Date de rencontre"}),i.jsxs(Nue,{children:[i.jsx(Sue,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[i.jsx(gi,{className:"mr-2 h-4 w-4"}),v.date?vr(v.date,"PPP",{locale:Yr}):i.jsx("span",{children:"Choisir une date"})]})}),i.jsx(N$,{className:"w-auto p-0",children:i.jsx(h$,{mode:"single",selected:v.date,onSelect:D=>N(O=>({...O,date:D})),disabled:D=>D<new Date,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"meeting-time",children:"Heure de rencontre"}),i.jsx(Ke,{id:"meeting-time",type:"time",value:v.time,onChange:D=>N(O=>({...O,time:D.target.value})),className:"mt-1"})]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),i.jsx(bi,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:v.notes,onChange:D=>N(O=>({...O,notes:D.target.value})),rows:3,className:"mt-1"})]}),i.jsxs(qt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Bt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),i.jsx(re,{onClick:()=>u("confirmation"),className:"flex-1",disabled:d==="cash"&&!v.location,children:"Continuer"})]})]}),l==="confirmation"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),i.jsx("p",{className:"font-medium",children:k(d)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),i.jsx("p",{className:"font-medium",children:V(n.price,n.currency||"EUR")})]}),d==="cash"&&v.location&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),i.jsx("p",{className:"font-medium",children:v.location})]}),v.date&&v.time&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),i.jsxs("p",{className:"font-medium",children:[vr(v.date,"PPP",{locale:Yr})," à ",v.time]})]})]})]}),v.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),i.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:v.notes})]})]}),i.jsxs(qt,{children:[i.jsx(ec,{className:"h-4 w-4"}),i.jsx(Gt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),i.jsx(re,{onClick:C,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},gde=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=bn(),{createConversation:s,setCurrentConversation:a,conversations:o}=Aw(),l=xr(),[u,d]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState(""),[N,b]=w.useState(""),[j,_]=w.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const x=o.find(k=>k.listingId===t.id&&k.participants.includes((n==null?void 0:n.uid)||"")&&k.participants.includes(t.sellerId)),S=()=>{if(!n){l("/auth");return}if(x){a(x),l("/messages");return}const k=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;v(k),b((r==null?void 0:r.email)||""),d(!0)},C=()=>{if(!n){l("/auth");return}m(!0)},R=async()=>{var k;if(!p.trim()||!N.trim()||!n||!r){je.error("Veuillez remplir tous les champs");return}_(!0);try{const I=await s(t.id,t.title,t.price,(k=t.images)==null?void 0:k[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},p.trim());d(!1),je.success(i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Message envoyé !"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),i.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>{je.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",i.jsx(Np,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(I){console.error("Erreur lors de l'envoi du message:",I),je.error("Erreur lors de l'envoi du message")}finally{_(!1)}},V=(k,I)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const $=I||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:$}).format(k)}catch{return`${k} €`}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{onClick:S,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[i.jsx(Cn,{className:"w-4 h-4 mr-2"}),x?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&i.jsxs(re,{onClick:C,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Payer"]})]}),i.jsx(Da,{open:u,onOpenChange:d,children:i.jsxs(qi,{className:"max-w-md",children:[i.jsx(La,{children:i.jsxs(Gi,{className:"flex items-center gap-2",children:[i.jsx(Cn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs(Do,{className:"w-8 h-8",children:[i.jsx(Lo,{src:t.sellerAvatar||void 0}),i.jsx(Fo,{children:t.sellerName[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),i.jsx("p",{className:"text-sm font-medium",children:t.title}),i.jsx("p",{className:"text-sm text-primary font-semibold",children:V(t.price,t.currency)})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"contact-email",children:"Votre email"}),i.jsx(Ke,{id:"contact-email",type:"email",value:N,onChange:k=>b(k.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"contact-message",children:"Votre message"}),i.jsx(bi,{id:"contact-message",value:p,onChange:k=>v(k.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),i.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(ec,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),i.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(re,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Annuler"}),i.jsx(re,{onClick:R,disabled:j||!p.trim()||!N.trim(),className:"flex-1",children:j?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Sh,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),i.jsx(pde,{open:h,onOpenChange:m,listing:t})]})},vde=()=>{var x;const{id:t}=LS(),e=xr(),{currentUser:n}=bn(),{currentListing:r,loading:s,fetchListingById:a}=Zg(),{fetchUserFavorites:o}=A5(),[l,u]=w.useState(0);if(w.useEffect(()=>{t&&a(t)},[t,a]),w.useEffect(()=>{n&&o(n.uid)},[n,o]),s)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(Un,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),i.jsx(re,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const d=r,h=(n==null?void 0:n.uid)===d.sellerId,m=(S,C)=>{if(d.transactionType==="donation")return"Gratuit";if(d.transactionType==="exchange")return"Échange";const R=C||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(S)}catch{return`${S} €`}},p=S=>{switch(S){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return S}},v=S=>{switch(S){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=()=>{switch(d.transactionType){case"donation":return i.jsx(Nh,{className:"w-4 h-4"});case"exchange":return i.jsx(Ao,{className:"w-4 h-4"});case"service":return i.jsx(ef,{className:"w-4 h-4"});default:return i.jsx(Gx,{className:"w-4 h-4"})}},b=()=>{switch(d.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},j=()=>{d.images&&d.images.length>1&&u(S=>S===d.images.length-1?0:S+1)},_=()=>{d.images&&d.images.length>1&&u(S=>S===0?d.images.length-1:S-1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"border-b border-border bg-muted/30",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(ze,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),i.jsx("span",{children:"/"}),i.jsx(ze,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-foreground",children:d.title})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs(re,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:d.images&&d.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:_,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:i.jsx(vX,{className:"w-6 h-6"})}),i.jsx("div",{onClick:j,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:i.jsx(Na,{className:"w-6 h-6"})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",d.images.length]})]}),i.jsxs(Da,{children:[i.jsx(ih,{asChild:!0,children:i.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:i.jsx(Xc,{className:"w-5 h-5"})})}),i.jsxs(qi,{className:"max-w-4xl",children:[i.jsx(Gi,{children:"Image en plein écran de l'annonce"}),i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Xc,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Aucune image disponible"})]})})}),d.images&&d.images.length>1&&i.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.images.map((S,C)=>i.jsx("button",{onClick:()=>u(C),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${C===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:i.jsx("img",{src:S,alt:`${d.title} ${C+1}`,className:"w-full h-full object-cover"})},C))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ge,{children:i.jsx(ve,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ct,{className:"bg-primary/10 text-primary border-primary/20",children:[N(),i.jsx("span",{className:"ml-1",children:b()})]}),d.sellerVerified&&i.jsxs(ct,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Bt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsxs("div",{className:"text-3xl font-bold text-primary",children:[m(d.price,d.currency),d.transactionType==="service"&&i.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),d.transactionType==="exchange"&&d.exchangeFor&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[i.jsx(Ao,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),i.jsx("p",{className:"text-purple-700 mt-1",children:d.exchangeFor})]}),d.aiPriceEstimate&&d.transactionType==="sale"&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[i.jsx(Fg,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),i.jsxs("p",{className:"text-green-700 text-sm",children:[d.aiPriceEstimate.min,"€ - ",d.aiPriceEstimate.max,"€",i.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(d.aiPriceEstimate.confidence*100),"%)"]})]})]}),i.jsx("div",{className:"space-y-3",children:h?i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{to:`/edit-listing/${d.id}`,children:i.jsxs(re,{variant:"outline",className:"w-full",children:[i.jsx(ms,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):i.jsxs(i.Fragment,{children:[i.jsx(gde,{listing:d,className:"w-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(O5,{listing:d,size:"lg",showText:!1}),i.jsx(M5,{listing:d,size:"lg",showText:!1})]}),i.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:i.jsx(Hc,{className:"w-5 h-5"})})]})]})})]})})}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsx(rt,{className:"text-lg",children:"Vendeur"})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Do,{className:"w-12 h-12",children:[i.jsx(Lo,{src:d.sellerAvatar||void 0}),i.jsx(Fo,{children:(x=d.sellerName[0])==null?void 0:x.toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:d.sellerName}),d.sellerVerified&&i.jsx(Bt,{className:"w-4 h-4 text-green-600"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d.sellerUniversity})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"23"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"98%"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),d.environmentalImpact&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"text-lg flex items-center gap-2",children:[i.jsx(Hi,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",d.environmentalImpact.co2Saved," kg CO₂"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsxs("span",{children:[d.views," vues"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-4 h-4"}),i.jsx("span",{children:cf(d.createdAt,{addSuffix:!0,locale:Yr})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),i.jsx("span",{children:d.location.city})]})]})]}),i.jsx(ct,{className:v(d.condition),children:p(d.condition)})]})}),i.jsx(ve,{children:i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx("p",{className:"whitespace-pre-wrap",children:d.description})})})]}),d.tags&&d.tags.length>0&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsx(rt,{className:"text-lg",children:"Tags"})}),i.jsx(ve,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((S,C)=>i.jsx(ct,{variant:"secondary",children:S},C))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"text-lg flex items-center gap-2",children:[i.jsx(Zr,{className:"w-5 h-5"}),"Localisation"]})}),i.jsxs(ve,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:d.location.city}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.location.state,", ",d.location.country]})]}),d.location.campus&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Campus"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.campus})]}),d.location.university&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Université"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.university})]})]})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"text-lg flex items-center gap-2",children:[i.jsx(Bt,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(ec,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var ev=t=>t.type==="checkbox",qc=t=>t instanceof Date,cs=t=>t==null;const G$=t=>typeof t=="object";var Xn=t=>!cs(t)&&!Array.isArray(t)&&G$(t)&&!qc(t),yde=t=>Xn(t)&&t.target?ev(t.target)?t.target.checked:t.target.value:t,xde=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,wde=(t,e)=>t.has(xde(e)),bde=t=>{const e=t.constructor&&t.constructor.prototype;return Xn(e)&&e.hasOwnProperty("isPrototypeOf")},BP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Hr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(BP&&(t instanceof Blob||r))&&(n||Xn(t)))if(e=n?[]:{},!n&&!bde(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Hr(t[s]));else return t;return e}var Hw=t=>/^\w*$/.test(t),ir=t=>t===void 0,WP=t=>Array.isArray(t)?t.filter(Boolean):[],HP=t=>WP(t.replace(/["|']|\]/g,"").split(/\.|\[/)),nt=(t,e,n)=>{if(!e||!Xn(t))return n;const r=(Hw(e)?[e]:HP(e)).reduce((s,a)=>cs(s)?s:s[a],t);return ir(r)||r===t?ir(t[e])?n:t[e]:r},ga=t=>typeof t=="boolean",nn=(t,e,n)=>{let r=-1;const s=Hw(e)?[e]:HP(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let u=n;if(r!==o){const d=t[l];u=Xn(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}};const zk={BLUR:"blur",FOCUS_OUT:"focusout"},$i={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},uo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_de=oe.createContext(null);_de.displayName="HookFormContext";var jde=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==$i.all&&(e._proxyFormState[o]=!r||$i.all),t[o]}});return s};const Nde=typeof window<"u"?w.useLayoutEffect:w.useEffect;var Pa=t=>typeof t=="string",Sde=(t,e,n,r,s)=>Pa(t)?(r&&e.watch.add(t),nt(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),nt(n,a))):(r&&(e.watchAll=!0),n),K$=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Bm=t=>Array.isArray(t)?t:[t],Uk=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},Fj=t=>cs(t)||!G$(t);function jl(t,e){if(Fj(t)||Fj(e))return t===e;if(qc(t)&&qc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(qc(a)&&qc(o)||Xn(a)&&Xn(o)||Array.isArray(a)&&Array.isArray(o)?!jl(a,o):a!==o)return!1}}return!0}var js=t=>Xn(t)&&!Object.keys(t).length,qP=t=>t.type==="file",Vi=t=>typeof t=="function",l0=t=>{if(!BP)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Z$=t=>t.type==="select-multiple",GP=t=>t.type==="radio",Ede=t=>GP(t)||ev(t),S_=t=>l0(t)&&t.isConnected;function Pde(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ir(t)?r++:t[e[r++]];return t}function Cde(t){for(const e in t)if(t.hasOwnProperty(e)&&!ir(t[e]))return!1;return!0}function hr(t,e){const n=Array.isArray(e)?e:Hw(e)?[e]:HP(e),r=n.length===1?t:Pde(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Xn(r)&&js(r)||Array.isArray(r)&&Cde(r))&&hr(t,n.slice(0,-1)),t}var Q$=t=>{for(const e in t)if(Vi(t[e]))return!0;return!1};function c0(t,e={}){const n=Array.isArray(t);if(Xn(t)||n)for(const r in t)Array.isArray(t[r])||Xn(t[r])&&!Q$(t[r])?(e[r]=Array.isArray(t[r])?[]:{},c0(t[r],e[r])):cs(t[r])||(e[r]=!0);return e}function Y$(t,e,n){const r=Array.isArray(t);if(Xn(t)||r)for(const s in t)Array.isArray(t[s])||Xn(t[s])&&!Q$(t[s])?ir(e)||Fj(n[s])?n[s]=Array.isArray(t[s])?c0(t[s],[]):{...c0(t[s])}:Y$(t[s],cs(e)?{}:e[s],n[s]):n[s]=!jl(t[s],e[s]);return n}var nm=(t,e)=>Y$(t,e,c0(e));const Bk={value:!1,isValid:!1},Wk={value:!0,isValid:!0};var J$=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ir(t[0].attributes.value)?ir(t[0].value)||t[0].value===""?Wk:{value:t[0].value,isValid:!0}:Wk:Bk}return Bk},X$=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ir(t)?t:e?t===""?NaN:t&&+t:n&&Pa(t)?new Date(t):r?r(t):t;const Hk={isValid:!1,value:null};var eV=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Hk):Hk;function qk(t){const e=t.ref;return qP(e)?e.files:GP(e)?eV(t.refs).value:Z$(e)?[...e.selectedOptions].map(({value:n})=>n):ev(e)?J$(t.refs).value:X$(ir(e.value)?t.ref.value:e.value,t)}var Tde=(t,e,n,r)=>{const s={};for(const a of t){const o=nt(e,a);o&&nn(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},u0=t=>t instanceof RegExp,rm=t=>ir(t)?t:u0(t)?t.source:Xn(t)?u0(t.value)?t.value.source:t.value:t,Gk=t=>({isOnSubmit:!t||t===$i.onSubmit,isOnBlur:t===$i.onBlur,isOnChange:t===$i.onChange,isOnAll:t===$i.all,isOnTouch:t===$i.onTouched});const Kk="AsyncFunction";var Rde=t=>!!t&&!!t.validate&&!!(Vi(t.validate)&&t.validate.constructor.name===Kk||Xn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Kk)),kde=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Zk=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Wm=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=nt(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Wm(l,e))break}else if(Xn(l)&&Wm(l,e))break}}};function Qk(t,e,n){const r=nt(t,n);if(r||Hw(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=nt(e,a),l=nt(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var Ide=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return js(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||$i.all))},Ade=(t,e,n)=>!t||!e||t===e||Bm(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Ode=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Mde=(t,e)=>!WP(nt(t,e)).length&&hr(t,e),Dde=(t,e,n)=>{const r=Bm(nt(t,n));return nn(r,"root",e[n]),nn(t,n,r),t},Yy=t=>Pa(t);function Yk(t,e,n="validate"){if(Yy(t)||Array.isArray(t)&&t.every(Yy)||ga(t)&&!t)return{type:n,message:Yy(t)?t:"",ref:e}}var yd=t=>Xn(t)&&!u0(t)?t:{value:t,message:""},Jk=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:u,maxLength:d,minLength:h,min:m,max:p,pattern:v,validate:N,name:b,valueAsNumber:j,mount:_}=t._f,x=nt(n,b);if(!_||e.has(b))return{};const S=l?l[0]:o,C=D=>{s&&S.reportValidity&&(S.setCustomValidity(ga(D)?"":D||""),S.reportValidity())},R={},V=GP(o),k=ev(o),I=V||k,$=(j||qP(o))&&ir(o.value)&&ir(x)||l0(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,T=K$.bind(null,b,r,R),M=(D,O,B,Y=uo.maxLength,ee=uo.minLength)=>{const Z=D?O:B;R[b]={type:D?Y:ee,message:Z,ref:o,...T(D?Y:ee,Z)}};if(a?!Array.isArray(x)||!x.length:u&&(!I&&($||cs(x))||ga(x)&&!x||k&&!J$(l).isValid||V&&!eV(l).isValid)){const{value:D,message:O}=Yy(u)?{value:!!u,message:u}:yd(u);if(D&&(R[b]={type:uo.required,message:O,ref:S,...T(uo.required,O)},!r))return C(O),R}if(!$&&(!cs(m)||!cs(p))){let D,O;const B=yd(p),Y=yd(m);if(!cs(x)&&!isNaN(x)){const ee=o.valueAsNumber||x&&+x;cs(B.value)||(D=ee>B.value),cs(Y.value)||(O=ee<Y.value)}else{const ee=o.valueAsDate||new Date(x),Z=q=>new Date(new Date().toDateString()+" "+q),z=o.type=="time",H=o.type=="week";Pa(B.value)&&x&&(D=z?Z(x)>Z(B.value):H?x>B.value:ee>new Date(B.value)),Pa(Y.value)&&x&&(O=z?Z(x)<Z(Y.value):H?x<Y.value:ee<new Date(Y.value))}if((D||O)&&(M(!!D,B.message,Y.message,uo.max,uo.min),!r))return C(R[b].message),R}if((d||h)&&!$&&(Pa(x)||a&&Array.isArray(x))){const D=yd(d),O=yd(h),B=!cs(D.value)&&x.length>+D.value,Y=!cs(O.value)&&x.length<+O.value;if((B||Y)&&(M(B,D.message,O.message),!r))return C(R[b].message),R}if(v&&!$&&Pa(x)){const{value:D,message:O}=yd(v);if(u0(D)&&!x.match(D)&&(R[b]={type:uo.pattern,message:O,ref:o,...T(uo.pattern,O)},!r))return C(O),R}if(N){if(Vi(N)){const D=await N(x,n),O=Yk(D,S);if(O&&(R[b]={...O,...T(uo.validate,O.message)},!r))return C(O.message),R}else if(Xn(N)){let D={};for(const O in N){if(!js(D)&&!r)break;const B=Yk(await N[O](x,n),S,O);B&&(D={...B,...T(O,B.message)},C(B.message),r&&(R[b]=D))}if(!js(D)&&(R[b]={ref:S,...D},!r))return R}}return C(!0),R};const Lde={mode:$i.onSubmit,reValidateMode:$i.onChange,shouldFocusError:!0};function Fde(t={}){let e={...Lde,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Xn(e.defaultValues)||Xn(e.values)?Hr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Hr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const p={array:Uk(),state:Uk()},v=e.criteriaMode===$i.all,N=G=>ae=>{clearTimeout(d),d=setTimeout(G,ae)},b=async G=>{if(!e.disabled&&(h.isValid||m.isValid||G)){const ae=e.resolver?js((await k()).errors):await $(r,!0);ae!==n.isValid&&p.state.next({isValid:ae})}},j=(G,ae)=>{!e.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((G||Array.from(l.mount)).forEach(de=>{de&&(ae?nn(n.validatingFields,de,ae):hr(n.validatingFields,de))}),p.state.next({validatingFields:n.validatingFields,isValidating:!js(n.validatingFields)}))},_=(G,ae=[],de,Re,ke=!0,Ce=!0)=>{if(Re&&de&&!e.disabled){if(o.action=!0,Ce&&Array.isArray(nt(r,G))){const De=de(nt(r,G),Re.argA,Re.argB);ke&&nn(r,G,De)}if(Ce&&Array.isArray(nt(n.errors,G))){const De=de(nt(n.errors,G),Re.argA,Re.argB);ke&&nn(n.errors,G,De),Mde(n.errors,G)}if((h.touchedFields||m.touchedFields)&&Ce&&Array.isArray(nt(n.touchedFields,G))){const De=de(nt(n.touchedFields,G),Re.argA,Re.argB);ke&&nn(n.touchedFields,G,De)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=nm(s,a)),p.state.next({name:G,isDirty:M(G,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else nn(a,G,ae)},x=(G,ae)=>{nn(n.errors,G,ae),p.state.next({errors:n.errors})},S=G=>{n.errors=G,p.state.next({errors:n.errors,isValid:!1})},C=(G,ae,de,Re)=>{const ke=nt(r,G);if(ke){const Ce=nt(a,G,ir(de)?nt(s,G):de);ir(Ce)||Re&&Re.defaultChecked||ae?nn(a,G,ae?Ce:qk(ke._f)):B(G,Ce),o.mount&&b()}},R=(G,ae,de,Re,ke)=>{let Ce=!1,De=!1;const We={name:G};if(!e.disabled){if(!de||Re){(h.isDirty||m.isDirty)&&(De=n.isDirty,n.isDirty=We.isDirty=M(),Ce=De!==We.isDirty);const tt=jl(nt(s,G),ae);De=!!nt(n.dirtyFields,G),tt?hr(n.dirtyFields,G):nn(n.dirtyFields,G,!0),We.dirtyFields=n.dirtyFields,Ce=Ce||(h.dirtyFields||m.dirtyFields)&&De!==!tt}if(de){const tt=nt(n.touchedFields,G);tt||(nn(n.touchedFields,G,de),We.touchedFields=n.touchedFields,Ce=Ce||(h.touchedFields||m.touchedFields)&&tt!==de)}Ce&&ke&&p.state.next(We)}return Ce?We:{}},V=(G,ae,de,Re)=>{const ke=nt(n.errors,G),Ce=(h.isValid||m.isValid)&&ga(ae)&&n.isValid!==ae;if(e.delayError&&de?(u=N(()=>x(G,de)),u(e.delayError)):(clearTimeout(d),u=null,de?nn(n.errors,G,de):hr(n.errors,G)),(de?!jl(ke,de):ke)||!js(Re)||Ce){const De={...Re,...Ce&&ga(ae)?{isValid:ae}:{},errors:n.errors,name:G};n={...n,...De},p.state.next(De)}},k=async G=>{j(G,!0);const ae=await e.resolver(a,e.context,Tde(G||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return j(G),ae},I=async G=>{const{errors:ae}=await k(G);if(G)for(const de of G){const Re=nt(ae,de);Re?nn(n.errors,de,Re):hr(n.errors,de)}else n.errors=ae;return ae},$=async(G,ae,de={valid:!0})=>{for(const Re in G){const ke=G[Re];if(ke){const{_f:Ce,...De}=ke;if(Ce){const We=l.array.has(Ce.name),tt=ke._f&&Rde(ke._f);tt&&h.validatingFields&&j([Re],!0);const Ht=await Jk(ke,l.disabled,a,v,e.shouldUseNativeValidation&&!ae,We);if(tt&&h.validatingFields&&j([Re]),Ht[Ce.name]&&(de.valid=!1,ae))break;!ae&&(nt(Ht,Ce.name)?We?Dde(n.errors,Ht,Ce.name):nn(n.errors,Ce.name,Ht[Ce.name]):hr(n.errors,Ce.name))}!js(De)&&await $(De,ae,de)}}return de.valid},T=()=>{for(const G of l.unMount){const ae=nt(r,G);ae&&(ae._f.refs?ae._f.refs.every(de=>!S_(de)):!S_(ae._f.ref))&&ye(G)}l.unMount=new Set},M=(G,ae)=>!e.disabled&&(G&&ae&&nn(a,G,ae),!jl(q(),s)),D=(G,ae,de)=>Sde(G,l,{...o.mount?a:ir(ae)?s:Pa(G)?{[G]:ae}:ae},de,ae),O=G=>WP(nt(o.mount?a:s,G,e.shouldUnregister?nt(s,G,[]):[])),B=(G,ae,de={})=>{const Re=nt(r,G);let ke=ae;if(Re){const Ce=Re._f;Ce&&(!Ce.disabled&&nn(a,G,X$(ae,Ce)),ke=l0(Ce.ref)&&cs(ae)?"":ae,Z$(Ce.ref)?[...Ce.ref.options].forEach(De=>De.selected=ke.includes(De.value)):Ce.refs?ev(Ce.ref)?Ce.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(ke)?De.checked=!!ke.find(We=>We===De.value):De.checked=ke===De.value||!!ke)}):Ce.refs.forEach(De=>De.checked=De.value===ke):qP(Ce.ref)?Ce.ref.value="":(Ce.ref.value=ke,Ce.ref.type||p.state.next({name:G,values:Hr(a)})))}(de.shouldDirty||de.shouldTouch)&&R(G,ke,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&H(G)},Y=(G,ae,de)=>{for(const Re in ae){if(!ae.hasOwnProperty(Re))return;const ke=ae[Re],Ce=G+"."+Re,De=nt(r,Ce);(l.array.has(G)||Xn(ke)||De&&!De._f)&&!qc(ke)?Y(Ce,ke,de):B(Ce,ke,de)}},ee=(G,ae,de={})=>{const Re=nt(r,G),ke=l.array.has(G),Ce=Hr(ae);nn(a,G,Ce),ke?(p.array.next({name:G,values:Hr(a)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&de.shouldDirty&&p.state.next({name:G,dirtyFields:nm(s,a),isDirty:M(G,Ce)})):Re&&!Re._f&&!cs(Ce)?Y(G,Ce,de):B(G,Ce,de),Zk(G,l)&&p.state.next({...n}),p.state.next({name:o.mount?G:void 0,values:Hr(a)})},Z=async G=>{o.mount=!0;const ae=G.target;let de=ae.name,Re=!0;const ke=nt(r,de),Ce=tt=>{Re=Number.isNaN(tt)||qc(tt)&&isNaN(tt.getTime())||jl(tt,nt(a,de,tt))},De=Gk(e.mode),We=Gk(e.reValidateMode);if(ke){let tt,Ht;const Ln=ae.type?qk(ke._f):yde(G),Tn=G.type===zk.BLUR||G.type===zk.FOCUS_OUT,Je=!kde(ke._f)&&!e.resolver&&!nt(n.errors,de)&&!ke._f.deps||Ode(Tn,nt(n.touchedFields,de),n.isSubmitted,We,De),dr=Zk(de,l,Tn);nn(a,de,Ln),Tn?(ke._f.onBlur&&ke._f.onBlur(G),u&&u(0)):ke._f.onChange&&ke._f.onChange(G);const ys=R(de,Ln,Tn),ia=!js(ys)||dr;if(!Tn&&p.state.next({name:de,type:G.type,values:Hr(a)}),Je)return(h.isValid||m.isValid)&&(e.mode==="onBlur"?Tn&&b():Tn||b()),ia&&p.state.next({name:de,...dr?{}:ys});if(!Tn&&dr&&p.state.next({...n}),e.resolver){const{errors:zu}=await k([de]);if(Ce(Ln),Re){const Za=Qk(n.errors,r,de),Go=Qk(zu,r,Za.name||de);tt=Go.error,de=Go.name,Ht=js(zu)}}else j([de],!0),tt=(await Jk(ke,l.disabled,a,v,e.shouldUseNativeValidation))[de],j([de]),Ce(Ln),Re&&(tt?Ht=!1:(h.isValid||m.isValid)&&(Ht=await $(r,!0)));Re&&(ke._f.deps&&H(ke._f.deps),V(de,Ht,tt,ys))}},z=(G,ae)=>{if(nt(n.errors,ae)&&G.focus)return G.focus(),1},H=async(G,ae={})=>{let de,Re;const ke=Bm(G);if(e.resolver){const Ce=await I(ir(G)?G:ke);de=js(Ce),Re=G?!ke.some(De=>nt(Ce,De)):de}else G?(Re=(await Promise.all(ke.map(async Ce=>{const De=nt(r,Ce);return await $(De&&De._f?{[Ce]:De}:De)}))).every(Boolean),!(!Re&&!n.isValid)&&b()):Re=de=await $(r);return p.state.next({...!Pa(G)||(h.isValid||m.isValid)&&de!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:de}:{},errors:n.errors}),ae.shouldFocus&&!Re&&Wm(r,z,G?ke:l.mount),Re},q=G=>{const ae={...o.mount?a:s};return ir(G)?ae:Pa(G)?nt(ae,G):G.map(de=>nt(ae,de))},X=(G,ae)=>({invalid:!!nt((ae||n).errors,G),isDirty:!!nt((ae||n).dirtyFields,G),error:nt((ae||n).errors,G),isValidating:!!nt(n.validatingFields,G),isTouched:!!nt((ae||n).touchedFields,G)}),me=G=>{G&&Bm(G).forEach(ae=>hr(n.errors,ae)),p.state.next({errors:G?n.errors:{}})},Ee=(G,ae,de)=>{const Re=(nt(r,G,{_f:{}})._f||{}).ref,ke=nt(n.errors,G)||{},{ref:Ce,message:De,type:We,...tt}=ke;nn(n.errors,G,{...tt,...ae,ref:Re}),p.state.next({name:G,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Re&&Re.focus&&Re.focus()},Fe=(G,ae)=>Vi(G)?p.state.subscribe({next:de=>G(D(void 0,ae),de)}):D(G,ae,!0),Me=G=>p.state.subscribe({next:ae=>{Ade(G.name,ae.name,G.exact)&&Ide(ae,G.formState||h,we,G.reRenderRoot)&&G.callback({values:{...a},...n,...ae})}}).unsubscribe,ue=G=>(o.mount=!0,m={...m,...G.formState},Me({...G,formState:m})),ye=(G,ae={})=>{for(const de of G?Bm(G):l.mount)l.mount.delete(de),l.array.delete(de),ae.keepValue||(hr(r,de),hr(a,de)),!ae.keepError&&hr(n.errors,de),!ae.keepDirty&&hr(n.dirtyFields,de),!ae.keepTouched&&hr(n.touchedFields,de),!ae.keepIsValidating&&hr(n.validatingFields,de),!e.shouldUnregister&&!ae.keepDefaultValue&&hr(s,de);p.state.next({values:Hr(a)}),p.state.next({...n,...ae.keepDirty?{isDirty:M()}:{}}),!ae.keepIsValid&&b()},J=({disabled:G,name:ae})=>{(ga(G)&&o.mount||G||l.disabled.has(ae))&&(G?l.disabled.add(ae):l.disabled.delete(ae))},te=(G,ae={})=>{let de=nt(r,G);const Re=ga(ae.disabled)||ga(e.disabled);return nn(r,G,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:G}},name:G,mount:!0,...ae}}),l.mount.add(G),de?J({disabled:ga(ae.disabled)?ae.disabled:e.disabled,name:G}):C(G,!0,ae.value),{...Re?{disabled:ae.disabled||e.disabled}:{},...e.progressive?{required:!!ae.required,min:rm(ae.min),max:rm(ae.max),minLength:rm(ae.minLength),maxLength:rm(ae.maxLength),pattern:rm(ae.pattern)}:{},name:G,onChange:Z,onBlur:Z,ref:ke=>{if(ke){te(G,ae),de=nt(r,G);const Ce=ir(ke.value)&&ke.querySelectorAll&&ke.querySelectorAll("input,select,textarea")[0]||ke,De=Ede(Ce),We=de._f.refs||[];if(De?We.find(tt=>tt===Ce):Ce===de._f.ref)return;nn(r,G,{_f:{...de._f,...De?{refs:[...We.filter(S_),Ce,...Array.isArray(nt(s,G))?[{}]:[]],ref:{type:Ce.type,name:G}}:{ref:Ce}}}),C(G,!1,void 0,Ce)}else de=nt(r,G,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||ae.shouldUnregister)&&!(wde(l.array,G)&&o.action)&&l.unMount.add(G)}}},ne=()=>e.shouldFocusError&&Wm(r,z,l.mount),K=G=>{ga(G)&&(p.state.next({disabled:G}),Wm(r,(ae,de)=>{const Re=nt(r,de);Re&&(ae.disabled=Re._f.disabled||G,Array.isArray(Re._f.refs)&&Re._f.refs.forEach(ke=>{ke.disabled=Re._f.disabled||G}))},0,!1))},ie=(G,ae)=>async de=>{let Re;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let ke=Hr(a);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Ce,values:De}=await k();n.errors=Ce,ke=De}else await $(r);if(l.disabled.size)for(const Ce of l.disabled)nn(ke,Ce,void 0);if(hr(n.errors,"root"),js(n.errors)){p.state.next({errors:{}});try{await G(ke,de)}catch(Ce){Re=Ce}}else ae&&await ae({...n.errors},de),ne(),setTimeout(ne);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:js(n.errors)&&!Re,submitCount:n.submitCount+1,errors:n.errors}),Re)throw Re},he=(G,ae={})=>{nt(r,G)&&(ir(ae.defaultValue)?ee(G,Hr(nt(s,G))):(ee(G,ae.defaultValue),nn(s,G,Hr(ae.defaultValue))),ae.keepTouched||hr(n.touchedFields,G),ae.keepDirty||(hr(n.dirtyFields,G),n.isDirty=ae.defaultValue?M(G,Hr(nt(s,G))):M()),ae.keepError||(hr(n.errors,G),h.isValid&&b()),p.state.next({...n}))},_e=(G,ae={})=>{const de=G?Hr(G):s,Re=Hr(de),ke=js(G),Ce=ke?s:Re;if(ae.keepDefaultValues||(s=de),!ae.keepValues){if(ae.keepDirtyValues){const De=new Set([...l.mount,...Object.keys(nm(s,a))]);for(const We of Array.from(De))nt(n.dirtyFields,We)?nn(Ce,We,nt(a,We)):ee(We,nt(Ce,We))}else{if(BP&&ir(G))for(const De of l.mount){const We=nt(r,De);if(We&&We._f){const tt=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(l0(tt)){const Ht=tt.closest("form");if(Ht){Ht.reset();break}}}}for(const De of l.mount)ee(De,nt(Ce,De))}a=Hr(Ce),p.array.next({values:{...Ce}}),p.state.next({values:{...Ce}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:ke?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!jl(G,s)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ke?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?nm(s,a):n.dirtyFields:ae.keepDefaultValues&&G?nm(s,G):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(G,ae)=>_e(Vi(G)?G(a):G,ae),se=(G,ae={})=>{const de=nt(r,G),Re=de&&de._f;if(Re){const ke=Re.refs?Re.refs[0]:Re.ref;ke.focus&&(ke.focus(),ae.shouldSelect&&Vi(ke.select)&&ke.select())}},we=G=>{n={...n,...G}},He={control:{register:te,unregister:ye,getFieldState:X,handleSubmit:ie,setError:Ee,_subscribe:Me,_runSchema:k,_focusError:ne,_getWatch:D,_getDirty:M,_setValid:b,_setFieldArray:_,_setDisabledField:J,_setErrors:S,_getFieldArray:O,_reset:_e,_resetDefaultValues:()=>Vi(e.defaultValues)&&e.defaultValues().then(G=>{xe(G,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:K,_subjects:p,_proxyFormState:h,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return s},get _names(){return l},set _names(G){l=G},get _formState(){return n},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:ue,trigger:H,register:te,handleSubmit:ie,watch:Fe,setValue:ee,getValues:q,reset:xe,resetField:he,clearErrors:me,unregister:ye,setError:Ee,setFocus:se,getFieldState:X};return{...He,formControl:He}}function ru(t={}){const e=oe.useRef(void 0),n=oe.useRef(void 0),[r,s]=oe.useState({isDirty:!1,isValidating:!1,isLoading:Vi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Vi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Vi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Fde(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,Nde(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),oe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),oe.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),oe.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),oe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),oe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),oe.useEffect(()=>{t.values&&!jl(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),oe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=jde(r,a),e.current}const Xk=(t,e,n)=>{if(t&&"reportValidity"in t){const r=nt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},tV=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Xk(r.ref,n,t):r.refs&&r.refs.forEach(s=>Xk(s,n,t))}},$de=(t,e)=>{e.shouldUseNativeValidation&&tV(t,e);const n={};for(const r in t){const s=nt(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(Vde(e.names||Object.keys(t),r)){const o=Object.assign({},nt(n,r));nn(o,"root",a),nn(n,r,o)}else nn(n,r,a)}return n},Vde=(t,e)=>t.some(n=>n.startsWith(e+"."));var zde=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return t.push(m)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=K$(o,e,n,s,d?[].concat(d,r.message):r.message)}t.shift()}return n},su=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&tV({},a),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:$de(zde(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},zt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(zt||(zt={}));var eI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(eI||(eI={}));const it=zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ml=t=>{switch(typeof t){case"undefined":return it.undefined;case"string":return it.string;case"number":return Number.isNaN(t)?it.nan:it.number;case"boolean":return it.boolean;case"function":return it.function;case"bigint":return it.bigint;case"symbol":return it.symbol;case"object":return Array.isArray(t)?it.array:t===null?it.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?it.promise:typeof Map<"u"&&t instanceof Map?it.map:typeof Set<"u"&&t instanceof Set?it.set:typeof Date<"u"&&t instanceof Date?it.date:it.object;default:return it.unknown}},Oe=zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class $o extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return s(this),r}static assert(e){if(!(e instanceof $o))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}$o.create=t=>new $o(t);const $j=(t,e)=>{let n;switch(t.code){case Oe.invalid_type:t.received===it.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,zt.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${zt.joinValues(t.keys,", ")}`;break;case Oe.invalid_union:n="Invalid input";break;case Oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${zt.joinValues(t.options)}`;break;case Oe.invalid_enum_value:n=`Invalid enum value. Expected ${zt.joinValues(t.options)}, received '${t.received}'`;break;case Oe.invalid_arguments:n="Invalid function arguments";break;case Oe.invalid_return_type:n="Invalid function return type";break;case Oe.invalid_date:n="Invalid date";break;case Oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:zt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Oe.custom:n="Invalid input";break;case Oe.invalid_intersection_types:n="Intersection results could not be merged";break;case Oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,zt.assertNever(t)}return{message:n}};let Ude=$j;function Bde(){return Ude}const Wde=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function Ge(t,e){const n=Bde(),r=Wde({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===$j?void 0:$j].filter(s=>!!s)});t.common.issues.push(r)}class Xs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return bt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return Xs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return bt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const bt=Object.freeze({status:"aborted"}),_m=t=>({status:"dirty",value:t}),Si=t=>({status:"valid",value:t}),tI=t=>t.status==="aborted",nI=t=>t.status==="dirty",Ah=t=>t.status==="valid",d0=t=>typeof Promise<"u"&&t instanceof Promise;var at;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(at||(at={}));class ic{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rI=(t,e)=>{if(Ah(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new $o(t.common.issues);return this._error=n,this._error}}};function Ct(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??n??l.defaultError}},description:s}}class $t{get description(){return this._def.description}_getType(e){return ml(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ml(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xs,ctx:{common:e.parent.common,data:e.data,parsedType:ml(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(d0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)},s=this._parseSync({data:e,path:r.path,parent:r});return rI(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Ah(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Ah(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(d0(s)?s:Promise.resolve(s));return rI(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:Oe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Dh({schema:this,typeName:jt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Bl.create(this,this._def)}nullable(){return Lh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fa.create(this)}promise(){return p0.create(this,this._def)}or(e){return f0.create([this,e],this._def)}and(e){return m0.create(this,e,this._def)}transform(e){return new Dh({...Ct(this._def),schema:this,typeName:jt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new zj({...Ct(this._def),innerType:this,defaultValue:n,typeName:jt.ZodDefault})}brand(){return new fhe({typeName:jt.ZodBranded,type:this,...Ct(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Uj({...Ct(this._def),innerType:this,catchValue:n,typeName:jt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return KP.create(this,e)}readonly(){return Bj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Hde=/^c[^\s-]{8,}$/i,qde=/^[0-9a-z]+$/,Gde=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Kde=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Zde=/^[a-z0-9_-]{21}$/i,Qde=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Yde=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Jde=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xde="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let E_;const ehe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,the=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,she=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ihe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nV="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ahe=new RegExp(`^${nV}$`);function rV(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ohe(t){return new RegExp(`^${rV(t)}$`)}function lhe(t){let e=`${nV}T${rV(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function che(t,e){return!!((e==="v4"||!e)&&ehe.test(t)||(e==="v6"||!e)&&nhe.test(t))}function uhe(t,e){if(!Qde.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function dhe(t,e){return!!((e==="v4"||!e)&&the.test(t)||(e==="v6"||!e)&&rhe.test(t))}class Rl extends $t{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==it.string){const a=this._getOrReturnCtx(e);return Ge(a,{code:Oe.invalid_type,expected:it.string,received:a.parsedType}),bt}const r=new Xs;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ge(s,{code:Oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ge(s,{code:Oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Jde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"email",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")E_||(E_=new RegExp(Xde,"u")),E_.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"emoji",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Kde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"uuid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Zde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"nanoid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Hde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")qde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid2",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Gde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ulid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ge(s,{validation:"url",code:Oe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"regex",code:Oe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?lhe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?ahe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?ohe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Yde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"duration",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?che(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ip",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?uhe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"jwt",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?dhe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cidr",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?she.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"base64",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?ihe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"base64url",code:Oe.invalid_string,message:a.message}),r.dirty()):zt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Oe.invalid_string,...at.errToObj(r)})}_addCheck(e){return new Rl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...at.errToObj(e)})}url(e){return this._addCheck({kind:"url",...at.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...at.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...at.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...at.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...at.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...at.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...at.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...at.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...at.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...at.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...at.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...at.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...at.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...at.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...at.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...at.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...at.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...at.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...at.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...at.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...at.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...at.errToObj(n)})}nonempty(e){return this.min(1,at.errToObj(e))}trim(){return new Rl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Rl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Rl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Rl.create=t=>new Rl({checks:[],typeName:jt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ct(t)});function hhe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class Oh extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==it.number){const a=this._getOrReturnCtx(e);return Ge(a,{code:Oe.invalid_type,expected:it.number,received:a.parsedType}),bt}let r;const s=new Xs;for(const a of this._def.checks)a.kind==="int"?zt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?hhe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.not_finite,message:a.message}),s.dirty()):zt.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new Oh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new Oh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:at.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:at.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&zt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Oh.create=t=>new Oh({checks:[],typeName:jt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ct(t)});class Ap extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==it.bigint)return this._getInvalidInput(e);let r;const s=new Xs;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Oe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):zt.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Oe.invalid_type,expected:it.bigint,received:n.parsedType}),bt}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new Ap({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new Ap({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ap.create=t=>new Ap({checks:[],typeName:jt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ct(t)});class sI extends $t{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==it.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.boolean,received:r.parsedType}),bt}return Si(e.data)}}sI.create=t=>new sI({typeName:jt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ct(t)});class h0 extends $t{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==it.date){const a=this._getOrReturnCtx(e);return Ge(a,{code:Oe.invalid_type,expected:it.date,received:a.parsedType}),bt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ge(a,{code:Oe.invalid_date}),bt}const r=new Xs;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Oe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):zt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new h0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:at.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:at.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}h0.create=t=>new h0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:jt.ZodDate,...Ct(t)});class iI extends $t{_parse(e){if(this._getType(e)!==it.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.symbol,received:r.parsedType}),bt}return Si(e.data)}}iI.create=t=>new iI({typeName:jt.ZodSymbol,...Ct(t)});class aI extends $t{_parse(e){if(this._getType(e)!==it.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.undefined,received:r.parsedType}),bt}return Si(e.data)}}aI.create=t=>new aI({typeName:jt.ZodUndefined,...Ct(t)});class oI extends $t{_parse(e){if(this._getType(e)!==it.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.null,received:r.parsedType}),bt}return Si(e.data)}}oI.create=t=>new oI({typeName:jt.ZodNull,...Ct(t)});class lI extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return Si(e.data)}}lI.create=t=>new lI({typeName:jt.ZodAny,...Ct(t)});class cI extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Si(e.data)}}cI.create=t=>new cI({typeName:jt.ZodUnknown,...Ct(t)});class ac extends $t{_parse(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Oe.invalid_type,expected:it.never,received:n.parsedType}),bt}}ac.create=t=>new ac({typeName:jt.ZodNever,...Ct(t)});class uI extends $t{_parse(e){if(this._getType(e)!==it.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.void,received:r.parsedType}),bt}return Si(e.data)}}uI.create=t=>new uI({typeName:jt.ZodVoid,...Ct(t)});class Fa extends $t{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==it.array)return Ge(n,{code:Oe.invalid_type,expected:it.array,received:n.parsedType}),bt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(Ge(n,{code:o?Oe.too_big:Oe.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ge(n,{code:Oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ge(n,{code:Oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new ic(n,o,n.path,l)))).then(o=>Xs.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new ic(n,o,n.path,l)));return Xs.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Fa({...this._def,minLength:{value:e,message:at.toString(n)}})}max(e,n){return new Fa({...this._def,maxLength:{value:e,message:at.toString(n)}})}length(e,n){return new Fa({...this._def,exactLength:{value:e,message:at.toString(n)}})}nonempty(e){return this.min(1,e)}}Fa.create=(t,e)=>new Fa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:jt.ZodArray,...Ct(e)});function Cd(t){if(t instanceof sr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Bl.create(Cd(r))}return new sr({...t._def,shape:()=>e})}else return t instanceof Fa?new Fa({...t._def,type:Cd(t.element)}):t instanceof Bl?Bl.create(Cd(t.unwrap())):t instanceof Lh?Lh.create(Cd(t.unwrap())):t instanceof Nu?Nu.create(t.items.map(e=>Cd(e))):t}class sr extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=zt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==it.object){const d=this._getOrReturnCtx(e);return Ge(d,{code:Oe.invalid_type,expected:it.object,received:d.parsedType}),bt}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof ac&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const h=a[d],m=s.data[d];u.push({key:{status:"valid",value:d},value:h._parse(new ic(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof ac){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(d==="strict")l.length>0&&(Ge(s,{code:Oe.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const m=s.data[h];u.push({key:{status:"valid",value:h},value:d._parse(new ic(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of u){const m=await h.key,p=await h.value;d.push({key:m,value:p,alwaysSet:h.alwaysSet})}return d}).then(d=>Xs.mergeObjectSync(r,d)):Xs.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return at.errToObj,new sr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:at.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new sr({...this._def,unknownKeys:"strip"})}passthrough(){return new sr({...this._def,unknownKeys:"passthrough"})}extend(e){return new sr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:jt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new sr({...this._def,catchall:e})}pick(e){const n={};for(const r of zt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new sr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of zt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new sr({...this._def,shape:()=>n})}deepPartial(){return Cd(this)}partial(e){const n={};for(const r of zt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new sr({...this._def,shape:()=>n})}required(e){const n={};for(const r of zt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Bl;)a=a._def.innerType;n[r]=a}return new sr({...this._def,shape:()=>n})}keyof(){return sV(zt.objectKeys(this.shape))}}sr.create=(t,e)=>new sr({shape:()=>t,unknownKeys:"strip",catchall:ac.create(),typeName:jt.ZodObject,...Ct(e)});sr.strictCreate=(t,e)=>new sr({shape:()=>t,unknownKeys:"strict",catchall:ac.create(),typeName:jt.ZodObject,...Ct(e)});sr.lazycreate=(t,e)=>new sr({shape:t,unknownKeys:"strip",catchall:ac.create(),typeName:jt.ZodObject,...Ct(e)});class f0 extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new $o(l.ctx.common.issues));return Ge(n,{code:Oe.invalid_union,unionErrors:o}),bt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(u=>new $o(u));return Ge(n,{code:Oe.invalid_union,unionErrors:l}),bt}}get options(){return this._def.options}}f0.create=(t,e)=>new f0({options:t,typeName:jt.ZodUnion,...Ct(e)});function Vj(t,e){const n=ml(t),r=ml(e);if(t===e)return{valid:!0,data:t};if(n===it.object&&r===it.object){const s=zt.objectKeys(e),a=zt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const u=Vj(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===it.array&&r===it.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],u=Vj(o,l);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===it.date&&r===it.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class m0 extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(tI(a)||tI(o))return bt;const l=Vj(a.value,o.value);return l.valid?((nI(a)||nI(o))&&n.dirty(),{status:n.value,value:l.data}):(Ge(r,{code:Oe.invalid_intersection_types}),bt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}m0.create=(t,e,n)=>new m0({left:t,right:e,typeName:jt.ZodIntersection,...Ct(n)});class Nu extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.array)return Ge(r,{code:Oe.invalid_type,expected:it.array,received:r.parsedType}),bt;if(r.data.length<this._def.items.length)return Ge(r,{code:Oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:Oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ic(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Xs.mergeArray(n,o)):Xs.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Nu({...this._def,rest:e})}}Nu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Nu({items:t,typeName:jt.ZodTuple,rest:null,...Ct(e)})};class dI extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.map)return Ge(r,{code:Oe.invalid_type,expected:it.map,received:r.parsedType}),bt;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,u],d)=>({key:s._parse(new ic(r,l,r.path,[d,"key"])),value:a._parse(new ic(r,u,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}dI.create=(t,e,n)=>new dI({valueType:e,keyType:t,typeName:jt.ZodMap,...Ct(n)});class Op extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==it.set)return Ge(r,{code:Oe.invalid_type,expected:it.set,received:r.parsedType}),bt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ge(r,{code:Oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ge(r,{code:Oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const d=new Set;for(const h of u){if(h.status==="aborted")return bt;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((u,d)=>a._parse(new ic(r,u,r.path,d)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new Op({...this._def,minSize:{value:e,message:at.toString(n)}})}max(e,n){return new Op({...this._def,maxSize:{value:e,message:at.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Op.create=(t,e)=>new Op({valueType:t,minSize:null,maxSize:null,typeName:jt.ZodSet,...Ct(e)});class hI extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}hI.create=(t,e)=>new hI({getter:t,typeName:jt.ZodLazy,...Ct(e)});class fI extends $t{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ge(n,{received:n.data,code:Oe.invalid_literal,expected:this._def.value}),bt}return{status:"valid",value:e.data}}get value(){return this._def.value}}fI.create=(t,e)=>new fI({value:t,typeName:jt.ZodLiteral,...Ct(e)});function sV(t,e){return new Mh({values:t,typeName:jt.ZodEnum,...Ct(e)})}class Mh extends $t{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{expected:zt.joinValues(r),received:n.parsedType,code:Oe.invalid_type}),bt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{received:n.data,code:Oe.invalid_enum_value,options:r}),bt}return Si(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Mh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Mh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Mh.create=sV;class mI extends $t{_parse(e){const n=zt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==it.string&&r.parsedType!==it.number){const s=zt.objectValues(n);return Ge(r,{expected:zt.joinValues(s),received:r.parsedType,code:Oe.invalid_type}),bt}if(this._cache||(this._cache=new Set(zt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=zt.objectValues(n);return Ge(r,{received:r.data,code:Oe.invalid_enum_value,options:s}),bt}return Si(e.data)}get enum(){return this._def.values}}mI.create=(t,e)=>new mI({values:t,typeName:jt.ZodNativeEnum,...Ct(e)});class p0 extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==it.promise&&n.common.async===!1)return Ge(n,{code:Oe.invalid_type,expected:it.promise,received:n.parsedType}),bt;const r=n.parsedType===it.promise?n.data:Promise.resolve(n.data);return Si(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}p0.create=(t,e)=>new p0({type:t,typeName:jt.ZodPromise,...Ct(e)});class Dh extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===jt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return bt;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?bt:u.status==="dirty"||n.value==="dirty"?_m(u.value):u});{if(n.value==="aborted")return bt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?bt:l.status==="dirty"||n.value==="dirty"?_m(l.value):l}}if(s.type==="refinement"){const o=l=>{const u=s.refinement(l,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?bt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?bt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ah(o))return bt;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ah(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):bt);zt.assertNever(s)}}Dh.create=(t,e,n)=>new Dh({schema:t,typeName:jt.ZodEffects,effect:e,...Ct(n)});Dh.createWithPreprocess=(t,e,n)=>new Dh({schema:e,effect:{type:"preprocess",transform:t},typeName:jt.ZodEffects,...Ct(n)});class Bl extends $t{_parse(e){return this._getType(e)===it.undefined?Si(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bl.create=(t,e)=>new Bl({innerType:t,typeName:jt.ZodOptional,...Ct(e)});class Lh extends $t{_parse(e){return this._getType(e)===it.null?Si(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lh.create=(t,e)=>new Lh({innerType:t,typeName:jt.ZodNullable,...Ct(e)});class zj extends $t{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===it.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}zj.create=(t,e)=>new zj({innerType:t,typeName:jt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ct(e)});class Uj extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return d0(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $o(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $o(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Uj.create=(t,e)=>new Uj({innerType:t,typeName:jt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ct(e)});class pI extends $t{_parse(e){if(this._getType(e)!==it.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:Oe.invalid_type,expected:it.nan,received:r.parsedType}),bt}return{status:"valid",value:e.data}}}pI.create=t=>new pI({typeName:jt.ZodNaN,...Ct(t)});class fhe extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class KP extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?bt:a.status==="dirty"?(n.dirty(),_m(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?bt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new KP({in:e,out:n,typeName:jt.ZodPipeline})}}class Bj extends $t{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Ah(s)&&(s.value=Object.freeze(s.value)),s);return d0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Bj.create=(t,e)=>new Bj({innerType:t,typeName:jt.ZodReadonly,...Ct(e)});var jt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(jt||(jt={}));const xt=Rl.create,iV=Oh.create;ac.create;const ZP=Fa.create,$u=sr.create;f0.create;m0.create;Nu.create;const mhe=Mh.create;p0.create;Bl.create;Lh.create;var qw="Checkbox",[phe,tje]=$r(qw),[ghe,QP]=phe(qw);function vhe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:m}=t,[p,v]=Js({prop:n,defaultProp:s??!1,onChange:u,caller:qw}),[N,b]=w.useState(null),[j,_]=w.useState(null),x=w.useRef(!1),S=N?!!o||!!N.closest("form"):!0,C={checked:p,disabled:a,setChecked:v,control:N,setControl:b,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:Wl(s)?!1:s,isFormControl:S,bubbleInput:j,setBubbleInput:_};return i.jsx(ghe,{scope:e,...C,children:yhe(m)?m(C):r})}var aV="CheckboxTrigger",oV=w.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:u,required:d,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:v,bubbleInput:N}=QP(aV,t),b=pt(s,h),j=w.useRef(u);return w.useEffect(()=>{const _=a==null?void 0:a.form;if(_){const x=()=>m(j.current);return _.addEventListener("reset",x),()=>_.removeEventListener("reset",x)}},[a,m]),i.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":Wl(u)?"mixed":u,"aria-required":d,"data-state":hV(u),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:b,onKeyDown:$e(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:$e(n,_=>{m(x=>Wl(x)?!0:!x),N&&v&&(p.current=_.isPropagationStopped(),p.current||_.stopPropagation())})})});oV.displayName=aV;var YP=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u,onCheckedChange:d,form:h,...m}=t;return i.jsx(vhe,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(oV,{...m,ref:e,__scopeCheckbox:n}),p&&i.jsx(dV,{__scopeCheckbox:n})]})})});YP.displayName=qw;var lV="CheckboxIndicator",cV=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=QP(lV,n);return i.jsx(Vr,{present:r||Wl(a.checked)||a.checked===!0,children:i.jsx(Qe.span,{"data-state":hV(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});cV.displayName=lV;var uV="CheckboxBubbleInput",dV=w.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:u,name:d,value:h,form:m,bubbleInput:p,setBubbleInput:v}=QP(uV,t),N=pt(n,v),b=Mw(a),j=Nw(r);w.useEffect(()=>{const x=p;if(!x)return;const S=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(S,"checked").set,V=!s.current;if(b!==a&&R){const k=new Event("click",{bubbles:V});x.indeterminate=Wl(a),R.call(x,Wl(a)?!1:a),x.dispatchEvent(k)}},[p,b,a,s]);const _=w.useRef(Wl(a)?!1:a);return i.jsx(Qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:l,disabled:u,name:d,value:h,form:m,...e,tabIndex:-1,ref:N,style:{...e.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});dV.displayName=uV;function yhe(t){return typeof t=="function"}function Wl(t){return t==="indeterminate"}function hV(t){return Wl(t)?"indeterminate":t?"checked":"unchecked"}const g0=w.forwardRef(({className:t,...e},n)=>i.jsx(YP,{ref:n,className:ot("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(cV,{className:ot("flex items-center justify-center text-current"),children:i.jsx(xP,{className:"h-4 w-4"})})}));g0.displayName=YP.displayName;var fV=["PageUp","PageDown"],mV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},hf="Slider",[Wj,xhe,whe]=Vg(hf),[gV,nje]=$r(hf,[whe]),[bhe,Gw]=gV(hf),vV=w.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:h,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:N,...b}=t,j=w.useRef(new Set),_=w.useRef(0),S=o==="horizontal"?_he:jhe,[C=[],R]=Js({prop:h,defaultProp:d,onChange:M=>{var O;(O=[...j.current][_.current])==null||O.focus(),m(M)}}),V=w.useRef(C);function k(M){const D=Che(C,M);T(M,D)}function I(M){T(M,_.current)}function $(){const M=V.current[_.current];C[_.current]!==M&&p(C)}function T(M,D,{commit:O}={commit:!1}){const B=Ihe(a),Y=Ahe(Math.round((M-r)/a)*a+r,B),ee=Ip(Y,[r,s]);R((Z=[])=>{const z=Ehe(Z,ee,D);if(khe(z,u*a)){_.current=z.indexOf(ee);const H=String(z)!==String(Z);return H&&O&&p(z),H?z:Z}else return Z})}return i.jsx(bhe,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:_,thumbs:j.current,values:C,orientation:o,form:N,children:i.jsx(Wj.Provider,{scope:t.__scopeSlider,children:i.jsx(Wj.Slot,{scope:t.__scopeSlider,children:i.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,...b,ref:e,onPointerDown:$e(b.onPointerDown,()=>{l||(V.current=C)}),min:r,max:s,inverted:v,onSlideStart:l?void 0:k,onSlideMove:l?void 0:I,onSlideEnd:l?void 0:$,onHomeKeyDown:()=>!l&&T(r,0,{commit:!0}),onEndKeyDown:()=>!l&&T(s,C.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:D})=>{if(!l){const Y=fV.includes(M.key)||M.shiftKey&&mV.includes(M.key)?10:1,ee=_.current,Z=C[ee],z=a*Y*D;T(Z+z,ee,{commit:!0})}}})})})})});vV.displayName=hf;var[yV,xV]=gV(hf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_he=w.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d,...h}=t,[m,p]=w.useState(null),v=pt(e,S=>p(S)),N=w.useRef(void 0),b=Du(s),j=b==="ltr",_=j&&!a||!j&&a;function x(S){const C=N.current||m.getBoundingClientRect(),R=[0,C.width],k=JP(R,_?[n,r]:[r,n]);return N.current=C,k(S-C.left)}return i.jsx(yV,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:i.jsx(wV,{dir:b,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=x(S.clientX);o==null||o(C)},onSlideMove:S=>{const C=x(S.clientX);l==null||l(C)},onSlideEnd:()=>{N.current=void 0,u==null||u()},onStepKeyDown:S=>{const R=pV[_?"from-left":"from-right"].includes(S.key);d==null||d({event:S,direction:R?-1:1})}})})}),jhe=w.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=t,h=w.useRef(null),m=pt(e,h),p=w.useRef(void 0),v=!s;function N(b){const j=p.current||h.current.getBoundingClientRect(),_=[0,j.height],S=JP(_,v?[r,n]:[n,r]);return p.current=j,S(b-j.top)}return i.jsx(yV,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:i.jsx(wV,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const j=N(b.clientY);a==null||a(j)},onSlideMove:b=>{const j=N(b.clientY);o==null||o(j)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:b=>{const _=pV[v?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:_?-1:1})}})})}),wV=w.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:u,...d}=t,h=Gw(hf,n);return i.jsx(Qe.span,{...d,ref:e,onKeyDown:$e(t.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):fV.concat(mV).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:$e(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),h.thumbs.has(p)?p.focus():r(m)}),onPointerMove:$e(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:$e(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})})}),bV="SliderTrack",_V=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Gw(bV,n);return i.jsx(Qe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});_V.displayName=bV;var Hj="SliderRange",jV=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Gw(Hj,n),a=xV(Hj,n),o=w.useRef(null),l=pt(e,o),u=s.values.length,d=s.values.map(p=>EV(p,s.min,s.max)),h=u>1?Math.min(...d):0,m=100-Math.max(...d);return i.jsx(Qe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:h+"%",[a.endEdge]:m+"%"}})});jV.displayName=Hj;var qj="SliderThumb",NV=w.forwardRef((t,e)=>{const n=xhe(t.__scopeSlider),[r,s]=w.useState(null),a=pt(e,l=>s(l)),o=w.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(Nhe,{...t,ref:a,index:o})}),Nhe=w.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...a}=t,o=Gw(qj,n),l=xV(qj,n),[u,d]=w.useState(null),h=pt(e,x=>d(x)),m=u?o.form||!!u.closest("form"):!0,p=Nw(u),v=o.values[r],N=v===void 0?0:EV(v,o.min,o.max),b=Phe(r,o.values.length),j=p==null?void 0:p[l.size],_=j?The(j,N,l.direction):0;return w.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${N}% + ${_}px)`},children:[i.jsx(Wj.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(Qe.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:h,style:v===void 0?{display:"none"}:t.style,onFocus:$e(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),m&&i.jsx(SV,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});NV.displayName=qj;var She="RadioBubbleInput",SV=w.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=w.useRef(null),a=pt(s,r),o=Mw(e);return w.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const m=new Event("input",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Qe.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});SV.displayName=She;function Ehe(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,a)=>s-a)}function EV(t,e,n){const a=100/(n-e)*(t-e);return Ip(a,[0,100])}function Phe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Che(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function The(t,e,n){const r=t/2,a=JP([0,50],[0,r]);return(r-a(e)*n)*n}function Rhe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function khe(t,e){if(e>0){const n=Rhe(t);return Math.min(...n)>=e}return!0}function JP(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Ihe(t){return(String(t).split(".")[1]||"").length}function Ahe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var PV=vV,Ohe=_V,Mhe=jV,Dhe=NV;const CV=w.forwardRef(({className:t,...e},n)=>i.jsxs(PV,{ref:n,className:ot("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(Ohe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(Mhe,{className:"absolute h-full bg-primary"})}),i.jsx(Dhe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));CV.displayName=PV.displayName;const tv=$u({title:xt().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:xt().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:ZP(xt()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:xt().min(1,"Veuillez spécifier un lieu de rencontre")}),Lhe=tv.extend({price:xt().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:mhe(["new","like-new","good","fair"]),paymentMethods:ZP(xt()).min(1,"Sélectionnez au moins un mode de paiement")}),Fhe=tv.extend({donationReason:xt().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),$he=tv.extend({desiredItems:ZP(xt()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:xt().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Vhe=tv.extend({hourlyRate:xt().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:iV().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:xt().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:xt().optional()}),zhe=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],gI=[{value:"cash",label:"Espèces",icon:g3},{value:"transfer",label:"Virement bancaire",icon:Qn},{value:"lydia",label:"Lydia",icon:Mu},{value:"paypal",label:"PayPal",icon:Qn}];delete df.Icon.Default.prototype._getIconUrl;df.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Uhe=()=>{var J,te,ne,K,ie,he,_e,xe;const{currentUser:t,userProfile:e}=bn(),{createListing:n}=Zg(),r=xr(),[s]=FS(),[a,o]=w.useState(()=>s.get("type")||"sell"),[l,u]=w.useState([]),[d,h]=w.useState(!1),[m,p]=w.useState(""),[v,N]=w.useState([]),[b,j]=w.useState(!1),[_,x]=w.useState([""]),[S,C]=w.useState(""),[R,V]=w.useState([]),[k,I]=w.useState([1]),[$,T]=w.useState(null),[M,D]=w.useState(!1),B=ru({resolver:su((()=>{switch(a){case"sell":return Lhe;case"gift":return Fhe;case"swap":return $he;case"service":return Vhe;default:return tv}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});w.useEffect(()=>{B.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),N([]),x([""]),V([]),I([1]),u([])},[a,B]);const Y=async se=>{if(!t)throw new Error("User not authenticated");const we=Date.now(),Ne=`listings/${t.uid}/${we}_${se.name}`,He=KE(QE,Ne),G=await qE(He,se);return await GE(G.ref)},ee=async se=>{const we=se.target.files;if(!(!we||we.length===0)){h(!0);try{const He=Array.from(we).slice(0,10-l.length).filter(ae=>ae.size<=15728640).map(ae=>Y(ae)),G=await Promise.all(He);u(ae=>[...ae,...G])}catch(Ne){console.error("Error uploading images:",Ne)}finally{h(!1)}}},Z=se=>{u(we=>we.filter((Ne,He)=>He!==se))},z=()=>{if(m.trim()&&!v.includes(m.trim())&&v.length<5){const se=[...v,m.trim()];N(se),B.setValue("tags",se),p("")}},H=se=>{const we=v.filter(Ne=>Ne!==se);N(we),B.setValue("tags",we)},q=()=>{if(S.trim()){const se=[..._.filter(we=>we.trim()),S.trim()];x(se),B.setValue("desiredItems",se),C("")}},X=se=>{const we=_.filter((Ne,He)=>He!==se);x(we),B.setValue("desiredItems",we)},me=(se,we)=>{const Ne=we?[...R,se]:R.filter(He=>He!==se);V(Ne),B.setValue("paymentMethods",Ne)};async function Ee(se){const Ne=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(se)}`)).json();return Ne&&Ne[0]?[parseFloat(Ne[0].lat),parseFloat(Ne[0].lon)]:null}w.useEffect(()=>{const se=B.watch("meetingLocation");se&&se.length>5&&Ee(se).then(we=>{we&&T(we)})},[B.watch("meetingLocation")]);const Fe=async se=>{if(!(!t||!e)){j(!0);try{const we={title:se.title,description:se.description,currency:"EUR",category:"electronics",images:l,tags:se.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let Ne;switch(a){case"sell":Ne={...we,price:se.price,condition:se.condition,transactionType:"sale",description:`${se.description}

Modes de paiement acceptés: ${R.map(G=>{var ae;return(ae=gI.find(de=>de.value===G))==null?void 0:ae.label}).join(", ")}`};break;case"gift":Ne={...we,price:0,condition:"good",transactionType:"donation",description:`${se.description}

Raison du don: ${se.donationReason}`};break;case"swap":Ne={...we,price:se.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:_.filter(G=>G.trim()).join(", "),description:`${se.description}

Recherche en échange: ${_.filter(G=>G.trim()).join(", ")}
Valeur estimée: ${se.estimatedValue}€`};break;case"service":Ne={...we,price:se.hourlyRate,condition:"new",transactionType:"service",description:`${se.description}

Compétences: ${se.skills}
Tarif: ${se.hourlyRate}€/h
Durée prévue: ${k[0]}h${se.availability?`
Disponibilités: ${se.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",Ne);const He=await n(Ne);r(`/listing/${He}`)}catch(we){console.error("Error creating listing:",we)}finally{j(!1)}}},Me=()=>{const se=B.formState.errors,we=B.watch("title")&&B.watch("description")&&B.watch("meetingLocation")&&v.length>0;switch(a){case"sell":return we&&B.watch("price")&&R.length>0&&!se.title&&!se.description&&!se.price;case"gift":return we&&B.watch("donationReason")&&!se.title&&!se.description&&!se.donationReason;case"swap":return we&&_.some(Ne=>Ne.trim())&&B.watch("estimatedValue")&&!se.title&&!se.description&&!se.estimatedValue;case"service":return we&&B.watch("hourlyRate")&&B.watch("skills")&&!se.title&&!se.description&&!se.hourlyRate&&!se.skills;default:return!1}},ue=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}D(!0),navigator.geolocation.getCurrentPosition(async se=>{const{latitude:we,longitude:Ne}=se.coords;T([we,Ne]);const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${we}&lon=${Ne}`)).json();G&&G.display_name&&B.setValue("meetingLocation",G.display_name,{shouldValidate:!0}),D(!1)},()=>{alert("Impossible d'accéder à la position."),D(!1)})};function ye(){return $P({click:async se=>{T([se.latlng.lat,se.latlng.lng]),D(!0);const Ne=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${se.latlng.lat}&lon=${se.latlng.lng}`)).json();Ne&&Ne.display_name&&B.setValue("meetingLocation",Ne.display_name,{shouldValidate:!0}),D(!1)}}),$?i.jsx(zP,{position:$}):null}return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),i.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),i.jsxs("form",{onSubmit:B.handleSubmit(Fe),className:"space-y-8",children:[i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(fj,{className:"w-5 h-5"}),"Type d'annonce"]}),i.jsx(Rt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),i.jsx(ve,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ge,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx(Gx,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),i.jsx(ge,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx(Nh,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),i.jsx(ge,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx(Ao,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),i.jsx(ge,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:i.jsxs(ve,{className:"p-4 text-center",children:[i.jsx(Jn,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsx(rt,{className:"text-foreground",children:"Informations principales"})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),i.jsx(Ke,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...B.register("title"),className:"mt-1",maxLength:80}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(J=B.formState.errors.title)==null?void 0:J.message}),i.jsxs("span",{children:[((te=B.watch("title"))==null?void 0:te.length)||0,"/80"]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),i.jsx(bi,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...B.register("description"),className:"mt-1",maxLength:1e3}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ne=B.formState.errors.description)==null?void 0:ne.message}),i.jsxs("span",{children:[((K=B.watch("description"))==null?void 0:K.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Gx,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),i.jsx(Ke,{id:"price",type:"text",placeholder:"0,00",...B.register("price"),className:"mt-1"}),B.formState.errors.price&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.price.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),i.jsxs(sn,{onValueChange:se=>B.setValue("condition",se),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{placeholder:"Sélectionnez un état"})}),i.jsx(Yt,{children:zhe.map(se=>i.jsx(Ze,{value:se.value,children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:se.label}),i.jsx("div",{className:"text-xs text-muted-foreground",children:se.description})]})},se.value))})]}),B.formState.errors.condition&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.condition.message})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-foreground",children:"Modes de paiement acceptés *"}),i.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:gI.map(se=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(g0,{id:se.value,checked:R.includes(se.value),onCheckedChange:we=>me(se.value,we)}),i.jsxs(Ae,{htmlFor:se.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[i.jsx(se.icon,{className:"w-4 h-4"}),se.label]})]},se.value))}),R.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Nh,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),i.jsx(ve,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),i.jsx(bi,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...B.register("donationReason"),className:"mt-1",maxLength:140}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ie=B.formState.errors.donationReason)==null?void 0:ie.message}),i.jsxs("span",{children:[((he=B.watch("donationReason"))==null?void 0:he.length)||0,"/140"]})]})]})})]}),a==="swap"&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Ao,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),i.jsxs("div",{className:"space-y-2 mt-2",children:[_.filter(se=>se.trim()).map((se,we)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ke,{value:se,readOnly:!0,className:"flex-1"}),i.jsx(re,{type:"button",variant:"outline",size:"icon",onClick:()=>X(we),children:i.jsx(T3,{className:"w-4 h-4"})})]},we)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ke,{placeholder:"Ex: Livre de physique L2",value:S,onChange:se=>C(se.target.value),onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),q()),className:"flex-1"}),i.jsx(re,{type:"button",onClick:q,disabled:!S.trim(),children:i.jsx(eu,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),i.jsx(Ke,{id:"estimatedValue",type:"text",placeholder:"0,00",...B.register("estimatedValue"),className:"mt-1"}),B.formState.errors.estimatedValue&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Jn,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),i.jsx(bi,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...B.register("skills"),className:"mt-1",maxLength:500}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(_e=B.formState.errors.skills)==null?void 0:_e.message}),i.jsxs("span",{children:[((xe=B.watch("skills"))==null?void 0:xe.length)||0,"/500"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),i.jsx(Ke,{id:"hourlyRate",type:"text",placeholder:"15,00",...B.register("hourlyRate"),className:"mt-1"}),B.formState.errors.hourlyRate&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.hourlyRate.message})]}),i.jsxs("div",{children:[i.jsxs(Ae,{className:"text-foreground",children:["Durée prévue: ",k[0],"h"]}),i.jsx(CV,{value:k,onValueChange:se=>{I(se),B.setValue("duration",se[0])},max:720,min:1,step:1,className:"mt-2"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:"1h"}),i.jsx("span",{children:"720h"})]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),i.jsx(Ke,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...B.register("availability"),className:"mt-1"})]})]})]}),i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Xc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),i.jsx(Rt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),i.jsx(ve,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((se,we)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:se,alt:`Photo ${we+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx(re,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Z(we),children:i.jsx(pj,{className:"w-3 h-3"})}),we===0&&i.jsx(ct,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},we)),l.length<10&&i.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[i.jsxs("div",{className:"text-center",children:[d?i.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):i.jsx(mj,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:d?"Upload...":"Ajouter"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ee,className:"hidden",disabled:d})]})]})})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Sp,{className:"w-5 h-5"}),"Tags et localisation"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-foreground",children:"Tags * (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map(se=>i.jsxs(ct,{variant:"secondary",className:"flex items-center gap-1",children:[se,i.jsx(re,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>H(se),children:i.jsx(pj,{className:"w-3 h-3"})})]},se))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ke,{placeholder:"Ajouter un tag...",value:m,onChange:se=>p(se.target.value),onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),z()),className:"flex-1"}),i.jsx(re,{type:"button",onClick:z,disabled:!m.trim()||v.length>=5,children:"Ajouter"})]}),v.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(Ke,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...B.register("meetingLocation"),className:"flex-1"}),i.jsx(re,{type:"button",variant:"outline",onClick:ue,disabled:M,title:"Détecter ma position",children:M?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]}),B.formState.errors.meetingLocation&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.meetingLocation.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),i.jsx("div",{className:"mt-3",children:i.jsxs(VP,{center:$||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(UP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(ye,{})]})})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Um,{className:"w-4 h-4"}),"Validation"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("title")&&B.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("title")&&B.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Titre (5-80 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("description")&&B.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("description")&&B.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Description (20-1000 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${v.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${v.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tags (1-5)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Point de rencontre"})]})]})})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Bt,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6",children:[i.jsx(re,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:b||!Me()||d,children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fj,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:Me()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var Kw="Tabs",[Bhe,rje]=$r(Kw,[Ew]),TV=Ew(),[Whe,XP]=Bhe(Kw),RV=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:u="automatic",...d}=t,h=Du(l),[m,p]=Js({prop:r,onChange:s,defaultProp:a??"",caller:Kw});return i.jsx(Whe,{scope:n,baseId:Zs(),value:m,onValueChange:p,orientation:o,dir:h,activationMode:u,children:i.jsx(Qe.div,{dir:h,"data-orientation":o,...d,ref:e})})});RV.displayName=Kw;var kV="TabsList",IV=w.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=XP(kV,n),o=TV(n);return i.jsx(mF,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Qe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});IV.displayName=kV;var AV="TabsTrigger",OV=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=XP(AV,n),l=TV(n),u=LV(o.baseId,r),d=FV(o.baseId,r),h=r===o.value;return i.jsx(pF,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(Qe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...a,ref:e,onMouseDown:$e(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?o.onValueChange(r):m.preventDefault()}),onKeyDown:$e(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(r)}),onFocus:$e(t.onFocus,()=>{const m=o.activationMode!=="manual";!h&&!s&&m&&o.onValueChange(r)})})})});OV.displayName=AV;var MV="TabsContent",DV=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=XP(MV,n),u=LV(l.baseId,r),d=FV(l.baseId,r),h=r===l.value,m=w.useRef(h);return w.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Vr,{present:s||h,children:({present:p})=>i.jsx(Qe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&a})})});DV.displayName=MV;function LV(t,e){return`${t}-trigger-${e}`}function FV(t,e){return`${t}-content-${e}`}var Hhe=RV,$V=IV,VV=OV,zV=DV;const Vu=Hhe,vc=w.forwardRef(({className:t,...e},n)=>i.jsx($V,{ref:n,className:ot("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));vc.displayName=$V.displayName;const fn=w.forwardRef(({className:t,...e},n)=>i.jsx(VV,{ref:n,className:ot("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));fn.displayName=VV.displayName;const mn=w.forwardRef(({className:t,...e},n)=>i.jsx(zV,{ref:n,className:ot("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));mn.displayName=zV.displayName;const UV=({currentPhotoURL:t,displayName:e})=>{var _,x;const{currentUser:n,updateUserProfile:r}=bn(),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(null),[h,m]=w.useState(null),p=w.useRef(null),v=S=>{var V;const C=(V=S.target.files)==null?void 0:V[0];if(!C)return;if(!C.type.startsWith("image/")){je.error("Veuillez sélectionner une image");return}if(C.size>5*1024*1024){je.error("L'image ne doit pas dépasser 5MB");return}m(C);const R=new FileReader;R.onload=k=>{var I;d((I=k.target)==null?void 0:I.result)},R.readAsDataURL(C)},N=async()=>{if(!(!h||!n)){l(!0);try{const S=`profile-photos/${n.uid}-${Date.now()}.${h.name.split(".").pop()}`,C=KE(QE,S),R=await qE(C,h),V=await GE(R.ref);await pp(n,{photoURL:V}),await r({photoURL:V}),je.success("Photo de profil mise à jour !"),a(!1),d(null),m(null)}catch(S){console.error("Erreur lors de l'upload:",S),je.error("Erreur lors de la mise à jour de la photo")}finally{l(!1)}}},b=async()=>{if(n){l(!0);try{await pp(n,{photoURL:null}),await r({photoURL:null}),je.success("Photo de profil supprimée"),a(!1)}catch(S){console.error("Erreur lors de la suppression:",S),je.error("Erreur lors de la suppression de la photo")}finally{l(!1)}}},j=()=>{m(null),d(null),p.current&&(p.current.value="")};return i.jsxs(Da,{open:s,onOpenChange:a,children:[i.jsx(ih,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsxs(Do,{className:"h-20 w-20",children:[i.jsx(Lo,{src:t||""}),i.jsx(Fo,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((_=e[0])==null?void 0:_.toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Xc,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Xc,{className:"w-3 h-3 text-white"})})]})}),i.jsxs(qi,{className:"max-w-md",children:[i.jsx(La,{children:i.jsxs(Gi,{className:"flex items-center gap-2",children:[i.jsx(Xc,{className:"w-5 h-5"}),"Photo de profil"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs(Do,{className:"h-32 w-32",children:[i.jsx(Lo,{src:u||t||""}),i.jsx(Fo,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((x=e[0])==null?void 0:x.toUpperCase())||"U"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:v,className:"hidden"}),h?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[i.jsx("p",{className:"font-medium",children:h.name}),i.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(re,{onClick:j,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),i.jsx(re,{onClick:N,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):i.jsxs(i.Fragment,{children:[i.jsx(mj,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs(re,{onClick:()=>{var S;return(S=p.current)==null?void 0:S.click()},variant:"outline",className:"w-full",children:[i.jsx(mj,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&i.jsxs(re,{onClick:b,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(pj,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),i.jsx("p",{children:"• Taille maximale : 5MB"}),i.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},as=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},qhe=()=>{const{currentUser:t,userProfile:e}=bn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState([]),[u,d]=w.useState(null),[h,m]=w.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[p,v]=w.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[N,b]=w.useState({}),[j,_]=w.useState(null),[x,S]=w.useState(""),[C,R]=w.useState((u==null?void 0:u.firstName)||(e==null?void 0:e.firstName)||""),[V,k]=w.useState((u==null?void 0:u.lastName)||(e==null?void 0:e.lastName)||""),I=async()=>{if(t)try{v(ie=>({...ie,profile:!0}));const K=await Ks(_t(Ue,"users",t.uid));if(K.exists()){const ie=K.data();d({...ie,createdAt:as(ie.createdAt),updatedAt:as(ie.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),d(null)}catch(K){console.error("Erreur lors du chargement du profil:",K),d(null)}finally{v(K=>({...K,profile:!1}))}};w.useEffect(()=>{t&&(I(),$(),T(),M())},[t]);const $=async()=>{if(t)try{v(xe=>({...xe,listings:!0}));const K=Pn(Ut(Ue,"listings"),lr("sellerId","==",t.uid),yi(20)),ie=await Zn(K),he=[];ie.forEach(xe=>{const se=xe.data();he.push({id:xe.id,...se,createdAt:as(se.createdAt),updatedAt:as(se.updatedAt)})}),he.sort((xe,se)=>as(se.createdAt).getTime()-as(xe.createdAt).getTime()),r(he);const _e=he.filter(xe=>xe.status==="active");m(xe=>({...xe,totalListings:he.length,activeListings:_e.length}))}catch(K){console.error("Erreur lors du chargement des annonces:",K)}finally{v(K=>({...K,listings:!1}))}},T=async()=>{if(t)try{v(Ne=>({...Ne,reviews:!0}));const K=Pn(Ut(Ue,"reviews"),lr("revieweeId","==",t.uid),yi(10)),ie=await Zn(K),he=[];ie.forEach(Ne=>{const He=Ne.data();he.push({id:Ne.id,...He,replies:Array.isArray(He.replies)?He.replies.map(G=>({...G,createdAt:G.createdAt instanceof Date?G.createdAt:G.createdAt&&typeof G.createdAt.toDate=="function"?G.createdAt.toDate():new Date})):[],likes:Array.isArray(He.likes)?He.likes:[],dislikes:Array.isArray(He.dislikes)?He.dislikes:[],createdAt:as(He.createdAt)})}),he.sort((Ne,He)=>as(He.createdAt).getTime()-as(Ne.createdAt).getTime()),a(he);const _e=Array.from(new Set(he.map(Ne=>Ne.reviewerId))),xe={...N};await Promise.all(_e.map(async Ne=>{if(!xe[Ne]){const He=await Ks(_t(Ue,"users",Ne));if(He.exists()){const G=He.data();xe[Ne]={displayName:G.displayName||"Utilisateur",photoURL:G.photoURL||void 0}}else xe[Ne]={displayName:""}}})),b(xe);const se=he.reduce((Ne,He)=>Ne+He.rating,0),we=he.length>0?se/he.length:0;m(Ne=>({...Ne,totalReviews:he.length,averageRating:Math.round(we*10)/10}))}catch(K){console.error("Erreur lors du chargement des avis:",K)}finally{v(K=>({...K,reviews:!1}))}},M=async()=>{if(t)try{v(_e=>({..._e,favorites:!0}));const K=Pn(Ut(Ue,"favorites"),lr("userId","==",t.uid),yi(20)),ie=await Zn(K),he=[];if(ie.forEach(_e=>{const xe=_e.data();he.push({id:_e.id,...xe,createdAt:as(xe.createdAt)})}),he.sort((_e,xe)=>as(xe.createdAt).getTime()-as(_e.createdAt).getTime()),m(_e=>({..._e,totalFavorites:he.length})),he.length>0){const _e=he.slice(0,6).map(async se=>{try{const we=await Ks(_t(Ue,"listings",se.listingId));if(we.exists()){const Ne=we.data();return{id:we.id,...Ne,createdAt:as(Ne.createdAt),updatedAt:as(Ne.updatedAt)}}return null}catch(we){return console.error("Erreur lors du chargement d'une annonce favorite:",we),null}}),xe=await Promise.all(_e);l(xe.filter(se=>se!==null))}}catch(K){console.error("Erreur lors du chargement des favoris:",K)}finally{v(K=>({...K,favorites:!1}))}},D=K=>{if(!K)return"Date inconnue";try{const ie=as(K);return isNaN(ie.getTime())?"Date invalide":cf(ie,{addSuffix:!0,locale:Yr})}catch{return"Date invalide"}},O=K=>Array.from({length:5},(ie,he)=>i.jsx(Tl,{className:`h-4 w-4 ${he<K?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},he)),B=localStorage.getItem("pendingUserData"),Y=B?JSON.parse(B):{};let ee=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||Y.displayName||"";!ee&&(t!=null&&t.displayName)&&(ee=t.displayName),!ee&&(t!=null&&t.email)&&(ee=t.email.split("@")[0]),ee||(ee="Utilisateur");let Z=(u==null?void 0:u.university)||(e==null?void 0:e.university)||Y.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||Y.university==="Autre université"&&Y.otherUniversity){const K=u==null?void 0:u.otherUniversity,ie=e==null?void 0:e.otherUniversity,he=Y.otherUniversity;Z=K||ie||he||"Université personnalisée"}Z||(Z="Université spécifiée lors de l'inscription");let z=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||Y.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||Y.fieldOfStudy==="Autre"&&Y.otherFieldOfStudy){const K=u==null?void 0:u.otherFieldOfStudy,ie=e==null?void 0:e.otherFieldOfStudy,he=Y.otherFieldOfStudy;z=K||ie||he||"Filière personnalisée"}z||(z="Filière non spécifiée");const H=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||Y.graduationYear||"",q=(u==null?void 0:u.email)||(e==null?void 0:e.email)||Y.email||(t==null?void 0:t.email)||"",X=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",me=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),Ee=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),Fe=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",Me=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,ue=t&&e&&t.uid===e.id,ye=async K=>{if(t)try{const ie=_t(Ue,"reviews",K),he=s.find(se=>se.id===K);if(!he)return;const _e=he.likes||[],xe=he.dislikes||[];_e.includes(t.uid)?await En(ie,{likes:_e.filter(se=>se!==t.uid)}):await En(ie,{likes:[..._e,t.uid],dislikes:xe.filter(se=>se!==t.uid)}),a(se=>se.map(we=>{if(we.id===K){const Ne=we.likes||[],He=we.dislikes||[];return Ne.includes(t.uid)?{...we,likes:Ne.filter(G=>G!==t.uid)}:{...we,likes:[...Ne,t.uid],dislikes:He.filter(G=>G!==t.uid)}}return we}))}catch(ie){console.error("Error liking review:",ie),Kn.error("Erreur lors du like")}},J=async K=>{if(t)try{const ie=_t(Ue,"reviews",K),he=s.find(se=>se.id===K);if(!he)return;const _e=he.likes||[],xe=he.dislikes||[];xe.includes(t.uid)?await En(ie,{dislikes:xe.filter(se=>se!==t.uid)}):await En(ie,{dislikes:[...xe,t.uid],likes:_e.filter(se=>se!==t.uid)}),a(se=>se.map(we=>{if(we.id===K){const Ne=we.likes||[],He=we.dislikes||[];return He.includes(t.uid)?{...we,dislikes:He.filter(G=>G!==t.uid)}:{...we,dislikes:[...He,t.uid],likes:Ne.filter(G=>G!==t.uid)}}return we}))}catch(ie){console.error("Error disliking review:",ie),Kn.error("Erreur lors du dislike")}},te=async K=>{if(!(!t||!x.trim()))try{const ie=_t(Ue,"reviews",K),he=s.find(xe=>xe.id===K);if(!he)return;const _e={userId:t.uid,comment:x.trim(),createdAt:new Date};await En(ie,{replies:[...he.replies||[],_e]}),a(xe=>xe.map(se=>se.id===K?{...se,replies:[...se.replies||[],_e]}:se)),S(""),_(null),Kn.success("Réponse envoyée")}catch(ie){console.error("Error replying to review:",ie),Kn.error("Erreur lors de l'envoi de la réponse")}},ne=async()=>{if(t)try{const K=`${C} ${V}`.trim();await En(_t(Ue,"users",t.uid),{firstName:C,lastName:V,displayName:K,updatedAt:new Date}),await t.reload(),Kn.success("Nom mis à jour !")}catch{Kn.error("Erreur lors de la mise à jour du nom")}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsx(ge,{children:i.jsx(et,{className:"text-left",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[i.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[i.jsx(UV,{currentPhotoURL:X,displayName:ee}),Ee&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Bt,{className:"w-3 h-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[i.jsx(rt,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:ee}),Ee&&i.jsxs(ct,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[i.jsx(Bt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx(Rt,{className:"text-base text-center sm:text-left break-all",children:q}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[i.jsxs("div",{children:[i.jsx(ms,{className:"h-4 w-4 mr-1 inline"})," Université : ",i.jsx("span",{className:"text-sm",children:Z})]}),i.jsxs("div",{children:[i.jsx(Jh,{className:"h-4 w-4 mr-1 inline"})," Filière : ",i.jsx("span",{className:"text-sm",children:z})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",i.jsx("span",{className:"text-sm",children:H})]})]}),Fe&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Zr,{className:"h-4 w-4 mr-1"}),i.jsx("span",{className:"text-sm",children:Fe})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(gi,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"text-sm",children:["Membre depuis ",D(me)]})]}),Me&&Me>0&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[i.jsx(Hi,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"text-sm font-medium",children:[Me," kg CO₂ économisés"]})]})]})]})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Nn,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):h.totalListings}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Fg,{className:"h-5 w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):h.activeListings}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Tl,{className:"h-5 w-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.reviews?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):h.averageRating||"—"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qr,{className:"h-5 w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.favorites?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):h.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),i.jsxs(Vu,{defaultValue:"listings",className:"space-y-4",children:[i.jsxs(vc,{className:"grid w-full grid-cols-3",children:[i.jsxs(fn,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Nn,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),i.jsx("span",{className:"sm:hidden",children:"Annonces"}),!p.listings&&h.totalListings>0&&i.jsx(ct,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:h.totalListings})]}),i.jsxs(fn,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Tl,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),i.jsx("span",{className:"sm:hidden",children:"Avis"}),!p.reviews&&h.totalReviews>0&&i.jsx(ct,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:h.totalReviews})]}),i.jsxs(fn,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Qr,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),i.jsx("span",{className:"sm:hidden",children:"Favoris"}),!p.favorites&&h.totalFavorites>0&&i.jsx(ct,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:h.totalFavorites})]}),i.jsxs(fn,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(ms,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),i.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),i.jsx(mn,{value:"listings",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"w-5 h-5"}),"Mes Annonces"]}),i.jsx(Rt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),i.jsx(ve,{children:p.listings?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((K,ie)=>i.jsxs(ge,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ve,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ie))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),i.jsx(re,{asChild:!0,children:i.jsx(ze,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(K=>i.jsx(kp,{listing:K},K.id))})})]})}),i.jsx(mn,{value:"reviews",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Tl,{className:"w-5 h-5"}),"Avis Reçus"]}),i.jsx(Rt,{children:"Les avis laissés par d'autres étudiants"})]}),i.jsx(ve,{children:p.reviews?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((K,ie)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((he,_e)=>i.jsx("div",{className:"w-4 h-4 bg-muted rounded"},_e))}),i.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},ie))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Cn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):i.jsx("div",{className:"space-y-4",children:s.map(K=>{var ie,he,_e,xe,se,we;return i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex",children:O(K.rating)}),i.jsxs(ct,{variant:"secondary",className:"text-xs",children:[K.rating,"/5"]})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:D(K.createdAt)})]}),i.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:K.comment}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((ie=N[K.reviewerId])==null?void 0:ie.photoURL)&&i.jsx("img",{src:N[K.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),K.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(he=N[K.reviewerId])!=null&&he.displayName?N[K.reviewerId].displayName:i.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),i.jsx(ct,{variant:"outline",className:"text-xs",children:K.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[i.jsxs(re,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(_e=K.likes)!=null&&_e.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>ye(K.id),children:[i.jsx(FX,{className:"w-4 h-4"}),i.jsx("span",{children:((xe=K.likes)==null?void 0:xe.length)||0})]}),i.jsxs(re,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(se=K.dislikes)!=null&&se.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>J(K.id),children:[i.jsx(LX,{className:"w-4 h-4"}),i.jsx("span",{children:((we=K.dislikes)==null?void 0:we.length)||0})]}),i.jsxs(re,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>_(j===K.id?null:K.id),children:[i.jsx(Cn,{className:"w-4 h-4"}),i.jsx("span",{children:"Répondre"})]})]}),j===K.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(bi,{placeholder:"Votre réponse...",value:x,onChange:Ne=>S(Ne.target.value),className:"min-h-[80px]"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{_(null),S("")},children:"Annuler"}),i.jsx(re,{size:"sm",onClick:()=>te(K.id),disabled:!x.trim(),children:"Envoyer"})]})]}),K.replies&&K.replies.length>0&&i.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:K.replies.map((Ne,He)=>{var G;return i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:ue&&Ne.userId===(t==null?void 0:t.uid)?"Vous":((G=N[Ne.userId])==null?void 0:G.displayName)||"Utilisateur"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:D(Ne.createdAt)})]}),i.jsx("p",{className:"text-muted-foreground text-left",children:Ne.comment})]},He)})})]},K.id)})})})]})}),i.jsx(mn,{value:"favorites",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Qr,{className:"w-5 h-5"}),"Mes Favoris"]}),i.jsx(Rt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),i.jsx(ve,{children:p.favorites?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((K,ie)=>i.jsxs(ge,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ve,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ie))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Qr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),i.jsx(re,{asChild:!0,children:i.jsx(ze,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(K=>i.jsx(kp,{listing:K},K.id))})})]})}),i.jsx(mn,{value:"settings",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsx(rt,{children:"Paramètres du profil"}),i.jsx(Rt,{children:"Modifie tes informations principales."})]}),i.jsxs(ve,{children:[i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Ae,{htmlFor:"firstName",children:"Prénom"}),i.jsx(Ke,{id:"firstName",value:C,onChange:K=>R(K.target.value),autoComplete:"given-name"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ae,{htmlFor:"lastName",children:"Nom"}),i.jsx(Ke,{id:"lastName",value:V,onChange:K=>k(K.target.value),autoComplete:"family-name"})]})]}),i.jsx(re,{onClick:ne,disabled:!C||!V,children:"Enregistrer"})]})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var Zw="Switch",[Ghe,sje]=$r(Zw),[Khe,Zhe]=Ghe(Zw),BV=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u="on",onCheckedChange:d,form:h,...m}=t,[p,v]=w.useState(null),N=pt(e,S=>v(S)),b=w.useRef(!1),j=p?h||!!p.closest("form"):!0,[_,x]=Js({prop:s,defaultProp:a??!1,onChange:d,caller:Zw});return i.jsxs(Khe,{scope:n,checked:_,disabled:l,children:[i.jsx(Qe.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":GV(_),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:N,onClick:$e(t.onClick,S=>{x(C=>!C),j&&(b.current=S.isPropagationStopped(),b.current||S.stopPropagation())})}),j&&i.jsx(qV,{control:p,bubbles:!b.current,name:r,value:u,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});BV.displayName=Zw;var WV="SwitchThumb",HV=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Zhe(WV,n);return i.jsx(Qe.span,{"data-state":GV(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});HV.displayName=WV;var Qhe="SwitchBubbleInput",qV=w.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=w.useRef(null),l=pt(o,a),u=Mw(n),d=Nw(e);return w.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&v){const N=new Event("click",{bubbles:r});v.call(h,n),h.dispatchEvent(N)}},[u,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qV.displayName=Qhe;function GV(t){return t?"checked":"unchecked"}var KV=BV,Yhe=HV;const fr=w.forwardRef(({className:t,...e},n)=>i.jsx(KV,{className:ot("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Yhe,{className:ot("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));fr.displayName=KV.displayName;const Jhe=$u({firstName:xt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:xt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:xt().optional(),bio:xt().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:xt().optional(),university:xt().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),graduationYear:iV().min(2020).max(2035),campus:xt().optional(),location:xt().optional()}),Xhe=$u({currentPassword:xt().min(6,"Le mot de passe actuel est requis"),newPassword:xt().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:xt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),efe=$u({newEmail:xt().email("Email invalide"),password:xt().min(6,"Mot de passe requis pour changer l'email")}),tfe=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],nfe=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],rfe=()=>{var B,Y,ee,Z,z,H;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=bn(),s=xr(),[a,o]=w.useState("profile"),[l,u]=w.useState(!1),[d,h]=w.useState(!1),[m,p]=w.useState(!1),[v,N]=w.useState(!1),[b,j]=w.useState(""),[_,x]=w.useState({email:((B=e==null?void 0:e.notificationPreferences)==null?void 0:B.email)??!0,push:((Y=e==null?void 0:e.notificationPreferences)==null?void 0:Y.push)??!0,sms:((ee=e==null?void 0:e.notificationPreferences)==null?void 0:ee.sms)??!1,alerts:((Z=e==null?void 0:e.notificationPreferences)==null?void 0:Z.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[S,C]=w.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),R=ru({resolver:su(Jhe),defaultValues:{firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),V=ru({resolver:su(Xhe)}),k=ru({resolver:su(efe)});w.useEffect(()=>{var q,X,me,Ee;e&&(R.reset({firstName:e.firstName||"",lastName:e.lastName||"",displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),x({email:((q=e.notificationPreferences)==null?void 0:q.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((me=e.notificationPreferences)==null?void 0:me.sms)??!1,alerts:((Ee=e.notificationPreferences)==null?void 0:Ee.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,R]);const I=async q=>{u(!0);try{const{firstName:X,lastName:me,...Ee}=q,Fe=`${X} ${me}`;await En(_t(Ue,"users",t.uid),{...Ee,firstName:X,lastName:me,displayName:Fe,updatedAt:new Date}),je.success("Profil mis à jour !")}catch{je.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},$=async()=>{u(!0);try{await n({notificationPreferences:{email:_.email,push:_.push,sms:_.sms,alerts:_.alerts}}),je.success("Préférences de notification mises à jour !")}catch(q){console.error("Erreur lors de la mise à jour des notifications:",q),je.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},T=async q=>{if(t){u(!0);try{const X=Zl.credential(t.email,q.currentPassword);await DT(t,X),await IG(t,q.newPassword),je.success("Mot de passe mis à jour avec succès !"),p(!1),V.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?je.error("Mot de passe actuel incorrect"):je.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},M=async q=>{if(t){u(!0);try{const X=Zl.credential(t.email,q.password);await DT(t,X),await kG(t,q.newEmail),await n({email:q.newEmail}),je.success("Email mis à jour avec succès !"),N(!1),k.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?je.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?je.error("Cet email est déjà utilisé"):je.error("Erreur lors du changement d'email")}finally{u(!1)}}},D=async()=>{if(!(!t||b!=="SUPPRIMER")){u(!0);try{const q=KL(Ue),X=["listings","conversations","reviews","favorites","reports"];for(const me of X){const Ee=Pn(Ut(Ue,me),lr("userId","==",t.uid));(await Zn(Ee)).forEach(Me=>{q.delete(Me.ref)})}q.delete(_t(Ue,"users",t.uid)),await q.commit(),await LG(t),je.success("Compte supprimé avec succès"),s("/")}catch(q){console.error("Erreur lors de la suppression du compte:",q),je.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},O=async()=>{if(t){u(!0);try{const q={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=Pn(Ut(Ue,"listings"),lr("sellerId","==",t.uid)),me=await Zn(X);q.listings=me.docs.map(he=>({id:he.id,...he.data()}));const Ee=Pn(Ut(Ue,"conversations"),lr("participants","array-contains",t.uid)),Fe=await Zn(Ee);q.conversations=Fe.docs.map(he=>({id:he.id,...he.data()}));const Me=Pn(Ut(Ue,"reviews"),lr("revieweeId","==",t.uid)),ue=await Zn(Me);q.reviews=ue.docs.map(he=>({id:he.id,...he.data()}));const ye=Pn(Ut(Ue,"favorites"),lr("userId","==",t.uid)),J=await Zn(ye);q.favorites=J.docs.map(he=>({id:he.id,...he.data()}));const te=JSON.stringify(q,null,2),ne=new Blob([te],{type:"application/json"}),K=URL.createObjectURL(ne),ie=document.createElement("a");ie.href=K,ie.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,ie.click(),URL.revokeObjectURL(K),je.success("Données exportées avec succès !")}catch(q){console.error("Erreur lors de l'export des données:",q),je.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[i.jsx(pw,{className:"w-8 h-8"}),"Paramètres"]}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),i.jsxs(Vu,{value:a,onValueChange:o,className:"space-y-6",children:[i.jsxs(vc,{className:"grid w-full grid-cols-5",children:[i.jsxs(fn,{value:"profile",className:"flex items-center gap-2",children:[i.jsx(ms,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),i.jsxs(fn,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),i.jsxs(fn,{value:"privacy",className:"flex items-center gap-2",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),i.jsxs(fn,{value:"security",className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),i.jsxs(fn,{value:"data",className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),i.jsx(mn,{value:"profile",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(ms,{className:"w-5 h-5"}),"Informations personnelles"]}),i.jsx(Rt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(UV,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Photo de profil"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),i.jsx(fi,{}),i.jsxs("form",{onSubmit:R.handleSubmit(I),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"firstName",children:"Prénom *"}),i.jsx(Ke,{id:"firstName",...R.register("firstName"),placeholder:"Votre prénom"}),R.formState.errors.firstName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.firstName.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"lastName",children:"Nom *"}),i.jsx(Ke,{id:"lastName",...R.register("lastName"),placeholder:"Votre nom"}),R.formState.errors.lastName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.lastName.message})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"phone",children:"Téléphone"}),i.jsx(Ke,{id:"phone",type:"tel",...R.register("phone"),placeholder:"+33 6 12 34 56 78"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"bio",children:"Biographie"}),i.jsx(bi,{id:"bio",...R.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((z=R.watch("bio"))==null?void 0:z.length)||0,"/500 caractères"]})]}),i.jsx(fi,{}),i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Jh,{className:"w-4 h-4"}),"Informations académiques"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"university",children:"Université *"}),i.jsxs(sn,{value:R.watch("university"),onValueChange:q=>R.setValue("university",q),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Sélectionnez votre université"})}),i.jsx(Yt,{children:tfe.map(q=>i.jsx(Ze,{value:q,children:q},q))})]}),R.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.university.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),i.jsxs(sn,{value:R.watch("fieldOfStudy"),onValueChange:q=>R.setValue("fieldOfStudy",q),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Sélectionnez votre filière"})}),i.jsx(Yt,{children:nfe.map(q=>i.jsx(Ze,{value:q,children:q},q))})]}),R.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.fieldOfStudy.message})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"graduationYear",children:"Année de diplôme *"}),i.jsxs(sn,{value:(H=R.watch("graduationYear"))==null?void 0:H.toString(),onValueChange:q=>R.setValue("graduationYear",parseInt(q)),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Année de diplôme"})}),i.jsx(Yt,{children:Array.from({length:16},(q,X)=>2020+X).map(q=>i.jsx(Ze,{value:q.toString(),children:q},q))})]}),R.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.graduationYear.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"campus",children:"Campus"}),i.jsx(Ke,{id:"campus",...R.register("campus"),placeholder:"Campus principal"})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"location",children:"Localisation"}),i.jsx(Ke,{id:"location",...R.register("location"),placeholder:"Paris, France"})]}),i.jsx(re,{type:"submit",disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(s_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),i.jsx(mn,{value:"notifications",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-5 h-5"}),"Préférences de notification"]}),i.jsx(Rt,{children:"Choisissez comment vous souhaitez être notifié"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(As,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),i.jsx(fr,{checked:_.email,onCheckedChange:q=>x(X=>({...X,email:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mu,{className:"w-4 h-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Notifications push"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),i.jsx(fr,{checked:_.push,onCheckedChange:q=>x(X=>({...X,push:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xh,{className:"w-4 h-4 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),i.jsx(fr,{checked:_.sms,onCheckedChange:q=>x(X=>({...X,sms:q})),disabled:!0})]})]})]}),i.jsx(fi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Types de notifications"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Cn,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),i.jsx(fr,{checked:_.messages,onCheckedChange:q=>x(X=>({...X,messages:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Nn,{className:"w-4 h-4 text-orange-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Annonces"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),i.jsx(fr,{checked:_.listings,onCheckedChange:q=>x(X=>({...X,listings:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Tl,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),i.jsx(fr,{checked:_.reviews,onCheckedChange:q=>x(X=>({...X,reviews:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Li,{className:"w-4 h-4 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),i.jsx(fr,{checked:_.alerts,onCheckedChange:q=>x(X=>({...X,alerts:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(RX,{className:"w-4 h-4 text-pink-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),i.jsx(fr,{checked:_.marketing,onCheckedChange:q=>x(X=>({...X,marketing:q}))})]})]})]}),i.jsx(re,{onClick:$,disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(s_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),i.jsx(mn,{value:"privacy",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(jh,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),i.jsx(Rt,{children:"Contrôlez qui peut voir vos informations"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Profil public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),i.jsx(fr,{checked:S.profileVisibility==="public",onCheckedChange:q=>C(X=>({...X,profileVisibility:q?"public":"private"}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),i.jsx(fr,{checked:S.showEmail,onCheckedChange:q=>C(X=>({...X,showEmail:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),i.jsx(fr,{checked:S.showPhone,onCheckedChange:q=>C(X=>({...X,showPhone:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'université"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),i.jsx(fr,{checked:S.showUniversity,onCheckedChange:q=>C(X=>({...X,showUniversity:q}))})]})]})]}),i.jsx(fi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Interactions"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),i.jsx(fr,{checked:S.allowMessages,onCheckedChange:q=>C(X=>({...X,allowMessages:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Statut en ligne"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),i.jsx(fr,{checked:S.showOnlineStatus,onCheckedChange:q=>C(X=>({...X,showOnlineStatus:q}))})]})]})]}),i.jsxs(qt,{children:[i.jsx(Bt,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),i.jsx(mn,{value:"security",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"w-5 h-5"}),"Sécurité du compte"]}),i.jsx(Rt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Informations du compte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(As,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Email"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),i.jsxs(Da,{open:v,onOpenChange:N,children:[i.jsx(ih,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"sm",children:"Changer l'email"})}),i.jsxs(qi,{children:[i.jsxs(La,{children:[i.jsx(Gi,{children:"Changer l'adresse email"}),i.jsx(nu,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),i.jsxs("form",{onSubmit:k.handleSubmit(M),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"newEmail",children:"Nouvel email"}),i.jsx(Ke,{id:"newEmail",type:"email",...k.register("newEmail"),placeholder:"nouveau@email.com"}),k.formState.errors.newEmail&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.newEmail.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),i.jsx(Ke,{id:"emailPassword",type:"password",...k.register("password"),placeholder:"••••••••"}),k.formState.errors.password&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.password.message})]}),i.jsxs(Ky,{children:[i.jsx(re,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Annuler"}),i.jsxs(re,{type:"submit",disabled:l,children:[l?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(s_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(yu,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),i.jsxs(Da,{open:m,onOpenChange:p,children:[i.jsx(ih,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),i.jsxs(qi,{children:[i.jsxs(La,{children:[i.jsx(Gi,{children:"Changer le mot de passe"}),i.jsx(nu,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),i.jsxs("form",{onSubmit:V.handleSubmit(T),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),i.jsx(Ke,{id:"currentPassword",type:"password",...V.register("currentPassword"),placeholder:"••••••••"}),V.formState.errors.currentPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:V.formState.errors.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),i.jsx(Ke,{id:"newPassword",type:"password",...V.register("newPassword"),placeholder:"••••••••"}),V.formState.errors.newPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:V.formState.errors.newPassword.message})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),i.jsx(Ke,{id:"confirmPassword",type:"password",...V.register("confirmPassword"),placeholder:"••••••••"}),V.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:V.formState.errors.confirmPassword.message})]}),i.jsxs(Ky,{children:[i.jsx(re,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),i.jsxs(re,{type:"submit",disabled:l,children:[l?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(SX,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),i.jsx(fi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),i.jsx("div",{className:"p-4 border rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?i.jsxs(ct,{className:"bg-green-100 text-green-800",children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):i.jsx(ct,{variant:"outline",children:"En attente"})]})})]}),i.jsxs(qt,{children:[i.jsx(Bt,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),i.jsxs(mn,{value:"data",className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-5 h-5"}),"Gestion des données"]}),i.jsx(Rt,{children:"Exportez ou supprimez vos données personnelles"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),i.jsxs(re,{onClick:O,disabled:l,variant:"outline",children:[l?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(xi,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),i.jsx(fi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),i.jsxs(qt,{className:"border-destructive",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx(Gt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),i.jsxs(Da,{open:d,onOpenChange:h,children:[i.jsx(ih,{asChild:!0,children:i.jsxs(re,{variant:"destructive",children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),i.jsxs(qi,{children:[i.jsxs(La,{children:[i.jsx(Gi,{className:"text-destructive",children:"Supprimer définitivement le compte"}),i.jsxs(nu,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Profil utilisateur"}),i.jsx("li",{children:"Toutes vos annonces"}),i.jsx("li",{children:"Conversations et messages"}),i.jsx("li",{children:"Avis et évaluations"}),i.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),i.jsx(Ke,{id:"deleteConfirm",value:b,onChange:q=>j(q.target.value),placeholder:"SUPPRIMER"})]})}),i.jsxs(Ky,{children:[i.jsx(re,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),i.jsxs(re,{variant:"destructive",onClick:D,disabled:b!=="SUPPRIMER"||l,children:[l?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(qx,{className:"w-5 h-5"}),"Informations légales"]})}),i.jsx(ve,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(re,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Ps,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),i.jsx(re,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Ps,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),i.jsx(re,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Ps,{className:"w-4 h-4"}),"Politique des cookies"]})}),i.jsx(re,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Ps,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};var e2="Progress",t2=100,[sfe,ije]=$r(e2),[ife,afe]=sfe(e2),ZV=w.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=ofe,...o}=t;(s||s===0)&&!vI(s)&&console.error(lfe(`${s}`,"Progress"));const l=vI(s)?s:t2;r!==null&&!yI(r,l)&&console.error(cfe(`${r}`,"Progress"));const u=yI(r,l)?r:null,d=v0(u)?a(u,l):void 0;return i.jsx(ife,{scope:n,value:u,max:l,children:i.jsx(Qe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":v0(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":JV(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});ZV.displayName=e2;var QV="ProgressIndicator",YV=w.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=afe(QV,n);return i.jsx(Qe.div,{"data-state":JV(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});YV.displayName=QV;function ofe(t,e){return`${Math.round(t/e*100)}%`}function JV(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function v0(t){return typeof t=="number"}function vI(t){return v0(t)&&!isNaN(t)&&t>0}function yI(t,e){return v0(t)&&!isNaN(t)&&t<=e&&t>=0}function lfe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${t2}\`.`}function cfe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${t2} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var XV=ZV,ufe=YV;const e8=w.forwardRef(({className:t,value:e,...n},r)=>i.jsx(XV,{ref:r,className:ot("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:i.jsx(ufe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));e8.displayName=XV.displayName;const Rc={electronics:{category:"Électronique",icon:Mu,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:v3,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:Kx,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:JE,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},dfe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],xd=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},hfe=()=>{const{currentUser:t,userProfile:e}=bn(),[n,r]=w.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[s,a]=w.useState([]),[o,l]=w.useState(!0),[u,d]=w.useState("all");w.useEffect(()=>{t&&h()},[t,u]);const h=async()=>{if(t){l(!0);try{const x=Pn(Ut(Ue,"listings"),lr("sellerId","==",t.uid)),S=await Zn(x),C=[];S.forEach(V=>{const k=V.data();C.push({id:V.id,...k,createdAt:xd(k.createdAt),updatedAt:xd(k.updatedAt)})}),a(C);const R=m(C,u);r(R),await b(R)}catch(x){console.error("Erreur lors du chargement des données environnementales:",x)}finally{l(!1)}}},m=(x,S)=>{const C=new Date;let R=x;if(S==="month"){const Y=new Date(C.getFullYear(),C.getMonth()-1,C.getDate());R=x.filter(ee=>xd(ee.createdAt)>=Y)}else if(S==="year"){const Y=new Date(C.getFullYear()-1,C.getMonth(),C.getDate());R=x.filter(ee=>xd(ee.createdAt)>=Y)}let V=0,k=0,I=0,$=0;const T={};R.forEach(Y=>{const ee=Rc[Y.category]||Rc.electronics,Z=1;let z=1;Y.transactionType==="donation"?z=1.2:Y.transactionType==="exchange"&&(z=.8),V+=ee.co2PerItem*Z*z,k+=ee.waterPerItem*Z*z,I+=ee.energyPerItem*Z*z,$+=ee.wastePerItem*Z*z,T[Y.category]=(T[Y.category]||0)+1});const M=p(x),D=v(x,V,k),{rank:O,percentile:B}=N(V,x.length);return{totalCo2Saved:Math.round(V*10)/10,totalWaterSaved:Math.round(k),totalEnergySaved:Math.round(I*10)/10,totalWasteAvoided:Math.round($*10)/10,transactionsByCategory:T,monthlyImpact:M,badges:D,rank:O,percentile:B}},p=x=>{const S={};for(let C=11;C>=0;C--){const R=new Date;R.setMonth(R.getMonth()-C);const V=R.toISOString().slice(0,7);S[V]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return x.forEach(C=>{const V=xd(C.createdAt).toISOString().slice(0,7);if(S[V]){const k=Rc[C.category]||Rc.electronics;let I=1;C.transactionType==="donation"?I=1.2:C.transactionType==="exchange"&&(I=.8),S[V].co2Saved+=k.co2PerItem*I,S[V].waterSaved+=k.waterPerItem*I,S[V].energySaved+=k.energyPerItem*I,S[V].transactions+=1}}),Object.entries(S).map(([C,R])=>({month:C,co2Saved:Math.round(R.co2Saved*10)/10,transactions:R.transactions,waterSaved:Math.round(R.waterSaved),energySaved:Math.round(R.energySaved*10)/10}))},v=(x,S,C)=>{const R=[];x.length>=1&&R.push("first_transaction"),S>=10&&R.push("co2_saver_10"),S>=50&&R.push("co2_saver_50"),S>=100&&R.push("co2_saver_100"),C>=1e3&&R.push("water_saver"),x.length>=20&&R.push("recycling_master"),x.filter($=>$.transactionType==="donation").length>=5&&R.push("donation_hero");const k=new Date().toISOString().slice(0,7);return x.filter($=>xd($.createdAt).toISOString().slice(0,7)===k).length>=10&&R.push("monthly_champion"),R},N=(x,S)=>{let C="Débutant",R=0;return x>=200?(C="Légende Écologique",R=95):x>=100?(C="Maître Environnemental",R=85):x>=50?(C="Expert Vert",R=70):x>=25?(C="Éco-Warrior",R=50):x>=10?(C="Protecteur",R=30):x>=5&&(C="Apprenti Vert",R=15),{rank:C,percentile:R}},b=async x=>{if(t)try{const S=_t(Ue,"users",t.uid);await En(S,{co2Saved:x.totalCo2Saved,environmentalRank:x.rank,environmentalBadges:x.badges,lastEnvironmentalUpdate:new Date})}catch(S){console.error("Erreur lors de la mise à jour des données environnementales:",S)}},j=async()=>{const x=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:x,url:window.location.origin})}catch{navigator.clipboard.writeText(x)}else navigator.clipboard.writeText(x)},_=()=>{const x={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:s.length,period:u},S=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),C=URL.createObjectURL(S),R=document.createElement("a");R.href=C,R.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(C)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Hi,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[i.jsx(gw,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(re,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gi,{className:"w-5 h-5 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(x=>i.jsx(re,{variant:u===x.key?"default":"outline",size:"sm",onClick:()=>d(x.key),children:x.label},x.key))})]})})}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((x,S)=>i.jsx(ge,{className:"animate-pulse",children:i.jsx(ve,{className:"pt-6",children:i.jsx("div",{className:"h-16 bg-muted rounded"})})},S))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(ge,{className:"border-green-200 bg-green-50/50",children:i.jsxs(ve,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),i.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Hi,{className:"w-6 h-6 text-green-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),i.jsx(ge,{className:"border-blue-200 bg-blue-50/50",children:i.jsxs(ve,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),i.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(VR,{className:"w-6 h-6 text-blue-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),i.jsx(ge,{className:"border-yellow-200 bg-yellow-50/50",children:i.jsxs(ve,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),i.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(ef,{className:"w-6 h-6 text-yellow-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),i.jsx(ge,{className:"border-purple-200 bg-purple-50/50",children:i.jsxs(ve,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),i.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(AX,{className:"w-6 h-6 text-purple-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(p3,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),i.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl",children:"🏆"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),i.jsx(e8,{value:n.percentile,className:"h-3"}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[i.jsx("span",{children:"Débutant"}),i.jsx("span",{children:"Légende Écologique"})]})]})]}),i.jsxs(Vu,{defaultValue:"overview",className:"space-y-4",children:[i.jsxs(vc,{className:"grid w-full grid-cols-4",children:[i.jsx(fn,{value:"overview",children:"Vue d'ensemble"}),i.jsx(fn,{value:"categories",children:"Par catégorie"}),i.jsx(fn,{value:"badges",children:"Badges"}),i.jsx(fn,{value:"methodology",children:"Méthodologie"})]}),i.jsxs(mn,{value:"overview",className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(_3,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),i.jsx(Rt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),i.jsx(ve,{children:i.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((x,S)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{className:"font-medium",children:new Date(x.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[x.co2Saved," kg"]}),i.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-blue-600",children:[x.waterSaved," L"]}),i.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-primary",children:x.transactions}),i.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},x.month))})})]}),i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(N3,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),i.jsx(Rt,{children:"Votre impact traduit en équivalences du quotidien"})]}),i.jsx(ve,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[i.jsx(b3,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx($X,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[i.jsx(bX,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[i.jsx(VR,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),i.jsx(mn,{value:"categories",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"w-5 h-5"}),"Impact par Catégorie"]}),i.jsx(Rt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),i.jsx(ve,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([x,S])=>{const C=Rc[x]||Rc.electronics,R=C.icon,V=S*C.co2PerItem;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:i.jsx(R,{className:`w-5 h-5 ${C.color}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:C.category}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[S," transaction",S>1?"s":""]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(V*10)/10," kg CO₂"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(S*C.waterPerItem)," L eau"]})]})]},x)})})})]})}),i.jsx(mn,{value:"badges",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(fj,{className:"w-5 h-5"}),"Badges Écologiques"]}),i.jsx(Rt,{children:"Vos récompenses pour votre engagement environnemental"})]}),i.jsx(ve,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:dfe.map(x=>{const S=n.badges.includes(x.id);return i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${S?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-2",children:x.icon}),i.jsx("h3",{className:`font-semibold ${S?"text-green-800":"text-gray-600"}`,children:x.name}),i.jsx("p",{className:`text-sm ${S?"text-green-600":"text-gray-500"}`,children:x.description}),S&&i.jsx(ct,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},x.id)})})})]})}),i.jsx(mn,{value:"methodology",className:"space-y-6",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(ec,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),i.jsx(Rt,{children:"Comment nous calculons votre impact environnemental"})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs(qt,{children:[i.jsx(ec,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),i.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),i.jsx("div",{className:"space-y-3",children:Object.entries(Rc).map(([x,S])=>{const C=S.icon;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(C,{className:`w-4 h-4 ${S.color}`}),i.jsx("span",{className:"font-medium",children:S.category})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.co2PerItem," kg"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.waterPerItem," L"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.energyPerItem," kWh"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.wastePerItem," kg"]})]})]})]},x)})}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nh,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ao,{className:"w-4 h-4 text-purple-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"w-4 h-4 text-blue-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),i.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),i.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),i.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),i.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(Hi,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),i.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},fy=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},y0=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(y0).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=y0(t[n]);r!==void 0&&(e[n]=r)}),e}return t},xI=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],wI=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],ffe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],mfe=()=>{const{currentUser:t,userProfile:e}=bn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,d]=w.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[h,m]=w.useState(!1),[p,v]=w.useState(null),[N,b]=w.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});w.useEffect(()=>{t&&(j(),_())},[t]);const j=async()=>{if(t)try{d(B=>({...B,searches:!0}));const T=Pn(Ut(Ue,"savedSearches"),lr("userId","==",t.uid),yi(50)),M=await Zn(T),D=[];M.forEach(B=>{const Y=B.data();D.push({id:B.id,...Y,createdAt:fy(Y.createdAt),updatedAt:fy(Y.updatedAt),lastNotified:Y.lastNotified?fy(Y.lastNotified):void 0})}),D.sort((B,Y)=>Y.createdAt.getTime()-B.createdAt.getTime()),r(D);const O=D.filter(B=>B.alertsEnabled).length;l(B=>({...B,totalSearches:D.length,activeAlerts:O}))}catch(T){console.error("Erreur lors du chargement des recherches sauvegardées:",T),je.error("Erreur lors du chargement des recherches sauvegardées")}finally{d(T=>({...T,searches:!1}))}},_=async()=>{if(t)try{d(B=>({...B,matches:!0}));const T=Pn(Ut(Ue,"alertMatches"),lr("userId","==",t.uid),yi(100)),M=await Zn(T),D=[];M.forEach(B=>{const Y=B.data();D.push({id:B.id,...Y,matchedAt:fy(Y.matchedAt)})}),D.sort((B,Y)=>Y.matchedAt.getTime()-B.matchedAt.getTime()),a(D);const O=D.filter(B=>!B.seen).length;l(B=>({...B,totalMatches:D.length,newMatches:O}))}catch(T){console.error("Erreur lors du chargement des correspondances:",T),je.error("Erreur lors du chargement des correspondances")}finally{d(T=>({...T,matches:!1}))}},x=async()=>{if(!t||!N.name.trim()){je.error("Veuillez remplir le nom de la recherche");return}d(T=>({...T,creating:!0}));try{const T={};if(N.query&&N.query.trim()&&(T.query=N.query.trim()),N.category&&N.category!=="all"&&(T.category=N.category),N.transactionType&&N.transactionType!=="all"&&(T.transactionType=N.transactionType),N.university&&N.university!=="all"&&(T.university=N.university),N.minPrice&&N.minPrice.trim()){const O=parseFloat(N.minPrice);!isNaN(O)&&O>=0&&(T.minPrice=O)}if(N.maxPrice&&N.maxPrice.trim()){const O=parseFloat(N.maxPrice);!isNaN(O)&&O>=0&&(T.maxPrice=O)}const M={userId:t.uid,name:N.name.trim(),filters:T,alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:{email:N.notificationMethods.email,push:N.notificationMethods.push,sms:N.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},D=y0(M);await Xl(Ut(Ue,"savedSearches"),D),je.success("Alerte créée avec succès !"),m(!1),k(),j()}catch(T){console.error("Erreur lors de la création de l'alerte:",T),je.error("Erreur lors de la création de l'alerte")}finally{d(T=>({...T,creating:!1}))}},S=async(T,M)=>{try{d(O=>({...O,updating:!0}));const D=y0({...M,updatedAt:new Date});await En(_t(Ue,"savedSearches",T),D),je.success("Recherche mise à jour !"),j()}catch(D){console.error("Erreur lors de la mise à jour:",D),je.error("Erreur lors de la mise à jour")}finally{d(D=>({...D,updating:!1}))}},C=async T=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await bh(_t(Ue,"savedSearches",T)),je.success("Recherche supprimée !"),j()}catch(M){console.error("Erreur lors de la suppression:",M),je.error("Erreur lors de la suppression")}},R=async(T,M)=>{await S(T,{alertsEnabled:M})},V=async T=>{try{await En(_t(Ue,"alertMatches",T),{seen:!0,seenAt:new Date}),_()}catch(M){console.error("Erreur lors du marquage comme vu:",M)}},k=()=>{b({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),v(null)},I=T=>{try{return cf(T,{addSuffix:!0,locale:Yr})}catch{return"Date inconnue"}},$=T=>{const M=[];if(T.query&&M.push(`"${T.query}"`),T.category&&T.category!=="all"){const D=xI.find(O=>O.value===T.category);D&&M.push(D.label)}if(T.transactionType&&T.transactionType!=="all"){const D=wI.find(O=>O.value===T.transactionType);D&&M.push(D.label)}return T.minPrice!==void 0&&M.push(`≥ ${T.minPrice}€`),T.maxPrice!==void 0&&M.push(`≤ ${T.maxPrice}€`),M.length>0?M.join(" • "):"Tous les critères"};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Li,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),i.jsxs(Da,{open:h,onOpenChange:m,children:[i.jsx(ih,{asChild:!0,children:i.jsxs(re,{className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(eu,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),i.jsxs(qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(La,{children:[i.jsxs(Gi,{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),i.jsx(nu,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),i.jsx(Ke,{id:"alert-name",value:N.name,onChange:T=>b(M=>({...M,name:T.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(mw,{className:"w-4 h-4"}),"Critères de Recherche"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"search-query",children:"Mots-clés"}),i.jsx(Ke,{id:"search-query",value:N.query,onChange:T=>b(M=>({...M,query:T.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"search-category",children:"Catégorie"}),i.jsxs(sn,{value:N.category,onValueChange:T=>b(M=>({...M,category:T})),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{})}),i.jsx(Yt,{children:xI.map(T=>i.jsx(Ze,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"transaction-type",children:"Type de transaction"}),i.jsxs(sn,{value:N.transactionType,onValueChange:T=>b(M=>({...M,transactionType:T})),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{})}),i.jsx(Yt,{children:wI.map(T=>i.jsx(Ze,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"search-university",children:"Université"}),i.jsxs(sn,{value:N.university,onValueChange:T=>b(M=>({...M,university:T})),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{})}),i.jsx(Yt,{children:ffe.map(T=>i.jsx(Ze,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"min-price",children:"Prix minimum (€)"}),i.jsx(Ke,{id:"min-price",type:"number",value:N.minPrice,onChange:T=>b(M=>({...M,minPrice:T.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"max-price",children:"Prix maximum (€)"}),i.jsx(Ke,{id:"max-price",type:"number",value:N.maxPrice,onChange:T=>b(M=>({...M,maxPrice:T.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4"}),"Notifications"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),i.jsx(fr,{id:"alerts-enabled",checked:N.alertsEnabled,onCheckedChange:T=>b(M=>({...M,alertsEnabled:T}))})]}),N.alertsEnabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Ae,{children:"Fréquence des notifications"}),i.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:T.value,name:"frequency",value:T.value,checked:N.notificationFrequency===T.value,onChange:M=>b(D=>({...D,notificationFrequency:M.target.value})),className:"rounded border-border"}),i.jsx(Ae,{htmlFor:T.value,className:"cursor-pointer",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.label}),i.jsx("div",{className:"text-sm text-muted-foreground",children:T.description})]})})]},T.value))})]}),i.jsxs("div",{children:[i.jsx(Ae,{children:"Méthodes de notification"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(As,{className:"w-4 h-4 text-blue-600"}),i.jsx(Ae,{htmlFor:"email-notifications",children:"Email"})]}),i.jsx(fr,{id:"email-notifications",checked:N.notificationMethods.email,onCheckedChange:T=>b(M=>({...M,notificationMethods:{...M.notificationMethods,email:T}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4 text-green-600"}),i.jsx(Ae,{htmlFor:"push-notifications",children:"Notifications push"})]}),i.jsx(fr,{id:"push-notifications",checked:N.notificationMethods.push,onCheckedChange:T=>b(M=>({...M,notificationMethods:{...M.notificationMethods,push:T}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zR,{className:"w-4 h-4 text-purple-600"}),i.jsx(Ae,{htmlFor:"sms-notifications",children:"SMS"}),i.jsx(ct,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),i.jsx(fr,{id:"sms-notifications",checked:N.notificationMethods.sms,onCheckedChange:T=>b(M=>({...M,notificationMethods:{...M.notificationMethods,sms:T}})),disabled:!0})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx(re,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),i.jsx(re,{onClick:x,disabled:u.creating||!N.name.trim(),children:u.creating?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),i.jsx(Or,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),i.jsx(Li,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),i.jsx(Cc,{className:"w-8 h-8 text-purple-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),i.jsx(ef,{className:"w-8 h-8 text-orange-600"})]})})})]}),i.jsxs(Vu,{defaultValue:"searches",className:"space-y-4",children:[i.jsxs(vc,{className:"grid w-full grid-cols-2",children:[i.jsxs(fn,{value:"searches",className:"flex items-center gap-2",children:[i.jsx(Or,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsxs(fn,{value:"matches",className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&i.jsx(ct,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),i.jsx(mn,{value:"searches",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(YE,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),i.jsx(Rt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),i.jsx(ve,{children:u.searches?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((T,M)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},M))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Or,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),i.jsxs(re,{onClick:()=>m(!0),children:[i.jsx(eu,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):i.jsx("div",{className:"space-y-4",children:n.map(T=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:T.name}),T.alertsEnabled?i.jsxs(ct,{className:"bg-green-100 text-green-800",children:[i.jsx(Li,{className:"w-3 h-3 mr-1"}),"Actif"]}):i.jsxs(ct,{variant:"secondary",children:[i.jsx(UR,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:$(T.filters)}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gi,{className:"w-3 h-3"}),"Créé ",I(T.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Cc,{className:"w-3 h-3"}),T.matchCount," correspondance",T.matchCount!==1?"s":""]}),T.lastNotified&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Li,{className:"w-3 h-3"}),"Dernière alerte ",I(T.lastNotified)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>R(T.id,!T.alertsEnabled),title:T.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:T.alertsEnabled?i.jsx(UR,{className:"w-4 h-4"}):i.jsx(IX,{className:"w-4 h-4"})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>{var M,D;v(T),b({name:T.name,query:T.filters.query||"",category:T.filters.category||"all",transactionType:T.filters.transactionType||"all",university:T.filters.university||"all",minPrice:((M=T.filters.minPrice)==null?void 0:M.toString())||"",maxPrice:((D=T.filters.maxPrice)==null?void 0:D.toString())||"",alertsEnabled:T.alertsEnabled,notificationFrequency:T.notificationFrequency,notificationMethods:T.notificationMethods}),m(!0)},title:"Modifier",children:i.jsx(MX,{className:"w-4 h-4"})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>C(T.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:i.jsx(jo,{className:"w-4 h-4"})})]})]}),T.alertsEnabled&&i.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),i.jsxs("span",{children:["Fréquence: ",T.notificationFrequency==="instant"?"Instantané":T.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[T.notificationMethods.email&&i.jsx(As,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),T.notificationMethods.push&&i.jsx(Li,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),T.notificationMethods.sms&&i.jsx(zR,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},T.id))})})]})}),i.jsx(mn,{value:"matches",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),i.jsx(Rt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),i.jsx(ve,{children:u.matches?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((T,M)=>i.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},M))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Cc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):i.jsx("div",{className:"space-y-4",children:s.map(T=>i.jsx("div",{className:`border rounded-lg p-4 transition-colors ${T.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[T.listingImage?i.jsx("img",{src:T.listingImage,alt:T.listingTitle,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:T.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2",children:[!T.seen&&i.jsx(ct,{className:"bg-blue-500",children:"Nouveau"}),i.jsx("span",{className:"font-semibold text-primary",children:T.listingPrice===0?"Gratuit":`${T.listingPrice}€`})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),"Trouvé ",I(T.matchedAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{variant:"outline",size:"sm",onClick:()=>V(T.id),disabled:T.seen,children:T.seen?i.jsxs(i.Fragment,{children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Vu"]}):i.jsxs(i.Fragment,{children:[i.jsx(jh,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),i.jsxs(re,{size:"sm",onClick:()=>window.open(`/listing/${T.listingId}`,"_blank"),children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},T.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(Or,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),i.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},my=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},bI=[{value:"all",label:"Toutes catégories",icon:Nn},{value:"electronics",label:"Électronique",icon:Mu},{value:"books",label:"Livres & Cours",icon:v3},{value:"furniture",label:"Mobilier",icon:Kx},{value:"clothing",label:"Vêtements",icon:JE},{value:"services",label:"Services",icon:$g},{value:"housing",label:"Logement",icon:Kx},{value:"jobs",label:"Jobs & Stages",icon:x3}],pfe=[{value:"all",label:"Tous types",icon:Nn},{value:"sale",label:"Vente",icon:Gx},{value:"donation",label:"Don",icon:Nh},{value:"exchange",label:"Échange",icon:Ao},{value:"service",label:"Service",icon:$g}],gfe=[{value:"recent",label:"Plus récents",icon:Jn},{value:"oldest",label:"Plus anciens",icon:gi},{value:"price-asc",label:"Prix croissant",icon:$R},{value:"price-desc",label:"Prix décroissant",icon:m3},{value:"title",label:"Titre A-Z",icon:$R},{value:"category",label:"Par catégorie",icon:Sp}],vfe=()=>{const{currentUser:t,userProfile:e}=bn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,d]=w.useState({favorites:!0,listings:!0,removing:!1}),[h,m]=w.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[p,v]=w.useState("recent"),[N,b]=w.useState("grid"),[j,_]=w.useState([]);w.useEffect(()=>{t&&x()},[t]),w.useEffect(()=>{n.length>0&&S()},[n]);const x=async()=>{if(t)try{d(ee=>({...ee,favorites:!0}));const O=Pn(Ut(Ue,"favorites"),lr("userId","==",t.uid),yi(100)),B=await Zn(O),Y=[];B.forEach(ee=>{const Z=ee.data();Y.push({id:ee.id,...Z,createdAt:my(Z.createdAt),updatedAt:my(Z.updatedAt)})}),Y.sort((ee,Z)=>Z.createdAt.getTime()-ee.createdAt.getTime()),r(Y),C(Y)}catch(O){console.error("Erreur lors du chargement des favoris:",O),je.error("Erreur lors du chargement des favoris")}finally{d(O=>({...O,favorites:!1}))}},S=async()=>{try{d(ee=>({...ee,listings:!0}));const O=n.map(async ee=>{try{const Z=await Ks(_t(Ue,"listings",ee.listingId));if(Z.exists()){const z=Z.data();return{id:Z.id,...z,createdAt:my(z.createdAt),updatedAt:my(z.updatedAt)}}return null}catch(Z){return console.error(`Erreur lors du chargement de l'annonce ${ee.listingId}:`,Z),null}}),Y=(await Promise.all(O)).filter(ee=>ee!==null);a(Y)}catch(O){console.error("Erreur lors du chargement des annonces favorites:",O)}finally{d(O=>({...O,listings:!1}))}},C=O=>{const B={},Y={};let ee=0,Z=0;const z=new Date;z.setDate(z.getDate()-7);let H=0;O.forEach(q=>{B[q.listingCategory]=(B[q.listingCategory]||0)+1,Y[q.listingTransactionType]=(Y[q.listingTransactionType]||0)+1,q.listingPrice>0&&(ee+=q.listingPrice,Z++),q.createdAt>=z&&H++}),l({totalFavorites:O.length,byCategory:B,byTransactionType:Y,averagePrice:Z>0?Math.round(ee/Z):0,recentlyAdded:H,availableCount:O.length,soldCount:0})},R=async O=>{try{await bh(_t(Ue,"favorites",O)),je.success("Favori supprimé"),x()}catch(B){console.error("Erreur lors de la suppression:",B),je.error("Erreur lors de la suppression")}},V=async()=>{if(j.length!==0&&window.confirm(`Supprimer ${j.length} favori(s) sélectionné(s) ?`)){d(O=>({...O,removing:!0}));try{const O=j.map(B=>bh(_t(Ue,"favorites",B)));await Promise.all(O),je.success(`${j.length} favori(s) supprimé(s)`),_([]),x()}catch(O){console.error("Erreur lors de la suppression multiple:",O),je.error("Erreur lors de la suppression")}finally{d(O=>({...O,removing:!1}))}}},k=()=>{const O={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(Z=>({title:Z.listingTitle,price:Z.listingPrice,category:Z.listingCategory,transactionType:Z.listingTransactionType,seller:Z.sellerName,university:Z.sellerUniversity,addedDate:Z.createdAt.toISOString(),notes:Z.notes||"",tags:Z.tags}))},B=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),Y=URL.createObjectURL(B),ee=document.createElement("a");ee.href=Y,ee.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,ee.click(),URL.revokeObjectURL(Y)},I=async()=>{const O=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:O,url:window.location.origin})}catch{navigator.clipboard.writeText(O),je.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(O),je.success("Lien copié dans le presse-papiers")},$=()=>{let O=n;if(h.search){const B=h.search.toLowerCase();O=O.filter(Y=>Y.listingTitle.toLowerCase().includes(B)||Y.sellerName.toLowerCase().includes(B)||Y.tags.some(ee=>ee.toLowerCase().includes(B)))}if(h.category!=="all"&&(O=O.filter(B=>B.listingCategory===h.category)),h.transactionType!=="all"&&(O=O.filter(B=>B.listingTransactionType===h.transactionType)),h.priceRange!=="all")switch(h.priceRange){case"free":O=O.filter(B=>B.listingPrice===0);break;case"under-50":O=O.filter(B=>B.listingPrice>0&&B.listingPrice<50);break;case"50-200":O=O.filter(B=>B.listingPrice>=50&&B.listingPrice<=200);break;case"over-200":O=O.filter(B=>B.listingPrice>200);break}switch(p){case"recent":O.sort((B,Y)=>Y.createdAt.getTime()-B.createdAt.getTime());break;case"oldest":O.sort((B,Y)=>B.createdAt.getTime()-Y.createdAt.getTime());break;case"price-asc":O.sort((B,Y)=>B.listingPrice-Y.listingPrice);break;case"price-desc":O.sort((B,Y)=>Y.listingPrice-B.listingPrice);break;case"title":O.sort((B,Y)=>B.listingTitle.localeCompare(Y.listingTitle));break;case"category":O.sort((B,Y)=>B.listingCategory.localeCompare(Y.listingCategory));break}return O},T=O=>{try{return cf(O,{addSuffix:!0,locale:Yr})}catch{return"Date inconnue"}},M=(O,B)=>B==="donation"?"Gratuit":B==="exchange"?"Échange":O===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(O),D=$();return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Qr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[i.jsx(gw,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(re,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),i.jsx(Qr,{className:"w-8 h-8 text-red-500"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),i.jsx(Fg,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),i.jsx(ef,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),i.jsx(Sp,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{placeholder:"Rechercher dans vos favoris...",value:h.search,onChange:O=>m(B=>({...B,search:O.target.value})),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(sn,{value:p,onValueChange:v,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{})}),i.jsx(Yt,{children:gfe.map(O=>i.jsx(Ze,{value:O.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(O.icon,{className:"w-4 h-4"}),O.label]})},O.value))})]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(re,{variant:N==="grid"?"default":"ghost",size:"icon",onClick:()=>b("grid"),className:"rounded-none",children:i.jsx(S3,{className:"w-4 h-4"})}),i.jsx(re,{variant:N==="list"?"default":"ghost",size:"icon",onClick:()=>b("list"),className:"rounded-none",children:i.jsx(C3,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(sn,{value:h.category,onValueChange:O=>m(B=>({...B,category:O})),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Catégorie"})}),i.jsx(Yt,{children:bI.map(O=>i.jsx(Ze,{value:O.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(O.icon,{className:"w-4 h-4"}),O.label]})},O.value))})]}),i.jsxs(sn,{value:h.transactionType,onValueChange:O=>m(B=>({...B,transactionType:O})),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Type"})}),i.jsx(Yt,{children:pfe.map(O=>i.jsx(Ze,{value:O.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(O.icon,{className:"w-4 h-4"}),O.label]})},O.value))})]}),i.jsxs(sn,{value:h.priceRange,onValueChange:O=>m(B=>({...B,priceRange:O})),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Prix"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Tous les prix"}),i.jsx(Ze,{value:"free",children:"Gratuit"}),i.jsx(Ze,{value:"under-50",children:"Moins de 50€"}),i.jsx(Ze,{value:"50-200",children:"50€ - 200€"}),i.jsx(Ze,{value:"over-200",children:"Plus de 200€"})]})]}),i.jsxs(sn,{value:h.availability,onValueChange:O=>m(B=>({...B,availability:O})),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Disponibilité"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Toutes"}),i.jsx(Ze,{value:"available",children:"Disponibles"}),i.jsx(Ze,{value:"sold",children:"Vendues"}),i.jsx(Ze,{value:"reserved",children:"Réservées"})]})]})]}),j.length>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[j.length," favori(s) sélectionné(s)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(re,{variant:"outline",size:"sm",onClick:()=>_([]),children:"Désélectionner"}),i.jsx(re,{variant:"destructive",size:"sm",onClick:V,disabled:u.removing,children:u.removing?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):i.jsxs(i.Fragment,{children:[i.jsx(jo,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:u.favorites?i.jsx("div",{className:`grid gap-6 ${N==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((O,B)=>i.jsxs(ge,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ve,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},B))}):D.length===0?i.jsx(ge,{children:i.jsx(ve,{className:"pt-12 pb-12 text-center",children:n.length===0?i.jsxs(i.Fragment,{children:[i.jsx(Qr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),i.jsx(re,{asChild:!0,children:i.jsxs("a",{href:"/listings",children:[i.jsx(Or,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(mw,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),i.jsx(re,{variant:"outline",onClick:()=>m({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[D.length," favori(s) trouvé(s)",D.length!==n.length&&` sur ${n.length}`]}),i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{j.length===D.length?_([]):_(D.map(O=>O.id))},children:j.length===D.length?"Désélectionner tout":"Sélectionner tout"})]}),N==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(O=>{const B=s.find(Y=>Y.id===O.listingId);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx("input",{type:"checkbox",checked:j.includes(O.id),onChange:Y=>{Y.target.checked?_(ee=>[...ee,O.id]):_(ee=>ee.filter(Z=>Z!==O.id))},className:"w-4 h-4 rounded border-border bg-background"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(re,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>R(O.id),children:i.jsx(jo,{className:"w-4 h-4"})})}),B?i.jsx(kp,{listing:B}):i.jsxs(ge,{children:[i.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Um,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),i.jsxs(ve,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:O.listingTitle}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:M(O.listingPrice,O.listingTransactionType)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",T(O.createdAt)]})]})]})]},O.id)})}):i.jsx("div",{className:"space-y-4",children:D.map(O=>{var Y;const B=s.find(ee=>ee.id===O.listingId);return i.jsx(ge,{className:"hover:shadow-md transition-shadow",children:i.jsx(ve,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",checked:j.includes(O.id),onChange:ee=>{ee.target.checked?_(Z=>[...Z,O.id]):_(Z=>Z.filter(z=>z!==O.id))},className:"w-4 h-4 rounded border-border"}),i.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:O.listingImage?i.jsx("img",{src:O.listingImage,alt:O.listingTitle,className:"w-full h-full object-cover rounded-lg"}):i.jsx(Nn,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold truncate",children:O.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("span",{className:"font-semibold text-primary",children:M(O.listingPrice,O.listingTransactionType)}),(B==null?void 0:B.status)&&i.jsx(ct,{variant:B.status==="active"?"default":"secondary",children:B.status==="active"?"Disponible":B.status==="sold"?"Vendu":"Réservé"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ms,{className:"w-3 h-3"}),O.sellerName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-3 h-3"}),O.sellerUniversity]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Sp,{className:"w-3 h-3"}),(Y=bI.find(ee=>ee.value===O.listingCategory))==null?void 0:Y.label]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",T(O.createdAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(re,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${O.listingId}`,"_blank"),children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Voir"]}),i.jsx(re,{variant:"ghost",size:"sm",onClick:()=>R(O.id),className:"text-destructive hover:text-destructive",children:i.jsx(jo,{className:"w-3 h-3"})})]})]})]})]})})},O.id)})})]})})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(Qr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),i.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},P_=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:s}=Uw(),a=N=>{switch(N){case"pending":return Jn;case"confirmed":return At;case"completed":return At;case"cancelled":return _h;case"disputed":return Un;default:return Jn}},o=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=N=>{switch(N){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return N}},u=N=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[N]||N,d=(N,b)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:b||"EUR"}).format(N),h=(N,b)=>{navigator.clipboard.writeText(N),je.success(`${b} copié dans le presse-papiers`)},m=async N=>{try{await r(t.id,N),n==null||n(N)}catch(b){console.error("Erreur lors de la mise à jour du statut:",b)}},p=a(t.status),v=s(t.paymentMethod,t);return i.jsxs(ge,{className:"w-full",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(Qn,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(rt,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),i.jsxs(Rt,{children:[d(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),i.jsxs(ct,{className:o(t.status),children:[i.jsx(p,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),i.jsx("p",{className:"font-medium",children:vr(t.createdAt,"PPP à HH:mm",{locale:Yr})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),i.jsx("p",{className:"font-medium",children:vr(t.updatedAt,"PPP à HH:mm",{locale:Yr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),i.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),i.jsx("p",{className:"font-medium",children:vr(t.meetingDateTime,"PPP à HH:mm",{locale:Yr})})]})]})]}),t.securityCode&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Bt,{className:"w-4 h-4"}),"Code de sécurité"]}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>h(t.securityCode,"Code de sécurité"),children:i.jsx(j3,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&v.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:i.jsx("ul",{className:"space-y-1 text-sm",children:v.map((N,b)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),i.jsx("span",{children:N})]},b))})})]}),t.notes&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notes"}),i.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs(re,{onClick:()=>m("confirmed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Accepter"]}),i.jsxs(re,{variant:"outline",onClick:()=>m("cancelled"),className:"flex-1",children:[i.jsx(_h,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&i.jsxs(re,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&i.jsxs(re,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&i.jsxs(re,{variant:"outline",onClick:()=>m("disputed"),className:"text-orange-600 hover:text-orange-700",children:[i.jsx(Un,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&i.jsxs(qt,{children:[i.jsx(Jn,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&i.jsxs(qt,{className:"border-green-200 bg-green-50",children:[i.jsx(At,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&i.jsxs(qt,{className:"border-green-200 bg-green-50",children:[i.jsx(At,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&i.jsxs(qt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},yfe=()=>{const{currentUser:t,userProfile:e}=bn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:s,initializePaymentMethods:a}=Uw(),[o,l]=w.useState(""),[u,d]=w.useState("all"),[h,m]=w.useState("all"),[p,v]=w.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});w.useEffect(()=>{a()},[a]),w.useEffect(()=>{t&&s(t.uid)},[t,s]),w.useEffect(()=>{N()},[n]);const N=()=>{const C={},R={};let V=0;n.forEach(k=>{C[k.paymentMethod]=(C[k.paymentMethod]||0)+1,R[k.status]=(R[k.status]||0)+1,V+=k.amount}),v({totalRequests:n.length,pendingRequests:R.pending||0,completedRequests:R.completed||0,totalAmount:V,averageAmount:n.length>0?V/n.length:0,byMethod:C,byStatus:R})},b=()=>n.filter(C=>{const R=!o||C.listingId.toLowerCase().includes(o.toLowerCase())||C.id.toLowerCase().includes(o.toLowerCase()),V=u==="all"||C.status===u,k=h==="all"||C.paymentMethod===h;return R&&V&&k}),j=()=>b().filter(C=>C.buyerId===(t==null?void 0:t.uid)),_=()=>b().filter(C=>C.sellerId===(t==null?void 0:t.uid)),x=C=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(C),S=()=>{const C={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:p,payments:n.map(I=>({id:I.id,amount:I.amount,currency:I.currency,method:I.paymentMethod,status:I.status,role:I.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:I.createdAt.toISOString(),updatedAt:I.updatedAt.toISOString()}))},R=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),V=URL.createObjectURL(R),k=document.createElement("a");k.href=V,k.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,k.click(),URL.revokeObjectURL(V)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(zX,{className:"w-8 h-8 text-primary"}),"Mes Paiements",p.totalRequests>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),i.jsxs(re,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.totalRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),i.jsx(Qn,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.pendingRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),i.jsx(Jn,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.completedRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),i.jsx(At,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:x(p.totalAmount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),i.jsx(Fg,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:C=>l(C.target.value),className:"pl-10"})]}),i.jsxs(sn,{value:u,onValueChange:d,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{placeholder:"Statut"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Tous les statuts"}),i.jsx(Ze,{value:"pending",children:"En attente"}),i.jsx(Ze,{value:"confirmed",children:"Confirmé"}),i.jsx(Ze,{value:"completed",children:"Terminé"}),i.jsx(Ze,{value:"cancelled",children:"Annulé"}),i.jsx(Ze,{value:"disputed",children:"Litige"})]})]}),i.jsxs(sn,{value:h,onValueChange:m,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{placeholder:"Méthode"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Toutes les méthodes"}),i.jsx(Ze,{value:"cash",children:"Espèces"}),i.jsx(Ze,{value:"transfer",children:"Virement"}),i.jsx(Ze,{value:"paypal",children:"PayPal"}),i.jsx(Ze,{value:"lydia",children:"Lydia"})]})]})]})})}),i.jsxs(Vu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(vc,{className:"grid w-full grid-cols-3",children:[i.jsxs(fn,{value:"all",className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Toutes",p.totalRequests>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsxs(fn,{value:"purchases",className:"flex items-center gap-2",children:[i.jsx(r_,{className:"w-4 h-4"}),"Mes achats",j().length>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:j().length})]}),i.jsxs(fn,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(n_,{className:"w-4 h-4"}),"Mes ventes",_().length>0&&i.jsx(ct,{variant:"secondary\\",className:"ml-1",children:_().length})]})]}),i.jsx(mn,{value:"all",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(_3,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),i.jsx(Rt,{children:"Historique complet de vos transactions"})]}),i.jsx(ve,{children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((C,R)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},R))}):b().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Qn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),i.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):i.jsx("div",{className:"space-y-4",children:b().map(C=>i.jsx(P_,{request:C,userRole:C.buyerId===t.uid?"buyer":"seller"},C.id))})})]})}),i.jsx(mn,{value:"purchases",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(r_,{className:"w-5 h-5"}),"Mes Achats"]}),i.jsx(Rt,{children:"Demandes de paiement que vous avez initiées"})]}),i.jsx(ve,{children:j().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(r_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):i.jsx("div",{className:"space-y-4",children:j().map(C=>i.jsx(P_,{request:C,userRole:"buyer"},C.id))})})]})}),i.jsx(mn,{value:"sales",className:"space-y-4",children:i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(n_,{className:"w-5 h-5"}),"Mes Ventes"]}),i.jsx(Rt,{children:"Demandes de paiement reçues pour vos annonces"})]}),i.jsx(ve,{children:_().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(n_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):i.jsx("div",{className:"space-y-4",children:_().map(C=>i.jsx(P_,{request:C,userRole:"seller"},C.id))})})]})})]}),i.jsxs(qt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Bt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(Qn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var Qw="Collapsible",[xfe,t8]=$r(Qw),[wfe,n2]=xfe(Qw),n8=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[u,d]=Js({prop:r,defaultProp:s??!1,onChange:o,caller:Qw});return i.jsx(wfe,{scope:n,disabled:a,contentId:Zs(),open:u,onOpenToggle:w.useCallback(()=>d(h=>!h),[d]),children:i.jsx(Qe.div,{"data-state":s2(u),"data-disabled":a?"":void 0,...l,ref:e})})});n8.displayName=Qw;var r8="CollapsibleTrigger",s8=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=n2(r8,n);return i.jsx(Qe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":s2(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:$e(t.onClick,s.onOpenToggle)})});s8.displayName=r8;var r2="CollapsibleContent",i8=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=n2(r2,t.__scopeCollapsible);return i.jsx(Vr,{present:n||s.open,children:({present:a})=>i.jsx(bfe,{...r,ref:e,present:a})})});i8.displayName=r2;var bfe=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=n2(r2,n),[l,u]=w.useState(r),d=w.useRef(null),h=pt(e,d),m=w.useRef(0),p=m.current,v=w.useRef(0),N=v.current,b=o.open||l,j=w.useRef(b),_=w.useRef(void 0);return w.useEffect(()=>{const x=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(x)},[]),er(()=>{const x=d.current;if(x){_.current=_.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const S=x.getBoundingClientRect();m.current=S.height,v.current=S.width,j.current||(x.style.transitionDuration=_.current.transitionDuration,x.style.animationName=_.current.animationName),u(r)}},[o.open,r]),i.jsx(Qe.div,{"data-state":s2(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:b&&s})});function s2(t){return t?"open":"closed"}var _fe=n8,jfe=s8,Nfe=i8,ra="Accordion",Sfe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[i2,Efe,Pfe]=Vg(ra),[Yw,aje]=$r(ra,[Pfe,t8]),a2=t8(),a8=oe.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,a=r;return i.jsx(i2.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(kfe,{...a,ref:e}):i.jsx(Rfe,{...s,ref:e})})});a8.displayName=ra;var[o8,Cfe]=Yw(ra),[l8,Tfe]=Yw(ra,{collapsible:!1}),Rfe=oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,u]=Js({prop:n,defaultProp:r??"",onChange:s,caller:ra});return i.jsx(o8,{scope:t.__scopeAccordion,value:oe.useMemo(()=>l?[l]:[],[l]),onItemOpen:u,onItemClose:oe.useCallback(()=>a&&u(""),[a,u]),children:i.jsx(l8,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(c8,{...o,ref:e})})})}),kfe=oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=t,[o,l]=Js({prop:n,defaultProp:r??[],onChange:s,caller:ra}),u=oe.useCallback(h=>l((m=[])=>[...m,h]),[l]),d=oe.useCallback(h=>l((m=[])=>m.filter(p=>p!==h)),[l]);return i.jsx(o8,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:d,children:i.jsx(l8,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(c8,{...a,ref:e})})})}),[Ife,Jw]=Yw(ra),c8=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:a="vertical",...o}=t,l=oe.useRef(null),u=pt(l,e),d=Efe(n),m=Du(s)==="ltr",p=$e(t.onKeyDown,v=>{var I;if(!Sfe.includes(v.key))return;const N=v.target,b=d().filter($=>{var T;return!((T=$.ref.current)!=null&&T.disabled)}),j=b.findIndex($=>$.ref.current===N),_=b.length;if(j===-1)return;v.preventDefault();let x=j;const S=0,C=_-1,R=()=>{x=j+1,x>C&&(x=S)},V=()=>{x=j-1,x<S&&(x=C)};switch(v.key){case"Home":x=S;break;case"End":x=C;break;case"ArrowRight":a==="horizontal"&&(m?R():V());break;case"ArrowDown":a==="vertical"&&R();break;case"ArrowLeft":a==="horizontal"&&(m?V():R());break;case"ArrowUp":a==="vertical"&&V();break}const k=x%_;(I=b[k].ref.current)==null||I.focus()});return i.jsx(Ife,{scope:n,disabled:r,direction:s,orientation:a,children:i.jsx(i2.Slot,{scope:n,children:i.jsx(Qe.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:p})})})}),x0="AccordionItem",[Afe,o2]=Yw(x0),u8=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,a=Jw(x0,n),o=Cfe(x0,n),l=a2(n),u=Zs(),d=r&&o.value.includes(r)||!1,h=a.disabled||t.disabled;return i.jsx(Afe,{scope:n,open:d,disabled:h,triggerId:u,children:i.jsx(_fe,{"data-orientation":a.orientation,"data-state":g8(d),...l,...s,ref:e,disabled:h,open:d,onOpenChange:m=>{m?o.onItemOpen(r):o.onItemClose(r)}})})});u8.displayName=x0;var d8="AccordionHeader",h8=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Jw(ra,n),a=o2(d8,n);return i.jsx(Qe.h3,{"data-orientation":s.orientation,"data-state":g8(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});h8.displayName=d8;var Gj="AccordionTrigger",f8=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Jw(ra,n),a=o2(Gj,n),o=Tfe(Gj,n),l=a2(n);return i.jsx(i2.ItemSlot,{scope:n,children:i.jsx(jfe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...r,ref:e})})});f8.displayName=Gj;var m8="AccordionContent",p8=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Jw(ra,n),a=o2(m8,n),o=a2(n);return i.jsx(Nfe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});p8.displayName=m8;function g8(t){return t?"open":"closed"}var Ofe=a8,Mfe=u8,Dfe=h8,v8=f8,y8=p8;const Lfe=Ofe,x8=w.forwardRef(({className:t,...e},n)=>i.jsx(Mfe,{ref:n,className:ot("border-b",t),...e}));x8.displayName="AccordionItem";const w8=w.forwardRef(({className:t,children:e,...n},r)=>i.jsx(Dfe,{className:"flex",children:i.jsxs(v8,{ref:r,className:ot("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(g5,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));w8.displayName=v8.displayName;const b8=w.forwardRef(({className:t,children:e,...n},r)=>i.jsx(y8,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:ot("pb-4 pt-0",t),children:e})}));b8.displayName=y8.displayName;const _I=[{category:"Compte et Inscription",icon:$g,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:Qn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Bt,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Cn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Qr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:pw,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Ffe=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:Cn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:As,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:Xh,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:y3,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],$fe=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:Tl,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Bt,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:ef,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Qr,duration:"4 min",type:"Infographie"}],Vfe=()=>{const{currentUser:t,userProfile:e}=bn(),[n,r]=w.useState(""),[s,a]=w.useState("all"),[o,l]=w.useState({subject:"",category:"",message:"",priority:"normal"}),[u,d]=w.useState(!1),h=_I.filter(p=>{if(s!=="all"&&p.category!==s)return!1;if(n){const v=n.toLowerCase();return p.questions.some(N=>N.question.toLowerCase().includes(v)||N.answer.toLowerCase().includes(v))}return!0}),m=async p=>{if(p.preventDefault(),!o.subject||!o.message){je.error("Veuillez remplir tous les champs obligatoires");return}d(!0);try{await new Promise(v=>setTimeout(v,1e3)),je.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{je.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{d(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(qx,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx(Or,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),i.jsx(Ke,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:p=>r(p.target.value),className:"pl-12 h-14 text-lg"})]})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Ffe.map((p,v)=>i.jsx(ge,{className:`transition-all hover:shadow-lg ${p.available?"hover:-translate-y-1":"opacity-60"}`,children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${p.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i.jsx(p.icon,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:p.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:p.hours}),i.jsx(re,{variant:p.available?"default":"secondary",size:"sm",disabled:!p.available,className:"w-full",children:p.action})]})},v))}),i.jsxs(Vu,{defaultValue:"faq",className:"space-y-6",children:[i.jsxs(vc,{className:"grid w-full grid-cols-3",children:[i.jsxs(fn,{value:"faq",className:"flex items-center gap-2",children:[i.jsx(qx,{className:"w-4 h-4"}),"FAQ"]}),i.jsxs(fn,{value:"guides",className:"flex items-center gap-2",children:[i.jsx(y3,{className:"w-4 h-4"}),"Guides"]}),i.jsxs(fn,{value:"contact",className:"flex items-center gap-2",children:[i.jsx(Cn,{className:"w-4 h-4"}),"Contact"]})]}),i.jsxs(mn,{value:"faq",className:"space-y-6",children:[i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(re,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),_I.map(p=>i.jsxs(re,{variant:s===p.category?"default":"outline",size:"sm",onClick:()=>a(p.category),className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-4 h-4"}),p.category]},p.category))]})})}),h.length===0?i.jsx(ge,{children:i.jsxs(ve,{className:"pt-12 pb-12 text-center",children:[i.jsx(Or,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),i.jsx(re,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):i.jsx("div",{className:"space-y-6",children:h.map((p,v)=>i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-5 h-5"}),p.category]})}),i.jsx(ve,{children:i.jsx(Lfe,{type:"single",collapsible:!0,className:"w-full",children:p.questions.map((N,b)=>i.jsxs(x8,{value:`${v}-${b}`,children:[i.jsx(w8,{className:"text-left",children:N.question}),i.jsx(b8,{className:"text-muted-foreground leading-relaxed",children:N.answer})]},b))})})]},v))})]}),i.jsxs(mn,{value:"guides",className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(P3,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),i.jsx(Rt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),i.jsx(ve,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$fe.map((p,v)=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(p.icon,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold",children:p.title}),i.jsx(ct,{variant:"outline",className:"text-xs",children:p.type})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),p.duration]}),i.jsxs(re,{size:"sm",variant:"outline",children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},v))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(k3,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),i.jsxs(re,{variant:"outline",size:"sm",children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(xi,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),i.jsxs(re,{variant:"outline",size:"sm",children:[i.jsx(xi,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx($g,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),i.jsxs(re,{variant:"outline",size:"sm",children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),i.jsx(mn,{value:"contact",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Sh,{className:"w-5 h-5"}),"Contactez notre équipe"]}),i.jsx(Rt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),i.jsx(ve,{children:i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"subject",children:"Sujet *"}),i.jsx(Ke,{id:"subject",value:o.subject,onChange:p=>l(v=>({...v,subject:p.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"category",children:"Catégorie"}),i.jsxs(sn,{value:o.category,onValueChange:p=>l(v=>({...v,category:p})),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{placeholder:"Sélectionnez une catégorie"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"account",children:"Compte et profil"}),i.jsx(Ze,{value:"listing",children:"Annonces"}),i.jsx(Ze,{value:"payment",children:"Paiements"}),i.jsx(Ze,{value:"security",children:"Sécurité"}),i.jsx(Ze,{value:"technical",children:"Problème technique"}),i.jsx(Ze,{value:"other",children:"Autre"})]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"priority",children:"Priorité"}),i.jsxs(sn,{value:o.priority,onValueChange:p=>l(v=>({...v,priority:p})),children:[i.jsx(Qt,{className:"mt-1",children:i.jsx(an,{})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"low",children:"Basse - Question générale"}),i.jsx(Ze,{value:"normal",children:"Normale - Besoin d'aide"}),i.jsx(Ze,{value:"high",children:"Haute - Problème bloquant"}),i.jsx(Ze,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"message",children:"Message *"}),i.jsx(bi,{id:"message",value:o.message,onChange:p=>l(v=>({...v,message:p.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&i.jsxs(qt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Nous vous répondrons à l'adresse ",i.jsx("strong",{children:t.email})]})]}),i.jsx(re,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Sh,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Jn,{className:"w-5 h-5"}),"Temps de réponse"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Questions générales"}),i.jsx(ct,{variant:"secondary",children:"24h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),i.jsx(ct,{variant:"secondary",children:"12h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),i.jsx(ct,{className:"bg-red-500",children:"2h"})]})]})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(N3,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(As,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Cn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Chat en direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mu,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Application mobile"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(ef,{className:"w-5 h-5"}),"État du système"]})}),i.jsxs(ve,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Plateforme web"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Messagerie"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Notifications email"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),i.jsxs(re,{variant:"outline",size:"sm",className:"w-full mt-3",children:[i.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},zfe=[{category:"Rencontres et Échanges",icon:Zr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:At},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:_h},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:At},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:At}]},{category:"Vérification d'Identité",icon:R3,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:At},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:At},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Un},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:At}]},{category:"Paiements Sécurisés",icon:Qn,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:At},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:_h},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:At},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Un}]},{category:"Communication",icon:Cn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:At},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:At},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Un},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:At}]}],Ufe=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Un},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Qn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Zr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:Xc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:$g},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:Cn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Jn},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:yu}],Bfe=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:Xh,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:Hc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:Cn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Bt,color:"text-green-600"}],Wfe=()=>i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:i.jsx(Bt,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),i.jsxs(qt,{className:"border-green-200 bg-green-50",children:[i.jsx(Bt,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),i.jsxs(re,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[i.jsx(xi,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Bt,{className:"w-6 h-6 text-green-600"})}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(R3,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Jn,{className:"w-6 h-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Tl,{className:"w-6 h-6 text-orange-600"})}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),zfe.map((t,e)=>i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),i.jsx(ve,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),i.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),i.jsx(Rt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),i.jsx(ve,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ufe.map((t,e)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),i.jsx(ct,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),i.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Xh,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),i.jsx(Rt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),i.jsx(ve,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Bfe.map((t,e)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold mb-1",children:t.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),i.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(_X,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),i.jsxs(re,{variant:"outline",className:"w-full",children:[i.jsx(xi,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(qx,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),i.jsx(re,{variant:"outline",className:"w-full",asChild:!0,children:i.jsxs(ze,{to:"/help",children:[i.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6 text-center",children:[i.jsx(Cn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),i.jsxs(re,{variant:"outline",className:"w-full",children:[i.jsx(Hc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),i.jsxs(qt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(P3,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Hfe(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var l2="ScrollArea",[_8,oje]=$r(l2),[qfe,Ei]=_8(l2),j8=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,u]=w.useState(null),[d,h]=w.useState(null),[m,p]=w.useState(null),[v,N]=w.useState(null),[b,j]=w.useState(null),[_,x]=w.useState(0),[S,C]=w.useState(0),[R,V]=w.useState(!1),[k,I]=w.useState(!1),$=pt(e,M=>u(M)),T=Du(s);return i.jsx(qfe,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:m,onContentChange:p,scrollbarX:v,onScrollbarXChange:N,scrollbarXEnabled:R,onScrollbarXEnabledChange:V,scrollbarY:b,onScrollbarYChange:j,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:x,onCornerHeightChange:C,children:i.jsx(Qe.div,{dir:T,...o,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});j8.displayName=l2;var N8="ScrollAreaViewport",S8=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=Ei(N8,n),l=w.useRef(null),u=pt(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Qe.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});S8.displayName=N8;var Ga="ScrollAreaScrollbar",c2=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ei(Ga,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return w.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Gfe,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Kfe,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(E8,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(u2,{...r,ref:e}):null});c2.displayName=Ga;var Gfe=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ei(Ga,t.__scopeScrollArea),[a,o]=w.useState(!1);return w.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),o(!0)},h=()=>{u=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Vr,{present:n||a,children:i.jsx(E8,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Kfe=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ei(Ga,t.__scopeScrollArea),a=t.orientation==="horizontal",o=eb(()=>u("SCROLL_END"),100),[l,u]=Hfe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),w.useEffect(()=>{const d=s.viewport,h=a?"scrollLeft":"scrollTop";if(d){let m=d[h];const p=()=>{const v=d[h];m!==v&&(u("SCROLL"),o()),m=v};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,a,u,o]),i.jsx(Vr,{present:n||l!=="hidden",children:i.jsx(u2,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:$e(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:$e(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),E8=w.forwardRef((t,e)=>{const n=Ei(Ga,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=w.useState(!1),l=t.orientation==="horizontal",u=eb(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return Fh(n.viewport,u),Fh(n.content,u),i.jsx(Vr,{present:r||a,children:i.jsx(u2,{"data-state":a?"visible":"hidden",...s,ref:e})})}),u2=w.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Ei(Ga,t.__scopeScrollArea),a=w.useRef(null),o=w.useRef(0),[l,u]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=k8(l.viewport,l.content),h={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,v){return eme(p,o.current,l,v)}return n==="horizontal"?i.jsx(Zfe,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,v=jI(p,l,s.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?i.jsx(Qfe,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,v=jI(p,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Zfe=w.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Ei(Ga,t.__scopeScrollArea),[o,l]=w.useState(),u=w.useRef(null),d=pt(e,u,a.onScrollbarXChange);return w.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(C8,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xw(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),A8(p,m)&&h.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:b0(o.paddingLeft),paddingEnd:b0(o.paddingRight)}})}})}),Qfe=w.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Ei(Ga,t.__scopeScrollArea),[o,l]=w.useState(),u=w.useRef(null),d=pt(e,u,a.onScrollbarYChange);return w.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(C8,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xw(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(a.viewport){const p=a.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),A8(p,m)&&h.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:b0(o.paddingTop),paddingEnd:b0(o.paddingBottom)}})}})}),[Yfe,P8]=_8(Ga),C8=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:h,onResize:m,...p}=t,v=Ei(Ga,n),[N,b]=w.useState(null),j=pt(e,$=>b($)),_=w.useRef(null),x=w.useRef(""),S=v.viewport,C=r.content-r.viewport,R=Er(h),V=Er(u),k=eb(m,10);function I($){if(_.current){const T=$.clientX-_.current.left,M=$.clientY-_.current.top;d({x:T,y:M})}}return w.useEffect(()=>{const $=T=>{const M=T.target;(N==null?void 0:N.contains(M))&&R(T,C)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[S,N,C,R]),w.useEffect(V,[r,V]),Fh(N,k),Fh(v.content,k),i.jsx(Yfe,{scope:n,scrollbar:N,hasThumb:s,onThumbChange:Er(a),onThumbPointerUp:Er(o),onThumbPositionChange:V,onThumbPointerDown:Er(l),children:i.jsx(Qe.div,{...p,ref:j,style:{position:"absolute",...p.style},onPointerDown:$e(t.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),_.current=N.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),I($))}),onPointerMove:$e(t.onPointerMove,I),onPointerUp:$e(t.onPointerUp,$=>{const T=$.target;T.hasPointerCapture($.pointerId)&&T.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=x.current,v.viewport&&(v.viewport.style.scrollBehavior=""),_.current=null})})})}),w0="ScrollAreaThumb",T8=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=P8(w0,t.__scopeScrollArea);return i.jsx(Vr,{present:n||s.hasThumb,children:i.jsx(Jfe,{ref:e,...r})})}),Jfe=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=Ei(w0,n),o=P8(w0,n),{onThumbPositionChange:l}=o,u=pt(e,m=>o.onThumbChange(m)),d=w.useRef(void 0),h=eb(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(h(),!d.current){const v=tme(m,l);d.current=v,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,h,l]),i.jsx(Qe.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:$e(t.onPointerDownCapture,m=>{const v=m.target.getBoundingClientRect(),N=m.clientX-v.left,b=m.clientY-v.top;o.onThumbPointerDown({x:N,y:b})}),onPointerUp:$e(t.onPointerUp,o.onThumbPointerUp)})});T8.displayName=w0;var d2="ScrollAreaCorner",R8=w.forwardRef((t,e)=>{const n=Ei(d2,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Xfe,{...t,ref:e}):null});R8.displayName=d2;var Xfe=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Ei(d2,n),[a,o]=w.useState(0),[l,u]=w.useState(0),d=!!(a&&l);return Fh(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),u(h)}),Fh(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),d?i.jsx(Qe.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function b0(t){return t?parseInt(t,10):0}function k8(t,e){const n=t/e;return isNaN(n)?0:n}function Xw(t){const e=k8(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function eme(t,e,n,r="ltr"){const s=Xw(n),a=s/2,o=e||a,l=s-o,u=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return I8([u,d],m)(t)}function jI(t,e,n="ltr"){const r=Xw(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,u=n==="ltr"?[0,o]:[o*-1,0],d=Ip(t,u);return I8([0,o],[0,l])(d)}function I8(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function A8(t,e){return t>0&&t<e}var tme=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function eb(t,e){const n=Er(t),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Fh(t,e){const n=Er(e);er(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var O8=j8,nme=S8,rme=R8;const h2=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(O8,{ref:r,className:ot("relative overflow-hidden",t),...n,children:[i.jsx(nme,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(M8,{}),i.jsx(rme,{})]}));h2.displayName=O8.displayName;const M8=w.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(c2,{ref:r,orientation:e,className:ot("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(T8,{className:"relative flex-1 rounded-full bg-border"})}));M8.displayName=c2.displayName;const NI=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:s,currentUser:a,onSelectConversation:o})=>{const l=t.filter(h=>{const m=h.participants.find(v=>v!==(a==null?void 0:a.uid)),p=m?h.participantDetails[m]:null;return(p==null?void 0:p.name.toLowerCase().includes(n.toLowerCase()))||h.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=h=>h===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(h),d=h=>{const m=h.participants.find(p=>p!==(a==null?void 0:a.uid));return m?h.participantDetails[m]:null};return i.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cn,{className:"w-5 h-5 text-primary"}),i.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:i.jsx(mw,{className:"w-4 h-4"})}),i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:i.jsx(m3,{className:"w-4 h-4"})}),i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:i.jsx(pw,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Or,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{placeholder:"Rechercher conversations...",value:n,onChange:h=>r(h.target.value),className:"pl-9 h-9 text-sm"})]})]}),i.jsx(h2,{className:"flex-1",children:e?i.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((h,m)=>i.jsx("div",{className:"animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-2 p-2",children:[i.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.jsx(ms,{className:"w-5 h-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},m))}):l.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(Cn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Or,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):i.jsxs(i.Fragment,{children:[i.jsx(As,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):i.jsx("div",{className:"p-1",children:l.map(h=>{var N,b;const m=d(h),p=h.unreadCount[a==null?void 0:a.uid]||0,v=(s==null?void 0:s.id)===h.id;return i.jsx("div",{onClick:()=>o(h),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${v?"bg-accent":""}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(Do,{className:"w-10 h-10",children:[i.jsx(Lo,{src:m==null?void 0:m.avatar}),i.jsx(Fo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((b=(N=m==null?void 0:m.name)==null?void 0:N[0])==null?void 0:b.toUpperCase())||i.jsx(ms,{className:"w-4 h-4"})})]}),(m==null?void 0:m.verified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Bt,{className:"w-1.5 h-1.5 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(ms,{className:"w-3 h-3 text-muted-foreground"}),(m==null?void 0:m.name)||"Utilisateur"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[h.lastMessage&&i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),cf(h.lastMessage.sentAt,{addSuffix:!0,locale:Yr})]}),p>0&&i.jsx(ct,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[h.listingImage?i.jsx("img",{src:h.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):i.jsx(E3,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:h.listingTitle}),i.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[h.listingPrice===0?i.jsx(Qr,{className:"w-3 h-3 text-green-600"}):i.jsx("span",{children:"€"}),u(h.listingPrice)]})]}),h.lastMessage&&i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[h.lastMessage.senderId===(a==null?void 0:a.uid)?i.jsx(Sh,{className:"w-3 h-3"}):i.jsx(Cn,{className:"w-3 h-3"}),h.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",h.lastMessage.text]})]})]})},h.id)})})})]})},SI=({conversation:t,messages:e,loading:n,currentUser:r,onBack:s})=>{var q,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:u,deleteConversation:d}=Aw(),[h,m]=w.useState(""),[p,v]=w.useState(40),[N,b]=w.useState(!1),[j,_]=w.useState(!1),[x,S]=w.useState(""),[C,R]=w.useState(""),V=w.useRef(null),k=w.useRef(null),I=()=>{var me;(me=k.current)==null||me.scrollIntoView({behavior:"smooth"})},$=w.useCallback(()=>{const me=V.current;if(!me)return;me.style.height="auto";const Ee=Math.max(40,Math.min(me.scrollHeight,120));v(Ee)},[]),T=w.useCallback(me=>{const Ee=me.target.value;m(Ee),b(!!Ee.trim()),setTimeout($,0)},[$]),M=async()=>{if(!h.trim()||!t||!r)return;const me=h.trim();m(""),b(!1),v(40),await a(t.id,me,r.uid,r.displayName||"Utilisateur",r.photoURL)},D=me=>{me.key==="Enter"&&!me.shiftKey&&(me.preventDefault(),M())},O=async()=>{!t||!r||await l(t.id,r.uid)},B=async()=>{if(!t||!r||!x.trim())return;const me=t.participants.find(Ee=>Ee!==r.uid);me&&(await u(t.id,r.uid,me,x,C),_(!1),S(""),R(""))},Y=async()=>{!t||!r||(await d(t.id,r.uid),s())};if(w.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),w.useEffect(I,[e]),!t)return i.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Cn,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),i.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Or,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const ee=t.participants.find(me=>me!==(r==null?void 0:r.uid)),Z=ee?t.participantDetails[ee]:null,z=me=>{const Ee=new Date,Fe=new Date(me);return Fe.toDateString()===Ee.toDateString()?Fe.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((Ee.getTime()-Fe.getTime())/(1e3*60*60*24))<7?Fe.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Fe.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},H=me=>me.senderId!==(r==null?void 0:r.uid)?null:me.seen?i.jsx(pX,{className:"w-3 h-3 text-blue-500"}):i.jsx(gX,{className:"w-3 h-3 text-muted-foreground"});return i.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden h-8 w-8",children:i.jsx(Jc,{className:"w-4 h-4"})}),i.jsxs(Do,{className:"w-8 h-8",children:[i.jsx(Lo,{src:Z==null?void 0:Z.avatar}),i.jsx(Fo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(q=Z==null?void 0:Z.name)==null?void 0:q[0])==null?void 0:X.toUpperCase())||i.jsx(ms,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[i.jsx(ms,{className:"w-3 h-3 text-muted-foreground"}),(Z==null?void 0:Z.name)||"Utilisateur"]}),(Z==null?void 0:Z.verified)&&i.jsx(Bt,{className:"w-3 h-3 text-green-600"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[i.jsx(Zr,{className:"w-3 h-3"}),Z==null?void 0:Z.university]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:i.jsx(Xh,{className:"w-4 h-4"})}),i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:i.jsx(k3,{className:"w-4 h-4"})}),i.jsxs(Sj,{children:[i.jsx(Ej,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(yX,{className:"w-4 h-4"})})}),i.jsxs(t0,{align:"end",children:[i.jsx(rn,{asChild:!0,children:i.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[i.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),i.jsxs(rn,{children:[i.jsx(Tl,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),i.jsxs(rn,{children:[i.jsx(dX,{className:"w-4 h-4 mr-2"}),"Archiver"]}),i.jsx(pa,{}),i.jsxs(rn,{onClick:()=>_(!0),children:[i.jsx(Hc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),i.jsxs(rn,{onClick:O,children:[i.jsx(mX,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),i.jsxs(rn,{onClick:Y,className:"text-destructive",children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),i.jsx(ge,{className:"mt-2",children:i.jsx(ve,{className:"p-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?i.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:i.jsx(E3,{className:"w-4 h-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(YE,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),i.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?i.jsxs(i.Fragment,{children:[i.jsx(Qr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),i.jsx(re,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:i.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[i.jsx(Ps,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(h2,{className:"flex-1 p-3",children:i.jsxs("div",{className:"space-y-3",children:[n?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((me,Ee)=>i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:`flex ${Ee%2===0?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),i.jsx("div",{className:"h-8 bg-muted rounded"})]})})},Ee))}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Cn,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Sh,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(me=>{const Ee=me.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${Ee?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${Ee?"order-2":"order-1"}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-2 ${Ee?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:me.text})}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${Ee?"justify-end":"justify-start"}`,children:[i.jsx(Jn,{className:"w-3 h-3"}),i.jsx("span",{children:z(me.sentAt)}),H(me)]})]})},me.id)}),i.jsx("div",{ref:k})]})}),i.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[i.jsx(bi,{ref:V,value:h,placeholder:"Tapez votre message...",onChange:T,onKeyDown:D,rows:1,style:{height:p,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),i.jsx(re,{onClick:M,disabled:!h.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:i.jsx(Sh,{className:"h-3.5 w-3.5"})})]}),N&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[i.jsx(Cn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),i.jsx(Da,{open:j,onOpenChange:_,children:i.jsxs(qi,{children:[i.jsx(La,{children:i.jsxs(Gi,{className:"flex items-center gap-2",children:[i.jsx(Hc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Motif du signalement"]}),i.jsxs(sn,{value:x,onValueChange:S,children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Sélectionnez un motif"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"spam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"Spam"]})}),i.jsx(Ze,{value:"harassment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Harcèlement"]})}),i.jsx(Ze,{value:"inappropriate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hc,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),i.jsx(Ze,{value:"scam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Arnaque"]})}),i.jsx(Ze,{value:"other",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ec,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"report-description",className:"flex items-center gap-2",children:[i.jsx(Cn,{className:"w-4 h-4"}),"Description (optionnel)"]}),i.jsx(bi,{id:"report-description",value:C,onChange:me=>R(me.target.value),placeholder:"Décrivez le problème...",rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(re,{variant:"outline",onClick:()=>_(!1),children:"Annuler"}),i.jsxs(re,{onClick:B,disabled:!x,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(Hc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},sme=()=>{const{currentUser:t,userProfile:e}=bn(),{conversations:n,currentConversation:r,messages:s,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:u,cleanup:d}=Aw(),[h,m]=w.useState(""),[p,v]=w.useState(!1);w.useEffect(()=>(t&&o(t.uid),()=>{d()}),[t,o,d]),w.useEffect(()=>{r&&l(r.id)},[r,l]);const N=j=>{u(j),v(!0)},b=()=>{v(!1),u(null)};return t?i.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[i.jsx("div",{className:"lg:hidden w-full h-full",children:p?i.jsx(SI,{conversation:r,messages:s,loading:a,currentUser:t,onBack:b}):i.jsx(NI,{conversations:n,loading:a,searchQuery:h,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N})}),i.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[i.jsx(NI,{conversations:n,loading:a,searchQuery:h,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N}),i.jsx(SI,{conversation:r,messages:s,loading:a,currentUser:t,onBack:b})]})]}):i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Cn,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),i.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[i.jsx(ms,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),i.jsx(re,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:i.jsxs(ze,{to:"/auth",className:"flex items-center gap-2",children:[i.jsx(ms,{className:"w-4 h-4"}),"Se connecter"]})})]})};var Jy={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*t)*Math.sin((t*r-l)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?a/2*(t*t*(((s*=1.525)+1)*t-s))+e:a/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,a;return a=Jy.easeOutBounce(r-t,0,s,r),s-a+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,a;return t<r/2?(a=Jy.easeInBounce(t*2,0,s,r),a*.5+e):(a=Jy.easeOutBounce(t*2-r,0,s,r),a*.5+s*.5+e)}},ime=Jy;function ame(t){return t*Math.PI/180}function zs(t,e){return t+Math.random()*(e-t)}function ome(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Hm;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Hm||(Hm={}));var pl;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(pl||(pl={}));const lme=1e3/60;class cme{constructor(e,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=zs(5,20),this.h=zs(5,20),this.radius=zs(5,10),this.vx=typeof o=="number"?zs(-o,o):zs(o.min,o.max),this.vy=typeof l=="number"?zs(-l,0):zs(l.min,l.max),this.shape=ome(0,2),this.angle=ame(zs(0,360)),this.angularSpin=zs(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=zs(0,1),this.rotationDirection=zs(0,1)?pl.Positive:pl.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=e/lme;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===pl.Positive?this.rotationDirection=pl.Negative:this.rotateY<=-1&&this.rotationDirection===pl.Negative&&(this.rotationDirection=pl.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Hm.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Hm.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Hm.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class ume{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=zs(this.x,this.w+this.x),a=zs(this.y,this.h+this.y);return new cme(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:d,recycle:h,numberOfPieces:m,debug:p,tweenFunction:v,tweenDuration:N}=this.getOptions();if(!d)return!1;const b=this.particles.length,j=h?b:l;if(j<m){u!==m&&(this.tweenProgress=0,this.tweenFrom=j,this.lastNumberOfPieces=m),this.tweenProgress=Math.min(N,Math.max(0,this.tweenProgress+s));const _=v(this.tweenProgress,this.tweenFrom,m,N),x=Math.round(_-j);for(let S=0;S<x;S++)this.particles.push(this.getParticle());this.particlesGenerated+=x}p&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,a.width-10,a.height-20));for(let _=this.particles.length-1;_>=0;_--){const x=this.particles[_];x.update(s),(x.y>a.height||x.y<-100||x.x>a.width+100||x.x<-100)&&(h&&j<=m?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return b>0||j<m},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const f2={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:ime.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class dme{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...f2,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:u,context:d}=this,h=Math.min(s-this.lastFrameTime,50);if(l&&h<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?h%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new ume(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const hme=oe.createRef();class m2 extends oe.Component{constructor(e){super(e),this.canvas=oe.createRef(),this.canvas=e.canvasRef||hme}componentDidMount(){if(this.canvas.current){const e=C_(this.props)[0];this.confetti=new dme(this.canvas.current,e)}}componentDidUpdate(){const e=C_(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=C_(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}m2.defaultProps={...f2};m2.displayName="ReactConfetti";function C_(t){const e={},n={},r={},s=[...Object.keys(f2),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[e,r,n]}const fme=oe.forwardRef((t,e)=>i.jsx(m2,{canvasRef:e,...t})),mme=({open:t,loading:e,email:n,onResend:r,onCheck:s,onClose:a,verified:o})=>i.jsx(Da,{open:t,children:i.jsxs(qi,{className:"max-w-md text-center",children:[o&&i.jsx(fme,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),i.jsxs(La,{children:[i.jsxs(Gi,{className:"flex items-center justify-center gap-2 text-lg",children:[o?i.jsx(kX,{className:"w-6 h-6 text-green-500 animate-bounce"}):i.jsx(PX,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),i.jsx(nu,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&i.jsxs("div",{className:"space-y-3 mt-2",children:[i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",i.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),i.jsxs(re,{onClick:s,disabled:e,className:"w-full",children:[e?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),i.jsxs(re,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),i.jsx(re,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),pme=$u({email:xt().email("Email invalide"),password:xt().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),gme=$u({firstName:xt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:xt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:xt().optional(),email:xt().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:xt().min(1,"Veuillez sélectionner votre université"),otherUniversity:xt().optional(),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:xt().optional(),graduationYear:xt().min(1,"Veuillez indiquer votre année de diplôme"),password:xt().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:xt()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),vme=$u({university:xt().min(1,"Veuillez sélectionner votre université"),otherUniversity:xt().optional(),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:xt().optional(),graduationYear:xt().min(1,"Veuillez indiquer votre année de diplôme"),displayName:xt().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),EI=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],PI=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],yme=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),xme=()=>{var Z,z;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=bn(),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState(""),[N,b]=w.useState(""),[j,_]=w.useState(!1),[x,S]=w.useState(null);Wo();const[C,R]=w.useState(!1),[V,k]=w.useState(!1),[I,$]=w.useState(!1),T=xr(),M=ru({resolver:su(pme),defaultValues:{email:"",password:""}}),D=ru({resolver:su(gme),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),O=ru({resolver:su(vme),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(w.useEffect(()=>{(async()=>{if(t)try{const q=await Ks(_t(Ue,"users",t.uid));if(q.exists()){const X=q.data();if(!(t.emailVerified||t.providerData.some(Ee=>Ee.providerId==="google.com"))&&!X.emailVerified){b(t.email||""),m(!0),R(!0),$(!1);return}}else{if(t.providerData.some(me=>me.providerId==="google.com")){if(!yme(t.email||"")){v("Vous devez utiliser une adresse email universitaire"),va.signOut();return}S({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),_(!0);return}const X=localStorage.getItem("pendingUserData");if(X&&t.emailVerified){const me=JSON.parse(X),Ee=Object.fromEntries(Object.entries(me).filter(([,Fe])=>Fe!==void 0));await Wc(_t(Ue,"users",t.uid),Ee),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(q){console.error("Error checking user profile:",q)}})()},[t,r]),w.useEffect(()=>{let H=null;return h&&t&&!t.emailVerified&&(H=setInterval(async()=>{await pm(t),t.emailVerified&&(m(!1),b(""),v(""),window.location.reload())},5e3)),()=>{H&&clearInterval(H)}},[h,t]),w.useEffect(()=>{t?t.emailVerified?(R(!1),$(!1)):(b(t.email||""),R(!0),$(!1)):(R(!1),$(!1))},[t]),w.useEffect(()=>{let H=null;return C&&t&&!t.emailVerified&&(H=setInterval(async()=>{await pm(t),t.emailVerified&&($(!0),H&&clearInterval(H))},5e3)),()=>{H&&clearInterval(H)}},[C,t]),j&&x)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(ge,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(OX,{className:"w-6 h-6 text-green-600"})})}),i.jsx(rt,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),i.jsx(Rt,{children:"Dernière étape pour accéder à StudyMarket"})]}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs(qt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Connecté avec ",i.jsx("strong",{children:x.email})]})]}),p&&i.jsxs(qt,{variant:"destructive",children:[i.jsx(Um,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsxs("form",{onSubmit:O.handleSubmit(async H=>{d(!0),v("");try{const q=H.university==="Autre université"?H.otherUniversity:H.university,X=H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:H.fieldOfStudy,me=Object.fromEntries(Object.entries(H).filter(([,Ee])=>Ee!==void 0));if(await Wc(_t(Ue,"users",x.uid),{email:x.email,displayName:me.displayName,photoURL:x.photoURL,university:q,otherUniversity:H.university==="Autre université"?H.otherUniversity:void 0,fieldOfStudy:X,otherFieldOfStudy:H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:void 0,graduationYear:parseInt(H.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&x.displayName)try{await pp(t,{displayName:me.displayName})}catch{}await r(x.uid),_(!1),window.location.reload()}catch(q){console.error("Error completing profile:",q),v("Erreur lors de la sauvegarde du profil")}finally{d(!1)}}),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"university",children:"Université"}),i.jsxs(sn,{onValueChange:H=>O.setValue("university",H),value:O.watch("university"),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Sélectionnez votre université"})}),i.jsx(Yt,{children:EI.map(H=>i.jsx(Ze,{value:H,children:H},H))})]}),O.watch("university")==="Autre université"&&i.jsx(Ke,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...O.register("otherUniversity"),className:"mt-2"}),O.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.university.message}),O.watch("university")==="Autre université"&&O.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(sn,{onValueChange:H=>O.setValue("fieldOfStudy",H),value:O.watch("fieldOfStudy"),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Filière"})}),i.jsx(Yt,{children:PI.map(H=>i.jsx(Ze,{value:H,children:H},H))})]}),O.watch("fieldOfStudy")==="Autre"&&i.jsx(Ke,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...O.register("otherFieldOfStudy"),className:"mt-2"}),O.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.fieldOfStudy.message}),O.watch("fieldOfStudy")==="Autre"&&O.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(sn,{onValueChange:H=>O.setValue("graduationYear",H),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Année"})}),i.jsx(Yt,{children:Array.from({length:8},(H,q)=>2024+q).map(H=>i.jsx(Ze,{value:H.toString(),children:H},H))})]}),O.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.graduationYear.message})]})]}),i.jsxs(re,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),i.jsx(re,{variant:"outline",onClick:()=>{va.signOut(),_(!1),S(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(h)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(ge,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(As,{className:"w-6 h-6 text-blue-600"})})}),i.jsx(rt,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),i.jsxs(Rt,{children:["Un lien d'activation a été envoyé à ",i.jsx("strong",{children:N}),".",i.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),i.jsxs(ve,{className:"space-y-4",children:[i.jsxs(qt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Nous avons envoyé un lien d'activation à ",i.jsx("strong",{children:N}),".",i.jsx("br",{}),i.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Important :"})}),i.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),i.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),i.jsx("p",{children:"• Le lien expire dans 24h"})]}),i.jsxs(re,{onClick:async()=>{if(t){d(!0);try{await qb(t),v(""),alert("Email d'activation renvoyé !")}catch(H){v("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",H)}d(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(As,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),i.jsx(re,{onClick:async()=>{if(t){d(!0);try{await pm(t),t.emailVerified?(m(!1),b(""),v(""),window.location.reload()):v("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{v("Erreur lors de la vérification de l'état de l'email")}d(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai déjà validé mon email"}),p&&i.jsxs(qt,{variant:"destructive",children:[i.jsx(Um,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsx(re,{variant:"link",onClick:()=>{m(!1),b(""),v(""),t&&va.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const B=async H=>{d(!0),v("");try{await e(H.email,H.password),T("/")}catch(q){q.code==="auth/invalid-credential"?v("Email ou mot de passe incorrect"):q.code==="auth/user-not-found"?v("Aucun compte trouvé avec cet email"):q.code==="auth/user-disabled"?v("Ce compte a été désactivé"):q.code==="auth/too-many-requests"?v("Trop de tentatives. Réessayez plus tard."):v("Erreur de connexion: "+(q.message||"Erreur inconnue")),console.error("Sign in error:",q)}finally{d(!1)}},Y=async H=>{d(!0),v("");try{const{firstName:q,lastName:X,...me}=H,Ee=`${q} ${X}`,Me=(await hD(va,H.email,H.password)).user;await qb(Me,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const ue=H.university==="Autre université"?H.otherUniversity:H.university,ye=H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:H.fieldOfStudy,J=Object.fromEntries(Object.entries(H).filter(([,ne])=>ne!==void 0)),te={firstName:q,lastName:X,displayName:Ee,university:ue,otherUniversity:H.university==="Autre université"?H.otherUniversity:void 0,fieldOfStudy:ye,otherFieldOfStudy:H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:void 0,graduationYear:parseInt(J.graduationYear),email:H.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await Wc(_t(Ue,"users",Me.uid),te),await r(Me.uid),b(H.email),R(!0),$(!1),Me&&await pp(Me,{displayName:Ee}),window.location.reload()}catch(q){console.error("Sign up error:",q),q.code==="auth/email-already-in-use"?v("Cette adresse email est déjà utilisée"):q.code==="auth/weak-password"?v("Le mot de passe est trop faible"):q.code==="auth/invalid-email"?v("Adresse email invalide"):v("Erreur lors de la création du compte")}finally{d(!1)}},ee=async()=>{d(!0),v("");try{await n()}catch(H){H.code==="auth/popup-closed-by-user"?v("Connexion annulée"):H.code==="auth/popup-blocked"?v("Popup bloquée par le navigateur"):H.code==="auth/account-exists-with-different-credential"?v("Un compte existe déjà avec cet email"):v("Erreur de connexion avec Google: "+(H.message||"Erreur inconnue")),console.error("Google sign in error:",H)}finally{d(!1)}};return w.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Ks(_t(Ue,"users",t.uid))).exists()){const X=localStorage.getItem("pendingUserData");if(X){const me=JSON.parse(X),Ee=Object.fromEntries(Object.entries(me).filter(([,Fe])=>Fe!==void 0));await Wc(_t(Ue,"users",t.uid),Ee),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),i.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[i.jsxs(ge,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(Jh,{className:"w-6 h-6 text-white"})})}),i.jsx(rt,{className:"text-2xl",children:s?"Rejoindre StudyMarket":"Se connecter"}),i.jsx(Rt,{children:s?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),s&&i.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:i.jsxs(ct,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Bt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),i.jsxs(ve,{className:"space-y-6",children:[p&&i.jsxs(qt,{variant:"destructive",children:[i.jsx(Um,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsxs(re,{variant:"outline",className:"w-full",onClick:ee,disabled:u,children:[u?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(fi,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),i.jsxs("form",{onSubmit:s?D.handleSubmit(Y):M.handleSubmit(B),className:"space-y-4",children:[s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Ae,{htmlFor:"firstName",children:"Prénom"}),i.jsx(Ke,{id:"firstName",...D.register("firstName"),autoComplete:"given-name"}),D.formState.errors.firstName&&i.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.firstName.message})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ae,{htmlFor:"lastName",children:"Nom"}),i.jsx(Ke,{id:"lastName",...D.register("lastName"),autoComplete:"family-name"}),D.formState.errors.lastName&&i.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.lastName.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"email",children:"Email universitaire"}),i.jsxs("div",{className:"relative",children:[i.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...s?D.register("email"):M.register("email")})]}),(s?D.formState.errors.email:M.formState.errors.email)&&i.jsx("p",{className:"text-sm text-destructive",children:(Z=s?D.formState.errors.email:M.formState.errors.email)==null?void 0:Z.message}),s&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"university",children:"Université"}),i.jsxs(sn,{onValueChange:H=>D.setValue("university",H),value:D.watch("university"),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Sélectionnez votre université"})}),i.jsx(Yt,{children:EI.map(H=>i.jsx(Ze,{value:H,children:H},H))})]}),D.watch("university")==="Autre université"&&i.jsx(Ke,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...D.register("otherUniversity"),className:"mt-2"}),D.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre université"&&D.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(sn,{onValueChange:H=>D.setValue("fieldOfStudy",H),value:D.watch("fieldOfStudy"),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Filière"})}),i.jsx(Yt,{children:PI.map(H=>i.jsx(Ze,{value:H,children:H},H))})]}),D.watch("fieldOfStudy")==="Autre"&&i.jsx(Ke,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...D.register("otherFieldOfStudy"),className:"mt-2"}),D.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(sn,{onValueChange:H=>D.setValue("graduationYear",H),children:[i.jsx(Qt,{children:i.jsx(an,{placeholder:"Année"})}),i.jsx(Yt,{children:Array.from({length:8},(H,q)=>2024+q).map(H=>i.jsx(Ze,{value:H.toString(),children:H},H))})]}),D.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"password",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...s?D.register("password"):M.register("password")}),i.jsx(re,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>l(!o),children:o?i.jsx(xX,{className:"w-4 h-4"}):i.jsx(jh,{className:"w-4 h-4"})})]}),(s?D.formState.errors.password:M.formState.errors.password)&&i.jsx("p",{className:"text-sm text-destructive",children:(z=s?D.formState.errors.password:M.formState.errors.password)==null?void 0:z.message})]}),s&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10",...D.register("confirmPassword")})]}),D.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.confirmPassword.message})]}),i.jsxs(re,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?i.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}):null,s?"Créer le compte et envoyer l'email":"Se connecter"]})]}),i.jsx("div",{className:"w-full",children:i.jsx(re,{variant:"link",onClick:()=>a(!s),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:s?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),s&&i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),i.jsx(mme,{open:C,loading:V,email:N,onResend:async()=>{k(!0);try{t&&await qb(t)}finally{k(!1)}},onCheck:async()=>{k(!0);try{t&&(await pm(t),t.emailVerified&&$(!0))}finally{k(!1)}},onClose:()=>{R(!1),$(!1),T("/")},verified:I})]})},Ai=({children:t})=>{const{currentUser:e}=bn(),n=Wo();return e?i.jsx(i.Fragment,{children:t}):i.jsx(z7,{to:"/auth",state:{from:n},replace:!0})},D8=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=xr(),s=e,a=0,o=0,l=s+a-o,u=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d);return i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(tc,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((d,h)=>d+h.quantity,0),")"]}),i.jsx("span",{children:u(s)})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(vw,{className:"w-4 h-4"}),"Livraison"]}),i.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,i.jsx(fi,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"font-bold text-lg",children:u(l)})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&i.jsxs(re,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[i.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",i.jsx(Na,{className:"ml-2 h-4 w-4"})]})]})})]})},wme=()=>{const{currentUser:t}=bn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,cartTotal:a}=of(),o=xr(),[l,u]=w.useState(""),[d,h]=w.useState(!1),m=(N,b)=>{if(!(b<1)){if(b>10){je.error("Maximum 10 articles par produit");return}n(N,b)}},p=N=>{r(N),je.success("Article retiré du panier")},v=()=>{l.trim()&&(h(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?je.success("Code promo appliqué : 10% de réduction"):je.error("Code promo invalide ou expiré"),h(!1)},1e3))};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(re,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(tc,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&i.jsxs(re,{variant:"outline",onClick:s,className:"text-destructive hover:text-destructive",children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tc,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:"/products",children:[i.jsx(tu,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Articles (",e.reduce((N,b)=>N+b.quantity,0),")"]}),i.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[i.jsx(tu,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),i.jsx(ve,{children:i.jsx("div",{className:"space-y-4",children:e.map(N=>i.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[N.image?i.jsx("img",{src:N.image,alt:N.name,className:"w-20 h-20 object-cover rounded"}):i.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:i.jsx(tu,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:N.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:N.seller}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(re,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>m(N.id,N.quantity-1),disabled:N.quantity<=1,children:i.jsx(T3,{className:"h-3 w-3"})}),i.jsx(Ke,{type:"number",value:N.quantity,onChange:b=>{const j=parseInt(b.target.value);isNaN(j)||m(N.id,j)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),i.jsx(re,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>m(N.id,N.quantity+1),disabled:N.quantity>=10,children:i.jsx(eu,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N.price*N.quantity)}),i.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>p(N.id),className:"text-destructive hover:text-destructive mt-2",children:[i.jsx(jo,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},N.id))})})]}),i.jsx(ge,{className:"mt-6",children:i.jsxs(ve,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{placeholder:"Code promo",value:l,onChange:N=>u(N.target.value),className:"pl-10"})]}),i.jsx(re,{onClick:v,disabled:!l.trim()||d,children:d?i.jsxs(i.Fragment,{children:[i.jsx(Ao,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(D8,{cart:e,total:a,showCheckoutButton:!0}),!t&&i.jsxs(qt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},py=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},p2=af((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=Pn(Ut(Ue,"orders"),lr("userId","==",n),yi(100)),s=await Zn(r),a=[];s.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:py(l.createdAt),updatedAt:py(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),je.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Ks(_t(Ue,"orders",n));if(r.exists()){const s=r.data();return{id:r.id,...s,createdAt:py(s.createdAt),updatedAt:py(s.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),je.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),s={...n,securityCode:r,createdAt:mr(),updatedAt:mr()},a=await Xl(Ut(Ue,"orders"),s),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),je.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),je.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:mr()};s&&(a.notes=s),await En(_t(Ue,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:s||l.notes,updatedAt:new Date}:l)})),je.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),je.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await En(_t(Ue,"orders",n),{status:"cancelled",notes:r,updatedAt:mr()}),t(s=>({orders:s.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),je.success("Commande annulée")}catch(s){console.error("Error cancelling order:",s),je.error("Erreur lors de l'annulation de la commande")}}})),bme=()=>{const{currentUser:t,userProfile:e}=bn(),n=xr(),r=Wo(),{cart:s,cartTotal:a,clearCart:o}=of(),{createOrder:l}=p2(),[u,d]=w.useState("shipping"),[h,m]=w.useState(!1),[p,v]=w.useState(null),[N,b]=w.useState({}),[j,_]=w.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[x,S]=w.useState({}),[C,R]=w.useState(!1);w.useEffect(()=>{var M;s.length===0&&!((M=r.state)!=null&&M.directCheckout)&&(n("/cart"),je.error("Votre panier est vide"))},[s,n,r]);const V=()=>{const M={};return j.fullName||(M.fullName="Nom complet requis"),j.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)||(M.email="Format d'email invalide"):M.email="Email requis",j.phone||(M.phone="Téléphone requis"),j.address||(M.address="Adresse requise"),j.city||(M.city="Ville requise"),j.postalCode||(M.postalCode="Code postal requis"),S(M),Object.keys(M).length===0},k=M=>{M.preventDefault(),V()&&(d("payment"),window.scrollTo(0,0))},I=(M,D)=>{v(M),b(D),M==="card"&&D.stripePaymentId&&(d("review"),window.scrollTo(0,0))},$=()=>{if(!p){je.error("Veuillez sélectionner un mode de paiement");return}d("review"),window.scrollTo(0,0)},T=async()=>{if(!t){n("/auth");return}if(!C){je.error("Veuillez accepter les conditions générales");return}m(!0);try{const M={userId:t.uid,items:s,total:a,shipping:j,payment:{method:p,details:N,transactionId:N.stripePaymentId},status:p==="card"?"processing":"pending"},D=await l(M);o(),n(`/order-confirmation/${D}`)}catch(M){console.error("Error placing order:",M),je.error("Erreur lors de la création de la commande")}finally{m(!1)}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(re,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),i.jsxs("div",{className:"flex items-center mt-6",children:[i.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),i.jsx(Na,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),i.jsx(Na,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(vw,{className:"w-5 h-5"}),"Informations de livraison"]}),i.jsx(Rt,{children:"Entrez vos coordonnées pour la livraison"})]}),i.jsx(ve,{children:i.jsxs("form",{onSubmit:k,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"fullName",className:"flex items-center gap-1",children:[i.jsx(ms,{className:"w-4 h-4"}),"Nom complet *"]}),i.jsx(Ke,{id:"fullName",value:j.fullName,onChange:M=>_({...j,fullName:M.target.value}),className:x.fullName?"border-red-500":""}),x.fullName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.fullName})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"email",className:"flex items-center gap-1",children:[i.jsx(As,{className:"w-4 h-4"}),"Email *"]}),i.jsx(Ke,{id:"email",type:"email",value:j.email,onChange:M=>_({...j,email:M.target.value}),className:x.email?"border-red-500":""}),x.email&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.email})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"phone",className:"flex items-center gap-1",children:[i.jsx(Xh,{className:"w-4 h-4"}),"Téléphone *"]}),i.jsx(Ke,{id:"phone",value:j.phone,onChange:M=>_({...j,phone:M.target.value}),className:x.phone?"border-red-500":""}),x.phone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.phone})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"university",className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Université"]}),i.jsx(Ke,{id:"university",value:j.university,onChange:M=>_({...j,university:M.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"address",className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Adresse *"]}),i.jsx(Ke,{id:"address",value:j.address,onChange:M=>_({...j,address:M.target.value}),className:x.address?"border-red-500":""}),x.address&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.address})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"city",className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Ville *"]}),i.jsx(Ke,{id:"city",value:j.city,onChange:M=>_({...j,city:M.target.value}),className:x.city?"border-red-500":""}),x.city&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.city})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Code postal *"]}),i.jsx(Ke,{id:"postalCode",value:j.postalCode,onChange:M=>_({...j,postalCode:M.target.value}),className:x.postalCode?"border-red-500":""}),x.postalCode&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.postalCode})]}),i.jsxs("div",{children:[i.jsxs(Ae,{htmlFor:"country",className:"flex items-center gap-1",children:[i.jsx(Zr,{className:"w-4 h-4"}),"Pays *"]}),i.jsx(Ke,{id:"country",value:j.country,onChange:M=>_({...j,country:M.target.value}),disabled:!0})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsx(g0,{id:"saveInfo",checked:j.saveInfo,onCheckedChange:M=>_({...j,saveInfo:M})}),i.jsx(Ae,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs(re,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",i.jsx(Na,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Méthode de paiement"]}),i.jsx(Rt,{children:"Choisissez votre mode de paiement préféré"})]}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx($$,{amount:a,currency:"EUR",onMethodSelect:I,selectedMethod:p}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs(re,{variant:"outline",onClick:()=>d("shipping"),children:[i.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsxs(re,{onClick:$,disabled:!p||p==="card"&&!N.stripePaymentId,children:["Vérifier la commande",i.jsx(Na,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&i.jsxs(ge,{children:[i.jsxs(et,{children:[i.jsxs(rt,{className:"flex items-center gap-2",children:[i.jsx(At,{className:"w-5 h-5"}),"Vérification de la commande"]}),i.jsx(Rt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:()=>d("shipping"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:j.fullName}),i.jsx("p",{children:j.address}),i.jsxs("p",{children:[j.postalCode," ",j.city,", ",j.country]}),i.jsx("p",{children:j.email}),i.jsx("p",{children:j.phone})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:()=>d("payment"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsxs("p",{className:"font-medium",children:[p==="card"&&"Carte bancaire",p==="paypal"&&"PayPal",p==="transfer"&&"Virement bancaire",p==="cash"&&"Paiement à la livraison",p==="lydia"&&"Lydia"]}),p==="card"&&N.stripePaymentId&&i.jsxs("p",{className:"text-green-600 text-sm",children:[i.jsx(At,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),p==="paypal"&&N.paypalEmail&&i.jsx("p",{children:N.paypalEmail}),p==="lydia"&&N.lydiaPhone&&i.jsx("p",{children:N.lydiaPhone})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",s.length,")"]}),i.jsx("div",{className:"space-y-3",children:s.map(M=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[M.image&&i.jsx("img",{src:M.image,alt:M.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:M.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",M.quantity]})]}),i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(M.price*M.quantity)})]},M.id))})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(g0,{id:"terms",checked:C,onCheckedChange:M=>R(M)}),i.jsxs("div",{children:[i.jsx(Ae,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs(re,{variant:"outline",onClick:()=>d("payment"),children:[i.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsx(re,{onClick:T,disabled:h||!C,className:"bg-gradient-to-r from-primary to-secondary",children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(yu,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(D8,{cart:s,total:a,showCheckoutButton:!1}),i.jsxs(qt,{className:"mt-4 border-blue-200 bg-blue-50",children:[i.jsx(Bt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),i.jsx(ge,{className:"mt-4",children:i.jsx(ve,{className:"pt-6",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ec,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),i.jsx(re,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6",children:[i.jsx(tc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),i.jsx(re,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},_me=()=>{const{currentUser:t}=bn(),{orders:e,fetchUserOrders:n,loading:r}=p2(),s=xr(),[a,o]=w.useState(""),[l,u]=w.useState("all"),[d,h]=w.useState("date-desc"),[m,p]=w.useState("all");w.useEffect(()=>{t&&n(t.uid)},[t,n]);const v=()=>e.filter(_=>{const x=!a||_.id.toLowerCase().includes(a.toLowerCase()),S=l==="all"||_.status===l;let C=!0;if(m!=="all"){const R=new Date(_.createdAt),V=new Date;if(m==="last-30-days"){const k=new Date;k.setDate(V.getDate()-30),C=R>=k}else if(m==="last-6-months"){const k=new Date;k.setMonth(V.getMonth()-6),C=R>=k}}return x&&S&&C}).sort((_,x)=>d==="date-desc"?new Date(x.createdAt).getTime()-new Date(_.createdAt).getTime():d==="date-asc"?new Date(_.createdAt).getTime()-new Date(x.createdAt).getTime():d==="total-desc"?x.total-_.total:d==="total-asc"?_.total-x.total:0),N=_=>{switch(_){case"pending":return i.jsxs(ct,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(Jn,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return i.jsxs(ct,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Nn,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return i.jsxs(ct,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[i.jsx(vw,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return i.jsxs(ct,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return i.jsxs(ct,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(_h,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return i.jsx(ct,{children:_})}},b=_=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(_),j=()=>{const _={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(R=>({id:R.id,date:R.createdAt,status:R.status,total:R.total,items:R.items.length}))},x=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),S=URL.createObjectURL(x),C=document.createElement("a");C.href=S,C.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(S)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Nn,{className:"w-8 h-8"}),"Mes Commandes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),i.jsxs(re,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[i.jsx(xi,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsx(ge,{children:i.jsx(ve,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ke,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:_=>o(_.target.value),className:"pl-10"})]}),i.jsxs(sn,{value:l,onValueChange:u,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{placeholder:"Statut"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Tous les statuts"}),i.jsx(Ze,{value:"pending",children:"En attente"}),i.jsx(Ze,{value:"processing",children:"En traitement"}),i.jsx(Ze,{value:"shipped",children:"Expédiée"}),i.jsx(Ze,{value:"delivered",children:"Livrée"}),i.jsx(Ze,{value:"cancelled",children:"Annulée"})]})]}),i.jsxs(sn,{value:m,onValueChange:p,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{placeholder:"Période"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"all",children:"Toutes les périodes"}),i.jsx(Ze,{value:"last-30-days",children:"30 derniers jours"}),i.jsx(Ze,{value:"last-6-months",children:"6 derniers mois"})]})]}),i.jsxs(sn,{value:d,onValueChange:h,children:[i.jsx(Qt,{className:"w-40",children:i.jsx(an,{placeholder:"Trier par"})}),i.jsxs(Yt,{children:[i.jsx(Ze,{value:"date-desc",children:"Date (récent → ancien)"}),i.jsx(Ze,{value:"date-asc",children:"Date (ancien → récent)"}),i.jsx(Ze,{value:"total-desc",children:"Prix (élevé → bas)"}),i.jsx(Ze,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),i.jsxs(Vu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(vc,{className:"grid w-full grid-cols-4",children:[i.jsx(fn,{value:"all",children:"Toutes"}),i.jsx(fn,{value:"active",children:"En cours"}),i.jsx(fn,{value:"completed",children:"Terminées"}),i.jsx(fn,{value:"cancelled",children:"Annulées"})]}),i.jsx(mn,{value:"all",className:"space-y-4",children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((_,x)=>i.jsx(ge,{className:"animate-pulse",children:i.jsxs(ve,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},x))}):v().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:"/listings",children:[i.jsx(tu,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsx("div",{className:"space-y-4",children:v().map(_=>i.jsx(ge,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ve,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),N(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(gi,{className:"w-3 h-3"}),vr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Yr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(Na,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Nn,{className:"w-6 h-6 text-muted-foreground"})})},S)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(mn,{value:"active",className:"space-y-4",children:v().filter(_=>["pending","processing","shipped"].includes(_.status)).length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):i.jsx("div",{className:"space-y-4",children:v().filter(_=>["pending","processing","shipped"].includes(_.status)).map(_=>i.jsx(ge,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ve,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),N(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(gi,{className:"w-3 h-3"}),vr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Yr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(Na,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Nn,{className:"w-6 h-6 text-muted-foreground"})})},S)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(mn,{value:"completed",className:"space-y-4",children:v().filter(_=>_.status==="delivered").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(At,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):i.jsx("div",{className:"space-y-4",children:v().filter(_=>_.status==="delivered").map(_=>i.jsx(ge,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ve,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),N(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(gi,{className:"w-3 h-3"}),vr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Yr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(Na,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Nn,{className:"w-6 h-6 text-muted-foreground"})})},S)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(mn,{value:"cancelled",className:"space-y-4",children:v().filter(_=>_.status==="cancelled").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_h,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):i.jsx("div",{className:"space-y-4",children:v().filter(_=>_.status==="cancelled").map(_=>i.jsx(ge,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ve,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),N(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(gi,{className:"w-3 h-3"}),vr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Yr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(re,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(Na,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Nn,{className:"w-6 h-6 text-muted-foreground"})})},S)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6",children:[i.jsx(Nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),i.jsx(re,{onClick:()=>s("/auth"),children:"Se connecter"})]})})})},jme=()=>{var h,m;const{orderId:t}=LS(),{getOrderById:e}=p2(),[n,r]=w.useState(null),[s,a]=w.useState(!0);w.useEffect(()=>{(async()=>{if(t)try{a(!0);const v=await e(t);r(v)}catch(v){console.error("Error loading order:",v)}finally{a(!1)}})()},[t,e]);const o=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(p),l=p=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[p]||p,u=()=>{const p=new Date,v=new Date(p);return v.setDate(p.getDate()+3),vr(v,"EEEE d MMMM",{locale:Yr})},d=()=>{navigator.clipboard.writeText(t||""),je.success("Numéro de commande copié !")};return s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),i.jsx("div",{className:"h-32 bg-muted rounded"}),i.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(At,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),i.jsxs(ge,{className:"mb-6",children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"w-5 h-5"}),"Détails de la commande"]}),i.jsx(ct,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,i.jsx(re,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:i.jsx(j3,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),i.jsx("p",{className:"font-medium",children:vr(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),i.jsx(fi,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),i.jsx("div",{className:"space-y-3",children:n.items.map((p,v)=>i.jsxs("div",{className:"flex items-center gap-3",children:[p.image&&i.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:p.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",p.quantity]})]}),i.jsx("p",{className:"font-semibold",children:o(p.price*p.quantity)})]},v))})]}),i.jsx(fi,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),i.jsx("span",{children:o(n.total)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),i.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total"}),i.jsx("span",{children:o(n.total)})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-base",children:[i.jsx(vw,{className:"w-4 h-4"}),"Livraison"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:n.shipping.fullName}),i.jsx("p",{children:n.shipping.address}),i.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(gi,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),i.jsxs(ge,{children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2 text-base",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Paiement"]})}),i.jsx(ve,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((h=n.payment.details)==null?void 0:h.cardNumber)&&i.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((m=n.payment.details)==null?void 0:m.paypalEmail)&&i.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&i.jsxs(qt,{className:"mt-2",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Jn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(re,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ze,{to:"/orders",children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsxs(re,{variant:"outline",className:"flex-1",children:[i.jsx(xi,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),i.jsx(re,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ze,{to:"/listings",children:[i.jsx(tu,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs(re,{variant:"link",className:"text-primary",children:[i.jsx(As,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),i.jsxs(re,{variant:"link",className:"text-primary",children:[i.jsx(Np,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ge,{children:i.jsxs(ve,{className:"pt-6",children:[i.jsx(Un,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),i.jsx(re,{asChild:!0,children:i.jsx(ze,{to:"/orders",children:"Voir mes commandes"})})]})})})},Nme=({id:t,name:e,description:n,price:r,currency:s,image:a,mode:o})=>{const{currentUser:l}=bn(),{addToCart:u}=of(),d=xr(),h=(v,N)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:N}).format(v),m=()=>{if(!l){je.error("Veuillez vous connecter pour ajouter au panier"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},p=()=>{if(!l){je.error("Veuillez vous connecter pour acheter"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),d("/checkout")};return i.jsxs(ge,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[i.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):i.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:i.jsx(fX,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx(ct,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),i.jsxs(et,{children:[i.jsx(rt,{children:e}),i.jsx(Rt,{children:n})]}),i.jsx(ve,{children:i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[h(r,s),o==="subscription"&&i.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),i.jsxs(I5,{className:"flex gap-2",children:[i.jsxs(re,{variant:"outline",className:"flex-1",onClick:m,children:[i.jsx(tc,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),i.jsx(re,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:p,children:"Acheter"})]})]})},Kj=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],Sme=t=>Kj.find(e=>e.priceId===t),Eme="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";C$(Eme);async function Pme(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Cme(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Tme=()=>{const{getCartItemCount:t}=of(),e=xr(),n=t();return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(re,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(tu,{className:"w-8 h-8"}),"Boutique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&i.jsxs(re,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[i.jsx(tc,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Kj.map(r=>i.jsx(Nme,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Kj.length===0&&i.jsx(ge,{className:"text-center py-12",children:i.jsxs(ve,{className:"pt-6",children:[i.jsx(Nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Rme=()=>{const[t]=FS(),e=xr(),{currentUser:n}=bn(),{clearCart:r}=of(),[s,a]=w.useState(!0),[o,l]=w.useState(null),[u,d]=w.useState(null),[h,m]=w.useState(null),p=t.get("session_id"),v=t.get("type")==="subscription";w.useEffect(()=>{r();async function b(){if(n)try{if(a(!0),v){const _=await Pme();l(_)}else{const x=(await Cme())[0];d(x)}}catch(_){console.error("Error fetching checkout result:",_),m("Impossible de charger les détails de votre achat")}finally{a(!1)}}const j=setTimeout(()=>{b()},2e3);return()=>clearTimeout(j)},[n,v,p,r]);const N=()=>{if(v&&(o!=null&&o.price_id)){const b=Sme(o.price_id);return b?b.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto text-center",children:[i.jsx(us,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),i.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):h?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(qt,{className:"border-red-200 bg-red-50",children:[i.jsx(Un,{className:"h-4 w-4 text-red-600"}),i.jsx(Gt,{className:"text-red-800",children:h})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(re,{asChild:!0,children:i.jsx(ze,{to:"/",children:"Retour à l'accueil"})})})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(At,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Votre ",v?"abonnement":"commande"," a été confirmé",v?"":"e","."]})]}),i.jsxs(ge,{className:"mb-6",children:[i.jsx(et,{children:i.jsxs(rt,{className:"flex items-center gap-2",children:[v?i.jsx(Qn,{className:"w-5 h-5"}):i.jsx(Nn,{className:"w-5 h-5"}),N()]})}),i.jsx(ve,{children:i.jsx("div",{className:"space-y-4",children:v&&o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),i.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),i.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),i.jsx("span",{className:"font-medium",children:u.order_id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):i.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(qt,{className:"bg-blue-50 border-blue-200",children:[i.jsx(gi,{className:"h-4 w-4 text-blue-600"}),i.jsx(Gt,{className:"text-blue-800",children:v?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(re,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ze,{to:"/orders",children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsx(re,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ze,{to:"/products",children:[i.jsx(tu,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",i.jsx(Np,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(qt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(re,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete df.Icon.Default.prototype._getIconUrl;df.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function kme({position:t,onChange:e}){function n(){return $P({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?i.jsx(zP,{position:t}):null}return i.jsxs(VP,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[i.jsx(UP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(n,{})]})}const Ime=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Ame=()=>{const{id:t}=LS(),e=xr(),{currentUser:n}=bn(),{fetchListingById:r,updateListing:s,currentListing:a,loading:o}=Zg(),[l,u]=w.useState({title:"",description:"",price:"",images:[]}),[d,h]=w.useState([]),[m,p]=w.useState(!1),[v,N]=w.useState(null),[b,j]=w.useState(""),[_,x]=w.useState([]),[S,C]=w.useState(""),[R,V]=w.useState(""),[k,I]=w.useState(null),[$,T]=w.useState(!1);w.useEffect(()=>{t&&r(t)},[t,r]),w.useEffect(()=>{var z;a&&(u({title:a.title||"",description:a.description||"",price:((z=a.price)==null?void 0:z.toString())||"",images:a.images||[]}),j(a.category||""),x(a.tags||[]),V(a.meetingLocation||""),a.coordinates&&I(a.coordinates))},[a]);const M=z=>{u({...l,[z.target.name]:z.target.value})},D=z=>{if(!z.target.files)return;const H=Array.from(z.target.files);h(q=>[...q,...H])},O=z=>{u({...l,images:l.images.filter((H,q)=>q!==z)})},B=z=>{h(d.filter((H,q)=>q!==z))},Y=()=>{S.trim()&&!_.includes(S.trim())&&_.length<5&&(x([..._,S.trim()]),C(""))},ee=z=>{x(_.filter(H=>H!==z))},Z=async z=>{if(z.preventDefault(),!(!t||!n)){p(!0);try{let H=[];d.length>0&&(H=await Promise.all(d.map(X=>Ome(X,n.uid))));const q=[...l.images,...H];await s(t,{...l,price:parseFloat(l.price),images:q,category:b,tags:_,meetingLocation:R,coordinates:k}),e(`/listing/${t}`)}catch{N("Erreur lors de la mise à jour de l'annonce")}finally{p(!1)}}};return o?i.jsx("div",{children:"Chargement..."}):a?v?i.jsx("div",{className:"text-red-500",children:v}):i.jsx("form",{onSubmit:Z,className:"max-w-lg mx-auto mt-10",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),i.jsx(Ke,{id:"title",name:"title",value:l.title,onChange:M,placeholder:"Titre",className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),i.jsx(bi,{id:"description",name:"description",value:l.description,onChange:M,placeholder:"Description",className:"w-full",rows:4})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),i.jsx(Ke,{id:"price",name:"price",value:l.price,onChange:M,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),i.jsxs("select",{id:"category",name:"category",value:b,onChange:z=>j(z.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[i.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Ime.map(z=>i.jsx("option",{value:z.value,children:z.label},z.value))]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(Ke,{id:"meetingLocation",name:"meetingLocation",value:R,onChange:z=>V(z.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),i.jsx(re,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");T(!0),navigator.geolocation.getCurrentPosition(async z=>{const{latitude:H,longitude:q}=z.coords;I([H,q]);const X=await CI(H,q);V(X),T(!1)},()=>T(!1))},disabled:$,children:"📍"})]}),i.jsx("div",{className:"mt-3",children:i.jsx(kme,{position:k,onChange:async z=>{I(z);const H=await CI(z[0],z[1]);V(H)}})})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Ae,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(z=>i.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[z,i.jsx(re,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>ee(z),children:"×"})]},z))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ke,{placeholder:"Ajouter un tag...",value:S,onChange:z=>C(z.target.value),onKeyDown:z=>z.key==="Enter"&&(z.preventDefault(),Y()),className:"flex-1"}),i.jsx(re,{type:"button",onClick:Y,disabled:!S.trim()||_.length>=5,children:"Ajouter"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx(Ae,{className:"block mb-1 text-gray-700",children:"Photos"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((z,H)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:z,alt:`photo-${H}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(re,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>O(H),children:"×"})]},H)),d.map((z,H)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(z),alt:`new-photo-${H}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(re,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>B(H),children:"×"})]},H)),i.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[i.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:m})]})]})]}),i.jsx(re,{type:"submit",className:"w-full",disabled:m,children:m?"Enregistrement...":"Enregistrer les modifications"}),v&&i.jsx("div",{className:"text-red-500 text-center mt-2",children:v})]})}):i.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Ome(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,s=KE(QE,r),a=await qE(s,t);return await GE(a.ref)}async function CI(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}const g2="Q3E5Y56YF4",L8="5f0e550b9ede2710482ad296ad3b3cae",Mme="ff26b6f0fa03bc6384566ea42dfe0ab4",F8="study-market-jobs",Dme="study-market-services",Dc="student-housing",Lme="study-market-materiel";async function Fme(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function $me(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,s)=>({id:r.id||`jooble-${s}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function Vme(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function zme(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(l=a.location)==null?void 0:l.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function Ume(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(l=a.refs)==null?void 0:l.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function Bme(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((s,a)=>{const o=s;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function $8(t){try{console.log("🔍 Recherche Algolia avec query:",t||"*");const e=g2,n=Mme,s=`https://${e}-dsn.algolia.net/1/indexes/${F8}/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log("🧪 Recherche dans l'index: study-market-jobs"),console.log("🔗 URL:",s),console.log("📊 Récupération de toutes les offres disponibles...");let o=[],l=0;const u=10;for(;l<u;){const h={...a,page:l},m=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(h)});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const p=await m.json(),v=p.hits||[],N=p.nbHits||0;if(console.log(`📄 Page ${l+1}: ${v.length} offres récupérées`),v.length===0){console.log("✅ Plus d'offres à récupérer");break}if(o=o.concat(v),o.length>=N){console.log(`✅ Toutes les ${N} offres récupérées`);break}l++}return console.log(`📊 Total: ${o.length} offres récupérées depuis l'index "study-market-jobs"`),o.length===0?(console.log("ℹ️ Aucun résultat trouvé dans l'index study-market-jobs"),[]):(console.log("🔍 Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((h,m)=>{const p=h,v=()=>p.objectID||p.id||p.job_id||p._id||`algolia-${m}`,N=()=>p.title||p.job_title||p.position||p.name||"Titre non spécifié",b=()=>p.company||p.company_name||p.employer||p.employer_name||"Entreprise non spécifiée",j=()=>p.location||p.city||p.country||p.address||"France",_=()=>p.description||p.summary||p.job_description||p.content||"",x=()=>p.url||p.apply_url||p.job_url||p.link||"#",S=()=>p.publication_date||p.date||p.posted_date||p.created_at||"",C=()=>p.contract_type||p.job_type||p.employment_type||p.type||"";return{id:v(),title:N(),company:b(),company_logo:p.company_logo||p.logo||"",location:j(),description:_(),url:x(),source:"Algolia",publication_date:S(),contract_type:C(),remote:!!(p.remote||p.is_remote||p.remote_ok),tags:Array.isArray(p.tags)?p.tags:Array.isArray(p.skills)?p.skills:[]}}))}catch(e){throw console.error("❌ Erreur complète Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function Wme(t){console.log("🚀 Début de la recherche pour:",t);const e=[{name:"Remotive",func:Fme},{name:"Jooble",func:$me},{name:"JSearch",func:Vme},{name:"Adzuna",func:zme},{name:"The Muse",func:Ume},{name:"LinkedIn",func:Bme},{name:"Algolia",func:$8}],r=(await Promise.allSettled(e.map(async a=>{console.log(`🔄 Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(`✅ ${a.name}: ${o.length} offres récupérées`),o}catch(o){return console.error(`❌ ${a.name} a échoué:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(`📋 Total final: ${r.length} offres de ${e.length} sources`);const s=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log("📊 Résumé par source:",s),r}function v2(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function Hme(t,e){await Xl(Ut(Ue,"users",t,"favoriteJobs"),v2(e))}async function TI(t){const e=Pn(Ut(Ue,"users",t,"favoriteJobs"));return(await Zn(e)).docs.map(r=>({...r.data(),id:r.id}))}async function qme(t,e){const n=KL(Ue),r=Ut(Ue,"users",t,"searchedJobs");e.forEach(s=>{const a=_t(r);n.set(a,v2(s))}),await n.commit()}async function Gme(t,e,n){const r=OL(),s=_t(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(l=>v2(l)):[];await Wc(s,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const Kme=({image:t,title:e,subtitle:n,location:r,date:s,isFavorite:a=!1,onFavoriteToggle:o,url:l,companyName:u})=>{const d=()=>{l&&window.open(l,"_blank","noopener,noreferrer")},h=p=>{p.stopPropagation(),o&&o()},m=p=>{p.stopPropagation()};return i.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:d,children:[i.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[i.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:p=>{const v=p.target;v.src.endsWith("/assets/job-default.jpg")||(v.src="/assets/job-default.jpg")}}),i.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),i.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:h,children:i.jsx(Qr,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:m,children:i.jsx(gw,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&i.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[i.jsx(w3,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),i.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&i.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[i.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[i.jsx(Zr,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{children:r})]}),s&&i.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[i.jsx(gi,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),s]})]})]})]})},Zme="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function Qme(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:Zme}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function Yme(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const sm=12;function Jme(t){var l,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((l=t.title)==null?void 0:l.toLowerCase())||"",s=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const d in e)if(r.includes(d)||s.includes(d)){n=e[d];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const Xme=()=>{const[t,e]=w.useState(""),[n,r]=w.useState([]),[s,a]=w.useState(!1),{currentUser:o}=bn(),[l,u]=w.useState([]),[d,h]=w.useState(1),[m,p]=w.useState({}),[v,N]=w.useState(null),[b,j]=w.useState(!1),[_,x]=w.useState(null);w.useEffect(()=>{(async()=>{if(o)try{const M=await TI(o.uid);u(M)}catch(M){console.error("Erreur lors du chargement des favoris:",M)}})()},[o]),w.useEffect(()=>{(async()=>{try{console.log("🧪 Test de connexion Algolia...");const M=await $8("");console.log("✅ Test Algolia réussi:",M.length,"offres trouvées"),M.length===0&&console.log("⚠️ Aucune offre dans l'index Algolia")}catch(M){console.error("❌ Erreur test Algolia:",M)}})()},[]),w.useEffect(()=>{if(n.length===0)return;(async()=>{const M={},D={},O=(d-1)*sm,B=O+sm,Y=n.slice(O,B);for(const ee of Y){const Z=Jme(ee),z=ee.id+ee.source;if(m[z]){M[z]=m[z];continue}if(D[Z]){M[z]=D[Z];continue}try{const H=await Qme(Z);H?(D[Z]=H,M[z]=H):M[z]="/assets/job-default.jpg"}catch(H){console.warn("Erreur chargement image pour",ee.title,H),M[z]="/assets/job-default.jpg"}}p(ee=>({...ee,...M}))})()},[n,d,m]),w.useEffect(()=>{S("")},[]);const S=async T=>{const M=T??t;a(!0),N(null),j(!0);try{console.log("🔍 Recherche avec query:",M);const D=await Wme(M);console.log("📊 Résultats par source:");const O=D.reduce((B,Y)=>(B[Y.source||"unknown"]=(B[Y.source||"unknown"]||0)+1,B),{});if(console.table(O),r(D),h(1),o&&D.length>0)try{await qme(o.uid,D);const B={};for(const Y of D){const ee=Y.source||"unknown";B[ee]||(B[ee]=[]),B[ee].push(Y)}for(const Y in B)await Gme(o.uid,Y,B[Y])}catch(B){console.error("Erreur Firestore:",B)}D.length===0&&N("Aucune offre trouvée pour cette recherche. Essayez avec des mots-clés différents.")}catch(D){console.error("❌ Erreur lors de la recherche:",D),N("Erreur lors de la recherche : "+(D instanceof Error?D.message:String(D)))}finally{a(!1)}},C=async T=>{if(!o){alert("Vous devez être connecté pour ajouter aux favoris.");return}try{if(l.some(D=>D.id===T.id&&D.source===T.source)){alert("Cette offre est déjà dans vos favoris !");return}await Hme(o.uid,T),u(D=>[...D,T]),alert("Offre ajoutée aux favoris !")}catch(M){console.error("Erreur ajout favori:",M),alert("Erreur lors de l'ajout aux favoris.")}},R=async()=>{if(!o){alert("Vous devez être connecté pour voir vos favoris.");return}try{const T=await TI(o.uid);u(T),console.log("Favoris chargés:",T.length)}catch(T){console.error("Erreur chargement favoris:",T),alert("Erreur lors du chargement des favoris.")}},V=_?n.filter(T=>(T.source||"unknown")===_):n,k=Math.ceil(V.length/sm),I=V.slice((d-1)*sm,d*sm),$=n.reduce((T,M)=>{const D=M.source||"unknown";return T[D]=(T[D]||0)+1,T},{});return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[i.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:T=>e(T.target.value),placeholder:"Ex: développeur, marketing, designer...",onKeyPress:T=>T.key==="Enter"&&S()}),i.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>S(),disabled:s,children:s?"Recherche...":"Tout rechercher"}),i.jsxs("button",{onClick:R,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",l.length,")"]})]}),b&&i.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouvées"]}),Object.keys($).length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${_?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{x(null),h(1)},children:["Tous: ",n.length]}),Object.entries($).map(([T,M])=>i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${_===T?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{x(T),h(1)},children:[T,": ",M]},T))]})]}),I.length>0&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:I.map(T=>i.jsx(Kme,{image:m[T.id+T.source]||"/assets/job-default.jpg",companyName:T.company||void 0,title:T.title||"Titre non spécifié",subtitle:T.contract_type,location:T.location||"Non spécifié",date:T.publication_date?Yme(T.publication_date):void 0,isFavorite:l.some(M=>M.id===T.id&&M.source===T.source),onFavoriteToggle:()=>C(T),url:T.url},`${T.id}-${T.source}`))}),k>1&&i.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>h(d-1),disabled:d===1,children:"Précédent"}),Array.from({length:k}).map((T,M)=>{const D=M+1,O=D===d;return D===1||D===2||D===k||D===k-1||Math.abs(D-d)<=1?i.jsx("button",{className:`px-3 py-1 rounded border ${O?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>h(D),disabled:O,children:D},D):D===3&&d>5||D===k-2&&d<k-4?i.jsx("span",{children:"..."},D):null}),i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>h(d+1),disabled:d===k,children:"Suivant"})]}),l.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",l.length,")"]}),i.jsx("div",{className:"space-y-4",children:l.map(T=>i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:T.title}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[T.company," — ",T.location]}),i.jsxs("div",{className:"flex gap-2",children:[T.contract_type&&i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:T.contract_type}),i.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:T.source})]})]}),i.jsx("div",{className:"flex gap-2 ml-4",children:i.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${T.id}-${T.source}`))})]}),n.length===0&&!s&&b&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouvée"}),i.jsx("p",{className:"text-sm",children:"Essayez avec des mots-clés différents ou vérifiez votre configuration API."})]}),!b&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),i.jsx("p",{className:"text-sm",children:`Saisissez des mots-clés et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),v&&i.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:i.jsx("p",{className:"font-semibold text-base",children:v})}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})},Zj="6.47.3";function ts(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var y2=ts;ts.prototype._events=void 0;ts.prototype._maxListeners=void 0;ts.defaultMaxListeners=10;ts.prototype.setMaxListeners=function(t){if(!epe(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};ts.prototype.emit=function(t){var e,n,r,s,a,o;if(this._events||(this._events={}),t==="error"&&(!this._events.error||Mp(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],V8(n))return!1;if(Vo(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(Mp(n))for(s=Array.prototype.slice.call(arguments,1),o=n.slice(),r=o.length,a=0;a<r;a++)o[a].apply(this,s);return!0};ts.prototype.addListener=function(t,e){var n;if(!Vo(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Vo(e.listener)?e.listener:e),this._events[t]?Mp(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Mp(this._events[t])&&!this._events[t].warned&&(V8(this._maxListeners)?n=ts.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};ts.prototype.on=ts.prototype.addListener;ts.prototype.once=function(t,e){if(!Vo(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this};ts.prototype.removeListener=function(t,e){var n,r,s,a;if(!Vo(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||Vo(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Mp(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};ts.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],Vo(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this};ts.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:Vo(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};ts.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(Vo(e))return 1;if(e)return e.length}return 0};ts.listenerCount=function(t,e){return t.listenerCount(e)};function Vo(t){return typeof t=="function"}function epe(t){return typeof t=="number"}function Mp(t){return typeof t=="object"&&t!==null}function V8(t){return t===void 0}const tpe=zo(y2);function npe(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}var z8=npe,rpe=y2,spe=z8;function tb(t,e){this.main=t,this.fn=e,this.lastResults=null}spe(tb,rpe);tb.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};tb.prototype.getModifiedState=function(t){return this.fn(t)};var ipe=tb;function ape(t){return typeof t!="string"?t:String(t).replace(/^-/,"\\-")}function ope(t){return typeof t!="string"?t:t.replace(/^\\-/,"-")}var x2={escapeFacetValue:ape,unescapeFacetValue:ope};function lpe(t){return typeof t=="object"&&t!==null?w2(Array.isArray(t)?[]:{},t):t}function _0(t){return typeof t=="function"||Array.isArray(t)||Object.prototype.toString.call(t)==="[object Object]"}function w2(t,e){if(t===e)return t;for(var n in e)if(!(!Object.prototype.hasOwnProperty.call(e,n)||n==="__proto__"||n==="constructor")){var r=e[n],s=t[n];typeof s<"u"&&typeof r>"u"||(_0(s)&&_0(r)?t[n]=w2(s,r):t[n]=lpe(r))}return t}function cpe(t){_0(t)||(t={});for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];_0(r)&&w2(t,r)}return t}var nb=cpe;function upe(t){return t&&Object.keys(t).length>0}var b2=upe;function dpe(t,e){if(t===null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var _2=dpe,T_=nb;function R_(t){return Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})}var Vs={_getQueries:function(e,n){var r=[];return r.push({indexName:e,params:Vs._getHitsSearchParams(n)}),n.getRefinedDisjunctiveFacets().forEach(function(s){r.push({indexName:e,params:Vs._getDisjunctiveFacetSearchParams(n,s)})}),n.getRefinedHierarchicalFacets().forEach(function(s){var a=n.getHierarchicalFacetByName(s),o=n.getHierarchicalRefinement(s),l=n._getHierarchicalFacetSeparator(a);if(o.length>0&&o[0].split(l).length>1){var u=o[0].split(l).slice(0,-1).reduce(function(h,m,p){return h.concat({attribute:a.attributes[p],value:p===0?m:[h[h.length-1].value,m].join(l)})},[]);u.forEach(function(d,h){var m=Vs._getDisjunctiveFacetSearchParams(n,d.attribute,h===0);function p(b){return a.attributes.some(function(j){return j===b.split(":")[0]})}var v=(m.facetFilters||[]).reduce(function(b,j){if(Array.isArray(j)){var _=j.filter(function(x){return!p(x)});_.length>0&&b.push(_)}return typeof j=="string"&&!p(j)&&b.push(j),b},[]),N=u[h-1];h>0?m.facetFilters=v.concat(N.attribute+":"+N.value):m.facetFilters=v.length>0?v:void 0,r.push({indexName:e,params:m})})}}),r},_getHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets).concat(Vs._getHitsHierarchicalFacetsAttributes(t)).sort(),n=Vs._getFacetFilters(t),r=Vs._getNumericFilters(t),s=Vs._getTagFilters(t),a={facets:e.indexOf("*")>-1?["*"]:e,tagFilters:s};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),R_(T_({},t.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(t,e,n){var r=Vs._getFacetFilters(t,e,n),s=Vs._getNumericFilters(t,e),a=Vs._getTagFilters(t),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(o.tagFilters=a);var l=t.getHierarchicalFacetByName(e);return l?o.facets=Vs._getDisjunctiveHierarchicalFacetAttribute(t,l,n):o.facets=e,s.length>0&&(o.numericFilters=s),r.length>0&&(o.facetFilters=r),R_(T_({},t.getQueryParams(),o))},_getNumericFilters:function(t,e){if(t.numericFilters)return t.numericFilters;var n=[];return Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r]||{};Object.keys(s).forEach(function(a){var o=s[a]||[];e!==r&&o.forEach(function(l){if(Array.isArray(l)){var u=l.map(function(d){return r+a+d});n.push(u)}else n.push(r+a+l)})})}),n},_getTagFilters:function(t){return t.tagFilters?t.tagFilters:t.tagRefinements.join(",")},_getFacetFilters:function(t,e,n){var r=[],s=t.facetsRefinements||{};Object.keys(s).sort().forEach(function(u){var d=s[u]||[];d.sort().forEach(function(h){r.push(u+":"+h)})});var a=t.facetsExcludes||{};Object.keys(a).sort().forEach(function(u){var d=a[u]||[];d.sort().forEach(function(h){r.push(u+":-"+h)})});var o=t.disjunctiveFacetsRefinements||{};Object.keys(o).sort().forEach(function(u){var d=o[u]||[];if(!(u===e||!d||d.length===0)){var h=[];d.sort().forEach(function(m){h.push(u+":"+m)}),r.push(h)}});var l=t.hierarchicalFacetsRefinements||{};return Object.keys(l).sort().forEach(function(u){var d=l[u]||[],h=d[0];if(h!==void 0){var m=t.getHierarchicalFacetByName(u),p=t._getHierarchicalFacetSeparator(m),v=t._getHierarchicalRootPath(m),N,b;if(e===u){if(h.indexOf(p)===-1||!v&&n===!0||v&&v.split(p).length===h.split(p).length)return;v?(b=v.split(p).length-1,h=v):(b=h.split(p).length-2,h=h.slice(0,h.lastIndexOf(p))),N=m.attributes[b]}else b=h.split(p).length-1,N=m.attributes[b];N&&r.push([N+":"+h])}}),r},_getHitsHierarchicalFacetsAttributes:function(t){var e=[];return t.hierarchicalFacets.reduce(function(r,s){var a=t.getHierarchicalRefinement(s.name)[0];if(!a)return r.push(s.attributes[0]),r;var o=t._getHierarchicalFacetSeparator(s),l=a.split(o).length,u=s.attributes.slice(0,l+1);return r.concat(u)},e)},_getDisjunctiveHierarchicalFacetAttribute:function(t,e,n){var r=t._getHierarchicalFacetSeparator(e);if(n===!0){var s=t._getHierarchicalRootPath(e),a=0;return s&&(a=s.split(r).length),[e.attributes[a]]}var o=t.getHierarchicalRefinement(e.name)[0]||"",l=o.split(r).length-1;return e.attributes.slice(0,l+1)},getSearchForFacetQuery:function(t,e,n,r){var s=r.isDisjunctiveFacet(t)?r.clearRefinements(t):r,a={facetQuery:e,facetName:t};return typeof n=="number"&&(a.maxFacetHits=n),R_(T_({},Vs._getHitsSearchParams(s),a))}},hpe=Vs,j2=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(s){r[s]!==void 0&&(n[s]!==void 0&&delete n[s],n[s]=r[s])}),n},{})},rb=function(e,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return e[r]}};function fpe(t,e){return t.filter(function(n,r){return e.indexOf(n)>-1&&t.indexOf(n)===r})}var mpe=fpe;function U8(t){if(typeof t=="number")return t;if(typeof t=="string")return parseFloat(t);if(Array.isArray(t))return t.map(U8);throw new Error("The value should be a number, a parsable string or an array of those.")}var ppe=U8,gpe=function(e){return e===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(e)},vpe=j2,ype=b2,xpe=_2,Lc={addRefinement:function(e,n,r){if(Lc.isRefined(e,n,r))return e;var s=""+r,a=e[n]?e[n].concat(s):[s],o={};return o[n]=a,vpe({},o,e)},removeRefinement:function(e,n,r){if(r===void 0)return Lc.clearRefinement(e,function(a,o){return n===o});var s=""+r;return Lc.clearRefinement(e,function(a,o){return n===o&&s===a})},toggleRefinement:function(e,n,r){if(r===void 0)throw new Error("toggleRefinement should be used with a value");return Lc.isRefined(e,n,r)?Lc.removeRefinement(e,n,r):Lc.addRefinement(e,n,r)},clearRefinement:function(e,n,r){if(n===void 0)return ype(e)?{}:e;if(typeof n=="string")return xpe(e,[n]);if(typeof n=="function"){var s=!1,a=Object.keys(e).reduce(function(o,l){var u=e[l]||[],d=u.filter(function(h){return!n(h,l,r)});return d.length!==u.length&&(s=!0),o[l]=d,o},{});return s?a:e}},isRefined:function(e,n,r){var s=!!e[n]&&e[n].length>0;if(r===void 0||!s)return s;var a=""+r;return e[n].indexOf(a)!==-1}},wpe=Lc,k_=j2,B8=rb,RI=mpe,Qj=nb,Yj=b2,kI=_2,I_=ppe,bpe=gpe,$n=wpe;function N2(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(function(n,r){return N2(e[r],n)}):t===e}function _pe(t,e){return B8(t,function(n){return N2(n,e)})}function Ts(t){var e=t?Ts._parseNumbers(t):{};e.userToken!==void 0&&!bpe(e.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=e.facets||[],this.disjunctiveFacets=e.disjunctiveFacets||[],this.hierarchicalFacets=e.hierarchicalFacets||[],this.facetsRefinements=e.facetsRefinements||{},this.facetsExcludes=e.facetsExcludes||{},this.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements||{},this.numericRefinements=e.numericRefinements||{},this.tagRefinements=e.tagRefinements||[],this.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements||{};var n=this;Object.keys(e).forEach(function(r){var s=Ts.PARAMETERS.indexOf(r)!==-1,a=e[r]!==void 0;!s&&a&&(n[r]=e[r])})}Ts.PARAMETERS=Object.keys(new Ts);Ts._parseNumbers=function(t){if(t instanceof Ts)return t;var e={},n=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(n.forEach(function(s){var a=t[s];if(typeof a=="string"){var o=parseFloat(a);e[s]=isNaN(o)?a:o}}),Array.isArray(t.insideBoundingBox)&&(e.insideBoundingBox=t.insideBoundingBox.map(function(s){return Array.isArray(s)?s.map(function(a){return parseFloat(a)}):s})),t.numericRefinements){var r={};Object.keys(t.numericRefinements).forEach(function(s){var a=t.numericRefinements[s]||{};r[s]={},Object.keys(a).forEach(function(o){var l=a[o],u=l.map(function(d){return Array.isArray(d)?d.map(function(h){return typeof h=="string"?parseFloat(h):h}):typeof d=="string"?parseFloat(d):d});r[s][o]=u})}),e.numericRefinements=r}return Qj({},t,e)};Ts.make=function(e){var n=new Ts(e),r=e.hierarchicalFacets||[];return r.forEach(function(s){if(s.rootPath){var a=n.getHierarchicalRefinement(s.name);a.length>0&&a[0].indexOf(s.rootPath)!==0&&(n=n.clearRefinements(s.name)),a=n.getHierarchicalRefinement(s.name),a.length===0&&(n=n.toggleHierarchicalFacetRefinement(s.name,s.rootPath))}}),n};Ts.validate=function(t,e){var n=e||{};return t.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):t.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):t.numericFilters&&n.numericRefinements&&Yj(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Yj(t.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};Ts.prototype={constructor:Ts,clearRefinements:function(e){var n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:$n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:$n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:$n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:$n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(t,e,n){var r=I_(n);if(this.isNumericRefined(t,e,r))return this;var s=Qj({},this.numericRefinements);return s[t]=Qj({},s[t]),s[t][e]?(s[t][e]=s[t][e].slice(),s[t][e].push(r)):s[t][e]=[r],this.setQueryParameters({numericRefinements:s})},getConjunctiveRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsRefinements[t]||[]:[]},getDisjunctiveRefinements:function(t){return this.isDisjunctiveFacet(t)?this.disjunctiveFacetsRefinements[t]||[]:[]},getHierarchicalRefinement:function(t){return this.hierarchicalFacetsRefinements[t]||[]},getExcludeRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsExcludes[t]||[]:[]},removeNumericRefinement:function(t,e,n){var r=n;return r!==void 0?this.isNumericRefined(t,e,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e&&N2(s.val,I_(r))})}):this:e!==void 0?this.isNumericRefined(t,e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e})}):this:this.isNumericRefined(t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t})}):this},getNumericRefinements:function(t){return this.numericRefinements[t]||{}},getNumericRefinement:function(t,e){return this.numericRefinements[t]&&this.numericRefinements[t][e]},_clearNumericRefinements:function(e){if(e===void 0)return Yj(this.numericRefinements)?{}:this.numericRefinements;if(typeof e=="string")return kI(this.numericRefinements,[e]);if(typeof e=="function"){var n=!1,r=this.numericRefinements,s=Object.keys(r).reduce(function(a,o){var l=r[o],u={};return l=l||{},Object.keys(l).forEach(function(d){var h=l[d]||[],m=[];h.forEach(function(p){var v=e({val:p,op:d},o,"numeric");v||m.push(p)}),m.length!==h.length&&(n=!0),u[d]=m}),a[o]=u,a},{});return n?s:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsRefinements,e,n)?this:this.setQueryParameters({facetsRefinements:$n.addRefinement(this.facetsRefinements,e,n)})},addExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsExcludes,e,n)?this:this.setQueryParameters({facetsExcludes:$n.addRefinement(this.facetsExcludes,e,n)})},addDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return $n.isRefined(this.disjunctiveFacetsRefinements,e,n)?this:this.setQueryParameters({disjunctiveFacetsRefinements:$n.addRefinement(this.disjunctiveFacetsRefinements,e,n)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(n)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter(function(n){return n!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(n){return n!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(n){return n.name!==e})}):this},removeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsRefinements,e,n)?this.setQueryParameters({facetsRefinements:$n.removeRefinement(this.facetsRefinements,e,n)}):this},removeExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsExcludes,e,n)?this.setQueryParameters({facetsExcludes:$n.removeRefinement(this.facetsExcludes,e,n)}):this},removeDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return $n.isRefined(this.disjunctiveFacetsRefinements,e,n)?this.setQueryParameters({disjunctiveFacetsRefinements:$n.removeRefinement(this.disjunctiveFacetsRefinements,e,n)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.filter(function(r){return r!==e})};return this.setQueryParameters(n)},toggleRefinement:function(e,n){return this.toggleFacetRefinement(e,n)},toggleFacetRefinement:function(e,n){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,n);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,n);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,n);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:$n.toggleRefinement(this.facetsRefinements,e,n)})},toggleExcludeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:$n.toggleRefinement(this.facetsExcludes,e,n)})},toggleDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:$n.toggleRefinement(this.disjunctiveFacetsRefinements,e,n)})},toggleHierarchicalFacetRefinement:function(e,n){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),s={},a=this.hierarchicalFacetsRefinements[e]!==void 0&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===n||this.hierarchicalFacetsRefinements[e][0].indexOf(n+r)===0);return a?n.indexOf(r)===-1?s[e]=[]:s[e]=[n.slice(0,n.lastIndexOf(r))]:s[e]=[n],this.setQueryParameters({hierarchicalFacetsRefinements:k_({},s,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(t,e){if(this.isHierarchicalFacetRefined(t))throw new Error(t+" is already refined.");if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:k_({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(t){if(!this.isHierarchicalFacetRefined(t))return this;var e={};return e[t]=[],this.setQueryParameters({hierarchicalFacetsRefinements:k_({},e,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(t){return this.disjunctiveFacets.indexOf(t)>-1},isHierarchicalFacet:function(t){return this.getHierarchicalFacetByName(t)!==void 0},isConjunctiveFacet:function(t){return this.facets.indexOf(t)>-1},isFacetRefined:function(e,n){return this.isConjunctiveFacet(e)?$n.isRefined(this.facetsRefinements,e,n):!1},isExcludeRefined:function(e,n){return this.isConjunctiveFacet(e)?$n.isRefined(this.facetsExcludes,e,n):!1},isDisjunctiveFacetRefined:function(e,n){return this.isDisjunctiveFacet(e)?$n.isRefined(this.disjunctiveFacetsRefinements,e,n):!1},isHierarchicalFacetRefined:function(e,n){if(!this.isHierarchicalFacet(e))return!1;var r=this.getHierarchicalRefinement(e);return n?r.indexOf(n)!==-1:r.length>0},isNumericRefined:function(e,n,r){if(r===void 0&&n===void 0)return!!this.numericRefinements[e];var s=this.numericRefinements[e]&&this.numericRefinements[e][n]!==void 0;if(r===void 0||!s)return s;var a=I_(r),o=_pe(this.numericRefinements[e][n],a)!==void 0;return s&&o},isTagRefined:function(e){return this.tagRefinements.indexOf(e)!==-1},getRefinedDisjunctiveFacets:function(){var e=this,n=RI(Object.keys(this.numericRefinements).filter(function(r){return Object.keys(e.numericRefinements[r]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(r){return e.disjunctiveFacetsRefinements[r].length>0}).concat(n).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var e=this;return RI(this.hierarchicalFacets.map(function(n){return n.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(n){return e.hierarchicalFacetsRefinements[n].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return t.indexOf(e)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,n={},r=this;return Object.keys(this).forEach(function(s){var a=r[s];e.indexOf(s)===-1&&a!==void 0&&(n[s]=a)}),n},setQueryParameter:function(e,n){if(this[e]===n)return this;var r={};return r[e]=n,this.setQueryParameters(r)},setQueryParameters:function(e){if(!e)return this;var n=Ts.validate(this,e);if(n)throw n;var r=this,s=Ts._parseNumbers(e),a=Object.keys(this).reduce(function(l,u){return l[u]=r[u],l},{}),o=Object.keys(s).reduce(function(l,u){var d=l[u]!==void 0,h=s[u]!==void 0;return d&&!h?kI(l,[u]):(h&&(l[u]=s[u]),l)},a);return new this.constructor(o)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(t){return t.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(t){return t.separator||" > "},_getHierarchicalRootPath:function(t){return t.rootPath||null},_getHierarchicalShowParentLevel:function(t){return typeof t.showParentLevel=="boolean"?t.showParentLevel:!0},getHierarchicalFacetByName:function(t){return B8(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(t){if(!this.isHierarchicalFacet(t))return[];var e=this.getHierarchicalRefinement(t)[0];if(!e)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r=e.split(n);return r.map(function(s){return s.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var W8=Ts,jpe=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Npe=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(n(e[r]))return r;return-1},Spe=rb,H8=function(e,n){var r=(n||[]).map(function(s){return s.split(":")});return e.reduce(function(a,o){var l=o.split(":"),u=Spe(r,function(d){return d[0]===l[0]});return l.length>1||!u?(a[0].push(l[0]),a[1].push(l[1]),a):(a[0].push(u[0]),a[1].push(u[1]),a)},[[],[]])};function Epe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=e!==void 0,a=e===null;if(!a&&t>e||r&&s||!n)return 1;if(!r&&t<e||a&&n||!s)return-1}return 0}function Ppe(t,e,n){if(!Array.isArray(t))return[];Array.isArray(n)||(n=[]);var r=t.map(function(s,a){return{criteria:e.map(function(o){return s[o]}),index:a,value:s}});return r.sort(function(a,o){for(var l=-1;++l<a.criteria.length;){var u=Epe(a.criteria[l],o.criteria[l]);if(u)return l>=n.length?u:n[l]==="desc"?-u:u}return a.index-o.index}),r.map(function(s){return s.value})}var q8=Ppe,Cpe=Ope,G8=x2,Tpe=rb,Rpe=H8,kpe=q8,Ipe=G8.escapeFacetValue,Ape=G8.unescapeFacetValue;function Ope(t){return function(n,r){var s=t.hierarchicalFacets[r],a=t.hierarchicalFacetsRefinements[s.name]&&t.hierarchicalFacetsRefinements[s.name][0]||"",o=t._getHierarchicalFacetSeparator(s),l=t._getHierarchicalRootPath(s),u=t._getHierarchicalShowParentLevel(s),d=Rpe(t._getHierarchicalFacetSortBy(s)),h=n.every(function(v){return v.exhaustive}),m=Mpe(d,o,l,u,a),p=n;return l&&(p=n.slice(l.split(o).length)),p.reduce(m,{name:t.hierarchicalFacets[r].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:h,data:null})}}function Mpe(t,e,n,r,s){return function(o,l,u){var d=o;if(u>0){var h=0;for(d=o;h<u;){var m=d&&Array.isArray(d.data)?d.data:[];d=Tpe(m,function(v){return v.isRefined}),h++}}if(d){var p=Object.keys(l.data).map(function(v){return[v,l.data[v]]}).filter(function(v){var N=v[0];return Dpe(N,d.path||n,s,e,n,r)});d.data=kpe(p.map(function(v){var N=v[0],b=v[1];return Lpe(b,N,e,Ape(s),l.exhaustive)}),t[0],t[1])}return o}}function Dpe(t,e,n,r,s,a){return s&&(t.indexOf(s)!==0||s===t)?!1:!s&&t.indexOf(r)===-1||s&&t.split(r).length-s.split(r).length===1||t.indexOf(r)===-1&&n.indexOf(r)===-1||n.indexOf(t)===0||t.indexOf(e+r)===0&&(a||t.indexOf(n)===0)}function Lpe(t,e,n,r,s){var a=e.split(n);return{name:a[a.length-1].trim(),path:e,escapedValue:Ipe(e),count:t,isRefined:r===e||r.indexOf(e+n)===0,exhaustive:s,data:null}}var A_=jpe,j0=j2,K8=x2,Ki=rb,im=Npe,Fpe=H8,$pe=nb,Z8=q8,II=K8.escapeFacetValue,Q8=K8.unescapeFacetValue,Vpe=Cpe;function AI(t){var e={};return t.forEach(function(n,r){e[n]=r}),e}function O_(t,e,n){e&&e[n]&&(t.stats=e[n])}function zpe(t,e){return Ki(t,function(r){var s=r.attributes||[];return s.indexOf(e)>-1})}function Hl(t,e,n){var r=e[0];this._rawResults=e;var s=this;Object.keys(r).forEach(function(h){s[h]=r[h]}),Object.keys(n||{}).forEach(function(h){s[h]=n[h]}),this.processingTimeMS=e.reduce(function(h,m){return m.processingTimeMS===void 0?h:h+m.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=t.hierarchicalFacets.map(function(){return[]}),this.facets=[];var a=t.getRefinedDisjunctiveFacets(),o=AI(t.facets),l=AI(t.disjunctiveFacets),u=1,d=r.facets||{};Object.keys(d).forEach(function(h){var m=d[h],p=zpe(t.hierarchicalFacets,h);if(p){var v=p.attributes.indexOf(h),N=im(t.hierarchicalFacets,function(x){return x.name===p.name});s.hierarchicalFacets[N][v]={attribute:h,data:m,exhaustive:r.exhaustiveFacetsCount}}else{var b=t.disjunctiveFacets.indexOf(h)!==-1,j=t.facets.indexOf(h)!==-1,_;b&&(_=l[h],s.disjunctiveFacets[_]={name:h,data:m,exhaustive:r.exhaustiveFacetsCount},O_(s.disjunctiveFacets[_],r.facets_stats,h)),j&&(_=o[h],s.facets[_]={name:h,data:m,exhaustive:r.exhaustiveFacetsCount},O_(s.facets[_],r.facets_stats,h))}}),this.hierarchicalFacets=A_(this.hierarchicalFacets),a.forEach(function(h){var m=e[u],p=m&&m.facets?m.facets:{},v=t.getHierarchicalFacetByName(h);Object.keys(p).forEach(function(N){var b=p[N],j;if(v){j=im(t.hierarchicalFacets,function(S){return S.name===v.name});var _=im(s.hierarchicalFacets[j],function(S){return S.attribute===N});if(_===-1)return;s.hierarchicalFacets[j][_].data=$pe({},s.hierarchicalFacets[j][_].data,b)}else{j=l[N];var x=r.facets&&r.facets[N]||{};s.disjunctiveFacets[j]={name:N,data:j0({},b,x),exhaustive:m.exhaustiveFacetsCount},O_(s.disjunctiveFacets[j],m.facets_stats,N),t.disjunctiveFacetsRefinements[N]&&t.disjunctiveFacetsRefinements[N].forEach(function(S){!s.disjunctiveFacets[j].data[S]&&t.disjunctiveFacetsRefinements[N].indexOf(Q8(S))>-1&&(s.disjunctiveFacets[j].data[S]=0)})}}),u++}),t.getRefinedHierarchicalFacets().forEach(function(h){var m=t.getHierarchicalFacetByName(h),p=t._getHierarchicalFacetSeparator(m),v=t.getHierarchicalRefinement(h);v.length===0||v[0].split(p).length<2||e.slice(u).forEach(function(N){var b=N&&N.facets?N.facets:{};Object.keys(b).forEach(function(j){var _=b[j],x=im(t.hierarchicalFacets,function(V){return V.name===m.name}),S=im(s.hierarchicalFacets[x],function(V){return V.attribute===j});if(S!==-1){var C={};if(v.length>0){var R=v[0].split(p)[0];C[R]=s.hierarchicalFacets[x][S].data[R]}s.hierarchicalFacets[x][S].data=j0(C,_,s.hierarchicalFacets[x][S].data)}}),u++})}),Object.keys(t.facetsExcludes).forEach(function(h){var m=t.facetsExcludes[h],p=o[h];s.facets[p]={name:h,data:d[h],exhaustive:r.exhaustiveFacetsCount},m.forEach(function(v){s.facets[p]=s.facets[p]||{name:h},s.facets[p].data=s.facets[p].data||{},s.facets[p].data[v]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Vpe(t)),this.facets=A_(this.facets),this.disjunctiveFacets=A_(this.disjunctiveFacets),this._state=t}Hl.prototype.getFacetByName=function(t){function e(n){return n.name===t}return Ki(this.facets,e)||Ki(this.disjunctiveFacets,e)||Ki(this.hierarchicalFacets,e)};function Upe(t,e){function n(h){return h.name===e}if(t._state.isConjunctiveFacet(e)){var r=Ki(t.facets,n);return r?Object.keys(r.data).map(function(h){var m=II(h);return{name:h,escapedValue:m,count:r.data[h],isRefined:t._state.isFacetRefined(e,m),isExcluded:t._state.isExcludeRefined(e,h)}}):[]}else if(t._state.isDisjunctiveFacet(e)){var s=Ki(t.disjunctiveFacets,n);return s?Object.keys(s.data).map(function(h){var m=II(h);return{name:h,escapedValue:m,count:s.data[h],isRefined:t._state.isDisjunctiveFacetRefined(e,m)}}):[]}else if(t._state.isHierarchicalFacet(e)){var a=Ki(t.hierarchicalFacets,n);if(!a)return a;var o=t._state.getHierarchicalFacetByName(e),l=t._state._getHierarchicalFacetSeparator(o),u=Q8(t._state.getHierarchicalRefinement(e)[0]||"");u.indexOf(o.rootPath)===0&&(u=u.replace(o.rootPath+l,""));var d=u.split(l);return d.unshift(e),Y8(a,d,0),a}}function Y8(t,e,n){t.isRefined=t.name===e[n],t.data&&t.data.forEach(function(r){Y8(r,e,n+1)})}function J8(t,e,n,r){if(r=r||0,Array.isArray(e))return t(e,n[r]);if(!e.data||e.data.length===0)return e;var s=e.data.map(function(l){return J8(t,l,n,r+1)}),a=t(s,n[r]),o=j0({data:a},e);return o}Hl.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function Bpe(t,e){return e.sort(t)}function Wpe(t,e){var n=[],r=[],s=e.order||[],a=s.reduce(function(u,d,h){return u[d]=h,u},{});t.forEach(function(u){var d=u.path||u.name;a[d]!==void 0?n[a[d]]=u:r.push(u)}),n=n.filter(function(u){return u});var o=e.sortRemainingBy,l;return o==="hidden"?n:(o==="alpha"?l=[["path","name"],["asc","asc"]]:l=[["count"],["desc"]],n.concat(Z8(r,l[0],l[1])))}function Hpe(t,e){return t.renderingContent&&t.renderingContent.facetOrdering&&t.renderingContent.facetOrdering.values&&t.renderingContent.facetOrdering.values[e]}Hl.prototype.getFacetValues=function(t,e){var n=Upe(this,t);if(n){var r=j0({},e,{sortBy:Hl.DEFAULT_SORT,facetOrdering:!(e&&e.sortBy)}),s=this,a;if(Array.isArray(n))a=[t];else{var o=s._state.getHierarchicalFacetByName(n.name);a=o.attributes}return J8(function(l,u){if(r.facetOrdering){var d=Hpe(s,u);if(d)return Wpe(l,d)}if(Array.isArray(r.sortBy)){var h=Fpe(r.sortBy,Hl.DEFAULT_SORT);return Z8(l,h[0],h[1])}else if(typeof r.sortBy=="function")return Bpe(r.sortBy,l);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},n,a)}};Hl.prototype.getFacetStats=function(t){if(this._state.isConjunctiveFacet(t))return OI(this.facets,t);if(this._state.isDisjunctiveFacet(t))return OI(this.disjunctiveFacets,t)};function OI(t,e){var n=Ki(t,function(r){return r.name===e});return n&&n.stats}Hl.prototype.getRefinements=function(){var t=this._state,e=this,n=[];return Object.keys(t.facetsRefinements).forEach(function(r){t.facetsRefinements[r].forEach(function(s){n.push(M_(t,"facet",r,s,e.facets))})}),Object.keys(t.facetsExcludes).forEach(function(r){t.facetsExcludes[r].forEach(function(s){n.push(M_(t,"exclude",r,s,e.facets))})}),Object.keys(t.disjunctiveFacetsRefinements).forEach(function(r){t.disjunctiveFacetsRefinements[r].forEach(function(s){n.push(M_(t,"disjunctive",r,s,e.disjunctiveFacets))})}),Object.keys(t.hierarchicalFacetsRefinements).forEach(function(r){t.hierarchicalFacetsRefinements[r].forEach(function(s){n.push(qpe(t,r,s,e.hierarchicalFacets))})}),Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r];Object.keys(s).forEach(function(a){s[a].forEach(function(o){n.push({type:"numeric",attributeName:r,name:o,numericValue:o,operator:a})})})}),t.tagRefinements.forEach(function(r){n.push({type:"tag",attributeName:"_tags",name:r})}),n};function M_(t,e,n,r,s){var a=Ki(s,function(u){return u.name===n}),o=a&&a.data&&a.data[r]?a.data[r]:0,l=a&&a.exhaustive||!1;return{type:e,attributeName:n,name:r,count:o,exhaustive:l}}function qpe(t,e,n,r){var s=t.getHierarchicalFacetByName(e),a=t._getHierarchicalFacetSeparator(s),o=n.split(a),l=Ki(r,function(p){return p.name===e}),u=o.reduce(function(p,v){var N=p&&Ki(p.data,function(b){return b.name===v});return N!==void 0?N:p},l),d=u&&u.count||0,h=u&&u.exhaustive||!1,m=u&&u.path||"";return{type:"hierarchical",attributeName:e,name:m,count:d,exhaustive:h}}var X8=Hl,e9="3.14.0",Gpe=y2,Kpe=ipe,Zpe=x2.escapeFacetValue,Qpe=z8,Ype=nb,Jpe=b2,Xpe=_2,$h=hpe,S2=W8,Jj=X8,t9=e9;function Ye(t,e,n){typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+t9+")"),this.setClient(t);var r=n||{};r.index=e,this.state=S2.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}Qpe(Ye,Gpe);Ye.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};Ye.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};Ye.prototype.getQuery=function(){var t=this.state;return $h._getHitsSearchParams(t)};Ye.prototype.searchOnce=function(t,e){var n=t?this.state.setQueryParameters(t):this.state,r=$h._getQueries(n.index,n),s=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),e){this.client.search(r).then(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(null,new Jj(n,a.results),n)}).catch(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(a,null,n)});return}return this.client.search(r).then(function(a){return s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),{content:new Jj(n,a.results),state:n,_originalResponse:a}},function(a){throw s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),a})};Ye.prototype.findAnswers=function(t){console.warn("[algoliasearch-helper] answers is no longer supported");var e=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(e),s=Ype({attributesForPrediction:t.attributesForPrediction,nbHits:t.nbHits},{params:Xpe($h._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(a);var o=this.client.initIndex(r.index);if(typeof o.findAnswers!="function")throw new Error(a);return o.findAnswers(r.query,t.queryLanguages,s)};Ye.prototype.searchForFacetValues=function(t,e,n,r){var s=typeof this.client.searchForFacetValues=="function",a=typeof this.client.initIndex=="function";if(!s&&!a&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var o=this.state.setQueryParameters(r||{}),l=o.isDisjunctiveFacet(t),u=$h.getSearchForFacetQuery(t,e,n,o);this._currentNbQueries++;var d=this,h;return s?h=this.client.searchForFacetValues([{indexName:o.index,params:u}]):a?h=this.client.initIndex(o.index).searchForFacetValues(u):(delete u.facetName,h=this.client.search([{type:"facet",facet:t,indexName:o.index,params:u}]).then(function(p){return p.results[0]})),this.emit("searchForFacetValues",{state:o,facet:t,query:e}),h.then(function(p){return d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),p=Array.isArray(p)?p[0]:p,p.facetHits.forEach(function(v){v.escapedValue=Zpe(v.value),v.isRefined=l?o.isDisjunctiveFacetRefined(t,v.escapedValue):o.isFacetRefined(t,v.escapedValue)}),p},function(m){throw d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),m})};Ye.prototype.setQuery=function(t){return this._change({state:this.state.resetPage().setQuery(t),isPageReset:!0}),this};Ye.prototype.clearRefinements=function(t){return this._change({state:this.state.resetPage().clearRefinements(t),isPageReset:!0}),this};Ye.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};Ye.prototype.addDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};Ye.prototype.addHierarchicalFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.addNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().addNumericRefinement(t,e,n),isPageReset:!0}),this};Ye.prototype.addFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};Ye.prototype.addFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().addExcludeRefinement(t,e),isPageReset:!0}),this};Ye.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};Ye.prototype.addTag=function(t){return this._change({state:this.state.resetPage().addTagRefinement(t),isPageReset:!0}),this};Ye.prototype.removeNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().removeNumericRefinement(t,e,n),isPageReset:!0}),this};Ye.prototype.removeDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};Ye.prototype.removeHierarchicalFacetRefinement=function(t){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(t),isPageReset:!0}),this};Ye.prototype.removeFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};Ye.prototype.removeFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().removeExcludeRefinement(t,e),isPageReset:!0}),this};Ye.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};Ye.prototype.removeTag=function(t){return this._change({state:this.state.resetPage().removeTagRefinement(t),isPageReset:!0}),this};Ye.prototype.toggleFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};Ye.prototype.toggleRefinement=function(t,e){return this.toggleFacetRefinement(t,e)};Ye.prototype.toggleFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().toggleFacetRefinement(t,e),isPageReset:!0}),this};Ye.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};Ye.prototype.toggleTag=function(t){return this._change({state:this.state.resetPage().toggleTagRefinement(t),isPageReset:!0}),this};Ye.prototype.nextPage=function(){var t=this.state.page||0;return this.setPage(t+1)};Ye.prototype.previousPage=function(){var t=this.state.page||0;return this.setPage(t-1)};function n9(t){if(t<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(t),isPageReset:!1}),this}Ye.prototype.setCurrentPage=n9;Ye.prototype.setPage=n9;Ye.prototype.setIndex=function(t){return this._change({state:this.state.resetPage().setIndex(t),isPageReset:!0}),this};Ye.prototype.setQueryParameter=function(t,e){return this._change({state:this.state.resetPage().setQueryParameter(t,e),isPageReset:!0}),this};Ye.prototype.setState=function(t){return this._change({state:S2.make(t),isPageReset:!1}),this};Ye.prototype.overrideStateWithoutTriggeringChangeEvent=function(t){return this.state=new S2(t),this};Ye.prototype.hasRefinements=function(t){return Jpe(this.state.getNumericRefinements(t))?!0:this.state.isConjunctiveFacet(t)?this.state.isFacetRefined(t):this.state.isDisjunctiveFacet(t)?this.state.isDisjunctiveFacetRefined(t):this.state.isHierarchicalFacet(t)?this.state.isHierarchicalFacetRefined(t):!1};Ye.prototype.isExcluded=function(t,e){return this.state.isExcludeRefined(t,e)};Ye.prototype.isDisjunctiveRefined=function(t,e){return this.state.isDisjunctiveFacetRefined(t,e)};Ye.prototype.hasTag=function(t){return this.state.isTagRefined(t)};Ye.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};Ye.prototype.getIndex=function(){return this.state.index};function r9(){return this.state.page}Ye.prototype.getCurrentPage=r9;Ye.prototype.getPage=r9;Ye.prototype.getTags=function(){return this.state.tagRefinements};Ye.prototype.getRefinements=function(t){var e=[];if(this.state.isConjunctiveFacet(t)){var n=this.state.getConjunctiveRefinements(t);n.forEach(function(o){e.push({value:o,type:"conjunctive"})});var r=this.state.getExcludeRefinements(t);r.forEach(function(o){e.push({value:o,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(t)){var s=this.state.getDisjunctiveRefinements(t);s.forEach(function(o){e.push({value:o,type:"disjunctive"})})}var a=this.state.getNumericRefinements(t);return Object.keys(a).forEach(function(o){var l=a[o];e.push({value:l,operator:o,type:"numeric"})}),e};Ye.prototype.getNumericRefinement=function(t,e){return this.state.getNumericRefinement(t,e)};Ye.prototype.getHierarchicalFacetBreadcrumb=function(t){return this.state.getHierarchicalFacetBreadcrumb(t)};Ye.prototype._search=function(t){var e=this.state,n=[],r=[];t.onlyWithDerivedHelpers||(r=$h._getQueries(e.index,e),n.push({state:e,queriesCount:r.length,helper:this}),this.emit("search",{state:e,results:this.lastResults}));var s=this.derivedHelpers.map(function(l){var u=l.getModifiedState(e),d=u.index?$h._getQueries(u.index,u):[];return n.push({state:u,queriesCount:d.length,helper:l}),l.emit("search",{state:u,results:l.lastResults}),d}),a=Array.prototype.concat.apply(r,s),o=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,n,o));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(l){this.emit("error",{error:l})}};Ye.prototype._dispatchAlgoliaResponse=function(t,e,n){if(!(e<this._lastQueryIdReceived)){this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var r=n.results.slice();t.forEach(function(s){var a=s.state,o=s.queriesCount,l=s.helper,u=r.splice(0,o);if(!a.index){l.emit("result",{results:null,state:a});return}l.lastResults=new Jj(a,u),l.emit("result",{results:l.lastResults,state:a})})}};Ye.prototype._dispatchAlgoliaError=function(t,e){t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this.emit("error",{error:e}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};Ye.prototype.containsRefinement=function(t,e,n,r){return t||e.length!==0||n.length!==0||r.length!==0};Ye.prototype._hasDisjunctiveRefinements=function(t){return this.state.disjunctiveRefinements[t]&&this.state.disjunctiveRefinements[t].length>0};Ye.prototype._change=function(t){var e=t.state,n=t.isPageReset;e!==this.state&&(this.state=e,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))};Ye.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};Ye.prototype.setClient=function(t){return this.client===t?this:(typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+t9+")"),this.client=t,this)};Ye.prototype.getClient=function(){return this.client};Ye.prototype.derive=function(t){var e=new Kpe(this,t);return this.derivedHelpers.push(e),e};Ye.prototype.detachDerivedHelper=function(t){var e=this.derivedHelpers.indexOf(t);if(e===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)};Ye.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var ege=Ye,s9=ege,tge=W8,nge=X8;function nv(t,e,n){return new s9(t,e,n)}nv.version=e9;nv.AlgoliaSearchHelper=s9;nv.SearchParameters=tge;nv.SearchResults=nge;var rge=nv;const zi=zo(rge);function zn(){}function sge(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ka(t,e){if(t===void 0||typeof t!="function")throw new Error("The render function is not valid (received type ".concat(sge(t),`).

`).concat(e))}function MI(t){var e=t.helper,n=t.attributesToClear,r=n===void 0?[]:n,s=e.state.setPage(0);return s=r.reduce(function(a,o){return s.isNumericRefined(o)?a.removeNumericRefinement(o):s.isHierarchicalFacet(o)?a.removeHierarchicalFacetRefinement(o):s.isDisjunctiveFacet(o)?a.removeDisjunctiveFacetRefinement(o):s.isConjunctiveFacet(o)?a.removeFacetRefinement(o):a},s),r.indexOf("query")!==-1&&(s=s.setQuery("")),s}var ige={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i9=/[&<>"']/g,age=RegExp(i9.source);function oge(t){return t&&age.test(t)?t.replace(i9,function(e){return ige[e]}):t}var lge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},a9=/&(amp|quot|lt|gt|#39);/g,cge=RegExp(a9.source);function uge(t){return t&&cge.test(t)?t.replace(a9,function(e){return lge[e]}):t}function Xj(t){"@babel/helpers - typeof";return Xj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xj(t)}function dge(t){return t===null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function hge(t){return Xj(t)==="object"&&t!==null}function o9(t){if(!hge(t)||dge(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function fge(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eN.apply(this,arguments)}function DI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ud(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DI(Object(n),!0).forEach(function(r){l9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l9(t,e,n){return e=mge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mge(t){var e=pge(t,"string");return Dp(e)==="symbol"?e:String(e)}function pge(t,e){if(Dp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vh={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},ns={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function c9(t){return oge(t).replace(new RegExp(Vh.highlightPreTag,"g"),ns.highlightPreTag).replace(new RegExp(Vh.highlightPostTag,"g"),ns.highlightPostTag)}function N0(t){return o9(t)&&typeof t.value!="string"?Object.keys(t).reduce(function(e,n){return Ud(Ud({},e),{},l9({},n,N0(t[n])))},{}):Array.isArray(t)?t.map(N0):Ud(Ud({},t),{},{value:c9(t.value)})}function gge(t){return t.__escaped===void 0&&(t=t.map(function(e){var n=eN({},(fge(e),e));return n._highlightResult&&(n._highlightResult=N0(n._highlightResult)),n._snippetResult&&(n._snippetResult=N0(n._snippetResult)),n}),t.__escaped=!0),t}function vge(t){return t.map(function(e){return Ud(Ud({},e),{},{highlighted:c9(e.highlighted)})})}function u9(t){var e=ns.highlightPreTag,n=ns.highlightPostTag;return t.map(function(r){return r.isHighlighted?e+r.value+n:r.value}).join("")}function yge(t,e,n){return t.state.isHierarchicalFacet(e)?t.state.isHierarchicalFacetRefined(e,n):t.state.isConjunctiveFacet(e)?t.state.isFacetRefined(e,n):t.state.isDisjunctiveFacetRefined(e,n)}function tN(t){"@babel/helpers - typeof";return tN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tN(t)}function xge(t,e){return jge(t)||_ge(t,e)||bge(t,e)||wge()}function wge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(t,e){if(t){if(typeof t=="string")return LI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LI(t,e)}}function LI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _ge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function jge(t){if(Array.isArray(t))return t}function Nge(t){var e=t.instantSearchInstance,n=t.helper,r=t.attribute,s=t.widgetType,a=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=u[1],m=u[2],p=m===void 0?"Filter Applied":m,v=u[0].split(":"),N=xge(v,2),b=N[0],j=N[1],_=typeof r=="string"?r:r(h);u.length===1&&tN(u[0])==="object"?e.sendEventToInsights(u[0]):b==="click"&&(u.length===2||u.length===3)&&(yge(n,_,h)||e.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:s,eventType:b,eventModifier:j,payload:{eventName:p,index:n.getIndex(),filters:["".concat(_,":").concat(h)]},attribute:_}))};return a}function d9(t){return btoa(encodeURIComponent(JSON.stringify(t)))}function Sge(t,e){return Tge(t)||Cge(t,e)||Pge(t,e)||Ege()}function Ege(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pge(t,e){if(t){if(typeof t=="string")return FI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FI(t,e)}}function FI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Tge(t){if(Array.isArray(t))return t}function nN(t){"@babel/helpers - typeof";return nN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nN(t)}function Rge(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,n=[],r=0;r<Math.ceil(t.length/e);r++)n.push(t.slice(r*e,(r+1)*e));return n}function h9(t){var e=t.index,n=t.widgetType;t.methodName;var r=t.args,s=t.instantSearchInstance;if(r.length===1&&nN(r[0])==="object")return[r[0]];var a=r[0].split(":"),o=Sge(a,2),l=o[0],u=o[1],d=r[1],h=r[2];if(!d)return[];if((l==="click"||l==="conversion")&&!h)return[];var m=Array.isArray(d)?d:[d];if(m.length===0)return[];var p=m[0].__queryID,v=Rge(m),N=v.map(function(j){return j.map(function(_){return _.objectID})}),b=v.map(function(j){return j.map(function(_){return _.__position})});return l==="view"?s.status!=="idle"?[]:v.map(function(j,_){return{insightsMethod:"viewedObjectIDs",widgetType:n,eventType:l,payload:{eventName:h||"Hits Viewed",index:e,objectIDs:N[_]},hits:j,eventModifier:u}}):l==="click"?v.map(function(j,_){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:n,eventType:l,payload:{eventName:h||"Hit Clicked",index:e,queryID:p,objectIDs:N[_],positions:b[_]},hits:j,eventModifier:u}}):l==="conversion"?v.map(function(j,_){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:n,eventType:l,payload:{eventName:h||"Hit Converted",index:e,queryID:p,objectIDs:N[_]},hits:j,eventModifier:u}}):[]}function kge(t){var e=t.instantSearchInstance,n=t.index,r=t.widgetType,s={},a=void 0,o=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var m=h9({widgetType:r,index:n,methodName:"sendEvent",args:d,instantSearchInstance:e});m.forEach(function(p){p.eventType==="click"&&p.eventModifier==="internal"&&s[p.eventType]||(s[p.eventType]=!0,e.sendEventToInsights(p))}),clearTimeout(a),a=setTimeout(function(){s={}},0)};return o}function Ige(t){var e=t.index,n=t.widgetType,r=t.instantSearchInstance,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=h9({widgetType:n,index:e,methodName:"bindEvent",args:l,instantSearchInstance:r});return d.length?"data-insights-event=".concat(d9(d)):""};return s}function Su(t){return t.$$type==="ais.index"}function rN(t,e){var n=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:n})),e.getWidgets().filter(Su).forEach(function(r){return rN(t,r)})}var Age=Promise.resolve();function am(t){var e=null,n=!1,r=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];e===null&&(e=Age.then(function(){if(e=null,n){n=!1;return}t.apply(void 0,o)}))};return r.wait=function(){if(e===null)throw new Error("The deferred function should be called before calling `wait()`");return e},r.cancel=function(){e!==null&&(n=!0)},r}function Oge(t){var e=t.name,n=t.connector,r=n===void 0?!1:n;return["https://www.algolia.com/doc/api-reference/widgets/",e,"/js/",r?"#connector":""].join("")}function ni(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(s){return Oge(s)}).join(", ");return function(s){return[s,"See documentation: ".concat(r)].filter(Boolean).join(`

`)}}function Mge(t){return typeof t=="string"?t.replace(/^\\-/,"-"):t}function jm(t){return typeof t=="number"&&t<0||typeof t=="string"?String(t).replace(/^-/,"\\-"):t}function Eu(t,e){for(var n,r=0;r<t.length;r++)if(n=t[r],e(n,r,t))return n}function Dge(t,e){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function Lge(t){if(t.transporter){var e=t.transporter,n=e.headers,r=e.queryParameters,s="x-algolia-application-id",a="x-algolia-api-key",o=n[s]||r[s],l=n[a]||r[a];return[o,l]}else return[t.applicationID,t.apiKey]}function f9(t){var e=ns.highlightPostTag,n=ns.highlightPreTag,r=t.split(n),s=r.shift(),a=s?[{value:s,isHighlighted:!1}]:[];return r.forEach(function(o){var l=o.split(e);a.push({value:l[0],isHighlighted:!0}),l[1]!==""&&a.push({value:l[1],isHighlighted:!1})}),a}var Fge=new RegExp(/\w/i);function $ge(t,e){var n,r,s=t[e],a=((n=t[e+1])===null||n===void 0?void 0:n.isHighlighted)||!0,o=((r=t[e-1])===null||r===void 0?void 0:r.isHighlighted)||!0;return!Fge.test(uge(s.value))&&o===a?o:s.isHighlighted}function sb(t,e){var n=Array.isArray(e)?e:e.split(".");return n.reduce(function(r,s){return r&&r[s]},t)}function D_(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a={type:e,attribute:n,name:r,escapedValue:jm(r)},o=Eu(s,function(v){return v.name===n}),l;if(e==="hierarchical"){for(var u=t.getHierarchicalFacetByName(n),d=r.split(u.separator),h=function(N){return function(b){return N[b]}},m=function(N){o=o&&o.data&&Eu(Object.keys(o.data).map(h(o.data)),function(b){return b.name===d[N]})},p=0;o!==void 0&&p<d.length;++p)m(p);l=o&&o.count}else l=o&&o.data&&o.data[a.name];return l!==void 0&&(a.count=l),o&&o.exhaustive!==void 0&&(a.exhaustive=o.exhaustive),a}function m9(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=[],s=e.facetsRefinements,a=s===void 0?{}:s,o=e.facetsExcludes,l=o===void 0?{}:o,u=e.disjunctiveFacetsRefinements,d=u===void 0?{}:u,h=e.hierarchicalFacetsRefinements,m=h===void 0?{}:h,p=e.numericRefinements,v=p===void 0?{}:p,N=e.tagRefinements,b=N===void 0?[]:N;return Object.keys(a).forEach(function(j){var _=a[j];_.forEach(function(x){r.push(D_(e,"facet",j,x,t.facets))})}),Object.keys(l).forEach(function(j){var _=l[j];_.forEach(function(x){r.push({type:"exclude",attribute:j,name:x,exclude:!0})})}),Object.keys(d).forEach(function(j){var _=d[j];_.forEach(function(x){r.push(D_(e,"disjunctive",j,Mge(x),t.disjunctiveFacets))})}),Object.keys(m).forEach(function(j){var _=m[j];_.forEach(function(x){r.push(D_(e,"hierarchical",j,x,t.hierarchicalFacets))})}),Object.keys(v).forEach(function(j){var _=v[j];Object.keys(_).forEach(function(x){var S=x,C=_[S],R=Array.isArray(C)?C:[C];R.forEach(function(V){r.push({type:"numeric",attribute:j,name:"".concat(V),numericValue:V,operator:S})})})}),b.forEach(function(j){r.push({type:"tag",attribute:"_tags",name:j})}),n&&e.query&&e.query.trim()&&r.push({attribute:"query",type:"query",name:e.query,query:e.query}),r}function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(r){Vge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vge(t,e,n){return e=zge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zge(t){var e=Uge(t,"string");return Lp(e)==="symbol"?e:String(e)}function Uge(t,e){if(Lp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bge(t,e,n){return t.map(function(r,s){return VI(VI({},r),{},{__position:n*e+s+1})})}function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function zI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function UI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zI(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return e=Hge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hge(t){var e=qge(t,"string");return Fp(e)==="symbol"?e:String(e)}function qge(t,e){if(Fp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gge(t,e){return e?t.map(function(n){return UI(UI({},n),{},{__queryID:e})}):t}function BI(t){return t!==Object(t)}function p9(t,e){if(t===e)return!0;if(BI(t)||BI(e)||typeof t=="function"||typeof e=="function")return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n=0,r=Object.keys(t);n<r.length;n++){var s=r[n];if(!(s in e)||!p9(t[s],e[s]))return!1}return!0}function ln(t){return typeof t=="number"&&isFinite(t)}function g9(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}var Kge=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function WI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WI(Object(n),!0).forEach(function(r){Zge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zge(t,e,n){return e=Qge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qge(t){var e=Yge(t,"string");return $p(e)==="symbol"?e:String(e)}function Yge(t,e){if($p(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jge(t,e){if(t==null)return{};var n=Xge(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xge(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var eve=function(e,n){n.facets,n.disjunctiveFacets,n.facetsRefinements,n.facetsExcludes,n.disjunctiveFacetsRefinements,n.numericRefinements,n.tagRefinements,n.hierarchicalFacets,n.hierarchicalFacetsRefinements,n.ruleContexts;var r=Jge(n,Kge);return e.setQueryParameters(r)},tve=function(e,n){return n.facets.reduce(function(r,s){return r.addFacet(s)},e)},nve=function(e,n){return n.disjunctiveFacets.reduce(function(r,s){return r.addDisjunctiveFacet(s)},e)},rve=function(e,n){return e.setQueryParameters({hierarchicalFacets:n.hierarchicalFacets.reduce(function(r,s){var a=Dge(r,function(l){return l.name===s.name});if(a===-1)return r.concat(s);var o=r.slice();return o.splice(a,1,s),o},e.hierarchicalFacets)})},sve=function(e,n){return n.tagRefinements.reduce(function(r,s){return r.addTagRefinement(s)},e)},ive=function(e,n){return e.setQueryParameters({facetsRefinements:Ba(Ba({},e.facetsRefinements),n.facetsRefinements)})},ave=function(e,n){return e.setQueryParameters({facetsExcludes:Ba(Ba({},e.facetsExcludes),n.facetsExcludes)})},ove=function(e,n){return e.setQueryParameters({disjunctiveFacetsRefinements:Ba(Ba({},e.disjunctiveFacetsRefinements),n.disjunctiveFacetsRefinements)})},lve=function(e,n){return e.setQueryParameters({numericRefinements:Ba(Ba({},e.numericRefinements),n.numericRefinements)})},cve=function(e,n){return e.setQueryParameters({hierarchicalFacetsRefinements:Ba(Ba({},e.hierarchicalFacetsRefinements),n.hierarchicalFacetsRefinements)})},uve=function(e,n){var r=g9([].concat(e.ruleContexts).concat(n.ruleContexts).filter(Boolean));return r.length>0?e.setQueryParameters({ruleContexts:r}):e},qm=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(s,a){var o=cve(s,a),l=rve(o,a),u=sve(l,a),d=lve(u,a),h=ove(d,a),m=ave(h,a),p=ive(m,a),v=nve(p,a),N=uve(v,a),b=tve(N,a);return eve(b,a)})};function dve(t){return pve(t)||mve(t)||fve(t)||hve()}function hve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fve(t,e){if(t){if(typeof t=="string")return sN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sN(t,e)}}function mve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pve(t){if(Array.isArray(t))return sN(t)}function sN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HI(t){var e=t.start,n=e===void 0?0:e,r=t.end,s=t.step,a=s===void 0?1:s,o=a===0?1:a,l=Math.round((r-n)/o);return dve(Array(l)).map(function(u,d){return n+d*o})}function Nm(t,e,n){var r=e.getHelper();return{uiState:n,helper:r,parent:e,instantSearchInstance:t,state:r.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,scopedResults:[],searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function qI(t,e){var n=e.getResults(),r=e.getHelper();return{helper:r,parent:e,instantSearchInstance:t,results:n,scopedResults:e.getScopedResults(),state:n?n._state:r.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function gve(t){for(var e=t.getParent(),n=[t.getHelper().state];e!==null;)n=[e.getHelper().state].concat(n),e=e.getParent();return n}function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(n),!0).forEach(function(r){vve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vve(t,e,n){return e=yve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yve(t){var e=xve(t,"string");return Vp(e)==="symbol"?e:String(e)}function xve(t,e){if(Vp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v9(t){return t.some(function(e){return e.isHighlighted})?t.map(function(e,n){return gy(gy({},e),{},{isHighlighted:!$ge(t,n)})}):t.map(function(e){return gy(gy({},e),{},{isHighlighted:!1})})}function Nl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fallback:function(){}},n=e.fallback;return typeof window>"u"?n():t({window})}function L_(t){return Array.isArray(t)?t:[t]}function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){y9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y9(t,e,n){return e=wve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wve(t){var e=bve(t,"string");return zp(e)==="symbol"?e:String(e)}function bve(t,e){if(zp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _ve=ni({name:"configure",connector:!0});function ZI(t,e){return t.setQueryParameters(Object.keys(e.searchParameters).reduce(function(n,r){return jr(jr({},n),{},y9({},r,void 0))},{}))}var jve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zn,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return function(r){if(!r||!o9(r.searchParameters))throw new Error(_ve("The `searchParameters` option expects an object."));var s={};function a(o){return function(l){var u=ZI(o.state,r),d=qm(u,new zi.SearchParameters(l));r.searchParameters=l,o.setState(d).search()}}return{$$type:"ais.configure",init:function(l){var u=l.instantSearchInstance;e(jr(jr({},this.getWidgetRenderState(l)),{},{instantSearchInstance:u}),!0)},render:function(l){var u=l.instantSearchInstance;e(jr(jr({},this.getWidgetRenderState(l)),{},{instantSearchInstance:u}),!1)},dispose:function(l){var u=l.state;return n(),ZI(u,r)},getRenderState:function(l,u){var d,h=this.getWidgetRenderState(u);return jr(jr({},l),{},{configure:jr(jr({},h),{},{widgetParams:jr(jr({},h.widgetParams),{},{searchParameters:qm(new zi.SearchParameters((d=l.configure)===null||d===void 0?void 0:d.widgetParams.searchParameters),new zi.SearchParameters(h.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(l){var u=l.helper;return s.refine||(s.refine=a(u)),{refine:s.refine,widgetParams:r}},getWidgetSearchParameters:function(l,u){var d=u.uiState;return qm(l,new zi.SearchParameters(jr(jr({},d.configure),r.searchParameters)))},getWidgetUiState:function(l){return jr(jr({},l),{},{configure:jr(jr({},l.configure),r.searchParameters)})}}}};function iN(t){"@babel/helpers - typeof";return iN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iN(t)}var QI=Object.prototype.hasOwnProperty;function Up(t,e,n){if(n!=null&&n(t,e))return!0;var r,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((s=t.length)===e.length)for(;s--&&Up(t[s],e[s],n););return s===-1}if(!r||iN(t)==="object"){s=0;for(r in t)if(QI.call(t,r)&&++s&&!QI.call(e,r)||!(r in e)||!Up(t[r],e[r],n))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function YI(t){var e,n,r;return new zi.SearchResults(t,[{query:(e=t.query)!==null&&e!==void 0?e:"",page:(n=t.page)!==null&&n!==void 0?n:0,hitsPerPage:(r=t.hitsPerPage)!==null&&r!==void 0?r:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:t.index}],{__isArtificial:!0})}function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function JI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function XI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(n),!0).forEach(function(r){Nve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nve(t,e,n){return e=Sve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sve(t){var e=Eve(t,"string");return Bp(e)==="symbol"?e:String(e)}function Eve(t,e){if(Bp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pve(t){var e=t.getHelper(),n=t.getResults()||YI(e.state),r=t.getScopedResults().map(function(s){var a=s.indexId===t.getIndexId()?n:YI(s.helper.state);return XI(XI({},s),{},{results:s.results||a})});return{results:n,scopedResults:r}}function x9(t,e){if(!t)throw new Error("Invariant failed")}var w9=w.createContext(null);function Cve(){var t=w.useContext(w9);return x9(t!==null),t}var b9=w.createContext(null);function _9(){var t=w.useContext(b9);return x9(t!==null),t}var Tve=w.createContext(null);function j9(){return w.useContext(Tve)}function Rve(t,e){return Ove(t)||Ave(t,e)||Ive(t,e)||kve()}function kve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ive(t,e){if(t){if(typeof t=="string")return eA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eA(t,e)}}function eA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ave(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Ove(t){if(Array.isArray(t))return t}function tA(t){var e=w.useState(function(){return t}),n=Rve(e,2),r=n[0],s=n[1];return Up(r,t)||s(t),r}var Mve=typeof window<"u"?w.useLayoutEffect:w.useEffect;function Dve(t){var e=t.widget,n=t.parentIndex,r=t.props,s=t.shouldSsr,a=w.useRef(r);w.useEffect(function(){a.current=r},[r]);var o=w.useRef(e);w.useEffect(function(){o.current=e},[e]);var l=w.useRef(null),u=s&&!n.getWidgets().includes(e),d=_9();Mve(function(){var h=o.current;if(!l.current)u||n.addWidgets([e]);else{clearTimeout(l.current);var m=Up(r,a.current);m||(n.removeWidgets([h]),n.addWidgets([e]))}return function(){l.current=setTimeout(function(){d._schedule(function(){d._preventWidgetCleanup||n.removeWidgets([h])})})}},[n,e,u,d,r]),u&&n.addWidgets([e])}function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}var Lve=["instantSearchInstance","widgetParams"],Fve=["widgetParams"];function $ve(t,e){return Bve(t)||Uve(t,e)||zve(t,e)||Vve()}function Vve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zve(t,e){if(t){if(typeof t=="string")return nA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nA(t,e)}}function nA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Bve(t){if(Array.isArray(t))return t}function rA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rA(Object(n),!0).forEach(function(r){Wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wve(t,e,n){return e=Hve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hve(t){var e=qve(t,"string");return Wp(e)==="symbol"?e:String(e)}function qve(t,e){if(Wp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iA(t,e){if(t==null)return{};var n=Gve(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gve(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function sa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=j9(),s=_9(),a=Cve(),o=tA(e),l=tA(n),u=w.useRef(!0),d=w.useRef(null),h=w.useRef(s.status),m=w.useMemo(function(){var j=t(function(_,x){if(x){u.current=!0;return}if(u.current){var S=_.instantSearchInstance;_.widgetParams;var C=iA(_,Lve);(!Up(C,d.current,function(R,V){return(R==null?void 0:R.constructor)===Function&&(V==null?void 0:V.constructor)===Function})||S.status!==h.current)&&(b(C),d.current=C,h.current=S.status)}},function(){u.current=!1});return sA(sA({},j(o)),l)},[t,o,l]),p=w.useState(function(){if(m.getWidgetRenderState){var j,_=a.getHelper(),x=a.getWidgetUiState({})[a.getIndexId()];_.state=((j=m.getWidgetSearchParameters)===null||j===void 0?void 0:j.call(m,_.state,{uiState:x}))||_.state;var S=Pve(a),C=S.results,R=S.scopedResults,V=m.getWidgetRenderState({helper:_,parent:a,instantSearchInstance:s,results:C,scopedResults:R,state:_.state,renderState:s.renderState,templatesConfig:s.templatesConfig,createURL:a.createURL,searchMetadata:{isSearchStalled:s.status==="stalled"},status:s.status,error:s.error});V.widgetParams;var k=iA(V,Fve);return k}return{}}),v=$ve(p,2),N=v[0],b=v[1];return Dve({widget:m,parentIndex:a,props:o,shouldSsr:!!r}),N}function Kve(t,e){return sa(jve,{searchParameters:t},e)}function Zve(t){return Kve(t,{$$widgetType:"ais.configure"}),null}function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}var Qve=["initialSearchParameters"];function aA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aA(Object(n),!0).forEach(function(r){Bd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bd(t,e,n){return e=Yve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yve(t){var e=Jve(t,"string");return Hp(e)==="symbol"?e:String(e)}function Jve(t,e){if(Hp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N9(t){return nye(t)||tye(t)||eye(t)||Xve()}function Xve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eye(t,e){if(t){if(typeof t=="string")return aN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aN(t,e)}}function tye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nye(t){if(Array.isArray(t))return aN(t)}function aN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rye(t,e){if(t==null)return{};var n=sye(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sye(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var om=ni({name:"index-widget"});function S9(t,e){var n=e.state,r=e.isPageReset,s=e._uiState;n!==t.state&&(t.state=n,t.emit("change",{state:t.state,results:t.lastResults,isPageReset:r,_uiState:s}))}function vy(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.reduce(function(r,s){return Su(s)||!s.getWidgetUiState&&!s.getWidgetState?r:s.getWidgetUiState?s.getWidgetUiState(r,e):s.getWidgetState(r,e)},n)}function yy(t,e){var n=e.initialSearchParameters,r=rye(e,Qve);return t.filter(function(s){return!Su(s)}).reduce(function(s,a){return a.getWidgetSearchParameters?a.getWidgetSearchParameters(s,r):s},n)}function E9(t){var e=t.filter(Su);e.length!==0&&e.forEach(function(n){var r=n.getHelper();S9(r,{state:r.state.resetPage(),isPageReset:!0}),E9(n.getWidgets())})}function P9(t){var e=t.filter(Su);return e.reduce(function(n,r){return n.concat.apply(n,[{indexId:r.getIndexId(),results:r.getResults(),helper:r.getHelper()}].concat(N9(P9(r.getWidgets()))))},[])}var iye=function(e){if(e===void 0||e.indexName===void 0)throw new Error(om("The `indexName` option is required."));var n=e.indexName,r=e.indexId,s=r===void 0?n:r,a=[],o={},l=null,u=null,d=null,h=null,m=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return n},getIndexId:function(){return s},getHelper:function(){return d},getResults:function(){var v;return(v=h)!==null&&v!==void 0&&v.lastResults?(h.lastResults._state=d.state,h.lastResults):null},getPreviousState:function(){return m},getScopedResults:function(){var v=this.getParent(),N=v?v.getWidgets():[this];return P9(N)},getParent:function(){return u},createURL:function(v){return typeof v=="function"?l._createURL(Bd({},s,v(o))):l._createURL(Bd({},s,vy(a,{searchParameters:v,helper:d})))},getWidgets:function(){return a},addWidgets:function(v){var N=this;if(!Array.isArray(v))throw new Error(om("The `addWidgets` method expects an array of widgets."));if(v.some(function(b){return typeof b.init!="function"&&typeof b.render!="function"}))throw new Error(om("The widget definition expects a `render` and/or an `init` method."));return a=a.concat(v),l&&v.length&&(S9(d,{state:yy(a,{uiState:o,initialSearchParameters:d.state}),_uiState:o}),v.forEach(function(b){if(b.getRenderState){var j=b.getRenderState(l.renderState[N.getIndexId()]||{},Nm(l,N,l._initialUiState));F_({renderState:j,instantSearchInstance:l,parent:N})}}),v.forEach(function(b){b.init&&b.init(Nm(l,N,l._initialUiState))}),l.scheduleSearch()),this},removeWidgets:function(v){var N=this;if(!Array.isArray(v))throw new Error(om("The `removeWidgets` method expects an array of widgets."));if(v.some(function(j){return typeof j.dispose!="function"}))throw new Error(om("The widget definition expects a `dispose` method."));if(a=a.filter(function(j){return v.indexOf(j)===-1}),l&&v.length){var b=v.reduce(function(j,_){var x=_.dispose({helper:d,state:j,parent:N});return x||j},d.state);o=vy(a,{searchParameters:b,helper:d}),d.setState(yy(a,{uiState:o,initialSearchParameters:b})),a.length&&l.scheduleSearch()}return this},init:function(v){var N=this,b,j=v.instantSearchInstance,_=v.parent,x=v.uiState;if(d===null){l=j,u=_,o=x[s]||{};var S=j.mainHelper,C=yy(a,{uiState:o,initialSearchParameters:new zi.SearchParameters({index:n})});d=zi({},C.index,C),d.search=function(){return j.onStateChange?(j.onStateChange({uiState:j.mainIndex.getWidgetUiState({}),setUiState:function(I){return j.setUiState(I,!1)}}),S):S.search()},d.searchWithoutTriggeringOnStateChange=function(){return S.search()},d.searchForFacetValues=function(k,I,$,T){var M=d.state.setQueryParameters(T);return S.searchForFacetValues(k,I,$,M)},h=S.derive(function(){return qm.apply(void 0,N9(gve(N)))});var R=(b=j._initialResults)===null||b===void 0?void 0:b[this.getIndexId()];if(R){var V=new zi.SearchResults(new zi.SearchParameters(R.state),R.results);h.lastResults=V,d.lastResults=V}d.on("change",function(k){var I=k.isPageReset;I&&E9(a)}),h.on("search",function(){j.scheduleStalledRender()}),h.on("result",function(k){var I=k.results;j.scheduleRender(),d.lastResults=I,m=I==null?void 0:I._state}),a.forEach(function(k){if(k.getRenderState){var I=k.getRenderState(j.renderState[N.getIndexId()]||{},Nm(j,N,x));F_({renderState:I,instantSearchInstance:j,parent:N})}}),a.forEach(function(k){k.init&&k.init(Nm(j,N,x))}),d.on("change",function(k){var I=k.state,$=k._uiState;o=vy(a,{searchParameters:I,helper:d},$||{}),j.onStateChange||j.onInternalStateChange()}),R&&j.scheduleRender()}},render:function(v){var N=this,b=v.instantSearchInstance;b.status==="error"&&!b.mainHelper.hasPendingRequests()&&m&&d.setState(m);var j=this.getResults()?a:a.filter(Su);j.forEach(function(_){if(_.getRenderState){var x=_.getRenderState(b.renderState[N.getIndexId()]||{},qI(b,N));F_({renderState:x,instantSearchInstance:b,parent:N})}}),j.forEach(function(_){_.render&&_.render(qI(b,N))})},dispose:function(){var v=this,N,b;a.forEach(function(j){j.dispose&&j.dispose({helper:d,state:d.state,parent:v})}),l=null,u=null,(N=d)===null||N===void 0||N.removeAllListeners(),d=null,(b=h)===null||b===void 0||b.detach(),h=null},getWidgetUiState:function(v){return a.filter(Su).reduce(function(N,b){return b.getWidgetUiState(N)},ya(ya({},v),{},Bd({},s,ya(ya({},v[s]),o))))},getWidgetState:function(v){return this.getWidgetUiState(v)},getWidgetSearchParameters:function(v,N){var b=N.uiState;return yy(a,{uiState:b,initialSearchParameters:v})},refreshUiState:function(){o=vy(a,{searchParameters:this.getHelper().state,helper:this.getHelper()},o)},setIndexUiState:function(v){var N=typeof v=="function"?v(o):v;l.setUiState(function(b){return ya(ya({},b),{},Bd({},s,N))})}}};function F_(t){var e=t.renderState,n=t.instantSearchInstance,r=t.parent,s=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=ya(ya({},n.renderState),{},Bd({},s,ya(ya({},n.renderState[s]),e)))}function aye(t,e){return uye(t)||cye(t,e)||lye(t,e)||oye()}function oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lye(t,e){if(t){if(typeof t=="string")return oA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oA(t,e)}}function oA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function uye(t){if(Array.isArray(t))return t}function dye(){var t=w.useReducer(function(r){return r+1},0),e=aye(t,2),n=e[1];return n}var hye=w.createContext(null);function fye(){return w.useContext(hye)}var mye="ais",ib=function(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.descendantName,s=n.modifierName,a=r?"-".concat(r):"",o=s?"--".concat(s):"";return"".concat(mye,"-").concat(e).concat(a).concat(o)}},pye=ib("Highlight");function gye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=sb(s._highlightResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=pye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return h.replace(new RegExp(ns.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(ns.highlightPostTag,"g"),"</".concat(r,">"))}var vye=ib("ReverseHighlight");function yye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=sb(s._highlightResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=vye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),p=u9(v9(f9(h)));return p.replace(new RegExp(ns.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(ns.highlightPostTag,"g"),"</".concat(r,">"))}var xye=ib("Snippet");function wye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=sb(s._snippetResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=xye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return h.replace(new RegExp(ns.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(ns.highlightPostTag,"g"),"</".concat(r,">"))}var bye=ib("ReverseSnippet");function _ye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=sb(s._snippetResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=bye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),p=u9(v9(f9(h)));return p.replace(new RegExp(ns.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(ns.highlightPostTag,"g"),"</".concat(r,">"))}function oN(t){"@babel/helpers - typeof";return oN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oN(t)}function jye(t){var e=t.method,n=t.payload;if(oN(n)!=="object")throw new Error("The insights helper expects the payload to be an object.");var r;try{r=d9(n)}catch{throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(e,'" data-insights-payload="').concat(r,'"')}function Nye(t,e){return jye({method:t,payload:e})}function lN(t){"@babel/helpers - typeof";return lN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lN(t)}var Sye="_ALGOLIA";function Eye(t){if(!((typeof document>"u"?"undefined":lN(document))!=="object"||typeof document.cookie!="string"))for(var e="".concat(t,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var s=n[r];s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}}function Pye(){return Eye(Sye)}function qp(t){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(t)}function lA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lA(Object(n),!0).forEach(function(r){Cye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cye(t,e,n){return e=Tye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tye(t){var e=Rye(t,"string");return qp(e)==="symbol"?e:String(e)}function Rye(t,e){if(qp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xy(t,e){return Aye(t)||Iye(t,e)||C9(t,e)||kye()}function kye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Aye(t){if(Array.isArray(t))return t}function Oye(t){return Lye(t)||Dye(t)||C9(t)||Mye()}function Mye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C9(t,e){if(t){if(typeof t=="string")return cN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cN(t,e)}}function Dye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lye(t){if(Array.isArray(t))return cN(t)}function cN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var T9="2.6.0",Fye="https://cdn.jsdelivr.net/npm/search-insights@".concat(T9,"/dist/search-insights.min.js");function $ye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.insightsClient,n=t.insightsInitParams,r=t.onEvent,s=t.$$internal,a=s===void 0?!1:s,o=e;!e&&e!==null&&Nl(function(u){var d=u.window,h=d.AlgoliaAnalyticsObject||"aa";typeof h=="string"&&(o=d[h]),o||(d.AlgoliaAnalyticsObject=h,d[h]||(d[h]=function(){d[h].queue||(d[h].queue=[]);for(var m=arguments.length,p=new Array(m),v=0;v<m;v++)p[v]=arguments[v];d[h].queue.push(p)},d[h].version=T9,d[h].shouldAddScript=!0),o=d[h])});var l=o||zn;return function(u){var d=u.instantSearchInstance,h=d.middleware.filter(function(R){return R.instance.$$type==="ais.insights"&&R.instance.$$internal}).map(function(R){return R.creator});d.unuse.apply(d,Oye(h));var m=Lge(d.client),p=Xy(m,2),v=p[0],N=p[1],b=void 0,j=void 0;if(Array.isArray(l.queue)){var _=Eu(l.queue.slice().reverse(),function(R){var V=Xy(R,1),k=V[0];return k==="setUserToken"})||[],x=Xy(_,2);b=x[1]}l("getUserToken",null,function(R,V){j=V}),(n||!cA(l))&&l("init",kc({appId:v,apiKey:N,partial:!0},n));var S,C;return{$$type:"ais.insights",$$internal:a,onStateChange:function(){},subscribe:function(){if(l.shouldAddScript){var V="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var k=document.createElement("script");k.async=!0,k.src=Fye,k.onerror=function(){d.emit("error",new Error(V))},document.body.appendChild(k),l.shouldAddScript=!1}catch{l.shouldAddScript=!1,d.emit("error",new Error(V))}}},started:function(){l("addAlgoliaAgent","insights-middleware"),C=d.helper,S={userToken:C.state.userToken,clickAnalytics:C.state.clickAnalytics},C.overrideStateWithoutTriggeringChangeEvent(kc(kc({},C.state),{},{clickAnalytics:!0})),a||d.scheduleSearch();var V=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!T)return;var D=C.state.userToken;function O(){C.overrideStateWithoutTriggeringChangeEvent(kc(kc({},C.state),{},{userToken:T})),D&&D!==T&&d.scheduleSearch()}M?O():setTimeout(O,0)},k=Pye();k&&V(k,!0),j?(V(j,!0),l("setUserToken",j)):b&&(V(b,!0),l("setUserToken",b)),l("onUserTokenChange",V,{immediate:!0});var I=l;cA(l)&&(I=function(T,M){var D={headers:{"X-Algolia-Application-Id":v,"X-Algolia-API-Key":N}};return l(T,M,D)}),d.sendEventToInsights=function($){r?r($,I):$.insightsMethod&&($.payload.algoliaSource=["instantsearch"],$.eventModifier==="internal"&&$.payload.algoliaSource.push("instantsearch-internal"),I($.insightsMethod,$.payload))}},unsubscribe:function(){l("onUserTokenChange",void 0),d.sendEventToInsights=zn,C&&S&&(C.overrideStateWithoutTriggeringChangeEvent(kc(kc({},C.state),S)),d.scheduleSearch())}}}}function cA(t){var e=(t.version||"").split(".").map(Number),n=Xy(e,2),r=n[0],s=n[1],a=r>=3,o=r===2&&s>=6,l=r===1&&s>=10;return a||o||l}function R9(t,e,n){var r=Nm(e,e.mainIndex,e._initialUiState);t.forEach(function(s){var a={};if(s.getWidgetRenderState){var o=s.getWidgetRenderState(r);o&&o.widgetParams&&(a=o.widgetParams)}var l=Object.keys(a).filter(function(u){return a[u]!==void 0});n.widgets.push({type:s.$$type,widgetType:s.$$widgetType,params:l}),s.$$type==="ais.index"&&R9(s.getWidgets(),e,n)})}function Vye(){return Nl(function(t){var e,n,r=t.window;return((e=r.navigator)===null||e===void 0||(n=e.userAgent)===null||n===void 0?void 0:n.indexOf("Algolia Crawler"))>-1},{fallback:function(){return!1}})}function zye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.$$internal,n=e===void 0?!1:e;return function(r){var s=r.instantSearchInstance,a={widgets:[]},o=document.createElement("meta"),l=document.querySelector("head");return o.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:n,onStateChange:function(){},subscribe:function(){setTimeout(function(){var d=s.client;a.ua=d.transporter&&d.transporter.userAgent?d.transporter.userAgent.value:d._ua,R9(s.mainIndex.getWidgets(),s,a),s.middleware.forEach(function(h){return a.widgets.push({middleware:!0,type:h.instance.$$type,internal:h.instance.$$internal})}),o.content=JSON.stringify(a),l.appendChild(o)},0)},started:function(){},unsubscribe:function(){o.remove()}}}}var Uye=String.prototype.replace,Bye=/%20/g,$_={RFC1738:"RFC1738",RFC3986:"RFC3986"},E2={default:$_.RFC3986,formatters:{RFC1738:function(t){return Uye.call(t,Bye,"+")},RFC3986:function(t){return String(t)}},RFC1738:$_.RFC1738,RFC3986:$_.RFC3986},Wye=E2,V_=Object.prototype.hasOwnProperty,Fc=Array.isArray,da=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Hye=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Fc(r)){for(var s=[],a=0;a<r.length;++a)typeof r[a]<"u"&&s.push(r[a]);n.obj[n.prop]=s}}},k9=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(r[s]=e[s]);return r},qye=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Fc(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!V_.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var s=e;return Fc(e)&&!Fc(n)&&(s=k9(e,r)),Fc(e)&&Fc(n)?(n.forEach(function(a,o){if(V_.call(e,o)){var l=e[o];l&&typeof l=="object"&&a&&typeof a=="object"?e[o]=t(l,a,r):e.push(a)}else e[o]=a}),e):Object.keys(n).reduce(function(a,o){var l=n[o];return V_.call(a,o)?a[o]=t(a[o],l,r):a[o]=l,a},s)},Gye=function(e,n){return Object.keys(n).reduce(function(r,s){return r[s]=n[s],r},e)},Kye=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Zye=function(e,n,r,s,a){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var l="",u=0;u<o.length;++u){var d=o.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||a===Wye.RFC1738&&(d===40||d===41)){l+=o.charAt(u);continue}if(d<128){l=l+da[d];continue}if(d<2048){l=l+(da[192|d>>6]+da[128|d&63]);continue}if(d<55296||d>=57344){l=l+(da[224|d>>12]+da[128|d>>6&63]+da[128|d&63]);continue}u+=1,d=65536+((d&1023)<<10|o.charCodeAt(u)&1023),l+=da[240|d>>18]+da[128|d>>12&63]+da[128|d>>6&63]+da[128|d&63]}return l},Qye=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],s=0;s<n.length;++s)for(var a=n[s],o=a.obj[a.prop],l=Object.keys(o),u=0;u<l.length;++u){var d=l[u],h=o[d];typeof h=="object"&&h!==null&&r.indexOf(h)===-1&&(n.push({obj:o,prop:d}),r.push(h))}return Hye(n),e},Yye=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Jye=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Xye=function(e,n){return[].concat(e,n)},exe=function(e,n){if(Fc(e)){for(var r=[],s=0;s<e.length;s+=1)r.push(n(e[s]));return r}return n(e)},I9={arrayToObject:k9,assign:Gye,combine:Xye,compact:Qye,decode:Kye,encode:Zye,isBuffer:Jye,isRegExp:Yye,maybeMap:exe,merge:qye},uN=I9,Gm=E2,txe=Object.prototype.hasOwnProperty,uA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Gc=Array.isArray,nxe=String.prototype.split,rxe=Array.prototype.push,A9=function(t,e){rxe.apply(t,Gc(e)?e:[e])},sxe=Date.prototype.toISOString,dA=Gm.default,Rr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:uN.encode,encodeValuesOnly:!1,format:dA,formatter:Gm.formatters[dA],indices:!1,serializeDate:function(e){return sxe.call(e)},skipNulls:!1,strictNullHandling:!1},ixe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},axe=function t(e,n,r,s,a,o,l,u,d,h,m,p,v,N){var b=e;if(typeof l=="function"?b=l(n,b):b instanceof Date?b=h(b):r==="comma"&&Gc(b)&&(b=uN.maybeMap(b,function(M){return M instanceof Date?h(M):M})),b===null){if(s)return o&&!v?o(n,Rr.encoder,N,"key",m):n;b=""}if(ixe(b)||uN.isBuffer(b)){if(o){var j=v?n:o(n,Rr.encoder,N,"key",m);if(r==="comma"&&v){for(var _=nxe.call(String(b),","),x="",S=0;S<_.length;++S)x+=(S===0?"":",")+p(o(_[S],Rr.encoder,N,"value",m));return[p(j)+"="+x]}return[p(j)+"="+p(o(b,Rr.encoder,N,"value",m))]}return[p(n)+"="+p(String(b))]}var C=[];if(typeof b>"u")return C;var R;if(r==="comma"&&Gc(b))R=[{value:b.length>0?b.join(",")||null:void 0}];else if(Gc(l))R=l;else{var V=Object.keys(b);R=u?V.sort(u):V}for(var k=0;k<R.length;++k){var I=R[k],$=typeof I=="object"&&typeof I.value<"u"?I.value:b[I];if(!(a&&$===null)){var T=Gc(b)?typeof r=="function"?r(n,I):n:n+(d?"."+I:"["+I+"]");A9(C,t($,T,r,s,a,o,l,u,d,h,m,p,v,N))}}return C},oxe=function(e){if(!e)return Rr;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Rr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Gm.default;if(typeof e.format<"u"){if(!txe.call(Gm.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var s=Gm.formatters[r],a=Rr.filter;return(typeof e.filter=="function"||Gc(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Rr.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Rr.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Rr.charsetSentinel,delimiter:typeof e.delimiter>"u"?Rr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Rr.encode,encoder:typeof e.encoder=="function"?e.encoder:Rr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Rr.encodeValuesOnly,filter:a,format:r,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Rr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Rr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Rr.strictNullHandling}},lxe=function(t,e){var n=t,r=oxe(e),s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Gc(r.filter)&&(a=r.filter,s=a);var o=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in uA?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var u=uA[l];s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);for(var d=0;d<s.length;++d){var h=s[d];r.skipNulls&&n[h]===null||A9(o,axe(n[h],h,u,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset))}var m=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""},zh=I9,dN=Object.prototype.hasOwnProperty,cxe=Array.isArray,Tr={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:zh.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},uxe=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},O9=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},dxe="utf8=%26%2310003%3B",hxe="utf8=%E2%9C%93",fxe=function(e,n){var r={},s=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=n.parameterLimit===1/0?void 0:n.parameterLimit,o=s.split(n.delimiter,a),l=-1,u,d=n.charset;if(n.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===hxe?d="utf-8":o[u]===dxe&&(d="iso-8859-1"),l=u,u=o.length);for(u=0;u<o.length;++u)if(u!==l){var h=o[u],m=h.indexOf("]="),p=m===-1?h.indexOf("="):m+1,v,N;p===-1?(v=n.decoder(h,Tr.decoder,d,"key"),N=n.strictNullHandling?null:""):(v=n.decoder(h.slice(0,p),Tr.decoder,d,"key"),N=zh.maybeMap(O9(h.slice(p+1),n),function(b){return n.decoder(b,Tr.decoder,d,"value")})),N&&n.interpretNumericEntities&&d==="iso-8859-1"&&(N=uxe(N)),h.indexOf("[]=")>-1&&(N=cxe(N)?[N]:N),dN.call(r,v)?r[v]=zh.combine(r[v],N):r[v]=N}return r},mxe=function(t,e,n,r){for(var s=r?e:O9(e,n),a=t.length-1;a>=0;--a){var o,l=t[a];if(l==="[]"&&n.parseArrays)o=[].concat(s);else{o=n.plainObjects?Object.create(null):{};var u=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,d=parseInt(u,10);!n.parseArrays&&u===""?o={0:s}:!isNaN(d)&&l!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(o=[],o[d]=s):u!=="__proto__"&&(o[u]=s)}s=o}return s},pxe=function(e,n,r,s){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,u=r.depth>0&&o.exec(a),d=u?a.slice(0,u.index):a,h=[];if(d){if(!r.plainObjects&&dN.call(Object.prototype,d)&&!r.allowPrototypes)return;h.push(d)}for(var m=0;r.depth>0&&(u=l.exec(a))!==null&&m<r.depth;){if(m+=1,!r.plainObjects&&dN.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(u[1])}return u&&h.push("["+a.slice(u.index)+"]"),mxe(h,n,r,s)}},gxe=function(e){if(!e)return Tr;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Tr.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Tr.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Tr.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Tr.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Tr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Tr.comma,decoder:typeof e.decoder=="function"?e.decoder:Tr.decoder,delimiter:typeof e.delimiter=="string"||zh.isRegExp(e.delimiter)?e.delimiter:Tr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Tr.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Tr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Tr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Tr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Tr.strictNullHandling}},vxe=function(t,e){var n=gxe(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?fxe(t,n):t,s=n.plainObjects?Object.create(null):{},a=Object.keys(r),o=0;o<a.length;++o){var l=a[o],u=pxe(l,r[l],n,typeof t=="string");s=zh.merge(s,u,n)}return zh.compact(s)},yxe=lxe,xxe=vxe,wxe=E2,bxe={formats:wxe,parse:xxe,stringify:yxe};const hA=zo(bxe);function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}function _xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M9(r.key),r)}}function Nxe(t,e,n){return e&&jxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bs(t,e,n){return e=M9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M9(t){var e=Sxe(t,"string");return Gp(e)==="symbol"?e:String(e)}function Sxe(t,e){if(Gp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fA=function(e){e&&(window.document.title=e)},Exe=function(){function t(e){var n=this,r=e.windowTitle,s=e.writeDelay,a=s===void 0?400:s,o=e.createURL,l=e.parseURL,u=e.getLocation,d=e.start,h=e.dispose,m=e.push;_xe(this,t),bs(this,"$$type","ais.browser"),bs(this,"windowTitle",void 0),bs(this,"writeDelay",void 0),bs(this,"_createURL",void 0),bs(this,"parseURL",void 0),bs(this,"getLocation",void 0),bs(this,"writeTimer",void 0),bs(this,"_onPopState",void 0),bs(this,"inPopState",!1),bs(this,"isDisposed",!1),bs(this,"latestAcknowledgedHistory",0),bs(this,"_start",void 0),bs(this,"_dispose",void 0),bs(this,"_push",void 0),this.windowTitle=r,this.writeTimer=void 0,this.writeDelay=a,this._createURL=o,this.parseURL=l,this.getLocation=u,this._start=d,this._dispose=h,this._push=m,Nl(function(p){var v=p.window,N=n.windowTitle&&n.windowTitle(n.read());fA(N),n.latestAcknowledgedHistory=v.history.length})}return Nxe(t,[{key:"read",value:function(){return this.parseURL({qsModule:hA,location:this.getLocation()})}},{key:"write",value:function(n){var r=this;Nl(function(s){var a=s.window,o=r.createURL(n),l=r.windowTitle&&r.windowTitle(n);r.writeTimer&&clearTimeout(r.writeTimer),r.writeTimer=setTimeout(function(){fA(l),r.shouldWrite(o)&&(r._push?r._push(o):a.history.pushState(n,l||"",o),r.latestAcknowledgedHistory=a.history.length),r.inPopState=!1,r.writeTimer=void 0},r.writeDelay)})}},{key:"onUpdate",value:function(n){var r=this;this._start&&this._start(function(){n(r.read())}),this._onPopState=function(){r.writeTimer&&(clearTimeout(r.writeTimer),r.writeTimer=void 0),r.inPopState=!0,n(r.read())},Nl(function(s){var a=s.window;a.addEventListener("popstate",r._onPopState)})}},{key:"createURL",value:function(n){var r=this._createURL({qsModule:hA,routeState:n,location:this.getLocation()});return r}},{key:"dispose",value:function(){var n=this;this._dispose&&this._dispose(),this.isDisposed=!0,Nl(function(r){var s=r.window;n._onPopState&&s.removeEventListener("popstate",n._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(n){var r=this;return Nl(function(s){var a=s.window,o=!(r.isDisposed&&r.latestAcknowledgedHistory!==a.history.length);return!r.inPopState&&o&&n!==a.location.href})}}]),t}();function Pxe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.createURL,n=e===void 0?function(v){var N=v.qsModule,b=v.routeState,j=v.location,_=j.protocol,x=j.hostname,S=j.port,C=S===void 0?"":S,R=j.pathname,V=j.hash,k=N.stringify(b),I=C===""?"":":".concat(C);return k?"".concat(_,"//").concat(x).concat(I).concat(R,"?").concat(k).concat(V):"".concat(_,"//").concat(x).concat(I).concat(R).concat(V)}:e,r=t.parseURL,s=r===void 0?function(v){var N=v.qsModule,b=v.location;return N.parse(b.search.slice(1),{arrayLimit:99})}:r,a=t.writeDelay,o=a===void 0?400:a,l=t.windowTitle,u=t.getLocation,d=u===void 0?function(){return Nl(function(v){var N=v.window;return N.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:u,h=t.start,m=t.dispose,p=t.push;return new Exe({createURL:n,parseURL:s,writeDelay:o,windowTitle:l,getLocation:d,start:h,dispose:m,push:p})}function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}var Cxe=["configure"];function mA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mA(Object(n),!0).forEach(function(r){hN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hN(t,e,n){return e=Txe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Txe(t){var e=Rxe(t,"string");return Kp(e)==="symbol"?e:String(e)}function Rxe(t,e){if(Kp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kxe(t,e){if(t==null)return{};var n=Ixe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ixe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pA(t){t.configure;var e=kxe(t,Cxe);return e}function Axe(){return{$$type:"ais.simple",stateToRoute:function(e){return Object.keys(e).reduce(function(n,r){return xy(xy({},n),{},hN({},r,pA(e[r])))},{})},routeToState:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(n,r){return xy(xy({},n),{},hN({},r,pA(e[r])))},{})}}}function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function gA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(n),!0).forEach(function(r){D9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D9(t,e,n){return e=Oxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oxe(t){var e=Mxe(t,"string");return Zp(e)==="symbol"?e:String(e)}function Mxe(t,e){if(Zp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.router,r=n===void 0?Pxe():n,s=e.stateMapping,a=s===void 0?Axe():s,o=e.$$internal,l=o===void 0?!1:o;return function(u){var d=u.instantSearchInstance;function h(v){var N=d.mainIndex.getWidgets().length===0?d._initialUiState:d.mainIndex.getWidgetUiState({}),b=Object.keys(v).reduce(function(_,x){return wy(wy({},_),{},D9({},x,v[x]))},N),j=a.stateToRoute(b);return r.createURL(j)}d._createURL=h;var m=void 0,p=d._initialUiState;return{$$type:"ais.router({router:".concat(r.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:l,onStateChange:function(N){var b=N.uiState,j=a.stateToRoute(b);(m===void 0||!p9(m,j))&&(r.write(j),m=j)},subscribe:function(){d._initialUiState=wy(wy({},p),a.routeToState(r.read())),r.onUpdate(function(N){d.mainIndex.getWidgets().length>0&&d.setUiState(a.routeToState(N))})},started:function(){var N;(N=r.start)===null||N===void 0||N.call(r)},unsubscribe:function(){r.dispose()}}}};function Lxe(t,e){return t.toLocaleString(e)}function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function vA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ho(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vA(Object(n),!0).forEach(function(r){Fxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fxe(t,e,n){return e=$xe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $xe(t){var e=Vxe(t,"string");return Qp(e)==="symbol"?e:String(e)}function Vxe(t,e){if(Qp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zxe(t){var e=t.numberLocale;return{formatNumber:function(r,s){return Lxe(Number(s(r)),e)},highlight:function(r,s){try{var a=JSON.parse(r);return s(gye(ho(ho({},a),{},{hit:this})))}catch{throw new Error(`
The highlight helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseHighlight:function(r,s){try{var a=JSON.parse(r);return s(yye(ho(ho({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseHighlight helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},snippet:function(r,s){try{var a=JSON.parse(r);return s(wye(ho(ho({},a),{},{hit:this})))}catch{throw new Error(`
The snippet helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseSnippet:function(r,s){try{var a=JSON.parse(r);return s(_ye(ho(ho({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseSnippet helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},insights:function(r,s){try{var a=JSON.parse(r),o=a.method,l=a.payload;return s(Nye(o,ho({objectIDs:[this.objectID]},l)))}catch{throw new Error(`
The insights helper expects a JSON object of the format:
{ "method": "method-name", "payload": { "eventName": "name of the event" } }`)}}}}const Uxe="4.56.8";function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function yA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yA(Object(n),!0).forEach(function(r){xn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L9(r.key),r)}}function qxe(t,e,n){return e&&Hxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}function fN(t,e){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},fN(t,e)}function Kxe(t){var e=Qxe();return function(){var r=S0(t),s;if(e){var a=S0(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Zxe(this,s)}}function Zxe(t,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return un(t)}function un(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S0(t)}function xn(t,e,n){return e=L9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L9(t){var e=Yxe(t,"string");return Uh(e)==="symbol"?e:String(e)}function Yxe(t,e){if(Uh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ha=ni({name:"instantsearch"});function Jxe(){return"#"}var Xxe=function(t){Gxe(n,t);var e=Kxe(n);function n(r){var s;Wxe(this,n),s=e.call(this),xn(un(s),"client",void 0),xn(un(s),"indexName",void 0),xn(un(s),"insightsClient",void 0),xn(un(s),"onStateChange",null),xn(un(s),"helper",void 0),xn(un(s),"mainHelper",void 0),xn(un(s),"mainIndex",void 0),xn(un(s),"started",void 0),xn(un(s),"templatesConfig",void 0),xn(un(s),"renderState",{}),xn(un(s),"_stalledSearchDelay",void 0),xn(un(s),"_searchStalledTimer",void 0),xn(un(s),"_initialUiState",void 0),xn(un(s),"_initialResults",void 0),xn(un(s),"_createURL",void 0),xn(un(s),"_searchFunction",void 0),xn(un(s),"_mainHelperSearch",void 0),xn(un(s),"middleware",[]),xn(un(s),"sendEventToInsights",void 0),xn(un(s),"status","idle"),xn(un(s),"error",void 0),xn(un(s),"scheduleSearch",am(function(){s.started&&s.mainHelper.search()})),xn(un(s),"scheduleRender",am(function(){var $,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;($=s.mainHelper)!==null&&$!==void 0&&$.hasPendingRequests()||(clearTimeout(s._searchStalledTimer),s._searchStalledTimer=null,T&&(s.status="idle",s.error=void 0)),s.mainIndex.render({instantSearchInstance:un(s)}),s.emit("render")})),xn(un(s),"onInternalStateChange",am(function(){var $=s.mainIndex.getWidgetUiState({});s.middleware.forEach(function(T){var M=T.instance;M.onStateChange({uiState:$})})})),s.setMaxListeners(100);var a=r.indexName,o=a===void 0?"":a,l=r.numberLocale,u=r.initialUiState,d=u===void 0?{}:u,h=r.routing,m=h===void 0?null:h,p=r.insights,v=p===void 0?!1:p,N=r.searchFunction,b=r.stalledSearchDelay,j=b===void 0?200:b,_=r.searchClient,x=_===void 0?null:_,S=r.insightsClient,C=S===void 0?null:S,R=r.onStateChange,V=R===void 0?null:R;if(x===null)throw new Error(ha("The `searchClient` option is required."));if(typeof x.search!="function")throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if(typeof x.addAlgoliaAgent=="function"&&x.addAlgoliaAgent("instantsearch.js (".concat(Uxe,")")),C&&typeof C!="function")throw new Error(ha("The `insightsClient` option should be a function."));if(s.client=x,s.insightsClient=C,s.indexName=o,s.helper=null,s.mainHelper=null,s.mainIndex=iye({indexName:o}),s.onStateChange=V,s.started=!1,s.templatesConfig={helpers:zxe({numberLocale:l}),compileOptions:{}},s._stalledSearchDelay=j,s._searchStalledTimer=null,s._createURL=Jxe,s._initialUiState=d,s._initialResults=null,N&&(s._searchFunction=N),s.sendEventToInsights=zn,m){var k=typeof m=="boolean"?{}:m;k.$$internal=!0,s.use(Dxe(k))}if(v){var I=typeof v=="boolean"?{}:v;I.$$internal=!0,s.use($ye(I))}return Vye()&&s.use(zye({$$internal:!0})),s}return qxe(n,[{key:"_isSearchStalled",get:function(){return this.status==="stalled"}},{key:"use",value:function(){for(var s=this,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var u=o.map(function(d){var h=Bxe({$$type:"__unknown__",$$internal:!1,subscribe:zn,started:zn,unsubscribe:zn,onStateChange:zn},d({instantSearchInstance:s}));return s.middleware.push({creator:d,instance:h}),h});return this.started&&u.forEach(function(d){d.subscribe(),d.started()}),this}},{key:"unuse",value:function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return this.middleware.filter(function(l){return a.includes(l.creator)}).forEach(function(l){return l.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(l){return!a.includes(l.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(s){return this.addWidgets([s])}},{key:"addWidgets",value:function(s){if(!Array.isArray(s))throw new Error(ha("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(s.some(function(a){return typeof a.init!="function"&&typeof a.render!="function"}))throw new Error(ha("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(s),this}},{key:"removeWidget",value:function(s){return this.removeWidgets([s])}},{key:"removeWidgets",value:function(s){if(!Array.isArray(s))throw new Error(ha("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(s.some(function(a){return typeof a.dispose!="function"}))throw new Error(ha("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(s),this}},{key:"start",value:function(){var s=this;if(this.started)throw new Error(ha("The `start` method has already been called once."));var a=this.mainHelper||zi(this.client,this.indexName);if(a.search=function(){return s.status="loading",s.scheduleRender(!1),a.searchOnlyWithDerivedHelpers()},this._searchFunction){var o={search:function(){return new Promise(zn)}};this._mainHelperSearch=a.search.bind(a),a.search=function(){var u=s.mainIndex.getHelper(),d=zi(o,u.state.index,u.state);return d.once("search",function(h){var m=h.state;u.overrideStateWithoutTriggeringChangeEvent(m),s._mainHelperSearch()}),d.on("change",function(h){var m=h.state;u.setState(m)}),s._searchFunction(d),a}}if(a.on("error",function(u){var d=u.error;if(!(d instanceof Error)){var h=d;d=Object.keys(h).reduce(function(m,p){return m[p]=h[p],m},new Error(h.message))}d.error=d,s.error=d,s.status="error",s.scheduleRender(!1),s.emit("error",d)}),this.mainHelper=a,this.middleware.forEach(function(u){var d=u.instance;d.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults){var l=this.scheduleSearch;this.scheduleSearch=am(zn),am(function(){s.scheduleSearch=l})()}else this.mainIndex.getWidgets().length>0&&this.scheduleSearch();this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(u){var d=u.instance;d.started()})}},{key:"dispose",value:function(){var s;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),(s=this.mainHelper)===null||s===void 0||s.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(a){var o=a.instance;o.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var s=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){s.status="stalled",s.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(s){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.mainHelper)throw new Error(ha("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var l=typeof s=="function"?s(this.mainIndex.getWidgetUiState({})):s;this.onStateChange&&o?this.onStateChange({uiState:l,setUiState:function(d){rN(typeof d=="function"?d(l):d,a.mainIndex),a.scheduleSearch(),a.onInternalStateChange()}}):(rN(l,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.started)throw new Error(ha("The `start` method needs to be called before `createURL`."));return this._createURL(s)}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(ha("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}]),n}(tpe),e0e={},xA=["react (".concat(w.version,")"),"react-instantsearch (".concat(Zj,")"),"react-instantsearch-hooks (".concat(Zj,")")],wA="react-instantsearch-server (".concat(Zj,")"),t0e=function(e){return e?"next.js (".concat(e,")"):null};function n0e(t){var e=dye(),n=j9(),r=fye(),s=r==null?void 0:r.initialResults,a=w.useRef(t),o=w.useRef(null);if(r&&(o=r.ssrSearchRef),o.current===null){var l=new Xxe(t);l._schedule=function(N){l._schedule.queue.push(N),clearTimeout(l._schedule.timer),l._schedule.timer=setTimeout(function(){l._schedule.queue.forEach(function(b){b()}),l._schedule.queue=[]},0)},l._schedule.queue=[],(n||s)&&(l._initialResults=s||{}),bA(t.searchClient,[].concat(xA,[n&&wA,t0e(r0e())])),(n||s)&&l.start(),n&&n.notifyServer({search:l}),t.routing,o.current=l}{var u=o.current,d=a.current;if(d.indexName!==t.indexName&&(u.helper.setIndex(t.indexName||"").search(),a.current=t),d.searchClient!==t.searchClient&&(bA(t.searchClient,[].concat(xA,[n&&wA])),u.mainHelper.setClient(t.searchClient).search(),a.current=t),d.onStateChange!==t.onStateChange&&(u.onStateChange=t.onStateChange,a.current=t),d.searchFunction!==t.searchFunction&&(u._searchFunction=t.searchFunction,a.current=t),d.stalledSearchDelay!==t.stalledSearchDelay){var h;u._stalledSearchDelay=(h=t.stalledSearchDelay)!==null&&h!==void 0?h:200,a.current=t}}var m=w.useRef(null),p=wP.useSyncExternalStore(w.useCallback(function(){var v=o.current;return m.current===null?v.started||(v.start(),e()):(clearTimeout(m.current),v._preventWidgetCleanup=!1),function(){function N(){v.dispose()}clearTimeout(v._schedule.timer),m.current=setTimeout(N),v._preventWidgetCleanup=!0}},[e]),function(){return o.current},function(){return o.current});return p}function bA(t,e){typeof t.addAlgoliaAgent=="function"&&e.filter(Boolean).forEach(function(n){t.addAlgoliaAgent(n)})}function r0e(){var t,e;return typeof window<"u"&&((t=window.next)===null||t===void 0?void 0:t.version)||(typeof process<"u"?(e=e0e)===null||e===void 0?void 0:e.NEXT_RUNTIME:void 0)}var s0e=["children"];function i0e(t,e){if(t==null)return{};var n=a0e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a0e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function o0e(t){var e=t.children,n=i0e(t,s0e),r=n0e(n);return r.started?oe.createElement(b9.Provider,{value:r},oe.createElement(w9.Provider,{value:r.mainIndex},e)):null}function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}function l0e(t){return h0e(t)||d0e(t)||u0e(t)||c0e()}function c0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0e(t,e){if(t){if(typeof t=="string")return mN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mN(t,e)}}function d0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h0e(t){if(Array.isArray(t))return mN(t)}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(n),!0).forEach(function(r){f0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f0e(t,e,n){return e=m0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m0e(t){var e=p0e(t,"string");return Yp(e)==="symbol"?e:String(e)}function p0e(t,e){if(Yp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jA=ni({name:"clear-refinements",connector:!0}),g0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,jA()),function(r){var s=r||{},a=s.includedAttributes,o=a===void 0?[]:a,l=s.excludedAttributes,u=l===void 0?["query"]:l,d=s.transformItems,h=d===void 0?function(N){return N}:d;if(r&&r.includedAttributes&&r.excludedAttributes)throw new Error(jA("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var m={refine:zn,createURL:function(){return""},attributesToClear:[]},p=function(){return m.refine()},v=function(){return m.createURL()};return{$$type:"ais.clearRefinements",init:function(b){var j=b.instantSearchInstance;e(wd(wd({},this.getWidgetRenderState(b)),{},{instantSearchInstance:j}),!0)},render:function(b){var j=b.instantSearchInstance;e(wd(wd({},this.getWidgetRenderState(b)),{},{instantSearchInstance:j}),!1)},dispose:function(){n()},getRenderState:function(b,j){return wd(wd({},b),{},{clearRefinements:this.getWidgetRenderState(j)})},getWidgetRenderState:function(b){var j=b.createURL,_=b.scopedResults,x=b.results;m.attributesToClear=_.reduce(function(C,R){return C.concat(v0e({scopedResult:R,includedAttributes:o,excludedAttributes:u,transformItems:h,results:x}))},[]),m.refine=function(){m.attributesToClear.forEach(function(C){var R=C.helper,V=C.items;R.setState(MI({helper:R,attributesToClear:V})).search()})},m.createURL=function(){return j(qm.apply(void 0,l0e(m.attributesToClear.map(function(C){var R=C.helper,V=C.items;return MI({helper:R,attributesToClear:V})}))))};var S=m.attributesToClear.some(function(C){return C.items.length>0});return{canRefine:S,hasRefinements:S,refine:p,createURL:v,widgetParams:r}}}}};function v0e(t){var e=t.scopedResult,n=t.includedAttributes,r=t.excludedAttributes,s=t.transformItems,a=t.results,o=n.indexOf("query")!==-1||r.indexOf("query")===-1;return{helper:e.helper,items:s(g9(m9(e.results,e.helper.state,o).map(function(l){return l.attribute}).filter(function(l){return n.length===0||n.indexOf(l)!==-1}).filter(function(l){return l==="query"&&o||r.indexOf(l)===-1})),{results:a})}}function y0e(t,e){return sa(g0e,t,e)}function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function x0e(t){return j0e(t)||_0e(t)||b0e(t)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b0e(t,e){if(t){if(typeof t=="string")return pN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pN(t,e)}}function _0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function j0e(t){if(Array.isArray(t))return pN(t)}function pN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function NA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NA(Object(n),!0).forEach(function(r){N0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0e(t,e,n){return e=S0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S0e(t){var e=E0e(t,"string");return Jp(e)==="symbol"?e:String(e)}function E0e(t,e){if(Jp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SA=ni({name:"current-refinements",connector:!0}),P0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,SA()),function(r){if((r||{}).includedAttributes&&(r||{}).excludedAttributes)throw new Error(SA("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var s=r||{},a=s.includedAttributes,o=s.excludedAttributes,l=o===void 0?["query"]:o,u=s.transformItems,d=u===void 0?function(h){return h}:u;return{$$type:"ais.currentRefinements",init:function(m){var p=m.instantSearchInstance;e(bd(bd({},this.getWidgetRenderState(m)),{},{instantSearchInstance:p}),!0)},render:function(m){var p=m.instantSearchInstance;e(bd(bd({},this.getWidgetRenderState(m)),{},{instantSearchInstance:p}),!1)},dispose:function(){n()},getRenderState:function(m,p){return bd(bd({},m),{},{currentRefinements:this.getWidgetRenderState(p)})},getWidgetRenderState:function(m){var p=m.results,v=m.scopedResults,N=m.createURL,b=m.helper;function j(){return p?v.reduce(function(x,S){return x.concat(d(EA({results:S.results,helper:S.helper,indexId:S.indexId,includedAttributes:a,excludedAttributes:l}),{results:p}))},[]):d(EA({results:{},helper:b,indexId:b.state.index,includedAttributes:a,excludedAttributes:l}),{results:p})}var _=j();return{items:_,canRefine:_.length>0,refine:function(S){return $9(b,S)},createURL:function(S){return N(F9(b.state,S))},widgetParams:r}}}}};function EA(t){var e=t.results,n=t.helper,r=t.indexId,s=t.includedAttributes,a=t.excludedAttributes,o=(s||[]).indexOf("query")!==-1||(a||[]).indexOf("query")===-1,l=s?function(d){return s.indexOf(d.attribute)!==-1}:function(d){return a.indexOf(d.attribute)===-1},u=m9(e,n.state,o).map(T0e).filter(l);return u.reduce(function(d,h){return[].concat(x0e(d.filter(function(m){return m.attribute!==h.attribute})),[{indexName:n.state.index,indexId:r,attribute:h.attribute,label:h.attribute,refinements:u.filter(function(m){return m.attribute===h.attribute}).sort(function(m,p){return m.type==="numeric"?m.value-p.value:0}),refine:function(p){return $9(n,p)}}])},[])}function F9(t,e){switch(t=t.resetPage(),e.type){case"facet":return t.removeFacetRefinement(e.attribute,String(e.value));case"disjunctive":return t.removeDisjunctiveFacetRefinement(e.attribute,String(e.value));case"hierarchical":return t.removeHierarchicalFacetRefinement(e.attribute);case"exclude":return t.removeExcludeRefinement(e.attribute,String(e.value));case"numeric":return t.removeNumericRefinement(e.attribute,e.operator,String(e.value));case"tag":return t.removeTagRefinement(String(e.value));case"query":return t.setQueryParameter("query","");default:return t}}function $9(t,e){t.setState(F9(t.state,e)).search()}function C0e(t){switch(t){case">=":return"≥";case"<=":return"≤";default:return t}}function T0e(t){var e=R0e(t),n=t.operator?"".concat(C0e(t.operator)," ").concat(t.name):t.name,r={attribute:t.attribute,type:t.type,value:e,label:n};return t.operator!==void 0&&(r.operator=t.operator),t.count!==void 0&&(r.count=t.count),t.exhaustive!==void 0&&(r.exhaustive=t.exhaustive),r}function R0e(t){return t.type==="numeric"?Number(t.name):"escapedValue"in t?t.escapedValue:t.name}function k0e(t,e){return sa(P0e,t,e)}function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function PA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(n),!0).forEach(function(r){V9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V9(t,e,n){return e=I0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I0e(t){var e=A0e(t,"string");return Xp(e)==="symbol"?e:String(e)}function A0e(t,e){if(Xp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O0e=ni({name:"hits",connector:!0}),M0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,O0e()),function(r){var s=r||{},a=s.escapeHTML,o=a===void 0?!0:a,l=s.transformItems,u=l===void 0?function(m){return m}:l,d,h;return{$$type:"ais.hits",init:function(p){e(ll(ll({},this.getWidgetRenderState(p)),{},{instantSearchInstance:p.instantSearchInstance}),!0)},render:function(p){var v=this.getWidgetRenderState(p);e(ll(ll({},v),{},{instantSearchInstance:p.instantSearchInstance}),!1),v.sendEvent("view:internal",v.hits)},getRenderState:function(p,v){return ll(ll({},p),{},{hits:this.getWidgetRenderState(v)})},getWidgetRenderState:function(p){var v=p.results,N=p.helper,b=p.instantSearchInstance;if(d||(d=kge({instantSearchInstance:b,index:N.getIndex(),widgetType:this.$$type})),h||(h=Ige({index:N.getIndex(),widgetType:this.$$type,instantSearchInstance:b})),!v)return{hits:[],results:void 0,sendEvent:d,bindEvent:h,widgetParams:r};o&&v.hits.length>0&&(v.hits=gge(v.hits));var j=Bge(v.hits,v.page,v.hitsPerPage),_=Gge(j,v.queryID),x=u(_,{results:v});return{hits:x,results:v,sendEvent:d,bindEvent:h,widgetParams:r}},dispose:function(p){var v=p.state;return n(),o?v.setQueryParameters(Object.keys(Vh).reduce(function(N,b){return ll(ll({},N),{},V9({},b,void 0))},{})):v},getWidgetSearchParameters:function(p){return o?p.setQueryParameters(Vh):p}}}};function D0e(t,e){return sa(M0e,t,e)}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function L0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z9(r.key),r)}}function $0e(t,e,n){return e&&F0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z_(t,e,n){return e=z9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z9(t){var e=V0e(t,"string");return eg(e)==="symbol"?e:String(e)}function V0e(t,e){if(eg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z0e=function(){function t(e){L0e(this,t),z_(this,"currentPage",void 0),z_(this,"total",void 0),z_(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}return $0e(t,[{key:"pages",value:function(){var n=this.total,r=this.currentPage,s=this.padding;if(n===0)return[0];var a=this.nbPagesDisplayed(s,n);if(a===n)return HI({end:n});var o=this.calculatePaddingLeft(r,s,n,a),l=a-o,u=r-o,d=r+l;return HI({start:u,end:d})}},{key:"nbPagesDisplayed",value:function(n,r){return Math.min(2*n+1,r)}},{key:"calculatePaddingLeft",value:function(n,r,s,a){return n<=r?n:n>=s-r?a-(s-n):r}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||this.total===0}},{key:"isFirstPage",value:function(){return this.currentPage===0}}]),t}();function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function CA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CA(Object(n),!0).forEach(function(r){U0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U0e(t,e,n){return e=B0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B0e(t){var e=W0e(t,"string");return tg(e)==="symbol"?e:String(e)}function W0e(t,e){if(tg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H0e=ni({name:"pagination",connector:!0}),q0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,H0e()),function(r){var s=r||{},a=s.totalPages,o=s.padding,l=o===void 0?3:o,u=new z0e({currentPage:0,total:0,padding:l}),d={};function h(m){var p=m.nbPages;return a!==void 0?Math.min(a,p):p}return{$$type:"ais.pagination",init:function(p){var v=p.instantSearchInstance;e(fa(fa({},this.getWidgetRenderState(p)),{},{instantSearchInstance:v}),!0)},render:function(p){var v=p.instantSearchInstance;e(fa(fa({},this.getWidgetRenderState(p)),{},{instantSearchInstance:v}),!1)},dispose:function(p){var v=p.state;return n(),v.setQueryParameter("page",void 0)},getWidgetUiState:function(p,v){var N=v.searchParameters,b=N.page||0;return b?fa(fa({},p),{},{page:b+1}):p},getWidgetSearchParameters:function(p,v){var N=v.uiState,b=N.page?N.page-1:0;return p.setQueryParameter("page",b)},getWidgetRenderState:function(p){var v=p.results,N=p.helper,b=p.state,j=p.createURL;d.refine||(d.refine=function(S){N.setPage(S),N.search()}),d.createURL||(d.createURL=function(S){return j(function(C){return fa(fa({},C),{},{page:S})})});var _=b.page||0,x=h(v||{nbPages:0});return u.currentPage=_,u.total=x,{createURL:d.createURL,refine:d.refine,canRefine:x>1,currentRefinement:_,nbHits:(v==null?void 0:v.nbHits)||0,nbPages:x,pages:v?u.pages():[],isFirstPage:u.isFirstPage(),isLastPage:u.isLastPage(),widgetParams:r}},getRenderState:function(p,v){return fa(fa({},p),{},{pagination:this.getWidgetRenderState(v)})}}}};function G0e(t,e){return sa(q0e,t,e)}function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function TA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TA(Object(n),!0).forEach(function(r){ex(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ex(t,e,n){return e=K0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K0e(t){var e=Z0e(t,"string");return ng(e)==="symbol"?e:String(e)}function Z0e(t,e){if(ng(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ng(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _d(t,e){return X0e(t)||J0e(t,e)||Y0e(t,e)||Q0e()}function Q0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y0e(t,e){if(t){if(typeof t=="string")return RA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RA(t,e)}}function RA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function X0e(t){if(Array.isArray(t))return t}var U_=ni({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),ewe="ais.range";function kA(t){var e=t.min,n=t.max,r=t.precision,s=Math.pow(10,r);return{min:e&&Math.floor(e*s)/s,max:n&&Math.ceil(n*s)/s}}var twe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,U_()),function(r){var s=r||{},a=s.attribute,o=a===void 0?"":a,l=s.min,u=s.max,d=s.precision,h=d===void 0?0:d;if(!o)throw new Error(U_("The `attribute` option is required."));if(ln(l)&&ln(u)&&l>u)throw new Error(U_("The `max` option can't be lower than `min`."));var m=function(S){return Number(Number(S).toFixed(h))},p={from:function(S){return S.toLocaleString()},to:function(S){return m(S).toLocaleString()}},v=function(S,C,R,V){var k=S.state,I=C.min,$=C.max,T=k.getNumericRefinement(o,">=")||[],M=_d(T,1),D=M[0],O=k.getNumericRefinement(o,"<=")||[],B=_d(O,1),Y=B[0],ee=R===void 0||R==="",Z=V===void 0||V==="",z=kA({min:ee?void 0:parseFloat(R),max:Z?void 0:parseFloat(V),precision:h}),H=z.min,q=z.max,X;!ln(l)&&I===H?X=void 0:ln(l)&&ee?X=l:X=H;var me;!ln(u)&&$===q?me=void 0:ln(u)&&Z?me=u:me=q;var Ee=X===void 0,Fe=ln(I)&&I<=X,Me=Ee||ln(X)&&(!ln(I)||Fe),ue=me===void 0,ye=ln(me)&&$>=me,J=ue||ln(me)&&(!ln($)||ye),te=D!==X,ne=Y!==me;return(te||ne)&&Me&&J?(k=k.removeNumericRefinement(o),ln(X)&&(k=k.addNumericRefinement(o,">=",X)),ln(me)&&(k=k.addNumericRefinement(o,"<=",me)),k.resetPage()):null},N=function(S){return function(){if(arguments.length===1){S.sendEventToInsights(arguments.length<=0?void 0:arguments[0]);return}}};function b(x){var S;ln(l)?S=l:ln(x.min)?S=x.min:S=0;var C;return ln(u)?C=u:ln(x.max)?C=x.max:C=0,kA({min:S,max:C,precision:h})}function j(x){var S=x.getNumericRefinement(o,">=")||[],C=_d(S,1),R=C[0],V=x.getNumericRefinement(o,"<=")||[],k=_d(V,1),I=k[0],$=ln(R)?R:-1/0,T=ln(I)?I:1/0;return[$,T]}function _(x,S){return function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[void 0,void 0],R=_d(C,2),V=R[0],k=R[1],I=v(x,S,V,k);I&&x.setState(I).search()}}return{$$type:ewe,init:function(S){e(Wr(Wr({},this.getWidgetRenderState(S)),{},{instantSearchInstance:S.instantSearchInstance}),!0)},render:function(S){e(Wr(Wr({},this.getWidgetRenderState(S)),{},{instantSearchInstance:S.instantSearchInstance}),!1)},getRenderState:function(S,C){return Wr(Wr({},S),{},{range:Wr(Wr({},S.range),{},ex({},o,this.getWidgetRenderState(C)))})},getWidgetRenderState:function(S){var C=S.results,R=S.helper,V=S.instantSearchInstance,k=C&&C.disjunctiveFacets||[],I=Eu(k,function(O){return O.name===o}),$=I&&I.stats||{min:void 0,max:void 0},T=b($),M=j(R),D;return C?D=_(R,T):D=_(R,{min:void 0,max:void 0}),{refine:D,canRefine:T.min!==T.max,format:p,range:T,sendEvent:N(V),widgetParams:Wr(Wr({},r),{},{precision:h}),start:M}},dispose:function(S){var C=S.state;return n(),C.removeDisjunctiveFacet(o).removeNumericRefinement(o)},getWidgetUiState:function(S,C){var R=C.searchParameters,V=R.getNumericRefinements(o),k=V[">="],I=k===void 0?[]:k,$=V["<="],T=$===void 0?[]:$;return I.length===0&&T.length===0?S:Wr(Wr({},S),{},{range:Wr(Wr({},S.range),{},ex({},o,"".concat(I,":").concat(T)))})},getWidgetSearchParameters:function(S,C){var R=C.uiState,V=S.addDisjunctiveFacet(o).setQueryParameters({numericRefinements:Wr(Wr({},S.numericRefinements),{},ex({},o,{}))});ln(l)&&(V=V.addNumericRefinement(o,">=",l)),ln(u)&&(V=V.addNumericRefinement(o,"<=",u));var k=R.range&&R.range[o];if(!k||k.indexOf(":")===-1)return V;var I=k.split(":").map(parseFloat),$=_d(I,2),T=$[0],M=$[1];return ln(T)&&(!ln(l)||l<T)&&(V=V.removeNumericRefinement(o,">="),V=V.addNumericRefinement(o,">=",T)),ln(M)&&(!ln(u)||M<u)&&(V=V.removeNumericRefinement(o,"<="),V=V.addNumericRefinement(o,"<=",M)),V}}}};function nwe(t,e){return sa(twe,t,e)}function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}var rwe=["name","escapedValue"],swe=["escapedValue","value"];function IA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(n),!0).forEach(function(r){Sm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sm(t,e,n){return e=iwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iwe(t){var e=awe(t,"string");return rg(e)==="symbol"?e:String(e)}function awe(t,e){if(rg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AA(t,e){if(t==null)return{};var n=owe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function owe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var by=ni({name:"refinement-list",connector:!0}),OA=["isRefined","count:desc","name:asc"],lwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,by()),function(r){var s=r||{},a=s.attribute,o=s.operator,l=o===void 0?"or":o,u=s.limit,d=u===void 0?10:u,h=s.showMore,m=h===void 0?!1:h,p=s.showMoreLimit,v=p===void 0?20:p,N=s.sortBy,b=N===void 0?OA:N,j=s.escapeFacetValues,_=j===void 0?!0:j,x=s.transformItems,S=x===void 0?function(Z){return Z}:x;if(!a)throw new Error(by("The `attribute` option is required."));if(!/^(and|or)$/.test(l))throw new Error(by('The `operator` must one of: `"and"`, `"or"` (got "'.concat(l,'").')));if(m===!0&&v<=d)throw new Error(by("`showMoreLimit` should be greater than `limit`."));var C=function(z){var H=z.name,q=z.escapedValue,X=AA(z,rwe);return cn(cn({},X),{},{value:q,label:H,highlighted:H})},R,V=[],k=!0,I,$,T=!1,M=function(){};function D(){M()}function O(Z,z){return function(){T=!T,z.render(Z)}}function B(){return T?v:d}var Y=function(){return function(){}},ee=function(z,H){return function(q){return function(X){var me=q.instantSearchInstance,Ee=q.results;if(X===""&&V)e(cn(cn({},H.getWidgetRenderState(cn(cn({},q),{},{results:R}))),{},{instantSearchInstance:me}),!1);else{var Fe={highlightPreTag:_?Vh.highlightPreTag:ns.highlightPreTag,highlightPostTag:_?Vh.highlightPostTag:ns.highlightPostTag};z.searchForFacetValues(a,X,Math.min(B(),100),Fe).then(function(Me){var ue=_?vge(Me.facetHits):Me.facetHits,ye=S(ue.map(function(J){var te=J.escapedValue,ne=J.value,K=AA(J,swe);return cn(cn({},K),{},{value:te,label:ne})}),{results:Ee});e(cn(cn({},H.getWidgetRenderState(cn(cn({},q),{},{results:R}))),{},{items:ye,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:me}),!1)})}}}};return{$$type:"ais.refinementList",init:function(z){e(cn(cn({},this.getWidgetRenderState(z)),{},{instantSearchInstance:z.instantSearchInstance}),!0)},render:function(z){e(cn(cn({},this.getWidgetRenderState(z)),{},{instantSearchInstance:z.instantSearchInstance}),!1)},getRenderState:function(z,H){return cn(cn({},z),{},{refinementList:cn(cn({},z.refinementList),{},Sm({},a,this.getWidgetRenderState(H)))})},getWidgetRenderState:function(z){var H=this,q=z.results,X=z.state,me=z.createURL,Ee=z.instantSearchInstance,Fe=z.helper,Me=[],ue=[];if((!$||!I||!Y)&&($=Nge({instantSearchInstance:Ee,helper:Fe,attribute:a,widgetType:this.$$type}),I=function(xe){$("click:internal",xe),Fe.toggleFacetRefinement(a,xe).search()},Y=ee(Fe,this)),q){var ye=q.getFacetValues(a,{sortBy:b,facetOrdering:b===OA});ue=ye&&Array.isArray(ye)?ye:[],Me=S(ue.slice(0,B()).map(C),{results:q});var J=X.maxValuesPerFacet,te=B();k=J>te?ue.length<=te:ue.length<te,R=q,V=Me,z.results&&(M=O(z,this))}var ne=Y&&Y(z),K=T&&V.length>d,ie=m&&!k,he=K||ie;return{createURL:function(xe){return me(function(se){return H.getWidgetUiState(se,{searchParameters:X.resetPage().toggleFacetRefinement(a,xe),helper:Fe})})},items:Me,refine:I,searchForItems:ne,isFromSearch:!1,canRefine:Me.length>0,widgetParams:r,isShowingMore:T,canToggleShowMore:he,toggleShowMore:D,sendEvent:$,hasExhaustiveItems:k}},dispose:function(z){var H=z.state;n();var q=H.setQueryParameter("maxValuesPerFacet",void 0);return l==="and"?q.removeFacet(a):q.removeDisjunctiveFacet(a)},getWidgetUiState:function(z,H){var q=H.searchParameters,X=l==="or"?q.getDisjunctiveRefinements(a):q.getConjunctiveRefinements(a);return X.length?cn(cn({},z),{},{refinementList:cn(cn({},z.refinementList),{},Sm({},a,X))}):z},getWidgetSearchParameters:function(z,H){var q=H.uiState,X=l==="or";if(z.isHierarchicalFacet(a)||X&&z.isConjunctiveFacet(a)||!X&&z.isDisjunctiveFacet(a))return z;var me=q.refinementList&&q.refinementList[a],Ee=z.clearRefinements(a),Fe=X?Ee.addDisjunctiveFacet(a):Ee.addFacet(a),Me=Fe.maxValuesPerFacet||0,ue=Math.max(Me,m?v:d),ye=Fe.setQueryParameter("maxValuesPerFacet",ue);if(!me){var J=X?"disjunctiveFacetsRefinements":"facetsRefinements";return ye.setQueryParameters(Sm({},J,cn(cn({},ye[J]),{},Sm({},a,[]))))}return me.reduce(function(te,ne){return X?te.addDisjunctiveFacetRefinement(a,ne):te.addFacetRefinement(a,ne)},ye)}}}};function cwe(t,e){return sa(lwe,t,e)}function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){uwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uwe(t,e,n){return e=dwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dwe(t){var e=hwe(t,"string");return sg(e)==="symbol"?e:String(e)}function hwe(t,e){if(sg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fwe=ni({name:"search-box",connector:!0}),mwe=function(e,n){return n(e)},pwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,fwe()),function(r){var s=r||{},a=s.queryHook,o=a===void 0?mwe:a,l,u;return{$$type:"ais.searchBox",init:function(h){var m=h.instantSearchInstance;e(cl(cl({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!0)},render:function(h){var m=h.instantSearchInstance;e(cl(cl({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!1)},dispose:function(h){var m=h.state;return n(),m.setQueryParameter("query",void 0)},getRenderState:function(h,m){return cl(cl({},h),{},{searchBox:this.getWidgetRenderState(m)})},getWidgetRenderState:function(h){var m=h.helper,p=h.searchMetadata,v=h.state;return l||(l=function(b){o(b,function(j){return m.setQuery(j).search()})},u=function(){m.setQuery("").search()}),{query:v.query||"",refine:l,clear:u,widgetParams:r,isSearchStalled:p.isSearchStalled}},getWidgetUiState:function(h,m){var p=m.searchParameters,v=p.query||"";return v===""||h&&h.query===v?h:cl(cl({},h),{},{query:v})},getWidgetSearchParameters:function(h,m){var p=m.uiState;return h.setQueryParameter("query",p.query||"")}}}};function gwe(t,e){return sa(pwe,t,e)}function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function DA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ul(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(n),!0).forEach(function(r){vwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vwe(t,e,n){return e=ywe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ywe(t){var e=xwe(t,"string");return ig(e)==="symbol"?e:String(e)}function xwe(t,e){if(ig(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LA=ni({name:"sort-by",connector:!0}),wwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;Ka(e,LA());var r={};return function(s){var a=s||{},o=a.items,l=a.transformItems,u=l===void 0?function(d){return d}:l;if(!Array.isArray(o))throw new Error(LA("The `items` option expects an array of objects."));return{$$type:"ais.sortBy",init:function(h){var m=h.instantSearchInstance,p=this.getWidgetRenderState(h),v=p.currentRefinement;Eu(o,function(N){return N.value===v}),e(ul(ul({},p),{},{instantSearchInstance:m}),!0)},render:function(h){var m=h.instantSearchInstance;e(ul(ul({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!1)},dispose:function(h){var m=h.state;return n(),r.initialIndex?m.setIndex(r.initialIndex):m},getRenderState:function(h,m){return ul(ul({},h),{},{sortBy:this.getWidgetRenderState(m)})},getWidgetRenderState:function(h){var m=h.results,p=h.helper,v=h.state,N=h.parent;!r.initialIndex&&N&&(r.initialIndex=N.getIndexName()),r.setIndex||(r.setIndex=function(j){p.setIndex(j).search()});var b=m?m.nbHits===0:!0;return{currentRefinement:v.index,options:u(o,{results:m}),refine:r.setIndex,hasNoResults:b,canRefine:!b&&o.length>0,widgetParams:s}},getWidgetUiState:function(h,m){var p=m.searchParameters,v=p.index;return ul(ul({},h),{},{sortBy:v!==r.initialIndex?v:void 0})},getWidgetSearchParameters:function(h,m){var p=m.uiState;return h.setQueryParameter("index",p.sortBy||r.initialIndex||h.index)}}}};function bwe(t,e){return sa(wwe,t,e)}function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function FA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(n),!0).forEach(function(r){_we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _we(t,e,n){return e=jwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jwe(t){var e=Nwe(t,"string");return ag(e)==="symbol"?e:String(e)}function Nwe(t,e){if(ag(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ag(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Swe=ni({name:"stats",connector:!0}),Ewe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,Swe()),function(r){return{$$type:"ais.stats",init:function(a){var o=a.instantSearchInstance;e(jd(jd({},this.getWidgetRenderState(a)),{},{instantSearchInstance:o}),!0)},render:function(a){var o=a.instantSearchInstance;e(jd(jd({},this.getWidgetRenderState(a)),{},{instantSearchInstance:o}),!1)},dispose:function(){n()},getRenderState:function(a,o){return jd(jd({},a),{},{stats:this.getWidgetRenderState(o)})},getWidgetRenderState:function(a){var o=a.results,l=a.state;return o?{hitsPerPage:o.hitsPerPage,nbHits:o.nbHits,nbSortedHits:o.nbSortedHits,areHitsSorted:typeof o.appliedRelevancyStrictness<"u"&&o.appliedRelevancyStrictness>0&&o.nbSortedHits!==o.nbHits,nbPages:o.nbPages,page:o.page,processingTimeMS:o.processingTimeMS,query:o.query,widgetParams:r}:{hitsPerPage:l.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:l.page||0,processingTimeMS:-1,query:l.query||"",widgetParams:r}}}}};function Pwe(t,e){return sa(Ewe,t,e)}function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function $A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(n),!0).forEach(function(r){tx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tx(t,e,n){return e=Cwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cwe(t){var e=Twe(t,"string");return og(e)==="symbol"?e:String(e)}function Twe(t,e){if(og(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(og(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rwe(t,e){return Owe(t)||Awe(t,e)||Iwe(t,e)||kwe()}function kwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iwe(t,e){if(t){if(typeof t=="string")return VA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VA(t,e)}}function VA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Awe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Owe(t){if(Array.isArray(t))return t}var zA=ni({name:"toggle-refinement",connector:!0}),U9="ais.toggleRefinement",Mwe=function(e){var n=e.instantSearchInstance,r=e.helper,s=e.attribute,a=e.on,o=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];if(d.length===1){n.sendEventToInsights(d[0]);return}var m=d[1],p=d[2],v=p===void 0?"Filter Applied":p,N=d[0].split(":"),b=Rwe(N,2),j=b[0],_=b[1];j!=="click"||a===void 0||m||n.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:U9,eventType:j,eventModifier:_,payload:{eventName:v,index:r.getIndex(),filters:a.map(function(x){return"".concat(s,":").concat(x)})},attribute:s})};return o},Dwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return Ka(e,zA()),function(r){var s=r||{},a=s.attribute,o=s.on,l=o===void 0?!0:o,u=s.off;if(!a)throw new Error(zA("The `attribute` option is required."));var d=u!==void 0,h=L_(l).map(jm),m=d?L_(u).map(jm):void 0,p,v=function(j){return function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{isRefined:!1},x=_.isRefined;x?(h.forEach(function(S){return j.removeDisjunctiveFacetRefinement(a,S)}),d&&m.forEach(function(S){return j.addDisjunctiveFacetRefinement(a,S)})):(p("click:internal",x),d&&m.forEach(function(S){return j.removeDisjunctiveFacetRefinement(a,S)}),h.forEach(function(S){return j.addDisjunctiveFacetRefinement(a,S)})),j.search()}},N={createURLFactory:function(j,_){var x=_.state,S=_.createURL,C=_.getWidgetUiState,R=_.helper;return function(){x=x.resetPage();var V=j?h:m;V&&V.forEach(function(I){x=x.removeDisjunctiveFacetRefinement(a,I)});var k=j?m:h;return k&&k.forEach(function(I){x=x.addDisjunctiveFacetRefinement(a,I)}),S(function(I){return C(I,{searchParameters:x,helper:R})})}}};return{$$type:U9,init:function(j){var _=j.instantSearchInstance;e(_s(_s({},this.getWidgetRenderState(j)),{},{instantSearchInstance:_}),!0)},render:function(j){var _=j.instantSearchInstance;e(_s(_s({},this.getWidgetRenderState(j)),{},{instantSearchInstance:_}),!1)},dispose:function(j){var _=j.state;return n(),_.removeDisjunctiveFacet(a)},getRenderState:function(j,_){return _s(_s({},j),{},{toggleRefinement:_s(_s({},j.toggleRefinement),{},tx({},a,this.getWidgetRenderState(_)))})},getWidgetRenderState:function(j){var _=j.state,x=j.helper,S=j.results,C=j.createURL,R=j.instantSearchInstance,V=S?h.every(function(B){return _.isDisjunctiveFacetRefined(a,B)}):h.every(function(B){return _.isDisjunctiveFacetRefined(a,B)}),k={isRefined:V,count:0},I={isRefined:d&&!V,count:0};if(S){var $=L_(m||!1),T=S.getFacetValues(a,{})||[],M=h.map(function(B){return Eu(T,function(Y){var ee=Y.escapedValue;return ee===jm(String(B))})}).filter(function(B){return B!==void 0}),D=d?$.map(function(B){return Eu(T,function(Y){var ee=Y.escapedValue;return ee===jm(String(B))})}).filter(function(B){return B!==void 0}):[];k={isRefined:M.length?M.every(function(B){return B.isRefined}):!1,count:M.reduce(function(B,Y){return B+Y.count},0)||null},I={isRefined:D.length?D.every(function(B){return B.isRefined}):!1,count:D.reduce(function(B,Y){return B+Y.count},0)||T.reduce(function(B,Y){var ee=Y.count;return B+ee},0)}}p||(p=Mwe({instantSearchInstance:R,attribute:a,on:h,helper:x}));var O=V?I:k;return{value:{name:a,isRefined:V,count:S?O.count:null,onFacetValue:k,offFacetValue:I},createURL:N.createURLFactory(V,{state:_,createURL:C,helper:x,getWidgetUiState:this.getWidgetUiState}),sendEvent:p,canRefine:!!(S&&O.count),refine:v(x),widgetParams:r}},getWidgetUiState:function(j,_){var x=_.searchParameters,S=h&&h.every(function(R){return x.isDisjunctiveFacetRefined(a,R)});if(!S){var C;return(C=j.toggle)===null||C===void 0||delete C[a],j}return _s(_s({},j),{},{toggle:_s(_s({},j.toggle),{},tx({},a,S))})},getWidgetSearchParameters:function(j,_){var x=_.uiState;if(j.isHierarchicalFacet(a)||j.isConjunctiveFacet(a))return j;var S=j.clearRefinements(a).addDisjunctiveFacet(a),C=!!(x.toggle&&x.toggle[a]);return C?(h&&h.forEach(function(R){S=S.addDisjunctiveFacetRefinement(a,R)}),S):d?(m&&m.forEach(function(R){S=S.addDisjunctiveFacetRefinement(a,R)}),S):S.setQueryParameters({disjunctiveFacetsRefinements:_s(_s({},j.disjunctiveFacetsRefinements),{},tx({},a,[]))})}}}};function Lwe(t,e){return sa(Dwe,t,e)}function Be(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}function B9(t){var e=t.button===1;return!!(e||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}var Fwe=["classNames","disabled","onClick","translations"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function $we(t,e){if(t==null)return{};var n=Vwe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zwe(t){var e=t.classNames,n=e===void 0?{}:e,r=t.disabled,s=r===void 0?!1:r,a=t.onClick,o=a===void 0?function(){}:a,l=t.translations,u=$we(t,Fwe);return oe.createElement("div",gN({},u,{className:Be("ais-ClearRefinements",n.root,u.className)}),oe.createElement("button",{disabled:s,onClick:o,className:Be("ais-ClearRefinements-button",n.button,s&&Be("ais-ClearRefinements-button--disabled",n.disabledButton))},l.resetButtonText))}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}var Uwe=["includedAttributes","excludedAttributes","transformItems","translations"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(this,arguments)}function UA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bwe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(n),!0).forEach(function(r){Wwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wwe(t,e,n){return e=Hwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hwe(t){var e=qwe(t,"string");return lg(e)==="symbol"?e:String(e)}function qwe(t,e){if(lg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gwe(t,e){if(t==null)return{};var n=Kwe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zwe(t){var e=t.includedAttributes,n=t.excludedAttributes,r=t.transformItems,s=t.translations,a=Gwe(t,Uwe),o=y0e({includedAttributes:e,excludedAttributes:n,transformItems:r},{$$widgetType:"ais.clearRefinements"}),l=o.canRefine,u=o.refine,d={onClick:u,disabled:!l,translations:Bwe({resetButtonText:"Clear refinements"},s)};return oe.createElement(zwe,vN({},a,d))}var Qwe=["classNames","items","onRemove","hasRefinements"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function Ywe(t,e){if(t==null)return{};var n=Jwe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Xwe(t){var e=t.classNames,n=e===void 0?{}:e,r=t.items,s=r===void 0?[]:r,a=t.onRemove,o=a===void 0?function(){}:a,l=t.hasRefinements,u=l===void 0?!1:l,d=Ywe(t,Qwe);return oe.createElement("div",yN({},d,{className:Be("ais-CurrentRefinements",n.root,!u&&Be("ais-CurrentRefinements--noRefinement",n.noRefinementRoot),d.className)}),oe.createElement("ul",{className:Be("ais-CurrentRefinements-list",n.list,!u&&Be("ais-CurrentRefinements-list--noRefinement",n.noRefinementList))},s.map(function(h){return oe.createElement("li",{key:[h.indexName,h.label].join("/"),className:Be("ais-CurrentRefinements-item",n.item)},oe.createElement("span",{className:Be("ais-CurrentRefinements-label",n.label)},h.label,":"),h.refinements.map(function(m){return oe.createElement("span",{key:m.label,className:Be("ais-CurrentRefinements-category",n.category)},oe.createElement("span",{className:Be("ais-CurrentRefinements-categoryLabel",n.categoryLabel)},m.label),oe.createElement("button",{type:"button",onClick:function(v){B9(v)||o(m)},className:Be("ais-CurrentRefinements-delete",n.delete)},"✕"))}))})))}var ebe=["includedAttributes","excludedAttributes","transformItems"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(this,arguments)}function tbe(t,e){if(t==null)return{};var n=nbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function rbe(t){var e=t.includedAttributes,n=t.excludedAttributes,r=t.transformItems,s=tbe(t,ebe),a=k0e({includedAttributes:e,excludedAttributes:n,transformItems:r},{$$widgetType:"ais.currentRefinements"}),o=a.items,l=a.refine,u=a.canRefine,d={items:o,onRemove:l,hasRefinements:u};return oe.createElement(Xwe,xN({},s,d))}var sbe=["isShowingMore","translations"];function ibe(t,e){if(t==null)return{};var n=abe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function abe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function obe(t){var e=t.isShowingMore,n=t.translations,r=ibe(t,sbe);return oe.createElement("button",r,n.showMoreButtonText({isShowingMore:e}))}var lbe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},W9=/&(amp|quot|lt|gt|#39);/g,cbe=RegExp(W9.source);function ube(t){return t&&cbe.test(t)?t.replace(W9,function(e){return lbe[e]}):t}var BA={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function dbe(t){var e=BA.highlightPostTag,n=BA.highlightPreTag,r=t.split(n),s=r.shift(),a=s?[{value:s,isHighlighted:!1}]:[];return r.forEach(function(o){var l=o.split(e);a.push({value:l[0],isHighlighted:!0}),l[1]!==""&&a.push({value:l[1],isHighlighted:!1})}),a}var hbe=["parts","highlightedTagName","nonHighlightedTagName","separator","className","classNames"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(this,arguments)}function fbe(t,e){if(t==null)return{};var n=mbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pbe(t){var e=t.classNames,n=t.children,r=t.highlightedTagName,s=t.isHighlighted,a=t.nonHighlightedTagName,o=s?r:a;return oe.createElement(o,{className:s?e.highlighted:e.nonHighlighted},n)}function gbe(t){var e=t.parts,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.nonHighlightedTagName,a=s===void 0?"span":s,o=t.separator,l=o===void 0?", ":o,u=t.className,d=t.classNames,h=fbe(t,hbe);return oe.createElement("span",wN({},h,{className:Be(d.root,u)}),e.map(function(m,p){var v=p===e.length-1;return oe.createElement(w.Fragment,{key:p},m.map(function(N,b){return oe.createElement(pbe,{key:b,classNames:d,highlightedTagName:r,nonHighlightedTagName:a,isHighlighted:N.isHighlighted},N.value)}),!v&&oe.createElement("span",{className:d.separator},l))}))}var vbe=["classNames"];function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bN.apply(this,arguments)}function ybe(t,e){if(t==null)return{};var n=xbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function wbe(t){var e=t.classNames,n=e===void 0?{}:e,r=ybe(t,vbe);return oe.createElement(gbe,bN({classNames:{root:Be("ais-Highlight",n.root),highlighted:Be("ais-Highlight-highlighted",n.highlighted),nonHighlighted:Be("ais-Highlight-nonHighlighted",n.nonHighlighted),separator:Be("ais-Highlight-separator",n.separator)}},r))}var bbe=["hits","sendEvent","hitComponent","classNames"];function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_N.apply(this,arguments)}function _be(t,e){if(t==null)return{};var n=jbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Nbe(t){var e=t.hit;return oe.createElement("div",{style:{wordBreak:"break-all"}},JSON.stringify(e).slice(0,100),"…")}function Sbe(t){var e=t.hits,n=t.sendEvent,r=t.hitComponent,s=r===void 0?Nbe:r,a=t.classNames,o=a===void 0?{}:a,l=_be(t,bbe);return oe.createElement("div",_N({},l,{className:Be("ais-Hits",o.root,e.length===0&&Be("ais-Hits--empty",o.emptyRoot),l.className)}),oe.createElement("ol",{className:Be("ais-Hits-list",o.list)},e.map(function(u){return oe.createElement("li",{key:u.objectID,className:Be("ais-Hits-item",o.item),onClick:function(){n("click:internal",u,"Hit Clicked")},onAuxClick:function(){n("click:internal",u,"Hit Clicked")}},oe.createElement(s,{hit:u,sendEvent:n}))})))}var Ebe=["escapeHTML","transformItems"];function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jN.apply(this,arguments)}function Pbe(t,e){if(t==null)return{};var n=Cbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Tbe(t){var e=t.escapeHTML,n=t.transformItems,r=Pbe(t,Ebe),s=D0e({escapeHTML:e,transformItems:n},{$$widgetType:"ais.hits"}),a=s.hits,o=s.sendEvent,l={hits:a,sendEvent:o};return oe.createElement(Sbe,jN({},r,l))}var Rbe=["pages","currentPage","nbPages","isFirstPage","isLastPage","showFirst","showPrevious","showNext","showLast","createURL","onNavigate","translations","classNames"],kbe=["isDisabled","className","classNames","href","onClick"];function cg(){return cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cg.apply(this,arguments)}function H9(t,e){if(t==null)return{};var n=Ibe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ibe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Abe(t){var e=t.pages,n=t.currentPage,r=t.nbPages,s=t.isFirstPage,a=t.isLastPage,o=t.showFirst,l=o===void 0?!0:o,u=t.showPrevious,d=u===void 0?!0:u,h=t.showNext,m=h===void 0?!0:h,p=t.showLast,v=p===void 0?!0:p,N=t.createURL,b=t.onNavigate,j=t.translations,_=t.classNames,x=_===void 0?{}:_,S=H9(t,Rbe),C=0,R=n-1,V=n+1,k=r-1;return oe.createElement("div",cg({},S,{className:Be("ais-Pagination",x.root,r<=1&&Be("ais-Pagination--noRefinement",x.noRefinementRoot),S.className)}),oe.createElement("ul",{className:Be("ais-Pagination-list",x.list)},l&&oe.createElement(lm,{isDisabled:s,className:Be("ais-Pagination-item--firstPage",x.firstPageItem),classNames:x,"aria-label":j.firstPageItemAriaLabel,href:N(C),onClick:function(){return b(C)}},j.firstPageItemText),d&&oe.createElement(lm,{isDisabled:s,className:Be("ais-Pagination-item--previousPage",x.previousPageItem),classNames:x,"aria-label":j.previousPageItemAriaLabel,href:N(R),onClick:function(){return b(R)}},j.previousPageItemText),e.map(function(I){return oe.createElement(lm,{key:I,isDisabled:!1,className:Be("ais-Pagination-item--page",x.pageItem,I===n&&Be("ais-Pagination-item--selected",x.selectedItem)),classNames:x,"aria-label":j.pageItemAriaLabel({currentPage:I+1,nbPages:r}),href:N(I),onClick:function(){return b(I)}},j.pageItemText({currentPage:I+1,nbPages:r}))}),m&&oe.createElement(lm,{isDisabled:a,className:Be("ais-Pagination-item--nextPage",x.nextPageItem),classNames:x,"aria-label":j.nextPageItemAriaLabel,href:N(V),onClick:function(){return b(V)}},j.nextPageItemText),v&&oe.createElement(lm,{isDisabled:a,className:Be("ais-Pagination-item--lastPage",x.lastPageItem),classNames:x,"aria-label":j.lastPageItemAriaLabel,href:N(k),onClick:function(){return b(k)}},j.lastPageItemText)))}function lm(t){var e=t.isDisabled,n=t.className,r=t.classNames,s=t.href,a=t.onClick,o=H9(t,kbe);return e?oe.createElement("li",{className:Be("ais-Pagination-item",r.item,"ais-Pagination-item--disabled",r.disabledItem,n)},oe.createElement("span",cg({className:Be("ais-Pagination-link",r.link)},o))):oe.createElement("li",{className:Be("ais-Pagination-item",r.item,n)},oe.createElement("a",cg({className:Be("ais-Pagination-link",r.link),href:s,onClick:function(u){B9(u)||(u.preventDefault(),a(u))}},o)))}function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}var Obe=["showFirst","showPrevious","showNext","showLast","padding","totalPages","translations"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(this,arguments)}function WA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WA(Object(n),!0).forEach(function(r){Dbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dbe(t,e,n){return e=Lbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lbe(t){var e=Fbe(t,"string");return ug(e)==="symbol"?e:String(e)}function Fbe(t,e){if(ug(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ug(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $be(t,e){if(t==null)return{};var n=Vbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zbe(t){var e=t.showFirst,n=t.showPrevious,r=t.showNext,s=t.showLast,a=t.padding,o=t.totalPages,l=t.translations,u=$be(t,Obe),d=G0e({padding:a,totalPages:o},{$$widgetType:"ais.pagination"}),h=d.pages,m=d.currentRefinement,p=d.isFirstPage,v=d.isLastPage,N=d.nbPages,b=d.createURL,j=d.refine,_={pages:h,currentPage:m,isFirstPage:p,isLastPage:v,nbPages:N,createURL:b,onNavigate:j,translations:Mbe({firstPageItemText:"‹‹",previousPageItemText:"‹",nextPageItemText:"›",lastPageItemText:"››",pageItemText:function(S){var C=S.currentPage;return String(C)},firstPageItemAriaLabel:"First",previousPageItemAriaLabel:"Previous",nextPageItemAriaLabel:"Next",lastPageItemAriaLabel:"Last",pageItemAriaLabel:function(S){var C=S.currentPage;return"Page ".concat(C)}},l)};return oe.createElement(Abe,NN({},u,_,{showFirst:e,showPrevious:n,showNext:r,showLast:s}))}var Ube=["classNames","range","start","step","disabled","onSubmit","translations"];function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SN.apply(this,arguments)}function Bbe(t,e){if(t==null)return{};var n=Wbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function B_(t,e){return Kbe(t)||Gbe(t,e)||qbe(t,e)||Hbe()}function Hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qbe(t,e){if(t){if(typeof t=="string")return HA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HA(t,e)}}function HA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Kbe(t){if(Array.isArray(t))return t}var Nd="";function qA(t){return t.replace(/^(0+)\d/,function(e){return Number(e).toString()})}function Zbe(t){var e,n,r=t.classNames,s=r===void 0?{}:r,a=t.range,o=a.min,l=a.max,u=B_(t.start,2),d=u[0],h=u[1],m=t.step,p=m===void 0?1:m,v=t.disabled,N=t.onSubmit,b=t.translations,j=Bbe(t,Ube),_={min:d!==-1/0&&d!==o?d:Nd,max:h!==1/0&&h!==l?h:Nd},x=w.useState(_),S=B_(x,2),C=S[0],R=S[1],V=w.useState({from:(e=_.min)===null||e===void 0?void 0:e.toString(),to:(n=_.max)===null||n===void 0?void 0:n.toString()}),k=B_(V,2),I=k[0],$=I.from,T=I.to,M=k[1];if(_.min!==C.min||_.max!==C.max){var D,O;M({from:(D=_.min)===null||D===void 0?void 0:D.toString(),to:(O=_.max)===null||O===void 0?void 0:O.toString()}),R(_)}return oe.createElement("div",SN({},j,{className:Be(Be("ais-RangeInput",s.root),v&&Be("ais-RangeInput--noRefinement",s.noRefinementRoot),j.className)}),oe.createElement("form",{className:Be("ais-RangeInput-form",s.form),onSubmit:function(Y){Y.preventDefault(),N([$?Number($):void 0,T?Number(T):void 0])}},oe.createElement("label",{className:Be("ais-RangeInput-label",s.label)},oe.createElement("input",{className:Be("ais-RangeInput-input",s.input,"ais-RangeInput-input--min",s.inputMin),type:"number",min:o,max:l,value:qA($||Nd),step:p,placeholder:o==null?void 0:o.toString(),disabled:v,onInput:function(Y){var ee=Y.currentTarget,Z=ee.value;M({from:Z||Nd,to:T})}})),oe.createElement("span",{className:Be("ais-RangeInput-separator",s.separator)},b.separatorElementText),oe.createElement("label",{className:Be("ais-RangeInput-label",s.label)},oe.createElement("input",{className:Be("ais-RangeInput-input",s.input,"ais-RangeInput-input--max",s.inputMax),type:"number",min:o,max:l,value:qA(T||Nd),step:p,placeholder:l==null?void 0:l.toString(),disabled:v,onInput:function(Y){var ee=Y.currentTarget,Z=ee.value;M({from:$,to:Z||Nd})}})),oe.createElement("button",{className:Be("ais-RangeInput-submit",s.submit),type:"submit"},b.submitButtonText)))}function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}var Qbe=["attribute","min","max","precision","translations"];function EN(){return EN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EN.apply(this,arguments)}function GA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ybe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GA(Object(n),!0).forEach(function(r){Jbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jbe(t,e,n){return e=Xbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xbe(t){var e=e_e(t,"string");return dg(e)==="symbol"?e:String(e)}function e_e(t,e){if(dg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t_e(t,e){if(t==null)return{};var n=n_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function KA(t){var e=t.attribute,n=t.min,r=t.max,s=t.precision,a=t.translations,o=t_e(t,Qbe),l=nwe({attribute:e,min:n,max:r,precision:s},{$$widgetType:"ais.rangeInput"}),u=l.range,d=l.start,h=l.canRefine,m=l.refine,p=1/Math.pow(10,s||0),v={range:u,start:d,step:p,disabled:!h,onSubmit:m,translations:Ybe({separatorElementText:"to",submitButtonText:"Go"},a)};return oe.createElement(Zbe,EN({},o,v))}var r_e=["canRefine","items","onRefine","query","searchBox","noResults","showMore","canToggleShowMore","onToggleShowMore","isShowingMore","className","classNames","translations"];function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PN.apply(this,arguments)}function s_e(t,e){if(t==null)return{};var n=i_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function i_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function a_e(t){var e=t.canRefine,n=t.items,r=t.onRefine,s=t.query,a=t.searchBox,o=t.noResults,l=t.showMore,u=t.canToggleShowMore,d=t.onToggleShowMore,h=t.isShowingMore,m=t.className,p=t.classNames,v=p===void 0?{}:p,N=t.translations,b=s_e(t,r_e);return oe.createElement("div",PN({},b,{className:Be("ais-RefinementList",v.root,!e&&Be("ais-RefinementList--noRefinement",v.noRefinementRoot),m)}),a&&oe.createElement("div",{className:Be("ais-RefinementList-searchBox",v.searchBox)},a),o?oe.createElement("div",{className:Be("ais-RefinementList-noResults",v.noResults)},o):oe.createElement("ul",{className:Be("ais-RefinementList-list",v.list)},n.map(function(j){return oe.createElement("li",{key:j.value,className:Be("ais-RefinementList-item",v.item,j.isRefined&&Be("ais-RefinementList-item--selected",v.selectedItem))},oe.createElement("label",{className:Be("ais-RefinementList-label",v.label)},oe.createElement("input",{checked:j.isRefined,className:Be("ais-RefinementList-checkbox",v.checkbox),type:"checkbox",value:j.value,onChange:function(){r(j)}}),oe.createElement("span",{className:Be("ais-RefinementList-labelText",v.labelText)},s.length>0?oe.createElement(wbe,{parts:[dbe(ube(j.highlighted||""))]}):j.label),oe.createElement("span",{className:Be("ais-RefinementList-count",v.count)},j.count)))})),l&&oe.createElement(obe,{className:Be("ais-RefinementList-showMore",v.showMore,!u&&Be("ais-RefinementList-showMore--disabled",v.disabledShowMore)),disabled:!u,onClick:d,isShowingMore:h,translations:N}))}var o_e=["formRef","inputRef","isSearchStalled","onChange","onReset","onSubmit","placeholder","value","autoFocus","resetIconComponent","submitIconComponent","loadingIconComponent","classNames","translations"];function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CN.apply(this,arguments)}function l_e(t,e){if(t==null)return{};var n=c_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var u_e=oe.createElement("path",{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"});function d_e(t){var e=t.classNames;return oe.createElement("svg",{className:Be("ais-SearchBox-submitIcon",e.submitIcon),width:"10",height:"10",viewBox:"0 0 40 40","aria-hidden":"true"},u_e)}var h_e=oe.createElement("path",{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"});function f_e(t){var e=t.classNames;return oe.createElement("svg",{className:Be("ais-SearchBox-resetIcon",e.resetIcon),viewBox:"0 0 20 20",width:"10",height:"10","aria-hidden":"true"},h_e)}var m_e=oe.createElement("g",{fill:"none",fillRule:"evenodd"},oe.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},oe.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),oe.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},oe.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))));function p_e(t){var e=t.classNames;return oe.createElement("svg",{width:"16",height:"16",viewBox:"0 0 38 38",stroke:"#444",className:Be("ais-SearchBox-loadingIcon",e.loadingIcon),"aria-hidden":"true"},m_e)}function q9(t){var e=t.formRef,n=t.inputRef,r=t.isSearchStalled,s=t.onChange,a=t.onReset,o=t.onSubmit,l=t.placeholder,u=t.value,d=t.autoFocus,h=t.resetIconComponent,m=h===void 0?f_e:h,p=t.submitIconComponent,v=p===void 0?d_e:p,N=t.loadingIconComponent,b=N===void 0?p_e:N,j=t.classNames,_=j===void 0?{}:j,x=t.translations,S=l_e(t,o_e);function C(V){V.preventDefault(),V.stopPropagation(),o&&o(V),n.current&&n.current.blur()}function R(V){V.preventDefault(),V.stopPropagation(),a(V),n.current&&n.current.focus()}return oe.createElement("div",CN({},S,{className:Be("ais-SearchBox",_.root,S.className)}),oe.createElement("form",{ref:e,action:"",className:Be("ais-SearchBox-form",_.form),noValidate:!0,onSubmit:C,onReset:R},oe.createElement("input",{ref:n,className:Be("ais-SearchBox-input",_.input),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",placeholder:l,spellCheck:!1,maxLength:512,type:"search",value:u,onChange:s,autoFocus:d}),oe.createElement("button",{className:Be("ais-SearchBox-submit",_.submit),type:"submit",title:x.submitButtonTitle},oe.createElement(v,{classNames:_})),oe.createElement("button",{className:Be("ais-SearchBox-reset",_.reset),type:"reset",title:x.resetButtonTitle,hidden:u.length===0||r},oe.createElement(m,{classNames:_})),oe.createElement("span",{className:Be("ais-SearchBox-loadingIndicator",_.loadingIndicator),hidden:!r},oe.createElement(b,{classNames:_}))))}function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}var g_e=["searchable","searchablePlaceholder","attribute","operator","limit","showMore","showMoreLimit","sortBy","escapeFacetValues","transformItems","translations"];function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TN.apply(this,arguments)}function ZA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZA(Object(n),!0).forEach(function(r){y_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y_e(t,e,n){return e=x_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x_e(t){var e=w_e(t,"string");return hg(e)==="symbol"?e:String(e)}function w_e(t,e){if(hg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b_e(t,e){return S_e(t)||N_e(t,e)||j_e(t,e)||__e()}function __e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j_e(t,e){if(t){if(typeof t=="string")return QA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QA(t,e)}}function QA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function S_e(t){if(Array.isArray(t))return t}function E_e(t,e){if(t==null)return{};var n=P_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function P_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YA(t){var e=t.searchable,n=t.searchablePlaceholder,r=t.attribute,s=t.operator,a=t.limit,o=t.showMore,l=t.showMoreLimit,u=t.sortBy,d=t.escapeFacetValues,h=t.transformItems,m=t.translations,p=E_e(t,g_e),v=cwe({attribute:r,operator:s,limit:a,showMore:o,showMoreLimit:l,sortBy:u,escapeFacetValues:d,transformItems:h},{$$widgetType:"ais.refinementList"}),N=v.canRefine,b=v.canToggleShowMore,j=v.isFromSearch,_=v.isShowingMore,x=v.items,S=v.refine,C=v.searchForItems,R=v.toggleShowMore,V=w.useState(""),k=b_e(V,2),I=k[0],$=k[1],T=w.useRef(null);function M(z){$(z),C(z)}function D(z){S(z.value),M("")}function O(z){M(z.currentTarget.value)}function B(){M("")}function Y(){x.length>0&&(S(x[0].value),M(""))}var ee=v_e({resetButtonTitle:"Clear the search query",submitButtonTitle:"Submit the search query",noResultsText:"No results.",showMoreButtonText:function(H){return H.isShowingMore?"Show less":"Show more"}},m),Z={items:x,canRefine:N,onRefine:D,query:I,searchBox:e&&oe.createElement(q9,{inputRef:T,placeholder:n,isSearchStalled:!1,value:I,onChange:O,onReset:B,onSubmit:Y,translations:{submitButtonTitle:ee.submitButtonTitle,resetButtonTitle:ee.resetButtonTitle}}),noResults:e&&j&&x.length===0&&ee.noResultsText,canToggleShowMore:b,onToggleShowMore:R,isShowingMore:_,translations:{showMoreButtonText:ee.showMoreButtonText}};return oe.createElement(a_e,TN({},p,Z,{showMore:o}))}function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}var C_e=["queryHook","searchAsYouType","translations"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(this,arguments)}function JA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function T_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JA(Object(n),!0).forEach(function(r){R_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R_e(t,e,n){return e=k_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k_e(t){var e=I_e(t,"string");return fg(e)==="symbol"?e:String(e)}function I_e(t,e){if(fg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A_e(t,e){return L_e(t)||D_e(t,e)||M_e(t,e)||O_e()}function O_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M_e(t,e){if(t){if(typeof t=="string")return XA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XA(t,e)}}function XA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function L_e(t){if(Array.isArray(t))return t}function F_e(t,e){if(t==null)return{};var n=$_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function V_e(t){var e=t.queryHook,n=t.searchAsYouType,r=n===void 0?!0:n,s=t.translations,a=F_e(t,C_e),o=gwe({queryHook:e},{$$widgetType:"ais.searchBox"}),l=o.query,u=o.refine,d=o.isSearchStalled,h=w.useState(l),m=A_e(h,2),p=m[0],v=m[1],N=w.useRef(null);function b(C){v(C),r&&u(C)}function j(){b(""),r||u("")}function _(C){b(C.currentTarget.value)}function x(C){r||u(p),a.onSubmit&&a.onSubmit(C)}l!==p&&document.activeElement!==N.current&&v(l);var S={inputRef:N,isSearchStalled:d,onChange:_,onReset:j,onSubmit:x,value:p,translations:T_e({submitButtonTitle:"Submit the search query",resetButtonTitle:"Clear the search query"},s)};return oe.createElement(q9,RN({},a,S))}var z_e=["items","value","onChange","classNames"];function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(this,arguments)}function U_e(t,e){if(t==null)return{};var n=B_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function W_e(t){var e=t.items,n=t.value,r=t.onChange,s=r===void 0?function(){}:r,a=t.classNames,o=a===void 0?{}:a,l=U_e(t,z_e);return oe.createElement("div",kN({},l,{className:Be("ais-SortBy",o.root,l.className)}),oe.createElement("select",{className:Be("ais-SortBy-select",o.select),onChange:function(d){return s(d.target.value)},value:n},e.map(function(u){return oe.createElement("option",{className:Be("ais-SortBy-option",o.option),key:u.value,value:u.value},u.label)})))}var H_e=["items","transformItems"];function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(this,arguments)}function q_e(t,e){if(t==null)return{};var n=G_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function G_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function K_e(t){var e=t.items,n=t.transformItems,r=q_e(t,H_e),s=bwe({items:e,transformItems:n},{$$widgetType:"ais.sortBy"}),a=s.currentRefinement,o=s.options,l=s.refine,u={items:o,value:a,onChange:l};return oe.createElement(W_e,IN({},r,u))}var Z_e=["classNames","nbHits","processingTimeMS","nbSortedHits","areHitsSorted","translations"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AN.apply(this,arguments)}function Q_e(t,e){if(t==null)return{};var n=Y_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function J_e(t){var e=t.classNames,n=e===void 0?{}:e,r=t.nbHits,s=t.processingTimeMS,a=t.nbSortedHits,o=t.areHitsSorted,l=t.translations,u=Q_e(t,Z_e),d={nbHits:r,processingTimeMS:s,nbSortedHits:a,areHitsSorted:o};return oe.createElement("div",AN({},u,{className:Be("ais-Stats",n.root,u.className)}),oe.createElement("span",{className:"ais-Stats-text"},l.rootElementText(d)))}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var X_e=["translations"];function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ON.apply(this,arguments)}function eO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(n),!0).forEach(function(r){t1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t1e(t,e,n){return e=n1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n1e(t){var e=r1e(t,"string");return mg(e)==="symbol"?e:String(e)}function r1e(t,e){if(mg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s1e(t,e){if(t==null)return{};var n=i1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function i1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function a1e(t){var e=t.translations,n=s1e(t,X_e),r=Pwe(void 0,{$$widgetType:"ais.stats"}),s=r.nbHits,a=r.nbSortedHits,o=r.processingTimeMS,l=r.areHitsSorted,u=function(m){return m.areHitsSorted?"".concat(m.nbSortedHits.toLocaleString()," relevant results sorted out of ").concat(m.nbHits.toLocaleString()," found in ").concat(m.processingTimeMS.toLocaleString(),"ms"):"".concat(m.nbHits.toLocaleString()," results found in ").concat(m.processingTimeMS.toLocaleString(),"ms")},d={nbHits:s,nbSortedHits:a,processingTimeMS:o,areHitsSorted:l,translations:e1e({rootElementText:(e==null?void 0:e.stats)||u},e)};return oe.createElement(J_e,ON({},n,d))}var o1e=["classNames","checked","onChange","label"];function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MN.apply(this,arguments)}function l1e(t,e){if(t==null)return{};var n=c1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function u1e(t){var e=t.classNames,n=e===void 0?{}:e,r=t.checked,s=t.onChange,a=t.label,o=l1e(t,o1e);return oe.createElement("div",MN({},o,{className:Be("ais-ToggleRefinement",n.root,o.className)}),oe.createElement("label",{className:Be("ais-ToggleRefinement-label",n.label)},oe.createElement("input",{className:Be("ais-ToggleRefinement-checkbox",n.checkbox),type:"checkbox",checked:r,onChange:function(u){s(u.target.checked)}}),oe.createElement("span",{className:Be("ais-ToggleRefinement-labelText",n.labelText)},a)))}var d1e=["attribute","on","off"];function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DN.apply(this,arguments)}function h1e(t,e){if(t==null)return{};var n=f1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function f1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function m1e(t){var e=t.attribute,n=t.on,r=t.off,s=h1e(t,d1e),a=Lwe({attribute:e,on:n,off:r},{$$widgetType:"ais.toggleRefinement"}),o=a.refine,l=a.value,u={checked:l.isRefined,onChange:function(h){return o({isRefined:!h})}};return oe.createElement(u1e,DN({label:l.name},s,u))}var G9={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(t,e){(function(n,r){t.exports=r()})(rO,function(){function n(J,te,ne){return te in J?Object.defineProperty(J,te,{value:ne,enumerable:!0,configurable:!0,writable:!0}):J[te]=ne,J}function r(J,te){var ne=Object.keys(J);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(J);te&&(K=K.filter(function(ie){return Object.getOwnPropertyDescriptor(J,ie).enumerable})),ne.push.apply(ne,K)}return ne}function s(J){for(var te=1;te<arguments.length;te++){var ne=arguments[te]!=null?arguments[te]:{};te%2?r(Object(ne),!0).forEach(function(K){n(J,K,ne[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(ne)):r(Object(ne)).forEach(function(K){Object.defineProperty(J,K,Object.getOwnPropertyDescriptor(ne,K))})}return J}function a(J,te){if(J==null)return{};var ne,K,ie=function(_e,xe){if(_e==null)return{};var se,we,Ne={},He=Object.keys(_e);for(we=0;we<He.length;we++)se=He[we],xe.indexOf(se)>=0||(Ne[se]=_e[se]);return Ne}(J,te);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(J);for(K=0;K<he.length;K++)ne=he[K],te.indexOf(ne)>=0||Object.prototype.propertyIsEnumerable.call(J,ne)&&(ie[ne]=J[ne])}return ie}function o(J,te){return function(ne){if(Array.isArray(ne))return ne}(J)||function(ne,K){if(Symbol.iterator in Object(ne)||Object.prototype.toString.call(ne)==="[object Arguments]"){var ie=[],he=!0,_e=!1,xe=void 0;try{for(var se,we=ne[Symbol.iterator]();!(he=(se=we.next()).done)&&(ie.push(se.value),!K||ie.length!==K);he=!0);}catch(Ne){_e=!0,xe=Ne}finally{try{he||we.return==null||we.return()}finally{if(_e)throw xe}}return ie}}(J,te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(J){return function(te){if(Array.isArray(te)){for(var ne=0,K=new Array(te.length);ne<te.length;ne++)K[ne]=te[ne];return K}}(J)||function(te){if(Symbol.iterator in Object(te)||Object.prototype.toString.call(te)==="[object Arguments]")return Array.from(te)}(J)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(J){var te,ne="algoliasearch-client-js-".concat(J.key),K=function(){return te===void 0&&(te=J.localStorage||window.localStorage),te},ie=function(){return JSON.parse(K().getItem(ne)||"{}")},he=function(xe){K().setItem(ne,JSON.stringify(xe))},_e=function(){var xe=J.timeToLive?1e3*J.timeToLive:null,se=ie(),we=Object.fromEntries(Object.entries(se).filter(function(He){return o(He,2)[1].timestamp!==void 0}));if(he(we),xe){var Ne=Object.fromEntries(Object.entries(we).filter(function(He){var G=o(He,2)[1],ae=new Date().getTime();return!(G.timestamp+xe<ae)}));he(Ne)}};return{get:function(xe,se){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){_e();var Ne=JSON.stringify(xe);return ie()[Ne]}).then(function(Ne){return Promise.all([Ne?Ne.value:se(),Ne!==void 0])}).then(function(Ne){var He=o(Ne,2),G=He[0],ae=He[1];return Promise.all([G,ae||we.miss(G)])}).then(function(Ne){return o(Ne,1)[0]})},set:function(xe,se){return Promise.resolve().then(function(){var we=ie();return we[JSON.stringify(xe)]={timestamp:new Date().getTime(),value:se},K().setItem(ne,JSON.stringify(we)),se})},delete:function(xe){return Promise.resolve().then(function(){var se=ie();delete se[JSON.stringify(xe)],K().setItem(ne,JSON.stringify(se))})},clear:function(){return Promise.resolve().then(function(){K().removeItem(ne)})}}}function d(J){var te=l(J.caches),ne=te.shift();return ne===void 0?{get:function(K,ie){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},_e=ie();return _e.then(function(xe){return Promise.all([xe,he.miss(xe)])}).then(function(xe){return o(xe,1)[0]})},set:function(K,ie){return Promise.resolve(ie)},delete:function(K){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(K,ie){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return ne.get(K,ie,he).catch(function(){return d({caches:te}).get(K,ie,he)})},set:function(K,ie){return ne.set(K,ie).catch(function(){return d({caches:te}).set(K,ie)})},delete:function(K){return ne.delete(K).catch(function(){return d({caches:te}).delete(K)})},clear:function(){return ne.clear().catch(function(){return d({caches:te}).clear()})}}}function h(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},te={};return{get:function(ne,K){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},he=JSON.stringify(ne);if(he in te)return Promise.resolve(J.serializable?JSON.parse(te[he]):te[he]);var _e=K(),xe=ie&&ie.miss||function(){return Promise.resolve()};return _e.then(function(se){return xe(se)}).then(function(){return _e})},set:function(ne,K){return te[JSON.stringify(ne)]=J.serializable?JSON.stringify(K):K,Promise.resolve(K)},delete:function(ne){return delete te[JSON.stringify(ne)],Promise.resolve()},clear:function(){return te={},Promise.resolve()}}}function m(J){for(var te=J.length-1;te>0;te--){var ne=Math.floor(Math.random()*(te+1)),K=J[te];J[te]=J[ne],J[ne]=K}return J}function p(J,te){return te&&Object.keys(te).forEach(function(ne){J[ne]=te[ne](J)}),J}function v(J){for(var te=arguments.length,ne=new Array(te>1?te-1:0),K=1;K<te;K++)ne[K-1]=arguments[K];var ie=0;return J.replace(/%s/g,function(){return encodeURIComponent(ne[ie++])})}var N={WithinQueryParameters:0,WithinHeaders:1};function b(J,te){var ne=J||{},K=ne.data||{};return Object.keys(ne).forEach(function(ie){["timeout","headers","queryParameters","data","cacheable"].indexOf(ie)===-1&&(K[ie]=ne[ie])}),{data:Object.entries(K).length>0?K:void 0,timeout:ne.timeout||te,headers:ne.headers||{},queryParameters:ne.queryParameters||{},cacheable:ne.cacheable}}var j={Read:1,Write:2,Any:3},_=1,x=2,S=3;function C(J){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return s(s({},J),{},{status:te,lastUpdate:Date.now()})}function R(J){return typeof J=="string"?{protocol:"https",url:J,accept:j.Any}:{protocol:J.protocol||"https",url:J.url,accept:J.accept||j.Any}}var V="GET",k="POST";function I(J,te){return Promise.all(te.map(function(ne){return J.get(ne,function(){return Promise.resolve(C(ne))})})).then(function(ne){var K=ne.filter(function(_e){return function(xe){return xe.status===_||Date.now()-xe.lastUpdate>12e4}(_e)}),ie=ne.filter(function(_e){return function(xe){return xe.status===S&&Date.now()-xe.lastUpdate<=12e4}(_e)}),he=[].concat(l(K),l(ie));return{getTimeout:function(_e,xe){return(ie.length===0&&_e===0?1:ie.length+3+_e)*xe},statelessHosts:he.length>0?he.map(function(_e){return R(_e)}):te}})}function $(J,te,ne,K){var ie=[],he=function(G,ae){if(!(G.method===V||G.data===void 0&&ae.data===void 0)){var de=Array.isArray(G.data)?G.data:s(s({},G.data),ae.data);return JSON.stringify(de)}}(ne,K),_e=function(G,ae){var de=s(s({},G.headers),ae.headers),Re={};return Object.keys(de).forEach(function(ke){var Ce=de[ke];Re[ke.toLowerCase()]=Ce}),Re}(J,K),xe=ne.method,se=ne.method!==V?{}:s(s({},ne.data),K.data),we=s(s(s({"x-algolia-agent":J.userAgent.value},J.queryParameters),se),K.queryParameters),Ne=0,He=function G(ae,de){var Re=ae.pop();if(Re===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:O(ie)};var ke={data:he,headers:_e,method:xe,url:M(Re,ne.path,we),connectTimeout:de(Ne,J.timeouts.connect),responseTimeout:de(Ne,K.timeout)},Ce=function(We){var tt={request:ke,response:We,host:Re,triesLeft:ae.length};return ie.push(tt),tt},De={onSuccess:function(We){return function(tt){try{return JSON.parse(tt.content)}catch(Ht){throw function(Ln,Tn){return{name:"DeserializationError",message:Ln,response:Tn}}(Ht.message,tt)}}(We)},onRetry:function(We){var tt=Ce(We);return We.isTimedOut&&Ne++,Promise.all([J.logger.info("Retryable failure",B(tt)),J.hostsCache.set(Re,C(Re,We.isTimedOut?S:x))]).then(function(){return G(ae,de)})},onFail:function(We){throw Ce(We),function(tt,Ht){var Ln=tt.content,Tn=tt.status,Je=Ln;try{Je=JSON.parse(Ln).message}catch{}return function(dr,ys,ia){return{name:"ApiError",message:dr,status:ys,transporterStackTrace:ia}}(Je,Tn,Ht)}(We,O(ie))}};return J.requester.send(ke).then(function(We){return function(tt,Ht){return function(Ln){var Tn=Ln.status;return Ln.isTimedOut||function(Je){var dr=Je.isTimedOut,ys=Je.status;return!dr&&~~ys==0}(Ln)||~~(Tn/100)!=2&&~~(Tn/100)!=4}(tt)?Ht.onRetry(tt):~~(tt.status/100)==2?Ht.onSuccess(tt):Ht.onFail(tt)}(We,De)})};return I(J.hostsCache,te).then(function(G){return He(l(G.statelessHosts).reverse(),G.getTimeout)})}function T(J){var te={value:"Algolia for JavaScript (".concat(J,")"),add:function(ne){var K="; ".concat(ne.segment).concat(ne.version!==void 0?" (".concat(ne.version,")"):"");return te.value.indexOf(K)===-1&&(te.value="".concat(te.value).concat(K)),te}};return te}function M(J,te,ne){var K=D(ne),ie="".concat(J.protocol,"://").concat(J.url,"/").concat(te.charAt(0)==="/"?te.substr(1):te);return K.length&&(ie+="?".concat(K)),ie}function D(J){return Object.keys(J).map(function(te){return v("%s=%s",te,(ne=J[te],Object.prototype.toString.call(ne)==="[object Object]"||Object.prototype.toString.call(ne)==="[object Array]"?JSON.stringify(J[te]):J[te]));var ne}).join("&")}function O(J){return J.map(function(te){return B(te)})}function B(J){var te=J.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return s(s({},J),{},{request:s(s({},J.request),{},{headers:s(s({},J.request.headers),te)})})}var Y=function(J){var te=J.appId,ne=function(ie,he,_e){var xe={"x-algolia-api-key":_e,"x-algolia-application-id":he};return{headers:function(){return ie===N.WithinHeaders?xe:{}},queryParameters:function(){return ie===N.WithinQueryParameters?xe:{}}}}(J.authMode!==void 0?J.authMode:N.WithinHeaders,te,J.apiKey),K=function(ie){var he=ie.hostsCache,_e=ie.logger,xe=ie.requester,se=ie.requestsCache,we=ie.responsesCache,Ne=ie.timeouts,He=ie.userAgent,G=ie.hosts,ae=ie.queryParameters,de={hostsCache:he,logger:_e,requester:xe,requestsCache:se,responsesCache:we,timeouts:Ne,userAgent:He,headers:ie.headers,queryParameters:ae,hosts:G.map(function(Re){return R(Re)}),read:function(Re,ke){var Ce=b(ke,de.timeouts.read),De=function(){return $(de,de.hosts.filter(function(tt){return(tt.accept&j.Read)!=0}),Re,Ce)};if((Ce.cacheable!==void 0?Ce.cacheable:Re.cacheable)!==!0)return De();var We={request:Re,mappedRequestOptions:Ce,transporter:{queryParameters:de.queryParameters,headers:de.headers}};return de.responsesCache.get(We,function(){return de.requestsCache.get(We,function(){return de.requestsCache.set(We,De()).then(function(tt){return Promise.all([de.requestsCache.delete(We),tt])},function(tt){return Promise.all([de.requestsCache.delete(We),Promise.reject(tt)])}).then(function(tt){var Ht=o(tt,2);return Ht[0],Ht[1]})})},{miss:function(tt){return de.responsesCache.set(We,tt)}})},write:function(Re,ke){return $(de,de.hosts.filter(function(Ce){return(Ce.accept&j.Write)!=0}),Re,b(ke,de.timeouts.write))}};return de}(s(s({hosts:[{url:"".concat(te,"-dsn.algolia.net"),accept:j.Read},{url:"".concat(te,".algolia.net"),accept:j.Write}].concat(m([{url:"".concat(te,"-1.algolianet.com")},{url:"".concat(te,"-2.algolianet.com")},{url:"".concat(te,"-3.algolianet.com")}]))},J),{},{headers:s(s(s({},ne.headers()),{"content-type":"application/x-www-form-urlencoded"}),J.headers),queryParameters:s(s({},ne.queryParameters()),J.queryParameters)}));return p({transporter:K,appId:te,addAlgoliaAgent:function(ie,he){K.userAgent.add({segment:ie,version:he})},clearCache:function(){return Promise.all([K.requestsCache.clear(),K.responsesCache.clear()]).then(function(){})}},J.methods)},ee=function(J){return function(te,ne){return te.method===V?J.transporter.read(te,ne):J.transporter.write(te,ne)}},Z=function(J){return function(te){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K={transporter:J.transporter,appId:J.appId,indexName:te};return p(K,ne.methods)}},z=function(J){return function(te,ne){var K=te.map(function(ie){return s(s({},ie),{},{params:D(ie.params||{})})});return J.transporter.read({method:k,path:"1/indexes/*/queries",data:{requests:K},cacheable:!0},ne)}},H=function(J){return function(te,ne){return Promise.all(te.map(function(K){var ie=K.params,he=ie.facetName,_e=ie.facetQuery,xe=a(ie,["facetName","facetQuery"]);return Z(J)(K.indexName,{methods:{searchForFacetValues:me}}).searchForFacetValues(he,_e,s(s({},ne),xe))}))}},q=function(J){return function(te,ne,K){return J.transporter.read({method:k,path:v("1/answers/%s/prediction",J.indexName),data:{query:te,queryLanguages:ne},cacheable:!0},K)}},X=function(J){return function(te,ne){return J.transporter.read({method:k,path:v("1/indexes/%s/query",J.indexName),data:{query:te},cacheable:!0},ne)}},me=function(J){return function(te,ne,K){return J.transporter.read({method:k,path:v("1/indexes/%s/facets/%s/query",J.indexName,te),data:{facetQuery:ne},cacheable:!0},K)}},Ee=1,Fe=2,Me=3,ue=function(J){return function(te,ne){var K=te.map(function(ie){return s(s({},ie),{},{threshold:ie.threshold||0})});return J.transporter.read({method:k,path:"1/indexes/*/recommendations",data:{requests:K},cacheable:!0},ne)}};function ye(J,te,ne){var K,ie={appId:J,apiKey:te,timeouts:{connect:1,read:2,write:30},requester:{send:function(he){return new Promise(function(_e){var xe=new XMLHttpRequest;xe.open(he.method,he.url,!0),Object.keys(he.headers).forEach(function(He){return xe.setRequestHeader(He,he.headers[He])});var se,we=function(He,G){return setTimeout(function(){xe.abort(),_e({status:0,content:G,isTimedOut:!0})},1e3*He)},Ne=we(he.connectTimeout,"Connection timeout");xe.onreadystatechange=function(){xe.readyState>xe.OPENED&&se===void 0&&(clearTimeout(Ne),se=we(he.responseTimeout,"Socket timeout"))},xe.onerror=function(){xe.status===0&&(clearTimeout(Ne),clearTimeout(se),_e({content:xe.responseText||"Network request failed",status:xe.status,isTimedOut:!1}))},xe.onload=function(){clearTimeout(Ne),clearTimeout(se),_e({content:xe.responseText,status:xe.status,isTimedOut:!1})},xe.send(he.data)})}},logger:(K=Me,{debug:function(he,_e){return Ee>=K&&console.debug(he,_e),Promise.resolve()},info:function(he,_e){return Fe>=K&&console.info(he,_e),Promise.resolve()},error:function(he,_e){return console.error(he,_e),Promise.resolve()}}),responsesCache:h(),requestsCache:h({serializable:!1}),hostsCache:d({caches:[u({key:"".concat("4.25.2","-").concat(J)}),h()]}),userAgent:T("4.25.2").add({segment:"Browser",version:"lite"}),authMode:N.WithinQueryParameters};return Y(s(s(s({},ie),ne),{},{methods:{search:z,searchForFacetValues:H,multipleQueries:z,multipleSearchForFacetValues:H,customRequest:ee,initIndex:function(he){return function(_e){return Z(he)(_e,{methods:{search:X,searchForFacetValues:me,findAnswers:q}})}},getRecommendations:ue}}))}return ye.version="4.25.2",ye})})(G9);var p1e=G9.exports;const K9=zo(p1e);function g1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function v1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function y1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function x1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function w1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Z9(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function P2(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Q9(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Y9(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function b1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function _1e(t){return wr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const j1e=K9(g2,L8);function N1e({hit:t}){const e=t.title||t.titre||"Logement étudiant",n=t.city||t.ville||"",r=t.quartier||"",s=t.imageUrl||t.image||"",a=t.description||"",o=t.platform||t.sourceNormalized||"",l=t.rating||t.notation,u=t.reviewCount||0,d=t.price||t.prix,h=t.surface,m=t.logementTypes||t.types||[],p=t.hasAvailability||t.aDisponibilité||!1;return i.jsxs("article",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300",children:[s&&i.jsx("div",{className:"w-full h-48 overflow-hidden",children:i.jsx("img",{src:s,alt:e,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",onError:v=>{const N=v.target;N.style.display="none";const b=N.parentElement;b&&(b.innerHTML=`
                  <div class="w-full h-full bg-gray-100 flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M3 18v-6a9 9 0 0118 0v6h-3v-6a6 6 0 00-12 0v6H3z"/>
                      <path d="M21 19a2 2 0 01-2 2H5a2 2 0 01-2-2v-3a2 2 0 012-2h14a2 2 0 012 2v3z"/>
                    </svg>
                  </div>
                `)}})}),!s&&i.jsx("div",{className:"w-full h-48 bg-gray-100 flex items-center justify-center",children:i.jsx(P2,{className:"w-12 h-12 text-gray-400"})}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-900 line-clamp-2 leading-tight mb-2",children:e}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(Q9,{className:"w-4 h-4 mr-1 flex-shrink-0"}),i.jsxs("span",{className:"truncate",children:[n,r&&` • ${r}`]})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-1 rounded-full whitespace-nowrap",children:o==="lokaviz"?"Lokaviz":o==="adele"?"Adele":o==="location-etudiant"?"Location Étudiant":o}),p&&i.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-1 rounded-full",children:"Disponible"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[d&&i.jsxs("div",{className:"flex items-center text-lg font-bold text-blue-600",children:[i.jsx("span",{className:"mr-1",children:"€"}),i.jsx("span",{children:d.toLocaleString("fr-FR")}),i.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}),h&&i.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-600",children:[i.jsx(Y9,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{children:[h," m²"]})]})]}),a&&i.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:a}),i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center text-yellow-500 text-sm",children:[i.jsx(b1e,{className:"w-4 h-4 mr-1 fill-current"}),i.jsx("span",{className:"font-medium",children:l?`${l}/5`:"N/A"}),u>0&&i.jsxs("span",{className:"text-gray-400 ml-1 text-xs",children:["(",u,")"]})]}),m.length>0&&i.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2.5 py-1 rounded-full font-medium",children:m[0]})]})}),i.jsx("div",{className:"border-t border-gray-100 pt-4",children:i.jsxs("a",{href:t.url||t.detailUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2.5 px-4 rounded-lg transition-colors text-sm",children:["Voir l'annonce",i.jsx(w1e,{className:"w-4 h-4 ml-2"})]})})]})]})}function S1e({isMobileOpen:t,toggleMobileFilters:e}){const[n,r]=w.useState(!1);return i.jsxs(i.Fragment,{children:[t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:e}),i.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 bg-white transform transition-transform duration-300 ease-in-out w-80
          ${t?"translate-x-0":"-translate-x-full"} 
          lg:relative lg:transform-none lg:w-72 overflow-y-auto shadow-lg lg:shadow-none`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 lg:hidden bg-white sticky top-0 z-10",children:[i.jsx("h2",{className:"font-bold text-lg",children:"Filtres"}),i.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fermer les filtres",children:i.jsx(_1e,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-4 space-y-6 pb-20 lg:pb-4",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(Z9,{className:"w-4 h-4 mr-2"}),"Recherche"]}),i.jsx(V_e,{placeholder:"Ville, quartier, adresse...",classNames:{root:"relative",form:"relative",input:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm placeholder-gray-500",submit:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",reset:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(g1e,{className:"w-4 h-4 mr-2"}),"Disponibilité"]}),i.jsx(m1e,{attribute:"hasAvailability",classNames:{root:"flex items-center",label:"flex items-center cursor-pointer text-sm text-gray-700",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3"},label:"Seulement les disponibles"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(Q9,{className:"w-4 h-4 mr-2"}),"Ville"]}),i.jsx(YA,{attribute:"city",searchable:!0,showMore:!0,limit:5,showMoreLimit:20,classNames:{root:"space-y-3",searchBox:"mb-3",searchBoxInput:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",list:"space-y-1 max-h-48 overflow-y-auto",item:"flex items-center justify-between",label:"flex items-center cursor-pointer text-sm w-full hover:bg-gray-50 p-2 rounded transition-colors",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3 flex-shrink-0",labelText:"flex-1 text-gray-700 min-w-0 truncate",count:"text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-0.5 font-medium ml-2 flex-shrink-0",showMore:"text-blue-600 text-sm hover:text-blue-800 mt-2 cursor-pointer"}})]}),i.jsxs("button",{onClick:()=>r(!n),className:"flex items-center text-blue-600 hover:text-blue-800 w-full justify-between py-3 px-4 bg-gray-50 rounded-lg transition-colors",children:[i.jsx("span",{className:"font-medium",children:n?"Moins de filtres":"Plus de filtres"}),n?i.jsx(y1e,{className:"w-4 h-4"}):i.jsx(v1e,{className:"w-4 h-4"})]}),n&&i.jsxs("div",{className:"space-y-6 border-t border-gray-200 pt-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(x1e,{className:"w-4 h-4 mr-2"}),"Prix (€/mois)"]}),i.jsx(KA,{attribute:"price",classNames:{root:"space-y-3",form:"flex gap-3 items-center",input:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",separator:"text-gray-500 font-medium",submit:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(Y9,{className:"w-4 h-4 mr-2"}),"Surface (m²)"]}),i.jsx(KA,{attribute:"surface",classNames:{root:"space-y-3",form:"flex gap-3 items-center",input:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",separator:"text-gray-500 font-medium",submit:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(P2,{className:"w-4 h-4 mr-2"}),"Type de logement"]}),i.jsx(YA,{attribute:"logementTypes",limit:6,classNames:{root:"space-y-1",list:"space-y-1",item:"flex items-center justify-between",label:"flex items-center cursor-pointer text-sm w-full hover:bg-gray-50 p-2 rounded transition-colors",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3 flex-shrink-0",labelText:"flex-1 text-gray-700 min-w-0 truncate",count:"text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-0.5 font-medium ml-2 flex-shrink-0"}})]})]}),i.jsx("div",{className:"sticky bottom-0 bg-white pt-4 border-t border-gray-200",children:i.jsx(Zwe,{classNames:{button:"w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors text-sm"},translations:{resetButtonText:"Réinitialiser les filtres"}})})]})]})]})}function E1e(){const[t,e]=w.useState(!1);w.useEffect(()=>{const r=()=>{window.innerWidth>=1024&&t&&e(!1)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),w.useEffect(()=>(document.body.style.overflow=t?"hidden":"",()=>{document.body.style.overflow=""}),[t]);const n=()=>e(!t);return i.jsx("div",{className:"min-h-screen bg-gray-50",children:i.jsxs(o0e,{searchClient:j1e,indexName:Dc,children:[i.jsx(Zve,{hitsPerPage:12,analytics:!0,enablePersonalization:!0}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[i.jsxs("header",{className:"mb-6 lg:mb-8",children:[i.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 flex items-center mb-2",children:[i.jsx(P2,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-blue-600 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:"Logements étudiants"})]}),i.jsx("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:"Trouvez votre logement idéal parmi des milliers d'annonces vérifiées"})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[i.jsxs("div",{className:"lg:w-72 flex-shrink-0",children:[i.jsx("div",{className:"lg:hidden mb-4",children:i.jsxs(re,{onClick:n,className:"w-full py-3 text-sm font-medium",variant:"outline",children:[i.jsx(Z9,{className:"w-4 h-4 mr-2"}),"Filtrer les résultats"]})}),i.jsx(S1e,{isMobileOpen:t,toggleMobileFilters:n})]}),i.jsxs("main",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-5 mb-6 shadow-sm",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsx(a1e,{classNames:{text:"text-gray-700 font-medium text-sm sm:text-base"},translations:{rootElementText:({nbHits:r,processingTimeMS:s})=>i.jsxs("span",{children:[i.jsx("span",{className:"font-semibold",children:r.toLocaleString("fr-FR")})," logements trouvés",i.jsxs("span",{className:"hidden sm:inline text-gray-500",children:[" en ",s,"ms"]})]})}}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:"Trier par :"}),i.jsx(K_e,{items:[{value:Dc,label:"Pertinence"},{value:`${Dc}_price_asc`,label:"Prix croissant"},{value:`${Dc}_price_desc`,label:"Prix décroissant"},{value:`${Dc}_quality_desc`,label:"Qualité"},{value:`${Dc}_date_desc`,label:"Plus récents"}],classNames:{root:"flex items-center",select:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"}})]})]}),i.jsx(rbe,{classNames:{root:"flex flex-wrap gap-2 mt-4",category:"bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full text-sm flex items-center border border-blue-200",label:"mr-2 font-medium truncate",delete:"ml-2 text-blue-600 hover:text-blue-800 cursor-pointer flex-shrink-0"}})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.jsx(Tbe,{hitComponent:N1e,classNames:{root:"col-span-full",list:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",item:"w-full"}})}),i.jsx("div",{className:"flex justify-center mt-8 lg:mt-12",children:i.jsx(zbe,{classNames:{root:"flex items-center space-x-1",list:"flex items-center space-x-1",item:"flex items-center justify-center",pageItem:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors font-medium text-sm",selectedItem:"bg-blue-600 text-white border-blue-600 hover:bg-blue-700",disabledItem:"opacity-50 cursor-not-allowed",link:"w-full h-full flex items-center justify-center"},translations:{previousPageItemText:"‹",nextPageItemText:"›"},showFirst:!1,showLast:!1})})]})]})]})]})})}const Em={appId:g2,apiKey:L8,indices:{jobs:F8,services:Dme,logements:Dc,materiel:Lme}},tO="https://api.deepseek.com/v1/chat/completions",P1e="deepseek-chat",nO=`Tu es l'assistant IA de StudyMarket, une plateforme pour étudiants français.

RÔLE : Aider les étudiants à trouver des logements, jobs, services et matériel scolaire.

STYLE DE RÉPONSE :
- Naturel et conversationnel
- Réponses courtes et directes (2-3 phrases max)
- Éviter les listes à puces excessives
- Maximum 2-3 emojis par réponse
- Ton amical mais professionnel

SERVICES STUDYMARKET :
- Logements étudiants (studios, colocations, résidences)
- Jobs et stages compatibles avec les études
- Services entre étudiants (cours particuliers, aide)
- Matériel scolaire d'occasion (livres, ordinateurs, mobilier)

CONSEILS À DONNER :
- Budget logement Paris : 600-800€/mois, Lyon : 400-600€/mois
- Jobs étudiants : 15-20h/semaine max, cours particuliers 15-25€/h
- Vérifier toujours les annonces avant achat/location
- Utiliser la messagerie sécurisée de la plateforme

DONNÉES DISPONIBLES :
- Logements : adresse, prix, surface, services, garanties, date de disponibilité, source
- Jobs : position, company, location, salary_min/max, description, date
- Services/Matériel : titre, prix, description, localisation

Réponds de manière utile et concise. Si tu ne peux pas rechercher dans la base de données, donne des conseils pratiques basés sur ton expertise du marché étudiant français.`,C1e={logement:{keywords:["logement","coloc","appartement","studio","chambre","louer","location","bail","appart","t1","t2","t3","meublé","résidence","foyer","hébergement","habitat","loyer","caution"],index:Em.indices.logements,label:"Logement",searchableAttributes:["adresse","date de disponibilité","garanties","lien","prix","services","source","taper","types","surface","services suplémentaire"]},job:{keywords:["job","emploi","stage","travail","alternance","cdi","cdd","interim","mission","poste","recrutement","embauche","candidature","offre","salaire","rémunération"],index:Em.indices.jobs,label:"Job",searchableAttributes:["slug","company","date","epoch","position","salary_max","salary_min","url","location"]},service:{keywords:["service","cours","soutien","aide","particulier","tutorat","formation","coaching","assistance","prestation","accompagnement","conseil"],index:Em.indices.services,label:"Service",searchableAttributes:["title","description","category"]},materiel:{keywords:["matériel","livre","ordinateur","équipement","fourniture","manuel","pc","laptop","tablette","calculatrice","bureau","chaise","lampe","sac","accessoire"],index:Em.indices.materiel,label:"Matériel",searchableAttributes:["title","description","category"]}},T1e={Logement:["Pense à élargir ta recherche aux villes voisines pour plus d'options.","La colocation est souvent plus économique et conviviale !","N'hésite pas à demander des photos récentes et à visiter avant de t'engager.","Vérifie si tu es éligible aux aides au logement (CAF, APL, etc.).","Sois vigilant face aux offres trop alléchantes : privilégie les contacts via StudyMarket."],Job:["Prépare un CV à jour et une lettre de motivation personnalisée.","Certains jobs étudiants sont compatibles avec ton emploi du temps universitaire.","N'hésite pas à postuler à plusieurs offres pour maximiser tes chances.","Utilise la messagerie StudyMarket pour échanger en toute sécurité avec les employeurs."],Service:["Précise bien tes besoins ou compétences pour trouver le bon service ou client.","Privilégie les échanges via la messagerie sécurisée StudyMarket.","Demande des recommandations ou avis si possible.","Sois clair sur les tarifs et modalités avant de t'engager."],Matériel:["Vérifie l'état du matériel avant d'acheter ou de vendre.","Privilégie la remise en main propre pour plus de sécurité.","N'hésite pas à négocier le prix si besoin.","Ajoute plusieurs photos pour rassurer les acheteurs."]};function R1e(t){return t.length?t.length===1?t[0]:t.length===2?t[0]+" "+t[1]:t.slice(0,-1).join(" ")+" Enfin, "+t[t.length-1]:""}function k1e(t,e){const n=T1e[e]||[];return n.length?t+"<br /><br /><em>Conseil StudyMarket :</em> "+R1e(n):t}const I1e=[{name:"Accueil",path:"/"},{name:"Logements",path:"/housing"},{name:"Jobs",path:"/jobs"},{name:"Services",path:"/listings?category=services"},{name:"Matériel",path:"/listings?category=material"},{name:"Favoris",path:"/favorites"},{name:"Profil",path:"/profile"},{name:"Messages",path:"/messages"},{name:"Paiements",path:"/payments"},{name:"Paramètres",path:"/settings"},{name:"Aide",path:"/help"}];function A1e(t){const e=t.toLowerCase();return e.includes("accueil")||e.includes("home")||e.includes("plateforme")||e.includes("site")||e.includes("explorer")||e.includes("menu")||e.includes("pages")||e.includes("sections")||e.includes("tout")||e.includes("navigation")}function O1e(){return"<ul>"+I1e.map(t=>`<li>🔗 <a href="${t.path}">${t.name}</a></li>`).join("")+"</ul>"}function M1e(t){return!t||t.trim()===""||t.trim().toLowerCase()==="undefined"||t.trim().toLowerCase()==="null"?"🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?":t}function D1e(t){const e={},n=t.toLowerCase(),r=n.match(/(\d+)\s*(?:€|euros?|e)/);if(r){const u=parseInt(r[1]);n.includes("moins de")||n.includes("max")||n.includes("maximum")?e.priceMax=u:n.includes("plus de")||n.includes("min")||n.includes("minimum")?e.priceMin=u:e.priceTarget=u}const s=n.match(/(\d+)\s*(?:m²|m2|mètres? carrés?)/);s&&(e.surface=parseInt(s[1]));const a=["studio","t1","t2","t3","t4","f1","f2","f3","f4","colocation","chambre"];for(const u of a)if(n.includes(u)){e.type=u;break}const o=n.match(/(?:à|sur|vers|près de?|proche de?)\s+([a-zàâäéèêëïîôùûüÿæœç\s-]+?)(?:\s+(?:moins|plus|max|min|\d+|pour|avec|sans)|$)/i);o&&(e.location=o[1].trim());const l=["parking","balcon","terrasse","meublé","non meublé","ascenseur","gardien","wifi","fibre"];return e.services=l.filter(u=>n.includes(u)),e}function L1e(t,e){const n=[];if(t.priceMax&&n.push(`prix < ${t.priceMax}`),t.priceMin&&n.push(`prix > ${t.priceMin}`),t.priceTarget){const r=t.priceTarget*.2;n.push(`prix >= ${t.priceTarget-r} AND prix <= ${t.priceTarget+r}`)}return t.surface&&n.push(`surface >= ${t.surface}`),t.type&&e.label==="Logement"&&n.push(`types:${t.type}`),n.join(" AND ")}function F1e(t,e){let n=t.toLowerCase();return(e.priceMax||e.priceMin||e.priceTarget)&&(n=n.replace(/\d+\s*(?:€|euros?|e)/g,""),n=n.replace(/(?:moins|plus) de|max(?:imum)?|min(?:imum)?/g,"")),e.surface&&(n=n.replace(/\d+\s*(?:m²|m2|mètres? carrés?)/g,"")),e.location&&(n=n.replace(/(?:à|sur|vers|près de?|proche de?)\s+[a-zàâäéèêëïîôùûüÿæœç\s-]+/gi,"")),["je","cherche","veux","voudrais","recherche","besoin","de","un","une","des","le","la","les","pour","avec","sans"].forEach(s=>{n=n.replace(new RegExp(`\\b${s}\\b`,"g"),"")}),n.trim()||e.location||""}const $1e=()=>{const{userProfile:t,loading:e}=bn(),[n,r]=w.useState(!1),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(""),h=P1e,[m,p]=w.useState(!1),[v,N]=w.useState(0),[b,j]=w.useState(0),[_,x]=w.useState(!1),S=w.useRef(null),C=w.useRef(null);w.useEffect(()=>{const ue=()=>{x(window.innerWidth<768)};return ue(),window.addEventListener("resize",ue),()=>window.removeEventListener("resize",ue)},[]),w.useEffect(()=>{const ue=()=>{window.innerHeight<500&&window.innerWidth<768?p(!0):p(!1)};return window.addEventListener("resize",ue),()=>window.removeEventListener("resize",ue)},[]);const R=ue=>{N(ue.targetTouches[0].clientX)},V=ue=>{j(ue.targetTouches[0].clientX)},k=()=>{if(!v||!b)return;const ue=v-b,ye=ue>50;ue<-50&&_&&r(!1),ye&&_&&a(!0)},I=w.useCallback(()=>{if(e)return"Connexion en cours...";let ue="";if(t&&(t.firstName&&t.lastName?ue=`${t.firstName} ${t.lastName}`:t.firstName?ue=t.firstName:t.displayName?ue=t.displayName:t.email&&(ue=t.email.split("@")[0])),_){let J=`Salut${ue?" "+ue:""} ! 👋`;if(J+=`

Je t'aide à trouver :`,J+=`
• Logements • Jobs • Services • Matériel`,t!=null&&t.location){const te=t.location.toLowerCase();te.includes("paris")?J+=`

💡 Paris : 600-800€/mois, quartiers République, Belleville.`:te.includes("lyon")&&(J+=`

💡 Lyon : 400-600€/mois, quartiers Guillotière, Croix-Rousse.`)}return J+=`

Que cherches-tu ?`,J}let ye=`Salut${ue?" "+ue:""} ! 👋`;if(ye+=`

Je suis ton assistant StudyMarket. Je peux t'aider à trouver :`,ye+=`
• Logements étudiants`,ye+=`
• Jobs et stages`,ye+=`
• Services entre étudiants`,ye+=`
• Matériel scolaire`,t!=null&&t.location){const J=t.location.toLowerCase();J.includes("paris")?ye+=`

💡 Pour Paris : budget logement 600-800€/mois, privilégie République, Belleville, Nation.`:J.includes("lyon")&&(ye+=`

💡 Pour Lyon : budget logement 400-600€/mois, regarde Guillotière, Croix-Rousse.`)}return ye+=`

Que cherches-tu aujourd'hui ?`,ye},[t,e,_]),[$,T]=w.useState({messages:[],loading:!1,error:null,retryCount:0});w.useEffect(()=>{const ue={role:"assistant",content:I(),timestamp:Date.now()};T(ye=>({...ye,messages:[ue]}))},[I]);const M=w.useCallback(()=>{S.current&&S.current.scrollIntoView({behavior:"smooth"})},[]);w.useEffect(()=>{var ue;n&&!s&&(M(),(ue=C.current)==null||ue.focus())},[$.messages,n,s,M]),w.useEffect(()=>{if(!o)return;const ue=ye=>{ye.target.closest(".chatbot-fab-menu")||l(!1)};return document.addEventListener("mousedown",ue),()=>document.removeEventListener("mousedown",ue)},[o]);async function D(ue,ye,J,te){const{appId:ne,apiKey:K}=Em,he=K9(ne,K).initIndex(ue),_e={hitsPerPage:20,attributesToRetrieve:"*",attributesToHighlight:["*"]};return J&&(_e.filters=J),te&&te.length>0&&(_e.restrictSearchableAttributes=te),(await he.search(ye,_e)).hits}function O(ue){const ye=ue.toLowerCase();for(const[J,te]of Object.entries(C1e))if(te.keywords.some(ne=>ye.includes(ne)))return{index:te.index,label:te.label,searchableAttributes:te.searchableAttributes};return null}const B=(ue,ye)=>`Désolé, je ne peux pas rechercher dans la base pour le moment. 😅

Voici mes conseils d'expert pour ${ye} :

**${ue} :** ${ue==="Logement"?"Vérifie les transports, demande plusieurs photos, prépare ton dossier à l'avance.":ue==="Job"?"Adapte ton CV, sois réactif, privilégie la flexibilité horaires.":ue==="Service"?"Précise tes besoins, utilise la messagerie sécurisée, demande des avis.":"Teste avant d'acheter, compare les prix, négocie si défauts mineurs."}

Tu peux naviguer directement sur StudyMarket pour voir toutes les offres ! 🚀`,Y=(ue,ye,J,te)=>{if(ue.length===0){let K=`❌ Aucun ${ye.toLowerCase()} trouvé pour "${J}"<br />`;return te.priceMax&&(K+="💡 Essaie d'augmenter ton budget ou d'élargir ta zone de recherche.<br />"),te.location&&(K+=`💡 Regarde aussi dans les villes voisines de ${te.location}.<br />`),K+="🔍 Essaie avec d'autres mots-clés ou poste une demande sur StudyMarket ! 😊<br />",K=k1e(K,ye),K}let ne=`✅ ${ue.length} ${ye.toLowerCase()}(s) trouvé(s)`;return te.location&&(ne+=` à ${te.location}`),te.priceMax&&(ne+=` pour max ${te.priceMax}€`),ne+=" :<br /><br />",ue.slice(0,10).forEach((K,ie)=>{const he=Je=>Je.types?String(Je.types):Je.position?String(Je.position):Je.titre||Je.title||"Annonce",_e=Je=>{if(Je.prix!==void 0&&Je.prix!==null){const dr=Number(Je.prix);if(!isNaN(dr))return dr+"€/mois"}return Je.salary_min||Je.salary_max?Je.salary_min&&Je.salary_max?`${Je.salary_min}€ - ${Je.salary_max}€`:Je.salary_min?`À partir de ${Je.salary_min}€`:`Jusqu'à ${Je.salary_max}€`:null},xe=Je=>Je.adresse||Je.location||Je.city||null,se=Je=>Je.privilege||Je.lien||Je.url||Je.link||Je.apply_url||null,we=Je=>Je.surface||Je.superficie||null,Ne=Je=>Je.description||null,He=Je=>Je.company||null,G=Je=>Je.services||null,ae=Je=>Je["date de disponibilité"]||Je.date||null,de=Je=>Je.source_normalized||Je.source||null;ne+=`<strong>${ie+1}. ${he(K)}</strong><br />`;const Re=_e(K);Re&&(ne+=`💰 ${Re}<br />`);const ke=xe(K);ke&&(ne+=`📍 ${ke}<br />`);const Ce=He(K);Ce&&(ne+=`🏢 ${Ce}<br />`);const De=we(K);De&&(ne+=`📐 Surface: ${De} m²<br />`);const We=G(K);We&&(ne+=`🏠 Services: ${We}<br />`);const tt=ae(K);if(tt){const Je=new Date(String(tt)).toLocaleDateString("fr-FR");ne+=`📅 ${ye==="Logement"?"Disponible le":"Publié le"} ${Je}<br />`}const Ht=de(K);Ht&&(ne+=`📰 Source: ${Ht}<br />`);const Ln=Ne(K);if(Ln){const Je=String(Ln),dr=Je.length>100?Je.substring(0,100)+"...":Je;ne+=`📝 ${dr}<br />`}const Tn=se(K);Tn&&(ne+=`🔗 <a href="${Tn}" target="_blank">Voir l'annonce</a><br />`),ne+="<br />"}),ue.length>10&&(ne+=`<em>... et ${ue.length-10} autres résultats. Affine ta recherche pour voir les plus pertinents !</em><br />`),ne},ee=()=>t?`${nO}

CONTEXTE UTILISATEUR:
- Nom: ${t.firstName||""} ${t.lastName||""}
- Email: ${t.email}
- Université: ${t.university||""}
- Domaine: ${t.fieldOfStudy||""}
- Localisation: ${t.location||""}`:nO,Z=async()=>{var ye,J,te,ne;if(!u.trim())return;const ue=[...$.messages,{role:"user",content:u,timestamp:Date.now()}];T(K=>({...K,messages:ue,loading:!0,error:null})),d("");try{if(A1e(u)){const ie=`<strong>Voici les principales pages de StudyMarket :</strong><br />${O1e()}`;T(he=>({...he,messages:[...ue,{role:"assistant",content:ie,timestamp:Date.now()}],loading:!1}));return}const K=O(u);if(K)try{const ie=D1e(u),he=L1e(ie,K),_e=F1e(u,ie);console.log("🔍 Recherche Algolia:",{index:K.index,query:_e,filters:he,extractedFilters:ie});const xe=await D(K.index,_e,he,K.searchableAttributes),se=Y(xe,K.label,u,ie);T(we=>({...we,messages:[...ue,{role:"assistant",content:se,timestamp:Date.now()}],loading:!1}))}catch(ie){console.error("Erreur Algolia:",ie);const he=B(K.label,u);T(_e=>({..._e,messages:[...ue,{role:"assistant",content:he,timestamp:Date.now()}],loading:!1}))}else try{console.log("🔍 Vérification des clés API..."),console.log("Modèle sélectionné:",h);const ie="sk-b3cc85cc3b114b559cc870a839c22c88";if(!ie||ie.trim()===""){T(we=>({...we,messages:[...ue,{role:"assistant",content:"Désolé, aucune clé API DeepSeek valide trouvée. Contacte l'équipe technique.",timestamp:Date.now()}],loading:!1,error:"Clé API manquante"}));return}const he={model:h,messages:[{role:"system",content:ee()},...ue.filter(we=>we.role!=="system").map(we=>({role:we.role,content:we.content}))],temperature:.7,max_tokens:800};console.log("🚀 Envoi requête vers:",tO);const _e=await fetch(tO,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify(he)});if(console.log("📡 Statut réponse:",_e.status,_e.statusText),!_e.ok){const we=await _e.text();let Ne="";throw _e.status===401?Ne="Clé API DeepSeek invalide ou expirée.":_e.status===402?Ne="Crédit insuffisant sur ton compte DeepSeek.":_e.status===429?Ne="Limite de requêtes atteinte. Attends quelques minutes.":Ne=`Erreur ${_e.status}: ${we}`,new Error(Ne)}const xe=await _e.json();let se=M1e((te=(J=(ye=xe.choices)==null?void 0:ye[0])==null?void 0:J.message)==null?void 0:te.content);se==="🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?"&&((ne=xe.error)!=null&&ne.message?se=`Erreur API : ${xe.error.message}`:xe.detail&&(se=`Erreur API : ${xe.detail}`)),T(we=>({...we,messages:[...ue,{role:"assistant",content:se,timestamp:Date.now()}],loading:!1}))}catch(ie){T(he=>({...he,messages:[...ue,{role:"assistant",content:`Désolé, problème technique temporaire. 😅

Mes conseils rapides :
• **Logement :** Vérifie les transports, prépare ton dossier
• **Job :** Adapte ton CV, sois réactif  
• **Matériel :** Teste avant d'acheter, compare les prix

Réessaie dans quelques minutes !`,timestamp:Date.now()}],loading:!1,error:`API Error: ${ie.message}`}))}}catch{T(K=>({...K,messages:[...ue,{role:"assistant",content:`Erreur technique détectée. 🔧

Solutions :
• Rafraîchis la page (Ctrl+F5)
• Vérifie ta connexion internet
• Réessaie dans quelques minutes

StudyMarket.fr fonctionne normalement !`,timestamp:Date.now()}],loading:!1,error:"Erreur technique"}))}},z=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),Z())},H=()=>{T(ue=>({...ue,messages:[{role:"assistant",content:I(),timestamp:Date.now()}],loading:!1,error:null,retryCount:0}))},q=()=>{const ue=[...$.messages].reverse().find(ye=>ye.role==="user");ue&&(d(ue.content),setTimeout(()=>Z(),100))},X=()=>{l(!1),window.open("mailto:contact@studymarket.com?subject=Contact%20depuis%20StudyMarket","_blank")},me=()=>{l(!1),r(!0)},Ee=()=>{a(!0)},Fe=()=>{a(!1)},Me=ue=>ue.replace(/###?\s*(\d+)?\.?\s*(.*?)(\n|$)/g,(ye,J,te)=>J?`
${J}⃣ ${te.trim()}
`:`
**${te.trim()}**
`).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        /* === STYLES DESKTOP ORIGINAUX (INCHANGÉS) === */
        @media (min-width: 769px) {
          .chatbot-modal {
            width: 400px !important;
            max-width: 400px !important;
            right: 20px !important;
            bottom: 80px !important;
            height: 600px !important;
            max-height: 80vh !important;
            z-index: 1000 !important;
          }
          .chatbot-modal-minimized {
            width: 320px !important;
            height: 60px !important;
            right: 20px !important;
            bottom: 80px !important;
          }
          .chatbot-fab-btn {
            width: 56px !important;
            height: 56px !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 999 !important;
          }
          .chatbot-fab-menu-items {
            bottom: 85px !important;
            right: 20px !important;
          }
          .chatbot-messages-container {
            max-height: 400px !important;
          }
          .chatbot-input-container {
            padding: 12px !important;
          }
          .chatbot-input {
            padding: 12px 16px !important;
            font-size: 14px !important;
          }
          .chatbot-send-btn {
            min-width: 48px !important;
            height: 48px !important;
          }
          .chatbot-controls {
            padding: 8px 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
          }
          .chatbot-model-select {
            max-width: 140px !important;
            font-size: 11px !important;
          }
          .message-bubble {
            max-width: 90% !important;
          }
        }
        
        /* === OPTIMISATIONS MOBILE UNIQUEMENT === */
        @media (max-width: 768px) {
          /* PLEIN ÉCRAN MOBILE MAIS DESCENDRE */
          .chatbot-modal {
            position: fixed !important;
            top: 60px !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100vw !important;
            height: calc(100vh - 60px) !important;
            max-width: none !important;
            max-height: none !important;
            border-radius: 0 !important;
            z-index: 1000 !important;
          }
          
          /* ÉTAT RÉDUIT SUR MOBILE - COMME UNE BARRE */
          .chatbot-modal-minimized {
            position: fixed !important;
            top: 60px !important;
            left: 10px !important;
            right: 10px !important;
            bottom: auto !important;
            width: calc(100vw - 20px) !important;
            height: 60px !important;
            border-radius: 12px !important;
            z-index: 1000 !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
            overflow: hidden !important;
          }
          
          /* HEADER MINIMISÉ MOBILE - occupe toute la hauteur */
          .chatbot-modal-minimized .chatbot-header {
            padding: 12px 16px !important;
            border-radius: 12px !important;
            height: 60px !important;
            box-sizing: border-box !important;
          }
          
          /* BOUTON FAB MOBILE */
          .chatbot-fab-btn {
            width: 60px !important;
            height: 60px !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 999 !important;
          }
          
          .chatbot-fab-menu-items {
            bottom: 90px !important;
            right: 20px !important;
          }
          
          /* CONTAINER MESSAGES MOBILE */
          .chatbot-messages-container {
            height: calc(100vh - 220px) !important;
            max-height: none !important;
            padding: 16px 12px !important;
          }
          
          /* INPUT ZONE MOBILE */
          .chatbot-input-container {
            padding: 16px 12px !important;
            background: #ffffff !important;
            border-top: 2px solid #e5e7eb !important;
          }
          
          .chatbot-input {
            padding: 16px 20px !important;
            font-size: 16px !important;
            border-radius: 25px !important;
            line-height: 1.4 !important;
            min-height: 24px !important;
          }
          
          .chatbot-send-btn {
            min-width: 56px !important;
            height: 56px !important;
            border-radius: 28px !important;
            margin-left: 8px !important;
          }
          
          /* CONTRÔLES MOBILE */
          .chatbot-controls {
            padding: 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
            background: #f9fafb !important;
          }
          
          .chatbot-model-select {
            max-width: 180px !important;
            font-size: 14px !important;
            padding: 8px 12px !important;
          }
          
          /* MESSAGES MOBILE */
          .message-bubble {
            max-width: 85% !important;
            font-size: 15px !important;
            line-height: 1.5 !important;
            padding: 12px 16px !important;
          }
          
          /* HEADER MOBILE */
          .chatbot-header {
            padding: 16px 12px !important;
            background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%) !important;
          }
          
          /* HEADER MINIMISÉ MOBILE - occupe toute la hauteur */
          .chatbot-modal-minimized .chatbot-header {
            padding: 12px 16px !important;
            border-radius: 12px !important;
            height: 60px !important;
            box-sizing: border-box !important;
          }
          
          /* TYPING INDICATOR MOBILE */
          .typing-indicator {
            padding: 12px 16px !important;
          }
          
          /* SCROLLBAR MOBILE */
          .chatbot-messages-container::-webkit-scrollbar {
            width: 4px !important;
          }
          
          .chatbot-messages-container::-webkit-scrollbar-thumb {
            background: #cbd5e1 !important;
            border-radius: 2px !important;
          }
          
          /* KEYBOARD ADAPTATION */
          .chatbot-modal.keyboard-open {
            height: calc(50vh - 60px) !important;
          }
          
          .chatbot-modal.keyboard-open .chatbot-messages-container {
            height: calc(50vh - 220px) !important;
          }
          
          /* TOUCH TARGETS */
          button {
            min-height: 44px !important;
            min-width: 44px !important;
          }
          
          /* FOCUS MOBILE */
          .chatbot-input:focus {
            outline: 2px solid #3b82f6 !important;
            outline-offset: 2px !important;
          }
        }
        
        /* === TRÈS PETIT MOBILE === */
        @media (max-width: 480px) {
          .chatbot-modal {
            top: 60px !important;
            height: calc(100vh - 60px) !important;
          }
          
          .chatbot-modal-minimized {
            bottom: 70px !important;
            width: calc(100vw - 20px) !important;
          }
          
          .chatbot-messages-container {
            height: calc(100vh - 220px) !important;
          }
          
          .chatbot-fab-btn {
            width: 52px !important;
            height: 52px !important;
            bottom: 16px !important;
            right: 16px !important;
          }
          
          .chatbot-fab-menu-items {
            bottom: 75px !important;
            right: 16px !important;
          }
          
          /* OPTIMISATIONS TRÈS PETIT MOBILE */
          .chatbot-input {
            font-size: 16px !important;
            padding: 14px 18px !important;
          }
          
          .chatbot-send-btn {
            min-width: 50px !important;
            height: 50px !important;
            border-radius: 25px !important;
          }
          
          .message-bubble {
            font-size: 14px !important;
            padding: 10px 14px !important;
          }
          
          .chatbot-controls {
            padding: 10px !important;
          }
          
          .chatbot-model-select {
            font-size: 12px !important;
            max-width: 140px !important;
          }
        }
        
        /* === ANIMATIONS === */
        .chatbot-modal {
          animation: slideUpSmooth 0.3s ease-out;
        }
        .chatbot-modal-minimized {
          animation: slideUpSmooth 0.3s ease-out;
        }
        @keyframes slideUpSmooth {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .message-bubble {
          animation: fadeInMessage 0.3s ease-out;
        }
        @keyframes fadeInMessage {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator {
          animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
          0%, 100% { opacity: 0.7; }
          50% { opacity: 1; }
        }
        
        /* === DARK MODE === */
        .dark ::-webkit-scrollbar-thumb {
          background: #374151;
        }
        
        @media (max-width: 768px) {
          .dark .chatbot-modal {
            background: #111827 !important;
          }
          
          .dark .chatbot-input-container {
            background: #1f2937 !important;
            border-top-color: #374151 !important;
          }
          
          .dark .chatbot-controls {
            background: #1f2937 !important;
          }
        }
        
        /* === CORRECTION POUR MODE MINIMISÉ === */
        .chatbot-modal-minimized {
          height: 60px !important;
          overflow: hidden !important;
        }

        .chatbot-modal-minimized .chatbot-header {
          border-radius: 12px !important;
          height: 100% !important;
          padding: 0 16px !important;
        }

        /* Masquer tout sauf le header en mode minimisé */
        .chatbot-modal-minimized > :not(.chatbot-header) {
          display: none !important;
        }

        /* Optimisation mobile pour le header minimisé */
        @media (max-width: 768px) {
          .chatbot-modal-minimized {
            width: calc(100% - 40px) !important;
            left: 20px !important;
            right: 20px !important;
            bottom: 20px !important;
          }
          
          .chatbot-modal-minimized .chatbot-header {
            border-radius: 30px !important;
          }
        }
      `}),i.jsxs("div",{className:"chatbot-fab-menu",children:[i.jsxs("button",{"aria-label":"Ouvrir le menu StudyMarket",onClick:()=>l(ue=>!ue),className:"chatbot-fab-btn fixed bottom-6 right-6 z-50 shadow-lg rounded-full p-0 w-16 h-16 flex items-center justify-center transition-all duration-300 focus:outline-none bg-gradient-to-br from-blue-600 to-green-500 hover:from-blue-700 hover:to-green-600 hover:scale-105",children:[i.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),$.loading&&i.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"})]}),i.jsxs("div",{className:`fixed bottom-28 right-6 z-50 flex flex-col items-end gap-3 transition-all duration-300 chatbot-fab-menu-items ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}`,children:[i.jsx("button",{onClick:X,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Contacter par email",children:i.jsx("span",{className:"text-xl",children:"📧"})}),i.jsx("button",{onClick:me,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Assistant IA",children:i.jsx("span",{className:"text-xl",children:"🤖"})})]})]}),n&&i.jsxs("div",{className:`chatbot-modal fixed bottom-24 right-6 z-50 w-96 max-w-[90vw] bg-white dark:bg-gray-900 rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700 ${s?"chatbot-modal-minimized":""} ${m?"keyboard-open":""}`,style:{maxHeight:s?"60px":"75vh"},onTouchStart:R,onTouchMove:V,onTouchEnd:k,children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-t-xl chatbot-header",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 dark:bg-gray-700 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-bold",children:"🎯"})}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-sm dark:text-blue-100",children:"Assistant IA"}),i.jsx("div",{className:"text-xs text-blue-100 dark:text-blue-300",children:"• En ligne"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:s?Fe:Ee,className:"text-white/80 hover:text-white p-2 transition-colors focus:outline-none",title:s?"Agrandir":"Réduire",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:s?i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"})}):i.jsx("span",{className:"text-lg font-bold",children:"−"})}),i.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-2 transition-colors focus:outline-none",title:"Fermer",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between chatbot-controls",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Modèle IA : DeepSeek"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[$.error&&i.jsx("button",{onClick:q,className:"text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded hover:bg-orange-200 dark:hover:bg-orange-800",title:"Réessayer",children:"🔄"}),i.jsx("button",{onClick:H,className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Nouveau chat",children:"🗑️"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 bg-gray-50 dark:bg-gray-800 chatbot-messages-container",style:{maxHeight:"50vh"},children:[$.messages.map((ue,ye)=>i.jsx("div",{className:`flex ${ue.role==="user"?"justify-end":"justify-start"} message-bubble`,children:i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm message-bubble ${ue.role==="user"?"bg-blue-600 text-white max-w-[85%]":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm border border-gray-200 dark:border-gray-600 max-w-[90%]"}`,children:[i.jsx("div",{dangerouslySetInnerHTML:{__html:Me(ue.content)},style:{textAlign:"left"}}),ue.timestamp&&i.jsx("div",{className:`text-xs mt-1 ${ue.role==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:new Date(ue.timestamp).toLocaleTimeString()})]})},ye)),$.loading&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg px-3 py-2 shadow-sm border border-gray-200 dark:border-gray-600 typing-indicator",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Réflexion..."})]})})}),i.jsx("div",{ref:S})]}),i.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 chatbot-input-container",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:C,type:"text",value:u,onChange:ue=>d(ue.target.value),onKeyDown:z,placeholder:"Pose ta question...",className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none chatbot-input",disabled:$.loading,maxLength:500}),i.jsx("button",{onClick:Z,disabled:$.loading||!u.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors disabled:cursor-not-allowed chatbot-send-btn flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsxs("span",{children:[u.length,"/500"]}),u.length>450&&i.jsx("span",{className:"text-orange-500",children:"⚠️"})]}),i.jsx("span",{className:"hidden sm:inline",children:"Entrée pour envoyer"}),i.jsx("span",{className:"sm:hidden",children:"Entrée ↵"})]})]})]})]})]})};function V1e({children:t}){const[e,n]=oe.useState(null);return oe.useEffect(()=>{const r=s=>{n(s.error||new Error(s.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?i.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):i.jsx(i.Fragment,{children:t})}function z1e(){return i.jsx(sW,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:i.jsx(oX,{children:i.jsxs(Y7,{children:[i.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[i.jsx(fie,{}),i.jsx("main",{className:"flex-1 pt-16",children:i.jsx(V1e,{children:i.jsxs(B7,{children:[i.jsx(yn,{path:"/",element:i.jsx(Roe,{})}),i.jsx(yn,{path:"/listings",element:i.jsx(mle,{})}),i.jsx(yn,{path:"/listing/:id",element:i.jsx(vde,{})}),i.jsx(yn,{path:"/auth",element:i.jsx(xme,{})}),i.jsx(yn,{path:"/help",element:i.jsx(Vfe,{})}),i.jsx(yn,{path:"/safety",element:i.jsx(Wfe,{})}),i.jsx(yn,{path:"/cart",element:i.jsx(wme,{})}),i.jsx(yn,{path:"/products",element:i.jsx(Tme,{})}),i.jsx(yn,{path:"/checkout/success",element:i.jsx(Rme,{})}),i.jsx(yn,{path:"/checkout",element:i.jsx(Ai,{children:i.jsx(bme,{})})}),i.jsx(yn,{path:"/orders",element:i.jsx(Ai,{children:i.jsx(_me,{})})}),i.jsx(yn,{path:"/order-confirmation/:orderId",element:i.jsx(Ai,{children:i.jsx(jme,{})})}),i.jsx(yn,{path:"/create",element:i.jsx(Ai,{children:i.jsx(Uhe,{})})}),i.jsx(yn,{path:"/profile",element:i.jsx(Ai,{children:i.jsx(qhe,{})})}),i.jsx(yn,{path:"/settings",element:i.jsx(Ai,{children:i.jsx(rfe,{})})}),i.jsx(yn,{path:"/impact",element:i.jsx(Ai,{children:i.jsx(hfe,{})})}),i.jsx(yn,{path:"/saved-searches",element:i.jsx(Ai,{children:i.jsx(mfe,{})})}),i.jsx(yn,{path:"/favorites",element:i.jsx(Ai,{children:i.jsx(vfe,{})})}),i.jsx(yn,{path:"/payments",element:i.jsx(Ai,{children:i.jsx(yfe,{})})}),i.jsx(yn,{path:"/messages",element:i.jsx(Ai,{children:i.jsx(sme,{})})}),i.jsx(yn,{path:"/edit-listing/:id",element:i.jsx(Ame,{})}),i.jsx(yn,{path:"/jobs",element:i.jsx(Xme,{})}),i.jsx(yn,{path:"/housing",element:i.jsx(E1e,{})}),i.jsx(yn,{path:"*",element:i.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),i.jsx(pie,{}),i.jsx($1e,{})]}),i.jsx(JW,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}gM(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(z1e,{})}));
