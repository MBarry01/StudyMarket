function MV(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var _s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Bk={exports:{}},Uv={},qk={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=Symbol.for("react.element"),VV=Symbol.for("react.portal"),FV=Symbol.for("react.fragment"),UV=Symbol.for("react.strict_mode"),$V=Symbol.for("react.profiler"),zV=Symbol.for("react.provider"),BV=Symbol.for("react.context"),qV=Symbol.for("react.forward_ref"),WV=Symbol.for("react.suspense"),HV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),GS=Symbol.iterator;function KV(t){return t===null||typeof t!="object"?null:(t=GS&&t[GS]||t["@@iterator"],typeof t=="function"?t:null)}var Wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hk=Object.assign,Gk={};function Ju(t,e,r){this.props=t,this.context=e,this.refs=Gk,this.updater=r||Wk}Ju.prototype.isReactComponent={};Ju.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ju.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kk(){}Kk.prototype=Ju.prototype;function __(t,e,r){this.props=t,this.context=e,this.refs=Gk,this.updater=r||Wk}var j_=__.prototype=new Kk;j_.constructor=__;Hk(j_,Ju.prototype);j_.isPureReactComponent=!0;var KS=Array.isArray,Yk=Object.prototype.hasOwnProperty,N_={current:null},Jk={key:!0,ref:!0,__self:!0,__source:!0};function Xk(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Yk.call(e,n)&&!Jk.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Pf,type:t,key:a,ref:o,props:i,_owner:N_.current}}function YV(t,e){return{$$typeof:Pf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pf}function JV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var YS=/\/+/g;function Dy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JV(""+t.key):e.toString(36)}function Pp(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pf:case VV:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Dy(o,0):n,KS(i)?(r="",t!=null&&(r=t.replace(YS,"$&/")+"/"),Pp(i,e,r,"",function(u){return u})):i!=null&&(S_(i)&&(i=YV(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(YS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",KS(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Dy(a,l);o+=Pp(a,e,r,c,i)}else if(c=KV(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Dy(a,l++),o+=Pp(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bm(t,e,r){if(t==null)return t;var n=[],i=0;return Pp(t,n,"","",function(a){return e.call(r,a,i++)}),n}function XV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},Dp={transition:null},QV={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:Dp,ReactCurrentOwner:N_};function Qk(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:Bm,forEach:function(t,e,r){Bm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Bm(t,function(){e++}),e},toArray:function(t){return Bm(t,function(e){return e})||[]},only:function(t){if(!S_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=Ju;mt.Fragment=FV;mt.Profiler=$V;mt.PureComponent=__;mt.StrictMode=UV;mt.Suspense=WV;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QV;mt.act=Qk;mt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Hk({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=N_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Yk.call(e,c)&&!Jk.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Pf,type:t.type,key:i,ref:a,props:n,_owner:o}};mt.createContext=function(t){return t={$$typeof:BV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zV,_context:t},t.Consumer=t};mt.createElement=Xk;mt.createFactory=function(t){var e=Xk.bind(null,t);return e.type=t,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:qV,render:t}};mt.isValidElement=S_;mt.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:XV}};mt.memo=function(t,e){return{$$typeof:HV,type:t,compare:e===void 0?null:e}};mt.startTransition=function(t){var e=Dp.transition;Dp.transition={};try{t()}finally{Dp.transition=e}};mt.unstable_act=Qk;mt.useCallback=function(t,e){return Nn.current.useCallback(t,e)};mt.useContext=function(t){return Nn.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};mt.useEffect=function(t,e){return Nn.current.useEffect(t,e)};mt.useId=function(){return Nn.current.useId()};mt.useImperativeHandle=function(t,e,r){return Nn.current.useImperativeHandle(t,e,r)};mt.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};mt.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};mt.useMemo=function(t,e){return Nn.current.useMemo(t,e)};mt.useReducer=function(t,e,r){return Nn.current.useReducer(t,e,r)};mt.useRef=function(t){return Nn.current.useRef(t)};mt.useState=function(t){return Nn.current.useState(t)};mt.useSyncExternalStore=function(t,e,r){return Nn.current.useSyncExternalStore(t,e,r)};mt.useTransition=function(){return Nn.current.useTransition()};mt.version="18.3.1";qk.exports=mt;var p=qk.exports;const Ce=Fv(p),Zk=MV({__proto__:null,default:Ce},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZV=p,eF=Symbol.for("react.element"),tF=Symbol.for("react.fragment"),rF=Object.prototype.hasOwnProperty,nF=ZV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sF={key:!0,ref:!0,__self:!0,__source:!0};function eI(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)rF.call(e,n)&&!sF.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:eF,type:t,key:a,ref:o,props:i,_owner:nF.current}}Uv.Fragment=tF;Uv.jsx=eI;Uv.jsxs=eI;Bk.exports=Uv;var s=Bk.exports,tI={exports:{}},us={},rI={exports:{}},nI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var z=L.length;L.push(W);e:for(;0<z;){var X=z-1>>>1,se=L[X];if(0<i(se,W))L[X]=W,L[z]=se,z=X;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var W=L[0],z=L.pop();if(z!==W){L[0]=z;e:for(var X=0,se=L.length,_e=se>>>1;X<_e;){var ot=2*(X+1)-1,jt=L[ot],yt=ot+1,Se=L[yt];if(0>i(jt,z))yt<se&&0>i(Se,jt)?(L[X]=Se,L[yt]=z,X=yt):(L[X]=jt,L[ot]=z,X=ot);else if(yt<se&&0>i(Se,z))L[X]=Se,L[yt]=z,X=yt;else break e}}return W}function i(L,W){var z=L.sortIndex-W.sortIndex;return z!==0?z:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,g=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=L)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function E(L){if(y=!1,w(L),!x)if(r(c)!==null)x=!0,q(C);else{var W=r(u);W!==null&&F(E,W.startTime-L)}}function C(L,W){x=!1,y&&(y=!1,b(k),k=-1),g=!0;var z=m;try{for(w(W),h=r(c);h!==null&&(!(h.expirationTime>W)||L&&!P());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var se=X(h.expirationTime<=W);W=t.unstable_now(),typeof se=="function"?h.callback=se:h===r(c)&&n(c),w(W)}else n(c);h=r(c)}if(h!==null)var _e=!0;else{var ot=r(u);ot!==null&&F(E,ot.startTime-W),_e=!1}return _e}finally{h=null,m=z,g=!1}}var I=!1,T=null,k=-1,R=5,j=-1;function P(){return!(t.unstable_now()-j<R)}function D(){if(T!==null){var L=t.unstable_now();j=L;var W=!0;try{W=T(!0,L)}finally{W?S():(I=!1,T=null)}}else I=!1}var S;if(typeof v=="function")S=function(){v(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=D,S=function(){$.postMessage(null)}}else S=function(){_(D,0)};function q(L){T=L,I||(I=!0,S())}function F(L,W){k=_(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,q(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var z=m;m=W;try{return L()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return W()}finally{m=z}},t.unstable_scheduleCallback=function(L,W,z){var X=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,L){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=z+se,L={id:d++,callback:W,priorityLevel:L,startTime:z,expirationTime:se,sortIndex:-1},z>X?(L.sortIndex=z,e(u,L),r(c)===null&&L===r(u)&&(y?(b(k),k=-1):y=!0,F(E,z-X))):(L.sortIndex=se,e(c,L),x||g||(x=!0,q(C))),L},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(L){var W=m;return function(){var z=m;m=W;try{return L.apply(this,arguments)}finally{m=z}}}})(nI);rI.exports=nI;var iF=rI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=p,os=iF;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sI=new Set,Ah={};function Hl(t,e){xu(t,e),xu(t+"Capture",e)}function xu(t,e){for(Ah[t]=e,t=0;t<e.length;t++)sI.add(e[t])}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lw=Object.prototype.hasOwnProperty,oF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JS={},XS={};function lF(t){return lw.call(XS,t)?!0:lw.call(JS,t)?!1:oF.test(t)?XS[t]=!0:(JS[t]=!0,!1)}function cF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uF(t,e,r,n){if(e===null||typeof e>"u"||cF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var E_=/[\-:]([a-z])/g;function C_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E_,C_);Hr[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E_,C_);Hr[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E_,C_);Hr[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function T_(t,e,r,n){var i=Hr.hasOwnProperty(e)?Hr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uF(e,r,i,n)&&(r=null),n||i===null?lF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ea=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qm=Symbol.for("react.element"),Mc=Symbol.for("react.portal"),Lc=Symbol.for("react.fragment"),k_=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),iI=Symbol.for("react.provider"),aI=Symbol.for("react.context"),I_=Symbol.for("react.forward_ref"),uw=Symbol.for("react.suspense"),dw=Symbol.for("react.suspense_list"),A_=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),oI=Symbol.for("react.offscreen"),QS=Symbol.iterator;function Id(t){return t===null||typeof t!="object"?null:(t=QS&&t[QS]||t["@@iterator"],typeof t=="function"?t:null)}var lr=Object.assign,Oy;function Hd(t){if(Oy===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Oy=e&&e[1]||""}return`
`+Oy+t}var My=!1;function Ly(t,e){if(!t||My)return"";My=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{My=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Hd(t):""}function dF(t){switch(t.tag){case 5:return Hd(t.type);case 16:return Hd("Lazy");case 13:return Hd("Suspense");case 19:return Hd("SuspenseList");case 0:case 2:case 15:return t=Ly(t.type,!1),t;case 11:return t=Ly(t.type.render,!1),t;case 1:return t=Ly(t.type,!0),t;default:return""}}function hw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lc:return"Fragment";case Mc:return"Portal";case cw:return"Profiler";case k_:return"StrictMode";case uw:return"Suspense";case dw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aI:return(t.displayName||"Context")+".Consumer";case iI:return(t._context.displayName||"Context")+".Provider";case I_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A_:return e=t.displayName||null,e!==null?e:hw(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return hw(t(e))}catch{}}return null}function hF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hw(e);case 8:return e===k_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fF(t){var e=lI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wm(t){t._valueTracker||(t._valueTracker=fF(t))}function cI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=lI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fw(t,e){var r=e.checked;return lr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ZS(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=wo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uI(t,e){e=e.checked,e!=null&&T_(t,"checked",e,!1)}function mw(t,e){uI(t,e);var r=wo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pw(t,e.type,r):e.hasOwnProperty("defaultValue")&&pw(t,e.type,wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eE(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function pw(t,e,r){(e!=="number"||hg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Gd=Array.isArray;function Qc(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+wo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return lr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tE(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if(Gd(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:wo(r)}}function dI(t,e){var r=wo(e.value),n=wo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function rE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hm,fI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hm=Hm||document.createElement("div"),Hm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rh(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var oh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(oh).forEach(function(t){mF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oh[e]=oh[t]})});function mI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||oh.hasOwnProperty(t)&&oh[t]?(""+e).trim():e+"px"}function pI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=mI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var pF=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xw(t,e){if(e){if(pF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function yw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ww=null;function R_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bw=null,Zc=null,eu=null;function nE(t){if(t=Mf(t)){if(typeof bw!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Wv(e),bw(t.stateNode,t.type,e))}}function gI(t){Zc?eu?eu.push(t):eu=[t]:Zc=t}function vI(){if(Zc){var t=Zc,e=eu;if(eu=Zc=null,nE(t),e)for(t=0;t<e.length;t++)nE(e[t])}}function xI(t,e){return t(e)}function yI(){}var Vy=!1;function wI(t,e,r){if(Vy)return t(e,r);Vy=!0;try{return xI(t,e,r)}finally{Vy=!1,(Zc!==null||eu!==null)&&(yI(),vI())}}function Ph(t,e){var r=t.stateNode;if(r===null)return null;var n=Wv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var _w=!1;if(la)try{var Ad={};Object.defineProperty(Ad,"passive",{get:function(){_w=!0}}),window.addEventListener("test",Ad,Ad),window.removeEventListener("test",Ad,Ad)}catch{_w=!1}function gF(t,e,r,n,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var lh=!1,fg=null,mg=!1,jw=null,vF={onError:function(t){lh=!0,fg=t}};function xF(t,e,r,n,i,a,o,l,c){lh=!1,fg=null,gF.apply(vF,arguments)}function yF(t,e,r,n,i,a,o,l,c){if(xF.apply(this,arguments),lh){if(lh){var u=fg;lh=!1,fg=null}else throw Error(ae(198));mg||(mg=!0,jw=u)}}function Gl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function bI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sE(t){if(Gl(t)!==t)throw Error(ae(188))}function wF(t){var e=t.alternate;if(!e){if(e=Gl(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return sE(i),t;if(a===n)return sE(i),e;a=a.sibling}throw Error(ae(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function _I(t){return t=wF(t),t!==null?jI(t):null}function jI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jI(t);if(e!==null)return e;t=t.sibling}return null}var NI=os.unstable_scheduleCallback,iE=os.unstable_cancelCallback,bF=os.unstable_shouldYield,_F=os.unstable_requestPaint,mr=os.unstable_now,jF=os.unstable_getCurrentPriorityLevel,P_=os.unstable_ImmediatePriority,SI=os.unstable_UserBlockingPriority,pg=os.unstable_NormalPriority,NF=os.unstable_LowPriority,EI=os.unstable_IdlePriority,$v=null,gi=null;function SF(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot($v,t,void 0,(t.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:TF,EF=Math.log,CF=Math.LN2;function TF(t){return t>>>=0,t===0?32:31-(EF(t)/CF|0)|0}var Gm=64,Km=4194304;function Kd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gg(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=Kd(l):(a&=o,a!==0&&(n=Kd(a)))}else o=r&~i,o!==0?n=Kd(o):a!==0&&(n=Kd(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zs(e),i=1<<r,n|=t[r],e&=~i;return n}function kF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IF(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-zs(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=kF(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Nw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CI(){var t=Gm;return Gm<<=1,!(Gm&4194240)&&(Gm=64),t}function Fy(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Df(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zs(e),t[e]=r}function AF(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-zs(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function D_(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Pt=0;function TI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kI,O_,II,AI,RI,Sw=!1,Ym=[],io=null,ao=null,oo=null,Dh=new Map,Oh=new Map,qa=[],RF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aE(t,e){switch(t){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Dh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(e.pointerId)}}function Rd(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Mf(e),e!==null&&O_(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PF(t,e,r,n,i){switch(e){case"focusin":return io=Rd(io,t,e,r,n,i),!0;case"dragenter":return ao=Rd(ao,t,e,r,n,i),!0;case"mouseover":return oo=Rd(oo,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Dh.set(a,Rd(Dh.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Oh.set(a,Rd(Oh.get(a)||null,t,e,r,n,i)),!0}return!1}function PI(t){var e=dl(t.target);if(e!==null){var r=Gl(e);if(r!==null){if(e=r.tag,e===13){if(e=bI(r),e!==null){t.blockedOn=e,RI(t.priority,function(){II(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Op(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ew(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ww=n,r.target.dispatchEvent(n),ww=null}else return e=Mf(r),e!==null&&O_(e),t.blockedOn=r,!1;e.shift()}return!0}function oE(t,e,r){Op(t)&&r.delete(e)}function DF(){Sw=!1,io!==null&&Op(io)&&(io=null),ao!==null&&Op(ao)&&(ao=null),oo!==null&&Op(oo)&&(oo=null),Dh.forEach(oE),Oh.forEach(oE)}function Pd(t,e){t.blockedOn===e&&(t.blockedOn=null,Sw||(Sw=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,DF)))}function Mh(t){function e(i){return Pd(i,t)}if(0<Ym.length){Pd(Ym[0],t);for(var r=1;r<Ym.length;r++){var n=Ym[r];n.blockedOn===t&&(n.blockedOn=null)}}for(io!==null&&Pd(io,t),ao!==null&&Pd(ao,t),oo!==null&&Pd(oo,t),Dh.forEach(e),Oh.forEach(e),r=0;r<qa.length;r++)n=qa[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<qa.length&&(r=qa[0],r.blockedOn===null);)PI(r),r.blockedOn===null&&qa.shift()}var tu=Ea.ReactCurrentBatchConfig,vg=!0;function OF(t,e,r,n){var i=Pt,a=tu.transition;tu.transition=null;try{Pt=1,M_(t,e,r,n)}finally{Pt=i,tu.transition=a}}function MF(t,e,r,n){var i=Pt,a=tu.transition;tu.transition=null;try{Pt=4,M_(t,e,r,n)}finally{Pt=i,tu.transition=a}}function M_(t,e,r,n){if(vg){var i=Ew(t,e,r,n);if(i===null)Yy(t,e,n,xg,r),aE(t,n);else if(PF(i,t,e,r,n))n.stopPropagation();else if(aE(t,n),e&4&&-1<RF.indexOf(t)){for(;i!==null;){var a=Mf(i);if(a!==null&&kI(a),a=Ew(t,e,r,n),a===null&&Yy(t,e,n,xg,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Yy(t,e,n,null,r)}}var xg=null;function Ew(t,e,r,n){if(xg=null,t=R_(n),t=dl(t),t!==null)if(e=Gl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=bI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xg=t,null}function DI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jF()){case P_:return 1;case SI:return 4;case pg:case NF:return 16;case EI:return 536870912;default:return 16}default:return 16}}var to=null,L_=null,Mp=null;function OI(){if(Mp)return Mp;var t,e=L_,r=e.length,n,i="value"in to?to.value:to.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Mp=i.slice(t,1<n?1-n:void 0)}function Lp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jm(){return!0}function lE(){return!1}function ds(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Jm:lE,this.isPropagationStopped=lE,this}return lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jm)},persist:function(){},isPersistent:Jm}),e}var Xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V_=ds(Xu),Of=lr({},Xu,{view:0,detail:0}),LF=ds(Of),Uy,$y,Dd,zv=lr({},Of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dd&&(Dd&&t.type==="mousemove"?(Uy=t.screenX-Dd.screenX,$y=t.screenY-Dd.screenY):$y=Uy=0,Dd=t),Uy)},movementY:function(t){return"movementY"in t?t.movementY:$y}}),cE=ds(zv),VF=lr({},zv,{dataTransfer:0}),FF=ds(VF),UF=lr({},Of,{relatedTarget:0}),zy=ds(UF),$F=lr({},Xu,{animationName:0,elapsedTime:0,pseudoElement:0}),zF=ds($F),BF=lr({},Xu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qF=ds(BF),WF=lr({},Xu,{data:0}),uE=ds(WF),HF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KF[t])?!!e[t]:!1}function F_(){return YF}var JF=lr({},Of,{key:function(t){if(t.key){var e=HF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F_,charCode:function(t){return t.type==="keypress"?Lp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XF=ds(JF),QF=lr({},zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dE=ds(QF),ZF=lr({},Of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F_}),eU=ds(ZF),tU=lr({},Xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),rU=ds(tU),nU=lr({},zv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sU=ds(nU),iU=[9,13,27,32],U_=la&&"CompositionEvent"in window,ch=null;la&&"documentMode"in document&&(ch=document.documentMode);var aU=la&&"TextEvent"in window&&!ch,MI=la&&(!U_||ch&&8<ch&&11>=ch),hE=" ",fE=!1;function LI(t,e){switch(t){case"keyup":return iU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vc=!1;function oU(t,e){switch(t){case"compositionend":return VI(e);case"keypress":return e.which!==32?null:(fE=!0,hE);case"textInput":return t=e.data,t===hE&&fE?null:t;default:return null}}function lU(t,e){if(Vc)return t==="compositionend"||!U_&&LI(t,e)?(t=OI(),Mp=L_=to=null,Vc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MI&&e.locale!=="ko"?null:e.data;default:return null}}var cU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cU[t.type]:e==="textarea"}function FI(t,e,r,n){gI(n),e=yg(e,"onChange"),0<e.length&&(r=new V_("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var uh=null,Lh=null;function uU(t){JI(t,0)}function Bv(t){var e=$c(t);if(cI(e))return t}function dU(t,e){if(t==="change")return e}var UI=!1;if(la){var By;if(la){var qy="oninput"in document;if(!qy){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),qy=typeof pE.oninput=="function"}By=qy}else By=!1;UI=By&&(!document.documentMode||9<document.documentMode)}function gE(){uh&&(uh.detachEvent("onpropertychange",$I),Lh=uh=null)}function $I(t){if(t.propertyName==="value"&&Bv(Lh)){var e=[];FI(e,Lh,t,R_(t)),wI(uU,e)}}function hU(t,e,r){t==="focusin"?(gE(),uh=e,Lh=r,uh.attachEvent("onpropertychange",$I)):t==="focusout"&&gE()}function fU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bv(Lh)}function mU(t,e){if(t==="click")return Bv(e)}function pU(t,e){if(t==="input"||t==="change")return Bv(e)}function gU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:gU;function Vh(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lw.call(e,i)||!Ks(t[i],e[i]))return!1}return!0}function vE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xE(t,e){var r=vE(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vE(r)}}function zI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BI(){for(var t=window,e=hg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hg(t.document)}return e}function $_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vU(t){var e=BI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&zI(r.ownerDocument.documentElement,r)){if(n!==null&&$_(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=xE(r,a);var o=xE(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xU=la&&"documentMode"in document&&11>=document.documentMode,Fc=null,Cw=null,dh=null,Tw=!1;function yE(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Tw||Fc==null||Fc!==hg(n)||(n=Fc,"selectionStart"in n&&$_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dh&&Vh(dh,n)||(dh=n,n=yg(Cw,"onSelect"),0<n.length&&(e=new V_("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fc)))}function Xm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Uc={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},Wy={},qI={};la&&(qI=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function qv(t){if(Wy[t])return Wy[t];if(!Uc[t])return t;var e=Uc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in qI)return Wy[t]=e[r];return t}var WI=qv("animationend"),HI=qv("animationiteration"),GI=qv("animationstart"),KI=qv("transitionend"),YI=new Map,wE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(t,e){YI.set(t,e),Hl(e,[t])}for(var Hy=0;Hy<wE.length;Hy++){var Gy=wE[Hy],yU=Gy.toLowerCase(),wU=Gy[0].toUpperCase()+Gy.slice(1);Oo(yU,"on"+wU)}Oo(WI,"onAnimationEnd");Oo(HI,"onAnimationIteration");Oo(GI,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(KI,"onTransitionEnd");xu("onMouseEnter",["mouseout","mouseover"]);xu("onMouseLeave",["mouseout","mouseover"]);xu("onPointerEnter",["pointerout","pointerover"]);xu("onPointerLeave",["pointerout","pointerover"]);Hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yd));function bE(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,yF(n,e,void 0,t),t.currentTarget=null}function JI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;bE(i,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;bE(i,l,u),a=c}}}if(mg)throw t=jw,mg=!1,jw=null,t}function Kt(t,e){var r=e[Pw];r===void 0&&(r=e[Pw]=new Set);var n=t+"__bubble";r.has(n)||(XI(e,t,2,!1),r.add(n))}function Ky(t,e,r){var n=0;e&&(n|=4),XI(r,t,n,e)}var Qm="_reactListening"+Math.random().toString(36).slice(2);function Fh(t){if(!t[Qm]){t[Qm]=!0,sI.forEach(function(r){r!=="selectionchange"&&(bU.has(r)||Ky(r,!1,t),Ky(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qm]||(e[Qm]=!0,Ky("selectionchange",!1,e))}}function XI(t,e,r,n){switch(DI(e)){case 1:var i=OF;break;case 4:i=MF;break;default:i=M_}r=i.bind(null,e,r,t),i=void 0,!_w||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Yy(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=dl(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}wI(function(){var u=a,d=R_(r),h=[];e:{var m=YI.get(t);if(m!==void 0){var g=V_,x=t;switch(t){case"keypress":if(Lp(r)===0)break e;case"keydown":case"keyup":g=XF;break;case"focusin":x="focus",g=zy;break;case"focusout":x="blur",g=zy;break;case"beforeblur":case"afterblur":g=zy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=cE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=FF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=eU;break;case WI:case HI:case GI:g=zF;break;case KI:g=rU;break;case"scroll":g=LF;break;case"wheel":g=sU;break;case"copy":case"cut":case"paste":g=qF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dE}var y=(e&4)!==0,_=!y&&t==="scroll",b=y?m!==null?m+"Capture":null:m;y=[];for(var v=u,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,b!==null&&(E=Ph(v,b),E!=null&&y.push(Uh(v,E,w)))),_)break;v=v.return}0<y.length&&(m=new g(m,x,null,r,d),h.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==ww&&(x=r.relatedTarget||r.fromElement)&&(dl(x)||x[ca]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=u,x=x?dl(x):null,x!==null&&(_=Gl(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(y=cE,E="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=dE,E="onPointerLeave",b="onPointerEnter",v="pointer"),_=g==null?m:$c(g),w=x==null?m:$c(x),m=new y(E,v+"leave",g,r,d),m.target=_,m.relatedTarget=w,E=null,dl(d)===u&&(y=new y(b,v+"enter",x,r,d),y.target=w,y.relatedTarget=_,E=y),_=E,g&&x)t:{for(y=g,b=x,v=0,w=y;w;w=vc(w))v++;for(w=0,E=b;E;E=vc(E))w++;for(;0<v-w;)y=vc(y),v--;for(;0<w-v;)b=vc(b),w--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=vc(y),b=vc(b)}y=null}else y=null;g!==null&&_E(h,m,g,y,!1),x!==null&&_!==null&&_E(h,_,x,y,!0)}}e:{if(m=u?$c(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var C=dU;else if(mE(m))if(UI)C=pU;else{C=fU;var I=hU}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=mU);if(C&&(C=C(t,u))){FI(h,C,r,d);break e}I&&I(t,m,u),t==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&pw(m,"number",m.value)}switch(I=u?$c(u):window,t){case"focusin":(mE(I)||I.contentEditable==="true")&&(Fc=I,Cw=u,dh=null);break;case"focusout":dh=Cw=Fc=null;break;case"mousedown":Tw=!0;break;case"contextmenu":case"mouseup":case"dragend":Tw=!1,yE(h,r,d);break;case"selectionchange":if(xU)break;case"keydown":case"keyup":yE(h,r,d)}var T;if(U_)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vc?LI(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(MI&&r.locale!=="ko"&&(Vc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vc&&(T=OI()):(to=d,L_="value"in to?to.value:to.textContent,Vc=!0)),I=yg(u,k),0<I.length&&(k=new uE(k,t,null,r,d),h.push({event:k,listeners:I}),T?k.data=T:(T=VI(r),T!==null&&(k.data=T)))),(T=aU?oU(t,r):lU(t,r))&&(u=yg(u,"onBeforeInput"),0<u.length&&(d=new uE("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=T))}JI(h,e)})}function Uh(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yg(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ph(t,r),a!=null&&n.unshift(Uh(t,a,i)),a=Ph(t,e),a!=null&&n.push(Uh(t,a,i))),t=t.return}return n}function vc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _E(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=Ph(r,a),c!=null&&o.unshift(Uh(r,c,l))):i||(c=Ph(r,a),c!=null&&o.push(Uh(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var _U=/\r\n?/g,jU=/\u0000|\uFFFD/g;function jE(t){return(typeof t=="string"?t:""+t).replace(_U,`
`).replace(jU,"")}function Zm(t,e,r){if(e=jE(e),jE(t)!==e&&r)throw Error(ae(425))}function wg(){}var kw=null,Iw=null;function Aw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rw=typeof setTimeout=="function"?setTimeout:void 0,NU=typeof clearTimeout=="function"?clearTimeout:void 0,NE=typeof Promise=="function"?Promise:void 0,SU=typeof queueMicrotask=="function"?queueMicrotask:typeof NE<"u"?function(t){return NE.resolve(null).then(t).catch(EU)}:Rw;function EU(t){setTimeout(function(){throw t})}function Jy(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Mh(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Mh(e)}function lo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function SE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),ci="__reactFiber$"+Qu,$h="__reactProps$"+Qu,ca="__reactContainer$"+Qu,Pw="__reactEvents$"+Qu,CU="__reactListeners$"+Qu,TU="__reactHandles$"+Qu;function dl(t){var e=t[ci];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ca]||r[ci]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=SE(t);t!==null;){if(r=t[ci])return r;t=SE(t)}return e}t=r,r=t.parentNode}return null}function Mf(t){return t=t[ci]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $c(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Wv(t){return t[$h]||null}var Dw=[],zc=-1;function Mo(t){return{current:t}}function Jt(t){0>zc||(t.current=Dw[zc],Dw[zc]=null,zc--)}function Ut(t,e){zc++,Dw[zc]=t.current,t.current=e}var bo={},ln=Mo(bo),Vn=Mo(!1),Sl=bo;function yu(t,e){var r=t.type.contextTypes;if(!r)return bo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return t=t.childContextTypes,t!=null}function bg(){Jt(Vn),Jt(ln)}function EE(t,e,r){if(ln.current!==bo)throw Error(ae(168));Ut(ln,e),Ut(Vn,r)}function QI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ae(108,hF(t)||"Unknown",i));return lr({},r,n)}function _g(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bo,Sl=ln.current,Ut(ln,t),Ut(Vn,Vn.current),!0}function CE(t,e,r){var n=t.stateNode;if(!n)throw Error(ae(169));r?(t=QI(t,e,Sl),n.__reactInternalMemoizedMergedChildContext=t,Jt(Vn),Jt(ln),Ut(ln,t)):Jt(Vn),Ut(Vn,r)}var Wi=null,Hv=!1,Xy=!1;function ZI(t){Wi===null?Wi=[t]:Wi.push(t)}function kU(t){Hv=!0,ZI(t)}function Lo(){if(!Xy&&Wi!==null){Xy=!0;var t=0,e=Pt;try{var r=Wi;for(Pt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Wi=null,Hv=!1}catch(i){throw Wi!==null&&(Wi=Wi.slice(t+1)),NI(P_,Lo),i}finally{Pt=e,Xy=!1}}return null}var Bc=[],qc=0,jg=null,Ng=0,ps=[],gs=0,El=null,Ki=1,Yi="";function il(t,e){Bc[qc++]=Ng,Bc[qc++]=jg,jg=t,Ng=e}function eA(t,e,r){ps[gs++]=Ki,ps[gs++]=Yi,ps[gs++]=El,El=t;var n=Ki;t=Yi;var i=32-zs(n)-1;n&=~(1<<i),r+=1;var a=32-zs(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ki=1<<32-zs(e)+i|r<<i|n,Yi=a+t}else Ki=1<<a|r<<i|n,Yi=t}function z_(t){t.return!==null&&(il(t,1),eA(t,1,0))}function B_(t){for(;t===jg;)jg=Bc[--qc],Bc[qc]=null,Ng=Bc[--qc],Bc[qc]=null;for(;t===El;)El=ps[--gs],ps[gs]=null,Yi=ps[--gs],ps[gs]=null,Ki=ps[--gs],ps[gs]=null}var es=null,Xn=null,tr=!1,Ms=null;function tA(t,e){var r=xs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function TE(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,es=t,Xn=lo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,es=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=El!==null?{id:Ki,overflow:Yi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,es=t,Xn=null,!0):!1;default:return!1}}function Ow(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mw(t){if(tr){var e=Xn;if(e){var r=e;if(!TE(t,e)){if(Ow(t))throw Error(ae(418));e=lo(r.nextSibling);var n=es;e&&TE(t,e)?tA(n,r):(t.flags=t.flags&-4097|2,tr=!1,es=t)}}else{if(Ow(t))throw Error(ae(418));t.flags=t.flags&-4097|2,tr=!1,es=t}}}function kE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;es=t}function ep(t){if(t!==es)return!1;if(!tr)return kE(t),tr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Aw(t.type,t.memoizedProps)),e&&(e=Xn)){if(Ow(t))throw rA(),Error(ae(418));for(;e;)tA(t,e),e=lo(e.nextSibling)}if(kE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Xn=lo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=es?lo(t.stateNode.nextSibling):null;return!0}function rA(){for(var t=Xn;t;)t=lo(t.nextSibling)}function wu(){Xn=es=null,tr=!1}function q_(t){Ms===null?Ms=[t]:Ms.push(t)}var IU=Ea.ReactCurrentBatchConfig;function Od(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function tp(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IE(t){var e=t._init;return e(t._payload)}function nA(t){function e(b,v){if(t){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=fo(b,v),b.index=0,b.sibling=null,b}function a(b,v,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,E){return v===null||v.tag!==6?(v=s0(w,b.mode,E),v.return=b,v):(v=i(v,w),v.return=b,v)}function c(b,v,w,E){var C=w.type;return C===Lc?d(b,v,w.props.children,E,w.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$a&&IE(C)===v.type)?(E=i(v,w.props),E.ref=Od(b,v,w),E.return=b,E):(E=qp(w.type,w.key,w.props,null,b.mode,E),E.ref=Od(b,v,w),E.return=b,E)}function u(b,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=i0(w,b.mode,E),v.return=b,v):(v=i(v,w.children||[]),v.return=b,v)}function d(b,v,w,E,C){return v===null||v.tag!==7?(v=xl(w,b.mode,E,C),v.return=b,v):(v=i(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=s0(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qm:return w=qp(v.type,v.key,v.props,null,b.mode,w),w.ref=Od(b,null,v),w.return=b,w;case Mc:return v=i0(v,b.mode,w),v.return=b,v;case $a:var E=v._init;return h(b,E(v._payload),w)}if(Gd(v)||Id(v))return v=xl(v,b.mode,w,null),v.return=b,v;tp(b,v)}return null}function m(b,v,w,E){var C=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(b,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qm:return w.key===C?c(b,v,w,E):null;case Mc:return w.key===C?u(b,v,w,E):null;case $a:return C=w._init,m(b,v,C(w._payload),E)}if(Gd(w)||Id(w))return C!==null?null:d(b,v,w,E,null);tp(b,w)}return null}function g(b,v,w,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return b=b.get(w)||null,l(v,b,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case qm:return b=b.get(E.key===null?w:E.key)||null,c(v,b,E,C);case Mc:return b=b.get(E.key===null?w:E.key)||null,u(v,b,E,C);case $a:var I=E._init;return g(b,v,w,I(E._payload),C)}if(Gd(E)||Id(E))return b=b.get(w)||null,d(v,b,E,C,null);tp(v,E)}return null}function x(b,v,w,E){for(var C=null,I=null,T=v,k=v=0,R=null;T!==null&&k<w.length;k++){T.index>k?(R=T,T=null):R=T.sibling;var j=m(b,T,w[k],E);if(j===null){T===null&&(T=R);break}t&&T&&j.alternate===null&&e(b,T),v=a(j,v,k),I===null?C=j:I.sibling=j,I=j,T=R}if(k===w.length)return r(b,T),tr&&il(b,k),C;if(T===null){for(;k<w.length;k++)T=h(b,w[k],E),T!==null&&(v=a(T,v,k),I===null?C=T:I.sibling=T,I=T);return tr&&il(b,k),C}for(T=n(b,T);k<w.length;k++)R=g(T,b,k,w[k],E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?k:R.key),v=a(R,v,k),I===null?C=R:I.sibling=R,I=R);return t&&T.forEach(function(P){return e(b,P)}),tr&&il(b,k),C}function y(b,v,w,E){var C=Id(w);if(typeof C!="function")throw Error(ae(150));if(w=C.call(w),w==null)throw Error(ae(151));for(var I=C=null,T=v,k=v=0,R=null,j=w.next();T!==null&&!j.done;k++,j=w.next()){T.index>k?(R=T,T=null):R=T.sibling;var P=m(b,T,j.value,E);if(P===null){T===null&&(T=R);break}t&&T&&P.alternate===null&&e(b,T),v=a(P,v,k),I===null?C=P:I.sibling=P,I=P,T=R}if(j.done)return r(b,T),tr&&il(b,k),C;if(T===null){for(;!j.done;k++,j=w.next())j=h(b,j.value,E),j!==null&&(v=a(j,v,k),I===null?C=j:I.sibling=j,I=j);return tr&&il(b,k),C}for(T=n(b,T);!j.done;k++,j=w.next())j=g(T,b,k,j.value,E),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?k:j.key),v=a(j,v,k),I===null?C=j:I.sibling=j,I=j);return t&&T.forEach(function(D){return e(b,D)}),tr&&il(b,k),C}function _(b,v,w,E){if(typeof w=="object"&&w!==null&&w.type===Lc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case qm:e:{for(var C=w.key,I=v;I!==null;){if(I.key===C){if(C=w.type,C===Lc){if(I.tag===7){r(b,I.sibling),v=i(I,w.props.children),v.return=b,b=v;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$a&&IE(C)===I.type){r(b,I.sibling),v=i(I,w.props),v.ref=Od(b,I,w),v.return=b,b=v;break e}r(b,I);break}else e(b,I);I=I.sibling}w.type===Lc?(v=xl(w.props.children,b.mode,E,w.key),v.return=b,b=v):(E=qp(w.type,w.key,w.props,null,b.mode,E),E.ref=Od(b,v,w),E.return=b,b=E)}return o(b);case Mc:e:{for(I=w.key;v!==null;){if(v.key===I)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(b,v.sibling),v=i(v,w.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=i0(w,b.mode,E),v.return=b,b=v}return o(b);case $a:return I=w._init,_(b,v,I(w._payload),E)}if(Gd(w))return x(b,v,w,E);if(Id(w))return y(b,v,w,E);tp(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,w),v.return=b,b=v):(r(b,v),v=s0(w,b.mode,E),v.return=b,b=v),o(b)):r(b,v)}return _}var bu=nA(!0),sA=nA(!1),Sg=Mo(null),Eg=null,Wc=null,W_=null;function H_(){W_=Wc=Eg=null}function G_(t){var e=Sg.current;Jt(Sg),t._currentValue=e}function Lw(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ru(t,e){Eg=t,W_=Wc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dn=!0),t.firstContext=null)}function js(t){var e=t._currentValue;if(W_!==t)if(t={context:t,memoizedValue:e,next:null},Wc===null){if(Eg===null)throw Error(ae(308));Wc=t,Eg.dependencies={lanes:0,firstContext:t}}else Wc=Wc.next=t;return e}var hl=null;function K_(t){hl===null?hl=[t]:hl.push(t)}function iA(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,K_(e)):(r.next=i.next,i.next=r),e.interleaved=r,ua(t,n)}function ua(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var za=!1;function Y_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function co(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ct&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ua(t,r)}return i=n.interleaved,i===null?(e.next=e,K_(n)):(e.next=i.next,i.next=e),n.interleaved=e,ua(t,r)}function Vp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,D_(t,r)}}function AE(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Cg(t,e,r,n){var i=t.updateQueue;za=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,g=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,y=l;switch(m=e,g=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(g,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(g,h,m):x,m==null)break e;h=lr({},h,m);break e;case 2:za=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Tl|=o,t.lanes=o,t.memoizedState=h}}function RE(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ae(191,i));i.call(n)}}}var Lf={},vi=Mo(Lf),zh=Mo(Lf),Bh=Mo(Lf);function fl(t){if(t===Lf)throw Error(ae(174));return t}function J_(t,e){switch(Ut(Bh,e),Ut(zh,t),Ut(vi,Lf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vw(e,t)}Jt(vi),Ut(vi,e)}function _u(){Jt(vi),Jt(zh),Jt(Bh)}function oA(t){fl(Bh.current);var e=fl(vi.current),r=vw(e,t.type);e!==r&&(Ut(zh,t),Ut(vi,r))}function X_(t){zh.current===t&&(Jt(vi),Jt(zh))}var ir=Mo(0);function Tg(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qy=[];function Q_(){for(var t=0;t<Qy.length;t++)Qy[t]._workInProgressVersionPrimary=null;Qy.length=0}var Fp=Ea.ReactCurrentDispatcher,Zy=Ea.ReactCurrentBatchConfig,Cl=0,or=null,Tr=null,Or=null,kg=!1,hh=!1,qh=0,AU=0;function Xr(){throw Error(ae(321))}function Z_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ks(t[r],e[r]))return!1;return!0}function ej(t,e,r,n,i,a){if(Cl=a,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fp.current=t===null||t.memoizedState===null?OU:MU,t=r(n,i),hh){a=0;do{if(hh=!1,qh=0,25<=a)throw Error(ae(301));a+=1,Or=Tr=null,e.updateQueue=null,Fp.current=LU,t=r(n,i)}while(hh)}if(Fp.current=Ig,e=Tr!==null&&Tr.next!==null,Cl=0,Or=Tr=or=null,kg=!1,e)throw Error(ae(300));return t}function tj(){var t=qh!==0;return qh=0,t}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?or.memoizedState=Or=t:Or=Or.next=t,Or}function Ns(){if(Tr===null){var t=or.alternate;t=t!==null?t.memoizedState:null}else t=Tr.next;var e=Or===null?or.memoizedState:Or.next;if(e!==null)Or=e,Tr=t;else{if(t===null)throw Error(ae(310));Tr=t,t={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Or===null?or.memoizedState=Or=t:Or=Or.next=t}return Or}function Wh(t,e){return typeof e=="function"?e(t):e}function e0(t){var e=Ns(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=Tr,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Cl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,or.lanes|=d,Tl|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,Ks(n,e.memoizedState)||(Dn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,or.lanes|=a,Tl|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function t0(t){var e=Ns(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ks(a,e.memoizedState)||(Dn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function lA(){}function cA(t,e){var r=or,n=Ns(),i=e(),a=!Ks(n.memoizedState,i);if(a&&(n.memoizedState=i,Dn=!0),n=n.queue,rj(hA.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,Hh(9,dA.bind(null,r,n,i,e),void 0,null),Lr===null)throw Error(ae(349));Cl&30||uA(r,e,i)}return i}function uA(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function dA(t,e,r,n){e.value=r,e.getSnapshot=n,fA(e)&&mA(t)}function hA(t,e,r){return r(function(){fA(e)&&mA(t)})}function fA(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ks(t,r)}catch{return!0}}function mA(t){var e=ua(t,1);e!==null&&Bs(e,t,1,-1)}function PE(t){var e=oi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wh,lastRenderedState:t},e.queue=t,t=t.dispatch=DU.bind(null,or,t),[e.memoizedState,t]}function Hh(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pA(){return Ns().memoizedState}function Up(t,e,r,n){var i=oi();or.flags|=t,i.memoizedState=Hh(1|e,r,void 0,n===void 0?null:n)}function Gv(t,e,r,n){var i=Ns();n=n===void 0?null:n;var a=void 0;if(Tr!==null){var o=Tr.memoizedState;if(a=o.destroy,n!==null&&Z_(n,o.deps)){i.memoizedState=Hh(e,r,a,n);return}}or.flags|=t,i.memoizedState=Hh(1|e,r,a,n)}function DE(t,e){return Up(8390656,8,t,e)}function rj(t,e){return Gv(2048,8,t,e)}function gA(t,e){return Gv(4,2,t,e)}function vA(t,e){return Gv(4,4,t,e)}function xA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yA(t,e,r){return r=r!=null?r.concat([t]):null,Gv(4,4,xA.bind(null,e,t),r)}function nj(){}function wA(t,e){var r=Ns();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function bA(t,e){var r=Ns();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function _A(t,e,r){return Cl&21?(Ks(r,e)||(r=CI(),or.lanes|=r,Tl|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=r)}function RU(t,e){var r=Pt;Pt=r!==0&&4>r?r:4,t(!0);var n=Zy.transition;Zy.transition={};try{t(!1),e()}finally{Pt=r,Zy.transition=n}}function jA(){return Ns().memoizedState}function PU(t,e,r){var n=ho(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},NA(t))SA(e,r);else if(r=iA(t,e,r,n),r!==null){var i=yn();Bs(r,t,n,i),EA(r,e,n)}}function DU(t,e,r){var n=ho(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(NA(t))SA(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,Ks(l,o)){var c=e.interleaved;c===null?(i.next=i,K_(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=iA(t,e,i,n),r!==null&&(i=yn(),Bs(r,t,n,i),EA(r,e,n))}}function NA(t){var e=t.alternate;return t===or||e!==null&&e===or}function SA(t,e){hh=kg=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function EA(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,D_(t,r)}}var Ig={readContext:js,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},OU={readContext:js,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:js,useEffect:DE,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Up(4194308,4,xA.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Up(4194308,4,t,e)},useInsertionEffect:function(t,e){return Up(4,2,t,e)},useMemo:function(t,e){var r=oi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=oi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=PU.bind(null,or,t),[n.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:PE,useDebugValue:nj,useDeferredValue:function(t){return oi().memoizedState=t},useTransition:function(){var t=PE(!1),e=t[0];return t=RU.bind(null,t[1]),oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=or,i=oi();if(tr){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),Lr===null)throw Error(ae(349));Cl&30||uA(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,DE(hA.bind(null,n,a,t),[t]),n.flags|=2048,Hh(9,dA.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=oi(),e=Lr.identifierPrefix;if(tr){var r=Yi,n=Ki;r=(n&~(1<<32-zs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=qh++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=AU++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MU={readContext:js,useCallback:wA,useContext:js,useEffect:rj,useImperativeHandle:yA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:bA,useReducer:e0,useRef:pA,useState:function(){return e0(Wh)},useDebugValue:nj,useDeferredValue:function(t){var e=Ns();return _A(e,Tr.memoizedState,t)},useTransition:function(){var t=e0(Wh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:lA,useSyncExternalStore:cA,useId:jA,unstable_isNewReconciler:!1},LU={readContext:js,useCallback:wA,useContext:js,useEffect:rj,useImperativeHandle:yA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:bA,useReducer:t0,useRef:pA,useState:function(){return t0(Wh)},useDebugValue:nj,useDeferredValue:function(t){var e=Ns();return Tr===null?e.memoizedState=t:_A(e,Tr.memoizedState,t)},useTransition:function(){var t=t0(Wh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:lA,useSyncExternalStore:cA,useId:jA,unstable_isNewReconciler:!1};function Ps(t,e){if(t&&t.defaultProps){e=lr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Vw(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Kv={isMounted:function(t){return(t=t._reactInternals)?Gl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=yn(),i=ho(t),a=ta(n,i);a.payload=e,r!=null&&(a.callback=r),e=co(t,a,i),e!==null&&(Bs(e,t,i,n),Vp(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=yn(),i=ho(t),a=ta(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=co(t,a,i),e!==null&&(Bs(e,t,i,n),Vp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=yn(),n=ho(t),i=ta(r,n);i.tag=2,e!=null&&(i.callback=e),e=co(t,i,n),e!==null&&(Bs(e,t,n,r),Vp(e,t,n))}};function OE(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Vh(r,n)||!Vh(i,a):!0}function CA(t,e,r){var n=!1,i=bo,a=e.contextType;return typeof a=="object"&&a!==null?a=js(a):(i=Fn(e)?Sl:ln.current,n=e.contextTypes,a=(n=n!=null)?yu(t,i):bo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ME(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Kv.enqueueReplaceState(e,e.state,null)}function Fw(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Y_(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=js(a):(a=Fn(e)?Sl:ln.current,i.context=yu(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Vw(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kv.enqueueReplaceState(i,i.state,null),Cg(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ju(t,e){try{var r="",n=e;do r+=dF(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function r0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Uw(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var VU=typeof WeakMap=="function"?WeakMap:Map;function TA(t,e,r){r=ta(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Rg||(Rg=!0,Jw=n),Uw(t,e)},r}function kA(t,e,r){r=ta(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Uw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Uw(t,e),typeof n!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function LE(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new VU;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=QU.bind(null,t,e,r),e.then(t,t))}function VE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function FE(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ta(-1,1),e.tag=2,co(r,e,1))),r.lanes|=1),t)}var FU=Ea.ReactCurrentOwner,Dn=!1;function gn(t,e,r,n){e.child=t===null?sA(e,null,r,n):bu(e,t.child,r,n)}function UE(t,e,r,n,i){r=r.render;var a=e.ref;return ru(e,i),n=ej(t,e,r,n,a,i),r=tj(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(tr&&r&&z_(e),e.flags|=1,gn(t,e,n,i),e.child)}function $E(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!dj(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,IA(t,e,a,n,i)):(t=qp(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Vh,r(o,n)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=fo(a,n),t.ref=e.ref,t.return=e,e.child=t}function IA(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Vh(a,n)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,da(t,e,i)}return $w(t,e,r,n,i)}function AA(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(Gc,Yn),Yn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ut(Gc,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ut(Gc,Yn),Yn|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ut(Gc,Yn),Yn|=n;return gn(t,e,i,r),e.child}function RA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $w(t,e,r,n,i){var a=Fn(r)?Sl:ln.current;return a=yu(e,a),ru(e,i),r=ej(t,e,r,n,a,i),n=tj(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(tr&&n&&z_(e),e.flags|=1,gn(t,e,r,i),e.child)}function zE(t,e,r,n,i){if(Fn(r)){var a=!0;_g(e)}else a=!1;if(ru(e,i),e.stateNode===null)$p(t,e),CA(e,r,n),Fw(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=js(u):(u=Fn(r)?Sl:ln.current,u=yu(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ME(e,o,n,u),za=!1;var m=e.memoizedState;o.state=m,Cg(e,n,o,i),c=e.memoizedState,l!==n||m!==c||Vn.current||za?(typeof d=="function"&&(Vw(e,r,d,n),c=e.memoizedState),(l=za||OE(e,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,aA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ps(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=js(c):(c=Fn(r)?Sl:ln.current,c=yu(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&ME(e,o,n,c),za=!1,m=e.memoizedState,o.state=m,Cg(e,n,o,i);var x=e.memoizedState;l!==h||m!==x||Vn.current||za?(typeof g=="function"&&(Vw(e,r,g,n),x=e.memoizedState),(u=za||OE(e,r,u,n,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return zw(t,e,r,n,a,i)}function zw(t,e,r,n,i,a){RA(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&CE(e,r,!1),da(t,e,a);n=e.stateNode,FU.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=bu(e,t.child,null,a),e.child=bu(e,null,l,a)):gn(t,e,l,a),e.memoizedState=n.state,i&&CE(e,r,!0),e.child}function PA(t){var e=t.stateNode;e.pendingContext?EE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&EE(t,e.context,!1),J_(t,e.containerInfo)}function BE(t,e,r,n,i){return wu(),q_(i),e.flags|=256,gn(t,e,r,n),e.child}var Bw={dehydrated:null,treeContext:null,retryLane:0};function qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function DA(t,e,r){var n=e.pendingProps,i=ir.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ut(ir,i&1),t===null)return Mw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Xv(o,n,0,null),t=xl(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=qw(r),e.memoizedState=Bw,t):sj(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return UU(t,e,o,n,l,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=fo(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=fo(l,a):(a=xl(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?qw(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Bw,n}return a=t.child,t=a.sibling,n=fo(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sj(t,e){return e=Xv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rp(t,e,r,n){return n!==null&&q_(n),bu(e,t.child,null,r),t=sj(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UU(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=r0(Error(ae(422))),rp(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Xv({mode:"visible",children:n.children},i,0,null),a=xl(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&bu(e,t.child,null,o),e.child.memoizedState=qw(o),e.memoizedState=Bw,a);if(!(e.mode&1))return rp(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ae(419)),n=r0(a,n,void 0),rp(t,e,o,n)}if(l=(o&t.childLanes)!==0,Dn||l){if(n=Lr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ua(t,i),Bs(n,t,i,-1))}return uj(),n=r0(Error(ae(421))),rp(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ZU.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Xn=lo(i.nextSibling),es=e,tr=!0,Ms=null,t!==null&&(ps[gs++]=Ki,ps[gs++]=Yi,ps[gs++]=El,Ki=t.id,Yi=t.overflow,El=e),e=sj(e,n.children),e.flags|=4096,e)}function qE(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lw(t.return,e,r)}function n0(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function OA(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(gn(t,e,n.children,r),n=ir.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qE(t,r,e);else if(t.tag===19)qE(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ut(ir,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Tg(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),n0(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Tg(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}n0(e,!0,r,null,a);break;case"together":n0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $p(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Tl|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=fo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=fo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function $U(t,e,r){switch(e.tag){case 3:PA(e),wu();break;case 5:oA(e);break;case 1:Fn(e.type)&&_g(e);break;case 4:J_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ut(Sg,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ut(ir,ir.current&1),e.flags|=128,null):r&e.child.childLanes?DA(t,e,r):(Ut(ir,ir.current&1),t=da(t,e,r),t!==null?t.sibling:null);Ut(ir,ir.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return OA(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ut(ir,ir.current),n)break;return null;case 22:case 23:return e.lanes=0,AA(t,e,r)}return da(t,e,r)}var MA,Ww,LA,VA;MA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ww=function(){};LA=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,fl(vi.current);var a=null;switch(r){case"input":i=fw(t,i),n=fw(t,n),a=[];break;case"select":i=lr({},i,{value:void 0}),n=lr({},n,{value:void 0}),a=[];break;case"textarea":i=gw(t,i),n=gw(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=wg)}xw(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ah.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ah.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Kt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};VA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Md(t,e){if(!tr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function zU(t,e,r){var n=e.pendingProps;switch(B_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return Fn(e.type)&&bg(),Qr(e),null;case 3:return n=e.stateNode,_u(),Jt(Vn),Jt(ln),Q_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ep(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ms!==null&&(Zw(Ms),Ms=null))),Ww(t,e),Qr(e),null;case 5:X_(e);var i=fl(Bh.current);if(r=e.type,t!==null&&e.stateNode!=null)LA(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ae(166));return Qr(e),null}if(t=fl(vi.current),ep(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[ci]=e,n[$h]=a,t=(e.mode&1)!==0,r){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(i=0;i<Yd.length;i++)Kt(Yd[i],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":ZS(n,a),Kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Kt("invalid",n);break;case"textarea":tE(n,a),Kt("invalid",n)}xw(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Zm(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Zm(n.textContent,l,t),i=["children",""+l]):Ah.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Kt("scroll",n)}switch(r){case"input":Wm(n),eE(n,a,!0);break;case"textarea":Wm(n),rE(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=wg)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ci]=e,t[$h]=n,MA(t,e,!1,!1),e.stateNode=t;e:{switch(o=yw(r,n),r){case"dialog":Kt("cancel",t),Kt("close",t),i=n;break;case"iframe":case"object":case"embed":Kt("load",t),i=n;break;case"video":case"audio":for(i=0;i<Yd.length;i++)Kt(Yd[i],t);i=n;break;case"source":Kt("error",t),i=n;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),i=n;break;case"details":Kt("toggle",t),i=n;break;case"input":ZS(t,n),i=fw(t,n),Kt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=lr({},n,{value:void 0}),Kt("invalid",t);break;case"textarea":tE(t,n),i=gw(t,n),Kt("invalid",t);break;default:i=n}xw(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?pI(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fI(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Rh(t,c):typeof c=="number"&&Rh(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ah.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Kt("scroll",t):c!=null&&T_(t,a,c,o))}switch(r){case"input":Wm(t),eE(t,n,!1);break;case"textarea":Wm(t),rE(t);break;case"option":n.value!=null&&t.setAttribute("value",""+wo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Qc(t,!!n.multiple,a,!1):n.defaultValue!=null&&Qc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)VA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ae(166));if(r=fl(Bh.current),fl(vi.current),ep(e)){if(n=e.stateNode,r=e.memoizedProps,n[ci]=e,(a=n.nodeValue!==r)&&(t=es,t!==null))switch(t.tag){case 3:Zm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zm(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ci]=e,e.stateNode=n}return Qr(e),null;case 13:if(Jt(ir),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tr&&Xn!==null&&e.mode&1&&!(e.flags&128))rA(),wu(),e.flags|=98560,a=!1;else if(a=ep(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[ci]=e}else wu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),a=!1}else Ms!==null&&(Zw(Ms),Ms=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ir.current&1?kr===0&&(kr=3):uj())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return _u(),Ww(t,e),t===null&&Fh(e.stateNode.containerInfo),Qr(e),null;case 10:return G_(e.type._context),Qr(e),null;case 17:return Fn(e.type)&&bg(),Qr(e),null;case 19:if(Jt(ir),a=e.memoizedState,a===null)return Qr(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Md(a,!1);else{if(kr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tg(t),o!==null){for(e.flags|=128,Md(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ut(ir,ir.current&1|2),e.child}t=t.sibling}a.tail!==null&&mr()>Nu&&(e.flags|=128,n=!0,Md(a,!1),e.lanes=4194304)}else{if(!n)if(t=Tg(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Md(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!tr)return Qr(e),null}else 2*mr()-a.renderingStartTime>Nu&&r!==1073741824&&(e.flags|=128,n=!0,Md(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=mr(),e.sibling=null,r=ir.current,Ut(ir,n?r&1|2:r&1),e):(Qr(e),null);case 22:case 23:return cj(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Yn&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function BU(t,e){switch(B_(e),e.tag){case 1:return Fn(e.type)&&bg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _u(),Jt(Vn),Jt(ln),Q_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X_(e),null;case 13:if(Jt(ir),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));wu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Jt(ir),null;case 4:return _u(),null;case 10:return G_(e.type._context),null;case 22:case 23:return cj(),null;case 24:return null;default:return null}}var np=!1,rn=!1,qU=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Hc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dr(t,e,n)}else r.current=null}function Hw(t,e,r){try{r()}catch(n){dr(t,e,n)}}var WE=!1;function WU(t,e){if(kw=vg,t=BI(),$_(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===r&&++u===i&&(l=o),m===a&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Iw={focusedElem:t,selectionRange:r},vg=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,_=x.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ps(e.type,y),_);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(E){dr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return x=WE,WE=!1,x}function fh(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Hw(e,r,a)}i=i.next}while(i!==n)}}function Yv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Gw(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function FA(t){var e=t.alternate;e!==null&&(t.alternate=null,FA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ci],delete e[$h],delete e[Pw],delete e[CU],delete e[TU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UA(t){return t.tag===5||t.tag===3||t.tag===4}function HE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=wg));else if(n!==4&&(t=t.child,t!==null))for(Kw(t,e,r),t=t.sibling;t!==null;)Kw(t,e,r),t=t.sibling}function Yw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Yw(t,e,r),t=t.sibling;t!==null;)Yw(t,e,r),t=t.sibling}var $r=null,Ds=!1;function Da(t,e,r){for(r=r.child;r!==null;)$A(t,e,r),r=r.sibling}function $A(t,e,r){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount($v,r)}catch{}switch(r.tag){case 5:rn||Hc(r,e);case 6:var n=$r,i=Ds;$r=null,Da(t,e,r),$r=n,Ds=i,$r!==null&&(Ds?(t=$r,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$r.removeChild(r.stateNode));break;case 18:$r!==null&&(Ds?(t=$r,r=r.stateNode,t.nodeType===8?Jy(t.parentNode,r):t.nodeType===1&&Jy(t,r),Mh(t)):Jy($r,r.stateNode));break;case 4:n=$r,i=Ds,$r=r.stateNode.containerInfo,Ds=!0,Da(t,e,r),$r=n,Ds=i;break;case 0:case 11:case 14:case 15:if(!rn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Hw(r,e,o),i=i.next}while(i!==n)}Da(t,e,r);break;case 1:if(!rn&&(Hc(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){dr(r,e,l)}Da(t,e,r);break;case 21:Da(t,e,r);break;case 22:r.mode&1?(rn=(n=rn)||r.memoizedState!==null,Da(t,e,r),rn=n):Da(t,e,r);break;default:Da(t,e,r)}}function GE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qU),e.forEach(function(n){var i=e$.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ks(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$r=l.stateNode,Ds=!1;break e;case 3:$r=l.stateNode.containerInfo,Ds=!0;break e;case 4:$r=l.stateNode.containerInfo,Ds=!0;break e}l=l.return}if($r===null)throw Error(ae(160));$A(a,o,i),$r=null,Ds=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){dr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zA(e,t),e=e.sibling}function zA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ks(e,t),ii(t),n&4){try{fh(3,t,t.return),Yv(3,t)}catch(y){dr(t,t.return,y)}try{fh(5,t,t.return)}catch(y){dr(t,t.return,y)}}break;case 1:ks(e,t),ii(t),n&512&&r!==null&&Hc(r,r.return);break;case 5:if(ks(e,t),ii(t),n&512&&r!==null&&Hc(r,r.return),t.flags&32){var i=t.stateNode;try{Rh(i,"")}catch(y){dr(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&uI(i,a),yw(l,o);var u=yw(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?pI(i,h):d==="dangerouslySetInnerHTML"?fI(i,h):d==="children"?Rh(i,h):T_(i,d,h,u)}switch(l){case"input":mw(i,a);break;case"textarea":dI(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Qc(i,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Qc(i,!!a.multiple,a.defaultValue,!0):Qc(i,!!a.multiple,a.multiple?[]:"",!1))}i[$h]=a}catch(y){dr(t,t.return,y)}}break;case 6:if(ks(e,t),ii(t),n&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){dr(t,t.return,y)}}break;case 3:if(ks(e,t),ii(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mh(e.containerInfo)}catch(y){dr(t,t.return,y)}break;case 4:ks(e,t),ii(t);break;case 13:ks(e,t),ii(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(oj=mr())),n&4&&GE(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(rn=(u=rn)||d,ks(e,t),rn=u):ks(e,t),ii(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ke=t,d=t.child;d!==null;){for(h=ke=d;ke!==null;){switch(m=ke,g=m.child,m.tag){case 0:case 11:case 14:case 15:fh(4,m,m.return);break;case 1:Hc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){dr(n,r,y)}}break;case 5:Hc(m,m.return);break;case 22:if(m.memoizedState!==null){YE(h);continue}}g!==null?(g.return=m,ke=g):YE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=mI("display",o))}catch(y){dr(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){dr(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ks(e,t),ii(t),n&4&&GE(t);break;case 21:break;default:ks(e,t),ii(t)}}function ii(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(UA(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Rh(i,""),n.flags&=-33);var a=HE(t);Yw(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=HE(t);Kw(t,l,o);break;default:throw Error(ae(161))}}catch(c){dr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HU(t,e,r){ke=t,BA(t)}function BA(t,e,r){for(var n=(t.mode&1)!==0;ke!==null;){var i=ke,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||np;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||rn;l=np;var u=rn;if(np=o,(rn=c)&&!u)for(ke=i;ke!==null;)o=ke,c=o.child,o.tag===22&&o.memoizedState!==null?JE(i):c!==null?(c.return=o,ke=c):JE(i);for(;a!==null;)ke=a,BA(a),a=a.sibling;ke=i,np=l,rn=u}KE(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ke=a):KE(t)}}function KE(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Yv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!rn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ps(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&RE(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}RE(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Mh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}rn||e.flags&512&&Gw(e)}catch(m){dr(e,e.return,m)}}if(e===t){ke=null;break}if(r=e.sibling,r!==null){r.return=e.return,ke=r;break}ke=e.return}}function YE(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ke=r;break}ke=e.return}}function JE(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yv(4,e)}catch(c){dr(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){dr(e,i,c)}}var a=e.return;try{Gw(e)}catch(c){dr(e,a,c)}break;case 5:var o=e.return;try{Gw(e)}catch(c){dr(e,o,c)}}}catch(c){dr(e,e.return,c)}if(e===t){ke=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ke=l;break}ke=e.return}}var GU=Math.ceil,Ag=Ea.ReactCurrentDispatcher,ij=Ea.ReactCurrentOwner,ys=Ea.ReactCurrentBatchConfig,Ct=0,Lr=null,wr=null,qr=0,Yn=0,Gc=Mo(0),kr=0,Gh=null,Tl=0,Jv=0,aj=0,mh=null,In=null,oj=0,Nu=1/0,Bi=null,Rg=!1,Jw=null,uo=null,sp=!1,ro=null,Pg=0,ph=0,Xw=null,zp=-1,Bp=0;function yn(){return Ct&6?mr():zp!==-1?zp:zp=mr()}function ho(t){return t.mode&1?Ct&2&&qr!==0?qr&-qr:IU.transition!==null?(Bp===0&&(Bp=CI()),Bp):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:DI(t.type)),t):1}function Bs(t,e,r,n){if(50<ph)throw ph=0,Xw=null,Error(ae(185));Df(t,r,n),(!(Ct&2)||t!==Lr)&&(t===Lr&&(!(Ct&2)&&(Jv|=r),kr===4&&Wa(t,qr)),Un(t,n),r===1&&Ct===0&&!(e.mode&1)&&(Nu=mr()+500,Hv&&Lo()))}function Un(t,e){var r=t.callbackNode;IF(t,e);var n=gg(t,t===Lr?qr:0);if(n===0)r!==null&&iE(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&iE(r),e===1)t.tag===0?kU(XE.bind(null,t)):ZI(XE.bind(null,t)),SU(function(){!(Ct&6)&&Lo()}),r=null;else{switch(TI(n)){case 1:r=P_;break;case 4:r=SI;break;case 16:r=pg;break;case 536870912:r=EI;break;default:r=pg}r=XA(r,qA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function qA(t,e){if(zp=-1,Bp=0,Ct&6)throw Error(ae(327));var r=t.callbackNode;if(nu()&&t.callbackNode!==r)return null;var n=gg(t,t===Lr?qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Dg(t,n);else{e=n;var i=Ct;Ct|=2;var a=HA();(Lr!==t||qr!==e)&&(Bi=null,Nu=mr()+500,vl(t,e));do try{JU();break}catch(l){WA(t,l)}while(!0);H_(),Ag.current=a,Ct=i,wr!==null?e=0:(Lr=null,qr=0,e=kr)}if(e!==0){if(e===2&&(i=Nw(t),i!==0&&(n=i,e=Qw(t,i))),e===1)throw r=Gh,vl(t,0),Wa(t,n),Un(t,mr()),r;if(e===6)Wa(t,n);else{if(i=t.current.alternate,!(n&30)&&!KU(i)&&(e=Dg(t,n),e===2&&(a=Nw(t),a!==0&&(n=a,e=Qw(t,a))),e===1))throw r=Gh,vl(t,0),Wa(t,n),Un(t,mr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ae(345));case 2:al(t,In,Bi);break;case 3:if(Wa(t,n),(n&130023424)===n&&(e=oj+500-mr(),10<e)){if(gg(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rw(al.bind(null,t,In,Bi),e);break}al(t,In,Bi);break;case 4:if(Wa(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-zs(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GU(n/1960))-n,10<n){t.timeoutHandle=Rw(al.bind(null,t,In,Bi),n);break}al(t,In,Bi);break;case 5:al(t,In,Bi);break;default:throw Error(ae(329))}}}return Un(t,mr()),t.callbackNode===r?qA.bind(null,t):null}function Qw(t,e){var r=mh;return t.current.memoizedState.isDehydrated&&(vl(t,e).flags|=256),t=Dg(t,e),t!==2&&(e=In,In=r,e!==null&&Zw(e)),t}function Zw(t){In===null?In=t:In.push.apply(In,t)}function KU(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Ks(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e){for(e&=~aj,e&=~Jv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zs(e),n=1<<r;t[r]=-1,e&=~n}}function XE(t){if(Ct&6)throw Error(ae(327));nu();var e=gg(t,0);if(!(e&1))return Un(t,mr()),null;var r=Dg(t,e);if(t.tag!==0&&r===2){var n=Nw(t);n!==0&&(e=n,r=Qw(t,n))}if(r===1)throw r=Gh,vl(t,0),Wa(t,e),Un(t,mr()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,al(t,In,Bi),Un(t,mr()),null}function lj(t,e){var r=Ct;Ct|=1;try{return t(e)}finally{Ct=r,Ct===0&&(Nu=mr()+500,Hv&&Lo())}}function kl(t){ro!==null&&ro.tag===0&&!(Ct&6)&&nu();var e=Ct;Ct|=1;var r=ys.transition,n=Pt;try{if(ys.transition=null,Pt=1,t)return t()}finally{Pt=n,ys.transition=r,Ct=e,!(Ct&6)&&Lo()}}function cj(){Yn=Gc.current,Jt(Gc)}function vl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,NU(r)),wr!==null)for(r=wr.return;r!==null;){var n=r;switch(B_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bg();break;case 3:_u(),Jt(Vn),Jt(ln),Q_();break;case 5:X_(n);break;case 4:_u();break;case 13:Jt(ir);break;case 19:Jt(ir);break;case 10:G_(n.type._context);break;case 22:case 23:cj()}r=r.return}if(Lr=t,wr=t=fo(t.current,null),qr=Yn=e,kr=0,Gh=null,aj=Jv=Tl=0,In=mh=null,hl!==null){for(e=0;e<hl.length;e++)if(r=hl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}hl=null}return t}function WA(t,e){do{var r=wr;try{if(H_(),Fp.current=Ig,kg){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kg=!1}if(Cl=0,Or=Tr=or=null,hh=!1,qh=0,ij.current=null,r===null||r.return===null){kr=1,Gh=e,wr=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=qr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=VE(o);if(g!==null){g.flags&=-257,FE(g,o,l,a,e),g.mode&1&&LE(a,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var y=new Set;y.add(c),e.updateQueue=y}else x.add(c);break e}else{if(!(e&1)){LE(a,u,e),uj();break e}c=Error(ae(426))}}else if(tr&&l.mode&1){var _=VE(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),FE(_,o,l,a,e),q_(ju(c,l));break e}}a=c=ju(c,l),kr!==4&&(kr=2),mh===null?mh=[a]:mh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=TA(a,c,e);AE(a,b);break e;case 1:l=c;var v=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(uo===null||!uo.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=kA(a,l,e);AE(a,E);break e}}a=a.return}while(a!==null)}KA(r)}catch(C){e=C,wr===r&&r!==null&&(wr=r=r.return);continue}break}while(!0)}function HA(){var t=Ag.current;return Ag.current=Ig,t===null?Ig:t}function uj(){(kr===0||kr===3||kr===2)&&(kr=4),Lr===null||!(Tl&268435455)&&!(Jv&268435455)||Wa(Lr,qr)}function Dg(t,e){var r=Ct;Ct|=2;var n=HA();(Lr!==t||qr!==e)&&(Bi=null,vl(t,e));do try{YU();break}catch(i){WA(t,i)}while(!0);if(H_(),Ct=r,Ag.current=n,wr!==null)throw Error(ae(261));return Lr=null,qr=0,kr}function YU(){for(;wr!==null;)GA(wr)}function JU(){for(;wr!==null&&!bF();)GA(wr)}function GA(t){var e=JA(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?KA(t):wr=e,ij.current=null}function KA(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=BU(r,e),r!==null){r.flags&=32767,wr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kr=6,wr=null;return}}else if(r=zU(r,e,Yn),r!==null){wr=r;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=t}while(e!==null);kr===0&&(kr=5)}function al(t,e,r){var n=Pt,i=ys.transition;try{ys.transition=null,Pt=1,XU(t,e,r,n)}finally{ys.transition=i,Pt=n}return null}function XU(t,e,r,n){do nu();while(ro!==null);if(Ct&6)throw Error(ae(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(AF(t,a),t===Lr&&(wr=Lr=null,qr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||sp||(sp=!0,XA(pg,function(){return nu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ys.transition,ys.transition=null;var o=Pt;Pt=1;var l=Ct;Ct|=4,ij.current=null,WU(t,r),zA(r,t),vU(Iw),vg=!!kw,Iw=kw=null,t.current=r,HU(r),_F(),Ct=l,Pt=o,ys.transition=a}else t.current=r;if(sp&&(sp=!1,ro=t,Pg=i),a=t.pendingLanes,a===0&&(uo=null),SF(r.stateNode),Un(t,mr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Rg)throw Rg=!1,t=Jw,Jw=null,t;return Pg&1&&t.tag!==0&&nu(),a=t.pendingLanes,a&1?t===Xw?ph++:(ph=0,Xw=t):ph=0,Lo(),null}function nu(){if(ro!==null){var t=TI(Pg),e=ys.transition,r=Pt;try{if(ys.transition=null,Pt=16>t?16:t,ro===null)var n=!1;else{if(t=ro,ro=null,Pg=0,Ct&6)throw Error(ae(331));var i=Ct;for(Ct|=4,ke=t.current;ke!==null;){var a=ke,o=a.child;if(ke.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:fh(8,d,a)}var h=d.child;if(h!==null)h.return=d,ke=h;else for(;ke!==null;){d=ke;var m=d.sibling,g=d.return;if(FA(d),d===u){ke=null;break}if(m!==null){m.return=g,ke=m;break}ke=g}}}var x=a.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}ke=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ke=o;else e:for(;ke!==null;){if(a=ke,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fh(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ke=b;break e}ke=a.return}}var v=t.current;for(ke=v;ke!==null;){o=ke;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ke=w;else e:for(o=v;ke!==null;){if(l=ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yv(9,l)}}catch(C){dr(l,l.return,C)}if(l===o){ke=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,ke=E;break e}ke=l.return}}if(Ct=i,Lo(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot($v,t)}catch{}n=!0}return n}finally{Pt=r,ys.transition=e}}return!1}function QE(t,e,r){e=ju(r,e),e=TA(t,e,1),t=co(t,e,1),e=yn(),t!==null&&(Df(t,1,e),Un(t,e))}function dr(t,e,r){if(t.tag===3)QE(t,t,r);else for(;e!==null;){if(e.tag===3){QE(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(uo===null||!uo.has(n))){t=ju(r,t),t=kA(e,t,1),e=co(e,t,1),t=yn(),e!==null&&(Df(e,1,t),Un(e,t));break}}e=e.return}}function QU(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&r,Lr===t&&(qr&r)===r&&(kr===4||kr===3&&(qr&130023424)===qr&&500>mr()-oj?vl(t,0):aj|=r),Un(t,e)}function YA(t,e){e===0&&(t.mode&1?(e=Km,Km<<=1,!(Km&130023424)&&(Km=4194304)):e=1);var r=yn();t=ua(t,e),t!==null&&(Df(t,e,r),Un(t,r))}function ZU(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),YA(t,r)}function e$(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(e),YA(t,r)}var JA;JA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vn.current)Dn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Dn=!1,$U(t,e,r);Dn=!!(t.flags&131072)}else Dn=!1,tr&&e.flags&1048576&&eA(e,Ng,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$p(t,e),t=e.pendingProps;var i=yu(e,ln.current);ru(e,r),i=ej(null,e,n,t,i,r);var a=tj();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(n)?(a=!0,_g(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Y_(e),i.updater=Kv,e.stateNode=i,i._reactInternals=e,Fw(e,n,t,r),e=zw(null,e,n,!0,a,r)):(e.tag=0,tr&&a&&z_(e),gn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch($p(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=r$(n),t=Ps(n,t),i){case 0:e=$w(null,e,n,t,r);break e;case 1:e=zE(null,e,n,t,r);break e;case 11:e=UE(null,e,n,t,r);break e;case 14:e=$E(null,e,n,Ps(n.type,t),r);break e}throw Error(ae(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),$w(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),zE(t,e,n,i,r);case 3:e:{if(PA(e),t===null)throw Error(ae(387));n=e.pendingProps,a=e.memoizedState,i=a.element,aA(t,e),Cg(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ju(Error(ae(423)),e),e=BE(t,e,n,r,i);break e}else if(n!==i){i=ju(Error(ae(424)),e),e=BE(t,e,n,r,i);break e}else for(Xn=lo(e.stateNode.containerInfo.firstChild),es=e,tr=!0,Ms=null,r=sA(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wu(),n===i){e=da(t,e,r);break e}gn(t,e,n,r)}e=e.child}return e;case 5:return oA(e),t===null&&Mw(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Aw(n,i)?o=null:a!==null&&Aw(n,a)&&(e.flags|=32),RA(t,e),gn(t,e,o,r),e.child;case 6:return t===null&&Mw(e),null;case 13:return DA(t,e,r);case 4:return J_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bu(e,null,n,r):gn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),UE(t,e,n,i,r);case 7:return gn(t,e,e.pendingProps,r),e.child;case 8:return gn(t,e,e.pendingProps.children,r),e.child;case 12:return gn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ut(Sg,n._currentValue),n._currentValue=o,a!==null)if(Ks(a.value,o)){if(a.children===i.children&&!Vn.current){e=da(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ta(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Lw(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Lw(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}gn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ru(e,r),i=js(i),n=n(i),e.flags|=1,gn(t,e,n,r),e.child;case 14:return n=e.type,i=Ps(n,e.pendingProps),i=Ps(n.type,i),$E(t,e,n,i,r);case 15:return IA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),$p(t,e),e.tag=1,Fn(n)?(t=!0,_g(e)):t=!1,ru(e,r),CA(e,n,i),Fw(e,n,i,r),zw(null,e,n,!0,t,r);case 19:return OA(t,e,r);case 22:return AA(t,e,r)}throw Error(ae(156,e.tag))};function XA(t,e){return NI(t,e)}function t$(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(t,e,r,n){return new t$(t,e,r,n)}function dj(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r$(t){if(typeof t=="function")return dj(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I_)return 11;if(t===A_)return 14}return 2}function fo(t,e){var r=t.alternate;return r===null?(r=xs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function qp(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")dj(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Lc:return xl(r.children,i,a,e);case k_:o=8,i|=8;break;case cw:return t=xs(12,r,e,i|2),t.elementType=cw,t.lanes=a,t;case uw:return t=xs(13,r,e,i),t.elementType=uw,t.lanes=a,t;case dw:return t=xs(19,r,e,i),t.elementType=dw,t.lanes=a,t;case oI:return Xv(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iI:o=10;break e;case aI:o=9;break e;case I_:o=11;break e;case A_:o=14;break e;case $a:o=16,n=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=xs(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function xl(t,e,r,n){return t=xs(7,t,n,e),t.lanes=r,t}function Xv(t,e,r,n){return t=xs(22,t,n,e),t.elementType=oI,t.lanes=r,t.stateNode={isHidden:!1},t}function s0(t,e,r){return t=xs(6,t,null,e),t.lanes=r,t}function i0(t,e,r){return e=xs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n$(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fy(0),this.expirationTimes=Fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fy(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hj(t,e,r,n,i,a,o,l,c){return t=new n$(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=xs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y_(a),t}function s$(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mc,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function QA(t){if(!t)return bo;t=t._reactInternals;e:{if(Gl(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(Fn(r))return QI(t,r,e)}return e}function ZA(t,e,r,n,i,a,o,l,c){return t=hj(r,n,!0,t,i,a,o,l,c),t.context=QA(null),r=t.current,n=yn(),i=ho(r),a=ta(n,i),a.callback=e??null,co(r,a,i),t.current.lanes=i,Df(t,i,n),Un(t,n),t}function Qv(t,e,r,n){var i=e.current,a=yn(),o=ho(i);return r=QA(r),e.context===null?e.context=r:e.pendingContext=r,e=ta(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=co(i,e,o),t!==null&&(Bs(t,i,o,a),Vp(t,i,o)),o}function Og(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function fj(t,e){ZE(t,e),(t=t.alternate)&&ZE(t,e)}function i$(){return null}var eR=typeof reportError=="function"?reportError:function(t){console.error(t)};function mj(t){this._internalRoot=t}Zv.prototype.render=mj.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Qv(t,e,null,null)};Zv.prototype.unmount=mj.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kl(function(){Qv(null,t,null,null)}),e[ca]=null}};function Zv(t){this._internalRoot=t}Zv.prototype.unstable_scheduleHydration=function(t){if(t){var e=AI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<qa.length&&e!==0&&e<qa[r].priority;r++);qa.splice(r,0,t),r===0&&PI(t)}};function pj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ex(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eC(){}function a$(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Og(o);a.call(u)}}var o=ZA(e,n,t,0,null,!1,!1,"",eC);return t._reactRootContainer=o,t[ca]=o.current,Fh(t.nodeType===8?t.parentNode:t),kl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Og(c);l.call(u)}}var c=hj(t,0,!1,null,null,!1,!1,"",eC);return t._reactRootContainer=c,t[ca]=c.current,Fh(t.nodeType===8?t.parentNode:t),kl(function(){Qv(e,c,r,n)}),c}function tx(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Og(o);l.call(c)}}Qv(e,o,t,i)}else o=a$(r,e,t,i,n);return Og(o)}kI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Kd(e.pendingLanes);r!==0&&(D_(e,r|1),Un(e,mr()),!(Ct&6)&&(Nu=mr()+500,Lo()))}break;case 13:kl(function(){var n=ua(t,1);if(n!==null){var i=yn();Bs(n,t,1,i)}}),fj(t,1)}};O_=function(t){if(t.tag===13){var e=ua(t,134217728);if(e!==null){var r=yn();Bs(e,t,134217728,r)}fj(t,134217728)}};II=function(t){if(t.tag===13){var e=ho(t),r=ua(t,e);if(r!==null){var n=yn();Bs(r,t,e,n)}fj(t,e)}};AI=function(){return Pt};RI=function(t,e){var r=Pt;try{return Pt=t,e()}finally{Pt=r}};bw=function(t,e,r){switch(e){case"input":if(mw(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Wv(n);if(!i)throw Error(ae(90));cI(n),mw(n,i)}}}break;case"textarea":dI(t,r);break;case"select":e=r.value,e!=null&&Qc(t,!!r.multiple,e,!1)}};xI=lj;yI=kl;var o$={usingClientEntryPoint:!1,Events:[Mf,$c,Wv,gI,vI,lj]},Ld={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l$={bundleType:Ld.bundleType,version:Ld.version,rendererPackageName:Ld.rendererPackageName,rendererConfig:Ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_I(t),t===null?null:t.stateNode},findFiberByHostInstance:Ld.findFiberByHostInstance||i$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ip=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ip.isDisabled&&ip.supportsFiber)try{$v=ip.inject(l$),gi=ip}catch{}}us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o$;us.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pj(e))throw Error(ae(200));return s$(t,e,null,r)};us.createRoot=function(t,e){if(!pj(t))throw Error(ae(299));var r=!1,n="",i=eR;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hj(t,1,!1,null,null,r,!1,n,i),t[ca]=e.current,Fh(t.nodeType===8?t.parentNode:t),new mj(e)};us.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=_I(e),t=t===null?null:t.stateNode,t};us.flushSync=function(t){return kl(t)};us.hydrate=function(t,e,r){if(!ex(e))throw Error(ae(200));return tx(null,t,e,!0,r)};us.hydrateRoot=function(t,e,r){if(!pj(t))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=eR;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=ZA(e,null,t,1,r??null,i,!1,a,o),t[ca]=e.current,Fh(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Zv(e)};us.render=function(t,e,r){if(!ex(e))throw Error(ae(200));return tx(null,t,e,!1,r)};us.unmountComponentAtNode=function(t){if(!ex(t))throw Error(ae(40));return t._reactRootContainer?(kl(function(){tx(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};us.unstable_batchedUpdates=lj;us.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ex(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return tx(t,e,r,!1,n)};us.version="18.3.1-next-f1338f8080-20240426";function tR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tR)}catch(t){console.error(t)}}tR(),tI.exports=us;var Kl=tI.exports;const c$=Fv(Kl);var rR,tC=Kl;rR=tC.createRoot,tC.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kh.apply(this,arguments)}var no;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(no||(no={}));const rC="popstate";function u$(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:l}=n.location;return eb("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Mg(i)}return h$(e,r,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d$(){return Math.random().toString(36).substr(2,8)}function nC(t,e){return{usr:t.state,key:t.key,idx:e}}function eb(t,e,r,n){return r===void 0&&(r=null),Kh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zu(e):e,{state:r,key:e&&e.key||n||d$()})}function Mg(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function h$(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=no.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Kh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=no.Pop;let _=d(),b=_==null?null:_-u;u=_,c&&c({action:l,location:y.location,delta:b})}function m(_,b){l=no.Push;let v=eb(y.location,_,b);u=d()+1;let w=nC(v,u),E=y.createHref(v);try{o.pushState(w,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}a&&c&&c({action:l,location:y.location,delta:1})}function g(_,b){l=no.Replace;let v=eb(y.location,_,b);u=d();let w=nC(v,u),E=y.createHref(v);o.replaceState(w,"",E),a&&c&&c({action:l,location:y.location,delta:0})}function x(_){let b=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof _=="string"?_:Mg(_);return v=v.replace(/ $/,"%20"),gr(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let y={get action(){return l},get location(){return t(i,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(rC,h),c=_,()=>{i.removeEventListener(rC,h),c=null}},createHref(_){return e(i,_)},createURL:x,encodeLocation(_){let b=x(_);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:g,go(_){return o.go(_)}};return y}var sC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sC||(sC={}));function f$(t,e,r){return r===void 0&&(r="/"),m$(t,e,r,!1)}function m$(t,e,r,n){let i=typeof e=="string"?Zu(e):e,a=gj(i.pathname||"/",r);if(a==null)return null;let o=sR(t);p$(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=E$(a);l=N$(o[c],u,n)}return l}function sR(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(gr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=mo([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(gr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sR(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:_$(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of iR(a.path))i(a,o,c)}),e}function iR(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=iR(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function p$(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:j$(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const g$=/^:[\w-]+$/,v$=3,x$=2,y$=1,w$=10,b$=-2,iC=t=>t==="*";function _$(t,e){let r=t.split("/"),n=r.length;return r.some(iC)&&(n+=b$),e&&(n+=x$),r.filter(i=>!iC(i)).reduce((i,a)=>i+(g$.test(a)?v$:a===""?y$:w$),n)}function j$(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function N$(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=aC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=aC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:mo([a,h.pathname]),pathnameBase:I$(mo([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=mo([a,h.pathnameBase]))}return o}function aC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=S$(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function S$(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),nR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function E$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function C$(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Zu(t):t;return{pathname:r?r.startsWith("/")?r:T$(r,e):e,search:A$(n),hash:R$(i)}}function T$(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function a0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k$(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function vj(t,e){let r=k$(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function xj(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Zu(t):(i=Kh({},t),gr(!i.pathname||!i.pathname.includes("?"),a0("?","pathname","search",i)),gr(!i.pathname||!i.pathname.includes("#"),a0("#","pathname","hash",i)),gr(!i.search||!i.search.includes("#"),a0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=C$(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const mo=t=>t.join("/").replace(/\/\/+/g,"/"),I$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,R$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aR=["post","put","patch","delete"];new Set(aR);const D$=["get",...aR];new Set(D$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yh.apply(this,arguments)}const yj=p.createContext(null),O$=p.createContext(null),Vo=p.createContext(null),rx=p.createContext(null),Ca=p.createContext({outlet:null,matches:[],isDataRoute:!1}),oR=p.createContext(null);function M$(t,e){let{relative:r}=e===void 0?{}:e;ed()||gr(!1);let{basename:n,navigator:i}=p.useContext(Vo),{hash:a,pathname:o,search:l}=cR(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:mo([n,o])),i.createHref({pathname:c,search:l,hash:a})}function ed(){return p.useContext(rx)!=null}function Yl(){return ed()||gr(!1),p.useContext(rx).location}function lR(t){p.useContext(Vo).static||p.useLayoutEffect(t)}function Hn(){let{isDataRoute:t}=p.useContext(Ca);return t?J$():L$()}function L$(){ed()||gr(!1);let t=p.useContext(yj),{basename:e,future:r,navigator:n}=p.useContext(Vo),{matches:i}=p.useContext(Ca),{pathname:a}=Yl(),o=JSON.stringify(vj(i,r.v7_relativeSplatPath)),l=p.useRef(!1);return lR(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=xj(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mo([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,a,t])}function V$(){let{matches:t}=p.useContext(Ca),e=t[t.length-1];return e?e.params:{}}function cR(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=p.useContext(Vo),{matches:i}=p.useContext(Ca),{pathname:a}=Yl(),o=JSON.stringify(vj(i,n.v7_relativeSplatPath));return p.useMemo(()=>xj(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function F$(t,e){return U$(t,e)}function U$(t,e,r,n){ed()||gr(!1);let{navigator:i}=p.useContext(Vo),{matches:a}=p.useContext(Ca),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Yl(),d;if(e){var h;let _=typeof e=="string"?Zu(e):e;c==="/"||(h=_.pathname)!=null&&h.startsWith(c)||gr(!1),d=_}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=f$(t,{pathname:g}),y=W$(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:mo([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:mo([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,n);return e&&y?p.createElement(rx.Provider,{value:{location:Yh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:no.Pop}},y):y}function $$(){let t=Y$(),e=P$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),r?p.createElement("pre",{style:i},r):null,null)}const z$=p.createElement($$,null);class B$ extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?p.createElement(Ca.Provider,{value:this.props.routeContext},p.createElement(oR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q$(t){let{routeContext:e,match:r,children:n}=t,i=p.useContext(yj);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Ca.Provider,{value:e},n)}function W$(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=r,x=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let g,x=!1,y=null,_=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||z$,c&&(u<0&&m===0?(x=!0,_=null):u===m&&(x=!0,_=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),v=()=>{let w;return g?w=y:x?w=_:h.route.Component?w=p.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,p.createElement(q$,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(B$,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var uR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uR||{}),Lg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lg||{});function H$(t){let e=p.useContext(yj);return e||gr(!1),e}function G$(t){let e=p.useContext(O$);return e||gr(!1),e}function K$(t){let e=p.useContext(Ca);return e||gr(!1),e}function dR(t){let e=K$(),r=e.matches[e.matches.length-1];return r.route.id||gr(!1),r.route.id}function Y$(){var t;let e=p.useContext(oR),r=G$(Lg.UseRouteError),n=dR(Lg.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function J$(){let{router:t}=H$(uR.UseNavigateStable),e=dR(Lg.UseNavigateStable),r=p.useRef(!1);return lR(()=>{r.current=!0}),p.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Yh({fromRouteId:e},a)))},[t,e])}function X$(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hR(t){let{to:e,replace:r,state:n,relative:i}=t;ed()||gr(!1);let{future:a,static:o}=p.useContext(Vo),{matches:l}=p.useContext(Ca),{pathname:c}=Yl(),u=Hn(),d=xj(e,vj(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function er(t){gr(!1)}function Q$(t){let{basename:e="/",children:r=null,location:n,navigationType:i=no.Pop,navigator:a,static:o=!1,future:l}=t;ed()&&gr(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:o,future:Yh({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Zu(n));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:x="default"}=n,y=p.useMemo(()=>{let _=gj(d,c);return _==null?null:{location:{pathname:_,search:h,hash:m,state:g,key:x},navigationType:i}},[c,d,h,m,g,x,i]);return y==null?null:p.createElement(Vo.Provider,{value:u},p.createElement(rx.Provider,{children:r,value:y}))}function Z$(t){let{children:e,location:r}=t;return F$(tb(e),r)}new Promise(()=>{});function tb(t,e){e===void 0&&(e=[]);let r=[];return p.Children.forEach(t,(n,i)=>{if(!p.isValidElement(n))return;let a=[...e,i];if(n.type===p.Fragment){r.push.apply(r,tb(n.props.children,a));return}n.type!==er&&gr(!1),!n.props.index||!n.props.children||gr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=tb(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rb.apply(this,arguments)}function e8(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function t8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function r8(t,e){return t.button===0&&(!e||e==="_self")&&!t8(t)}function nb(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function n8(t,e){let r=nb(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}const s8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i8="6";try{window.__reactRouterVersion=i8}catch{}const a8="startTransition",oC=Zk[a8];function o8(t){let{basename:e,children:r,future:n,window:i}=t,a=p.useRef();a.current==null&&(a.current=u$({window:i,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&oC?oC(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>X$(n),[n]),p.createElement(Q$,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const l8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=p.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=e8(e,s8),{basename:g}=p.useContext(Vo),x,y=!1;if(typeof u=="string"&&c8.test(u)&&(x=u,l8))try{let w=new URL(window.location.href),E=u.startsWith("//")?new URL(w.protocol+u):new URL(u),C=gj(E.pathname,g);E.origin===w.origin&&C!=null?u=C+E.search+E.hash:y=!0}catch{}let _=M$(u,{relative:i}),b=u8(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||b(w)}return p.createElement("a",rb({},m,{href:x||_,onClick:y||a?n:v,ref:r,target:c}))});var lC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lC||(lC={}));var cC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cC||(cC={}));function u8(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Hn(),u=Yl(),d=cR(t,{relative:o});return p.useCallback(h=>{if(r8(h,r)){h.preventDefault();let m=n!==void 0?n:Mg(u)===Mg(d);c(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,i,r,t,a,o,l])}function wj(t){let e=p.useRef(nb(t)),r=p.useRef(!1),n=Yl(),i=p.useMemo(()=>n8(n.search,r.current?null:e.current),[n.search]),a=Hn(),o=p.useCallback((l,c)=>{const u=nb(typeof l=="function"?l(i):l);r.current=!0,a("?"+u,c)},[a,i]);return[i,o]}var Vg=["light","dark"],bj="(prefers-color-scheme: dark)",d8=typeof window>"u",_j=p.createContext(void 0),h8={setTheme:t=>{},themes:[]},f8=()=>{var t;return(t=p.useContext(_j))!=null?t:h8},m8=t=>p.useContext(_j)?t.children:p.createElement(g8,{...t}),p8=["light","dark"],g8=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:i="theme",themes:a=p8,defaultTheme:o=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=p.useState(()=>uC(i,o)),[g,x]=p.useState(()=>uC(i)),y=c?Object.values(c):a,_=p.useCallback(E=>{let C=E;if(!C)return;E==="system"&&r&&(C=dC());let I=c?c[C]:C,T=e?x8():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...y),I&&k.classList.add(I)):I?k.setAttribute(l,I):k.removeAttribute(l),n){let R=Vg.includes(o)?o:null,j=Vg.includes(C)?C:R;k.style.colorScheme=j}T==null||T()},[]),b=p.useCallback(E=>{let C=typeof E=="function"?E(E):E;m(C);try{localStorage.setItem(i,C)}catch{}},[t]),v=p.useCallback(E=>{let C=dC(E);x(C),h==="system"&&r&&!t&&_("system")},[h,t]);p.useEffect(()=>{let E=window.matchMedia(bj);return E.addListener(v),v(E),()=>E.removeListener(v)},[v]),p.useEffect(()=>{let E=C=>{if(C.key!==i)return;let I=C.newValue||o;b(I)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[b]),p.useEffect(()=>{_(t??h)},[t,h]);let w=p.useMemo(()=>({theme:h,setTheme:b,forcedTheme:t,resolvedTheme:h==="system"?g:h,themes:r?[...a,"system"]:a,systemTheme:r?g:void 0}),[h,b,t,g,r,a]);return p.createElement(_j.Provider,{value:w},p.createElement(v8,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:i,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:y,nonce:d}),u)},v8=p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=i?Vg.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,y=!1,_=!0)=>{let b=o?o[x]:x,v=y?x+"|| ''":`'${b}'`,w="";return i&&_&&!y&&Vg.includes(x)&&(w+=`d.style.colorScheme = '${x}';`),r==="class"?y||b?w+=`c.add(${v})`:w+="null":b&&(w+=`d[s](n,${v})`),w},g=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${bj}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})}),uC=(t,e)=>{if(d8)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},x8=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},dC=t=>(t||(t=window.matchMedia(bj)),t.matches?"dark":"light"),hC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},y8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},mR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||h==null)throw new w8;const m=a<<2|l>>4;if(n.push(m),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const x=u<<6&192|h;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b8=function(t){const e=fR(t);return mR.encodeByteArray(e,!0)},Fg=function(t){return b8(t).replace(/\./g,"")},pR=function(t){try{return mR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=()=>_8().__FIREBASE_DEFAULTS__,N8=()=>{if(typeof process>"u"||typeof hC>"u")return;const t=hC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pR(t[1]);return e&&JSON.parse(e)},nx=()=>{try{return j8()||N8()||S8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gR=t=>{var e,r;return(r=(e=nx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},vR=t=>{const e=gR(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},xR=()=>{var t;return(t=nx())===null||t===void 0?void 0:t.config},yR=t=>{var e;return(e=nx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E8=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fg(JSON.stringify(r)),Fg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function T8(){var t;const e=(t=nx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A8(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function R8(){return!T8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _R(){try{return typeof indexedDB=="object"}catch{return!1}}function jR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function P8(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="FirebaseError";class Es extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=D8,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jl.prototype.create)}}class Jl{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?O8(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Es(i,l,n)}}function O8(t,e){return t.replace(M8,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const M8=/\{\$([^}]+)}/g;function L8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(fC(a)&&fC(o)){if(!Jh(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function fC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Jd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Xd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function V8(t,e){const r=new F8(t,e);return r.subscribe.bind(r)}class F8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");U8(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=o0),i.error===void 0&&(i.error=o0),i.complete===void 0&&(i.complete=o0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function o0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=1e3,z8=2,B8=4*60*60*1e3,q8=.5;function mC(t,e=$8,r=z8){const n=e*Math.pow(r,t),i=Math.round(q8*n*(Math.random()-.5)*2);return Math.min(B8,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new E8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G8(e))try{this.getOrInitializeService({instanceIdentifier:ol})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=ol){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ol){return this.instances.has(e)}getOptions(e=ol){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:H8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ol){return this.component?this.component.multipleInstances?e:ol:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H8(t){return t===ol?void 0:t}function G8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new W8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vt||(vt={}));const Y8={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},J8=vt.INFO,X8={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},Q8=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=X8[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sx{constructor(e){this.name=e,this._logLevel=J8,this._logHandler=Q8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}}const Z8=(t,e)=>e.some(r=>t instanceof r);let pC,gC;function e9(){return pC||(pC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t9(){return gC||(gC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NR=new WeakMap,sb=new WeakMap,SR=new WeakMap,l0=new WeakMap,jj=new WeakMap;function r9(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(po(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&NR.set(r,t)}).catch(()=>{}),jj.set(e,t),e}function n9(t){if(sb.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});sb.set(t,e)}let ib={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SR.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return po(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s9(t){ib=t(ib)}function i9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(c0(this),e,...r);return SR.set(n,e.sort?e.sort():[e]),po(n)}:t9().includes(t)?function(...e){return t.apply(c0(this),e),po(NR.get(this))}:function(...e){return po(t.apply(c0(this),e))}}function a9(t){return typeof t=="function"?i9(t):(t instanceof IDBTransaction&&n9(t),Z8(t,e9())?new Proxy(t,ib):t)}function po(t){if(t instanceof IDBRequest)return r9(t);if(l0.has(t))return l0.get(t);const e=a9(t);return e!==t&&(l0.set(t,e),jj.set(e,t)),e}const c0=t=>jj.get(t);function ER(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=po(o);return n&&o.addEventListener("upgradeneeded",c=>{n(po(o.result),c.oldVersion,c.newVersion,po(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const o9=["get","getKey","getAll","getAllKeys","count"],l9=["put","add","delete","clear"],u0=new Map;function vC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=l9.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||o9.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),i&&c.done]))[0]};return u0.set(e,a),a}s9(t=>({...t,get:(e,r,n)=>vC(e,r)||t.get(e,r,n),has:(e,r)=>!!vC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(u9(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function u9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ab="@firebase/app",xC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new sx("@firebase/app"),d9="@firebase/app-compat",h9="@firebase/analytics-compat",f9="@firebase/analytics",m9="@firebase/app-check-compat",p9="@firebase/app-check",g9="@firebase/auth",v9="@firebase/auth-compat",x9="@firebase/database",y9="@firebase/data-connect",w9="@firebase/database-compat",b9="@firebase/functions",_9="@firebase/functions-compat",j9="@firebase/installations",N9="@firebase/installations-compat",S9="@firebase/messaging",E9="@firebase/messaging-compat",C9="@firebase/performance",T9="@firebase/performance-compat",k9="@firebase/remote-config",I9="@firebase/remote-config-compat",A9="@firebase/storage",R9="@firebase/storage-compat",P9="@firebase/firestore",D9="@firebase/vertexai-preview",O9="@firebase/firestore-compat",M9="firebase",L9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="[DEFAULT]",V9={[ab]:"fire-core",[d9]:"fire-core-compat",[f9]:"fire-analytics",[h9]:"fire-analytics-compat",[p9]:"fire-app-check",[m9]:"fire-app-check-compat",[g9]:"fire-auth",[v9]:"fire-auth-compat",[x9]:"fire-rtdb",[y9]:"fire-data-connect",[w9]:"fire-rtdb-compat",[b9]:"fire-fn",[_9]:"fire-fn-compat",[j9]:"fire-iid",[N9]:"fire-iid-compat",[S9]:"fire-fcm",[E9]:"fire-fcm-compat",[C9]:"fire-perf",[T9]:"fire-perf-compat",[k9]:"fire-rc",[I9]:"fire-rc-compat",[A9]:"fire-gcs",[R9]:"fire-gcs-compat",[P9]:"fire-fst",[O9]:"fire-fst-compat",[D9]:"fire-vertex","fire-js":"fire-js",[M9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map,F9=new Map,lb=new Map;function yC(t,e){try{t.container.addComponent(e)}catch(r){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ys(t){const e=t.name;if(lb.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;lb.set(e,t);for(const r of Ug.values())yC(r,t);for(const r of F9.values())yC(r,t);return!0}function Fo(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new Jl("app","Firebase",U9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=L9;function CR(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ob,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(r||(r=xR()),!r)throw go.create("no-options");const a=Ug.get(i);if(a){if(Jh(r,a.options)&&Jh(n,a.config))return a;throw go.create("duplicate-app",{appName:i})}const o=new K8(i);for(const c of lb.values())o.addComponent(c);const l=new $9(r,n,o);return Ug.set(i,l),l}function ix(t=ob){const e=Ug.get(t);if(!e&&t===ob&&xR())return CR();if(!e)throw go.create("no-app",{appName:t});return e}function $n(t,e,r){var n;let i=(n=V9[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(l.join(" "));return}Ys(new Ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="firebase-heartbeat-database",B9=1,Xh="firebase-heartbeat-store";let d0=null;function TR(){return d0||(d0=ER(z9,B9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xh)}catch(r){console.warn(r)}}}}).catch(t=>{throw go.create("idb-open",{originalErrorMessage:t.message})})),d0}async function q9(t){try{const r=(await TR()).transaction(Xh),n=await r.objectStore(Xh).get(kR(t));return await r.done,n}catch(e){if(e instanceof Es)ha.warn(e.message);else{const r=go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ha.warn(r.message)}}}async function wC(t,e){try{const n=(await TR()).transaction(Xh,"readwrite");await n.objectStore(Xh).put(e,kR(t)),await n.done}catch(r){if(r instanceof Es)ha.warn(r.message);else{const n=go.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ha.warn(n.message)}}}function kR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=1024,H9=30*24*60*60*1e3;class G9{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Y9(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=bC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=H9}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ha.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=bC(),{heartbeatsToSend:n,unsentEntries:i}=K9(this._heartbeatsCache.heartbeats),a=Fg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return ha.warn(r),""}}}function bC(){return new Date().toISOString().substring(0,10)}function K9(t,e=W9){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),_C(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),_C(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Y9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _R()?jR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await q9(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return wC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return wC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _C(t){return Fg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){Ys(new Ss("platform-logger",e=>new c9(e),"PRIVATE")),Ys(new Ss("heartbeat",e=>new G9(e),"PRIVATE")),$n(ab,xC,t),$n(ab,xC,"esm2017"),$n("fire-js","")}J9("");var ui=function(){return ui=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ui.apply(this,arguments)};function Ff(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function X9(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function IR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q9=IR,AR=new Jl("auth","Firebase",IR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new sx("@firebase/auth");function Z9(t,...e){$g.logLevel<=vt.WARN&&$g.warn(`Auth (${Xl}): ${t}`,...e)}function Wp(t,...e){$g.logLevel<=vt.ERROR&&$g.error(`Auth (${Xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t,...e){throw Nj(t,...e)}function xi(t,...e){return Nj(t,...e)}function RR(t,e,r){const n=Object.assign(Object.assign({},Q9()),{[e]:r});return new Jl("auth","Firebase",n).create(e,{appName:t.name})}function yi(t){return RR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nj(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return AR.create(t,...e)}function Fe(t,e,...r){if(!t)throw Nj(e,...r)}function Ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wp(e),new Error(e)}function fa(t,e){t||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ez(){return jC()==="http:"||jC()==="https:"}function jC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ez()||bR()||"connection"in navigator)?navigator.onLine:!0}function rz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,r){this.shortDelay=e,this.longDelay=r,fa(r>e,"Short delay should be less than long delay!"),this.isMobile=C8()||I8()}get(){return tz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t,e){fa(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=new Uf(3e4,6e4);function Ta(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ni(t,e,r,n,i={}){return DR(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Vf(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return k8()||(u.referrerPolicy="no-referrer"),PR.fetch()(OR(t,t.config.apiHost,r,l),u)})}async function DR(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},nz),e);try{const i=new az(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ap(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ap(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ap(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ap(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RR(t,d,u);Js(t,d)}}catch(i){if(i instanceof Es)throw i;Js(t,"network-request-failed",{message:String(i)})}}async function $f(t,e,r,n,i={}){const a=await ni(t,e,r,n,i);return"mfaPendingCredential"in a&&Js(t,"multi-factor-auth-required",{_serverResponse:a}),a}function OR(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Sj(t.config,i):`${t.config.apiScheme}://${i}`}function iz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class az{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(xi(this.auth,"network-request-failed")),sz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ap(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=xi(t,e,n);return i.customData._tokenResponse=r,i}function NC(t){return t!==void 0&&t.enterprise!==void 0}class oz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return iz(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lz(t,e){return ni(t,"GET","/v2/recaptchaConfig",Ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e){return ni(t,"POST","/v1/accounts:delete",e)}async function MR(t,e){return ni(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uz(t,e=!1){const r=xt(t),n=await r.getIdToken(e),i=Ej(n);Fe(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:gh(h0(i.auth_time)),issuedAtTime:gh(h0(i.iat)),expirationTime:gh(h0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function Ej(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const i=pR(r);return i?JSON.parse(i):(Wp("Failed to decode base64 JWT payload"),null)}catch(i){return Wp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function SC(t){const e=Ej(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Es&&dz(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function dz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gh(this.lastLoginAt),this.creationTime=gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zg(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Il(t,MR(r,{idToken:n}));Fe(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?LR(a.providerUserInfo):[],l=fz(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ub(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Hp(t){const e=xt(t);await zg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fz(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function LR(t){return t.map(e=>{var{providerId:r}=e,n=Ff(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(t,e){const r=await DR(t,{},async()=>{const n=Vf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=OR(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",PR.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function pz(t,e){return ni(t,"POST","/v2/accounts:revokeToken",Ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const r=SC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await mz(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new su;return n&&(Fe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Fe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new su,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xi{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ub(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Il(this,this.stsTokenManager.getToken(this.auth,e));return Fe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return uz(this,e)}reload(){return Hp(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await zg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fs(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Il(this,cz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,o,l,c,u,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(i=r.email)!==null&&i!==void 0?i:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=r.photoURL)!==null&&o!==void 0?o:void 0,y=(l=r.tenantId)!==null&&l!==void 0?l:void 0,_=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=r.createdAt)!==null&&u!==void 0?u:void 0,v=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:C,providerData:I,stsTokenManager:T}=r;Fe(w&&T,e,"internal-error");const k=su.fromJSON(this.name,T);Fe(typeof w=="string",e,"internal-error"),Oa(h,e.name),Oa(m,e.name),Fe(typeof E=="boolean",e,"internal-error"),Fe(typeof C=="boolean",e,"internal-error"),Oa(g,e.name),Oa(x,e.name),Oa(y,e.name),Oa(_,e.name),Oa(b,e.name),Oa(v,e.name);const R=new Xi({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:C,photoURL:x,phoneNumber:g,tenantId:y,stsTokenManager:k,createdAt:b,lastLoginAt:v});return I&&Array.isArray(I)&&(R.providerData=I.map(j=>Object.assign({},j))),_&&(R._redirectEventId=_),R}static async _fromIdTokenResponse(e,r,n=!1){const i=new su;i.updateFromServerResponse(r);const a=new Xi({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await zg(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Fe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?LR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new su;l.updateFromIdToken(n);const c=new Xi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ub(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Map;function Qi(t){fa(t instanceof Function,"Expected a class definition");let e=EC.get(t);return e?(fa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}VR.type="NONE";const CC=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e,r){return`firebase:${t}:${e}:${r}`}class iu{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Gp(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gp("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new iu(Qi(CC),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Qi(CC);const o=Gp(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const h=Xi._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new iu(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new iu(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qR(e))return"Blackberry";if(WR(e))return"Webos";if(UR(e))return"Safari";if((e.includes("chrome/")||$R(e))&&!e.includes("edge/"))return"Chrome";if(BR(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function FR(t=cn()){return/firefox\//i.test(t)}function UR(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $R(t=cn()){return/crios\//i.test(t)}function zR(t=cn()){return/iemobile/i.test(t)}function BR(t=cn()){return/android/i.test(t)}function qR(t=cn()){return/blackberry/i.test(t)}function WR(t=cn()){return/webos/i.test(t)}function Cj(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gz(t=cn()){var e;return Cj(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vz(){return A8()&&document.documentMode===10}function HR(t=cn()){return Cj(t)||BR(t)||WR(t)||qR(t)||/windows phone/i.test(t)||zR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e=[]){let r;switch(t){case"Browser":r=TC(cn());break;case"Worker":r=`${TC(cn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Xl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(t,e={}){return ni(t,"GET","/v2/passwordPolicy",Ta(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=6;class bz{constructor(e){var r,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:wz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kC(this),this.idTokenSubscription=new kC(this),this.beforeStateQueue=new xz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Qi(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await iu.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await MR(this,{idToken:e}),n=await Xi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await zg(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fs(this.app))return Promise.reject(yi(this));const r=e?xt(e):null;return r&&Fe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fs(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fs(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yz(this),r=new bz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jl("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await pz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Qi(e)||this._popupRedirectResolver;Fe(r,this,"argument-error"),this.redirectPersistenceManager=await iu.create(this,[Qi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Z9(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ql(t){return xt(t)}class kC{constructor(e){this.auth=e,this.observer=null,this.addObserver=V8(r=>this.observer=r)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ax={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jz(t){ax=t}function KR(t){return ax.loadJS(t)}function Nz(){return ax.recaptchaEnterpriseScript}function Sz(){return ax.gapiScript}function Ez(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Cz="recaptcha-enterprise",Tz="NO_RECAPTCHA";class kz{constructor(e){this.type=Cz,this.auth=Ql(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{lz(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new oz(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;NC(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(Tz)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&NC(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Nz();c.length!==0&&(c+=l),KR(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function IC(t,e,r,n=!1){const i=new kz(t);let a;try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function db(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await IC(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await IC(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t,e){const r=Fo(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Jh(a,e??{}))return i;Js(i,"already-initialized")}return r.initialize({options:e})}function Az(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Rz(t,e,r){const n=Ql(t);Fe(n._canInitEmulator,n,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=YR(e),{host:o,port:l}=Pz(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),Dz()}function YR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pz(t){const e=YR(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:AC(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:AC(o)}}}function AC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,r){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function Oz(t,e){return ni(t,"POST","/v1/accounts:update",e)}async function Mz(t,e){return ni(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(t,e){return $f(t,"POST","/v1/accounts:signInWithPassword",Ta(t,e))}async function Vz(t,e){return ni(t,"POST","/v1/accounts:sendOobCode",Ta(t,e))}async function Fz(t,e){return Vz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uz(t,e){return $f(t,"POST","/v1/accounts:signInWithEmailLink",Ta(t,e))}async function $z(t,e){return $f(t,"POST","/v1/accounts:signInWithEmailLink",Ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Tj{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Qh(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Qh(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,r,"signInWithPassword",Lz);case"emailLink":return Uz(e,{email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,n,"signUpPassword",Mz);case"emailLink":return $z(e,{idToken:r,email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t,e){return $f(t,"POST","/v1/accounts:signInWithIdp",Ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="http://localhost";class Al extends Tj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Js("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=Ff(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Al(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return au(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,au(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,au(e,r)}buildRequest(){const e={requestUri:zz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Vf(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qz(t){const e=Jd(Xd(t)).link,r=e?Jd(Xd(e)).deep_link_id:null,n=Jd(Xd(t)).deep_link_id;return(n?Jd(Xd(n)).link:null)||n||r||e||t}class kj{constructor(e){var r,n,i,a,o,l;const c=Jd(Xd(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,h=Bz((i=c.mode)!==null&&i!==void 0?i:null);Fe(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=qz(e);try{return new kj(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,r){return Qh._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=kj.parseLink(r);return Fe(n,"argument-error"),Qh._fromEmailAndCode(e,n.code,n.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends JR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends zf{constructor(){super("facebook.com")}static credential(e){return Al._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Al._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ga.credential(r,n)}catch{return null}}}Ga.GOOGLE_SIGN_IN_METHOD="google.com";Ga.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends zf{constructor(){super("github.com")}static credential(e){return Al._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ka.credential(e.oauthAccessToken)}catch{return null}}}Ka.GITHUB_SIGN_IN_METHOD="github.com";Ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends zf{constructor(){super("twitter.com")}static credential(e,r){return Al._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ya.credential(r,n)}catch{return null}}}Ya.TWITTER_SIGN_IN_METHOD="twitter.com";Ya.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e){return $f(t,"POST","/v1/accounts:signUp",Ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Xi._fromIdTokenResponse(e,n,i),o=RC(n);return new Rl({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=RC(n);return new Rl({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function RC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Es{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Bg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Bg(e,r,n,i)}}function XR(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bg._fromErrorAndOperation(t,a,e,n):a})}async function Hz(t,e,r=!1){const n=await Il(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Rl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e,r=!1){const{auth:n}=t;if(Fs(n.app))return Promise.reject(yi(n));const i="reauthenticate";try{const a=await Il(t,XR(n,i,e,t),r);Fe(a.idToken,n,"internal-error");const o=Ej(a.idToken);Fe(o,n,"internal-error");const{sub:l}=o;return Fe(t.uid===l,n,"user-mismatch"),Rl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Js(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e,r=!1){if(Fs(t.app))return Promise.reject(yi(t));const n="signIn",i=await XR(t,n,e),a=await Rl._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function Gz(t,e){return ZR(Ql(t),e)}async function PC(t,e){return QR(xt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t,e,r){var n;Fe(((n=r.url)===null||n===void 0?void 0:n.length)>0,t,"invalid-continue-uri"),Fe(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(Fe(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(Fe(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(t){const e=Ql(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tP(t,e,r){if(Fs(t.app))return Promise.reject(yi(t));const n=Ql(t),o=await db(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wz).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&eP(t),c}),l=await Rl._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Yz(t,e,r){return Fs(t.app)?Promise.reject(yi(t)):Gz(xt(t),_o.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eP(t),n})}async function hb(t,e){const r=xt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Kz(r.auth,i,e);const{email:a}=await Fz(r.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){return ni(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=xt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Il(n,Jz(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function Xz(t,e){const r=xt(t);return Fs(r.auth.app)?Promise.reject(yi(r.auth)):rP(r,e,null)}function Qz(t,e){return rP(xt(t),null,e)}async function rP(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),r&&(a.password=r);const o=await Il(t,Oz(n,a));await t._updateTokensIfNecessary(o,!0)}function Zz(t,e,r,n){return xt(t).onIdTokenChanged(e,r,n)}function eB(t,e,r){return xt(t).beforeAuthStateChanged(e,r)}function DC(t){return xt(t).signOut()}async function tB(t){return xt(t).delete()}const qg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(qg,"1"),this.storage.removeItem(qg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=1e3,nB=10;class sP extends nP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);vz()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nB):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},rB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}sP.type="LOCAL";const sB=sP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP extends nP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}iP.type="SESSION";const aP=iP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new ox(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async u=>u(r.origin,a)),c=await iB(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ox.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=Ij("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function oB(t){wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function lB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uB(){return oP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="firebaseLocalStorageDb",dB=1,Wg="firebaseLocalStorage",cP="fbase_key";class Bf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function lx(t,e){return t.transaction([Wg],e?"readwrite":"readonly").objectStore(Wg)}function hB(){const t=indexedDB.deleteDatabase(lP);return new Bf(t).toPromise()}function fb(){const t=indexedDB.open(lP,dB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Wg,{keyPath:cP})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Wg)?e(n):(n.close(),await hB(),e(await fb()))})})}async function OC(t,e,r){const n=lx(t,!0).put({[cP]:e,value:r});return new Bf(n).toPromise()}async function fB(t,e){const r=lx(t,!1).get(e),n=await new Bf(r).toPromise();return n===void 0?null:n.value}function MC(t,e){const r=lx(t,!0).delete(e);return new Bf(r).toPromise()}const mB=800,pB=3;class uP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fb(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>pB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ox._getInstance(uB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await lB(),!this.activeServiceWorker)return;this.sender=new aB(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fb();return await OC(e,qg,"1"),await MC(e,qg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>OC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>fB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>MC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=lx(i,!1).getAll();return new Bf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uP.type="LOCAL";const gB=uP;new Uf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t,e){return e?Qi(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj extends Tj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return au(e,this._buildIdpRequest())}_linkToIdToken(e,r){return au(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return au(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function xB(t){return ZR(t.auth,new Aj(t),t.bypassAuthState)}function yB(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),QR(r,new Aj(t),t.bypassAuthState)}async function wB(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),Hz(r,new Aj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xB;case"linkViaPopup":case"linkViaRedirect":return wB;case"reauthViaPopup":case"reauthViaRedirect":return yB;default:Js(this.auth,"internal-error")}}resolve(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new Uf(2e3,1e4);class Kc extends dP{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Kc.currentPopupAction&&Kc.currentPopupAction.cancel(),Kc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){fa(this.filter.length===1,"Popup operations only handle one event");const e=Ij();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bB.get())};e()}}Kc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="pendingRedirect",Kp=new Map;class jB extends dP{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Kp.get(this.auth._key());if(!e){try{const n=await NB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Kp.set(this.auth._key(),e)}return this.bypassAuthState||Kp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NB(t,e){const r=CB(e),n=EB(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function SB(t,e){Kp.set(t._key(),e)}function EB(t){return Qi(t._redirectPersistence)}function CB(t){return Gp(_B,t.config.apiKey,t.name)}async function TB(t,e,r=!1){if(Fs(t.app))return Promise.reject(yi(t));const n=Ql(t),i=vB(n,e),o=await new jB(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=10*60*1e3;class IB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!hP(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(xi(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kB&&this.cachedEventUids.clear(),this.cachedEventUids.has(LC(e))}saveEventToCache(e){this.cachedEventUids.add(LC(e)),this.lastProcessedEventTime=Date.now()}}function LC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e={}){return ni(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DB=/^https?/;async function OB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RB(t);for(const r of e)try{if(MB(r))return}catch{}Js(t,"unauthorized-domain")}function MB(t){const e=cb(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!DB.test(r))return!1;if(PB.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=new Uf(3e4,6e4);function VC(){const t=wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function VB(t){return new Promise((e,r)=>{var n,i,a;function o(){VC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VC(),r(xi(t,"network-request-failed"))},timeout:LB.get()})}if(!((i=(n=wi().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=wi().gapi)===null||a===void 0)&&a.load)o();else{const l=Ez("iframefcb");return wi()[l]=()=>{gapi.load?o():r(xi(t,"network-request-failed"))},KR(`${Sz()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Yp=null,e})}let Yp=null;function FB(t){return Yp=Yp||VB(t),Yp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=new Uf(5e3,15e3),$B="__/auth/iframe",zB="emulator/auth/iframe",BB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WB(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Sj(e,zB):`https://${t.config.authDomain}/${$B}`,n={apiKey:e.apiKey,appName:t.name,v:Xl},i=qB.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Vf(n).slice(1)}`}async function HB(t){const e=await FB(t),r=wi().gapi;return Fe(r,t,"internal-error"),e.open({where:document.body,url:WB(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BB,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=xi(t,"network-request-failed"),l=wi().setTimeout(()=>{a(o)},UB.get());function c(){wi().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KB=500,YB=600,JB="_blank",XB="http://localhost";class FC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QB(t,e,r,n=KB,i=YB){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},GB),{width:n.toString(),height:i.toString(),top:a,left:o}),u=cn().toLowerCase();r&&(l=$R(u)?JB:r),FR(u)&&(e=e||XB,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(gz(u)&&l!=="_self")return ZB(e||"",l),new FC(null);const h=window.open(e||"",l,d);Fe(h,t,"popup-blocked");try{h.focus()}catch{}return new FC(h)}function ZB(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7="__/auth/handler",t7="emulator/auth/handler",r7=encodeURIComponent("fac");async function UC(t,e,r,n,i,a){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Xl,eventId:i};if(e instanceof JR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",L8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof zf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${r7}=${encodeURIComponent(c)}`:"";return`${n7(t)}?${Vf(l).slice(1)}${u}`}function n7({config:t}){return t.emulator?Sj(t,t7):`https://${t.authDomain}/${e7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class s7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aP,this._completeRedirectFn=TB,this._overrideRedirectResult=SB}async _openPopup(e,r,n,i){var a;fa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await UC(e,r,n,cb(),i);return QB(e,o,Ij())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await UC(e,r,n,cb(),i);return oB(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(fa(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await HB(e),n=new IB(e);return r.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(f0,{type:f0},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[f0];o!==void 0&&r(!!o),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=OB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return HR()||UR()||Cj()}}const i7=s7;var $C="@firebase/auth",zC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l7(t){Ys(new Ss("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GR(t)},u=new _z(n,i,a,c);return Az(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ys(new Ss("auth-internal",e=>{const r=Ql(e.getProvider("auth").getImmediate());return(n=>new a7(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n($C,zC,o7(t)),$n($C,zC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=5*60,u7=yR("authIdTokenMaxAge")||c7;let BC=null;const d7=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>u7)return;const i=r==null?void 0:r.token;BC!==i&&(BC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function h7(t=ix()){const e=Fo(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Iz(t,{popupRedirectResolver:i7,persistence:[gB,sB,aP]}),n=yR("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=d7(a.toString());eB(r,o,()=>o(r.currentUser)),Zz(r,l=>o(l))}}const i=gR("auth");return i&&Rz(r,`http://${i}`),r}function f7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=xi("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",f7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l7("Browser");var m7="firebase",p7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(m7,p7,"app");var qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yl,fP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,k){function R(){}R.prototype=k.prototype,T.D=k.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(j,P,D){for(var S=Array(arguments.length-2),M=2;M<arguments.length;M++)S[M-2]=arguments[M];return k.prototype[P].apply(j,S)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,k,R){R||(R=0);var j=Array(16);if(typeof k=="string")for(var P=0;16>P;++P)j[P]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(P=0;16>P;++P)j[P]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=T.g[0],R=T.g[1],P=T.g[2];var D=T.g[3],S=k+(D^R&(P^D))+j[0]+3614090360&4294967295;k=R+(S<<7&4294967295|S>>>25),S=D+(P^k&(R^P))+j[1]+3905402710&4294967295,D=k+(S<<12&4294967295|S>>>20),S=P+(R^D&(k^R))+j[2]+606105819&4294967295,P=D+(S<<17&4294967295|S>>>15),S=R+(k^P&(D^k))+j[3]+3250441966&4294967295,R=P+(S<<22&4294967295|S>>>10),S=k+(D^R&(P^D))+j[4]+4118548399&4294967295,k=R+(S<<7&4294967295|S>>>25),S=D+(P^k&(R^P))+j[5]+1200080426&4294967295,D=k+(S<<12&4294967295|S>>>20),S=P+(R^D&(k^R))+j[6]+2821735955&4294967295,P=D+(S<<17&4294967295|S>>>15),S=R+(k^P&(D^k))+j[7]+4249261313&4294967295,R=P+(S<<22&4294967295|S>>>10),S=k+(D^R&(P^D))+j[8]+1770035416&4294967295,k=R+(S<<7&4294967295|S>>>25),S=D+(P^k&(R^P))+j[9]+2336552879&4294967295,D=k+(S<<12&4294967295|S>>>20),S=P+(R^D&(k^R))+j[10]+4294925233&4294967295,P=D+(S<<17&4294967295|S>>>15),S=R+(k^P&(D^k))+j[11]+2304563134&4294967295,R=P+(S<<22&4294967295|S>>>10),S=k+(D^R&(P^D))+j[12]+1804603682&4294967295,k=R+(S<<7&4294967295|S>>>25),S=D+(P^k&(R^P))+j[13]+4254626195&4294967295,D=k+(S<<12&4294967295|S>>>20),S=P+(R^D&(k^R))+j[14]+2792965006&4294967295,P=D+(S<<17&4294967295|S>>>15),S=R+(k^P&(D^k))+j[15]+1236535329&4294967295,R=P+(S<<22&4294967295|S>>>10),S=k+(P^D&(R^P))+j[1]+4129170786&4294967295,k=R+(S<<5&4294967295|S>>>27),S=D+(R^P&(k^R))+j[6]+3225465664&4294967295,D=k+(S<<9&4294967295|S>>>23),S=P+(k^R&(D^k))+j[11]+643717713&4294967295,P=D+(S<<14&4294967295|S>>>18),S=R+(D^k&(P^D))+j[0]+3921069994&4294967295,R=P+(S<<20&4294967295|S>>>12),S=k+(P^D&(R^P))+j[5]+3593408605&4294967295,k=R+(S<<5&4294967295|S>>>27),S=D+(R^P&(k^R))+j[10]+38016083&4294967295,D=k+(S<<9&4294967295|S>>>23),S=P+(k^R&(D^k))+j[15]+3634488961&4294967295,P=D+(S<<14&4294967295|S>>>18),S=R+(D^k&(P^D))+j[4]+3889429448&4294967295,R=P+(S<<20&4294967295|S>>>12),S=k+(P^D&(R^P))+j[9]+568446438&4294967295,k=R+(S<<5&4294967295|S>>>27),S=D+(R^P&(k^R))+j[14]+3275163606&4294967295,D=k+(S<<9&4294967295|S>>>23),S=P+(k^R&(D^k))+j[3]+4107603335&4294967295,P=D+(S<<14&4294967295|S>>>18),S=R+(D^k&(P^D))+j[8]+1163531501&4294967295,R=P+(S<<20&4294967295|S>>>12),S=k+(P^D&(R^P))+j[13]+2850285829&4294967295,k=R+(S<<5&4294967295|S>>>27),S=D+(R^P&(k^R))+j[2]+4243563512&4294967295,D=k+(S<<9&4294967295|S>>>23),S=P+(k^R&(D^k))+j[7]+1735328473&4294967295,P=D+(S<<14&4294967295|S>>>18),S=R+(D^k&(P^D))+j[12]+2368359562&4294967295,R=P+(S<<20&4294967295|S>>>12),S=k+(R^P^D)+j[5]+4294588738&4294967295,k=R+(S<<4&4294967295|S>>>28),S=D+(k^R^P)+j[8]+2272392833&4294967295,D=k+(S<<11&4294967295|S>>>21),S=P+(D^k^R)+j[11]+1839030562&4294967295,P=D+(S<<16&4294967295|S>>>16),S=R+(P^D^k)+j[14]+4259657740&4294967295,R=P+(S<<23&4294967295|S>>>9),S=k+(R^P^D)+j[1]+2763975236&4294967295,k=R+(S<<4&4294967295|S>>>28),S=D+(k^R^P)+j[4]+1272893353&4294967295,D=k+(S<<11&4294967295|S>>>21),S=P+(D^k^R)+j[7]+4139469664&4294967295,P=D+(S<<16&4294967295|S>>>16),S=R+(P^D^k)+j[10]+3200236656&4294967295,R=P+(S<<23&4294967295|S>>>9),S=k+(R^P^D)+j[13]+681279174&4294967295,k=R+(S<<4&4294967295|S>>>28),S=D+(k^R^P)+j[0]+3936430074&4294967295,D=k+(S<<11&4294967295|S>>>21),S=P+(D^k^R)+j[3]+3572445317&4294967295,P=D+(S<<16&4294967295|S>>>16),S=R+(P^D^k)+j[6]+76029189&4294967295,R=P+(S<<23&4294967295|S>>>9),S=k+(R^P^D)+j[9]+3654602809&4294967295,k=R+(S<<4&4294967295|S>>>28),S=D+(k^R^P)+j[12]+3873151461&4294967295,D=k+(S<<11&4294967295|S>>>21),S=P+(D^k^R)+j[15]+530742520&4294967295,P=D+(S<<16&4294967295|S>>>16),S=R+(P^D^k)+j[2]+3299628645&4294967295,R=P+(S<<23&4294967295|S>>>9),S=k+(P^(R|~D))+j[0]+4096336452&4294967295,k=R+(S<<6&4294967295|S>>>26),S=D+(R^(k|~P))+j[7]+1126891415&4294967295,D=k+(S<<10&4294967295|S>>>22),S=P+(k^(D|~R))+j[14]+2878612391&4294967295,P=D+(S<<15&4294967295|S>>>17),S=R+(D^(P|~k))+j[5]+4237533241&4294967295,R=P+(S<<21&4294967295|S>>>11),S=k+(P^(R|~D))+j[12]+1700485571&4294967295,k=R+(S<<6&4294967295|S>>>26),S=D+(R^(k|~P))+j[3]+2399980690&4294967295,D=k+(S<<10&4294967295|S>>>22),S=P+(k^(D|~R))+j[10]+4293915773&4294967295,P=D+(S<<15&4294967295|S>>>17),S=R+(D^(P|~k))+j[1]+2240044497&4294967295,R=P+(S<<21&4294967295|S>>>11),S=k+(P^(R|~D))+j[8]+1873313359&4294967295,k=R+(S<<6&4294967295|S>>>26),S=D+(R^(k|~P))+j[15]+4264355552&4294967295,D=k+(S<<10&4294967295|S>>>22),S=P+(k^(D|~R))+j[6]+2734768916&4294967295,P=D+(S<<15&4294967295|S>>>17),S=R+(D^(P|~k))+j[13]+1309151649&4294967295,R=P+(S<<21&4294967295|S>>>11),S=k+(P^(R|~D))+j[4]+4149444226&4294967295,k=R+(S<<6&4294967295|S>>>26),S=D+(R^(k|~P))+j[11]+3174756917&4294967295,D=k+(S<<10&4294967295|S>>>22),S=P+(k^(D|~R))+j[2]+718787259&4294967295,P=D+(S<<15&4294967295|S>>>17),S=R+(D^(P|~k))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(P+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+D&4294967295}n.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var R=k-this.blockSize,j=this.B,P=this.h,D=0;D<k;){if(P==0)for(;D<=R;)i(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<k;)if(j[P++]=T.charCodeAt(D++),P==this.blockSize){i(this,j),P=0;break}}else for(;D<k;)if(j[P++]=T[D++],P==this.blockSize){i(this,j),P=0;break}}this.h=P,this.o+=k},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var R=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=R&255,R/=256;for(this.u(T),T=Array(16),k=R=0;4>k;++k)for(var j=0;32>j;j+=8)T[R++]=this.g[k]>>>j&255;return T};function a(T,k){var R=l;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=k(T)}function o(T,k){this.h=k;for(var R=[],j=!0,P=T.length-1;0<=P;P--){var D=T[P]|0;j&&D==k||(R[P]=D,j=!1)}this.g=R}var l={};function c(T){return-128<=T&&128>T?a(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return _(u(-T));for(var k=[],R=1,j=0;T>=R;j++)k[j]=T/R|0,R*=4294967296;return new o(k,0)}function d(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return _(d(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(k,8)),j=h,P=0;P<T.length;P+=8){var D=Math.min(8,T.length-P),S=parseInt(T.substring(P,P+D),k);8>D?(D=u(Math.pow(k,D)),j=j.j(D).add(u(S))):(j=j.j(R),j=j.add(u(S)))}return j}var h=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-_(this).m();for(var T=0,k=1,R=0;R<this.g.length;R++){var j=this.i(R);T+=(0<=j?j:4294967296+j)*k,k*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(y(this))return"-"+_(this).toString(T);for(var k=u(Math.pow(T,6)),R=this,j="";;){var P=E(R,k).g;R=b(R,P.j(k));var D=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=P,x(R))return D+j;for(;6>D.length;)D="0"+D;j=D+j}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=b(this,T),y(T)?-1:x(T)?0:1};function _(T){for(var k=T.g.length,R=[],j=0;j<k;j++)R[j]=~T.g[j];return new o(R,~T.h).add(m)}t.abs=function(){return y(this)?_(this):this},t.add=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],j=0,P=0;P<=k;P++){var D=j+(this.i(P)&65535)+(T.i(P)&65535),S=(D>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);j=S>>>16,D&=65535,S&=65535,R[P]=S<<16|D}return new o(R,R[R.length-1]&-2147483648?-1:0)};function b(T,k){return T.add(_(k))}t.j=function(T){if(x(this)||x(T))return h;if(y(this))return y(T)?_(this).j(_(T)):_(_(this).j(T));if(y(T))return _(this.j(_(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var k=this.g.length+T.g.length,R=[],j=0;j<2*k;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var P=0;P<T.g.length;P++){var D=this.i(j)>>>16,S=this.i(j)&65535,M=T.i(P)>>>16,$=T.i(P)&65535;R[2*j+2*P]+=S*$,v(R,2*j+2*P),R[2*j+2*P+1]+=D*$,v(R,2*j+2*P+1),R[2*j+2*P+1]+=S*M,v(R,2*j+2*P+1),R[2*j+2*P+2]+=D*M,v(R,2*j+2*P+2)}for(j=0;j<k;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=k;j<2*k;j++)R[j]=0;return new o(R,0)};function v(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function w(T,k){this.g=T,this.h=k}function E(T,k){if(x(k))throw Error("division by zero");if(x(T))return new w(h,h);if(y(T))return k=E(_(T),k),new w(_(k.g),_(k.h));if(y(k))return k=E(T,_(k)),new w(_(k.g),k.h);if(30<T.g.length){if(y(T)||y(k))throw Error("slowDivide_ only works with positive integers.");for(var R=m,j=k;0>=j.l(T);)R=C(R),j=C(j);var P=I(R,1),D=I(j,1);for(j=I(j,2),R=I(R,2);!x(j);){var S=D.add(j);0>=S.l(T)&&(P=P.add(R),D=S),j=I(j,1),R=I(R,1)}return k=b(T,P.j(k)),new w(P,k)}for(P=h;0<=T.l(k);){for(R=Math.max(1,Math.floor(T.m()/k.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),D=u(R),S=D.j(k);y(S)||0<S.l(T);)R-=j,D=u(R),S=D.j(k);x(D)&&(D=m),P=P.add(D),T=b(T,S)}return new w(P,T)}t.A=function(T){return E(this,T).h},t.and=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)&T.i(j);return new o(R,this.h&T.h)},t.or=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)|T.i(j);return new o(R,this.h|T.h)},t.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)^T.i(j);return new o(R,this.h^T.h)};function C(T){for(var k=T.g.length+1,R=[],j=0;j<k;j++)R[j]=T.i(j)<<1|T.i(j-1)>>>31;return new o(R,T.h)}function I(T,k){var R=k>>5;k%=32;for(var j=T.g.length-R,P=[],D=0;D<j;D++)P[D]=0<k?T.i(D+R)>>>k|T.i(D+R+1)<<32-k:T.i(D+R);return new o(P,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,fP=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,yl=o}).apply(typeof qC<"u"?qC:typeof self<"u"?self:typeof window<"u"?window:{});var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mP,Qd,pP,Jp,mb,gP,vP,xP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,A){return f==Array.prototype||f==Object.prototype||(f[N]=A.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof op=="object"&&op];for(var N=0;N<f.length;++N){var A=f[N];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=r(this);function i(f,N){if(N)e:{var A=n;f=f.split(".");for(var O=0;O<f.length-1;O++){var G=f[O];if(!(G in A))break e;A=A[G]}f=f[f.length-1],O=A[f],N=N(O),N!=O&&N!=null&&e(A,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var A=0,O=!1,G={next:function(){if(!O&&A<f.length){var Q=A++;return{value:N(Q,f[Q]),done:!1}}return O=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(f){return f||function(){return a(this,function(N,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function u(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function d(f,N,A){return f.call.apply(f.bind,arguments)}function h(f,N,A){if(!f)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,O),f.apply(N,G)}}return function(){return f.apply(N,arguments)}}function m(f,N,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(f,N){var A=Array.prototype.slice.call(arguments,1);return function(){var O=A.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function x(f,N){function A(){}A.prototype=N.prototype,f.aa=N.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(O,G,Q){for(var pe=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)pe[Lt-2]=arguments[Lt];return N.prototype[G].apply(O,pe)}}function y(f){const N=f.length;if(0<N){const A=Array(N);for(let O=0;O<N;O++)A[O]=f[O];return A}return[]}function _(f,N){for(let A=1;A<arguments.length;A++){const O=arguments[A];if(c(O)){const G=f.length||0,Q=O.length||0;f.length=G+Q;for(let pe=0;pe<Q;pe++)f[G+pe]=O[pe]}else f.push(O)}}class b{constructor(N,A){this.i=N,this.j=A,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function v(f){return/^[\s\xa0]*$/.test(f)}function w(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function E(f){return E[" "](f),f}E[" "]=function(){};var C=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function I(f,N,A){for(const O in f)N.call(A,f[O],O,f)}function T(f,N){for(const A in f)N.call(void 0,f[A],A,f)}function k(f){const N={};for(const A in f)N[A]=f[A];return N}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,N){let A,O;for(let G=1;G<arguments.length;G++){O=arguments[G];for(A in O)f[A]=O[A];for(let Q=0;Q<R.length;Q++)A=R[Q],Object.prototype.hasOwnProperty.call(O,A)&&(f[A]=O[A])}}function P(f){var N=1;f=f.split(":");const A=[];for(;0<N&&f.length;)A.push(f.shift()),N--;return f.length&&A.push(f.join(":")),A}function D(f){l.setTimeout(()=>{throw f},0)}function S(){var f=W;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class M{constructor(){this.h=this.g=null}add(N,A){const O=$.get();O.set(N,A),this.h?this.h.next=O:this.g=O,this.h=O}}var $=new b(()=>new q,f=>f.reset());class q{constructor(){this.next=this.g=this.h=null}set(N,A){this.h=N,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let F,L=!1,W=new M,z=()=>{const f=l.Promise.resolve(void 0);F=()=>{f.then(X)}};var X=()=>{for(var f;f=S();){try{f.h.call(f.g)}catch(A){D(A)}var N=$;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}L=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};l.addEventListener("test",A,N),l.removeEventListener("test",A,N)}catch{}return f}();function jt(f,N){if(_e.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(C){e:{try{E(N.nodeName);var G=!0;break e}catch{}G=!1}G||(N=null)}}else A=="mouseover"?N=f.fromElement:A=="mouseout"&&(N=f.toElement);this.relatedTarget=N,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:yt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&jt.aa.h.call(this)}}x(jt,_e);var yt={2:"touch",3:"pen",4:"mouse"};jt.prototype.h=function(){jt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Z(f,N,A,O,G){this.listener=f,this.proxy=null,this.src=N,this.type=A,this.capture=!!O,this.ha=G,this.key=++tt,this.da=this.fa=!1}function ge(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Y(f){this.src=f,this.g={},this.h=0}Y.prototype.add=function(f,N,A,O,G){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var pe=de(f,N,O,G);return-1<pe?(N=f[pe],A||(N.fa=!1)):(N=new Z(N,this.src,Q,!!O,G),N.fa=A,f.push(N)),N};function ie(f,N){var A=N.type;if(A in f.g){var O=f.g[A],G=Array.prototype.indexOf.call(O,N,void 0),Q;(Q=0<=G)&&Array.prototype.splice.call(O,G,1),Q&&(ge(N),f.g[A].length==0&&(delete f.g[A],f.h--))}}function de(f,N,A,O){for(var G=0;G<f.length;++G){var Q=f[G];if(!Q.da&&Q.listener==N&&Q.capture==!!A&&Q.ha==O)return G}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),ze={};function Ke(f,N,A,O,G){if(Array.isArray(N)){for(var Q=0;Q<N.length;Q++)Ke(f,N[Q],A,O,G);return null}return A=St(A),f&&f[Se]?f.K(N,A,u(O)?!!O.capture:!!O,G):Nt(f,N,A,!1,O,G)}function Nt(f,N,A,O,G,Q){if(!N)throw Error("Invalid event type");var pe=u(G)?!!G.capture:!!G,Lt=ce(f);if(Lt||(f[Me]=Lt=new Y(f)),A=Lt.add(N,A,O,pe,Q),A.proxy)return A;if(O=V(),A.proxy=O,O.src=f,O.listener=A,f.addEventListener)ot||(G=pe),G===void 0&&(G=!1),f.addEventListener(N.toString(),O,G);else if(f.attachEvent)f.attachEvent(je(N.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return A}function V(){function f(A){return N.call(f.src,f.listener,A)}const N=xe;return f}function B(f,N,A,O,G){if(Array.isArray(N))for(var Q=0;Q<N.length;Q++)B(f,N[Q],A,O,G);else O=u(O)?!!O.capture:!!O,A=St(A),f&&f[Se]?(f=f.i,N=String(N).toString(),N in f.g&&(Q=f.g[N],A=de(Q,A,O,G),-1<A&&(ge(Q[A]),Array.prototype.splice.call(Q,A,1),Q.length==0&&(delete f.g[N],f.h--)))):f&&(f=ce(f))&&(N=f.g[N.toString()],f=-1,N&&(f=de(N,A,O,G)),(A=-1<f?N[f]:null)&&J(A))}function J(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[Se])ie(N.i,f);else{var A=f.type,O=f.proxy;N.removeEventListener?N.removeEventListener(A,O,f.capture):N.detachEvent?N.detachEvent(je(A),O):N.addListener&&N.removeListener&&N.removeListener(O),(A=ce(N))?(ie(A,f),A.h==0&&(A.src=null,N[Me]=null)):ge(f)}}}function je(f){return f in ze?ze[f]:ze[f]="on"+f}function xe(f,N){if(f.da)f=!0;else{N=new jt(N,this);var A=f.listener,O=f.ha||f.src;f.fa&&J(f),f=A.call(O,N)}return f}function ce(f){return f=f[Me],f instanceof Y?f:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(f){return typeof f=="function"?f:(f[De]||(f[De]=function(N){return f.handleEvent(N)}),f[De])}function gt(){se.call(this),this.i=new Y(this),this.M=this,this.F=null}x(gt,se),gt.prototype[Se]=!0,gt.prototype.removeEventListener=function(f,N,A,O){B(this,f,N,A,O)};function wt(f,N){var A,O=f.F;if(O)for(A=[];O;O=O.F)A.push(O);if(f=f.M,O=N.type||N,typeof N=="string")N=new _e(N,f);else if(N instanceof _e)N.target=N.target||f;else{var G=N;N=new _e(O,f),j(N,G)}if(G=!0,A)for(var Q=A.length-1;0<=Q;Q--){var pe=N.g=A[Q];G=fs(pe,O,!0,N)&&G}if(pe=N.g=f,G=fs(pe,O,!0,N)&&G,G=fs(pe,O,!1,N)&&G,A)for(Q=0;Q<A.length;Q++)pe=N.g=A[Q],G=fs(pe,O,!1,N)&&G}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var A=f.g[N],O=0;O<A.length;O++)ge(A[O]);delete f.g[N],f.h--}}this.F=null},gt.prototype.K=function(f,N,A,O){return this.i.add(String(f),N,!1,A,O)},gt.prototype.L=function(f,N,A,O){return this.i.add(String(f),N,!0,A,O)};function fs(f,N,A,O){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var G=!0,Q=0;Q<N.length;++Q){var pe=N[Q];if(pe&&!pe.da&&pe.capture==A){var Lt=pe.listener,Fr=pe.ha||pe.src;pe.fa&&ie(f.i,pe),G=Lt.call(Fr,O)!==!1&&G}}return G&&!O.defaultPrevented}function Em(f,N,A){if(typeof f=="function")A&&(f=m(f,A));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:l.setTimeout(f,N||0)}function dc(f){f.g=Em(()=>{f.g=null,f.i&&(f.i=!1,dc(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class gd extends se{constructor(N,A){super(),this.m=N,this.l=A,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(f){se.call(this),this.h=f,this.g={}}x(Yo,se);var vd=[];function Cm(f){I(f.g,function(N,A){this.g.hasOwnProperty(A)&&J(N)},f),f.g={}}Yo.prototype.N=function(){Yo.aa.N.call(this),Cm(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hc=l.JSON.stringify,dV=l.JSON.parse,hV=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function yy(){}yy.prototype.h=null;function rS(f){return f.h||(f.h=f.i())}function nS(){}var xd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wy(){_e.call(this,"d")}x(wy,_e);function by(){_e.call(this,"c")}x(by,_e);var Jo={},sS=null;function Tm(){return sS=sS||new gt}Jo.La="serverreachability";function iS(f){_e.call(this,Jo.La,f)}x(iS,_e);function yd(f){const N=Tm();wt(N,new iS(N))}Jo.STAT_EVENT="statevent";function aS(f,N){_e.call(this,Jo.STAT_EVENT,f),this.stat=N}x(aS,_e);function dn(f){const N=Tm();wt(N,new aS(N,f))}Jo.Ma="timingevent";function oS(f,N){_e.call(this,Jo.Ma,f),this.size=N}x(oS,_e);function wd(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},N)}function bd(){this.g=!0}bd.prototype.xa=function(){this.g=!1};function fV(f,N,A,O,G,Q){f.info(function(){if(f.g)if(Q)for(var pe="",Lt=Q.split("&"),Fr=0;Fr<Lt.length;Fr++){var Tt=Lt[Fr].split("=");if(1<Tt.length){var Yr=Tt[0];Tt=Tt[1];var Jr=Yr.split("_");pe=2<=Jr.length&&Jr[1]=="type"?pe+(Yr+"="+Tt+"&"):pe+(Yr+"=redacted&")}}else pe=null;else pe=Q;return"XMLHTTP REQ ("+O+") [attempt "+G+"]: "+N+`
`+A+`
`+pe})}function mV(f,N,A,O,G,Q,pe){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+G+"]: "+N+`
`+A+`
`+Q+" "+pe})}function fc(f,N,A,O){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+gV(f,A)+(O?" "+O:"")})}function pV(f,N){f.info(function(){return"TIMEOUT: "+N})}bd.prototype.info=function(){};function gV(f,N){if(!f.g)return N;if(!N)return null;try{var A=JSON.parse(N);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var O=A[f];if(!(2>O.length)){var G=O[1];if(Array.isArray(G)&&!(1>G.length)){var Q=G[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var pe=1;pe<G.length;pe++)G[pe]=""}}}}return hc(A)}catch{return N}}var km={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_y;function Im(){}x(Im,yy),Im.prototype.g=function(){return new XMLHttpRequest},Im.prototype.i=function(){return{}},_y=new Im;function Aa(f,N,A,O){this.j=f,this.i=N,this.l=A,this.R=O||1,this.U=new Yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cS}function cS(){this.i=null,this.g="",this.h=!1}var uS={},jy={};function Ny(f,N,A){f.L=1,f.v=Dm(Oi(N)),f.m=A,f.P=!0,dS(f,null)}function dS(f,N){f.F=Date.now(),Am(f),f.A=Oi(f.v);var A=f.A,O=f.R;Array.isArray(O)||(O=[String(O)]),SS(A.i,"t",O),f.C=0,A=f.j.J,f.h=new cS,f.g=BS(f.j,A?N:null,!f.m),0<f.O&&(f.M=new gd(m(f.Y,f,f.g),f.O)),N=f.U,A=f.g,O=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(vd[0]=G.toString()),G=vd);for(var Q=0;Q<G.length;Q++){var pe=Ke(A,G[Q],O||N.handleEvent,!1,N.h||N);if(!pe)break;N.g[pe.key]=pe}N=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),yd(),fV(f.i,f.u,f.A,f.l,f.R,f.m)}Aa.prototype.ca=function(f){f=f.target;const N=this.M;N&&Mi(f)==3?N.j():this.Y(f)},Aa.prototype.Y=function(f){try{if(f==this.g)e:{const Jr=Mi(this.g);var N=this.g.Ba();const gc=this.g.Z();if(!(3>Jr)&&(Jr!=3||this.g&&(this.h.h||this.g.oa()||RS(this.g)))){this.J||Jr!=4||N==7||(N==8||0>=gc?yd(3):yd(2)),Sy(this);var A=this.g.Z();this.X=A;t:if(hS(this)){var O=RS(this.g);f="";var G=O.length,Q=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xo(this),_d(this);var pe="";break t}this.h.i=new l.TextDecoder}for(N=0;N<G;N++)this.h.h=!0,f+=this.h.i.decode(O[N],{stream:!(Q&&N==G-1)});O.length=0,this.h.g+=f,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=A==200,mV(this.i,this.u,this.A,this.l,this.R,Jr,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,Fr=this.g;if((Lt=Fr.g?Fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Lt)){var Tt=Lt;break t}}Tt=null}if(A=Tt)fc(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ey(this,A);else{this.o=!1,this.s=3,dn(12),Xo(this),_d(this);break e}}if(this.P){A=!0;let Ts;for(;!this.J&&this.C<pe.length;)if(Ts=vV(this,pe),Ts==jy){Jr==4&&(this.s=4,dn(14),A=!1),fc(this.i,this.l,null,"[Incomplete Response]");break}else if(Ts==uS){this.s=4,dn(15),fc(this.i,this.l,pe,"[Invalid Chunk]"),A=!1;break}else fc(this.i,this.l,Ts,null),Ey(this,Ts);if(hS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jr!=4||pe.length!=0||this.h.h||(this.s=1,dn(16),A=!1),this.o=this.o&&A,!A)fc(this.i,this.l,pe,"[Invalid Chunked Response]"),Xo(this),_d(this);else if(0<pe.length&&!this.W){this.W=!0;var Yr=this.j;Yr.g==this&&Yr.ba&&!Yr.M&&(Yr.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Ry(Yr),Yr.M=!0,dn(11))}}else fc(this.i,this.l,pe,null),Ey(this,pe);Jr==4&&Xo(this),this.o&&!this.J&&(Jr==4?FS(this.j,this):(this.o=!1,Am(this)))}else DV(this.g),A==400&&0<pe.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),Xo(this),_d(this)}}}catch{}finally{}};function hS(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function vV(f,N){var A=f.C,O=N.indexOf(`
`,A);return O==-1?jy:(A=Number(N.substring(A,O)),isNaN(A)?uS:(O+=1,O+A>N.length?jy:(N=N.slice(O,O+A),f.C=O+A,N)))}Aa.prototype.cancel=function(){this.J=!0,Xo(this)};function Am(f){f.S=Date.now()+f.I,fS(f,f.I)}function fS(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=wd(m(f.ba,f),N)}function Sy(f){f.B&&(l.clearTimeout(f.B),f.B=null)}Aa.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(pV(this.i,this.A),this.L!=2&&(yd(),dn(17)),Xo(this),this.s=2,_d(this)):fS(this,this.S-f)};function _d(f){f.j.G==0||f.J||FS(f.j,f)}function Xo(f){Sy(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,Cm(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Ey(f,N){try{var A=f.j;if(A.G!=0&&(A.g==f||Cy(A.h,f))){if(!f.K&&Cy(A.h,f)&&A.G==3){try{var O=A.Da.g.parse(N)}catch{O=null}if(Array.isArray(O)&&O.length==3){var G=O;if(G[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)Um(A),Vm(A);else break e;Ay(A),dn(18)}}else A.za=G[1],0<A.za-A.T&&37500>G[2]&&A.F&&A.v==0&&!A.C&&(A.C=wd(m(A.Za,A),6e3));if(1>=gS(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Zo(A,11)}else if((f.K||A.g==f)&&Um(A),!v(N))for(G=A.Da.g.parse(N),N=0;N<G.length;N++){let Tt=G[N];if(A.T=Tt[0],Tt=Tt[1],A.G==2)if(Tt[0]=="c"){A.K=Tt[1],A.ia=Tt[2];const Yr=Tt[3];Yr!=null&&(A.la=Yr,A.j.info("VER="+A.la));const Jr=Tt[4];Jr!=null&&(A.Aa=Jr,A.j.info("SVER="+A.Aa));const gc=Tt[5];gc!=null&&typeof gc=="number"&&0<gc&&(O=1.5*gc,A.L=O,A.j.info("backChannelRequestTimeoutMs_="+O)),O=A;const Ts=f.g;if(Ts){const zm=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zm){var Q=O.h;Q.g||zm.indexOf("spdy")==-1&&zm.indexOf("quic")==-1&&zm.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ty(Q,Q.h),Q.h=null))}if(O.D){const Py=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Py&&(O.ya=Py,Ht(O.I,O.D,Py))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),O=A;var pe=f;if(O.qa=zS(O,O.J?O.ia:null,O.W),pe.K){vS(O.h,pe);var Lt=pe,Fr=O.L;Fr&&(Lt.I=Fr),Lt.B&&(Sy(Lt),Am(Lt)),O.g=pe}else LS(O);0<A.i.length&&Fm(A)}else Tt[0]!="stop"&&Tt[0]!="close"||Zo(A,7);else A.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Zo(A,7):Iy(A):Tt[0]!="noop"&&A.l&&A.l.ta(Tt),A.v=0)}}yd(4)}catch{}}var xV=class{constructor(f,N){this.g=f,this.map=N}};function mS(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pS(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function gS(f){return f.h?1:f.g?f.g.size:0}function Cy(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Ty(f,N){f.g?f.g.add(N):f.h=N}function vS(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}mS.prototype.cancel=function(){if(this.i=xS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function xS(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const A of f.g.values())N=N.concat(A.D);return N}return y(f.i)}function yV(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var N=[],A=f.length,O=0;O<A;O++)N.push(f[O]);return N}N=[],A=0;for(O in f)N[A++]=f[O];return N}function wV(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var N=[];f=f.length;for(var A=0;A<f;A++)N.push(A);return N}N=[],A=0;for(const O in f)N[A++]=O;return N}}}function yS(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var A=wV(f),O=yV(f),G=O.length,Q=0;Q<G;Q++)N.call(void 0,O[Q],A&&A[Q],f)}var wS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bV(f,N){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var O=f[A].indexOf("="),G=null;if(0<=O){var Q=f[A].substring(0,O);G=f[A].substring(O+1)}else Q=f[A];N(Q,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Qo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qo){this.h=f.h,Rm(this,f.j),this.o=f.o,this.g=f.g,Pm(this,f.s),this.l=f.l;var N=f.i,A=new Sd;A.i=N.i,N.g&&(A.g=new Map(N.g),A.h=N.h),bS(this,A),this.m=f.m}else f&&(N=String(f).match(wS))?(this.h=!1,Rm(this,N[1]||"",!0),this.o=jd(N[2]||""),this.g=jd(N[3]||"",!0),Pm(this,N[4]),this.l=jd(N[5]||"",!0),bS(this,N[6]||"",!0),this.m=jd(N[7]||"")):(this.h=!1,this.i=new Sd(null,this.h))}Qo.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Nd(N,_S,!0),":");var A=this.g;return(A||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Nd(N,_S,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(Nd(A,A.charAt(0)=="/"?NV:jV,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",Nd(A,EV)),f.join("")};function Oi(f){return new Qo(f)}function Rm(f,N,A){f.j=A?jd(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Pm(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function bS(f,N,A){N instanceof Sd?(f.i=N,CV(f.i,f.h)):(A||(N=Nd(N,SV)),f.i=new Sd(N,f.h))}function Ht(f,N,A){f.i.set(N,A)}function Dm(f){return Ht(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function jd(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Nd(f,N,A){return typeof f=="string"?(f=encodeURI(f).replace(N,_V),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _V(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var _S=/[#\/\?@]/g,jV=/[#\?:]/g,NV=/[#\?]/g,SV=/[#\?@]/g,EV=/#/g;function Sd(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Ra(f){f.g||(f.g=new Map,f.h=0,f.i&&bV(f.i,function(N,A){f.add(decodeURIComponent(N.replace(/\+/g," ")),A)}))}t=Sd.prototype,t.add=function(f,N){Ra(this),this.i=null,f=mc(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(N),this.h+=1,this};function jS(f,N){Ra(f),N=mc(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function NS(f,N){return Ra(f),N=mc(f,N),f.g.has(N)}t.forEach=function(f,N){Ra(this),this.g.forEach(function(A,O){A.forEach(function(G){f.call(N,G,O,this)},this)},this)},t.na=function(){Ra(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),A=[];for(let O=0;O<N.length;O++){const G=f[O];for(let Q=0;Q<G.length;Q++)A.push(N[O])}return A},t.V=function(f){Ra(this);let N=[];if(typeof f=="string")NS(this,f)&&(N=N.concat(this.g.get(mc(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)N=N.concat(f[A])}return N},t.set=function(f,N){return Ra(this),this.i=null,f=mc(this,f),NS(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},t.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function SS(f,N,A){jS(f,N),0<A.length&&(f.i=null,f.g.set(mc(f,N),y(A)),f.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var A=0;A<N.length;A++){var O=N[A];const Q=encodeURIComponent(String(O)),pe=this.V(O);for(O=0;O<pe.length;O++){var G=Q;pe[O]!==""&&(G+="="+encodeURIComponent(String(pe[O]))),f.push(G)}}return this.i=f.join("&")};function mc(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function CV(f,N){N&&!f.j&&(Ra(f),f.i=null,f.g.forEach(function(A,O){var G=O.toLowerCase();O!=G&&(jS(this,O),SS(this,G,A))},f)),f.j=N}function TV(f,N){const A=new bd;if(l.Image){const O=new Image;O.onload=g(Pa,A,"TestLoadImage: loaded",!0,N,O),O.onerror=g(Pa,A,"TestLoadImage: error",!1,N,O),O.onabort=g(Pa,A,"TestLoadImage: abort",!1,N,O),O.ontimeout=g(Pa,A,"TestLoadImage: timeout",!1,N,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else N(!1)}function kV(f,N){const A=new bd,O=new AbortController,G=setTimeout(()=>{O.abort(),Pa(A,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:O.signal}).then(Q=>{clearTimeout(G),Q.ok?Pa(A,"TestPingServer: ok",!0,N):Pa(A,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(G),Pa(A,"TestPingServer: error",!1,N)})}function Pa(f,N,A,O,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),O(A)}catch{}}function IV(){this.g=new hV}function AV(f,N,A){const O=A||"";try{yS(f,function(G,Q){let pe=G;u(G)&&(pe=hc(G)),N.push(O+Q+"="+encodeURIComponent(pe))})}catch(G){throw N.push(O+"type="+encodeURIComponent("_badmap")),G}}function Om(f){this.l=f.Ub||null,this.j=f.eb||!1}x(Om,yy),Om.prototype.g=function(){return new Mm(this.l,this.j)},Om.prototype.i=function(f){return function(){return f}}({});function Mm(f,N){gt.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Mm,gt),t=Mm.prototype,t.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,Cd(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||l).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ed(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Cd(this)),this.g&&(this.readyState=3,Cd(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ES(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ES(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Ed(this):Cd(this),this.readyState==3&&ES(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Ed(this))},t.Qa=function(f){this.g&&(this.response=f,Ed(this))},t.ga=function(){this.g&&Ed(this)};function Ed(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Cd(f)}t.setRequestHeader=function(f,N){this.u.append(f,N)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var A=N.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=N.next();return f.join(`\r
`)};function Cd(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Mm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function CS(f){let N="";return I(f,function(A,O){N+=O,N+=":",N+=A,N+=`\r
`}),N}function ky(f,N,A){e:{for(O in A){var O=!1;break e}O=!0}O||(A=CS(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):Ht(f,N,A))}function ur(f){gt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ur,gt);var RV=/^https?$/i,PV=["POST","PUT"];t=ur.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,N,A,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_y.g(),this.v=this.o?rS(this.o):rS(_y),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(Q){TS(this,Q);return}if(f=A||"",A=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var G in O)A.set(G,O[G]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const Q of O.keys())A.set(Q,O.get(Q));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(A.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(PV,N,void 0))||O||G||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,pe]of A)this.g.setRequestHeader(Q,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{AS(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){TS(this,Q)}};function TS(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,kS(f),Lm(f)}function kS(f){f.A||(f.A=!0,wt(f,"complete"),wt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,wt(this,"complete"),wt(this,"abort"),Lm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lm(this,!0)),ur.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?IS(this):this.bb())},t.bb=function(){IS(this)};function IS(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Mi(f)!=4||f.Z()!=2)){if(f.u&&Mi(f)==4)Em(f.Ea,0,f);else if(wt(f,"readystatechange"),Mi(f)==4){f.h=!1;try{const pe=f.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var A;if(!(A=N)){var O;if(O=pe===0){var G=String(f.D).match(wS)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),O=!RV.test(G?G.toLowerCase():"")}A=O}if(A)wt(f,"complete"),wt(f,"success");else{f.m=6;try{var Q=2<Mi(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",kS(f)}}finally{Lm(f)}}}}function Lm(f,N){if(f.g){AS(f);const A=f.g,O=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||wt(f,"ready");try{A.onreadystatechange=O}catch{}}}function AS(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Mi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),dV(N)}};function RS(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function DV(f){const N={};f=(f.g&&2<=Mi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(v(f[O]))continue;var A=P(f[O]);const G=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Q=N[G]||[];N[G]=Q,Q.push(A)}T(N,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Td(f,N,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||N}function PS(f){this.Aa=0,this.i=[],this.j=new bd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Td("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Td("baseRetryDelayMs",5e3,f),this.cb=Td("retryDelaySeedMs",1e4,f),this.Wa=Td("forwardChannelMaxRetries",2,f),this.wa=Td("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new mS(f&&f.concurrentRequestLimit),this.Da=new IV,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=PS.prototype,t.la=8,t.G=1,t.connect=function(f,N,A,O){dn(0),this.W=f,this.H=N||{},A&&O!==void 0&&(this.H.OSID=A,this.H.OAID=O),this.F=this.X,this.I=zS(this,null,this.W),Fm(this)};function Iy(f){if(DS(f),f.G==3){var N=f.U++,A=Oi(f.I);if(Ht(A,"SID",f.K),Ht(A,"RID",N),Ht(A,"TYPE","terminate"),kd(f,A),N=new Aa(f,f.j,N),N.L=2,N.v=Dm(Oi(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(N.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=N.v,A=!0),A||(N.g=BS(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Am(N)}$S(f)}function Vm(f){f.g&&(Ry(f),f.g.cancel(),f.g=null)}function DS(f){Vm(f),f.u&&(l.clearTimeout(f.u),f.u=null),Um(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function Fm(f){if(!pS(f.h)&&!f.s){f.s=!0;var N=f.Ga;F||z(),L||(F(),L=!0),W.add(N,f),f.B=0}}function OV(f,N){return gS(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=wd(m(f.Ga,f,N),US(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new Aa(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=k(Q),j(Q,this.S)):Q=this.S),this.m!==null||this.O||(G.H=Q,Q=null),this.P)e:{for(var N=0,A=0;A<this.i.length;A++){t:{var O=this.i[A];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(N+=O,4096<N){N=A;break e}if(N===4096||A===this.i.length-1){N=A+1;break e}}N=1e3}else N=1e3;N=MS(this,G,N),A=Oi(this.I),Ht(A,"RID",f),Ht(A,"CVER",22),this.D&&Ht(A,"X-HTTP-Session-Id",this.D),kd(this,A),Q&&(this.O?N="headers="+encodeURIComponent(String(CS(Q)))+"&"+N:this.m&&ky(A,this.m,Q)),Ty(this.h,G),this.Ua&&Ht(A,"TYPE","init"),this.P?(Ht(A,"$req",N),Ht(A,"SID","null"),G.T=!0,Ny(G,A,null)):Ny(G,A,N),this.G=2}}else this.G==3&&(f?OS(this,f):this.i.length==0||pS(this.h)||OS(this))};function OS(f,N){var A;N?A=N.l:A=f.U++;const O=Oi(f.I);Ht(O,"SID",f.K),Ht(O,"RID",A),Ht(O,"AID",f.T),kd(f,O),f.m&&f.o&&ky(O,f.m,f.o),A=new Aa(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),N&&(f.i=N.D.concat(f.i)),N=MS(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ty(f.h,A),Ny(A,O,N)}function kd(f,N){f.H&&I(f.H,function(A,O){Ht(N,O,A)}),f.l&&yS({},function(A,O){Ht(N,O,A)})}function MS(f,N,A){A=Math.min(f.i.length,A);var O=f.l?m(f.l.Na,f.l,f):null;e:{var G=f.i;let Q=-1;for(;;){const pe=["count="+A];Q==-1?0<A?(Q=G[0].g,pe.push("ofs="+Q)):Q=0:pe.push("ofs="+Q);let Lt=!0;for(let Fr=0;Fr<A;Fr++){let Tt=G[Fr].g;const Yr=G[Fr].map;if(Tt-=Q,0>Tt)Q=Math.max(0,G[Fr].g-100),Lt=!1;else try{AV(Yr,pe,"req"+Tt+"_")}catch{O&&O(Yr)}}if(Lt){O=pe.join("&");break e}}}return f=f.i.splice(0,A),N.D=f,O}function LS(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;F||z(),L||(F(),L=!0),W.add(N,f),f.v=0}}function Ay(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=wd(m(f.Fa,f),US(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,VS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=wd(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),Vm(this),VS(this))};function Ry(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function VS(f){f.g=new Aa(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=Oi(f.qa);Ht(N,"RID","rpc"),Ht(N,"SID",f.K),Ht(N,"AID",f.T),Ht(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ht(N,"TO",f.ja),Ht(N,"TYPE","xmlhttp"),kd(f,N),f.m&&f.o&&ky(N,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=Dm(Oi(N)),A.m=null,A.P=!0,dS(A,f)}t.Za=function(){this.C!=null&&(this.C=null,Vm(this),Ay(this),dn(19))};function Um(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function FS(f,N){var A=null;if(f.g==N){Um(f),Ry(f),f.g=null;var O=2}else if(Cy(f.h,N))A=N.D,vS(f.h,N),O=1;else return;if(f.G!=0){if(N.o)if(O==1){A=N.m?N.m.length:0,N=Date.now()-N.F;var G=f.B;O=Tm(),wt(O,new oS(O,A)),Fm(f)}else LS(f);else if(G=N.s,G==3||G==0&&0<N.X||!(O==1&&OV(f,N)||O==2&&Ay(f)))switch(A&&0<A.length&&(N=f.h,N.i=N.i.concat(A)),G){case 1:Zo(f,5);break;case 4:Zo(f,10);break;case 3:Zo(f,6);break;default:Zo(f,2)}}}function US(f,N){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*N}function Zo(f,N){if(f.j.info("Error code "+N),N==2){var A=m(f.fb,f),O=f.Xa;const G=!O;O=new Qo(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rm(O,"https"),Dm(O),G?TV(O.toString(),A):kV(O.toString(),A)}else dn(2);f.G=0,f.l&&f.l.sa(N),$S(f),DS(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function $S(f){if(f.G=0,f.ka=[],f.l){const N=xS(f.h);(N.length!=0||f.i.length!=0)&&(_(f.ka,N),_(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function zS(f,N,A){var O=A instanceof Qo?Oi(A):new Qo(A);if(O.g!="")N&&(O.g=N+"."+O.g),Pm(O,O.s);else{var G=l.location;O=G.protocol,N=N?N+"."+G.hostname:G.hostname,G=+G.port;var Q=new Qo(null);O&&Rm(Q,O),N&&(Q.g=N),G&&Pm(Q,G),A&&(Q.l=A),O=Q}return A=f.D,N=f.ya,A&&N&&Ht(O,A,N),Ht(O,"VER",f.la),kd(f,O),O}function BS(f,N,A){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new ur(new Om({eb:A})):new ur(f.pa),N.Ha(f.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qS(){}t=qS.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $m(){}$m.prototype.g=function(f,N){return new Gn(f,N)};function Gn(f,N){gt.call(this),this.g=new PS(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!v(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!v(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new pc(this)}x(Gn,gt),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Iy(this.g)},Gn.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=hc(f),f=A);N.i.push(new xV(N.Ya++,f)),N.G==3&&Fm(N)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Iy(this.g),delete this.g,Gn.aa.N.call(this)};function WS(f){wy.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const A in N){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}x(WS,wy);function HS(){by.call(this),this.status=1}x(HS,by);function pc(f){this.g=f}x(pc,qS),pc.prototype.ua=function(){wt(this.g,"a")},pc.prototype.ta=function(f){wt(this.g,new WS(f))},pc.prototype.sa=function(f){wt(this.g,new HS)},pc.prototype.ra=function(){wt(this.g,"b")},$m.prototype.createWebChannel=$m.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,xP=function(){return new $m},vP=function(){return Tm()},gP=Jo,mb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},km.NO_ERROR=0,km.TIMEOUT=8,km.HTTP_ERROR=6,Jp=km,lS.COMPLETE="complete",pP=lS,nS.EventType=xd,xd.OPEN="a",xd.CLOSE="b",xd.ERROR="c",xd.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Qd=nS,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,mP=ur}).apply(typeof op<"u"?op:typeof self<"u"?self:typeof window<"u"?window:{});const WC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new sx("@firebase/firestore");function Vd(){return Pl.logLevel}function Re(t,...e){if(Pl.logLevel<=vt.DEBUG){const r=e.map(Rj);Pl.debug(`Firestore (${td}): ${t}`,...r)}}function ma(t,...e){if(Pl.logLevel<=vt.ERROR){const r=e.map(Rj);Pl.error(`Firestore (${td}): ${t}`,...r)}}function Su(t,...e){if(Pl.logLevel<=vt.WARN){const r=e.map(Rj);Pl.warn(`Firestore (${td}): ${t}`,...r)}}function Rj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t="Unexpected state"){const e=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+t;throw ma(e),new Error(e)}function Dt(t,e){t||He()}function Je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Es{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(en.UNAUTHENTICATED))}shutdown(){}}class v7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class x7{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Dt(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ra,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ra)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Dt(typeof n.accessToken=="string"),new yP(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string"),new en(e)}}class y7{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w7{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new y7(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Dt(this.o===void 0);const n=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Dt(typeof r.token=="string"),this.R=r.token,new b7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=j7(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function kt(t,e){return t<e?-1:t>e?1:0}function Eu(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ir(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Ir(0,0))}static max(){return new Ye(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,r,n){r===void 0?r=0:r>e.length&&He(),n===void 0?n=e.length-r:n>e.length-r&&He(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ef.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ef?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),o=r.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ft extends ef{construct(e,r,n){return new Ft(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new we(ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Ft(r)}static emptyPath(){return new Ft([])}}const N7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends ef{construct(e,r,n){return new Br(e,r,n)}static isValidIdentifier(e){return N7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new we(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new we(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new we(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(r)}static emptyPath(){return new Br([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ft.fromString(e))}static fromName(e){return new Ve(Ft.fromString(e).popFirst(5))}static empty(){return new Ve(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ft.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ft(e.slice()))}}function S7(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(n===1e9?new Ir(r+1,0):new Ir(r,n));return new jo(i,Ve.empty(),e)}function E7(t){return new jo(t.readTime,t.key,-1)}class jo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new jo(Ye.min(),Ve.empty(),-1)}static max(){return new jo(Ye.max(),Ve.empty(),-1)}}function C7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ve.comparator(t.documentKey,e.documentKey),r!==0?r:kt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==T7)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ne((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ne?r:ne.resolve(r)}catch(r){return ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.reject(r)}static resolve(e){return new ne((r,n)=>{r(e)})}static reject(e){return new ne((r,n)=>{n(e)})}static waitFor(e){return new ne((r,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&r()},c=>n(c))}),o=!0,a===i&&r()})}static or(e){let r=ne.resolve(!1);for(const n of e)r=r.next(i=>i?ne.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new ne((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===a&&n(o)},d=>i(d))}})}static doWhile(e,r){return new ne((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function I7(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Wf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pj.oe=-1;function cx(t){return t==null}function Hg(t){return t===0&&1/t==-1/0}function A7(t){return typeof t=="number"&&Number.isInteger(t)&&!Hg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Zl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function bP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,r){this.comparator=e,this.root=r||zr.EMPTY}insert(e,r){return new cr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lp(this.root,e,this.comparator,!0)}}class lp{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??zr.RED,this.left=i??zr.EMPTY,this.right=a??zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new zr(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return zr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,r,n,i,a){return this}insert(e,r,n){return new zr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new GC(this.data.getIterator())}getIteratorFrom(e){return new GC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Wr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Wr(this.comparator);return r.data=e,r}}class GC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Br.comparator)}static empty(){return new Qn([])}unionWith(e){let r=new Wr(Br.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Qn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Eu(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _P("Invalid base64 string: "+a):a}}(e);return new Gr(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Gr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const R7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(t){if(Dt(!!t),typeof t=="string"){let e=0;const r=R7.exec(t);if(Dt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:fr(t.seconds),nanos:fr(t.nanos)}}function fr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dl(t){return typeof t=="string"?Gr.fromBase64String(t):Gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Dj(t){const e=t.mapValue.fields.__previous_value__;return ux(e)?Dj(e):e}function tf(t){const e=No(t.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,r,n,i,a,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class rf{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new rf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ol(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ux(t)?4:O7(t)?9007199254740991:D7(t)?10:11:He()}function Ei(t,e){if(t===e)return!0;const r=Ol(t);if(r!==Ol(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tf(t).isEqual(tf(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=No(i.timestampValue),l=No(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Dl(i.bytesValue).isEqual(Dl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return fr(i.geoPointValue.latitude)===fr(a.geoPointValue.latitude)&&fr(i.geoPointValue.longitude)===fr(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return fr(i.integerValue)===fr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=fr(i.doubleValue),l=fr(a.doubleValue);return o===l?Hg(o)===Hg(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Eu(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(HC(o)!==HC(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ei(o[c],l[c])))return!1;return!0}(t,e);default:return He()}}function nf(t,e){return(t.values||[]).find(r=>Ei(r,e))!==void 0}function Cu(t,e){if(t===e)return 0;const r=Ol(t),n=Ol(e);if(r!==n)return kt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return kt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=fr(a.integerValue||a.doubleValue),c=fr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return KC(t.timestampValue,e.timestampValue);case 4:return KC(tf(t),tf(e));case 5:return kt(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Dl(a),c=Dl(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=kt(l[u],c[u]);if(d!==0)return d}return kt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=kt(fr(a.latitude),fr(o.latitude));return l!==0?l:kt(fr(a.longitude),fr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YC(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const h=a.fields||{},m=o.fields||{},g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,y=kt(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:YC(g,x)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===cp.mapValue&&o===cp.mapValue)return 0;if(a===cp.mapValue)return 1;if(o===cp.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=kt(c[h],d[h]);if(m!==0)return m;const g=Cu(l[c[h]],u[d[h]]);if(g!==0)return g}return kt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw He()}}function KC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return kt(t,e);const r=No(t),n=No(e),i=kt(r.seconds,n.seconds);return i!==0?i:kt(r.nanos,n.nanos)}function YC(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Cu(r[i],n[i]);if(a)return a}return kt(r.length,n.length)}function Tu(t){return pb(t)}function pb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=No(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Dl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=pb(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${pb(r.fields[o])}`;return i+"}"}(t.mapValue):He()}function Gg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gb(t){return!!t&&"integerValue"in t}function Oj(t){return!!t&&"arrayValue"in t}function JC(t){return!!t&&"nullValue"in t}function XC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xp(t){return!!t&&"mapValue"in t}function D7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function vh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=vh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=vh(t.arrayValue.values[r]);return e}return Object.assign({},t)}function O7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Xp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(r)}setAll(e){let r=Br.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=l.popLast()}o?n[l.lastSegment()]=vh(o):i.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());Xp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Xp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Zl(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Pn(vh(this.value))}}function jP(t){const e=[];return Zl(t.fields,(r,n)=>{const i=new Br([r]);if(Xp(n)){const a=jP(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,r,n,i,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new nn(e,0,Ye.min(),Ye.min(),Ye.min(),Pn.empty(),0)}static newFoundDocument(e,r,n,i){return new nn(e,1,r,Ye.min(),n,i,0)}static newNoDocument(e,r){return new nn(e,2,r,Ye.min(),Ye.min(),Pn.empty(),0)}static newUnknownDocument(e,r){return new nn(e,3,r,Ye.min(),Ye.min(),Pn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,r){this.position=e,this.inclusive=r}}function QC(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=Ve.comparator(Ve.fromName(o.referenceValue),r.key):n=Cu(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function ZC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ei(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,r="asc"){this.field=e,this.dir=r}}function M7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NP=class{};class br extends NP{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new V7(e,r,n):r==="array-contains"?new $7(e,n):r==="in"?new z7(e,n):r==="not-in"?new B7(e,n):r==="array-contains-any"?new q7(e,n):new br(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new F7(e,n):new U7(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Cu(r,this.value)):r!==null&&Ol(this.value)===Ol(r)&&this.matchesComparison(Cu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xs extends NP{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Xs(e,r)}matches(e){return SP(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function SP(t){return t.op==="and"}function EP(t){return L7(t)&&SP(t)}function L7(t){for(const e of t.filters)if(e instanceof Xs)return!1;return!0}function vb(t){if(t instanceof br)return t.field.canonicalString()+t.op.toString()+Tu(t.value);if(EP(t))return t.filters.map(e=>vb(e)).join(",");{const e=t.filters.map(r=>vb(r)).join(",");return`${t.op}(${e})`}}function CP(t,e){return t instanceof br?function(n,i){return i instanceof br&&n.op===i.op&&n.field.isEqual(i.field)&&Ei(n.value,i.value)}(t,e):t instanceof Xs?function(n,i){return i instanceof Xs&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&CP(o,i.filters[l]),!0):!1}(t,e):void He()}function TP(t){return t instanceof br?function(r){return`${r.field.canonicalString()} ${r.op} ${Tu(r.value)}`}(t):t instanceof Xs?function(r){return r.op.toString()+" {"+r.getFilters().map(TP).join(" ,")+"}"}(t):"Filter"}class V7 extends br{constructor(e,r,n){super(e,r,n),this.key=Ve.fromName(n.referenceValue)}matches(e){const r=Ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class F7 extends br{constructor(e,r){super(e,"in",r),this.keys=kP("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class U7 extends br{constructor(e,r){super(e,"not-in",r),this.keys=kP("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function kP(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ve.fromName(n.referenceValue))}class $7 extends br{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Oj(r)&&nf(r.arrayValue,this.value)}}class z7 extends br{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&nf(this.value.arrayValue,r)}}class B7 extends br{constructor(e,r){super(e,"not-in",r)}matches(e){if(nf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!nf(this.value.arrayValue,r)}}class q7 extends br{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Oj(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>nf(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,r=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function e2(t,e=null,r=[],n=[],i=null,a=null,o=null){return new W7(t,e,r,n,i,a,o)}function Mj(t){const e=Je(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>vb(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),cx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Tu(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Tu(n)).join(",")),e.ue=r}return e.ue}function Lj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!M7(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!CP(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZC(t.startAt,e.startAt)&&ZC(t.endAt,e.endAt)}function xb(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,r=null,n=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function H7(t,e,r,n,i,a,o,l){return new ec(t,e,r,n,i,a,o,l)}function dx(t){return new ec(t)}function t2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vj(t){return t.collectionGroup!==null}function ou(t){const e=Je(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Wr(Br.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new sf(a,n))}),r.has(Br.keyField().canonicalString())||e.ce.push(new sf(Br.keyField(),n))}return e.ce}function bi(t){const e=Je(t);return e.le||(e.le=G7(e,ou(t))),e.le}function G7(t,e){if(t.limitType==="F")return e2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new sf(i.field,a)});const r=t.endAt?new ku(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ku(t.startAt.position,t.startAt.inclusive):null;return e2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function yb(t,e){const r=t.filters.concat([e]);return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Kg(t,e,r){return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function hx(t,e){return Lj(bi(t),bi(e))&&t.limitType===e.limitType}function IP(t){return`${Mj(bi(t))}|lt:${t.limitType}`}function Ac(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>TP(i)).join(", ")}]`),cx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Tu(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Tu(i)).join(",")),`Target(${n})`}(bi(t))}; limitType=${t.limitType})`}function fx(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Ve.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of ou(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,c){const u=QC(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,ou(n),i)||n.endAt&&!function(o,l,c){const u=QC(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,ou(n),i))}(t,e)}function K7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AP(t){return(e,r)=>{let n=!1;for(const i of ou(t)){const a=Y7(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Y7(t,e,r){const n=t.field.isKeyField()?Ve.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Cu(c,u):He()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return bP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=new cr(Ve.comparator);function pa(){return J7}const RP=new cr(Ve.comparator);function Zd(...t){let e=RP;for(const r of t)e=e.insert(r.key,r);return e}function PP(t){let e=RP;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ml(){return xh()}function DP(){return xh()}function xh(){return new rd(t=>t.toString(),(t,e)=>t.isEqual(e))}const X7=new cr(Ve.comparator),Q7=new Wr(Ve.comparator);function pt(...t){let e=Q7;for(const r of t)e=e.add(r);return e}const Z7=new Wr(kt);function eq(){return Z7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hg(e)?"-0":e}}function OP(t){return{integerValue:""+t}}function MP(t,e){return A7(e)?OP(e):Fj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this._=void 0}}function tq(t,e,r){return t instanceof af?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ux(a)&&(a=Dj(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof of?VP(t,e):t instanceof lf?FP(t,e):function(i,a){const o=LP(i,a),l=r2(o)+r2(i.Pe);return gb(o)&&gb(i.Pe)?OP(l):Fj(i.serializer,l)}(t,e)}function rq(t,e,r){return t instanceof of?VP(t,e):t instanceof lf?FP(t,e):r}function LP(t,e){return t instanceof cf?function(n){return gb(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class af extends mx{}class of extends mx{constructor(e){super(),this.elements=e}}function VP(t,e){const r=UP(e);for(const n of t.elements)r.some(i=>Ei(i,n))||r.push(n);return{arrayValue:{values:r}}}class lf extends mx{constructor(e){super(),this.elements=e}}function FP(t,e){let r=UP(e);for(const n of t.elements)r=r.filter(i=>!Ei(i,n));return{arrayValue:{values:r}}}class cf extends mx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function r2(t){return fr(t.integerValue||t.doubleValue)}function UP(t){return Oj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,r){this.field=e,this.transform=r}}function nq(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof of&&i instanceof of||n instanceof lf&&i instanceof lf?Eu(n.elements,i.elements,Ei):n instanceof cf&&i instanceof cf?Ei(n.Pe,i.Pe):n instanceof af&&i instanceof af}(t.transform,e.transform)}class sq{constructor(e,r){this.version=e,this.transformResults=r}}class wn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class px{}function zP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gx(t.key,wn.none()):new Hf(t.key,t.data,wn.none());{const r=t.data,n=Pn.empty();let i=new Wr(Br.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Uo(t.key,n,new Qn(i.toArray()),wn.none())}}function iq(t,e,r){t instanceof Hf?function(i,a,o){const l=i.value.clone(),c=s2(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Uo?function(i,a,o){if(!Qp(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=s2(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(BP(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function yh(t,e,r,n){return t instanceof Hf?function(a,o,l,c){if(!Qp(a.precondition,o))return l;const u=a.value.clone(),d=i2(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Uo?function(a,o,l,c){if(!Qp(a.precondition,o))return l;const u=i2(a.fieldTransforms,c,o),d=o.data;return d.setAll(BP(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,o,l){return Qp(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function aq(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=LP(n.transform,i||null);a!=null&&(r===null&&(r=Pn.empty()),r.set(n.field,a))}return r||null}function n2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Eu(n,i,(a,o)=>nq(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hf extends px{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uo extends px{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BP(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function s2(t,e,r){const n=new Map;Dt(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,rq(o,l,r[i]))}return n}function i2(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,tq(a,o,e))}return n}class gx extends px{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oq extends px{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&iq(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=yh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=yh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=DP();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const c=zP(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),pt())}isEqual(e){return this.batchId===e.batchId&&Eu(this.mutations,e.mutations,(r,n)=>n2(r,n))&&Eu(this.baseMutations,e.baseMutations,(r,n)=>n2(r,n))}}class Uj{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Dt(e.mutations.length===n.length);let i=function(){return X7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new Uj(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cq=class{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,bt;function dq(t){switch(t){default:return He();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function qP(t){if(t===void 0)return ma("GRPC error has no .code"),ee.UNKNOWN;switch(t){case xr.OK:return ee.OK;case xr.CANCELLED:return ee.CANCELLED;case xr.UNKNOWN:return ee.UNKNOWN;case xr.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case xr.INTERNAL:return ee.INTERNAL;case xr.UNAVAILABLE:return ee.UNAVAILABLE;case xr.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case xr.NOT_FOUND:return ee.NOT_FOUND;case xr.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case xr.ABORTED:return ee.ABORTED;case xr.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case xr.DATA_LOSS:return ee.DATA_LOSS;default:return He()}}(bt=xr||(xr={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=new yl([4294967295,4294967295],0);function a2(t){const e=hq().encode(t),r=new fP;return r.update(e),new Uint8Array(r.digest())}function o2(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yl([r,n],0),new yl([i,a],0)]}class $j{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new eh(`Invalid padding: ${r}`);if(n<0)throw new eh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new eh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new eh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=yl.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(yl.fromNumber(n)));return i.compare(fq)===1&&(i=new yl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=a2(e),[n,i]=o2(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new $j(a,i,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=a2(e),[n,i]=o2(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class eh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Gf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new vx(Ye.min(),i,new cr(kt),pa(),pt())}}class Gf{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Gf(n,r,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class WP{constructor(e,r){this.targetId=e,this.me=r}}class HP{constructor(e,r,n=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class l2{constructor(){this.fe=0,this.ge=u2(),this.pe=Gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pt(),r=pt(),n=pt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:He()}}),new Gf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=u2()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mq{constructor(e){this.Le=e,this.Be=new Map,this.ke=pa(),this.qe=c2(),this.Qe=new cr(kt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:He()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(xb(a))if(n===0){const o=new Ve(a.path);this.Ue(r,o,nn.newNoDocument(o,Ye.min()))}else Dt(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=Dl(n).toUint8Array()}catch(c){if(c instanceof _P)return Su("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new $j(o,i,a)}catch(c){return Su(c instanceof eh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&xb(l.target)){const c=new Ve(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,nn.newNoDocument(c,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=pt();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new vx(e,r,this.Qe,this.ke,n);return this.ke=pa(),this.qe=c2(),this.Qe=new cr(kt),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new l2,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Wr(kt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Re("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new l2),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function c2(){return new cr(Ve.comparator)}function u2(){return new cr(Ve.comparator)}const pq={asc:"ASCENDING",desc:"DESCENDING"},gq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vq={and:"AND",or:"OR"};class xq{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function wb(t,e){return t.useProto3Json||cx(e)?e:{value:e}}function Yg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yq(t,e){return Yg(t,e.toTimestamp())}function _i(t){return Dt(!!t),Ye.fromTimestamp(function(r){const n=No(r);return new Ir(n.seconds,n.nanos)}(t))}function zj(t,e){return bb(t,e).canonicalString()}function bb(t,e){const r=function(i){return new Ft(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function KP(t){const e=Ft.fromString(t);return Dt(ZP(e)),e}function _b(t,e){return zj(t.databaseId,e.path)}function m0(t,e){const r=KP(e);if(r.get(1)!==t.databaseId.projectId)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ve(JP(r))}function YP(t,e){return zj(t.databaseId,e)}function wq(t){const e=KP(t);return e.length===4?Ft.emptyPath():JP(e)}function jb(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JP(t){return Dt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function d2(t,e,r){return{name:_b(t,e),fields:r.value.mapValue.fields}}function bq(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Dt(d===void 0||typeof d=="string"),Gr.fromBase64String(d||"")):(Dt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ee.UNKNOWN:qP(u.code);return new we(d,u.message||"")}(o);r=new HP(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=m0(t,n.document.name),a=_i(n.document.updateTime),o=n.document.createTime?_i(n.document.createTime):Ye.min(),l=new Pn({mapValue:{fields:n.document.fields}}),c=nn.newFoundDocument(i,a,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Zp(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=m0(t,n.document),a=n.readTime?_i(n.readTime):Ye.min(),o=nn.newNoDocument(i,a),l=n.removedTargetIds||[];r=new Zp([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=m0(t,n.document),a=n.removedTargetIds||[];r=new Zp([],a,i,null)}else{if(!("filter"in e))return He();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new uq(i,a),l=n.targetId;r=new WP(l,o)}}return r}function _q(t,e){let r;if(e instanceof Hf)r={update:d2(t,e.key,e.value)};else if(e instanceof gx)r={delete:_b(t,e.key)};else if(e instanceof Uo)r={update:d2(t,e.key,e.data),updateMask:Aq(e.fieldMask)};else{if(!(e instanceof oq))return He();r={verify:_b(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof af)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof of)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cf)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw He()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:yq(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:He()}(t,e.precondition)),r}function jq(t,e){return t&&t.length>0?(Dt(e!==void 0),t.map(r=>function(i,a){let o=i.updateTime?_i(i.updateTime):_i(a);return o.isEqual(Ye.min())&&(o=_i(a)),new sq(o,i.transformResults||[])}(r,e))):[]}function Nq(t,e){return{documents:[YP(t,e.path)]}}function Sq(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YP(t,i);const a=function(u){if(u.length!==0)return QP(Xs.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Rc(m.field),direction:Tq(m.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=wb(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:i}}function Eq(t){let e=wq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Dt(n===1);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const m=XP(h);return m instanceof Xs&&EP(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(m=>function(x){return new sf(Pc(x.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,cx(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(h){const m=!!h.before,g=h.values||[];return new ku(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new ku(g,m)}(r.endAt)),H7(e,i,o,a,l,"F",c,u)}function Cq(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function XP(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Pc(r.unaryFilter.field);return br.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Pc(r.unaryFilter.field);return br.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pc(r.unaryFilter.field);return br.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pc(r.unaryFilter.field);return br.create(o,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(t):t.fieldFilter!==void 0?function(r){return br.create(Pc(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Xs.create(r.compositeFilter.filters.map(n=>XP(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return He()}}(r.compositeFilter.op))}(t):He()}function Tq(t){return pq[t]}function kq(t){return gq[t]}function Iq(t){return vq[t]}function Rc(t){return{fieldPath:t.canonicalString()}}function Pc(t){return Br.fromServerFormat(t.fieldPath)}function QP(t){return t instanceof br?function(r){if(r.op==="=="){if(XC(r.value))return{unaryFilter:{field:Rc(r.field),op:"IS_NAN"}};if(JC(r.value))return{unaryFilter:{field:Rc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(XC(r.value))return{unaryFilter:{field:Rc(r.field),op:"IS_NOT_NAN"}};if(JC(r.value))return{unaryFilter:{field:Rc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rc(r.field),op:kq(r.op),value:r.value}}}(t):t instanceof Xs?function(r){const n=r.getFilters().map(i=>QP(i));return n.length===1?n[0]:{compositeFilter:{op:Iq(r.op),filters:n}}}(t):He()}function Aq(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function ZP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,r,n,i,a=Ye.min(),o=Ye.min(),l=Gr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.ct=e}}function Pq(t){const e=Eq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(){this.un=new Oq}addToCollectionParentIndex(e,r){return this.un.add(r),ne.resolve()}getCollectionParents(e,r){return ne.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ne.resolve()}deleteFieldIndex(e,r){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,r){return ne.resolve()}getDocumentsMatchingTarget(e,r){return ne.resolve(null)}getIndexType(e,r){return ne.resolve(0)}getFieldIndexes(e,r){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,r){return ne.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,r){return ne.resolve(jo.min())}updateCollectionGroup(e,r,n){return ne.resolve()}updateIndexEntries(e,r){return ne.resolve()}}class Oq{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Wr(Ft.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Wr(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Iu(0)}static kn(){return new Iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(){this.changes=new rd(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&yh(n.mutation,i,Qn.empty(),Ir.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,pt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=pt()){const i=ml();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=Zd();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=ml();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,pt()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,i){let a=pa();const o=xh(),l=function(){return xh()}();return r.forEach((c,u)=>{const d=n.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Uo)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),yh(d.mutation,u,d.mutation.getFieldMask(),Ir.now())):o.set(u.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var h;return l.set(u,new Lq(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=xh();let i=new cr((o,l)=>o-l),a=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Qn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(i.get(l.batchId)||pt()).add(c);i=i.insert(l.batchId,h)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=DP();d.forEach(m=>{if(!a.has(m)){const g=zP(r.get(m),n.get(m));g!==null&&h.set(m,g),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ne.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return Ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Vj(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):ne.resolve(ml());let l=-1,c=a;return o.next(u=>ne.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,pt())).next(d=>({batchId:l,changes:PP(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ve(r)).next(n=>{let i=Zd();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Zd();return this.indexManager.getCollectionParents(e,a).next(l=>ne.forEach(l,c=>{const u=function(h,m){return new ec(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,nn.newInvalidDocument(d)))});let l=Zd();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&yh(d.mutation,u,Qn.empty(),Ir.now()),fx(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ne.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:_i(i.createTime)}}(r)),ne.resolve()}getNamedQuery(e,r){return ne.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:Pq(i.bundledQuery),readTime:_i(i.readTime)}}(r)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(){this.overlays=new cr(Ve.comparator),this.Ir=new Map}getOverlay(e,r){return ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ml();return ne.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.ht(e,r,a)}),ne.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),ne.resolve()}getOverlaysForCollection(e,r,n){const i=ml(),a=r.length+1,o=new Ve(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new cr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=ml(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=ml(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return ne.resolve(l)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new cq(r,n));let a=this.Ir.get(r);a===void 0&&(a=pt(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(){this.sessionToken=Gr.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.Tr=new Wr(Dr.Er),this.dr=new Wr(Dr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Dr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Dr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Ve(new Ft([])),n=new Dr(r,e),i=new Dr(r,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ve(new Ft([])),n=new Dr(r,e),i=new Dr(r,e+1);let a=pt();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Dr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Dr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ve.comparator(e.key,r.key)||kt(e.wr,r.wr)}static Ar(e,r){return kt(e.wr,r.wr)||Ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Wr(Dr.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lq(a,r,n,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Dr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,r){return ne.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Dr(r,0),i=new Dr(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const l=this.Dr(o.wr);a.push(l)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Wr(kt);return r.forEach(i=>{const a=new Dr(i,0),o=new Dr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),ne.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Ve.isDocumentKey(a)||(a=a.child(""));const o=new Dr(new Ve(a),0);let l=new Wr(kt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},o),ne.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Dt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ne.forEach(r.mutations,i=>{const a=new Dr(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Dr(r,0),i=this.br.firstAfterOrEqual(n);return ne.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e){this.Mr=e,this.docs=function(){return new cr(Ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ne.resolve(n?n.document.mutableCopy():nn.newInvalidDocument(r))}getEntries(e,r){let n=pa();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():nn.newInvalidDocument(i))}),ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=pa();const o=r.path,l=new Ve(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||C7(E7(d),n)<=0||(i.has(d.key)||fx(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,r,n,i){He()}Or(e,r){return ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new qq(this)}getSize(e){return ne.resolve(this.size)}}class qq extends Mq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),ne.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e){this.persistence=e,this.Nr=new rd(r=>Mj(r),Lj),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bj,this.targetCount=0,this.kr=Iu.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Iu(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ne.resolve()}updateTargetData(e,r){return this.Kn(r),ne.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ne.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ne.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ne.resolve(n)}containsKey(e,r){return ne.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Pj(0),this.Kr=!1,this.Kr=!0,this.$r=new $q,this.referenceDelegate=e(this),this.Ur=new Wq(this),this.indexManager=new Dq,this.remoteDocumentCache=function(i){return new Bq(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Rq(r),this.Gr=new Fq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Uq,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new zq(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Re("MemoryPersistence","Starting transaction:",e);const i=new Gq(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,r){return ne.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Gq extends k7{constructor(e){super(),this.currentSequenceNumber=e}}class qj{constructor(e){this.persistence=e,this.Jr=new Bj,this.Yr=null}static Zr(e){return new qj(e)}get Xr(){if(this.Yr)return this.Yr;throw He()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ne.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ne.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ne.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,n=>{const i=Ve.fromPath(n);return this.ei(e,i).next(a=>{a||r.removeEntry(i,Ye.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ne.or([()=>ne.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=pt(),i=pt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Wj(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return R8()?8:I7(cn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Kq;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(Vd()<=vt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Ac(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(Vd()<=vt.DEBUG&&Re("QueryEngine","Query:",Ac(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Vd()<=vt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Ac(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(r))):ne.resolve())}Yi(e,r){if(t2(r))return ne.resolve(null);let n=bi(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Kg(r,null,"F"),n=bi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=pt(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,Kg(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,i){return t2(r)||i.isEqual(Ye.min())?ne.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,i)?ne.resolve(null):(Vd()<=vt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ac(r)),this.rs(e,o,r,S7(i,-1)).next(l=>l))})}ts(e,r){let n=new Wr(AP(e));return r.forEach((i,a)=>{fx(e,a)&&(n=n.add(a))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return Vd()<=vt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Ac(r)),this.Ji.getDocumentsMatchingQuery(e,r,jo.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new cr(kt),this._s=new rd(a=>Mj(a),Lj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Xq(t,e,r,n){return new Jq(t,e,r,n)}async function e4(t,e){const r=Je(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=pt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function Qq(t,e){const r=Je(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,m=h.keys();let g=ne.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(c,x)).next(y=>{const _=u.docVersions.get(x);Dt(_!==null),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=pt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function t4(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Zq(t,e){const r=Je(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;l.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(a,d.addedDocuments,h)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Gr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),i=i.insert(h,g),function(y,_,b){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,d)&&l.push(r.Ur.updateTargetData(a,g))});let c=pa(),u=pt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(eW(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Ye.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next(h=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(d)}return ne.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(r.os=i,a))}function eW(t,e,r){let n=pt(),i=pt();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=pa();return r.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Re("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function tW(t,e){const r=Je(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function rW(t,e){const r=Je(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(a=>a?(i=a,ne.resolve(i)):r.Ur.allocateTargetId(n).next(o=>(i=new so(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Nb(t,e,r){const n=Je(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wf(o))throw o;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function h2(t,e,r){const n=Je(t);let i=Ye.min(),a=pt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Je(c),m=h._s.get(d);return m!==void 0?ne.resolve(h.os.get(m)):h.Ur.getTargetData(u,d)}(n,o,bi(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:Ye.min(),r?a:pt())).next(l=>(nW(n,K7(e),l),{documents:l,Ts:a})))}function nW(t,e,r){let n=t.us.get(e)||Ye.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class f2{constructor(){this.activeTargetIds=eq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sW{constructor(){this.so=new f2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new f2,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up=null;function p0(){return up===null?up=function(){return 268435456+Math.round(2147483648*Math.random())}():up++,"0x"+up.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="WebChannelConnection";class lW extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,o){const l=p0(),c=this.xo(r,n.toUriEncodedString());Re("RestConnection",`Sending RPC '${r}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(r,c,u,i).then(d=>(Re("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw Su("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(r,n,i,a,o,l){return this.Mo(r,n,i,a,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+td}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),i&&i.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const i=aW[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=p0();return new Promise((o,l)=>{const c=new mP;c.setWithCredentials(!0),c.listenOnce(pP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jp.NO_ERROR:const d=c.getResponseJson();Re(Zr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Jp.TIMEOUT:Re(Zr,`RPC '${e}' ${a} timed out`),l(new we(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Jp.HTTP_ERROR:const h=c.getStatus();if(Re(Zr,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(_){const b=_.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(b)>=0?b:ee.UNKNOWN}(g.status);l(new we(x,g.message))}else l(new we(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new we(ee.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Re(Zr,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);Re(Zr,`RPC '${e}' ${a} sending request:`,i),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const i=p0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xP(),l=vP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Re(Zr,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=o.createWebChannel(d,c);let m=!1,g=!1;const x=new oW({Io:_=>{g?Re(Zr,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(Re(Zr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Re(Zr,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},To:()=>h.close()}),y=(_,b,v)=>{_.listen(b,w=>{try{v(w)}catch(E){setTimeout(()=>{throw E},0)}})};return y(h,Qd.EventType.OPEN,()=>{g||(Re(Zr,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),y(h,Qd.EventType.CLOSE,()=>{g||(g=!0,Re(Zr,`RPC '${e}' stream ${i} transport closed`),x.So())}),y(h,Qd.EventType.ERROR,_=>{g||(g=!0,Su(Zr,`RPC '${e}' stream ${i} transport errored:`,_),x.So(new we(ee.UNAVAILABLE,"The operation could not be completed")))}),y(h,Qd.EventType.MESSAGE,_=>{var b;if(!g){const v=_.data[0];Dt(!!v);const w=v,E=w.error||((b=w[0])===null||b===void 0?void 0:b.error);if(E){Re(Zr,`RPC '${e}' stream ${i} received error:`,E);const C=E.status;let I=function(R){const j=xr[R];if(j!==void 0)return qP(j)}(C),T=E.message;I===void 0&&(I=ee.INTERNAL,T="Unknown error status: "+C+" with message "+E.message),g=!0,x.So(new we(I,T)),h.close()}else Re(Zr,`RPC '${e}' stream ${i} received:`,v),x.bo(v)}}),y(l,gP.STAT_EVENT,_=>{_.stat===mb.PROXY?Re(Zr,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===mb.NOPROXY&&Re(Zr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function g0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){return new xq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,r,n,i,a,o,l,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new r4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(ma(r.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new we(ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cW extends n4{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=bq(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ye.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ye.min():o.readTime?_i(o.readTime):Ye.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=jb(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=xb(c)?{documents:Nq(a,c)}:{query:Sq(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=GP(a,o.resumeToken);const u=wb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Yg(a,o.snapshotVersion.toTimestamp());const u=wb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Cq(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=jb(this.serializer),r.removeTarget=e,this.a_(r)}}class uW extends n4{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=jq(e.writeResults,e.commitTime),n=_i(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=jb(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>_q(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,bb(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(ee.UNKNOWN,a.toString())})}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,bb(r,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ee.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ma(r),this.D_=!1):Re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{tc(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Je(c);u.L_.add(4),await Kf(u),u.q_.set("Unknown"),u.L_.delete(4),await yx(u)}(this))})}),this.q_=new hW(n,i)}}async function yx(t){if(tc(t))for(const e of t.B_)await e(!0)}async function Kf(t){for(const e of t.B_)await e(!1)}function s4(t,e){const r=Je(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Yj(r)?Kj(r):nd(r).r_()&&Gj(r,e))}function Hj(t,e){const r=Je(t),n=nd(r);r.N_.delete(e),n.r_()&&i4(r,e),r.N_.size===0&&(n.r_()?n.o_():tc(r)&&r.q_.set("Unknown"))}function Gj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nd(t).A_(e)}function i4(t,e){t.Q_.xe(e),nd(t).R_(e)}function Kj(t){t.Q_=new mq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nd(t).start(),t.q_.v_()}function Yj(t){return tc(t)&&!nd(t).n_()&&t.N_.size>0}function tc(t){return Je(t).L_.size===0}function a4(t){t.Q_=void 0}async function mW(t){t.q_.set("Online")}async function pW(t){t.N_.forEach((e,r)=>{Gj(t,e)})}async function gW(t,e){a4(t),Yj(t)?(t.q_.M_(e),Kj(t)):t.q_.set("Unknown")}async function vW(t,e,r){if(t.q_.set("Online"),e instanceof HP&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(n){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Jg(t,n)}else if(e instanceof Zp?t.Q_.Ke(e):e instanceof WP?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ye.min()))try{const n=await t4(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Gr.EMPTY_BYTE_STRING,d.snapshotVersion)),i4(a,c);const h=new so(d.target,c,u,d.sequenceNumber);Gj(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Re("RemoteStore","Failed to raise snapshot:",n),await Jg(t,n)}}async function Jg(t,e,r){if(!Wf(e))throw e;t.L_.add(1),await Kf(t),t.q_.set("Offline"),r||(r=()=>t4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await yx(t)})}function o4(t,e){return e().catch(r=>Jg(t,r,e))}async function wx(t){const e=Je(t),r=So(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xW(e);)try{const i=await tW(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,yW(e,i)}catch(i){await Jg(e,i)}l4(e)&&c4(e)}function xW(t){return tc(t)&&t.O_.length<10}function yW(t,e){t.O_.push(e);const r=So(t);r.r_()&&r.V_&&r.m_(e.mutations)}function l4(t){return tc(t)&&!So(t).n_()&&t.O_.length>0}function c4(t){So(t).start()}async function wW(t){So(t).p_()}async function bW(t){const e=So(t);for(const r of t.O_)e.m_(r.mutations)}async function _W(t,e,r){const n=t.O_.shift(),i=Uj.from(n,e,r);await o4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await wx(t)}async function jW(t,e){e&&So(t).V_&&await async function(n,i){if(function(o){return dq(o)&&o!==ee.ABORTED}(i.code)){const a=n.O_.shift();So(n).s_(),await o4(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await wx(n)}}(t,e),l4(t)&&c4(t)}async function p2(t,e){const r=Je(t);r.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const n=tc(r);r.L_.add(3),await Kf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await yx(r)}async function NW(t,e){const r=Je(t);e?(r.L_.delete(2),await yx(r)):e||(r.L_.add(2),await Kf(r),r.q_.set("Unknown"))}function nd(t){return t.K_||(t.K_=function(r,n,i){const a=Je(r);return a.w_(),new cW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:mW.bind(null,t),Ro:pW.bind(null,t),mo:gW.bind(null,t),d_:vW.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yj(t)?Kj(t):t.q_.set("Unknown")):(await t.K_.stop(),a4(t))})),t.K_}function So(t){return t.U_||(t.U_=function(r,n,i){const a=Je(r);return a.w_(),new uW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wW.bind(null,t),mo:jW.bind(null,t),f_:bW.bind(null,t),g_:_W.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await wx(t)):(await t.U_.stop(),t.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,l=new Jj(e,r,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xj(t,e){if(ma("AsyncQueue",`${e}: ${t}`),Wf(t))return new we(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ve.comparator(r.key,n.key):(r,n)=>Ve.comparator(r.key,n.key),this.keyedMap=Zd(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new lu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof lu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new lu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.W_=new cr(Ve.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):He():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Au{constructor(e,r,n,i,a,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Au(e,r,lu.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EW{constructor(){this.queries=v2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=Je(r),a=i.queries;i.queries=v2(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new we(ee.ABORTED,"Firestore shutting down"))}}function v2(){return new rd(t=>IP(t),hx)}async function Qj(t,e){const r=Je(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new SW,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=Xj(o,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&e1(r)}async function Zj(t,e){const r=Je(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function CW(t,e){const r=Je(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(n=!0);o.z_=i}}n&&e1(r)}function TW(t,e,r){const n=Je(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function e1(t){t.Y_.forEach(e=>{e.next()})}var Sb,x2;(x2=Sb||(Sb={})).ea="default",x2.Cache="cache";class t1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Au(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.key=e}}class d4{constructor(e){this.key=e}}class kW{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pt(),this.mutatedKeys=pt(),this.Aa=AP(e),this.Ra=new lu(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new g2,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),g=fx(this.query,h)?h:null,x=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?x!==y&&(n.track({type:3,doc:g}),_=!0):this.ga(m,g)||(n.track({type:2,doc:g}),_=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),_=!0):m&&!g&&(n.track({type:1,doc:m}),_=!0,(c||u)&&(l=!0)),_&&(g?(o=o.add(g),a=y?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,x){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return y(g)-y(x)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),i=i!=null&&i;const l=r&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Au(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new g2,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new d4(n))}),this.da.forEach(n=>{e.has(n)||r.push(new u4(n))}),r}ba(e){this.Ta=e.Ts,this.da=pt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Au.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class AW{constructor(e){this.key=e,this.va=!1}}class RW{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new rd(l=>IP(l),hx),this.Ma=new Map,this.xa=new Set,this.Oa=new cr(Ve.comparator),this.Na=new Map,this.La=new Bj,this.Ba={},this.ka=new Map,this.qa=Iu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function PW(t,e,r=!0){const n=v4(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await h4(n,e,r,!0),i}async function DW(t,e){const r=v4(t);await h4(r,e,!0,!1)}async function h4(t,e,r,n){const i=await rW(t.localStore,bi(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await OW(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&s4(t.remoteStore,i),l}async function OW(t,e,r,n,i){t.Ka=(h,m,g)=>async function(y,_,b,v){let w=_.view.ma(b);w.ns&&(w=await h2(y.localStore,_.query,!1).then(({documents:T})=>_.view.ma(T,w)));const E=v&&v.targetChanges.get(_.targetId),C=v&&v.targetMismatches.get(_.targetId)!=null,I=_.view.applyChanges(w,y.isPrimaryClient,E,C);return w2(y,_.targetId,I.wa),I.snapshot}(t,h,m,g);const a=await h2(t.localStore,e,!0),o=new kW(e,a.Ts),l=o.ma(a.documents),c=Gf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);w2(t,r,u.wa);const d=new IW(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function MW(t,e,r){const n=Je(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!hx(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Nb(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Hj(n.remoteStore,i.targetId),Eb(n,i.targetId)}).catch(qf)):(Eb(n,i.targetId),await Nb(n.localStore,i.targetId,!0))}async function LW(t,e){const r=Je(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Hj(r.remoteStore,n.targetId))}async function VW(t,e,r){const n=WW(t);try{const i=await function(o,l){const c=Je(o),u=Ir.now(),d=l.reduce((g,x)=>g.add(x.key),pt());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=pa(),y=pt();return c.cs.getEntries(g,d).next(_=>{x=_,x.forEach((b,v)=>{v.isValidDocument()||(y=y.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(_=>{h=_;const b=[];for(const v of l){const w=aq(v,h.get(v.key).overlayedDocument);w!=null&&b.push(new Uo(v.key,w,jP(w.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(_=>{m=_;const b=_.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(g,_.batchId,b)})}).then(()=>({batchId:m.batchId,changes:PP(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new cr(kt)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,i.batchId,r),await Yf(n,i.changes),await wx(n.remoteStore)}catch(i){const a=Xj(i,"Failed to persist write");r.reject(a)}}async function f4(t,e){const r=Je(t);try{const n=await Zq(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Na.get(a);o&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Dt(o.va):i.removedDocuments.size>0&&(Dt(o.va),o.va=!1))}),await Yf(r,n,e)}catch(n){await qf(n)}}function y2(t,e,r){const n=Je(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Je(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(l)&&(u=!0)}),u&&e1(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function FW(t,e,r){const n=Je(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new cr(Ve.comparator);o=o.insert(a,nn.newNoDocument(a,Ye.min()));const l=pt().add(a),c=new vx(Ye.min(),new Map,new cr(kt),o,l);await f4(n,c),n.Oa=n.Oa.remove(a),n.Na.delete(e),r1(n)}else await Nb(n.localStore,e,!1).then(()=>Eb(n,e,r)).catch(qf)}async function UW(t,e){const r=Je(t),n=e.batch.batchId;try{const i=await Qq(r.localStore,e);p4(r,n,null),m4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Yf(r,i)}catch(i){await qf(i)}}async function $W(t,e,r){const n=Je(t);try{const i=await function(o,l){const c=Je(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Dt(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);p4(n,e,r),m4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Yf(n,i)}catch(i){await qf(i)}}function m4(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function p4(t,e,r){const n=Je(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Eb(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||g4(t,n)})}function g4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Hj(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),r1(t))}function w2(t,e,r){for(const n of r)n instanceof u4?(t.La.addReference(n.key,e),zW(t,n)):n instanceof d4?(Re("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||g4(t,n.key)):He()}function zW(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Re("SyncEngine","New document in limbo: "+r),t.xa.add(n),r1(t))}function r1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ve(Ft.fromString(e)),n=t.qa.next();t.Na.set(n,new AW(r)),t.Oa=t.Oa.insert(r,n),s4(t.remoteStore,new so(bi(dx(r.path)),n,"TargetPurposeLimboResolution",Pj.oe))}}async function Yf(t,e,r){const n=Je(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Wj.Wi(c.targetId,u);a.push(h)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(c,u){const d=Je(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ne.forEach(u,m=>ne.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>ne.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Wf(h))throw h;Re("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.os.get(m),x=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,y)}}}(n.localStore,a))}async function BW(t,e){const r=Je(t);if(!r.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const n=await e4(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new we(ee.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Yf(r,n.hs)}}function qW(t,e){const r=Je(t),n=r.Na.get(e);if(n&&n.va)return pt().add(n.key);{let i=pt();const a=r.Ma.get(e);if(!a)return i;for(const o of a){const l=r.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function v4(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FW.bind(null,e),e.Ca.d_=CW.bind(null,e.eventManager),e.Ca.$a=TW.bind(null,e.eventManager),e}function WW(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$W.bind(null,e),e}class Xg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Xq(this.persistence,new Yq,e.initialUser,this.serializer)}Ga(e){return new Hq(qj.Zr,this.serializer)}Wa(e){return new sW}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xg.provider={build:()=>new Xg};class Cb{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>y2(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=BW.bind(null,this.syncEngine),await NW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EW}()}createDatastore(e){const r=xx(e.databaseInfo.databaseId),n=function(a){return new lW(a)}(e.databaseInfo);return function(a,o,l,c){return new dW(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,l){return new fW(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>y2(this.syncEngine,r,0),function(){return m2.D()?new m2:new iW}())}createSyncEngine(e,r){return function(i,a,o,l,c,u,d){const h=new RW(i,a,o,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Je(i);Re("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Kf(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Cb.provider={build:()=>new Cb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=en.UNAUTHENTICATED,this.clientId=wP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{Re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Xj(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function v0(t,e){t.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await e4(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function b2(t,e){t.asyncQueue.verifyOperationInProgress();const r=await GW(t);Re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>p2(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>p2(e.remoteStore,i)),t._onlineComponents=e}async function GW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await v0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Su("Error using user provided cache. Falling back to memory cache: "+r),await v0(t,new Xg)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await v0(t,new Xg);return t._offlineComponents}async function x4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await b2(t,t._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await b2(t,new Cb))),t._onlineComponents}function KW(t){return x4(t).then(e=>e.syncEngine)}async function Qg(t){const e=await x4(t),r=e.eventManager;return r.onListen=PW.bind(null,e.syncEngine),r.onUnlisten=MW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=DW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=LW.bind(null,e.syncEngine),r}function YW(t,e,r={}){const n=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new n1({next:m=>{d.Za(),o.enqueueAndForget(()=>Zj(a,h));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new we(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new we(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new t1(dx(l.path),d,{includeMetadataChanges:!0,_a:!0});return Qj(a,h)}(await Qg(t),t.asyncQueue,e,r,n)),n.promise}function JW(t,e,r={}){const n=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new n1({next:m=>{d.Za(),o.enqueueAndForget(()=>Zj(a,h)),m.fromCache&&c.source==="server"?u.reject(new we(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new t1(l,d,{includeMetadataChanges:!0,_a:!0});return Qj(a,h)}(await Qg(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e,r){if(!r)throw new we(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XW(t,e,r,n){if(e===!0&&n===!0)throw new we(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function j2(t){if(!Ve.isDocumentKey(t))throw new we(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N2(t){if(Ve.isDocumentKey(t))throw new we(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=bx(t);throw new we(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function QW(t,e){if(e<=0)throw new we(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _x{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S2(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new g7;switch(n.type){case"firstParty":return new w7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new we(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=_2.get(r);n&&(Re("ComponentProvider","Removing Datastore"),_2.delete(r),n.terminate())}(this),Promise.resolve()}}function ZW(t,e,r,n={}){var i;const a=(t=bn(t,_x))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Su("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=en.MOCK_USER;else{l=wR(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new we(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new en(u)}t._authCredentials=new v7(new yP(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class an{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class vo extends Ri{constructor(e,r,n){super(e,r,dx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Ve(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function It(t,e,...r){if(t=xt(t),w4("collection","path",e),t instanceof _x){const n=Ft.fromString(e,...r);return N2(n),new vo(t,null,n)}{if(!(t instanceof an||t instanceof vo))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ft.fromString(e,...r));return N2(n),new vo(t.firestore,null,n)}}function Ze(t,e,...r){if(t=xt(t),arguments.length===1&&(e=wP.newId()),w4("doc","path",e),t instanceof _x){const n=Ft.fromString(e,...r);return j2(n),new an(t,null,new Ve(n))}{if(!(t instanceof an||t instanceof vo))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ft.fromString(e,...r));return j2(n),new an(t.firestore,t instanceof vo?t.converter:null,new Ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new r4(this,"async_queue_retry"),this.Vu=()=>{const n=g0();n&&Re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=g0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=g0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ra;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wf(e))throw e;Re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw ma("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=Jj.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&He()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function C2(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ci extends _x{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new E2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E2(e),this._firestoreClient=void 0,await e}}}function eH(t,e){const r=typeof t=="object"?t:ix(),n=typeof t=="string"?t:"(default)",i=Fo(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=vR("firestore");a&&ZW(i,...a)}return i}function Jf(t){if(t._terminated)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tH(t),t._firestoreClient}function tH(t){var e,r,n;const i=t._freezeSettings(),a=function(l,c,u,d){return new P7(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,y4(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new HW(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ru(Gr.fromBase64String(e))}catch(r){throw new we(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ru(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new we(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new we(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new we(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=/^__.*__$/;class nH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Hf(e,this.data,r,this.fieldTransforms)}}class b4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Uo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function _4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class a1{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new a1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_4(this.Cu)&&rH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||xx(e)}Qu(e,r,n,i=!1){return new a1({Cu:e,methodName:r,qu:n,path:Br.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sd(t){const e=t._freezeSettings(),r=xx(t._databaseId);return new sH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function o1(t,e,r,n,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);u1("Data must be an object, but it was:",o,n);const l=E4(n,o);let c,u;if(a.merge)c=new Qn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=Tb(e,h,r);if(!o.contains(m))throw new we(ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T4(d,m)||d.push(m)}c=new Qn(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new nH(new Pn(l),c,u)}class jx extends Qf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jx}}class l1 extends Qf{_toFieldTransform(e){return new $P(e.path,new af)}isEqual(e){return e instanceof l1}}class c1 extends Qf{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new cf(e.serializer,MP(e.serializer,this.$u));return new $P(e.path,r)}isEqual(e){return e instanceof c1&&this.$u===e.$u}}function j4(t,e,r,n){const i=t.Qu(1,e,r);u1("Data must be an object, but it was:",i,n);const a=[],o=Pn.empty();Zl(n,(c,u)=>{const d=d1(e,c,r);u=xt(u);const h=i.Nu(d);if(u instanceof jx)a.push(d);else{const m=Zf(u,h);m!=null&&(a.push(d),o.set(d,m))}});const l=new Qn(a);return new b4(o,l,i.fieldTransforms)}function N4(t,e,r,n,i,a){const o=t.Qu(1,e,r),l=[Tb(e,n,r)],c=[i];if(a.length%2!=0)throw new we(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Tb(e,a[m])),c.push(a[m+1]);const u=[],d=Pn.empty();for(let m=l.length-1;m>=0;--m)if(!T4(u,l[m])){const g=l[m];let x=c[m];x=xt(x);const y=o.Nu(g);if(x instanceof jx)u.push(g);else{const _=Zf(x,y);_!=null&&(u.push(g),d.set(g,_))}}const h=new Qn(u);return new b4(d,h,o.fieldTransforms)}function S4(t,e,r,n=!1){return Zf(r,t.Qu(n?4:3,e))}function Zf(t,e){if(C4(t=xt(t)))return u1("Unsupported field value:",e,t),E4(t,e);if(t instanceof Qf)return function(n,i){if(!_4(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let c=Zf(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MP(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Ir.fromDate(n);return{timestampValue:Yg(i.serializer,a)}}if(n instanceof Ir){const a=new Ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yg(i.serializer,a)}}if(n instanceof s1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ru)return{bytesValue:GP(i.serializer,n._byteString)};if(n instanceof an){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zj(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof i1)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Fj(l.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${bx(n)}`)}(t,e)}function E4(t,e){const r={};return bP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(t,(n,i)=>{const a=Zf(i,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function C4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ir||t instanceof s1||t instanceof Ru||t instanceof an||t instanceof Qf||t instanceof i1)}function u1(t,e,r){if(!C4(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=bx(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Tb(t,e,r){if((e=xt(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return d1(t,e);throw Zg("Field path arguments must be of type string or ",t,!1,void 0,r)}const iH=new RegExp("[~\\*/\\[\\]]");function d1(t,e,r){if(e.search(iH)>=0)throw Zg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Xf(...e.split("."))._internalPath}catch{throw Zg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Zg(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new we(ee.INVALID_ARGUMENT,l+t+c)}function T4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Nx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class aH extends h1{data(){return super.data()}}function Nx(t,e){return typeof e=="string"?d1(t,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f1{}class Sx extends f1{}function $t(t,e,...r){let n=[];e instanceof f1&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof m1).length,l=a.filter(c=>c instanceof Ex).length;if(o>1||o>0&&l>0)throw new we(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Ex extends Sx{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Ex(e,r,n)}_apply(e){const r=this._parse(e);return I4(e._query,r),new Ri(e.firestore,e.converter,yb(e._query,r))}_parse(e){const r=sd(e.firestore);return function(a,o,l,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new we(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){k2(h,d);const g=[];for(const x of h)g.push(T2(c,a,x));m={arrayValue:{values:g}}}else m=T2(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||k2(h,d),m=S4(l,o,h,d==="in"||d==="not-in");return br.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Yt(t,e,r){const n=e,i=Nx("where",t);return Ex._create(i,n,r)}class m1 extends f1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new m1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Xs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)I4(o,c),o=yb(o,c)}(e._query,r),new Ri(e.firestore,e.converter,yb(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class p1 extends Sx{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new p1(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sf(a,o)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new ec(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function ev(t,e="asc"){const r=e,n=Nx("orderBy",t);return p1._create(n,r)}class g1 extends Sx{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new g1(e,r,n)}_apply(e){return new Ri(e.firestore,e.converter,Kg(e._query,this._limit,this._limitType))}}function qs(t){return QW("limit",t),g1._create("limit",t,"F")}class v1 extends Sx{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new v1(e,r,n)}_apply(e){const r=lH(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(i,a){return new ec(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,r))}}function oH(...t){return v1._create("startAfter",t,!1)}function lH(t,e,r,n){if(r[0]=xt(r[0]),r[0]instanceof h1)return function(a,o,l,c,u){if(!c)throw new we(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of ou(a))if(h.field.isKeyField())d.push(Gg(o,c.key));else{const m=c.data.field(h.field);if(ux(m))throw new we(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=h.field.canonicalString();throw new we(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new ku(d,u)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=sd(t.firestore);return function(o,l,c,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new we(ee.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let x=0;x<d.length;x++){const y=d[x];if(m[x].field.isKeyField()){if(typeof y!="string")throw new we(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!Vj(o)&&y.indexOf("/")!==-1)throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const _=o.path.child(Ft.fromString(y));if(!Ve.isDocumentKey(_))throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const b=new Ve(_);g.push(Gg(l,b))}else{const _=S4(c,u,y);g.push(_)}}return new ku(g,h)}(t._query,t.firestore._databaseId,i,e,r,n)}}function T2(t,e,r){if(typeof(r=xt(r))=="string"){if(r==="")throw new we(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vj(e)&&r.indexOf("/")!==-1)throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Ft.fromString(r));if(!Ve.isDocumentKey(n))throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Gg(t,new Ve(n))}if(r instanceof an)return Gg(t,r._key);throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bx(r)}.`)}function k2(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I4(t,e){const r=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class cH{convertValue(e,r="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Zl(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>fr(o.doubleValue));return new i1(a)}convertGeoPoint(e){return new s1(fr(e.latitude),fr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Dj(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(tf(e));default:return null}}convertTimestamp(e){const r=No(e);return new Ir(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ft.fromString(e);Dt(ZP(n));const i=new rf(n.get(1),n.get(3)),a=new Ve(n.popFirst(5));return i.isEqual(r)||ma(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A4 extends h1{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new eg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Nx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class eg extends A4{data(e={}){return super.data(e)}}class R4{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new th(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new eg(this._firestore,this._userDataWriter,n.key,n,new th(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new we(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new eg(i._firestore,i._userDataWriter,l.doc.key,l.doc,new th(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new eg(i._firestore,i._userDataWriter,l.doc.key,l.doc,new th(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:uH(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function uH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){t=bn(t,an);const e=bn(t.firestore,Ci);return YW(Jf(e),t._key).then(r=>P4(e,t,r))}class y1 extends cH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ru(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,r)}}function rr(t){t=bn(t,Ri);const e=bn(t.firestore,Ci),r=Jf(e),n=new y1(e);return k4(t._query),JW(r,t._query).then(i=>new R4(e,n,t,i))}function wh(t,e,r){t=bn(t,an);const n=bn(t.firestore,Ci),i=x1(t.converter,e,r);return em(n,[o1(sd(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,wn.none())])}function yr(t,e,r,...n){t=bn(t,an);const i=bn(t.firestore,Ci),a=sd(i);let o;return o=typeof(e=xt(e))=="string"||e instanceof Xf?N4(a,"updateDoc",t._key,e,r,n):j4(a,"updateDoc",t._key,e),em(i,[o.toMutation(t._key,wn.exists(!0))])}function Pu(t){return em(bn(t.firestore,Ci),[new gx(t._key,wn.none())])}function Du(t,e){const r=bn(t.firestore,Ci),n=Ze(t),i=x1(t.converter,e);return em(r,[o1(sd(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,wn.exists(!1))]).then(()=>n)}function I2(t,...e){var r,n,i;t=xt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||C2(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(C2(e[o])){const h=e[o];e[o]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(t instanceof an)u=bn(t.firestore,Ci),d=dx(t._key.path),c={next:h=>{e[o]&&e[o](P4(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=bn(t,Ri);u=bn(h.firestore,Ci),d=h._query;const m=new y1(u);c={next:g=>{e[o]&&e[o](new R4(u,m,h,g))},error:e[o+1],complete:e[o+2]},k4(t._query)}return function(m,g,x,y){const _=new n1(y),b=new t1(g,_,x);return m.asyncQueue.enqueueAndForget(async()=>Qj(await Qg(m),b)),()=>{_.Za(),m.asyncQueue.enqueueAndForget(async()=>Zj(await Qg(m),b))}}(Jf(u),d,l,c)}function em(t,e){return function(n,i){const a=new ra;return n.asyncQueue.enqueueAndForget(async()=>VW(await KW(n),i,a)),a.promise}(Jf(t),e)}function P4(t,e,r){const n=r.docs.get(e._key),i=new y1(t);return new A4(t,i,e._key,n,new th(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=sd(e)}set(e,r,n){this._verifyNotCommitted();const i=x0(e,this._firestore),a=x1(i.converter,r,n),o=o1(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,wn.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const a=x0(e,this._firestore);let o;return o=typeof(r=xt(r))=="string"||r instanceof Xf?N4(this._dataReader,"WriteBatch.update",a._key,r,n,i):j4(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=x0(e,this._firestore);return this._mutations=this._mutations.concat(new gx(r._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function x0(t,e){if((t=xt(t)).firestore!==e)throw new we(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Pr(){return new l1("serverTimestamp")}function A2(t){return new c1("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){return Jf(t=bn(t,Ci)),new dH(t,e=>em(t,e))}(function(e,r=!0){(function(i){td=i})(Xl),Ys(new Ss("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new Ci(new x7(n.getProvider("auth-internal")),new _7(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rf(u.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),$n(WC,"4.7.3",e),$n(WC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="firebasestorage.googleapis.com",M4="storageBucket",hH=2*60*1e3,fH=10*60*1e3,mH=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vr=class L4 extends Es{constructor(e,r,n=0){super(y0(e),`Firebase Storage: ${r} (${y0(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,L4.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function y0(t){return"storage/"+t}function w1(){const t="An unknown error occurred, please check the error payload for server response.";return new vr(Zt.UNKNOWN,t)}function pH(t){return new vr(Zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gH(t){return new vr(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vr(Zt.UNAUTHENTICATED,t)}function xH(){return new vr(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yH(t){return new vr(Zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function V4(){return new vr(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function F4(){return new vr(Zt.CANCELED,"User canceled the upload/download.")}function wH(t){return new vr(Zt.INVALID_URL,"Invalid URL '"+t+"'.")}function bH(t){return new vr(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _H(){return new vr(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+M4+"' property when initializing the app?")}function U4(){return new vr(Zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jH(){return new vr(Zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function NH(){return new vr(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SH(t){return new vr(Zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kb(t){return new vr(Zt.INVALID_ARGUMENT,t)}function $4(){return new vr(Zt.APP_DELETED,"The Firebase app was deleted.")}function EH(t){return new vr(Zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bh(t,e){return new vr(Zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fd(t){throw new vr(Zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Zn.makeFromUrl(e,r)}catch{return new Zn(e,"")}if(n.path==="")return n;throw bH(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},y=r===O4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${_}`,"i"),w=[{regex:l,indices:c,postModify:a},{regex:g,indices:x,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<w.length;E++){const C=w[E],I=C.regex.exec(e);if(I){const T=I[C.indices.bucket];let k=I[C.indices.path];k||(k=""),n=new Zn(T,k),C.postModify(n);break}}if(n==null)throw wH(e);return n}}class CH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t,e,r){let n=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(g,c())},_)}function m(){a&&clearTimeout(a)}function g(_,...b){if(u){m();return}if(_){m(),d.call(null,_,...b);return}if(c()||o){m(),d.call(null,_,...b);return}n<64&&(n*=2);let w;l===1?(l=2,w=0):w=(n+Math.random())*1e3,h(w)}let x=!1;function y(_){x||(x=!0,m(),!u&&(i!==null?(_||(l=2),clearTimeout(i),h(0)):_||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,y(!0)},r),y}function kH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t){return t!==void 0}function AH(t){return typeof t=="function"}function RH(t){return typeof t=="object"&&!Array.isArray(t)}function Cx(t){return typeof t=="string"||t instanceof String}function R2(t){return b1()&&t instanceof Blob}function b1(){return typeof Blob<"u"}function P2(t,e,r,n){if(n<e)throw kb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw kb(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function z4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var wl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(wl||(wl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e,r,n,i,a,o,l,c,u,d,h,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new dp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===wl.NO_ERROR,c=a.getStatus();if(!l||B4(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===wl.ABORT;n(!1,new dp(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new dp(u,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());IH(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=w1();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?$4():F4();o(c)}else{const c=V4();o(c)}};this.canceled_?r(!1,new dp(!1,null,!0)):this.backoffId_=TH(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dp{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function DH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VH(t,e,r,n,i,a,o=!0){const l=z4(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return MH(u,e),DH(u,r),OH(u,a),LH(u,n),new PH(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UH(...t){const e=FH();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(b1())return new Blob(t);throw new vr(Zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $H(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(t){if(typeof atob>"u")throw SH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w0{constructor(e,r){this.data=e,this.contentType=r||null}}function BH(t,e){switch(t){case fi.RAW:return new w0(q4(e));case fi.BASE64:case fi.BASE64URL:return new w0(W4(t,e));case fi.DATA_URL:return new w0(WH(e),HH(e))}throw w1()}function q4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function qH(t){let e;try{e=decodeURIComponent(t)}catch{throw bh(fi.DATA_URL,"Malformed data URL.")}return q4(e)}function W4(t,e){switch(t){case fi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw bh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw bh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=zH(e)}catch(i){throw i.message.includes("polyfill")?i:bh(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class H4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw bh(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=GH(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function WH(t){const e=new H4(t);return e.base64?W4(fi.BASE64,e.rest):qH(e.rest)}function HH(t){return new H4(t).contentType}function GH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r){let n=0,i="";R2(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(R2(this.data_)){const n=this.data_,i=$H(n,e,r);return i===null?null:new Gi(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Gi(n,!0)}}static getBlob(...e){if(b1()){const r=e.map(n=>n instanceof Gi?n.data_:n);return new Gi(UH.apply(null,r))}else{const r=e.map(o=>Cx(o)?BH(fi.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new Gi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){let e;try{e=JSON.parse(t)}catch{return null}return RH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YH(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function K4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t,e){return e}class hn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||JH}}let hp=null;function XH(t){return!Cx(t)||t.length<2?t:K4(t)}function _1(){if(hp)return hp;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(a,o){return XH(o)}const r=new hn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const i=new hn("size");return i.xform=n,t.push(i),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),hp=t,hp}function QH(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new Zn(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function ZH(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return QH(n,t),n}function Y4(t,e,r){const n=G4(e);return n===null?null:ZH(t,n,r)}function eG(t,e,r,n){const i=G4(e);if(i===null||!Cx(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),g=id(m,r,n),x=z4({alt:"media",token:u});return g+x})[0]}function J4(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class rc{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(!t)throw w1()}function j1(t,e){function r(n,i){const a=Y4(t,i,e);return na(a!==null),a}return r}function tG(t,e){function r(n,i){const a=Y4(t,i,e);return na(a!==null),eG(a,i,t.host,t._protocol)}return r}function tm(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=xH():i=vH():r.getStatus()===402?i=gH(t.bucket):r.getStatus()===403?i=yH(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function N1(t){const e=tm(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=pH(t.path)),a.serverResponse=i.serverResponse,a}return r}function rG(t,e,r){const n=e.fullServerUrl(),i=id(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new rc(i,a,j1(t,r),o);return l.errorHandler=N1(e),l}function nG(t,e,r){const n=e.fullServerUrl(),i=id(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new rc(i,a,tG(t,r),o);return l.errorHandler=N1(e),l}function sG(t,e){const r=e.fullServerUrl(),n=id(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function o(c,u){}const l=new rc(n,i,o,a);return l.successCodes=[200,204],l.errorHandler=N1(e),l}function iG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function X4(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=iG(null,e)),n}function Q4(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=X4(e,n,i),d=J4(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Gi.getBlob(h,n,m);if(g===null)throw U4();const x={name:u.fullPath},y=id(a,t.host,t._protocol),_="POST",b=t.maxUploadRetryTime,v=new rc(y,_,j1(t,r),b);return v.urlParams=x,v.headers=o,v.body=g.uploadData(),v.errorHandler=tm(e),v}class tv{constructor(e,r,n,i){this.current=e,this.total=r,this.finalized=!!n,this.metadata=i||null}}function S1(t,e){let r=null;try{r=t.getResponseHeader("X-Goog-Upload-Status")}catch{na(!1)}return na(!!r&&(e||["active"]).indexOf(r)!==-1),r}function aG(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o=X4(e,n,i),l={name:o.fullPath},c=id(a,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=J4(o,r),m=t.maxUploadRetryTime;function g(y){S1(y);let _;try{_=y.getResponseHeader("X-Goog-Upload-URL")}catch{na(!1)}return na(Cx(_)),_}const x=new rc(c,u,g,m);return x.urlParams=l,x.headers=d,x.body=h,x.errorHandler=tm(e),x}function oG(t,e,r,n){const i={"X-Goog-Upload-Command":"query"};function a(u){const d=S1(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{na(!1)}h||na(!1);const m=Number(h);return na(!isNaN(m)),new tv(m,n.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,c=new rc(r,o,a,l);return c.headers=i,c.errorHandler=tm(e),c}const D2=256*1024;function lG(t,e,r,n,i,a,o,l){const c=new tv(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw jH();const u=c.total-c.current;let d=u;i>0&&(d=Math.min(d,i));const h=c.current,m=h+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const x={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},y=n.slice(h,m);if(y===null)throw U4();function _(E,C){const I=S1(E,["active","final"]),T=c.current+d,k=n.size();let R;return I==="final"?R=j1(e,a)(E,C):R=null,new tv(T,k,I==="final",R)}const b="POST",v=e.maxUploadRetryTime,w=new rc(r,b,_,v);return w.headers=x,w.body=y.uploadData(),w.progressCallback=l||null,w.errorHandler=tm(t),w}const kn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function b0(t){switch(t){case"running":case"pausing":case"canceling":return kn.RUNNING;case"paused":return kn.PAUSED;case"success":return kn.SUCCESS;case"canceled":return kn.CANCELED;case"error":return kn.ERROR;default:return kn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e,r,n){if(AH(e)||r!=null||n!=null)this.next=e,this.error=r??void 0,this.complete=n??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class uG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Fd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dG extends uG{initXhr(){this.xhr_.responseType="text"}}function Ja(){return new dG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=r,this._metadata=n,this._mappings=_1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(B4(i.status,[]))if(a)i=V4();else{this.sleepTime=Math.max(this.sleepTime*2,mH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Zt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return r=>this._updateProgress(e+r)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":e(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,r)=>{const n=aG(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((r,n)=>{const i=oG(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ja,r,n);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=D2*this._chunkMultiplier,r=new tv(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,a)=>{let o;try{o=lG(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Ja,i,a,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){D2*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,r)=>{const n=rG(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,r)=>{const n=Q4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const r=this._transferred;this._transferred=e,this._transferred!==r&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=e,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=F4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=b0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,r,n,i){const a=new cG(r||void 0,n||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,r){return this._promise.then(e,r)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const r=this._observers.indexOf(e);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(b0(this._state)){case kn.SUCCESS:xc(this._resolve.bind(null,this.snapshot))();break;case kn.CANCELED:case kn.ERROR:const r=this._reject;xc(r.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(b0(this._state)){case kn.RUNNING:case kn.PAUSED:e.next&&xc(e.next.bind(e,this.snapshot))();break;case kn.SUCCESS:e.complete&&xc(e.complete.bind(e))();break;case kn.CANCELED:case kn.ERROR:e.error&&xc(e.error.bind(e,this._error))();break;default:e.error&&xc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,r){this._service=e,r instanceof Zn?this._location=r:this._location=Zn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ml(e,r)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K4(this._location.path)}get storage(){return this._service}get parent(){const e=KH(this._location.path);if(e===null)return null;const r=new Zn(this._location.bucket,e);return new Ml(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw EH(e)}}function fG(t,e,r){t._throwIfRoot("uploadBytes");const n=Q4(t.storage,t._location,_1(),new Gi(e,!0),r);return t.storage.makeRequestWithTokens(n,Ja).then(i=>({metadata:i,ref:t}))}function mG(t,e,r){return t._throwIfRoot("uploadBytesResumable"),new hG(t,new Gi(e),r)}function pG(t){t._throwIfRoot("getDownloadURL");const e=nG(t.storage,t._location,_1());return t.storage.makeRequestWithTokens(e,Ja).then(r=>{if(r===null)throw NH();return r})}function gG(t){t._throwIfRoot("deleteObject");const e=sG(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ja)}function vG(t,e){const r=YH(t._location.path,e),n=new Zn(t._location.bucket,r);return new Ml(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(t){return/^[A-Za-z]+:\/\//.test(t)}function yG(t,e){return new Ml(t,e)}function Z4(t,e){if(t instanceof E1){const r=t;if(r._bucket==null)throw _H();const n=new Ml(r,r._bucket);return e!=null?Z4(n,e):n}else return e!==void 0?vG(t,e):t}function wG(t,e){if(e&&xG(e)){if(t instanceof E1)return yG(t,e);throw kb("To use ref(service, url), the first argument must be a Storage instance.")}else return Z4(t,e)}function O2(t,e){const r=e==null?void 0:e[M4];return r==null?null:Zn.makeFromBucketSpec(r,t)}function bG(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:wR(i,t.app.options.projectId))}class E1{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=O4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hH,this._maxUploadRetryTime=fH,this._requests=new Set,i!=null?this._bucket=Zn.makeFromBucketSpec(i,this._host):this._bucket=O2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=O2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ml(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new CH($4());{const o=VH(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const M2="@firebase/storage",L2="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="storage";function _G(t,e,r){return t=xt(t),fG(t,e,r)}function V2(t,e,r){return t=xt(t),mG(t,e,r)}function Ib(t){return t=xt(t),pG(t)}function jG(t){return t=xt(t),gG(t)}function tg(t,e){return t=xt(t),wG(t,e)}function NG(t=ix(),e){t=xt(t);const n=Fo(t,eD).getImmediate({identifier:e}),i=vR("storage");return i&&SG(n,...i),n}function SG(t,e,r,n={}){bG(t,e,r,n)}function EG(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new E1(r,n,i,e,Xl)}function CG(){Ys(new Ss(eD,EG,"PUBLIC").setMultipleInstances(!0)),$n(M2,L2,""),$n(M2,L2,"esm2017")}CG();const tD="@firebase/installations",C1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=1e4,nD=`w:${C1}`,sD="FIS_v2",TG="https://firebaseinstallations.googleapis.com/v1",kG=60*60*1e3,IG="installations",AG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ll=new Jl(IG,AG,RG);function iD(t){return t instanceof Es&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD({projectId:t}){return`${TG}/projects/${t}/installations`}function oD(t){return{token:t.token,requestStatus:2,expiresIn:DG(t.expiresIn),creationTime:Date.now()}}async function lD(t,e){const n=(await e.json()).error;return Ll.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function cD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function PG(t,{refreshToken:e}){const r=cD(t);return r.append("Authorization",OG(e)),r}async function uD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function DG(t){return Number(t.replace("s","000"))}function OG(t){return`${sD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MG({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=aD(t),i=cD(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:r,authVersion:sD,appId:t.appId,sdkVersion:nD},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await uD(()=>fetch(n,l));if(c.ok){const u=await c.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:oD(u.authToken)}}else throw await lD("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LG(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=/^[cdef][\w-]{21}$/,Ab="";function FG(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=UG(t);return VG.test(r)?r:Ab}catch{return Ab}}function UG(t){return LG(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Map;function fD(t,e){const r=Tx(t);mD(r,e),$G(r,e)}function mD(t,e){const r=hD.get(t);if(r)for(const n of r)n(e)}function $G(t,e){const r=zG();r&&r.postMessage({key:t,fid:e}),BG()}let pl=null;function zG(){return!pl&&"BroadcastChannel"in self&&(pl=new BroadcastChannel("[Firebase] FID Change"),pl.onmessage=t=>{mD(t.data.key,t.data.fid)}),pl}function BG(){hD.size===0&&pl&&(pl.close(),pl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG="firebase-installations-database",WG=1,Vl="firebase-installations-store";let _0=null;function T1(){return _0||(_0=ER(qG,WG,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vl)}}})),_0}async function rv(t,e){const r=Tx(t),i=(await T1()).transaction(Vl,"readwrite"),a=i.objectStore(Vl),o=await a.get(r);return await a.put(e,r),await i.done,(!o||o.fid!==e.fid)&&fD(t,e.fid),e}async function pD(t){const e=Tx(t),n=(await T1()).transaction(Vl,"readwrite");await n.objectStore(Vl).delete(e),await n.done}async function kx(t,e){const r=Tx(t),i=(await T1()).transaction(Vl,"readwrite"),a=i.objectStore(Vl),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await i.done,l&&(!o||o.fid!==l.fid)&&fD(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t){let e;const r=await kx(t.appConfig,n=>{const i=HG(n),a=GG(t,i);return e=a.registrationPromise,a.installationEntry});return r.fid===Ab?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function HG(t){const e=t||{fid:FG(),registrationStatus:0};return gD(e)}function GG(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ll.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=KG(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:YG(t)}:{installationEntry:e}}async function KG(t,e){try{const r=await MG(t,e);return rv(t.appConfig,r)}catch(r){throw iD(r)&&r.customData.serverCode===409?await pD(t.appConfig):await rv(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function YG(t){let e=await F2(t.appConfig);for(;e.registrationStatus===1;)await dD(100),e=await F2(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await k1(t);return n||r}return e}function F2(t){return kx(t,e=>{if(!e)throw Ll.create("installation-not-found");return gD(e)})}function gD(t){return JG(t)?{fid:t.fid,registrationStatus:0}:t}function JG(t){return t.registrationStatus===1&&t.registrationTime+rD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG({appConfig:t,heartbeatServiceProvider:e},r){const n=QG(t,r),i=PG(t,r),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:nD,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await uD(()=>fetch(n,l));if(c.ok){const u=await c.json();return oD(u)}else throw await lD("Generate Auth Token",c)}function QG(t,{fid:e}){return`${aD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(t,e=!1){let r;const n=await kx(t.appConfig,a=>{if(!vD(a))throw Ll.create("not-registered");const o=a.authToken;if(!e&&tK(o))return a;if(o.requestStatus===1)return r=ZG(t,e),a;{if(!navigator.onLine)throw Ll.create("app-offline");const l=nK(a);return r=eK(t,l),l}});return r?await r:n.authToken}async function ZG(t,e){let r=await U2(t.appConfig);for(;r.authToken.requestStatus===1;)await dD(100),r=await U2(t.appConfig);const n=r.authToken;return n.requestStatus===0?I1(t,e):n}function U2(t){return kx(t,e=>{if(!vD(e))throw Ll.create("not-registered");const r=e.authToken;return sK(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function eK(t,e){try{const r=await XG(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await rv(t.appConfig,n),r}catch(r){if(iD(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await pD(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rv(t.appConfig,n)}throw r}}function vD(t){return t!==void 0&&t.registrationStatus===2}function tK(t){return t.requestStatus===2&&!rK(t)}function rK(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kG}function nK(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function sK(t){return t.requestStatus===1&&t.requestTime+rD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iK(t){const e=t,{installationEntry:r,registrationPromise:n}=await k1(e);return n?n.catch(console.error):I1(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aK(t,e=!1){const r=t;return await oK(r),(await I1(r,e)).token}async function oK(t){const{registrationPromise:e}=await k1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){if(!t||!t.options)throw j0("App Configuration");if(!t.name)throw j0("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw j0(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function j0(t){return Ll.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="installations",cK="installations-internal",uK=t=>{const e=t.getProvider("app").getImmediate(),r=lK(e),n=Fo(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},dK=t=>{const e=t.getProvider("app").getImmediate(),r=Fo(e,xD).getImmediate();return{getId:()=>iK(r),getToken:i=>aK(r,i)}};function hK(){Ys(new Ss(xD,uK,"PUBLIC")),Ys(new Ss(cK,dK,"PRIVATE"))}hK();$n(tD,C1);$n(tD,C1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="analytics",fK="firebase_id",mK="origin",pK=60*1e3,gK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",A1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new sx("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ts=new Jl("analytics","Analytics",vK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(t){if(!t.startsWith(A1)){const e=ts.create("invalid-gtag-resource",{gtagURL:t});return zn.warn(e.message),""}return t}function yD(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function yK(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function wK(t,e){const r=yK("firebase-js-sdk-policy",{createScriptURL:xK}),n=document.createElement("script"),i=`${A1}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function bK(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _K(t,e,r,n,i,a){const o=n[i];try{if(o)await e[o];else{const c=(await yD(r)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(l){zn.error(l)}t("config",i,a)}async function jK(t,e,r,n,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await yD(r);for(const c of o){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,i||{})}catch(a){zn.error(a)}}function NK(t,e,r,n){async function i(a,...o){try{if(a==="event"){const[l,c]=o;await jK(t,e,r,l,c)}else if(a==="config"){const[l,c]=o;await _K(t,e,r,n,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){zn.error(l)}}return i}function SK(t,e,r,n,i){let a=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=NK(a,t,e,r),{gtagCore:a,wrappedGtag:window[i]}}function EK(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(A1)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=30,TK=1e3;class kK{constructor(e={},r=TK){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wD=new kK;function IK(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function AK(t){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:IK(n)},a=gK.replace("{app-id}",r),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw ts.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function RK(t,e=wD,r){const{appId:n,apiKey:i,measurementId:a}=t.options;if(!n)throw ts.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:n};throw ts.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new OK;return setTimeout(async()=>{l.abort()},pK),bD({appId:n,apiKey:i,measurementId:a},o,l,e)}async function bD(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=wD){var a;const{appId:o,measurementId:l}=t;try{await PK(n,e)}catch(c){if(l)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await AK(t);return i.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!DK(u)){if(i.deleteThrottleMetadata(o),l)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((a=u==null?void 0:u.customData)===null||a===void 0?void 0:a.httpStatus)===503?mC(r,i.intervalMillis,CK):mC(r,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return i.setThrottleMetadata(o,h),zn.debug(`Calling attemptFetch again in ${d} millis`),bD(t,h,n,i)}}function PK(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(a),n(ts.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function DK(t){if(!(t instanceof Es)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class OK{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function MK(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const a=await e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LK(){if(_R())try{await jR()}catch(t){return zn.warn(ts.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zn.warn(ts.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VK(t,e,r,n,i,a,o){var l;const c=RK(t);c.then(g=>{r[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>zn.error(g)),e.push(c);const u=LK().then(g=>{if(g)return n.getId()}),[d,h]=await Promise.all([c,u]);EK(a)||wK(a,d.measurementId),i("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[mK]="firebase",m.update=!0,h!=null&&(m[fK]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e){this.app=e}_delete(){return delete _h[this.app.options.appId],Promise.resolve()}}let _h={},$2=[];const z2={};let N0="dataLayer",UK="gtag",B2,_D,q2=!1;function $K(){const t=[];if(bR()&&t.push("This is a browser extension environment."),P8()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=ts.create("invalid-analytics-context",{errorInfo:e});zn.warn(r.message)}}function zK(t,e,r){$K();const n=t.options.appId;if(!n)throw ts.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ts.create("no-api-key");if(_h[n]!=null)throw ts.create("already-exists",{id:n});if(!q2){bK(N0);const{wrappedGtag:a,gtagCore:o}=SK(_h,$2,z2,N0,UK);_D=a,B2=o,q2=!0}return _h[n]=VK(t,$2,z2,e,B2,N0,r),new FK(t)}function BK(t=ix()){t=xt(t);const e=Fo(t,nv);return e.isInitialized()?e.getImmediate():qK(t)}function qK(t,e={}){const r=Fo(t,nv);if(r.isInitialized()){const i=r.getImmediate();if(Jh(e,r.getOptions()))return i;throw ts.create("already-initialized")}return r.initialize({options:e})}function WK(t,e,r,n){t=xt(t),MK(_D,_h[t.app.options.appId],e,r,n).catch(i=>zn.error(i))}const W2="@firebase/analytics",H2="0.10.8";function HK(){Ys(new Ss(nv,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return zK(n,i,r)},"PUBLIC")),Ys(new Ss("analytics-internal",t,"PRIVATE")),$n(W2,H2),$n(W2,H2,"esm2017");function t(e){try{const r=e.getProvider(nv).getImmediate();return{logEvent:(n,i,a)=>WK(r,n,i,a)}}catch(r){throw ts.create("interop-component-reg-failed",{reason:r})}}}HK();const GK={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Ix=CR(GK),Et=h7(Ix),be=eH(Ix),rg=NG(Ix);BK(Ix);const ai={USERS:"users",LISTINGS:"listings",REVIEWS:"reviews",FAVORITES:"favorites",CONVERSATIONS:"conversations",MESSAGES:"messages",REPORTS:"reports",CHAT_HISTORY:"chatHistory"},G2={actionCodeSettings:{url:`${window.location.origin}/StudyMarket/auth`,handleCodeInApp:!1}};Et.useDeviceLanguage();Et.settings.appVerificationDisabledForTesting=!1;class S0{static async createUser(e,r){const n=Ze(be,ai.USERS,e),i={id:e,email:r.email,displayName:r.displayName||"Utilisateur",photoURL:r.photoURL||null,phone:null,isVerified:!1,verificationStatus:"not_started",university:r.university||"Universit non spcifie",studentEmail:r.studentEmail||null,fieldOfStudy:r.fieldOfStudy||"Non spcifi",graduationYear:r.graduationYear||new Date().getFullYear()+2,campus:r.campus||"Campus principal",bio:null,location:"Paris, France",rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date};await wh(n,{...i,createdAt:Pr(),lastSeen:Pr()})}static async getUser(e){var r,n;try{const i=await On(Ze(be,ai.USERS,e));if(!i.exists())return null;const a=i.data();return{...a,id:e,createdAt:((r=a.createdAt)==null?void 0:r.toDate())||new Date,lastSeen:((n=a.lastSeen)==null?void 0:n.toDate())||new Date}}catch(i){return console.error("Error getting user:",i),null}}static async updateUser(e,r){const n=Ze(be,ai.USERS,e),i=Object.fromEntries(Object.entries(r).filter(([a,o])=>o!==void 0));await yr(n,{...i,updatedAt:Pr()})}static async updateUserStats(e,r){const n=Ze(be,ai.USERS,e),i={};r.reviewCount!==void 0&&(i.reviewCount=r.reviewCount),r.averageRating!==void 0&&(i.rating=r.averageRating),r.transactionsCount!==void 0&&(i.transactionsCount=A2(r.transactionsCount)),r.co2Saved!==void 0&&(i.co2Saved=A2(r.co2Saved)),await yr(n,i)}static async deleteUser(e){const r=D4(be);r.delete(Ze(be,ai.USERS,e));const n=$t(It(be,ai.LISTINGS),Yt("sellerId","==",e));(await rr(n)).forEach(u=>{r.delete(u.ref)});const a=$t(It(be,ai.FAVORITES),Yt("userId","==",e));(await rr(a)).forEach(u=>{r.delete(u.ref)});const l=$t(It(be,ai.REVIEWS),Yt("reviewerId","==",e));(await rr(l)).forEach(u=>{r.delete(u.ref)}),await r.commit()}static async searchUsers(e,r=10){try{const n=It(be,ai.USERS),i=e(n,Yt("displayName",">=",e),Yt("displayName","<=",e+""),ev("displayName"),r(r));return(await rr(i)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error searching users:",n),[]}}static async getUsersByUniversity(e,r=20){try{const n=It(be,ai.USERS),i=$t(n,Yt("university","==",e),ev("createdAt","desc"),r(r));return(await rr(i)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error getting users by university:",n),[]}}}const KK="modulepreload",YK=function(t){return"/StudyMarket/"+t},K2={},ad=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=YK(c),c in K2)return;K2[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":KK,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},JK=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ad(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class R1 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class XK extends R1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class QK extends R1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ZK extends R1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rb||(Rb={}));var eY=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class tY{constructor(e,{headers:r={},customFetch:n,region:i=Rb.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=JK(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return eY(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(x=>{throw new XK(x)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new QK(d);if(!d.ok)throw new ZK(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var An={},P1={},Ax={},rm={},Rx={},Px={},rY=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ou=rY();const nY=Ou.fetch,jD=Ou.fetch.bind(Ou),ND=Ou.Headers,sY=Ou.Request,iY=Ou.Response,od=Object.freeze(Object.defineProperty({__proto__:null,Headers:ND,Request:sY,Response:iY,default:jD,fetch:nY},Symbol.toStringTag,{value:"Module"})),aY=LV(od);var Dx={};Object.defineProperty(Dx,"__esModule",{value:!0});let oY=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Dx.default=oY;var SD=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Px,"__esModule",{value:!0});const lY=SD(aY),cY=SD(Dx);let uY=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=lY.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,m=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const b=await a.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await a.text();try{u=JSON.parse(y),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,g="OK")}catch{a.status===404&&y===""?(m=204,g="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&this.shouldThrowOnError)throw new cY.default(u)}return{error:u,data:d,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};Px.default=uY;var dY=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rx,"__esModule",{value:!0});const hY=dY(Px);let fY=class extends hY.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Rx.default=fY;var mY=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rm,"__esModule",{value:!0});const pY=mY(Rx);let gY=class extends pY.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};rm.default=gY;var vY=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ax,"__esModule",{value:!0});const Ud=vY(rm);let xY=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ud.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ud.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ud.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Ud.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ud.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ax.default=xY;var Ox={},Mx={};Object.defineProperty(Mx,"__esModule",{value:!0});Mx.version=void 0;Mx.version="0.0.0-automated";Object.defineProperty(Ox,"__esModule",{value:!0});Ox.DEFAULT_HEADERS=void 0;const yY=Mx;Ox.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yY.version}`};var ED=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P1,"__esModule",{value:!0});const wY=ED(Ax),bY=ED(rm),_Y=Ox;let jY=class CD{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},_Y.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new wY.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new CD(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new bY.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};P1.default=jY;var ld=_s&&_s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(An,"__esModule",{value:!0});An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const TD=ld(P1);An.PostgrestClient=TD.default;const kD=ld(Ax);An.PostgrestQueryBuilder=kD.default;const ID=ld(rm);An.PostgrestFilterBuilder=ID.default;const AD=ld(Rx);An.PostgrestTransformBuilder=AD.default;const RD=ld(Px);An.PostgrestBuilder=RD.default;const PD=ld(Dx);An.PostgrestError=PD.default;var NY=An.default={PostgrestClient:TD.default,PostgrestQueryBuilder:kD.default,PostgrestFilterBuilder:ID.default,PostgrestTransformBuilder:AD.default,PostgrestBuilder:RD.default,PostgrestError:PD.default};const{PostgrestClient:SY,PostgrestQueryBuilder:ume,PostgrestFilterBuilder:dme,PostgrestTransformBuilder:hme,PostgrestBuilder:fme,PostgrestError:mme}=NY;let Pb;typeof window>"u"?Pb=require("ws"):Pb=window.WebSocket;const EY=Pb,CY="2.11.10",TY={"X-Client-Info":`realtime-js/${CY}`},kY="1.0.0",DD=1e4,IY=1e3;var cu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(cu||(cu={}));var pn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pn||(pn={}));var Os;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Os||(Os={}));var Db;(function(t){t.websocket="websocket"})(Db||(Db={}));var ul;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ul||(ul={}));class AY{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class OD{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Vt||(Vt={}));const Y2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=RY(o,t,e,i),a),{})},RY=(t,e,r,n)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?MD(a,o):Ob(o)},MD=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return MY(e,r)}switch(t){case Vt.bool:return PY(e);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return DY(e);case Vt.json:case Vt.jsonb:return OY(e);case Vt.timestamp:return LY(e);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return Ob(e);default:return Ob(e)}},Ob=t=>t,PY=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},DY=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},OY=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},MY=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>MD(e,l))}return t},LY=t=>typeof t=="string"?t.replace(" ","T"):t,LD=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class E0{constructor(e,r,n={},i=DD){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J2||(J2={}));class jh{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jh.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=jh.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=jh.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const m=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),x=d.filter(_=>g.indexOf(_.presence_ref)<0),y=h.filter(_=>m.indexOf(_.presence_ref)<0);x.length>0&&(l[u]=x),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var X2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(X2||(X2={}));var Q2;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Q2||(Q2={}));var qi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qi||(qi={}));class D1{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new E0(this,Os.join,this.params,this.timeout),this.rejoinTimer=new OD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Os.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new jh(this),this.broadcastEndpointURL=LD(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(qi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(qi.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(qi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,x=[];for(let y=0;y<g;y++){const _=m[y],{filter:{event:b,schema:v,table:w,filter:E}}=_,C=d&&d[y];if(C&&C.event===b&&C.schema===v&&C.table===w&&C.filter===E)x.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),this.state=pn.errored,e==null||e(qi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(qi.SUBSCRIBED);return}}).receive("error",d=>{this.state=pn.errored,e==null||e(qi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Os.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const i=new E0(this,Os.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new E0(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Os;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var x,y,_;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(y=g.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(g=>g.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var x,y,_,b,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const E=g.id,C=(x=g.filter)===null||x===void 0?void 0:x.event;return E&&((y=r.ids)===null||y===void 0?void 0:y.includes(E))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const E=(v=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:y,table:_,commit_timestamp:b,type:v,errors:w}=x;m=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:b,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(x))}g.callback(m,n)})}_isClosed(){return this.state===pn.closed}_isJoined(){return this.state===pn.joined}_isJoining(){return this.state===pn.joining}_isLeaving(){return this.state===pn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&D1.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Os.close,{},e)}_onError(e){this._on(Os.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Y2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Y2(e.columns,e.old_record)),r}}const Z2=()=>{},VY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FY{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=TY,this.params={},this.timeout=DD,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Z2,this.ref=0,this.logger=Z2,this.conn=null,this.sendBuffer=[],this.serializer=new AY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>ad(async()=>{const{default:c}=await Promise.resolve().then(()=>od);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Db.websocket}`,this.httpEndpoint=LD(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new OD(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=EY),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new UY(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kY}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case cu.connecting:return ul.Connecting;case cu.open:return ul.Open;case cu.closing:return ul.Closing;default:return ul.Closed}}isConnected(){return this.connectionState()===ul.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new D1(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Os.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(IY,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:a,ref:o}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Os.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([VY],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class UY{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=cu.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class O1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class $Y extends O1{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Mb extends O1{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var zY=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const VD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ad(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},BY=()=>zY(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ad(()=>Promise.resolve().then(()=>od),void 0)).Response:Response}),Lb=t=>{if(Array.isArray(t))return t.map(r=>Lb(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Lb(n)}),e};var nc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const C0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qY=(t,e,r)=>nc(void 0,void 0,void 0,function*(){const n=yield BY();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{e(new $Y(C0(i),t.status||500))}).catch(i=>{e(new Mb(C0(i),i))}):e(new Mb(C0(t),t))}),WY=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function nm(t,e,r,n,i,a){return nc(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,WY(e,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>qY(c,l,n))})})}function sv(t,e,r,n){return nc(this,void 0,void 0,function*(){return nm(t,"GET",e,r,n)})}function Ba(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return nm(t,"POST",e,n,i,r)})}function HY(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return nm(t,"PUT",e,n,i,r)})}function GY(t,e,r,n){return nc(this,void 0,void 0,function*(){return nm(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function FD(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return nm(t,"DELETE",e,n,i,r)})}var Cn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const KY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class YY{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=VD(i)}uploadOrUpdate(e,r,n,i){return Cn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},eT),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Rr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Cn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:eT.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Cn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Ba(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new O1("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Rr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Rr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Cn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ba(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Rr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Cn(this,void 0,void 0,function*(){try{const i=yield Ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Rr(i))return{data:null,error:i};throw i}})}download(e,r){return Cn(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield sv(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Rr(l))return{data:null,error:l};throw l}})}info(e){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield sv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Lb(n),error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}exists(e){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield GY(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Rr(n)&&n instanceof Mb){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield FD(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Cn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},KY),r),{prefix:e||""});return{data:yield Ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Rr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const JY="2.7.1",XY={"X-Client-Info":`storage-js/${JY}`};var yc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class QY{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},XY),r),this.fetch=VD(n)}listBuckets(){return yc(this,void 0,void 0,function*(){try{return{data:yield sv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Rr(e))return{data:null,error:e};throw e}})}getBucket(e){return yc(this,void 0,void 0,function*(){try{return{data:yield sv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return yc(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return yc(this,void 0,void 0,function*(){try{return{data:yield HY(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return yc(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return yc(this,void 0,void 0,function*(){try{return{data:yield FD(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}}class ZY extends QY{constructor(e,r={},n){super(e,r,n)}from(e){return new YY(this.url,this.headers,e,this.fetch)}}const eJ="2.50.0";let rh="";typeof Deno<"u"?rh="deno":typeof document<"u"?rh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rh="react-native":rh="node";const tJ={"X-Client-Info":`supabase-js-${rh}/${eJ}`},rJ={headers:tJ},nJ={schema:"public"},sJ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iJ={};var aJ=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const oJ=t=>{let e;return t?e=t:typeof fetch>"u"?e=jD:e=fetch,(...r)=>e(...r)},lJ=()=>typeof Headers>"u"?ND:Headers,cJ=(t,e,r)=>{const n=oJ(r),i=lJ();return(a,o)=>aJ(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var uJ=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function dJ(t){return t.endsWith("/")?t:t+"/"}function hJ(t,e){var r,n;const{db:i,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>uJ(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const UD="2.70.0",Dc=30*1e3,Vb=3,T0=Vb*Dc,fJ="http://localhost:9999",mJ="supabase.auth.token",pJ={"X-Client-Info":`gotrue-js/${UD}`},Fb="X-Supabase-Api-Version",$D={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gJ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vJ=6e5;class M1 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Qe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class xJ extends M1{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function yJ(t){return Qe(t)&&t.name==="AuthApiError"}class zD extends M1{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class $o extends M1{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Fa extends $o{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wJ(t){return Qe(t)&&t.name==="AuthSessionMissingError"}class fp extends $o{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mp extends $o{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pp extends $o{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bJ(t){return Qe(t)&&t.name==="AuthImplicitGrantRedirectError"}class tT extends $o{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ub extends $o{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function k0(t){return Qe(t)&&t.name==="AuthRetryableFetchError"}class rT extends $o{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Nh extends $o{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const iv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nT=` 	
\r=`.split(""),_J=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nT.length;e+=1)t[nT[e].charCodeAt(0)]=-2;for(let e=0;e<iv.length;e+=1)t[iv[e].charCodeAt(0)]=e;return t})();function sT(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(iv[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(iv[n]),e.queuedBits-=6}}function BD(t,e,r){const n=_J[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function iT(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{SJ(o,n,r)};for(let o=0;o<t.length;o+=1)BD(t.charCodeAt(o),i,a);return e.join("")}function jJ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function NJ(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}jJ(n,e)}}function SJ(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function EJ(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)BD(t.charCodeAt(i),r,n);return new Uint8Array(e)}function CJ(t){const e=[];return NJ(t,r=>e.push(r)),new Uint8Array(e)}function TJ(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>sT(i,r,n)),sT(null,r,n),e.join("")}function kJ(t){return Math.round(Date.now()/1e3)+t}function IJ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const As=()=>typeof window<"u"&&typeof document<"u",el={tested:!1,writable:!1},Sh=()=>{if(!As())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(el.tested)return el.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),el.tested=!0,el.writable=!0}catch{el.tested=!0,el.writable=!1}return el.writable};function AJ(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const qD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ad(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},RJ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",WD=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},gp=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vp=async(t,e)=>{await t.removeItem(e)};class Lx{constructor(){this.promise=new Lx.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Lx.promiseConstructor=Promise;function I0(t){const e=t.split(".");if(e.length!==3)throw new Nh("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!gJ.test(e[n]))throw new Nh("JWT not in base64url format");return{header:JSON.parse(iT(e[0])),payload:JSON.parse(iT(e[1])),signature:EJ(e[2]),raw:{header:e[0],payload:e[1]}}}async function PJ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function DJ(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function OJ(t){return("0"+t.toString(16)).substr(-2)}function MJ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,OJ).join("")}async function LJ(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function VJ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await LJ(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wc(t,e,r=!1){const n=MJ();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await WD(t,`${e}-code-verifier`,i);const a=await VJ(n);return[a,n===a?"plain":"s256"]}const FJ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UJ(t){const e=t.headers.get(Fb);if(!e||!e.match(FJ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $J(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zJ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const BJ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bc(t){if(!BJ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var qJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const ll=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WJ=[502,503,504];async function aT(t){var e;if(!RJ(t))throw new Ub(ll(t),0);if(WJ.includes(t.status))throw new Ub(ll(t),t.status);let r;try{r=await t.json()}catch(a){throw new zD(ll(a),a)}let n;const i=UJ(t);if(i&&i.getTime()>=$D["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new rT(ll(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Fa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new rT(ll(r),t.status,r.weak_password.reasons);throw new xJ(ll(r),t.status||500,n)}const HJ=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ft(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Fb]||(a[Fb]=$D["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await GJ(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function GJ(t,e,r,n,i,a){const o=HJ(e,n,i,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Ub(ll(c),0)}if(l.ok||await aT(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await aT(c)}}function $i(t){var e;let r=null;XJ(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=kJ(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function oT(t){const e=$i(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function KJ(t){return{data:t,error:null}}function YJ(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=qJ(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function JJ(t){return t}function XJ(t){return t.access_token&&t.refresh_token&&t.expires_in}const A0=["global","local","others"];var QJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class ZJ{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=qD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=A0[0]){if(A0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${A0.join(", ")}`);try{return await ft(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=QJ(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:YJ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:JJ});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Qe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){bc(e);try{return await ft(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xa})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){bc(e);try{return await ft(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Xa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){bc(e);try{return await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xa})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){bc(e.userId);try{const{data:r,error:n}=await ft(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){bc(e.userId),bc(e.id);try{return{data:await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}}const eX={getItem:t=>Sh()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Sh()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Sh()&&globalThis.localStorage.removeItem(t)}};function lT(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function tX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _c={debug:!!(globalThis&&Sh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HD extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rX extends HD{}async function nX(t,e,r){_c.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),_c.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){_c.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{_c.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw _c.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rX(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_c.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}tX();const sX={url:fJ,storageKey:mJ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pJ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function cT(t,e,r){return await r()}class uf{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uf.nextInstanceID,uf.nextInstanceID+=1,this.instanceID>0&&As()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},sX),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ZJ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qD(i.fetch),this.lock=i.lock||cT,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:As()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=nX:this.lock=cT,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Sh()?this.storage=eX:(this.memoryStorage={},this.storage=lT(this.memoryStorage)):(this.memoryStorage={},this.storage=lT(this.memoryStorage)),As()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${UD}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=AJ(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),As()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),bJ(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Qe(r)?{error:r}:{error:new zD("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:$i}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Qe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:d,password:h,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await wc(this.storage,this.storageKey)),a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:$i})}else if("phone"in e){const{phone:d,password:h,options:m}=e;a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:$i})}else throw new mp("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Qe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oT})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oT})}else throw new mp("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fp}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,a,o,l,c,u,d,h,m,g;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:_,wallet:b,statement:v,options:w}=e;let E;if(As())if(typeof b=="object")E=b;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))E=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=b}const C=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const I=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),v?{statement:v}:null));let T;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")T=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)T=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)x=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),y=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${C.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const I=await E.signMessage(new TextEncoder().encode(x),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=I}}try{const{data:_,error:b}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:TJ(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:$i});if(b)throw b;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new fp}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:b})}catch(_){if(Qe(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const r=await gp(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:$i});if(await vp(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new fp}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Qe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,l=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$i}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await wc(this.storage,this.storageKey));const{error:h}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new mp("You must provide either an email or phone number.")}catch(l){if(Qe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:$i});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await wc(this.storage,this.storageKey)),await ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:KJ})}catch(a){if(Qe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Fa;const{error:i}=await ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await ft(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:l}=await ft(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new mp("You must provide either an email or phone number and a type")}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await gp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<T0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xa}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fa}:await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Xa})})}catch(r){if(Qe(r))return wJ(r)&&(await this._removeSession(),await vp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Fa;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await wc(this.storage,this.storageKey));const{data:u,error:d}=await ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Xa});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fa;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=I0(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Qe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Fa;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!As())throw new pp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new tT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tT("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new pp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const g=m-d;g*1e3<=Dc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=m-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:y,error:_}=await this._getUser(a);if(_)throw _;const b={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(Qe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await gp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(yJ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=IJ(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await wc(this.storage,this.storageKey,!0));try{return await ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Qe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ft(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return As()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Qe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await ft(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await DJ(async i=>(i>0&&await PJ(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$i})),(i,a)=>{const o=200*Math.pow(2,i);return a&&k0(a)&&Date.now()+o-n<Dc})}catch(n){if(this._debug(r,"error",n),Qe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),As()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await gp(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<T0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${T0}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),k0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Lx;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Fa;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Qe(a)){const o={session:null,error:a};return k0(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await WD(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&As()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Dc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Dc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Dc}ms, refresh threshold is ${Vb} ticks`),i<=Vb&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof HD)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!As()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await wc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ft(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ft(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=I0(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+vJ>Date.now()))return n;const{data:i,error:a}=await ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new Nh("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new Nh("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};n=g.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=I0(n);if($J(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:i,signature:o},error:null}}const u=zJ(i.alg),d=await this.fetchJwk(i.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,CJ(`${l}.${c}`)))throw new Nh("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}}uf.nextInstanceID=0;const iX=uf;class aX extends iX{constructor(e){super(e)}}var oX=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class lX{constructor(e,r,n){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=dJ(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:nJ,realtime:iJ,auth:Object.assign(Object.assign({},sJ),{storageKey:u}),global:rJ},h=hJ(n??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=cJ(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new SY(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new tY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ZY(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return oX(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aX({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new FY(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const L1=(t,e,r)=>new lX(t,e,r),GD="https://kbbhglxrcywpcktkamhl.supabase.co",cX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",uX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA",Ue=L1(GD,cX,{auth:{persistSession:!0},realtime:{params:{eventsPerSecond:10}}}),fn=L1(GD,uX,{auth:{persistSession:!1},realtime:{params:{eventsPerSecond:10}}}),tS=class tS{static async intelligentSync(e){try{return console.log(" [AUTO-SYNC] Synchronisation intelligente pour:",e.uid),await this.cleanupOrphanedAccounts(e.email),await this.upsertCurrentUser(e),await this.verifyDataConsistency(e),console.log(" [AUTO-SYNC] Synchronisation intelligente russie"),{success:!0,userId:e.uid}}catch(r){throw console.error(" [AUTO-SYNC] Erreur synchronisation intelligente:",r),r}}static async cleanupOrphanedAccounts(e){try{console.log(" [AUTO-SYNC] Nettoyage des comptes orphelins pour:",e);const{data:r,error:n}=await this.serviceRoleClient.from("user_profiles").select("*").eq("email",e);if(n){console.log(" [AUTO-SYNC] Erreur rcupration comptes existants:",n);return}if(!r||r.length===0){console.log(" [AUTO-SYNC] Aucun compte existant trouv");return}const i=Et.currentUser,a=i?[i.uid]:[];for(const o of r)a.includes(o.id)||(console.log(" [AUTO-SYNC] Suppression compte orphelin:",o.id),await this.cleanupUserData(o.id),await this.serviceRoleClient.from("user_profiles").delete().eq("id",o.id),console.log(" [AUTO-SYNC] Compte orphelin supprim:",o.id))}catch(r){console.error(" [AUTO-SYNC] Erreur nettoyage:",r)}}static async cleanupUserData(e){try{console.log(" [AUTO-SYNC] Nettoyage donnes pour:",e),await this.serviceRoleClient.from("user_notifications").delete().eq("user_id",e),await this.serviceRoleClient.from("admin_notifications").delete().eq("user_id",e),await this.serviceRoleClient.from("verification_requests").delete().eq("user_id",e),console.log(" [AUTO-SYNC] Donnes utilisateur nettoyes")}catch(r){console.error(" [AUTO-SYNC] Erreur nettoyage donnes:",r)}}static async upsertCurrentUser(e){try{console.log(" [AUTO-SYNC] Upsert utilisateur:",e.uid);const r={id:e.uid,email:e.email,full_name:e.displayName||"",role:this.determineUserRole(e.email),verification_status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:n,error:i}=await this.serviceRoleClient.from("user_profiles").upsert(r,{onConflict:"id"}).select().single();if(i)throw i;return console.log(" [AUTO-SYNC] Utilisateur cr/mis  jour:",e.uid),n}catch(r){throw console.error(" [AUTO-SYNC] Erreur upsert:",r),r}}static determineUserRole(e){return["barrymohamadou98@gmail.com","mohamadou.barry@sorbonne-nouvelle.fr","mohamadou.barry@unchk.edu.sn"].includes(e)?"admin":"user"}static async verifyDataConsistency(e){try{console.log(" [AUTO-SYNC] Vrification cohrence pour:",e.uid);const{data:r,error:n}=await this.serviceRoleClient.from("user_profiles").select("*").eq("id",e.uid).single();if(n||!r)throw new Error("Utilisateur non trouv aprs synchronisation");r.email!==e.email&&(console.log(" [AUTO-SYNC] Correction email incohrent"),await this.serviceRoleClient.from("user_profiles").update({email:e.email,updated_at:new Date().toISOString()}).eq("id",e.uid)),console.log(" [AUTO-SYNC] Cohrence vrifie")}catch(r){throw console.error(" [AUTO-SYNC] Erreur vrification cohrence:",r),r}}static async periodicSync(){try{const e=Et.currentUser;if(!e){console.log(" [AUTO-SYNC] Aucun utilisateur connect pour sync priodique");return}console.log(" [AUTO-SYNC] Synchronisation priodique dmarre"),await this.intelligentSync(e)}catch(e){console.error(" [AUTO-SYNC] Erreur sync priodique:",e)}}static startAutoSync(){return console.log(" [AUTO-SYNC] Dmarrage synchronisation automatique"),Et.onAuthStateChanged(async e=>{if(e){console.log(" [AUTO-SYNC] Utilisateur dtect, synchronisation...");try{await this.intelligentSync(e)}catch(r){console.error(" [AUTO-SYNC] Erreur sync automatique:",r)}}else console.log(" [AUTO-SYNC] Utilisateur dconnect")})}static async forceFreshSync(){try{const e=Et.currentUser;if(!e)throw new Error("Aucun utilisateur connect");return console.log(" [AUTO-SYNC] Synchronisation force dmarre"),await e.getIdToken(!0),await this.intelligentSync(e),console.log(" [AUTO-SYNC] Synchronisation force termine"),{success:!0}}catch(e){throw console.error(" [AUTO-SYNC] Erreur sync force:",e),e}}static async getSyncStatus(e){try{const{data:r}=await Ue.from("user_profiles").select("*").eq("id",e).single(),n=Et.currentUser;return{isFirebaseConnected:!!n,isSupabaseSynced:!!r,firebaseUserId:n==null?void 0:n.uid,supabaseUserId:r==null?void 0:r.id,lastSync:r==null?void 0:r.updated_at,isConsistent:(n==null?void 0:n.uid)===(r==null?void 0:r.id)&&(n==null?void 0:n.email)===(r==null?void 0:r.email)}}catch(r){return console.error(" [AUTO-SYNC] Erreur statut sync:",r),null}}};tS.serviceRoleClient=L1("https://kbbhglxrcywpcktkamhl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA");let Yc=tS,dX={data:""},hX=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||dX,fX=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,mX=/\/\*[^]*?\*\/|  +/g,uT=/\n+/g,Qa=(t,e)=>{let r="",n="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":n+=a[1]=="f"?Qa(o,a):a+"{"+Qa(o,a[1]=="k"?"":e)+"}":typeof o=="object"?n+=Qa(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Qa.p?Qa.p(a,o):a+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+n},Li={},KD=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+KD(t[r]);return e}return t},pX=(t,e,r,n,i)=>{let a=KD(t),o=Li[a]||(Li[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!Li[o]){let c=a!==t?t:(u=>{let d,h,m=[{}];for(;d=fX.exec(u.replace(mX,""));)d[4]?m.shift():d[3]?(h=d[3].replace(uT," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(uT," ").trim();return m[0]})(t);Li[o]=Qa(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Li.g?Li.g:null;return r&&(Li.g=Li[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Li[o],e,n,l),o},gX=(t,e,r)=>t.reduce((n,i,a)=>{let o=e[a];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Qa(l,""):l===!1?"":l}return n+i+(o??"")},"");function Vx(t){let e=this||{},r=t.call?t(e.p):t;return pX(r.unshift?r.raw?gX(r,[].slice.call(arguments,1),e.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):r,hX(e.target),e.g,e.o,e.k)}let YD,$b,zb;Vx.bind({g:1});let ga=Vx.bind({k:1});function vX(t,e,r,n){Qa.p=e,YD=t,$b=r,zb=n}function zo(t,e){let r=this||{};return function(){let n=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;r.p=Object.assign({theme:$b&&$b()},l),r.o=/ *go\d+/.test(c),l.className=Vx.apply(r,n)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),zb&&u[0]&&zb(l),YD(u,l)}return i}}var xX=t=>typeof t=="function",Bb=(t,e)=>xX(t)?t(e):t,yX=(()=>{let t=0;return()=>(++t).toString()})(),wX=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),bX=20,JD=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,bX)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return JD(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},_X=[],R0={toasts:[],pausedAt:void 0},V1=t=>{R0=JD(R0,t),_X.forEach(e=>{e(R0)})},jX=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||yX()}),sm=t=>(e,r)=>{let n=jX(e,t,r);return V1({type:2,toast:n}),n.id},ht=(t,e)=>sm("blank")(t,e);ht.error=sm("error");ht.success=sm("success");ht.loading=sm("loading");ht.custom=sm("custom");ht.dismiss=t=>{V1({type:3,toastId:t})};ht.remove=t=>V1({type:4,toastId:t});ht.promise=(t,e,r)=>{let n=ht.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Bb(e.success,i):void 0;return a?ht.success(a,{id:n,...r,...r==null?void 0:r.success}):ht.dismiss(n),i}).catch(i=>{let a=e.error?Bb(e.error,i):void 0;a?ht.error(a,{id:n,...r,...r==null?void 0:r.error}):ht.dismiss(n)}),t};var NX=ga`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SX=ga`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EX=ga`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,CX=zo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${NX} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SX} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EX} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,TX=ga`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kX=zo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${TX} 1s linear infinite;
`,IX=ga`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,AX=ga`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,RX=zo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IX} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${AX} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,PX=zo("div")`
  position: absolute;
`,DX=zo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OX=ga`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,MX=zo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OX} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,LX=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?p.createElement(MX,null,e):e:r==="blank"?null:p.createElement(DX,null,p.createElement(kX,{...n}),r!=="loading"&&p.createElement(PX,null,r==="error"?p.createElement(CX,{...n}):p.createElement(RX,{...n})))},VX=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,FX=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,UX="0%{opacity:0;} 100%{opacity:1;}",$X="0%{opacity:1;} 100%{opacity:0;}",zX=zo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,BX=zo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qX=(t,e)=>{let r=t.includes("top")?1:-1,[n,i]=wX()?[UX,$X]:[VX(r),FX(r)];return{animation:e?`${ga(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ga(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};p.memo(({toast:t,position:e,style:r,children:n})=>{let i=t.height?qX(t.position||e||"top-center",t.visible):{opacity:0},a=p.createElement(LX,{toast:t}),o=p.createElement(BX,{...t.ariaProps},Bb(t.message,t));return p.createElement(zX,{className:t.className,style:{...i,...r,...t.style}},typeof n=="function"?n({icon:a,message:o}):p.createElement(p.Fragment,null,a,o))});vX(p.createElement);Vx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var ue=ht;const dT="https://kbbhglxrcywpcktkamhl.supabase.co",xp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA";class P0{static async syncUserToSupabase(e,r="user_update"){var n,i,a,o,l;try{console.log(` [SYNC] Synchronisation ${r} pour l'utilisateur:`,e.uid);const c={sync_type:r,timestamp:new Date().toISOString(),user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,metadata:{creationTime:(n=e.metadata)==null?void 0:n.creationTime,lastSignInTime:(i=e.metadata)==null?void 0:i.lastSignInTime}}};console.log(" [SYNC] Donnes utilisateur  synchroniser:",c);const u=await fetch(`${dT}/functions/v1/firebase-sync-real`,{method:"POST",headers:{Authorization:`Bearer ${xp}`,apikey:xp,"Content-Type":"application/json"},body:JSON.stringify(c)});if(u.ok){const d=await u.json();return console.log(" [SYNC] Synchronisation russie:",d),{success:!0,message:d.message||"Synchronisation russie",users_synced:((a=d.synchronization)==null?void 0:a.users_synced)||0,errors:((o=d.synchronization)==null?void 0:o.errors)||[],warnings:((l=d.synchronization)==null?void 0:l.warnings)||[]}}else{const d=await u.json();return console.error(" [SYNC] Erreur de synchronisation:",d),{success:!1,message:d.message||"Erreur de synchronisation",users_synced:0,errors:[d.message||"Erreur HTTP"],warnings:[]}}}catch(c){return console.error(" [SYNC] Erreur rseau lors de la synchronisation:",c),{success:!1,message:"Erreur rseau lors de la synchronisation",users_synced:0,errors:[c instanceof Error?c.message:"Erreur inconnue"],warnings:[]}}}static async syncUserCreation(e){return this.syncUserToSupabase(e,"user_creation")}static async syncUserUpdate(e){return this.syncUserToSupabase(e,"user_update")}static async syncUserLogin(e){return this.syncUserToSupabase(e,"user_login")}static async syncUserVerification(e){return this.syncUserToSupabase(e,"user_verification")}static async testConnection(){try{return(await fetch(`${dT}/functions/v1/firebase-sync-real`,{method:"GET",headers:{Authorization:`Bearer ${xp}`,apikey:xp,"Content-Type":"application/json"}})).ok}catch(e){return console.error(" [SYNC] Erreur test de connexion:",e),!1}}}const XD=p.createContext(void 0),Ot=()=>{const t=p.useContext(XD);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},WX=({children:t})=>{const[e,r]=p.useState(null),[n,i]=p.useState(null),[a,o]=p.useState(!0),l=async(y,_)=>{try{console.log(" [AUTH] Cration/mise  jour du profil utilisateur:",y.uid);const b={id:y.uid,email:y.email||"",displayName:y.displayName||(_==null?void 0:_.displayName)||"",photoURL:y.photoURL||"",isVerified:!1,verificationStatus:"pending",rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date,..._};console.log(" [AUTH] Donnes du profil:",b);try{const v=await P0.syncUserCreation(y);v.success?(console.log(" [AUTH] Profil cr avec Supabase:",v.message),i(b)):console.warn(" [AUTH] Erreur cration profil Supabase:",v.errors)}catch(v){console.warn(" [AUTH] Erreur synchronisation Supabase (cration):",v)}console.log(" [AUTH] Synchronisation automatique pour cration du profil");try{const v=await Yc.intelligentSync(y);v.success?console.log(" [AUTH] Synchronisation automatique russie:",v.userId):console.warn(" [AUTH] Synchronisation automatique choue")}catch(v){console.warn(" [AUTH] Erreur synchronisation automatique (cration):",v)}console.log(" [AUTH] Profil utilisateur cr avec succs"),ht.success("Compte cr avec succs !")}catch(b){throw console.error(" [AUTH] Erreur cration du profil:",b),ht.error("Erreur lors de la cration du profil"),b}};p.useEffect(()=>{console.log(" [AUTH] Dmarrage de la synchronisation automatique");const y=Yc.startAutoSync();return()=>{console.log(" [AUTH] Arrt de la synchronisation automatique"),y()}},[]),p.useEffect(()=>{const y=Et.onAuthStateChanged(async _=>{if(_){console.log(" [AUTH] Utilisateur Firebase connect:",_.uid),r(_),o(!1);try{const b=await S0.getUser(_.uid);i(b)}catch{console.log(" [AUTH] Aucun profil existant, sera cr aprs vrification")}}else console.log(" [AUTH] Utilisateur Firebase dconnect"),r(null),i(null),o(!1)});return()=>y()},[]);const x={currentUser:e,userProfile:n,loading:a,signIn:async(y,_)=>{try{if(!(await Yz(Et,y,_)).user.emailVerified){ht.error("Veuillez vrifier votre email avant de vous connecter"),await DC(Et);return}ht.success("Connexion russie !")}catch(b){if(console.error("Sign in error:",b),b instanceof Error){const v=b;ht.error("Erreur de connexion : "+v.message)}throw b}},signUp:async(y,_,b)=>{try{const w=(await tP(Et,y,_)).user;await Zh(w,{displayName:b}),await l(w,{displayName:b}),ht.success("Compte cr ! Vrifiez votre email pour continuer.")}catch(v){if(console.error("Sign up error:",v),v instanceof Error){const w=v;ht.error("Erreur de cration de compte : "+w.message)}throw v}},logout:async()=>{try{await DC(Et),ht.success("Dconnexion russie !")}catch(y){console.error("Logout error:",y),ht.error("Erreur lors de la dconnexion")}},createUserProfile:l,updateUserProfile:async y=>{if(!(!e||!n))try{console.log(" [AUTH] Mise  jour du profil utilisateur:",e.uid),console.log(" [AUTH] Donnes  mettre  jour:",y),await S0.updateUser(e.uid,y),i({...n,...y});try{const _=await P0.syncUserUpdate(e);_.success?console.log(" [AUTH] Synchronisation Supabase russie:",_.message):console.warn(" [AUTH] Synchronisation Supabase choue:",_.errors)}catch(_){console.warn(" [AUTH] Erreur synchronisation Supabase (mise  jour):",_)}console.log(" [AUTH] Synchronisation automatique pour mise  jour du profil");try{const _=await Yc.intelligentSync(e);_.success?console.log(" [AUTH] Synchronisation automatique russie:",_.userId):console.warn(" [AUTH] Synchronisation automatique choue")}catch(_){console.warn(" [AUTH] Erreur synchronisation automatique (mise  jour):",_)}console.log(" [AUTH] Profil utilisateur mis  jour avec succs"),ht.success("Profil mis  jour !")}catch(_){throw console.error(" [AUTH] Erreur mise  jour du profil:",_),ht.error("Erreur lors de la mise  jour du profil"),_}},signInWithGoogle:async()=>{try{ht.error("Google sign-in is not directly supported in this application.")}catch(y){console.error("Google sign in error:",y),ht.error("Erreur de connexion Google")}},updateVerificationStatus:async y=>{if(!(!e||!n))try{console.log(" [AUTH] Mise  jour du statut de vrification du profil utilisateur:",e.uid);const b={verificationStatus:y,isVerified:y==="verified"};await S0.updateUser(e.uid,b),i({...n,...b});try{const v=await P0.syncUserUpdate(e);v.success?console.log(" [AUTH] Synchronisation Supabase russie pour le statut de vrification"):console.warn(" [AUTH] Synchronisation Supabase choue pour le statut de vrification:",v.errors)}catch(v){console.warn(" [AUTH] Erreur synchronisation Supabase (statut de vrification):",v)}console.log(" [AUTH] Synchronisation automatique pour mise  jour du statut de vrification");try{(await Yc.intelligentSync(e)).success?console.log(" [AUTH] Synchronisation automatique russie pour le statut de vrification"):console.warn(" [AUTH] Synchronisation automatique choue pour le statut de vrification")}catch(v){console.warn(" [AUTH] Erreur synchronisation automatique (statut de vrification):",v)}console.log(" [AUTH] Statut de vrification mis  jour avec succs"),ht.success("Statut de vrification mis  jour !")}catch(_){throw console.error(" [AUTH] Erreur mise  jour du statut de vrification:",_),ht.error("Erreur lors de la mise  jour du statut de vrification"),_}}};return s.jsx(XD.Provider,{value:x,children:t})},QD=p.createContext(void 0);function HX({children:t}){const[e,r]=p.useState([]),[n,i]=p.useState(new Set),a=p.useRef(null),o=p.useRef(null);p.useEffect(()=>{o.current=Et.currentUser},[Et.currentUser]);const l=p.useCallback(async(R,j)=>{var P;try{const D=j||((P=o.current)==null?void 0:P.uid);if(!D)return;const{error:S}=await Ue.from("user_notifications").insert({id:R.id,user_id:D,type:R.type,title:R.message,status:R.status,message:R.message,is_read:R.isRead,timestamp:R.timestamp.toISOString(),redirect_to:R.redirectTo,context:R.context,event_id:R.eventId,priority:R.priority,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});S&&console.error("Erreur lors de la sauvegarde de la notification:",S)}catch(D){console.error("Erreur lors de la sauvegarde de la notification:",D)}},[]),c=p.useCallback(async R=>{try{r(P=>P.filter(D=>D.id!==R));const{error:j}=await Ue.from("user_notifications").delete().eq("id",R);j&&console.error("Erreur lors de la suppression de la notification:",j)}catch(j){console.error("Erreur lors de la suppression de la notification:",j)}},[]),u=p.useCallback((R,j,P,D,S,M=!1,$="",q,F="system",L="medium")=>{var X,se;const W=e.find(_e=>_e.type===F&&_e.context===D&&_e.eventId===q&&_e.status===R);if(W){console.log(" [NOTIF] Notification similaire dj prsente:",W.id);return}const z={id:crypto.randomUUID(),status:R,message:j,timestamp:new Date,isRead:!1,redirectTo:P,context:D,userId:S||((X=o.current)==null?void 0:X.uid),actionRequired:M,actionLabel:$,eventId:q,type:F,priority:L};r(_e=>[..._e,z]),(S||(se=o.current)!=null&&se.uid)&&l(z,S),console.log(" [NOTIF] Nouvelle notification ajoute:",z.id,F)},[e,l]),d=p.useCallback(async R=>{try{r(P=>P.map(D=>D.id===R?{...D,isRead:!0}:D));const{error:j}=await Ue.from("user_notifications").update({is_read:!0,updated_at:new Date().toISOString()}).eq("id",R);j&&console.error("Erreur lors du marquage comme lu:",j)}catch(j){console.error("Erreur lors du marquage comme lu:",j)}},[]),h=p.useCallback(async()=>{try{r(P=>P.map(D=>({...D,isRead:!0})));const R=o.current;if(!R)return;const{error:j}=await Ue.from("user_notifications").update({is_read:!0,updated_at:new Date().toISOString()}).eq("user_id",R.uid);j&&console.error("Erreur lors du marquage global comme lu:",j)}catch(R){console.error("Erreur lors du marquage global comme lu:",R)}},[]),m=p.useCallback(async()=>{try{const R=o.current;if(!R)return;const{data:j,error:P}=await Ue.from("user_notifications").select("*").eq("user_id",R.uid).order("created_at",{ascending:!1});if(P){console.error("Erreur lors du chargement des notifications:",P);return}if(j){const D=j.map(S=>({id:S.id,status:S.status,message:S.message,timestamp:new Date(S.timestamp),isRead:S.is_read,redirectTo:S.redirect_to,context:S.context,userId:S.user_id,userEmail:S.user_email,eventId:S.event_id,type:S.type||"system",priority:S.priority||"medium"}));r(D),console.log(" [NOTIF]",D.length,"notifications charges")}}catch(R){console.error("Erreur lors du chargement des notifications:",R)}},[]),g=p.useCallback(()=>{const R=o.current;if(!R)return;console.log(" [REALTIME] Configuration des abonnements pour:",R.uid);const j=Ue.channel(`user_${R.uid}_notifications`);j.on("postgres_changes",{event:"*",schema:"public",table:"user_notifications",filter:`user_id=eq.${R.uid}`},P=>{console.log(" [REALTIME] Notification reue:",P),x(P)}),j.subscribe(P=>{console.log(" [REALTIME] Statut du canal:",P),P==="SUBSCRIBED"&&console.log(" [REALTIME] Canal souscrit avec succs")}),a.current=j},[]),x=p.useCallback(R=>{const{eventType:j,new:P,old:D}=R;switch(j){case"INSERT":{const S={id:P.id,status:P.status,message:P.message,timestamp:new Date(P.timestamp),isRead:P.is_read||!1,redirectTo:P.redirect_to,context:P.context,userId:P.user_id,userEmail:P.user_email,eventId:P.event_id,type:P.type||"system",priority:P.priority||"medium"};r(M=>M.find($=>$.eventId===S.eventId&&$.type===S.type)?(console.log(" [REALTIME] Doublon vit:",S.eventId),M):(console.log(" [REALTIME] Nouvelle notification ajoute:",S.id),[...M,S]));break}case"UPDATE":r(S=>S.map(M=>M.id===P.id?{...M,status:P.status,message:P.message,isRead:P.is_read||!1,redirectTo:P.redirect_to,context:P.context,type:P.type||"system",priority:P.priority||"medium"}:M)),console.log(" [REALTIME] Notification mise  jour:",P.id);break;case"DELETE":r(S=>S.filter(M=>M.id!==D.id)),console.log(" [REALTIME] Notification supprime:",D.id);break}},[]);p.useEffect(()=>{o.current&&(console.log(" [NOTIF] Initialisation pour utilisateur:",o.current.uid),m(),g())},[g,m]),p.useEffect(()=>Et.onAuthStateChanged(j=>{j?(console.log(" [AUTH] Utilisateur connect, chargement des notifications:",j.uid),o.current=j,m(),g()):(console.log(" [AUTH] Utilisateur dconnect, nettoyage des notifications"),o.current=null,r([]),i(new Set),a.current&&a.current.unsubscribe())}),[m,g]),p.useEffect(()=>()=>{a.current&&a.current.unsubscribe()},[]);const y=p.useCallback(async()=>{try{const R=o.current;if(!R)return;r([]);const{error:j}=await Ue.from("user_notifications").delete().eq("user_id",R.uid);j&&console.error("Erreur lors de la suppression de toutes les notifications:",j)}catch(R){console.error("Erreur lors de la suppression de toutes les notifications:",R)}},[]),_=p.useCallback((R,j)=>{var M;const P={verified:" Flicitations ! Votre vrification a t approuve. Vous avez maintenant accs  toutes les fonctionnalits de BOXETU.",pending:" Votre demande de vrification est en cours de traitement. Nous vous tiendrons inform.",rejected:" Votre demande de vrification a t rejete. Vous pouvez soumettre une nouvelle demande.",not_started:" Vous n'avez pas encore soumis de demande de vrification."},D={verified:"/verification?status=verified&tab=success",pending:"/verification?status=pending&tab=progress",rejected:"/verification?status=rejected&tab=issues",not_started:"/verification?status=not_started&tab=start"},S=`verification_status_${j||((M=o.current)==null?void 0:M.uid)}_${R}`;u(R,P[R],D[R],"verification_status",j,!1,"",S,"verification_status","high")},[u]),b=p.useCallback((R,j,P,D,S)=>{const M=S||`admin_${j}_${P}_${Date.now()}`,$={id:crypto.randomUUID(),status:"pending",message:R,timestamp:new Date,isRead:!1,redirectTo:`/admin/users/${P}`,context:`admin_${j}`,userId:P,userEmail:D,eventId:M,type:"admin_alert",priority:"high"};l($,"admin")},[l]),v=p.useCallback(()=>e.filter(R=>{var j;return(j=R.context)==null?void 0:j.includes("admin")}),[e]),w=p.useCallback(()=>e.filter(R=>!R.isRead).length,[e]),E=p.useCallback(()=>{const R={};return e.forEach(j=>{const P=j.type;R[P]||(R[P]=[]),R[P].push(j)}),R},[e]),C=p.useCallback(R=>{const j=`verification_${R}`;if(n.has(j)){console.log(" [VERIFICATION] Notification dj affiche pour:",R);return}let P,D=!1,S="",M="";switch(R){case"not_verified":P="Votre compte n'est pas encore vrifi. Cliquez ici pour lancer la vrification.",D=!0,S="Vrifier mon compte",M="/verification";break;case"pending":P="Votre demande de vrification est en attente de validation par l'administrateur.",D=!1;break;case"verified":return;case"rejected":P="Votre demande de vrification a t refuse. Vous pouvez soumettre une nouvelle demande.",D=!0,S="Nouvelle demande",M="/verification";break}const $=e.find(F=>F.context==="verification_reminder"&&F.status===(R==="pending"?"pending":"not_started"));if($){console.log(" [VERIFICATION] Notification existante trouve:",$.id),i(F=>new Set([...F,j]));return}const q={id:crypto.randomUUID(),status:R==="pending"?"pending":"not_started",message:P,timestamp:new Date,isRead:!1,redirectTo:M,context:"verification_reminder",actionRequired:D,actionLabel:S,eventId:`verification_reminder_${R}`,type:"verification_status",priority:"high"};r(F=>[...F,q]),l(q),i(F=>new Set([...F,j])),console.log(" [VERIFICATION] Nouvelle notification cre et sauvegarde:",R,P)},[n,e,l]),I=p.useCallback(async()=>{try{const R=o.current;if(!R)return;r(P=>P.filter(D=>D.context!=="verification_reminder"));const{error:j}=await Ue.from("user_notifications").delete().eq("user_id",R.uid).eq("context","verification_reminder");j?console.error("Erreur lors de la suppression des notifications de vrification:",j):console.log(" [VERIFICATION] Notifications de vrification supprimes de la base")}catch(R){console.error("Erreur lors de la suppression des notifications de vrification:",R)}},[]),T=p.useCallback(()=>e.find(R=>R.context==="verification_reminder")||null,[e]),k={notifications:e,addNotification:u,removeNotification:c,clearAllNotifications:y,notifyStatusChange:_,markAsRead:d,markAllAsRead:h,loadNotifications:m,notifyAdmin:b,getAdminNotifications:v,getUnreadCount:w,getGroupedNotifications:E,showVerificationNotification:C,clearVerificationNotifications:I,getVerificationNotification:T};return s.jsx(QD.Provider,{value:k,children:t})}const im=()=>{const t=p.useContext(QD);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZD=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...KX,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:ZD("lucide",i),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(t,e)=>{const r=p.forwardRef(({className:n,...i},a)=>p.createElement(YX,{ref:a,iconNode:e,className:ZD(`lucide-${GX(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=te("AirVent",[["path",{d:"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"larmp2"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12",key:"1bo8pg"}],["path",{d:"M6.6 15.6A2 2 0 1 0 10 17v-5",key:"t9h90c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=te("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=te("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=te("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=te("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=te("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=te("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=te("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=te("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=te("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=te("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=te("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=te("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=te("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=te("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=te("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=te("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=te("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=te("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=te("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=te("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=te("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=te("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=te("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=te("WashingMachine",[["path",{d:"M3 6h3",key:"155dbl"}],["path",{d:"M17 6h.01",key:"e2y6kg"}],["rect",{width:"18",height:"20",x:"3",y:"2",rx:"2",key:"od3kk9"}],["circle",{cx:"12",cy:"13",r:"5",key:"nlbqau"}],["path",{d:"M12 18a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 1 0-5",key:"17lach"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=te("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function pO(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=pO(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function IQ(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=pO(t))&&(n&&(n+=" "),n+=e);return n}const B1="-",AQ=t=>{const e=PQ(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(B1);return l[0]===""&&l.length!==1&&l.shift(),gO(l,e)||RQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},gO=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?gO(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(B1);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},yT=/^\[(.+)\]$/,RQ=t=>{if(yT.test(t)){const e=yT.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},PQ=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return OQ(Object.entries(t.classGroups),r).forEach(([a,o])=>{Kb(o,n,a,e)}),n},Kb=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:wT(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(DQ(i)){Kb(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{Kb(o,wT(e,a),r,n)})})},wT=(t,e)=>{let r=t;return e.split(B1).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},DQ=t=>t.isThemeGetter,OQ=(t,e)=>e?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[r,i]}):t,MQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},vO="!",LQ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===i&&(n||l.slice(_,_+a)===e)){c.push(l.slice(d,_)),d=_+a;continue}if(b==="/"){h=_;continue}}b==="["?u++:b==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(vO),x=g?m.substring(1):m,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},VQ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},FQ=t=>({cache:MQ(t.cacheSize),parseClassName:LQ(t),...AQ(t)}),UQ=/\s+/,$Q=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(UQ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let x=!!g,y=n(x?m.substring(0,g):m);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=n(m),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const _=VQ(d).join(":"),b=h?_+vO:_,v=b+y;if(a.includes(v))continue;a.push(v);const w=i(y,x);for(let E=0;E<w.length;++E){const C=w[E];a.push(b+C)}l=u+(l.length>0?" "+l:l)}return l};function zQ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=xO(e))&&(n&&(n+=" "),n+=r);return n}const xO=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=xO(t[n]))&&(r&&(r+=" "),r+=e);return r};function BQ(t,...e){let r,n,i,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return r=FQ(u),n=r.cache.get,i=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=$Q(c,r);return i(c,d),d}return function(){return a(zQ.apply(null,arguments))}}const Gt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},yO=/^\[(?:([a-z-]+):)?(.+)\]$/i,qQ=/^\d+\/\d+$/,WQ=new Set(["px","full","screen"]),HQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,GQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,KQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vi=t=>uu(t)||WQ.has(t)||qQ.test(t),Ma=t=>cd(t,"length",sZ),uu=t=>!!t&&!Number.isNaN(Number(t)),L0=t=>cd(t,"number",uu),$d=t=>!!t&&Number.isInteger(Number(t)),XQ=t=>t.endsWith("%")&&uu(t.slice(0,-1)),rt=t=>yO.test(t),La=t=>HQ.test(t),QQ=new Set(["length","size","percentage"]),ZQ=t=>cd(t,QQ,wO),eZ=t=>cd(t,"position",wO),tZ=new Set(["image","url"]),rZ=t=>cd(t,tZ,aZ),nZ=t=>cd(t,"",iZ),zd=()=>!0,cd=(t,e,r)=>{const n=yO.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},sZ=t=>GQ.test(t)&&!KQ.test(t),wO=()=>!1,iZ=t=>YQ.test(t),aZ=t=>JQ.test(t),oZ=()=>{const t=Gt("colors"),e=Gt("spacing"),r=Gt("blur"),n=Gt("brightness"),i=Gt("borderColor"),a=Gt("borderRadius"),o=Gt("borderSpacing"),l=Gt("borderWidth"),c=Gt("contrast"),u=Gt("grayscale"),d=Gt("hueRotate"),h=Gt("invert"),m=Gt("gap"),g=Gt("gradientColorStops"),x=Gt("gradientColorStopPositions"),y=Gt("inset"),_=Gt("margin"),b=Gt("opacity"),v=Gt("padding"),w=Gt("saturate"),E=Gt("scale"),C=Gt("sepia"),I=Gt("skew"),T=Gt("space"),k=Gt("translate"),R=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",rt,e],D=()=>[rt,e],S=()=>["",Vi,Ma],M=()=>["auto",uu,rt],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",rt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[uu,rt];return{cacheSize:500,separator:":",theme:{colors:[zd],spacing:[Vi,Ma],blur:["none","",La,rt],brightness:X(),borderColor:[t],borderRadius:["none","","full",La,rt],borderSpacing:D(),borderWidth:S(),contrast:X(),grayscale:W(),hueRotate:X(),invert:W(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[XQ,Ma],inset:P(),margin:P(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:W(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[La]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),rt]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$d,rt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",$d,rt]}],"grid-cols":[{"grid-cols":[zd]}],"col-start-end":[{col:["auto",{span:["full",$d,rt]},rt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[zd]}],"row-start-end":[{row:["auto",{span:[$d,rt]},rt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[La]},La]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",La,Ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",L0]}],"font-family":[{font:[zd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",uu,L0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vi,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vi,Ma]}],"underline-offset":[{"underline-offset":["auto",Vi,rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),eZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Vi,rt]}],"outline-w":[{outline:[Vi,Ma]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Vi,Ma]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",La,nZ]}],"shadow-color":[{shadow:[zd]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",La,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[$d,rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vi,Ma,L0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lZ=BQ(oZ);function Pe(...t){return lZ(IQ(t))}function cZ({notification:t,onClose:e,onMarkAsRead:r,onClick:n,autoHide:i=!0,duration:a=5e3}){const[o,l]=p.useState(!0),[c,u]=p.useState(!1);if(p.useEffect(()=>{if(i&&o){const _=setTimeout(()=>{l(!1),setTimeout(e,300)},a);return()=>clearTimeout(_)}},[i,a,e,o]),p.useEffect(()=>{},[c,i]),!o)return null;const d=(_,b)=>{switch(_){case"verification":switch(b){case"verified":return{icon:s.jsx(lt,{className:"w-5 h-5"}),className:"bg-green-500 border-green-600 text-white",title:"Vrification approuve !"};case"pending":return{icon:s.jsx(At,{className:"w-5 h-5"}),className:"bg-yellow-500 border-yellow-600 text-white",title:"Vrification en cours"};case"rejected":return{icon:s.jsx(qn,{className:"w-5 h-5"}),className:"bg-red-500 border-red-600 text-white",title:"Vrification rejete"};default:return{icon:s.jsx(sa,{className:"w-5 h-5"}),className:"bg-blue-500 border-blue-600 text-white",title:"Statut de vrification"}}case"admin":return{icon:s.jsx(qe,{className:"w-5 h-5"}),className:"bg-purple-500 border-purple-600 text-white",title:"Notification admin"};case"message":return{icon:s.jsx(lv,{className:"w-5 h-5"}),className:"bg-blue-500 border-blue-600 text-white",title:"Nouveau message"};case"payment":return{icon:s.jsx(Mr,{className:"w-5 h-5"}),className:"bg-emerald-500 border-emerald-600 text-white",title:"Notification de paiement"};case"safety":return{icon:s.jsx(Qt,{className:"w-5 h-5"}),className:"bg-orange-500 border-orange-600 text-white",title:"Alerte de scurit"};case"system":return{icon:s.jsx(tn,{className:"w-5 h-5"}),className:"bg-gray-500 border-gray-600 text-white",title:"Notification systme"};default:return{icon:s.jsx(tn,{className:"w-5 h-5"}),className:"bg-gray-500 border-gray-600 text-white",title:"Notification"}}},h=_=>{switch(_){case"urgent":return"animate-pulse border-2 border-red-400";case"high":return"border-2 border-orange-400";case"medium":return"border border-gray-300";default:return"border border-gray-200"}},m=d(t.type,t.status),g=h(t.priority),x=()=>{n&&n(),r()},y=_=>{_.stopPropagation(),r(),e()};return s.jsx("div",{className:Pe("transform transition-all duration-300 ease-in-out hover:scale-105",o?"translate-x-0 opacity-100":"translate-x-full opacity-0"),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:s.jsxs("div",{className:Pe("flex items-start gap-3 p-4 rounded-lg shadow-lg cursor-pointer max-w-sm",m.className,g),onClick:x,children:[s.jsx("div",{className:"flex-shrink-0",children:m.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-sm",children:m.title}),t.priority==="urgent"&&s.jsx("span",{className:"text-xs bg-red-700 px-1 rounded animate-pulse",children:"URGENT"}),t.priority==="high"&&s.jsx("span",{className:"text-xs bg-orange-700 px-1 rounded",children:"IMPORTANT"})]}),s.jsx("p",{className:"text-sm opacity-90 mb-2",children:t.message}),t.userEmail&&s.jsxs("p",{className:"text-xs opacity-75 mb-1",children:["Utilisateur: ",t.userEmail]}),s.jsxs("p",{className:"text-xs opacity-75",children:[t.timestamp.toLocaleTimeString()," - ",t.timestamp.toLocaleDateString()]})]}),s.jsx("button",{onClick:y,className:"flex-shrink-0 p-1 rounded-full hover:bg-white/20 transition-colors",title:"Marquer comme lu et fermer",children:s.jsx(Fl,{className:"w-4 h-4"})})]})})}function uZ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $x(...t){return e=>t.forEach(r=>uZ(r,e))}function Xe(...t){return p.useCallback($x(...t),t)}var ya=p.forwardRef((t,e)=>{const{children:r,...n}=t,i=p.Children.toArray(r),a=i.find(hZ);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return s.jsx(Yb,{...n,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return s.jsx(Yb,{...n,ref:e,children:r})});ya.displayName="Slot";var Yb=p.forwardRef((t,e)=>{const{children:r,...n}=t;if(p.isValidElement(r)){const i=mZ(r);return p.cloneElement(r,{...fZ(n,r.props),ref:e?$x(e,i):i})}return p.Children.count(r)>1?p.Children.only(null):null});Yb.displayName="SlotClone";var dZ=({children:t})=>s.jsx(s.Fragment,{children:t});function hZ(t){return p.isValidElement(t)&&t.type===dZ}function fZ(t,e){const r={...e};for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{a(...l),i(...l)}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function mZ(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function bO(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=bO(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function pZ(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=bO(t))&&(n&&(n+=" "),n+=e);return n}const bT=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,_T=pZ,zx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return _T(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const m=bT(d)||bT(h);return i[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(x=>{let[y,_]=x;return Array.isArray(_)?_.includes({...a,...l}[y]):{...a,...l}[y]===_})?[...u,h,m]:u},[]);return _T(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},Jb=zx("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-full px-3 text-xs",lg:"h-10 rounded-full px-8",icon:"h-9 w-9 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),U=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},a)=>{const o=n?ya:"button";return s.jsx(o,{className:Pe(Jb({variant:e,size:r,className:t})),ref:a,...i})});U.displayName="Button";const H=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Pe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));H.displayName="Card";const he=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));he.displayName="CardHeader";const fe=p.forwardRef(({className:t,...e},r)=>s.jsx("h3",{ref:r,className:Pe("font-semibold leading-none tracking-tight",t),...e}));fe.displayName="CardTitle";const at=p.forwardRef(({className:t,...e},r)=>s.jsx("p",{ref:r,className:Pe("text-sm text-muted-foreground",t),...e}));at.displayName="CardDescription";const K=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Pe("p-6 pt-0",t),...e}));K.displayName="CardContent";const gZ=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Pe("flex items-center p-6 pt-0",t),...e}));gZ.displayName="CardFooter";const vZ=zx("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:t,variant:e,...r}){return s.jsx("div",{className:Pe(vZ({variant:e}),t),...r})}function _O(){const t=Hn(),{notifications:e,getUnreadCount:r,getGroupedNotifications:n,markAsRead:i,markAllAsRead:a,clearAllNotifications:o}=im(),[l,c]=p.useState(!1),[u,d]=p.useState("all"),h=r();n();const g=(()=>{switch(u){case"unread":return e.filter(I=>!I.isRead);case"admin":return e.filter(I=>{var T;return(T=I.context)==null?void 0:T.includes("admin")});default:return e}})(),y=(()=>{const I={};return g.forEach(T=>{const k=`${T.type}_${T.context}`;I[k]||(I[k]=[]),I[k].find(R=>R.eventId===T.eventId)||I[k].push(T)}),I})(),_=(I,T,k)=>{if(I.length===1)return I[0].message;switch(T){case"verification_request":return`${I.length} demande(s) de vrification en attente`;case"verification_status":return`${I.length} mise(s)  jour de statut`;case"admin_alert":return`${I.length} alerte(s) administrative(s)`;default:return`${I.length} notification(s)`}},b=I=>{I.forEach(T=>{T.isRead||i(T.id)})},v=(I,T)=>{console.log(` [ADMIN] Action ${T} pour:`,I.userId),i(I.id),I.redirectTo&&t(I.redirectTo)},w=()=>{c(!1)},E=async()=>{await a()},C=async()=>{await o(),c(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative",children:[s.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>c(!l),className:"relative p-2",children:[s.jsx(tn,{className:"h-5 w-5"}),h>0&&s.jsx(le,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs",children:h>99?"99+":h})]}),l&&s.jsx("div",{className:"absolute right-0 top-12 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:s.jsxs(H,{className:"border-0 shadow-none",children:[s.jsxs(he,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-lg font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[h>0&&s.jsxs(U,{variant:"ghost",size:"sm",onClick:E,className:"h-8 px-2 text-xs",children:[s.jsx(Wb,{className:"h-4 w-4 mr-1"}),"Tout marquer"]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:w,className:"h-8 w-8 p-0",children:s.jsx(Fl,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsxs(U,{variant:u==="all"?"default":"ghost",size:"sm",onClick:()=>d("all"),className:"h-8 px-3 text-xs",children:["Toutes (",e.length,")"]}),s.jsxs(U,{variant:u==="unread"?"default":"ghost",size:"sm",onClick:()=>d("unread"),className:"h-8 px-3 text-xs",children:["Non lues (",h,")"]}),e.some(I=>{var T;return(T=I.context)==null?void 0:T.includes("admin")})&&s.jsx(U,{variant:u==="admin"?"default":"ghost",size:"sm",onClick:()=>d("admin"),className:"h-8 px-3 text-xs",children:"Admin"})]})]}),s.jsxs(K,{className:"pt-0",children:[g.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(tn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"Aucune notification"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(y).map(([I,T])=>{const k=T[0],R=T.some(j=>!j.isRead);return s.jsxs("div",{className:`p-3 rounded-lg border ${R?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[k.type==="verification_request"&&s.jsx(At,{className:"h-4 w-4 text-blue-600"}),k.type==="verification_status"&&s.jsx(qe,{className:"h-4 w-4 text-green-600"}),k.type==="admin_alert"&&s.jsx(Qt,{className:"h-4 w-4 text-orange-600"}),s.jsx("span",{className:"text-sm font-medium",children:_(T,k.type,k.context)})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[T.length>1&&s.jsx(le,{variant:"secondary",className:"text-xs",children:T.length}),R&&s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>b(T),className:"h-6 w-6 p-0",children:s.jsx(Wb,{className:"h-3 w-3"})})]})]}),k.type==="admin_alert"&&k.userId&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(U,{size:"sm",onClick:()=>v(k,"accept"),className:"h-7 px-2 text-xs bg-green-600 hover:bg-green-700",children:"Accepter"}),s.jsx(U,{size:"sm",variant:"outline",onClick:()=>v(k,"reject"),className:"h-7 px-2 text-xs",children:"Refuser"})]}),T.length>1&&s.jsxs("details",{className:"mt-2",children:[s.jsxs("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-700",children:["Voir ",T.length," notification(s)"]}),s.jsx("div",{className:"mt-2 space-y-1",children:T.map(j=>s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 pl-4 border-l border-gray-200 dark:border-gray-600",children:j.message},j.id))})]})]},I)})}),g.length>0&&s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:C,className:"h-8 px-3 text-xs",children:"Effacer tout"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[g.length," notification(s)"]})]})]})]})})]}),e.filter(I=>!I.isRead&&I.type!=="verification_status").map(I=>s.jsx(cZ,{notification:I,onClose:()=>i(I.id),onMarkAsRead:()=>i(I.id)},I.id))]})}const xZ=({message:t,type:e,duration:r=4e3,onClose:n})=>{const[i,a]=p.useState(!0);p.useEffect(()=>{const l=setTimeout(()=>{a(!1),setTimeout(n,300)},r);return()=>clearTimeout(l)},[r,n]);const o=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return i?Kl.createPortal(s.jsx("div",{className:`
        fixed top-5 right-5 z-[9999] max-w-sm w-full
        bg-background border border-border rounded-lg shadow-lg
        transform transition-all duration-300 ease-in-out
        ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
      `,style:{position:"fixed",top:"20px",right:"20px",left:"auto",zIndex:9999},children:s.jsxs("div",{className:"flex items-start p-4",children:[s.jsx("div",{className:"flex-shrink-0 mr-3 text-2xl",children:o()}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-medium text-foreground",children:t})}),s.jsx("button",{onClick:()=>{a(!1),setTimeout(n,300)},className:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:""})]})}),document.body):null},yZ=()=>{const[t,e]=p.useState([]),r=(c,u="info",d)=>{const h=Math.random().toString(36).substr(2,9);e(m=>[...m,{id:h,message:c,type:u,duration:d}])};return{toasts:t,addToast:r,removeToast:c=>{e(u=>u.filter(d=>d.id!==c))},success:(c,u)=>r(c,"success",u),error:(c,u)=>r(c,"error",u),warning:(c,u)=>r(c,"warning",u),info:(c,u)=>r(c,"info",u)}},wZ=()=>{const{toasts:t,removeToast:e}=yZ();return s.jsx(s.Fragment,{children:t.map(r=>s.jsx(xZ,{message:r.message,type:r.type,duration:r.duration,onClose:()=>e(r.id)},r.id))})},Ie=p.forwardRef(({className:t,type:e,...r},n)=>s.jsx("input",{type:e,className:Pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));Ie.displayName="Input";function jO(){const[t,e]=p.useState([]),[r,n]=p.useState(0),[i,a]=p.useState(!0),[o,l]=p.useState(null),c=p.useCallback(async()=>{if(Et.currentUser)try{a(!0),l(null),console.log(" [ADMIN] Chargement des notifications pour:",Et.currentUser.uid);const{data:b,error:v}=await Ue.from("user_profiles").select("role").eq("id",Et.currentUser.uid).single();if(v||(b==null?void 0:b.role)!=="admin"){console.log(" [ADMIN] Utilisateur non admin ou erreur profil:",v),a(!1);return}console.log(" [ADMIN] Utilisateur admin confirm, chargement des notifications...");const{data:w,error:E}=await Ue.from("admin_notifications").select("*").eq("assigned_admin_id",Et.currentUser.uid).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(50);if(E)throw console.error(" [ADMIN] Erreur lors du chargement des notifications:",E),E;console.log(" [ADMIN] Notifications rcupres:",w);const C=(w==null?void 0:w.map(I=>({id:I.id,type:I.type,title:I.title,message:I.message,priority:I.priority,userName:I.user_name,userId:I.user_id,actionUrl:I.action_url,data:I.data,isRead:I.is_read||!1,timestamp:new Date(I.created_at),expiresAt:I.expires_at?new Date(I.expires_at):void 0})))||[];console.log(" [ADMIN] Notifications formates:",C),e(C),n(C.filter(I=>!I.isRead).length)}catch(b){console.error(" [ADMIN] Erreur lors du chargement des notifications admin:",b),l(b instanceof Error?b.message:"Erreur inconnue")}finally{a(!1)}},[]),u=p.useCallback(async b=>{try{const{error:v}=await Ue.from("admin_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",b);if(v)throw v;e(w=>w.map(E=>E.id===b?{...E,isRead:!0}:E)),n(w=>Math.max(0,w-1))}catch(v){console.error("Erreur lors du marquage comme lu:",v)}},[]),d=p.useCallback(async()=>{var b;try{const{error:v}=await Ue.from("admin_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("assigned_admin_id",(b=Et.currentUser)==null?void 0:b.uid).eq("is_read",!1);if(v)throw v;e(w=>w.map(E=>({...E,isRead:!0}))),n(0)}catch(v){console.error("Erreur lors du marquage global comme lu:",v)}},[]),h=p.useCallback(async b=>{try{const{error:v}=await Ue.from("admin_notifications").delete().eq("id",b);if(v)throw v;e(E=>E.filter(C=>C.id!==b));const w=t.find(E=>E.id===b);w&&!w.isRead&&n(E=>Math.max(0,E-1))}catch(v){console.error("Erreur lors de la suppression:",v)}},[t]),m=p.useCallback(async b=>{var v,w;try{const{data:E,error:C}=await Ue.from("admin_notifications").insert({type:b.type,title:b.title,message:b.message,priority:b.priority,user_name:b.userName,user_id:b.userId,action_url:b.actionUrl,data:b.data,assigned_admin_id:(v=Et.currentUser)==null?void 0:v.uid,expires_at:(w=b.expiresAt)==null?void 0:w.toISOString()}).select().single();if(C)throw C;const I={...E,timestamp:new Date(E.created_at),expiresAt:E.expires_at?new Date(E.expires_at):void 0};return e(T=>[I,...T]),n(T=>T+1),I}catch(E){throw console.error("Erreur lors de la cration de la notification admin:",E),E}},[]);p.useEffect(()=>{c()},[c]),p.useEffect(()=>{const b=new Date,v=t.filter(w=>!w.expiresAt||w.expiresAt>b);v.length!==t.length&&(e(v),n(v.filter(w=>!w.isRead).length))},[t]);const g=p.useCallback(b=>t.filter(v=>v.priority===b),[t]),x=p.useCallback(b=>t.filter(v=>v.type===b),[t]),y=g("urgent"),_=g("high");return{adminNotifications:t,unreadCount:r,loading:i,error:o,urgentNotifications:y,highPriorityNotifications:_,markAdminNotificationAsRead:u,markAllAsRead:d,removeAdminNotification:h,createAdminNotification:m,getNotificationsByPriority:g,getNotificationsByType:x,refresh:c}}const bZ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_ADMIN_KEY:"b77130fd07930d42f1a6284651395b65",VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_ENVIRONMENT:"development",VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app",VITE_PEXELS_API_KEY:"your_pexels_api_key",VITE_STRIPE_PUBLISHABLE_KEY:"your_stripe_publishable_key",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_ANON_KEY_PROD:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co",VITE_SUPABASE_URL_PROD:"https://kbbhglxrcywpcktkamhl.supabase.co"},jT=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(x=>x(e,g))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(bZ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,i,c);return c},_Z=t=>t?jT(t):jT;var NO={exports:{}},SO={},EO={exports:{}},CO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=p;function jZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NZ=typeof Object.is=="function"?Object.is:jZ,SZ=Vu.useState,EZ=Vu.useEffect,CZ=Vu.useLayoutEffect,TZ=Vu.useDebugValue;function kZ(t,e){var r=e(),n=SZ({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return CZ(function(){i.value=r,i.getSnapshot=e,V0(i)&&a({inst:i})},[t,r,e]),EZ(function(){return V0(i)&&a({inst:i}),t(function(){V0(i)&&a({inst:i})})},[t]),TZ(r),r}function V0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!NZ(t,r)}catch{return!0}}function IZ(t,e){return e()}var AZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IZ:kZ;CO.useSyncExternalStore=Vu.useSyncExternalStore!==void 0?Vu.useSyncExternalStore:AZ;EO.exports=CO;var RZ=EO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=p,PZ=RZ;function DZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OZ=typeof Object.is=="function"?Object.is:DZ,MZ=PZ.useSyncExternalStore,LZ=Bx.useRef,VZ=Bx.useEffect,FZ=Bx.useMemo,UZ=Bx.useDebugValue;SO.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=LZ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=FZ(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),i!==void 0&&o.hasValue){var x=o.value;if(i(x,g))return h=x}return h=g}if(x=h,OZ(d,g))return x;var y=n(g);return i!==void 0&&i(x,y)?(d=g,x):(d=g,h=y)}var u=!1,d,h,m=r===void 0?null:r;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,r,n,i]);var l=MZ(t,a[0],a[1]);return VZ(function(){o.hasValue=!0,o.value=l},[l]),UZ(l),l};NO.exports=SO;var $Z=NO.exports;const zZ=Fv($Z),TO={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_ADMIN_KEY:"b77130fd07930d42f1a6284651395b65",VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_ENVIRONMENT:"development",VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app",VITE_PEXELS_API_KEY:"your_pexels_api_key",VITE_STRIPE_PUBLISHABLE_KEY:"your_stripe_publishable_key",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_ANON_KEY_PROD:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co",VITE_SUPABASE_URL_PROD:"https://kbbhglxrcywpcktkamhl.supabase.co"},{useDebugValue:BZ}=Ce,{useSyncExternalStoreWithSelector:qZ}=zZ;let NT=!1;const WZ=t=>t;function HZ(t,e=WZ,r){(TO?"production":void 0)!=="production"&&r&&!NT&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),NT=!0);const n=qZ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return BZ(n),n}const ST=t=>{(TO?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?_Z(t):t,r=(n,i)=>HZ(e,n,i);return Object.assign(r,e),r},lm=t=>t?ST(t):ST,rl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},GZ=(t,e,r)=>{const n=[t,e].sort();return`${n[0]}_${n[1]}_${r}`},KZ=async(t,e,r,n,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:r,senderUniversity:n,listingTitle:i,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},qx=lm((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:r=>{t({loading:!0});const{unsubscribeConversations:n}=e();n&&n();try{const i=$t(It(be,"conversations"),Yt("participants","array-contains",r)),a=I2(i,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(r)||u.blockedBy&&u.blockedBy.includes(r)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:rl(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:rl(u.createdAt),updatedAt:rl(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),ue.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:r=>{const{unsubscribeMessages:n}=e();n&&n();try{const i=$t(It(be,"conversations",r,"messages")),a=I2(i,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:r,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:rl(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),ue.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(r,n,i,a,o)=>{try{console.log("Sending message:",{conversationId:r,text:n,senderId:i,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(i)){ue.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:r,senderId:i,senderName:a,senderAvatar:o||null,text:n,type:"text",seen:!1,sentAt:Pr()};console.log("Adding message to Firestore:",c);const u=await Du(It(be,"conversations",r,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==i),h={};d.forEach(m=>{h[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:n,sentAt:Pr(),senderId:i,senderName:a},updatedAt:Pr(),...h}),await yr(Ze(be,"conversations",r),{lastMessage:{text:n,sentAt:Pr(),senderId:i,senderName:a},updatedAt:Pr(),...h}),d.forEach(async m=>{const g=l.participantDetails[m];if(g&&g.email){const x=l.participantDetails[i];await KZ(g.email,g.name,a,(x==null?void 0:x.university)||"Universit non spcifie",l.listingTitle,n,r)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),ue.error("Erreur lors de l'envoi du message")}},createConversation:async(r,n,i,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:r,buyerId:o,sellerId:l});const h=GZ(o,l,r);console.log("Generated conversation ID:",h);const m=await On(Ze(be,"conversations",h));if(m.exists()){console.log("Conversation already exists, sending message");const y=m.data(),_={id:h,participants:y.participants||[],listingId:y.listingId||"",listingTitle:y.listingTitle||"",listingImage:y.listingImage,listingPrice:y.listingPrice||0,participantDetails:y.participantDetails||{},lastMessage:y.lastMessage?{...y.lastMessage,sentAt:rl(y.lastMessage.sentAt)}:void 0,unreadCount:y.unreadCount||{},blockedBy:y.blockedBy||[],deletedFor:y.deletedFor||[],status:y.status||"active",createdAt:rl(y.createdAt),updatedAt:rl(y.updatedAt)};return t({currentConversation:_}),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}console.log("Creating new conversation");const g={participants:[o,l],listingId:r,listingTitle:n,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:Pr(),updatedAt:Pr()};console.log("Setting conversation document:",g),await wh(Ze(be,"conversations",h),g);const x={id:h,participants:[o,l],listingId:r,listingTitle:n,listingImage:a||void 0,listingPrice:i,participantDetails:g.participantDetails,unreadCount:g.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:x}),console.log("Sending initial message"),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}catch(h){throw console.error("Error creating conversation:",h),ue.error("Erreur lors de la cration de la conversation"),h}},markMessagesAsSeen:async(r,n)=>{try{const i=Ze(be,"conversations",r);await yr(i,{[`unreadCount.${n}`]:0})}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:r=>{t({currentConversation:r})},blockUser:async(r,n)=>{try{const i=Ze(be,"conversations",r),a=await On(i);if(a.exists()){const l=a.data().blockedBy||[];l.includes(n)||(await yr(i,{blockedBy:[...l,n],status:"blocked",updatedAt:Pr()}),ue.success("Utilisateur bloqu"))}}catch(i){console.error("Error blocking user:",i),ue.error("Erreur lors du blocage")}},reportUser:async(r,n,i,a,o)=>{try{const l={reporterId:n,reportedUserId:i,conversationId:r,reason:a,description:o,status:"pending",createdAt:Pr()};await Du(It(be,"reports"),l),ue.success("Signalement envoy")}catch(l){console.error("Error reporting user:",l),ue.error("Erreur lors du signalement")}},deleteConversation:async(r,n)=>{try{const i=Ze(be,"conversations",r),a=await On(i);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(n)){const c=[...l,n];c.length===o.participants.length?await Pu(i):await yr(i,{deletedFor:c,updatedAt:Pr()}),ue.success("Conversation supprime")}}}catch(i){console.error("Error deleting conversation:",i),ue.error("Erreur lors de la suppression")}},findConversationByListing:(r,n)=>{const{conversations:i}=e();return i.find(a=>a.listingId===r&&a.participants.includes(n))||null},cleanup:()=>{const{unsubscribeConversations:r,unsubscribeMessages:n}=e();r&&r(),n&&n(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),YZ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_ADMIN_KEY:"b77130fd07930d42f1a6284651395b65",VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_ENVIRONMENT:"development",VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app",VITE_PEXELS_API_KEY:"your_pexels_api_key",VITE_STRIPE_PUBLISHABLE_KEY:"your_stripe_publishable_key",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_ANON_KEY_PROD:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTE1ODkxNSwiZXhwIjoyMDY0NzM0OTE1fQ.3uWsIjfIBCtLsUISU0wfGc9USjRiYj_CWAZx3FuHyXA",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co",VITE_SUPABASE_URL_PROD:"https://kbbhglxrcywpcktkamhl.supabase.co"};function JZ(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=r.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>r.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>r.removeItem(i)}}const hf=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return hf(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return hf(n)(r)}}}},XZ=(t,e)=>(r,n,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(..._)},n,i);const d=hf(a.serialize),h=()=>{const _=a.partialize({...n()});let b;const v=d({state:_,version:a.version}).then(w=>u.setItem(a.name,w)).catch(w=>{b=w});if(b)throw b;return v},m=i.setState;i.setState=(_,b)=>{m(_,b),h()};const g=t((..._)=>{r(..._),h()},n,i);let x;const y=()=>{var _;if(!u)return;o=!1,l.forEach(v=>v(n()));const b=((_=a.onRehydrateStorage)==null?void 0:_.call(a,n()))||void 0;return hf(u.getItem.bind(u))(a.name).then(v=>{if(v)return a.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return a.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var w;return x=a.merge(v,(w=n())!=null?w:g),r(x,!0),h()}).then(()=>{b==null||b(x,void 0),o=!0,c.forEach(v=>v(x))}).catch(v=>{b==null||b(void 0,v)})};return i.persist={setOptions:_=>{a={...a,..._},_.getStorage&&(u=_.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:_=>(l.add(_),()=>{l.delete(_)}),onFinishHydration:_=>(c.add(_),()=>{c.delete(_)})},y(),x||g},QZ=(t,e)=>(r,n,i)=>{let a={storage:JZ(()=>localStorage),partialize:y=>y,version:0,merge:(y,_)=>({..._,...y}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...y)},n,i);const d=()=>{const y=a.partialize({...n()});return u.setItem(a.name,{state:y,version:a.version})},h=i.setState;i.setState=(y,_)=>{h(y,_),d()};const m=t((...y)=>{r(...y),d()},n,i);i.getInitialState=()=>m;let g;const x=()=>{var y,_;if(!u)return;o=!1,l.forEach(v=>{var w;return v((w=n())!=null?w:m)});const b=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(y=n())!=null?y:m))||void 0;return hf(u.getItem.bind(u))(a.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return[!0,a.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var w;const[E,C]=v;if(g=a.merge(C,(w=n())!=null?w:m),r(g,!0),E)return d()}).then(()=>{b==null||b(g,void 0),g=n(),o=!0,c.forEach(v=>v(g))}).catch(v=>{b==null||b(void 0,v)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},a.skipHydration||x(),g||m},ZZ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((YZ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),XZ(t,e)):QZ(t,e),eee=ZZ,tee=lm()(eee((t,e)=>({cart:[],cartTotal:0,addToCart:r=>{const{cart:n}=e(),i=n.find(a=>a.id===r.id);t(i?{cart:n.map(a=>a.id===r.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+r.price}:{cart:[...n,{...r,quantity:1}],cartTotal:e().cartTotal+r.price}),ue.success("Article ajout au panier")},removeFromCart:r=>{const{cart:n}=e(),i=n.find(a=>a.id===r);i&&t({cart:n.filter(a=>a.id!==r),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(r,n)=>{const{cart:i}=e(),a=i.find(o=>o.id===r);if(a){const o=n-a.quantity;t({cart:i.map(l=>l.id===r?{...l,quantity:n}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((r,n)=>r+n.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})}));function me(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ree(t,e){const r=p.createContext(e),n=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function i(a){const o=p.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,i]}function hs(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var b;const{scope:m,children:g,...x}=h,y=((b=m==null?void 0:m[t])==null?void 0:b[c])||l,_=p.useMemo(()=>x,Object.values(x));return s.jsx(y.Provider,{value:_,children:g})};u.displayName=a+"Provider";function d(h,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,nee(i,...e)]}function nee(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function _r(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function cs({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=see({defaultProp:e,onChange:r}),a=t!==void 0,o=a?t:n,l=_r(r),c=p.useCallback(u=>{if(a){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else i(u)},[a,t,i,l]);return[o,c]}function see({defaultProp:t,onChange:e}){const r=p.useState(t),[n]=r,i=p.useRef(n),a=_r(e);return p.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),r}var iee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ae=iee.reduce((t,e)=>{const r=p.forwardRef((n,i)=>{const{asChild:a,...o}=n,l=a?ya:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kO(t,e){t&&Kl.flushSync(()=>t.dispatchEvent(e))}function aee(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,y=(m==null?void 0:m[t][c])||l,_=p.useMemo(()=>x,Object.values(x));return s.jsx(y.Provider,{value:_,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,oee(i,...e)]}function oee(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function cm(t){const e=t+"CollectionProvider",[r,n]=aee(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:y}=g,_=Ce.useRef(null),b=Ce.useRef(new Map).current;return s.jsx(i,{scope:x,itemMap:b,collectionRef:_,children:y})};o.displayName=e;const l=t+"CollectionSlot",c=Ce.forwardRef((g,x)=>{const{scope:y,children:_}=g,b=a(l,y),v=Xe(x,b.collectionRef);return s.jsx(ya,{ref:v,children:_})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Ce.forwardRef((g,x)=>{const{scope:y,children:_,...b}=g,v=Ce.useRef(null),w=Xe(x,v),E=a(u,y);return Ce.useEffect(()=>(E.itemMap.set(v,{ref:v,...b}),()=>void E.itemMap.delete(v))),s.jsx(ya,{[d]:"",ref:w,children:_})});h.displayName=u;function m(g){const x=a(t+"CollectionConsumer",g);return Ce.useCallback(()=>{const _=x.collectionRef.current;if(!_)return[];const b=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((E,C)=>b.indexOf(E.ref.current)-b.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,n]}var lee=p.createContext(void 0);function ac(t){const e=p.useContext(lee);return t||e||"ltr"}function cee(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t);p.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var uee="DismissableLayer",Xb="dismissableLayer.update",dee="dismissableLayer.pointerDownOutside",hee="dismissableLayer.focusOutside",ET,IO=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),um=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(IO),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),x=Xe(e,T=>h(T)),y=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(_),v=d?y.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,E=v>=b,C=pee(T=>{const k=T.target,R=[...u.branches].some(j=>j.contains(k));!E||R||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),I=gee(T=>{const k=T.target;[...u.branches].some(j=>j.contains(k))||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return cee(T=>{v===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ET=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),CT(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ET)}},[d,m,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),CT())},[d,u]),p.useEffect(()=>{const T=()=>g({});return document.addEventListener(Xb,T),()=>document.removeEventListener(Xb,T)},[]),s.jsx(Ae.div,{...c,ref:x,style:{pointerEvents:w?E?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,I.onFocusCapture),onBlurCapture:me(t.onBlurCapture,I.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,C.onPointerDownCapture)})});um.displayName=uee;var fee="DismissableLayerBranch",mee=p.forwardRef((t,e)=>{const r=p.useContext(IO),n=p.useRef(null),i=Xe(e,n);return p.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(Ae.div,{...t,ref:i})});mee.displayName=fee;function pee(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){AO(dee,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function gee(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!n.current&&AO(hee,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function CT(){const t=new CustomEvent(Xb);document.dispatchEvent(t)}function AO(t,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?kO(i,a):i.dispatchEvent(a)}var F0=0;function Wx(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??TT()),document.body.insertAdjacentElement("beforeend",t[1]??TT()),F0++,()=>{F0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),F0--}},[])}function TT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var U0="focusScope.autoFocusOnMount",$0="focusScope.autoFocusOnUnmount",kT={bubbles:!1,cancelable:!0},vee="FocusScope",dm=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=_r(i),d=_r(a),h=p.useRef(null),m=Xe(e,y=>c(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let y=function(w){if(g.paused||!l)return;const E=w.target;l.contains(E)?h.current=E:Ua(h.current,{select:!0})},_=function(w){if(g.paused||!l)return;const E=w.relatedTarget;E!==null&&(l.contains(E)||Ua(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const C of w)C.removedNodes.length>0&&Ua(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const v=new MutationObserver(b);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),v.disconnect()}}},[n,l,g.paused]),p.useEffect(()=>{if(l){AT.add(g);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(U0,kT);l.addEventListener(U0,u),l.dispatchEvent(b),b.defaultPrevented||(xee(jee(RO(l)),{select:!0}),document.activeElement===y&&Ua(l))}return()=>{l.removeEventListener(U0,u),setTimeout(()=>{const b=new CustomEvent($0,kT);l.addEventListener($0,d),l.dispatchEvent(b),b.defaultPrevented||Ua(y??document.body,{select:!0}),l.removeEventListener($0,d),AT.remove(g)},0)}}},[l,u,d,g]);const x=p.useCallback(y=>{if(!r&&!n||g.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(_&&b){const v=y.currentTarget,[w,E]=yee(v);w&&E?!y.shiftKey&&b===E?(y.preventDefault(),r&&Ua(w,{select:!0})):y.shiftKey&&b===w&&(y.preventDefault(),r&&Ua(E,{select:!0})):b===v&&y.preventDefault()}},[r,n,g.paused]);return s.jsx(Ae.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});dm.displayName=vee;function xee(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ua(n,{select:e}),document.activeElement!==r)return}function yee(t){const e=RO(t),r=IT(e,t),n=IT(e.reverse(),t);return[r,n]}function RO(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function IT(t,e){for(const r of t)if(!wee(r,{upTo:e}))return r}function wee(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bee(t){return t instanceof HTMLInputElement&&"select"in t}function Ua(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&bee(t)&&e&&t.select()}}var AT=_ee();function _ee(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=RT(t,e),t.unshift(e)},remove(e){var r;t=RT(t,e),(r=t[0])==null||r.resume()}}}function RT(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function jee(t){return t.filter(e=>e.tagName!=="A")}var Ar=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Nee=Zk.useId||(()=>{}),See=0;function ns(t){const[e,r]=p.useState(Nee());return Ar(()=>{r(n=>n??String(See++))},[t]),e?`radix-${e}`:""}const Eee=["top","right","bottom","left"],Co=Math.min,Jn=Math.max,dv=Math.round,yp=Math.floor,To=t=>({x:t,y:t}),Cee={left:"right",right:"left",bottom:"top",top:"bottom"},Tee={start:"end",end:"start"};function Qb(t,e,r){return Jn(t,Co(e,r))}function wa(t,e){return typeof t=="function"?t(e):t}function ba(t){return t.split("-")[0]}function ud(t){return t.split("-")[1]}function q1(t){return t==="x"?"y":"x"}function W1(t){return t==="y"?"height":"width"}function ko(t){return["top","bottom"].includes(ba(t))?"y":"x"}function H1(t){return q1(ko(t))}function kee(t,e,r){r===void 0&&(r=!1);const n=ud(t),i=H1(t),a=W1(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=hv(o)),[o,hv(o)]}function Iee(t){const e=hv(t);return[Zb(t),e,Zb(e)]}function Zb(t){return t.replace(/start|end/g,e=>Tee[e])}function Aee(t,e,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?a:o;default:return[]}}function Ree(t,e,r,n){const i=ud(t);let a=Aee(ba(t),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Zb)))),a}function hv(t){return t.replace(/left|right|bottom|top/g,e=>Cee[e])}function Pee(t){return{top:0,right:0,bottom:0,left:0,...t}}function PO(t){return typeof t!="number"?Pee(t):{top:t,right:t,bottom:t,left:t}}function fv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function PT(t,e,r){let{reference:n,floating:i}=t;const a=ko(e),o=H1(e),l=W1(o),c=ba(e),u=a==="y",d=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-i.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-i.width,y:h};break;default:g={x:n.x,y:n.y}}switch(ud(e)){case"start":g[o]-=m*(r&&u?-1:1);break;case"end":g[o]+=m*(r&&u?-1:1);break}return g}const Dee=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=PT(u,n,c),m=n,g={},x=0;for(let y=0;y<l.length;y++){const{name:_,fn:b}=l[y],{x:v,y:w,data:E,reset:C}=await b({x:d,y:h,initialPlacement:n,placement:m,strategy:i,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=w??h,g={...g,[_]:{...g[_],...E}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:d,y:h}=PT(u,m,c)),y=-1)}return{x:d,y:h,placement:m,strategy:i,middlewareData:g}};async function ff(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=wa(e,t),x=PO(g),_=l[m?h==="floating"?"reference":"floating":h],b=fv(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(_)))==null||r?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),E=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},C=fv(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:c}):v);return{top:(b.top-C.top+x.top)/E.y,bottom:(C.bottom-b.bottom+x.bottom)/E.y,left:(b.left-C.left+x.left)/E.x,right:(C.right-b.right+x.right)/E.x}}const Oee=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=wa(t,e)||{};if(u==null)return{};const h=PO(d),m={x:r,y:n},g=H1(i),x=W1(g),y=await o.getDimensions(u),_=g==="y",b=_?"top":"left",v=_?"bottom":"right",w=_?"clientHeight":"clientWidth",E=a.reference[x]+a.reference[g]-m[g]-a.floating[x],C=m[g]-a.reference[g],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=I?I[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(I)))&&(T=l.floating[w]||a.floating[x]);const k=E/2-C/2,R=T/2-y[x]/2-1,j=Co(h[b],R),P=Co(h[v],R),D=j,S=T-y[x]-P,M=T/2-y[x]/2+k,$=Qb(D,M,S),q=!c.arrow&&ud(i)!=null&&M!==$&&a.reference[x]/2-(M<D?j:P)-y[x]/2<0,F=q?M<D?M-D:M-S:0;return{[g]:m[g]+F,data:{[g]:$,centerOffset:M-$-F,...q&&{alignmentOffset:F}},reset:q}}}),Mee=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,..._}=wa(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const b=ba(i),v=ko(l),w=ba(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=m||(w||!y?[hv(l)]:Iee(l)),I=x!=="none";!m&&I&&C.push(...Ree(l,y,x,E));const T=[l,...C],k=await ff(e,_),R=[];let j=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&R.push(k[b]),h){const M=kee(i,o,E);R.push(k[M[0]],k[M[1]])}if(j=[...j,{placement:i,overflows:R}],!R.every(M=>M<=0)){var P,D;const M=(((P=a.flip)==null?void 0:P.index)||0)+1,$=T[M];if($)return{data:{index:M,overflows:j},reset:{placement:$}};let q=(D=j.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:D.placement;if(!q)switch(g){case"bestFit":{var S;const F=(S=j.filter(L=>{if(I){const W=ko(L.placement);return W===v||W==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(W=>W>0).reduce((W,z)=>W+z,0)]).sort((L,W)=>L[1]-W[1])[0])==null?void 0:S[0];F&&(q=F);break}case"initialPlacement":q=l;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function DT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function OT(t){return Eee.some(e=>t[e]>=0)}const Lee=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=wa(t,e);switch(n){case"referenceHidden":{const a=await ff(e,{...i,elementContext:"reference"}),o=DT(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:OT(o)}}}case"escaped":{const a=await ff(e,{...i,altBoundary:!0}),o=DT(a,r.floating);return{data:{escapedOffsets:o,escaped:OT(o)}}}default:return{}}}}};async function Vee(t,e){const{placement:r,platform:n,elements:i}=t,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ba(r),l=ud(r),c=ko(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,h=wa(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const Fee=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await Vee(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Uee=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:b,y:v}=_;return{x:b,y:v}}},...c}=wa(t,e),u={x:r,y:n},d=await ff(e,c),h=ko(ba(i)),m=q1(h);let g=u[m],x=u[h];if(a){const _=m==="y"?"top":"left",b=m==="y"?"bottom":"right",v=g+d[_],w=g-d[b];g=Qb(v,g,w)}if(o){const _=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=x+d[_],w=x-d[b];x=Qb(v,x,w)}const y=l.fn({...e,[m]:g,[h]:x});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[m]:a,[h]:o}}}}}},$ee=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=wa(t,e),d={x:r,y:n},h=ko(i),m=q1(h);let g=d[m],x=d[h];const y=wa(l,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const w=m==="y"?"height":"width",E=a.reference[m]-a.floating[w]+_.mainAxis,C=a.reference[m]+a.reference[w]-_.mainAxis;g<E?g=E:g>C&&(g=C)}if(u){var b,v;const w=m==="y"?"width":"height",E=["top","left"].includes(ba(i)),C=a.reference[h]-a.floating[w]+(E&&((b=o.offset)==null?void 0:b[h])||0)+(E?0:_.crossAxis),I=a.reference[h]+a.reference[w]+(E?0:((v=o.offset)==null?void 0:v[h])||0)-(E?_.crossAxis:0);x<C?x=C:x>I&&(x=I)}return{[m]:g,[h]:x}}}},zee=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=wa(t,e),d=await ff(e,u),h=ba(i),m=ud(i),g=ko(i)==="y",{width:x,height:y}=a.floating;let _,b;h==="top"||h==="bottom"?(_=h,b=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,_=m==="end"?"top":"bottom");const v=y-d.top-d.bottom,w=x-d.left-d.right,E=Co(y-d[_],v),C=Co(x-d[b],w),I=!e.middlewareData.shift;let T=E,k=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=v),I&&!m){const j=Jn(d.left,0),P=Jn(d.right,0),D=Jn(d.top,0),S=Jn(d.bottom,0);g?k=x-2*(j!==0||P!==0?j+P:Jn(d.left,d.right)):T=y-2*(D!==0||S!==0?D+S:Jn(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:T});const R=await o.getDimensions(l.floating);return x!==R.width||y!==R.height?{reset:{rects:!0}}:{}}}};function Hx(){return typeof window<"u"}function dd(t){return DO(t)?(t.nodeName||"").toLowerCase():"#document"}function ss(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Pi(t){var e;return(e=(DO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DO(t){return Hx()?t instanceof Node||t instanceof ss(t).Node:!1}function Qs(t){return Hx()?t instanceof Element||t instanceof ss(t).Element:!1}function Ti(t){return Hx()?t instanceof HTMLElement||t instanceof ss(t).HTMLElement:!1}function MT(t){return!Hx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ss(t).ShadowRoot}function hm(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Zs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function Bee(t){return["table","td","th"].includes(dd(t))}function Gx(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function G1(t){const e=K1(),r=Qs(t)?Zs(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function qee(t){let e=Io(t);for(;Ti(e)&&!Fu(e);){if(G1(e))return e;if(Gx(e))return null;e=Io(e)}return null}function K1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fu(t){return["html","body","#document"].includes(dd(t))}function Zs(t){return ss(t).getComputedStyle(t)}function Kx(t){return Qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Io(t){if(dd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MT(t)&&t.host||Pi(t);return MT(e)?e.host:e}function OO(t){const e=Io(t);return Fu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ti(e)&&hm(e)?e:OO(e)}function mf(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=OO(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),o=ss(i);if(a){const l=e_(o);return e.concat(o,o.visualViewport||[],hm(i)?i:[],l&&r?mf(l):[])}return e.concat(i,mf(i,[],r))}function e_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function MO(t){const e=Zs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ti(t),a=i?t.offsetWidth:r,o=i?t.offsetHeight:n,l=dv(r)!==a||dv(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function Y1(t){return Qs(t)?t:t.contextElement}function du(t){const e=Y1(t);if(!Ti(e))return To(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:a}=MO(e);let o=(a?dv(r.width):r.width)/n,l=(a?dv(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Wee=To(0);function LO(t){const e=ss(t);return!K1()||!e.visualViewport?Wee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Hee(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ss(t)?!1:e}function Ul(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=Y1(t);let o=To(1);e&&(n?Qs(n)&&(o=du(n)):o=du(t));const l=Hee(a,r,n)?LO(a):To(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(a){const m=ss(a),g=n&&Qs(n)?ss(n):n;let x=m,y=e_(x);for(;y&&n&&g!==x;){const _=du(y),b=y.getBoundingClientRect(),v=Zs(y),w=b.left+(y.clientLeft+parseFloat(v.paddingLeft))*_.x,E=b.top+(y.clientTop+parseFloat(v.paddingTop))*_.y;c*=_.x,u*=_.y,d*=_.x,h*=_.y,c+=w,u+=E,x=ss(y),y=e_(x)}}return fv({width:d,height:h,x:c,y:u})}function Gee(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const a=i==="fixed",o=Pi(n),l=e?Gx(e.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=To(1);const d=To(0),h=Ti(n);if((h||!h&&!a)&&((dd(n)!=="body"||hm(o))&&(c=Kx(n)),Ti(n))){const m=Ul(n);u=du(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function Kee(t){return Array.from(t.getClientRects())}function t_(t,e){const r=Kx(t).scrollLeft;return e?e.left+r:Ul(Pi(t)).left+r}function Yee(t){const e=Pi(t),r=Kx(t),n=t.ownerDocument.body,i=Jn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Jn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+t_(t);const l=-r.scrollTop;return Zs(n).direction==="rtl"&&(o+=Jn(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}function Jee(t,e){const r=ss(t),n=Pi(t),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=K1();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function Xee(t,e){const r=Ul(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,a=Ti(t)?du(t):To(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function LT(t,e,r){let n;if(e==="viewport")n=Jee(t,r);else if(e==="document")n=Yee(Pi(t));else if(Qs(e))n=Xee(e,r);else{const i=LO(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return fv(n)}function VO(t,e){const r=Io(t);return r===e||!Qs(r)||Fu(r)?!1:Zs(r).position==="fixed"||VO(r,e)}function Qee(t,e){const r=e.get(t);if(r)return r;let n=mf(t,[],!1).filter(l=>Qs(l)&&dd(l)!=="body"),i=null;const a=Zs(t).position==="fixed";let o=a?Io(t):t;for(;Qs(o)&&!Fu(o);){const l=Zs(o),c=G1(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||hm(o)&&!c&&VO(t,o))?n=n.filter(d=>d!==o):i=l,o=Io(o)}return e.set(t,n),n}function Zee(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Gx(e)?[]:Qee(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=LT(e,d,i);return u.top=Jn(h.top,u.top),u.right=Co(h.right,u.right),u.bottom=Co(h.bottom,u.bottom),u.left=Jn(h.left,u.left),u},LT(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function ete(t){const{width:e,height:r}=MO(t);return{width:e,height:r}}function tte(t,e,r){const n=Ti(e),i=Pi(e),a=r==="fixed",o=Ul(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=To(0);if(n||!n&&!a)if((dd(e)!=="body"||hm(i))&&(l=Kx(e)),n){const g=Ul(e,!0,a,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else i&&(c.x=t_(i));let u=0,d=0;if(i&&!n&&!a){const g=i.getBoundingClientRect();d=g.top+l.scrollTop,u=g.left+l.scrollLeft-t_(i,g)}const h=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:h,y:m,width:o.width,height:o.height}}function z0(t){return Zs(t).position==="static"}function VT(t,e){if(!Ti(t)||Zs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Pi(t)===r&&(r=r.ownerDocument.body),r}function FO(t,e){const r=ss(t);if(Gx(t))return r;if(!Ti(t)){let i=Io(t);for(;i&&!Fu(i);){if(Qs(i)&&!z0(i))return i;i=Io(i)}return r}let n=VT(t,e);for(;n&&Bee(n)&&z0(n);)n=VT(n,e);return n&&Fu(n)&&z0(n)&&!G1(n)?r:n||qee(t)||r}const rte=async function(t){const e=this.getOffsetParent||FO,r=this.getDimensions,n=await r(t.floating);return{reference:tte(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function nte(t){return Zs(t).direction==="rtl"}const ste={convertOffsetParentRelativeRectToViewportRelativeRect:Gee,getDocumentElement:Pi,getClippingRect:Zee,getOffsetParent:FO,getElementRects:rte,getClientRects:Kee,getDimensions:ete,getScale:du,isElement:Qs,isRTL:nte};function ite(t,e){let r=null,n;const i=Pi(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:m}=t.getBoundingClientRect();if(l||e(),!h||!m)return;const g=yp(d),x=yp(i.clientWidth-(u+h)),y=yp(i.clientHeight-(d+m)),_=yp(u),v={rootMargin:-g+"px "+-x+"px "+-y+"px "+-_+"px",threshold:Jn(0,Co(1,c))||1};let w=!0;function E(C){const I=C[0].intersectionRatio;if(I!==c){if(!w)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(E,v)}r.observe(t)}return o(!0),a}function ate(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Y1(t),d=i||a?[...u?mf(u):[],...mf(e)]:[];d.forEach(b=>{i&&b.addEventListener("scroll",r,{passive:!0}),a&&b.addEventListener("resize",r)});const h=u&&l?ite(u,r):null;let m=-1,g=null;o&&(g=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let x,y=c?Ul(t):null;c&&_();function _(){const b=Ul(t);y&&(b.x!==y.x||b.y!==y.y||b.width!==y.width||b.height!==y.height)&&r(),y=b,x=requestAnimationFrame(_)}return r(),()=>{var b;d.forEach(v=>{i&&v.removeEventListener("scroll",r),a&&v.removeEventListener("resize",r)}),h==null||h(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const ote=Fee,lte=Uee,cte=Mee,ute=zee,dte=Lee,FT=Oee,hte=$ee,fte=(t,e,r)=>{const n=new Map,i={platform:ste,...r},a={...i.platform,_c:n};return Dee(t,e,{...i,platform:a})};var ng=typeof document<"u"?p.useLayoutEffect:p.useEffect;function mv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!mv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!mv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function UO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function UT(t,e){const r=UO(t);return Math.round(e*r)/r}function B0(t){const e=p.useRef(t);return ng(()=>{e.current=t}),e}function mte(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(n);mv(m,n)||g(n);const[x,y]=p.useState(null),[_,b]=p.useState(null),v=p.useCallback(L=>{L!==I.current&&(I.current=L,y(L))},[]),w=p.useCallback(L=>{L!==T.current&&(T.current=L,b(L))},[]),E=a||x,C=o||_,I=p.useRef(null),T=p.useRef(null),k=p.useRef(d),R=c!=null,j=B0(c),P=B0(i),D=B0(u),S=p.useCallback(()=>{if(!I.current||!T.current)return;const L={placement:e,strategy:r,middleware:m};P.current&&(L.platform=P.current),fte(I.current,T.current,L).then(W=>{const z={...W,isPositioned:D.current!==!1};M.current&&!mv(k.current,z)&&(k.current=z,Kl.flushSync(()=>{h(z)}))})},[m,e,r,P,D]);ng(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[u]);const M=p.useRef(!1);ng(()=>(M.current=!0,()=>{M.current=!1}),[]),ng(()=>{if(E&&(I.current=E),C&&(T.current=C),E&&C){if(j.current)return j.current(E,C,S);S()}},[E,C,S,j,R]);const $=p.useMemo(()=>({reference:I,floating:T,setReference:v,setFloating:w}),[v,w]),q=p.useMemo(()=>({reference:E,floating:C}),[E,C]),F=p.useMemo(()=>{const L={position:r,left:0,top:0};if(!q.floating)return L;const W=UT(q.floating,d.x),z=UT(q.floating,d.y);return l?{...L,transform:"translate("+W+"px, "+z+"px)",...UO(q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:z}},[r,l,q.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:S,refs:$,elements:q,floatingStyles:F}),[d,S,$,q,F])}const pte=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?FT({element:n.current,padding:i}).fn(r):{}:n?FT({element:n,padding:i}).fn(r):{}}}},gte=(t,e)=>({...ote(t),options:[t,e]}),vte=(t,e)=>({...lte(t),options:[t,e]}),xte=(t,e)=>({...hte(t),options:[t,e]}),yte=(t,e)=>({...cte(t),options:[t,e]}),wte=(t,e)=>({...ute(t),options:[t,e]}),bte=(t,e)=>({...dte(t),options:[t,e]}),_te=(t,e)=>({...pte(t),options:[t,e]});var jte="Arrow",$O=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...a}=t;return s.jsx(Ae.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});$O.displayName=jte;var Nte=$O;function Ste(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,y=(m==null?void 0:m[t][c])||l,_=p.useMemo(()=>x,Object.values(x));return s.jsx(y.Provider,{value:_,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,Ete(i,...e)]}function Ete(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Yx(t){const[e,r]=p.useState(void 0);return Ar(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var J1="Popper",[zO,hd]=Ste(J1),[Cte,BO]=zO(J1),qO=t=>{const{__scopePopper:e,children:r}=t,[n,i]=p.useState(null);return s.jsx(Cte,{scope:e,anchor:n,onAnchorChange:i,children:r})};qO.displayName=J1;var WO="PopperAnchor",HO=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,a=BO(WO,r),o=p.useRef(null),l=Xe(e,o);return p.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ae.div,{...i,ref:l})});HO.displayName=WO;var X1="PopperContent",[Tte,kte]=zO(X1),GO=p.forwardRef((t,e)=>{var Se,tt,Z,ge,Y,ie;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...y}=t,_=BO(X1,r),[b,v]=p.useState(null),w=Xe(e,de=>v(de)),[E,C]=p.useState(null),I=Yx(E),T=(I==null?void 0:I.width)??0,k=(I==null?void 0:I.height)??0,R=n+(a!=="center"?"-"+a:""),j=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],D=P.length>0,S={padding:j,boundary:P.filter(Ate),altBoundary:D},{refs:M,floatingStyles:$,placement:q,isPositioned:F,middlewareData:L}=mte({strategy:"fixed",placement:R,whileElementsMounted:(...de)=>ate(...de,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[gte({mainAxis:i+k,alignmentAxis:o}),c&&vte({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?xte():void 0,...S}),c&&yte({...S}),wte({...S,apply:({elements:de,rects:Me,availableWidth:ze,availableHeight:Ke})=>{const{width:Nt,height:V}=Me.reference,B=de.floating.style;B.setProperty("--radix-popper-available-width",`${ze}px`),B.setProperty("--radix-popper-available-height",`${Ke}px`),B.setProperty("--radix-popper-anchor-width",`${Nt}px`),B.setProperty("--radix-popper-anchor-height",`${V}px`)}}),E&&_te({element:E,padding:l}),Rte({arrowWidth:T,arrowHeight:k}),m&&bte({strategy:"referenceHidden",...S})]}),[W,z]=JO(q),X=_r(x);Ar(()=>{F&&(X==null||X())},[F,X]);const se=(Se=L.arrow)==null?void 0:Se.x,_e=(tt=L.arrow)==null?void 0:tt.y,ot=((Z=L.arrow)==null?void 0:Z.centerOffset)!==0,[jt,yt]=p.useState();return Ar(()=>{b&&yt(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:F?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:jt,"--radix-popper-transform-origin":[(ge=L.transformOrigin)==null?void 0:ge.x,(Y=L.transformOrigin)==null?void 0:Y.y].join(" "),...((ie=L.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(Tte,{scope:r,placedSide:W,onArrowChange:C,arrowX:se,arrowY:_e,shouldHideArrow:ot,children:s.jsx(Ae.div,{"data-side":W,"data-align":z,...y,ref:w,style:{...y.style,animation:F?void 0:"none"}})})})});GO.displayName=X1;var KO="PopperArrow",Ite={top:"bottom",right:"left",bottom:"top",left:"right"},YO=p.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,a=kte(KO,n),o=Ite[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Nte,{...i,ref:r,style:{...i.style,display:"block"}})})});YO.displayName=KO;function Ate(t){return t!==null}var Rte=t=>({name:"transformOrigin",options:t,fn(e){var _,b,v;const{placement:r,rects:n,middlewareData:i}=e,o=((_=i.arrow)==null?void 0:_.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=JO(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,g=(((v=i.arrow)==null?void 0:v.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=o?h:`${m}px`,y=`${-c}px`):u==="top"?(x=o?h:`${m}px`,y=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=o?h:`${g}px`):u==="left"&&(x=`${n.floating.width+c}px`,y=o?h:`${g}px`),{data:{x,y}}}});function JO(t){const[e,r="center"]=t.split("-");return[e,r]}var Q1=qO,Jx=HO,Z1=GO,eN=YO,Pte="Portal",fm=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[i,a]=p.useState(!1);Ar(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?c$.createPortal(s.jsx(Ae.div,{...n,ref:e}),o):null});fm.displayName=Pte;function Dte(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Kr=t=>{const{present:e,children:r}=t,n=Ote(e),i=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),a=Xe(n.ref,Mte(i));return typeof r=="function"||n.isPresent?p.cloneElement(i,{ref:a}):null};Kr.displayName="Presence";function Ote(t){const[e,r]=p.useState(),n=p.useRef({}),i=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Dte(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=wp(n.current);a.current=l==="mounted"?u:"none"},[l]),Ar(()=>{const u=n.current,d=i.current;if(d!==t){const m=a.current,g=wp(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Ar(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const y=wp(n.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=g=>{g.target===e&&(a.current=wp(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function wp(t){return(t==null?void 0:t.animationName)||"none"}function Mte(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Lte(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,y=(m==null?void 0:m[t][c])||l,_=p.useMemo(()=>x,Object.values(x));return s.jsx(y.Provider,{value:_,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,Vte(i,...e)]}function Vte(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var q0="rovingFocusGroup.onEntryFocus",Fte={bubbles:!1,cancelable:!0},Xx="RovingFocusGroup",[r_,XO,Ute]=cm(Xx),[$te,Qx]=Lte(Xx,[Ute]),[zte,Bte]=$te(Xx),QO=p.forwardRef((t,e)=>s.jsx(r_.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(r_.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(qte,{...t,ref:e})})}));QO.displayName=Xx;var qte=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=Xe(e,m),x=ac(a),[y=null,_]=cs({prop:o,defaultProp:l,onChange:c}),[b,v]=p.useState(!1),w=_r(u),E=XO(r),C=p.useRef(!1),[I,T]=p.useState(0);return p.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(q0,w),()=>k.removeEventListener(q0,w)},[w]),s.jsx(zte,{scope:r,orientation:n,dir:x,loop:i,currentTabStopId:y,onItemFocus:p.useCallback(k=>_(k),[_]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>T(k=>k-1),[]),children:s.jsx(Ae.div,{tabIndex:b||I===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{C.current=!0}),onFocus:me(t.onFocus,k=>{const R=!C.current;if(k.target===k.currentTarget&&R&&!b){const j=new CustomEvent(q0,Fte);if(k.currentTarget.dispatchEvent(j),!j.defaultPrevented){const P=E().filter(q=>q.focusable),D=P.find(q=>q.active),S=P.find(q=>q.id===y),$=[D,S,...P].filter(Boolean).map(q=>q.ref.current);tM($,d)}}C.current=!1}),onBlur:me(t.onBlur,()=>v(!1))})})}),ZO="RovingFocusGroupItem",eM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,...o}=t,l=ns(),c=a||l,u=Bte(ZO,r),d=u.currentTabStopId===c,h=XO(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(r_.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:s.jsx(Ae.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=Gte(x,u.orientation,u.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=h().filter(v=>v.focusable).map(v=>v.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const v=b.indexOf(x.currentTarget);b=u.loop?Kte(b,v+1):b.slice(v+1)}setTimeout(()=>tM(b))}})})})});eM.displayName=ZO;var Wte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Hte(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Gte(t,e,r){const n=Hte(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Wte[n]}function tM(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function Kte(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var rM=QO,nM=eM,Yte=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jc=new WeakMap,bp=new WeakMap,_p={},W0=0,sM=function(t){return t&&(t.host||sM(t.parentNode))},Jte=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=sM(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Xte=function(t,e,r,n){var i=Jte(e,Array.isArray(t)?t:[t]);_p[r]||(_p[r]=new WeakMap);var a=_p[r],o=[],l=new Set,c=new Set(i),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",y=(jc.get(m)||0)+1,_=(a.get(m)||0)+1;jc.set(m,y),a.set(m,_),o.push(m),y===1&&x&&bp.set(m,!0),_===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(e),l.clear(),W0++,function(){o.forEach(function(h){var m=jc.get(h)-1,g=a.get(h)-1;jc.set(h,m),a.set(h,g),m||(bp.has(h)||h.removeAttribute(n),bp.delete(h)),g||h.removeAttribute(r)}),W0--,W0||(jc=new WeakMap,jc=new WeakMap,bp=new WeakMap,_p={})}},Zx=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=Yte(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),Xte(n,i,r,"aria-hidden")):function(){return null}},sg="right-scroll-bar-position",ig="width-before-scroll-bar",Qte="with-scroll-bars-hidden",Zte="--removed-body-scroll-bar-size";function H0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ere(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var tre=typeof window<"u"?p.useLayoutEffect:p.useEffect,$T=new WeakMap;function rre(t,e){var r=ere(null,function(n){return t.forEach(function(i){return H0(i,n)})});return tre(function(){var n=$T.get(r);if(n){var i=new Set(n),a=new Set(t),o=r.current;i.forEach(function(l){a.has(l)||H0(l,null)}),a.forEach(function(l){i.has(l)||H0(l,o)})}$T.set(r,t)},[t]),r}function nre(t){return t}function sre(t,e){e===void 0&&(e=nre);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function ire(t){t===void 0&&(t={});var e=sre(null);return e.options=ui({async:!0,ssr:!1},t),e}var iM=function(t){var e=t.sideCar,r=Ff(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,ui({},r))};iM.isSideCarExport=!0;function are(t,e){return t.useMedium(e),iM}var aM=ire(),G0=function(){},ey=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:G0,onWheelCapture:G0,onTouchMoveCapture:G0}),i=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,x=t.inert,y=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,v=t.gapMode,w=Ff(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,C=rre([r,e]),I=ui(ui({},w),i);return p.createElement(p.Fragment,null,d&&p.createElement(E,{sideCar:aM,removeScrollBar:u,shards:h,noIsolation:g,inert:x,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:v}),o?p.cloneElement(p.Children.only(l),ui(ui({},I),{ref:C})):p.createElement(b,ui({},I,{className:c,ref:C}),l))});ey.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ey.classNames={fullWidth:ig,zeroRight:sg};var ore=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ore();return e&&t.setAttribute("nonce",e),t}function cre(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ure(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dre=function(){var t=0,e=null;return{add:function(r){t==0&&(e=lre())&&(cre(e,r),ure(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},hre=function(){var t=dre();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},oM=function(){var t=hre(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},fre={left:0,top:0,right:0,gap:0},K0=function(t){return parseInt(t||"",10)||0},mre=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[K0(r),K0(n),K0(i)]},pre=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return fre;var e=mre(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},gre=oM(),hu="data-scroll-locked",vre=function(t,e,r,n){var i=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Qte,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(hu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ig,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(sg," .").concat(sg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ig," .").concat(ig,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hu,`] {
    `).concat(Zte,": ").concat(l,`px;
  }
`)},zT=function(){var t=parseInt(document.body.getAttribute(hu)||"0",10);return isFinite(t)?t:0},xre=function(){p.useEffect(function(){return document.body.setAttribute(hu,(zT()+1).toString()),function(){var t=zT()-1;t<=0?document.body.removeAttribute(hu):document.body.setAttribute(hu,t.toString())}},[])},yre=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;xre();var a=p.useMemo(function(){return pre(i)},[i]);return p.createElement(gre,{styles:vre(a,!e,i,r?"":"!important")})},n_=!1;if(typeof window<"u")try{var jp=Object.defineProperty({},"passive",{get:function(){return n_=!0,!0}});window.addEventListener("test",jp,jp),window.removeEventListener("test",jp,jp)}catch{n_=!1}var Nc=n_?{passive:!1}:!1,wre=function(t){return t.tagName==="TEXTAREA"},lM=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!wre(t)&&r[e]==="visible")},bre=function(t){return lM(t,"overflowY")},_re=function(t){return lM(t,"overflowX")},BT=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=cM(t,n);if(i){var a=uM(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},jre=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Nre=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},cM=function(t,e){return t==="v"?bre(e):_re(e)},uM=function(t,e){return t==="v"?jre(e):Nre(e)},Sre=function(t,e){return t==="h"&&e==="rtl"?-1:1},Ere=function(t,e,r,n,i){var a=Sre(t,window.getComputedStyle(e).direction),o=a*n,l=r.target,c=e.contains(l),u=!1,d=o>0,h=0,m=0;do{var g=uM(t,l),x=g[0],y=g[1],_=g[2],b=y-_-a*x;(x||b)&&cM(t,l)&&(h+=b,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!i)||!d&&(Math.abs(m)<1||!i))&&(u=!0),u},Np=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qT=function(t){return[t.deltaX,t.deltaY]},WT=function(t){return t&&"current"in t?t.current:t},Cre=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Tre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kre=0,Sc=[];function Ire(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),i=p.useState(kre++)[0],a=p.useState(oM)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=X9([t.lockRef.current],(t.shards||[]).map(WT),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Np(y),v=r.current,w="deltaX"in y?y.deltaX:v[0]-b[0],E="deltaY"in y?y.deltaY:v[1]-b[1],C,I=y.target,T=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in y&&T==="h"&&I.type==="range")return!1;var k=BT(T,I);if(!k)return!0;if(k?C=T:(C=T==="v"?"h":"v",k=BT(T,I)),!k)return!1;if(!n.current&&"changedTouches"in y&&(w||E)&&(n.current=C),!C)return!0;var R=n.current||C;return Ere(R,_,y,R==="h"?w:E,!0)},[]),c=p.useCallback(function(y){var _=y;if(!(!Sc.length||Sc[Sc.length-1]!==a)){var b="deltaY"in _?qT(_):Np(_),v=e.current.filter(function(C){return C.name===_.type&&(C.target===_.target||_.target===C.shadowParent)&&Cre(C.delta,b)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(WT).filter(Boolean).filter(function(C){return C.contains(_.target)}),E=w.length>0?l(_,w[0]):!o.current.noIsolation;E&&_.cancelable&&_.preventDefault()}}},[]),u=p.useCallback(function(y,_,b,v){var w={name:y,delta:_,target:b,should:v,shadowParent:Are(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(E){return E!==w})},1)},[]),d=p.useCallback(function(y){r.current=Np(y),n.current=void 0},[]),h=p.useCallback(function(y){u(y.type,qT(y),y.target,l(y,t.lockRef.current))},[]),m=p.useCallback(function(y){u(y.type,Np(y),y.target,l(y,t.lockRef.current))},[]);p.useEffect(function(){return Sc.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Nc),document.addEventListener("touchmove",c,Nc),document.addEventListener("touchstart",d,Nc),function(){Sc=Sc.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Nc),document.removeEventListener("touchmove",c,Nc),document.removeEventListener("touchstart",d,Nc)}},[]);var g=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:Tre(i)}):null,g?p.createElement(yre,{gapMode:t.gapMode}):null)}function Are(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Rre=are(aM,Ire);var mm=p.forwardRef(function(t,e){return p.createElement(ey,ui({},t,{ref:e,sideCar:Rre}))});mm.classNames=ey.classNames;var s_=["Enter"," "],Pre=["ArrowDown","PageUp","Home"],dM=["ArrowUp","PageDown","End"],Dre=[...Pre,...dM],Ore={ltr:[...s_,"ArrowRight"],rtl:[...s_,"ArrowLeft"]},Mre={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pm="Menu",[pf,Lre,Vre]=cm(pm),[oc,hM]=hs(pm,[Vre,hd,Qx]),ty=hd(),fM=Qx(),[Fre,lc]=oc(pm),[Ure,gm]=oc(pm),mM=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=t,l=ty(e),[c,u]=p.useState(null),d=p.useRef(!1),h=_r(a),m=ac(i);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Q1,{...l,children:s.jsx(Fre,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(Ure,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};mM.displayName=pm;var $re="MenuAnchor",tN=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=ty(r);return s.jsx(Jx,{...i,...n,ref:e})});tN.displayName=$re;var rN="MenuPortal",[zre,pM]=oc(rN,{forceMount:void 0}),gM=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,a=lc(rN,e);return s.jsx(zre,{scope:e,forceMount:r,children:s.jsx(Kr,{present:r||a.open,children:s.jsx(fm,{asChild:!0,container:i,children:n})})})};gM.displayName=rN;var ws="MenuContent",[Bre,nN]=oc(ws),vM=p.forwardRef((t,e)=>{const r=pM(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,a=lc(ws,t.__scopeMenu),o=gm(ws,t.__scopeMenu);return s.jsx(pf.Provider,{scope:t.__scopeMenu,children:s.jsx(Kr,{present:n||a.open,children:s.jsx(pf.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(qre,{...i,ref:e}):s.jsx(Wre,{...i,ref:e})})})})}),qre=p.forwardRef((t,e)=>{const r=lc(ws,t.__scopeMenu),n=p.useRef(null),i=Xe(e,n);return p.useEffect(()=>{const a=n.current;if(a)return Zx(a)},[]),s.jsx(sN,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:me(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Wre=p.forwardRef((t,e)=>{const r=lc(ws,t.__scopeMenu);return s.jsx(sN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),sN=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...y}=t,_=lc(ws,r),b=gm(ws,r),v=ty(r),w=fM(r),E=Lre(r),[C,I]=p.useState(null),T=p.useRef(null),k=Xe(e,T,_.onContentChange),R=p.useRef(0),j=p.useRef(""),P=p.useRef(0),D=p.useRef(null),S=p.useRef("right"),M=p.useRef(0),$=x?mm:p.Fragment,q=x?{as:ya,allowPinchZoom:!0}:void 0,F=W=>{var Se,tt;const z=j.current+W,X=E().filter(Z=>!Z.disabled),se=document.activeElement,_e=(Se=X.find(Z=>Z.ref.current===se))==null?void 0:Se.textValue,ot=X.map(Z=>Z.textValue),jt=nne(ot,z,_e),yt=(tt=X.find(Z=>Z.textValue===jt))==null?void 0:tt.ref.current;(function Z(ge){j.current=ge,window.clearTimeout(R.current),ge!==""&&(R.current=window.setTimeout(()=>Z(""),1e3))})(z),yt&&setTimeout(()=>yt.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),Wx();const L=p.useCallback(W=>{var X,se;return S.current===((X=D.current)==null?void 0:X.side)&&ine(W,(se=D.current)==null?void 0:se.area)},[]);return s.jsx(Bre,{scope:r,searchRef:j,onItemEnter:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),onItemLeave:p.useCallback(W=>{var z;L(W)||((z=T.current)==null||z.focus(),I(null))},[L]),onTriggerLeave:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(W=>{D.current=W},[]),children:s.jsx($,{...q,children:s.jsx(dm,{asChild:!0,trapped:i,onMountAutoFocus:me(a,W=>{var z;W.preventDefault(),(z=T.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(um,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:s.jsx(rM,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:I,onEntryFocus:me(c,W=>{b.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Z1,{role:"menu","aria-orientation":"vertical","data-state":PM(_.open),"data-radix-menu-content":"",dir:b.dir,...v,...y,ref:k,style:{outline:"none",...y.style},onKeyDown:me(y.onKeyDown,W=>{const X=W.target.closest("[data-radix-menu-content]")===W.currentTarget,se=W.ctrlKey||W.altKey||W.metaKey,_e=W.key.length===1;X&&(W.key==="Tab"&&W.preventDefault(),!se&&_e&&F(W.key));const ot=T.current;if(W.target!==ot||!Dre.includes(W.key))return;W.preventDefault();const yt=E().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);dM.includes(W.key)&&yt.reverse(),tne(yt)}),onBlur:me(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(R.current),j.current="")}),onPointerMove:me(t.onPointerMove,gf(W=>{const z=W.target,X=M.current!==W.clientX;if(W.currentTarget.contains(z)&&X){const se=W.clientX>M.current?"right":"left";S.current=se,M.current=W.clientX}}))})})})})})})});vM.displayName=ws;var Hre="MenuGroup",iN=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Ae.div,{role:"group",...n,ref:e})});iN.displayName=Hre;var Gre="MenuLabel",xM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Ae.div,{...n,ref:e})});xM.displayName=Gre;var pv="MenuItem",HT="menu.itemSelect",ry=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...i}=t,a=p.useRef(null),o=gm(pv,t.__scopeMenu),l=nN(pv,t.__scopeMenu),c=Xe(e,a),u=p.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(HT,{bubbles:!0,cancelable:!0});h.addEventListener(HT,g=>n==null?void 0:n(g),{once:!0}),kO(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(yM,{...i,ref:c,disabled:r,onClick:me(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:me(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:me(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||s_.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ry.displayName=pv;var yM=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=t,o=nN(pv,r),l=fM(r),c=p.useRef(null),u=Xe(e,c),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[a.children]),s.jsx(pf.ItemSlot,{scope:r,disabled:n,textValue:i??m,children:s.jsx(nM,{asChild:!0,...l,focusable:!n,children:s.jsx(Ae.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:me(t.onPointerMove,gf(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(t.onPointerLeave,gf(x=>o.onItemLeave(x))),onFocus:me(t.onFocus,()=>h(!0)),onBlur:me(t.onBlur,()=>h(!1))})})})}),Kre="MenuCheckboxItem",wM=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...i}=t;return s.jsx(SM,{scope:t.__scopeMenu,checked:r,children:s.jsx(ry,{role:"menuitemcheckbox","aria-checked":gv(r)?"mixed":r,...i,ref:e,"data-state":oN(r),onSelect:me(i.onSelect,()=>n==null?void 0:n(gv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});wM.displayName=Kre;var bM="MenuRadioGroup",[Yre,Jre]=oc(bM,{value:void 0,onValueChange:()=>{}}),_M=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...i}=t,a=_r(n);return s.jsx(Yre,{scope:t.__scopeMenu,value:r,onValueChange:a,children:s.jsx(iN,{...i,ref:e})})});_M.displayName=bM;var jM="MenuRadioItem",NM=p.forwardRef((t,e)=>{const{value:r,...n}=t,i=Jre(jM,t.__scopeMenu),a=r===i.value;return s.jsx(SM,{scope:t.__scopeMenu,checked:a,children:s.jsx(ry,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":oN(a),onSelect:me(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,r)},{checkForDefaultPrevented:!1})})})});NM.displayName=jM;var aN="MenuItemIndicator",[SM,Xre]=oc(aN,{checked:!1}),EM=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...i}=t,a=Xre(aN,r);return s.jsx(Kr,{present:n||gv(a.checked)||a.checked===!0,children:s.jsx(Ae.span,{...i,ref:e,"data-state":oN(a.checked)})})});EM.displayName=aN;var Qre="MenuSeparator",CM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});CM.displayName=Qre;var Zre="MenuArrow",TM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=ty(r);return s.jsx(eN,{...i,...n,ref:e})});TM.displayName=Zre;var ene="MenuSub",[pme,kM]=oc(ene),nh="MenuSubTrigger",IM=p.forwardRef((t,e)=>{const r=lc(nh,t.__scopeMenu),n=gm(nh,t.__scopeMenu),i=kM(nh,t.__scopeMenu),a=nN(nh,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(tN,{asChild:!0,...u,children:s.jsx(yM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":PM(r.open),...t,ref:$x(e,i.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:me(t.onPointerMove,gf(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:me(t.onPointerLeave,gf(h=>{var g,x;d();const m=(g=r.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(x=r.content)==null?void 0:x.dataset.side,_=y==="right",b=_?-5:5,v=m[_?"left":"right"],w=m[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:v,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:v,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:me(t.onKeyDown,h=>{var g;const m=a.searchRef.current!=="";t.disabled||m&&h.key===" "||Ore[n.dir].includes(h.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),h.preventDefault())})})})});IM.displayName=nh;var AM="MenuSubContent",RM=p.forwardRef((t,e)=>{const r=pM(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,a=lc(ws,t.__scopeMenu),o=gm(ws,t.__scopeMenu),l=kM(AM,t.__scopeMenu),c=p.useRef(null),u=Xe(e,c);return s.jsx(pf.Provider,{scope:t.__scopeMenu,children:s.jsx(Kr,{present:n||a.open,children:s.jsx(pf.Slot,{scope:t.__scopeMenu,children:s.jsx(sN,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:me(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:me(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:me(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=Mre[o.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});RM.displayName=AM;function PM(t){return t?"open":"closed"}function gv(t){return t==="indeterminate"}function oN(t){return gv(t)?"indeterminate":t?"checked":"unchecked"}function tne(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function rne(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function nne(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=rne(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function sne(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}function ine(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return sne(r,e)}function gf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var ane=mM,one=tN,lne=gM,cne=vM,une=iN,dne=xM,hne=ry,fne=wM,mne=_M,pne=NM,gne=EM,vne=CM,xne=TM,yne=IM,wne=RM,lN="DropdownMenu",[bne,gme]=hs(lN,[hM]),En=hM(),[_ne,DM]=bne(lN),OM=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=En(e),u=p.useRef(null),[d=!1,h]=cs({prop:i,defaultProp:a,onChange:o});return s.jsx(_ne,{scope:e,triggerId:ns(),triggerRef:u,contentId:ns(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(ane,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};OM.displayName=lN;var MM="DropdownMenuTrigger",LM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=t,a=DM(MM,r),o=En(r);return s.jsx(one,{asChild:!0,...o,children:s.jsx(Ae.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:$x(e,a.triggerRef),onPointerDown:me(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:me(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});LM.displayName=MM;var jne="DropdownMenuPortal",VM=t=>{const{__scopeDropdownMenu:e,...r}=t,n=En(e);return s.jsx(lne,{...n,...r})};VM.displayName=jne;var FM="DropdownMenuContent",UM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=DM(FM,r),a=En(r),o=p.useRef(!1);return s.jsx(cne,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:e,onCloseAutoFocus:me(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:me(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UM.displayName=FM;var Nne="DropdownMenuGroup",Sne=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(une,{...i,...n,ref:e})});Sne.displayName=Nne;var Ene="DropdownMenuLabel",$M=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(dne,{...i,...n,ref:e})});$M.displayName=Ene;var Cne="DropdownMenuItem",zM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(hne,{...i,...n,ref:e})});zM.displayName=Cne;var Tne="DropdownMenuCheckboxItem",BM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(fne,{...i,...n,ref:e})});BM.displayName=Tne;var kne="DropdownMenuRadioGroup",Ine=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(mne,{...i,...n,ref:e})});Ine.displayName=kne;var Ane="DropdownMenuRadioItem",qM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(pne,{...i,...n,ref:e})});qM.displayName=Ane;var Rne="DropdownMenuItemIndicator",WM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(gne,{...i,...n,ref:e})});WM.displayName=Rne;var Pne="DropdownMenuSeparator",HM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(vne,{...i,...n,ref:e})});HM.displayName=Pne;var Dne="DropdownMenuArrow",One=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(xne,{...i,...n,ref:e})});One.displayName=Dne;var Mne="DropdownMenuSubTrigger",GM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(yne,{...i,...n,ref:e})});GM.displayName=Mne;var Lne="DropdownMenuSubContent",KM=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=En(r);return s.jsx(wne,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KM.displayName=Lne;var Vne=OM,Fne=LM,Une=VM,YM=UM,JM=$M,XM=zM,QM=BM,ZM=qM,e3=WM,t3=HM,r3=GM,n3=KM;function Bo(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var $ne=["color"],zne=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,$ne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Bne=["color"],cN=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Bne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),qne=["color"],s3=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,qne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Wne=["color"],Hne=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Wne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Gne=["color"],i3=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Gne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Kne=["color"],Yne=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Kne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Jne=["color"],Xne=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Jne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Qne=["color"],Zne=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Bo(t,Qne);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});const Ch=Vne,Th=Fne,ese=p.forwardRef(({className:t,inset:e,children:r,...n},i)=>s.jsxs(r3,{ref:i,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,s.jsx(i3,{className:"ml-auto h-4 w-4"})]}));ese.displayName=r3.displayName;const tse=p.forwardRef(({className:t,...e},r)=>s.jsx(n3,{ref:r,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));tse.displayName=n3.displayName;const fu=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>s.jsx(Une,{children:s.jsx(YM,{ref:n,sideOffset:e,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));fu.displayName=YM.displayName;const nt=p.forwardRef(({className:t,inset:e,...r},n)=>s.jsx(XM,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));nt.displayName=XM.displayName;const rse=p.forwardRef(({className:t,children:e,checked:r,...n},i)=>s.jsxs(QM,{ref:i,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(e3,{children:s.jsx(cN,{className:"h-4 w-4"})})}),e]}));rse.displayName=QM.displayName;const nse=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(ZM,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(e3,{children:s.jsx(Zne,{className:"h-4 w-4 fill-current"})})}),e]}));nse.displayName=ZM.displayName;const sse=p.forwardRef(({className:t,inset:e,...r},n)=>s.jsx(JM,{ref:n,className:Pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));sse.displayName=JM.displayName;const Ur=p.forwardRef(({className:t,...e},r)=>s.jsx(t3,{ref:r,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));Ur.displayName=t3.displayName;var uN="Avatar",[ise,vme]=hs(uN),[ase,a3]=ise(uN),o3=p.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,a]=p.useState("idle");return s.jsx(ase,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Ae.span,{...n,ref:e})})});o3.displayName=uN;var l3="AvatarImage",c3=p.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=t,o=a3(l3,r),l=ose(n,a.referrerPolicy),c=_r(u=>{i(u),o.onImageLoadingStatusChange(u)});return Ar(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Ae.img,{...a,ref:e,src:n}):null});c3.displayName=l3;var u3="AvatarFallback",d3=p.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,a=a3(u3,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Ae.span,{...i,ref:e}):null});d3.displayName=u3;function ose(t,e){const[r,n]=p.useState("idle");return Ar(()=>{if(!t){n("error");return}let i=!0;const a=new window.Image,o=l=>()=>{i&&n(l)};return n("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),r}var h3=o3,f3=c3,m3=d3;const _a=p.forwardRef(({className:t,...e},r)=>s.jsx(h3,{ref:r,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));_a.displayName=h3.displayName;const ja=p.forwardRef(({className:t,...e},r)=>s.jsx(f3,{ref:r,className:Pe("aspect-square h-full w-full",t),...e}));ja.displayName=f3.displayName;const Na=p.forwardRef(({className:t,...e},r)=>s.jsx(m3,{ref:r,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Na.displayName=m3.displayName;function lse({status:t,className:e=""}){const n=(i=>{switch(i){case"verified":return{label:"Vrifi",icon:s.jsx(lt,{className:"w-3 h-3"}),variant:"default",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-200 dark:border-green-800"};case"pending":return{label:"En attente",icon:s.jsx(At,{className:"w-3 h-3"}),variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-200 dark:border-yellow-800"};case"rejected":return{label:"Rejet",icon:s.jsx(qn,{className:"w-3 h-3"}),variant:"destructive",className:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-200 dark:border-green-800"};case"not_started":default:return{label:"Non vrifi",icon:s.jsx(sa,{className:"w-3 h-3"}),variant:"outline",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}}})(t);return s.jsxs(le,{variant:n.variant,className:`flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium border ${n.className} ${e}`,children:[n.icon,n.label]})}function cse(){const{currentUser:t,updateVerificationStatus:e}=Ot(),{notifyStatusChange:r}=im(),[n,i]=p.useState("not_started"),[a,o]=p.useState(!1),l=p.useRef("not_started"),c=p.useRef(!0),u=p.useCallback(async()=>{if(t){o(!0);try{const{VerificationService:h}=await ad(async()=>{const{VerificationService:y}=await Promise.resolve().then(()=>Bfe);return{VerificationService:y}},void 0),m=await h.getUserVerificationStatus();let g;switch(m.status){case"pending":g="pending";break;case"approved":case"verified":g="verified";break;case"rejected":g="rejected";break;default:g="not_started"}const x=g!==l.current;if(i(g),l.current=g,x)try{await e(g),console.log(" [VERIF] Statut synchronis avec AuthContext:",g)}catch(y){console.warn(" [VERIF] Erreur synchronisation avec AuthContext:",y)}x&&!c.current&&(console.log(" Statut de vrification chang:",l.current,"",g),r(g)),c.current&&(c.current=!1)}catch(h){console.log("Erreur lors du chargement du statut de vrification:",h),i("not_started")}finally{o(!1)}}},[t,r,e]);p.useEffect(()=>{u()},[u]);const d=p.useCallback(()=>{u()},[u]);return{verificationStatus:n,loading:a,refreshStatus:d}}const use=()=>{var E,C;const{currentUser:t,userProfile:e,logout:r}=Ot(),{conversations:n,fetchConversations:i}=qx(),{getCartItemCount:a}=tee(),{theme:o,setTheme:l}=f8(),{verificationStatus:c}=cse(),{notifications:u,markAsRead:d}=im(),{adminNotifications:h,unreadCount:m}=jO(),g=Hn(),[x,y]=p.useState("");p.useEffect(()=>{const I=u.length+((h==null?void 0:h.length)||0),T=u.filter(k=>!k.isRead).length+(m||0);console.log(" Header - Nombre de notifications total:",I),console.log(" Header - Nombre de notifications non lues:",T),console.log(" Header - Notifications utilisateur:",u.length),console.log(" Header - Notifications admin:",(h==null?void 0:h.length)||0)},[u,h,m]);const _=Ce.useMemo(()=>!t||!n.length?0:n.reduce((I,T)=>{const k=T.unreadCount[t.uid]||0;return I+k},0),[n,t]);p.useEffect(()=>{t&&i(t.uid)},[t,i]);const b=I=>{I.preventDefault(),x.trim()&&g(`/listings?q=${encodeURIComponent(x.trim())}`)},v=async()=>{try{await r(),g("/")}catch(I){console.error("Logout error:",I)}},w=a();return s.jsxs(s.Fragment,{children:[s.jsx(_O,{}),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border w-full overflow-x-hidden",children:s.jsx("div",{className:"w-full max-w-full mx-auto px-3 sm:px-4 lg:px-6 overflow-hidden",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between gap-2 sm:gap-4 min-w-0",children:[s.jsxs(ve,{to:"/",className:"flex items-center",children:[s.jsx("div",{className:"sm:hidden w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(_n,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block flex flex-col justify-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/logoBoxetu.svg",alt:"BOXETU",className:"h-6 sm:h-7 w-auto",onError:I=>{var T;console.error(" Erreur de chargement du logo:",I),I.currentTarget.style.display="none",(T=I.currentTarget.nextElementSibling)==null||T.classList.remove("hidden")}}),s.jsx("div",{className:"hidden text-lg font-bold text-primary",children:"BOXETU"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-left",children:"tudie, change & conomise"})]})]}),s.jsx("form",{onSubmit:b,className:"flex-1 max-w-sm sm:max-w-md lg:max-w-lg mx-2 sm:mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher...",value:x,onChange:I=>y(I.target.value),className:"pl-8 sm:pl-10 pr-3 h-9 sm:h-10 text-sm w-full"})]})}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors p-2","aria-label":"Changer le thme",children:[s.jsx(xT,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(mT,{className:"absolute top-2 left-2 h-4 w-4 sm:h-5 sm:w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(U,{asChild:!0,className:"hidden md:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm",children:s.jsxs(ve,{to:"/create",children:[s.jsx(ia,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden lg:inline",children:"Publier"})]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(U,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:s.jsx(ve,{to:"/cart",children:s.jsx(vT,{className:"w-4 h-4"})})}),w>0&&s.jsx(le,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:w>99?"99+":w})]}),s.jsxs(Ch,{children:[s.jsx(Th,{asChild:!0,children:s.jsxs(U,{variant:"ghost",size:"icon",className:"hidden sm:flex h-8 w-8 sm:h-9 sm:w-9 relative",children:[s.jsx(tn,{className:"w-4 h-4"}),u.filter(T=>!T.isRead).length+(m||0)>0&&s.jsx(le,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:(()=>{const I=u.filter(T=>!T.isRead).length+(m||0);return I>99?"99+":I})()})]})}),s.jsxs(fu,{className:"w-80 max-h-96 overflow-y-auto",align:"end",children:[s.jsx("div",{className:"p-2 border-b",children:s.jsxs("h3",{className:"font-semibold text-sm",children:["Notifications (",u.length+((h==null?void 0:h.length)||0),")",(()=>{const I=u.filter(T=>!T.isRead).length+(m||0);return I>0?` - ${I} non lues`:""})()]})}),u.length===0&&(!h||h.length===0)?s.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Aucune notification"}):s.jsxs("div",{className:"space-y-1",children:[u.map(I=>s.jsx("div",{className:`p-3 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors ${I.isRead?"":"bg-blue-50 dark:bg-blue-950/20"}`,onClick:()=>{d(I.id)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[I.status==="approved"&&s.jsx(qe,{className:"w-4 h-4 text-green-500"}),I.status==="pending"&&s.jsx(At,{className:"w-4 h-4 text-yellow-500"}),I.status==="rejected"&&s.jsx(qn,{className:"w-4 h-4 text-red-500"}),I.status==="not_started"&&s.jsx(Qt,{className:"w-4 h-4 text-blue-500"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:`text-sm font-medium ${I.isRead?"":"font-bold"}`,children:[I.status==="approved"&&"Vrification approuve !",I.status==="pending"&&"Vrification en cours",I.status==="rejected"&&"Vrification rejete",I.status==="not_started"&&"Statut de vrification"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(I.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:`text-sm ${I.isRead?"text-muted-foreground":"font-medium"}`,children:I.message}),!I.isRead&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Non lue"})]})]})]})},I.id)),h&&h.length>0&&s.jsxs(s.Fragment,{children:[u.length>0&&s.jsx(Ur,{}),s.jsx("div",{className:"p-2 bg-muted/50",children:s.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Notifications Admin"})}),h.map(I=>s.jsx("div",{className:`p-3 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors ${I.isRead?"":"bg-orange-50 dark:bg-orange-950/20"}`,onClick:()=>{g("/admin")},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[I.type==="new_verification"&&s.jsx(qe,{className:"w-4 h-4 text-blue-500"}),I.type==="system_alert"&&s.jsx(Qt,{className:"w-4 h-4 text-orange-500"}),I.type==="pending_action"&&s.jsx(At,{className:"w-4 h-4 text-yellow-500"}),I.type==="user_message"&&s.jsx(Xt,{className:"w-4 h-4 text-green-500"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`text-sm font-medium ${I.isRead?"":"font-bold"}`,children:I.title}),s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(I.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:`text-sm ${I.isRead?"text-muted-foreground":"font-medium"}`,children:I.message}),!I.isRead&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Non lue"})]})]})]})},I.id))]})]}),u.filter(T=>!T.isRead).length+(m||0)>0&&s.jsxs(s.Fragment,{children:[s.jsx(Ur,{}),s.jsx("div",{className:"p-2",children:s.jsx(U,{variant:"outline",size:"sm",onClick:()=>{u.forEach(I=>{I.isRead||d(I.id)})},className:"w-full text-xs",children:"Marquer toutes comme lues"})})]})]})]}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(U,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:s.jsx(ve,{to:"/messages",children:s.jsx(Xt,{className:"w-4 h-4"})})}),_>0&&s.jsx(le,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:_>99?"99+":_})]}),s.jsxs(Ch,{children:[s.jsx(Th,{asChild:!0,children:s.jsxs(U,{variant:"ghost",className:"relative h-8 w-8 sm:h-9 sm:w-9 rounded-full p-0",children:[s.jsxs(_a,{className:"h-7 w-7 sm:h-8 sm:w-8",children:[s.jsx(ja,{src:e==null?void 0:e.photoURL}),s.jsx(Na,{className:"text-xs sm:text-sm",children:((C=(E=e==null?void 0:e.displayName)==null?void 0:E[0])==null?void 0:C.toUpperCase())||"U"})]}),c==="approved"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(qe,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})}),c==="pending"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-yellow-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(At,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})}),c==="rejected"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-red-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(qn,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})})]})}),s.jsxs(fu,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:e==null?void 0:e.displayName}),s.jsx(lse,{status:c})]}),s.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e==null?void 0:e.university}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ws,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO conomiss"]})]})]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/profile",className:"cursor-pointer",children:[s.jsx(on,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),!(e!=null&&e.isVerified)&&s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/verification",className:"cursor-pointer",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Vrification tudiante"]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/settings",className:"cursor-pointer",children:[s.jsx(Ux,{className:"w-4 h-4 mr-2"}),"Paramtres"]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/orders",className:"cursor-pointer",children:[s.jsx(Us,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/payments",className:"cursor-pointer",children:[s.jsx(xa,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(sn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(F1,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardes"]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Messages",_>0&&s.jsx(le,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:_>99?"99+":_})]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/impact",className:"cursor-pointer",children:[s.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Mon impact cologique"]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/help",className:"cursor-pointer",children:[s.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/safety",className:"cursor-pointer",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Conseils de scurit"]})}),(()=>{const I=(t==null?void 0:t.email)==="barrymohamadou98@gmail.com";return console.log("Header - showAdmin:",I,"currentUser?.email:",t==null?void 0:t.email),I})()&&s.jsxs(s.Fragment,{children:[s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/admin",className:"cursor-pointer text-primary",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Administration"]})})]}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/integration-test",className:"cursor-pointer text-blue-600",children:[s.jsx(yQ,{className:"w-4 h-4 mr-2"}),"Integration Test"]})}),s.jsx(Ur,{}),s.jsxs(nt,{onClick:v,className:"cursor-pointer text-destructive",children:[s.jsx(hQ,{className:"w-4 h-4 mr-2"}),"Se dconnecter"]})]})]}),s.jsx(U,{size:"icon",asChild:!0,className:"md:hidden bg-gradient-to-r from-primary to-secondary h-8 w-8",children:s.jsx(ve,{to:"/create",children:s.jsx(ia,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",asChild:!0,className:"hidden sm:flex h-8 sm:h-9 text-xs sm:text-sm",children:s.jsx(ve,{to:"/auth?mode=signin",children:"Se connecter"})}),s.jsx(U,{asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 text-xs px-3",children:s.jsx(ve,{to:"/auth?mode=signin",children:"Connexion"})}),s.jsx(U,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-4",children:s.jsx(ve,{to:"/auth?mode=signup",children:"Rejoindre"})})]}),s.jsxs(Ch,{children:[s.jsx(Th,{asChild:!0,className:"sm:hidden",children:s.jsx(U,{className:"p-2 text-foreground hover:text-primary transition-colors sm:hidden","aria-label":"Menu mobile",children:s.jsx(fQ,{className:"w-4 h-4"})})}),s.jsxs(fu,{className:"w-56",align:"end",children:[s.jsxs(nt,{onClick:()=>l(o==="dark"?"light":"dark"),className:"cursor-pointer",children:[s.jsxs("div",{className:"relative mr-2",children:[s.jsx(xT,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(mT,{className:"absolute top-0 left-0 h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),"Changer le thme"]}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?category=electronics",className:"cursor-pointer",children:"lectronique"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?category=books",className:"cursor-pointer",children:"Livres & Cours"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?category=furniture",className:"cursor-pointer",children:"Mobilier"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/housing/listings",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?category=services",className:"cursor-pointer",children:"Services tudiants"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/jobs",className:"cursor-pointer",children:"Jobs & Stages"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre tudiants"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & changes"})}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/create",className:"cursor-pointer",children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(vT,{className:"w-4 h-4 mr-2"}),"Panier",w>0&&s.jsx(le,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:w>99?"99+":w})]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Messages",_>0&&s.jsx(le,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:_>99?"99+":_})]})}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(sn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsx(ve,{to:"/integration-test",className:"cursor-pointer",children:" Test Intgration"})})]}),!t&&s.jsxs(s.Fragment,{children:[s.jsx(Ur,{}),s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:"/auth?mode=signin",className:"cursor-pointer",children:[s.jsx(on,{className:"w-4 h-4 mr-2"}),"Se connecter"]})})]})]})]})]})]})})})]})},dse=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto w-full overflow-x-hidden",children:s.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-8 sm:py-12 max-w-full overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex flex-col justify-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/logoBoxetu.svg",alt:"BOXETU",className:"h-6 sm:h-7 w-auto"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-left",children:"tudie, change & conomise"})]})}),s.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:"La premire plateforme d'change entre tudiants vrifis. Achetez, vendez, donnez et changez en toute scurit au sein de votre communaut universitaire."}),s.jsxs("div",{className:"flex space-x-3 sm:space-x-4",children:[s.jsx("a",{href:"https://facebook.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(oQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx("a",{href:"https://twitter.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(NQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx("a",{href:"https://instagram.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(uQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Navigation"}),s.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[s.jsx("li",{children:s.jsx(ve,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(ve,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Dons entre tudiants"})}),s.jsx("li",{children:s.jsx(ve,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Troc & changes"})}),s.jsx("li",{children:s.jsx(ve,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(ve,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Comment a marche"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Catgories populaires"}),s.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[s.jsx("li",{children:s.jsx(ve,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(ve,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"lectronique"})}),s.jsx("li",{children:s.jsx(ve,{to:"/housing",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(ve,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Services tudiants"})}),s.jsx("li",{children:s.jsx(ve,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Scurit & Confiance"}),s.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),s.jsx("span",{children:"tudiants 100% vrifis"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(Ws,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),s.jsx("span",{children:"Impact cologique mesur"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(Vr,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"break-all",children:"support@boxetu.fr"})]})]}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(ve,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Conseils de scurit"}),s.jsx(ve,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Processus de vrification"}),s.jsx(ve,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Rgles de la communaut"}),s.jsx(ve,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Centre d'aide"})]})]})]}),s.jsx("div",{className:"border-t border-border mt-6 sm:mt-8 pt-6 sm:pt-8",children:s.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center",children:[s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:" 2024 BOXETU. Tous droits rservs."}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Plateforme ddie aux tudiants vrifis."})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row gap-3 sm:gap-6 justify-center sm:justify-end",children:[s.jsx(ve,{to:"/terms",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Conditions d'utilisation"}),s.jsx(ve,{to:"/privacy",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Politique de confidentialit"}),s.jsx(ve,{to:"/cookies",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@boxetu.fr",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1 flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(Mn,{className:"w-3 h-3"}),"Contact"]})]})]})})]})}),vv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(vv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=vv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},GT=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Y0=t=>{var r,n,i,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:GT(e.createdAt),updatedAt:GT(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((r=e.location)==null?void 0:r.city)||"Paris",state:((n=e.location)==null?void 0:n.state)||"le-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Universit non spcifie",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},vm=lm((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(r={},n=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!n&&!a)){t({loading:!0});try{let o=$t(It(be,"listings"),ev("createdAt","desc"),qs(20));!n&&a&&(o=$t(o,oH(a)));const l=await rr(o);let c=l.docs.map(Y0);if(r.category&&r.category!=="all"&&(c=c.filter(d=>d.category===r.category)),r.minPrice!==void 0&&(c=c.filter(d=>d.price>=r.minPrice)),r.maxPrice!==void 0&&(c=c.filter(d=>d.price<=r.maxPrice)),r.query){const d=r.query.toLowerCase();c=c.filter(h=>{var m;return h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d)||((m=h.tags)==null?void 0:m.some(g=>g.toLowerCase().includes(d)))})}if(r.condition&&r.condition.length>0&&(c=c.filter(d=>r.condition.includes(d.condition))),r.sortBy)switch(r.sortBy){case"price-asc":c.sort((d,h)=>d.price-h.price);break;case"price-desc":c.sort((d,h)=>h.price-d.price);break;case"date":default:c.sort((d,h)=>new Date(h.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:n?c:[...i,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),ue.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log(" Fetching featured listings...");const r=$t(It(be,"listings"),ev("createdAt","desc"),qs(6)),n=await rr(r);console.log(` Found ${n.docs.length} documents`);const i=n.docs.map((a,o)=>{try{console.log(` Processing document ${o+1}:`,a.id);const l=Y0(a);return console.log(` Successfully converted listing: ${l.title}`),l}catch(l){return console.error(` Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas tre affiche pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"le-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Universit non spcifie",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(` Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(r){console.error(" Error fetching featured listings:",r),t({featuredListings:[]})}},fetchListingById:async r=>{t({loading:!0});try{const n=Ze(be,"listings",r),i=await On(n);if(i.exists()){const a=Y0(i);await yr(n,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),ue.error("Annonce introuvable")}catch(n){console.error("Error fetching listing:",n),ue.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async r=>{var n,i,a,o,l,c;try{const u=vv({...r,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((n=r.location)==null?void 0:n.city)||"Paris",state:((i=r.location)==null?void 0:i.state)||"le-de-France",country:((a=r.location)==null?void 0:a.country)||"France",campus:((o=r.location)==null?void 0:o.campus)||null,university:((l=r.location)==null?void 0:l.university)||null,coordinates:((c=r.location)==null?void 0:c.coordinates)||null},currency:r.currency||"EUR",images:r.images||[],tags:r.tags||[],condition:r.condition||"good",transactionType:r.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Du(It(be,"listings"),u);return ue.success("Annonce cre avec succs !"),d.id}catch(u){throw console.error("Error creating listing:",u),ue.error("Erreur lors de la cration de l'annonce"),u}},updateListing:async(r,n)=>{try{const i=Ze(be,"listings",r),a=vv({...n,updatedAt:new Date});await yr(i,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===r?{...u,...n}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===r?{...l,...n}:l}),ue.success("Annonce mise  jour !")}catch(i){throw console.error("Error updating listing:",i),ue.error("Erreur lors de la mise  jour"),i}},deleteListing:async r=>{try{await Pu(Ze(be,"listings",r));const{listings:n}=e(),i=n.filter(a=>a.id!==r);t({listings:i}),ue.success("Annonce supprime !")}catch(n){throw console.error("Error deleting listing:",n),ue.error("Erreur lors de la suppression"),n}},searchListings:async r=>{await e().fetchListings(r,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),KT=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},p3=lm((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async r=>{if(r){t({loading:!0});try{const n=$t(It(be,"favorites"),Yt("userId","==",r),qs(100)),i=await rr(n),a=[],o=new Set;i.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:KT(c.createdAt),updatedAt:KT(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(n){console.error("Erreur lors du chargement des favoris:",n),ue.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(r,n)=>{var i;if(!(!r||!n))try{if(e().userFavoriteIds.has(n.id)){ue.info("Dj dans vos favoris");return}const a={userId:r,listingId:n.id,listingTitle:n.title,listingPrice:n.price,listingImage:((i=n.images)==null?void 0:i[0])||null,listingCategory:n.category,listingTransactionType:n.transactionType,sellerName:n.sellerName,sellerUniversity:n.sellerUniversity,notes:"",tags:n.tags||[],createdAt:Pr(),updatedAt:Pr()},l={id:(await Du(It(be,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(n.id),t({favorites:[l,...c],userFavoriteIds:d});try{await yr(Ze(be,"listings",n.id),{likes:(n.likes||0)+1})}catch(h){console.error("Erreur lors de la mise  jour du compteur de likes:",h)}ue.success("Ajout aux favoris ")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),ue.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(r,n)=>{if(!(!r||!n))try{const i=$t(It(be,"favorites"),Yt("userId","==",r),Yt("listingId","==",n)),a=await rr(i);if(a.empty){ue.info("Pas dans vos favoris");return}const o=a.docs[0];await Pu(Ze(be,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(n),t({favorites:l.filter(d=>d.listingId!==n),userFavoriteIds:u});try{const d=Ze(be,"listings",n),h=await rr($t(It(be,"listings"),Yt("__name__","==",n)));if(!h.empty){const m=h.docs[0].data().likes||0;await yr(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise  jour du compteur de likes:",d)}ue.success("Retir des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),ue.error("Erreur lors de la suppression des favoris")}},isFavorite:r=>e().userFavoriteIds.has(r),toggleFavorite:async(r,n)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(n.id)?await o(r,n.id):await a(r,n)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),g3=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const{currentUser:i}=Ot(),{isFavorite:a,toggleFavorite:o}=p3(),l=Hn(),c=a(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!i){ue.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(i.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(U,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(sn,{className:`w-4 h-4 ${c?"fill-current":""}`})})},hse={borderRadius:"50%",aspectRatio:"1/1",minHeight:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",padding:0,overflow:"hidden",flexShrink:0},v3=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const i=async l=>{l.preventDefault(),l.stopPropagation();const c={title:t.title,text:`Dcouvrez cette annonce sur BOXETU: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),ue.success("Lien copi dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return{width:"32px",height:"32px"};case"lg":return{width:"40px",height:"40px"};default:return{width:"36px",height:"36px"}}},o=()=>{switch(e){case"sm":return 14;case"lg":return 20;default:return 16}};return s.jsx("button",{onClick:i,className:`hover:bg-gray-100 ${n}`,style:{...hse,...a()},"aria-label":"Partager",type:"button",children:s.jsx($1,{size:o(),strokeWidth:2})})};function Ge(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Wn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function vn(t,e){const r=Ge(t);return isNaN(e)?Wn(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function ei(t,e){const r=Ge(t);if(isNaN(e))return Wn(t,NaN);if(!e)return r;const n=r.getDate(),i=Wn(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const dN=6048e5,fse=864e5,Sp=43200,YT=1440;let mse={};function fd(){return mse}function ki(t,e){var l,c,u,d;const r=fd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ge(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function $l(t){return ki(t,{weekStartsOn:1})}function x3(t){const e=Ge(t),r=e.getFullYear(),n=Wn(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=$l(n),a=Wn(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=$l(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Uu(t){const e=Ge(t);return e.setHours(0,0,0,0),e}function $u(t){const e=Ge(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function mi(t,e){const r=Uu(t),n=Uu(e),i=+r-$u(r),a=+n-$u(n);return Math.round((i-a)/fse)}function pse(t){const e=x3(t),r=Wn(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),$l(r)}function i_(t,e){const r=e*7;return vn(t,r)}function gse(t,e){return ei(t,e*12)}function vse(t){let e;return t.forEach(function(r){const n=Ge(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function xse(t){let e;return t.forEach(r=>{const n=Ge(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function ag(t,e){const r=Ge(t),n=Ge(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function yse(t){return Wn(t,Date.now())}function Ln(t,e){const r=Uu(t),n=Uu(e);return+r==+n}function hN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wse(t){if(!hN(t)&&typeof t!="number")return!1;const e=Ge(t);return!isNaN(Number(e))}function zu(t,e){const r=Ge(t),n=Ge(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function bse(t,e,r){const n=ki(t,r),i=ki(e,r),a=+n-$u(n),o=+i-$u(i);return Math.round((a-o)/dN)}function _se(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function jse(t,e){return+Ge(t)-+Ge(e)}function Nse(t){const e=Ge(t);return e.setHours(23,59,59,999),e}function ny(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Sse(t){const e=Ge(t);return+Nse(e)==+ny(e)}function Ese(t,e){const r=Ge(t),n=Ge(e),i=ag(r,n),a=Math.abs(zu(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let l=ag(r,n)===-i;Sse(Ge(t))&&a===1&&ag(t,n)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function Cse(t,e,r){const n=jse(t,e)/1e3;return _se(r==null?void 0:r.roundingMethod)(n)}function Bn(t){const e=Ge(t);return e.setDate(1),e.setHours(0,0,0,0),e}function y3(t){const e=Ge(t),r=Wn(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function fN(t,e){var l,c,u,d;const r=fd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ge(t),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function w3(t){return fN(t,{weekStartsOn:1})}const Tse={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kse=(t,e,r)=>{let n;const i=Tse[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function mu(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Ise={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ase={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rse={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pse={date:mu({formats:Ise,defaultWidth:"full"}),time:mu({formats:Ase,defaultWidth:"full"}),dateTime:mu({formats:Rse,defaultWidth:"full"})},Dse={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ose=(t,e,r,n)=>Dse[t];function di(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Mse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Use={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$se={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zse=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Bse={ordinalNumber:zse,era:di({values:Mse,defaultWidth:"wide"}),quarter:di({values:Lse,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:Vse,defaultWidth:"wide"}),day:di({values:Fse,defaultWidth:"wide"}),dayPeriod:di({values:Use,defaultWidth:"wide",formattingValues:$se,defaultFormattingWidth:"wide"})};function hi(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Wse(l,h=>h.test(o)):qse(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function qse(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Wse(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function b3(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const Hse=/^(\d+)(th|st|nd|rd)?/i,Gse=/\d+/i,Kse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yse={any:[/^b/i,/^(a|c)/i]},Jse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xse={any:[/1/i,/2/i,/3/i,/4/i]},Qse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sie={ordinalNumber:b3({matchPattern:Hse,parsePattern:Gse,valueCallback:t=>parseInt(t,10)}),era:hi({matchPatterns:Kse,defaultMatchWidth:"wide",parsePatterns:Yse,defaultParseWidth:"any"}),quarter:hi({matchPatterns:Jse,defaultMatchWidth:"wide",parsePatterns:Xse,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Qse,defaultMatchWidth:"wide",parsePatterns:Zse,defaultParseWidth:"any"}),day:hi({matchPatterns:eie,defaultMatchWidth:"wide",parsePatterns:tie,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:rie,defaultMatchWidth:"any",parsePatterns:nie,defaultParseWidth:"any"})},mN={code:"en-US",formatDistance:kse,formatLong:Pse,formatRelative:Ose,localize:Bse,match:sie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iie(t){const e=Ge(t);return mi(e,y3(e))+1}function _3(t){const e=Ge(t),r=+$l(e)-+pse(e);return Math.round(r/dN)+1}function j3(t,e){var d,h,m,g;const r=Ge(t),n=r.getFullYear(),i=fd(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Wn(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=ki(o,e),c=Wn(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=ki(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function aie(t,e){var l,c,u,d;const r=fd(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=j3(t,e),a=Wn(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),ki(a,e)}function N3(t,e){const r=Ge(t),n=+ki(r,e)-+aie(r,e);return Math.round(n/dN)+1}function Rt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Va={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Rt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Rt(r+1,2)},d(t,e){return Rt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Rt(t.getHours()%12||12,e.length)},H(t,e){return Rt(t.getHours(),e.length)},m(t,e){return Rt(t.getMinutes(),e.length)},s(t,e){return Rt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Rt(i,e.length)}},Ec={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},JT={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Va.y(t,e)},Y:function(t,e,r,n){const i=j3(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Rt(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Rt(a,e.length)},R:function(t,e){const r=x3(t);return Rt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Rt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Rt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Rt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Va.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Rt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=N3(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Rt(i,e.length)},I:function(t,e,r){const n=_3(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Rt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Va.d(t,e)},D:function(t,e,r){const n=iie(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Rt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Rt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Rt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Rt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Ec.noon:n===0?i=Ec.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Ec.evening:n>=12?i=Ec.afternoon:n>=4?i=Ec.morning:i=Ec.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Va.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Va.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Rt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Rt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Va.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Va.s(t,e)},S:function(t,e){return Va.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return QT(n);case"XXXX":case"XX":return cl(n);case"XXXXX":case"XXX":default:return cl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return QT(n);case"xxxx":case"xx":return cl(n);case"xxxxx":case"xxx":default:return cl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+XT(n,":");case"OOOO":default:return"GMT"+cl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+XT(n,":");case"zzzz":default:return"GMT"+cl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Rt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Rt(n,e.length)}};function XT(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Rt(a,2)}function QT(t,e){return t%60===0?(t>0?"-":"+")+Rt(Math.abs(t)/60,2):cl(t,e)}function cl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Rt(Math.trunc(n/60),2),a=Rt(n%60,2);return r+i+e+a}const ZT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},S3=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},oie=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return ZT(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",ZT(n,e)).replace("{{time}}",S3(i,e))},lie={p:S3,P:oie},cie=/^D+$/,uie=/^Y+$/,die=["D","DD","YY","YYYY"];function hie(t){return cie.test(t)}function fie(t){return uie.test(t)}function mie(t,e,r){const n=pie(t,e,r);if(console.warn(n),die.includes(t))throw new RangeError(n)}function pie(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xie=/^'([^]*?)'?$/,yie=/''/g,wie=/[a-zA-Z]/;function is(t,e,r){var d,h,m,g,x,y,_,b;const n=fd(),i=(r==null?void 0:r.locale)??n.locale??mN,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((b=(_=n.locale)==null?void 0:_.options)==null?void 0:b.weekStartsOn)??0,l=Ge(t);if(!wse(l))throw new RangeError("Invalid time value");let c=e.match(vie).map(v=>{const w=v[0];if(w==="p"||w==="P"){const E=lie[w];return E(v,i.formatLong)}return v}).join("").match(gie).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:bie(v)};if(JT[w])return{isToken:!0,value:v};if(w.match(wie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const w=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&fie(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&hie(w))&&mie(w,e,String(t));const E=JT[w[0]];return E(l,w,i.localize,u)}).join("")}function bie(t){const e=t.match(xie);return e?e[1].replace(yie,"'"):t}function _ie(t,e,r){const n=fd(),i=(r==null?void 0:r.locale)??n.locale??mN,a=2520,o=ag(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ge(e),u=Ge(t)):(c=Ge(t),u=Ge(e));const d=Cse(u,c),h=($u(u)-$u(c))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<YT){const x=Math.round(m/60);return i.formatDistance("aboutXHours",x,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<Sp){const x=Math.round(m/YT);return i.formatDistance("xDays",x,l)}else if(m<Sp*2)return g=Math.round(m/Sp),i.formatDistance("aboutXMonths",g,l)}if(g=Ese(u,c),g<12){const x=Math.round(m/Sp);return i.formatDistance("xMonths",x,l)}else{const x=g%12,y=Math.trunc(g/12);return x<3?i.formatDistance("aboutXYears",y,l):x<9?i.formatDistance("overXYears",y,l):i.formatDistance("almostXYears",y+1,l)}}function cc(t,e){return _ie(t,yse(t),e)}function jie(t){const e=Ge(t),r=e.getFullYear(),n=e.getMonth(),i=Wn(t,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function Nie(t){return Math.trunc(+Ge(t)/1e3)}function Sie(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function Eie(t,e){return bse(Sie(t),Bn(t),e)+1}function a_(t,e){const r=Ge(t),n=Ge(e);return r.getTime()>n.getTime()}function E3(t,e){const r=Ge(t),n=Ge(e);return+r<+n}function pN(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Cie(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()}function J0(t,e){return vn(t,-e)}function X0(t,e){const r=Ge(t),n=r.getFullYear(),i=r.getDate(),a=Wn(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const o=jie(a);return r.setMonth(e,Math.min(i,o)),r}function ek(t,e){const r=Ge(t);return isNaN(+r)?Wn(t,NaN):(r.setFullYear(e),r)}const Tie={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},kie=(t,e,r)=>{let n;const i=Tie[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},Iie={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Aie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Rie={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pie={date:mu({formats:Iie,defaultWidth:"full"}),time:mu({formats:Aie,defaultWidth:"full"}),dateTime:mu({formats:Rie,defaultWidth:"full"})},Die={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},Oie=(t,e,r,n)=>Die[t],Mie={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},Lie={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},Vie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Fie={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Uie={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},$ie=(t,e)=>{const r=Number(t),n=e==null?void 0:e.unit;if(r===0)return"0";const i=["year","week","hour","minute","second"];let a;return r===1?a=n&&i.includes(n)?"re":"er":a="me",r+a},zie=["MMM","MMMM"],Bie={preprocessor:(t,e)=>t.getDate()===1||!e.some(n=>n.isToken&&zie.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:$ie,era:di({values:Mie,defaultWidth:"wide"}),quarter:di({values:Lie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:Vie,defaultWidth:"wide"}),day:di({values:Fie,defaultWidth:"wide"}),dayPeriod:di({values:Uie,defaultWidth:"wide"})},qie=/^(\d+)(ime|re|me|er|e)?/i,Wie=/\d+/i,Hie={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},Gie={any:[/^av/i,/^ap/i]},Kie={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},Yie={any:[/1/i,/2/i,/3/i,/4/i]},Jie={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},Xie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qie={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Zie={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},eae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},tae={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},rae={ordinalNumber:b3({matchPattern:qie,parsePattern:Wie,valueCallback:t=>parseInt(t)}),era:hi({matchPatterns:Hie,defaultMatchWidth:"wide",parsePatterns:Gie,defaultParseWidth:"any"}),quarter:hi({matchPatterns:Kie,defaultMatchWidth:"wide",parsePatterns:Yie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Jie,defaultMatchWidth:"wide",parsePatterns:Xie,defaultParseWidth:"any"}),day:hi({matchPatterns:Qie,defaultMatchWidth:"wide",parsePatterns:Zie,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:eae,defaultMatchWidth:"any",parsePatterns:tae,defaultParseWidth:"any"})},bs={code:"fr",formatDistance:kie,formatLong:Pie,formatRelative:Oie,localize:Bie,match:rae,options:{weekStartsOn:1,firstWeekContainsDate:4}},Bu=({listing:t})=>{var g,x,y,_,b,v;const e=({className:w})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:w}),r=({className:w})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:w}),n=(w,E)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"change";const C=E||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:C}).format(w)}catch{return`${w} `}},i=w=>{switch(w){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-blue-100 text-blue-700 border-blue-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},a=w=>{switch(w){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon tat";case"fair":return"tat correct";case"poor":return"Mauvais tat";default:return w}},o=()=>{switch(t.transactionType){case"donation":return s.jsx(e,{className:"w-3 h-3"});case"exchange":return s.jsx(r,{className:"w-3 h-3"});default:return null}},l=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},c=w=>{try{let E;if(!w)return"Date inconnue";if(w instanceof Date)E=w;else if(typeof w=="string"||typeof w=="number")E=new Date(w);else if(w&&typeof w.toDate=="function")E=w.toDate();else if(w&&typeof w=="object"&&w.seconds)E=new Date(w.seconds*1e3);else return"Date inconnue";return isNaN(E.getTime())?"Date inconnue":cc(E,{addSuffix:!0,locale:bs})}catch(E){return console.warn("Error formatting date:",E),"Date inconnue"}},u=t.price||0,d=t.currency||"EUR",h=t.condition||"good",m=t.transactionType||"sale";return s.jsxs(H,{className:"group relative bg-card rounded-xl border border-border hover:border-accent/30 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(ve,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-800",children:[s.jsx("img",{src:((g=t.images)==null?void 0:g[0])||"/placeholder.jpg",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(g3,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"}),s.jsx(v3,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"})]}),m!=="sale"&&s.jsxs(le,{className:`absolute top-3 left-3 ${l()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[o(),s.jsx("span",{className:"ml-1.5 text-sm",children:m==="donation"?"Don":"Troc"})]}),m==="sale"&&s.jsx(le,{className:`absolute top-3 left-3 ${i(h)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:a(h)}),t.environmentalImpact&&s.jsxs(le,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(Ws,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(K,{className:"p-6 space-y-4",children:[s.jsxs(ve,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${m==="donation"?"text-green-600":m==="exchange"?"text-purple-600":"text-foreground"}`,children:n(u,d)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground bg-muted px-2.5 py-1 rounded-full",children:[s.jsx(va,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-foreground line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),m==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-purple-50/80 dark:bg-purple-500/10 px-3 py-2 rounded-lg mb-4",children:[s.jsx(r,{className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(ls,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((x=t.location)==null?void 0:x.campus)||((y=t.location)!=null&&y.city&&((_=t.location)!=null&&_.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spcifie")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(At,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"whitespace-nowrap",children:c(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(_a,{className:"w-9 h-9 border-2 border-border",children:[s.jsx(ja,{src:t.sellerAvatar}),s.jsx(Na,{className:"text-sm bg-muted text-muted-foreground font-medium",children:((v=(b=t.sellerName)==null?void 0:b[0])==null?void 0:v.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(qe,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-muted-foreground truncate block text-left",children:t.sellerUniversity||"Universit non spcifie"})]})]}),t.aiPriceEstimate&&m==="sale"&&s.jsx(le,{className:"bg-green-50 dark:bg-emerald-900/20 text-green-700 dark:text-emerald-300 border-green-200 dark:border-emerald-800 hover:bg-green-100 dark:hover:bg-emerald-900/30 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste "})]})]})]})};var C3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tk=Ce.createContext&&Ce.createContext(C3),nae=["attr","size","title"];function sae(t,e){if(t==null)return{};var r=iae(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xv(){return xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xv.apply(this,arguments)}function rk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(r),!0).forEach(function(n){aae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aae(t,e,r){return e=oae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oae(t){var e=lae(t,"string");return typeof e=="symbol"?e:e+""}function lae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T3(t){return t&&t.map((e,r)=>Ce.createElement(e.tag,yv({key:r},e.attr),T3(e.child)))}function qo(t){return e=>Ce.createElement(cae,xv({attr:yv({},t.attr)},e),T3(t.child))}function cae(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=sae(t,nae),l=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",xv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:yv(yv({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Ce.createElement("title",null,a),t.children)};return tk!==void 0?Ce.createElement(tk.Consumer,null,r=>e(r)):e(C3)}function uae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function dae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function hae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function fae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function mae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function pae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function gae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function vae(t){return qo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const xae=()=>{const[t,e]=p.useState(""),r=Hn(),n=i=>{i.preventDefault(),t.trim()&&r(`/listings?search=${encodeURIComponent(t.trim())}`)};return s.jsx("form",{onSubmit:n,className:"w-full max-w-2xl mx-auto",children:s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(pr,{className:"absolute left-3 text-muted-foreground w-4 h-4"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher des annonces, services, logements...",value:t,onChange:i=>e(i.target.value),className:"pl-10 pr-24 h-12 text-base"}),s.jsx(U,{type:"submit",className:"absolute right-1 h-10 px-4 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:"Rechercher"})]})})},yae={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/refresh.svg"},wae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:t}),bae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Give Up",className:t}),_ae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Exchange",className:t}),jae=[{id:"electronics",name:"lectronique",icon:fae,color:"text-blue-600",description:"Ordinateurs, tlphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:dae,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:uae,color:"text-blue-600",description:"Meubles, dco, lectromnager"},{id:"housing",name:"Logement",icon:hae,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:mae,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:pae,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:vae,color:"text-green-600",description:"Donnez ce dont vous n'avez plus besoin"},{id:"exchange",name:"changes",icon:gae,color:"text-purple-600",description:"changez vos objets contre d'autres"}],Nae=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",link:"/create?type=sell",icon:wae,color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",link:"/create?type=gift",icon:bae,color:"border-2 border-green-500 text-green-50"},{title:"changer facilement",description:"Trouvez des changes quitables",link:"/create?type=swap",icon:_ae,color:"border-2 border-green-500 text-green-50"}],Sae=[{title:"Vrification tudiante",description:"Tous nos utilisateurs sont vrifis avec leur carte tudiante pour garantir une communaut sre et authentique.",icon:qe},{title:"Impact cologique",description:"Chaque achat d'occasion vite la production d'un objet neuf. Suivez votre impact environnemental en temps rel.",icon:Ws},{title:"Communaut locale",description:"Connectez-vous avec des tudiants de votre rgion pour des changes rapides et des rencontres enrichissantes.",icon:_n},{title:"Scurit garantie",description:"Systme de notation et de modration pour assurer des transactions sres et transparentes.",icon:rO}],Eae=()=>{const{currentUser:t}=Ot(),e=Hn(),{featuredListings:r,fetchFeaturedListings:n}=vm();p.useEffect(()=>{n()},[n]);const i=()=>{e(t?"/listings":"/auth")},a=()=>{e(t?"/create":"/auth")},o=()=>{e(t?"/verification":"/auth")};return s.jsx("div",{className:"w-full min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:s.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-hidden",children:[s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 rounded-lg sm:rounded-xl overflow-hidden mb-8",children:s.jsx("div",{className:"w-full py-6 sm:py-8 lg:py-12 px-3 sm:px-6 lg:px-8 overflow-hidden",children:s.jsxs("div",{className:"w-full max-w-4xl mx-auto text-center overflow-hidden",children:[s.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4 lg:mb-6",children:s.jsxs(le,{className:"bg-green-100 text-green-800 border-green-200 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 text-xs sm:text-sm",children:[s.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Communaut 100% tudiants vrifis"}),s.jsx("span",{className:"sm:hidden",children:"tudiants vrifis"})]})}),s.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 lg:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent px-2",children:"La marketplace des tudiants"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground mb-4 sm:mb-6 lg:mb-8 max-w-2xl mx-auto px-2",children:"Achetez, vendez, donnez et changez entre tudiants certifis de votre rgion. Scuris, cologique et pens pour la vie tudiante."}),s.jsx("div",{className:"mb-4 sm:mb-6 lg:mb-8 px-2 sm:px-4",children:s.jsx(xae,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Nae.map((l,c)=>s.jsx(ve,{to:l.link,className:"group",children:s.jsx(H,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(K,{className:"p-3 sm:p-4 text-center",children:[s.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${l.color} rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(l.icon,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),s.jsx("h3",{className:"font-semibold mb-1 text-sm sm:text-base",children:l.title}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:l.description})]})})},c))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center px-2",children:[s.jsx(U,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto text-sm sm:text-base",onClick:i,children:s.jsxs(ve,{to:"/listings",children:["Parcourir les annonces",s.jsx(qb,{className:"w-4 h-4 ml-2"})]})}),s.jsx(U,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto text-sm sm:text-base",onClick:a,children:s.jsx(ve,{to:"/auth?mode=signup",children:"Rejoindre la communaut"})})]})]})})}),s.jsx("section",{className:"py-8 sm:py-10 lg:py-16 px-2 sm:px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-2 sm:mb-3 lg:mb-4",children:"Catgories tudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-6 sm:mb-8 lg:mb-12 max-w-2xl mx-auto text-xs sm:text-sm lg:text-base px-2",children:"Des catgories penses spcifiquement pour la vie tudiante, avec des filtres adapts  vos besoins"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:jae.map(l=>{let c;return l.id==="electronics"?c="/listings?category=electronics":l.id==="books"?c="/listings?category=books":l.id==="furniture"?c="/listings?category=furniture":l.id==="housing"?c="/housing/listings":l.id==="services"?c="/listings?category=services":l.id==="jobs"?c="/jobs":l.id==="donations"?c="/listings?transactionType=donation":l.id==="exchange"?c="/listings?transactionType=exchange":c=`/listings?category=${l.id}`,s.jsx(ve,{to:c,className:"group",children:s.jsx(H,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(K,{className:"p-3 sm:p-4 text-center",children:[s.jsx("img",{src:yae[l.id],alt:l.name,className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 mx-auto mb-2 sm:mb-3"}),s.jsx("h3",{className:"font-semibold text-xs sm:text-sm lg:text-base mb-1",children:l.name}),s.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:l.description})]})})},l.id)})})]})}),r.length>0&&s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto mb-6",children:[s.jsx("div",{className:"text-center sm:text-left",children:s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:"Annonces rcentes"})}),s.jsx(U,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",onClick:i,children:s.jsxs(ve,{to:"/listings",children:["Voir tout",s.jsx(qb,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.slice(0,6).map(l=>s.jsx(Bu,{listing:l},l.id))})]})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base px-2",children:"Une plateforme pense par et pour les tudiants, avec des fonctionnalits uniques pour votre scurit et votre tranquillit d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Sae.map((l,c)=>s.jsx(H,{className:"border-0 shadow-none",children:s.jsx(K,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(l.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-1 sm:mb-2",children:l.title}),s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-muted-foreground",children:l.description})]})]})})},c))})]})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg sm:rounded-xl",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(Ws,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-green-600 mx-auto mb-4 sm:mb-6"}),s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4",children:"Votre impact cologique compte"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-muted-foreground mb-6 sm:mb-8 px-2",children:"Chaque achat d'occasion vite la production d'un objet neuf. Suivez votre impact environnemental et dcouvrez combien de CO vous conomisez grce  vos changes tudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"2.5T"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"CO conomis par la communaut"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"15K"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Objets donns cette anne"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"8K"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"tudiants engags"})]})]}),s.jsx(U,{size:"lg",variant:"outline",asChild:!0,className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white w-full sm:w-auto justify-center",onClick:()=>e("/impact"),children:s.jsx(ve,{to:"/impact",className:"cursor-pointer",children:"Dcouvrir mon impact"})})]})})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-primary to-secondary rounded-lg sm:rounded-xl",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(_n,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-white mx-auto mb-4 sm:mb-6"}),s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Rejoignez la communaut tudiante"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-2",children:"Plus de 10 000 tudiants font dj confiance  StudyMarket pour leurs achats, ventes et changes. Rejoignez une communaut sre, vrifie et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[s.jsx(U,{size:"lg",variant:"secondary",asChild:!0,className:"w-full sm:w-auto",onClick:o,children:s.jsxs(ve,{to:"/verification",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Inscription vrifie"]})}),s.jsx(U,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary w-full sm:w-auto",asChild:!0,onClick:i,children:s.jsx(ve,{to:"/listings",children:"Commencer  explorer"})})]})]})})]})})};var xm=t=>t.type==="checkbox",Jc=t=>t instanceof Date,xn=t=>t==null;const k3=t=>typeof t=="object";var jr=t=>!xn(t)&&!Array.isArray(t)&&k3(t)&&!Jc(t),Cae=t=>jr(t)&&t.target?xm(t.target)?t.target.checked:t.target.value:t,Tae=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,kae=(t,e)=>t.has(Tae(e)),Iae=t=>{const e=t.constructor&&t.constructor.prototype;return jr(e)&&e.hasOwnProperty("isPrototypeOf")},gN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(gN&&(t instanceof Blob||t instanceof FileList))&&(r||jr(t)))if(e=r?[]:{},!r&&!Iae(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=ms(t[n]));else return t;return e}var sy=t=>Array.isArray(t)?t.filter(Boolean):[],hr=t=>t===void 0,Te=(t,e,r)=>{if(!e||!jr(t))return r;const n=sy(e.split(/[,[\].]+?/)).reduce((i,a)=>xn(i)?i:i[a],t);return hr(n)||n===t?hr(t[e])?r:t[e]:n},li=t=>typeof t=="boolean",vN=t=>/^\w*$/.test(t),I3=t=>sy(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Mt=(t,e,r)=>{let n=-1;const i=vN(e)?[e]:I3(e),a=i.length,o=a-1;for(;++n<a;){const l=i[n];let c=r;if(n!==o){const u=t[l];c=jr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const nk={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ce.createContext(null);var Aae=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Vs.all&&(e._proxyFormState[o]=!n||Vs.all),t[o]}});return i},Tn=t=>jr(t)&&!Object.keys(t).length,Rae=(t,e,r,n)=>{r(t);const{name:i,...a}=t;return Tn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===Vs.all)},og=t=>Array.isArray(t)?t:[t];function Pae(t){const e=Ce.useRef(t);e.current=t,Ce.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}var pi=t=>typeof t=="string",Dae=(t,e,r,n,i)=>pi(t)?(n&&e.watch.add(t),Te(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Te(r,a))):(n&&(e.watchAll=!0),r),A3=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},sk=t=>({isOnSubmit:!t||t===Vs.onSubmit,isOnBlur:t===Vs.onBlur,isOnChange:t===Vs.onChange,isOnAll:t===Vs.all,isOnTouch:t===Vs.onTouched}),ik=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const kh=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const a=Te(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(kh(l,e))break}else if(jr(l)&&kh(l,e))break}}};var Oae=(t,e,r)=>{const n=og(Te(t,r));return Mt(n,"root",e[r]),Mt(t,r,n),t},xN=t=>t.type==="file",ea=t=>typeof t=="function",wv=t=>{if(!gN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},lg=t=>pi(t),yN=t=>t.type==="radio",bv=t=>t instanceof RegExp;const ak={value:!1,isValid:!1},ok={value:!0,isValid:!0};var R3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!hr(t[0].attributes.value)?hr(t[0].value)||t[0].value===""?ok:{value:t[0].value,isValid:!0}:ok:ak}return ak};const lk={isValid:!1,value:null};var P3=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,lk):lk;function ck(t,e,r="validate"){if(lg(t)||Array.isArray(t)&&t.every(lg)||li(t)&&!t)return{type:r,message:lg(t)?t:"",ref:e}}var Cc=t=>jr(t)&&!bv(t)?t:{value:t,message:""},uk=async(t,e,r,n,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:m,validate:g,name:x,valueAsNumber:y,mount:_,disabled:b}=t._f,v=Te(e,x);if(!_||b)return{};const w=o?o[0]:a,E=D=>{n&&w.reportValidity&&(w.setCustomValidity(li(D)?"":D||""),w.reportValidity())},C={},I=yN(a),T=xm(a),k=I||T,R=(y||xN(a))&&hr(a.value)&&hr(v)||wv(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,j=A3.bind(null,x,r,C),P=(D,S,M,$=Fi.maxLength,q=Fi.minLength)=>{const F=D?S:M;C[x]={type:D?$:q,message:F,ref:a,...j(D?$:q,F)}};if(i?!Array.isArray(v)||!v.length:l&&(!k&&(R||xn(v))||li(v)&&!v||T&&!R3(o).isValid||I&&!P3(o).isValid)){const{value:D,message:S}=lg(l)?{value:!!l,message:l}:Cc(l);if(D&&(C[x]={type:Fi.required,message:S,ref:w,...j(Fi.required,S)},!r))return E(S),C}if(!R&&(!xn(d)||!xn(h))){let D,S;const M=Cc(h),$=Cc(d);if(!xn(v)&&!isNaN(v)){const q=a.valueAsNumber||v&&+v;xn(M.value)||(D=q>M.value),xn($.value)||(S=q<$.value)}else{const q=a.valueAsDate||new Date(v),F=z=>new Date(new Date().toDateString()+" "+z),L=a.type=="time",W=a.type=="week";pi(M.value)&&v&&(D=L?F(v)>F(M.value):W?v>M.value:q>new Date(M.value)),pi($.value)&&v&&(S=L?F(v)<F($.value):W?v<$.value:q<new Date($.value))}if((D||S)&&(P(!!D,M.message,$.message,Fi.max,Fi.min),!r))return E(C[x].message),C}if((c||u)&&!R&&(pi(v)||i&&Array.isArray(v))){const D=Cc(c),S=Cc(u),M=!xn(D.value)&&v.length>+D.value,$=!xn(S.value)&&v.length<+S.value;if((M||$)&&(P(M,D.message,S.message),!r))return E(C[x].message),C}if(m&&!R&&pi(v)){const{value:D,message:S}=Cc(m);if(bv(D)&&!v.match(D)&&(C[x]={type:Fi.pattern,message:S,ref:a,...j(Fi.pattern,S)},!r))return E(S),C}if(g){if(ea(g)){const D=await g(v,e),S=ck(D,w);if(S&&(C[x]={...S,...j(Fi.validate,S.message)},!r))return E(S.message),C}else if(jr(g)){let D={};for(const S in g){if(!Tn(D)&&!r)break;const M=ck(await g[S](v,e),w,S);M&&(D={...M,...j(S,M.message)},E(M.message),r&&(C[x]=D))}if(!Tn(D)&&(C[x]={ref:w,...D},!r))return C}}return E(!0),C};function Mae(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=hr(t)?n++:t[e[n++]];return t}function Lae(t){for(const e in t)if(t.hasOwnProperty(e)&&!hr(t[e]))return!1;return!0}function Er(t,e){const r=Array.isArray(e)?e:vN(e)?[e]:I3(e),n=r.length===1?t:Mae(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(jr(n)&&Tn(n)||Array.isArray(n)&&Lae(n))&&Er(t,r.slice(0,-1)),t}var Q0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},_v=t=>xn(t)||!k3(t);function Za(t,e){if(_v(t)||_v(e))return t===e;if(Jc(t)&&Jc(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Jc(a)&&Jc(o)||jr(a)&&jr(o)||Array.isArray(a)&&Array.isArray(o)?!Za(a,o):a!==o)return!1}}return!0}var D3=t=>t.type==="select-multiple",Vae=t=>yN(t)||xm(t),Z0=t=>wv(t)&&t.isConnected,O3=t=>{for(const e in t)if(ea(t[e]))return!0;return!1};function jv(t,e={}){const r=Array.isArray(t);if(jr(t)||r)for(const n in t)Array.isArray(t[n])||jr(t[n])&&!O3(t[n])?(e[n]=Array.isArray(t[n])?[]:{},jv(t[n],e[n])):xn(t[n])||(e[n]=!0);return e}function M3(t,e,r){const n=Array.isArray(t);if(jr(t)||n)for(const i in t)Array.isArray(t[i])||jr(t[i])&&!O3(t[i])?hr(e)||_v(r[i])?r[i]=Array.isArray(t[i])?jv(t[i],[]):{...jv(t[i])}:M3(t[i],xn(e)?{}:e[i],r[i]):r[i]=!Za(t[i],e[i]);return r}var Ep=(t,e)=>M3(t,e,jv(e)),L3=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>hr(t)?t:e?t===""?NaN:t&&+t:r&&pi(t)?new Date(t):n?n(t):t;function ew(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return xN(e)?e.files:yN(e)?P3(t.refs).value:D3(e)?[...e.selectedOptions].map(({value:r})=>r):xm(e)?R3(t.refs).value:L3(hr(e.value)?t.ref.value:e.value,t)}var Fae=(t,e,r,n)=>{const i={};for(const a of t){const o=Te(e,a);o&&Mt(i,a,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Bd=t=>hr(t)?t:bv(t)?t.source:jr(t)?bv(t.value)?t.value.source:t.value:t;const dk="AsyncFunction";var Uae=t=>(!t||!t.validate)&&!!(ea(t.validate)&&t.validate.constructor.name===dk||jr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dk)),$ae=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function hk(t,e,r){const n=Te(t,r);if(n||vN(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=Te(e,a),l=Te(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:r}}var zae=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Bae=(t,e)=>!sy(Te(t,e)).length&&Er(t,e);const qae={mode:Vs.onSubmit,reValidateMode:Vs.onChange,shouldFocusError:!0};function Wae(t={}){let e={...qae,...t},r={submitCount:0,isDirty:!1,isLoading:ea(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=jr(e.defaultValues)||jr(e.values)?ms(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:ms(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Q0(),array:Q0(),state:Q0()},m=sk(e.mode),g=sk(e.reValidateMode),x=e.criteriaMode===Vs.all,y=V=>B=>{clearTimeout(u),u=setTimeout(V,B)},_=async V=>{if(d.isValid||V){const B=e.resolver?Tn((await k()).errors):await j(n,!0);B!==r.isValid&&h.state.next({isValid:B})}},b=(V,B)=>{(d.isValidating||d.validatingFields)&&((V||Array.from(l.mount)).forEach(J=>{J&&(B?Mt(r.validatingFields,J,B):Er(r.validatingFields,J))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Tn(r.validatingFields)}))},v=(V,B=[],J,je,xe=!0,ce=!0)=>{if(je&&J){if(o.action=!0,ce&&Array.isArray(Te(n,V))){const De=J(Te(n,V),je.argA,je.argB);xe&&Mt(n,V,De)}if(ce&&Array.isArray(Te(r.errors,V))){const De=J(Te(r.errors,V),je.argA,je.argB);xe&&Mt(r.errors,V,De),Bae(r.errors,V)}if(d.touchedFields&&ce&&Array.isArray(Te(r.touchedFields,V))){const De=J(Te(r.touchedFields,V),je.argA,je.argB);xe&&Mt(r.touchedFields,V,De)}d.dirtyFields&&(r.dirtyFields=Ep(i,a)),h.state.next({name:V,isDirty:D(V,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Mt(a,V,B)},w=(V,B)=>{Mt(r.errors,V,B),h.state.next({errors:r.errors})},E=V=>{r.errors=V,h.state.next({errors:r.errors,isValid:!1})},C=(V,B,J,je)=>{const xe=Te(n,V);if(xe){const ce=Te(a,V,hr(J)?Te(i,V):J);hr(ce)||je&&je.defaultChecked||B?Mt(a,V,B?ce:ew(xe._f)):$(V,ce),o.mount&&_()}},I=(V,B,J,je,xe)=>{let ce=!1,De=!1;const St={name:V},gt=!!(Te(n,V)&&Te(n,V)._f&&Te(n,V)._f.disabled);if(!J||je){d.isDirty&&(De=r.isDirty,r.isDirty=St.isDirty=D(),ce=De!==St.isDirty);const wt=gt||Za(Te(i,V),B);De=!!(!gt&&Te(r.dirtyFields,V)),wt||gt?Er(r.dirtyFields,V):Mt(r.dirtyFields,V,!0),St.dirtyFields=r.dirtyFields,ce=ce||d.dirtyFields&&De!==!wt}if(J){const wt=Te(r.touchedFields,V);wt||(Mt(r.touchedFields,V,J),St.touchedFields=r.touchedFields,ce=ce||d.touchedFields&&wt!==J)}return ce&&xe&&h.state.next(St),ce?St:{}},T=(V,B,J,je)=>{const xe=Te(r.errors,V),ce=d.isValid&&li(B)&&r.isValid!==B;if(t.delayError&&J?(c=y(()=>w(V,J)),c(t.delayError)):(clearTimeout(u),c=null,J?Mt(r.errors,V,J):Er(r.errors,V)),(J?!Za(xe,J):xe)||!Tn(je)||ce){const De={...je,...ce&&li(B)?{isValid:B}:{},errors:r.errors,name:V};r={...r,...De},h.state.next(De)}},k=async V=>{b(V,!0);const B=await e.resolver(a,e.context,Fae(V||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return b(V),B},R=async V=>{const{errors:B}=await k(V);if(V)for(const J of V){const je=Te(B,J);je?Mt(r.errors,J,je):Er(r.errors,J)}else r.errors=B;return B},j=async(V,B,J={valid:!0})=>{for(const je in V){const xe=V[je];if(xe){const{_f:ce,...De}=xe;if(ce){const St=l.array.has(ce.name),gt=xe._f&&Uae(xe._f);gt&&d.validatingFields&&b([je],!0);const wt=await uk(xe,a,x,e.shouldUseNativeValidation&&!B,St);if(gt&&d.validatingFields&&b([je]),wt[ce.name]&&(J.valid=!1,B))break;!B&&(Te(wt,ce.name)?St?Oae(r.errors,wt,ce.name):Mt(r.errors,ce.name,wt[ce.name]):Er(r.errors,ce.name))}!Tn(De)&&await j(De,B,J)}}return J.valid},P=()=>{for(const V of l.unMount){const B=Te(n,V);B&&(B._f.refs?B._f.refs.every(J=>!Z0(J)):!Z0(B._f.ref))&&yt(V)}l.unMount=new Set},D=(V,B)=>(V&&B&&Mt(a,V,B),!Za(X(),i)),S=(V,B,J)=>Dae(V,l,{...o.mount?a:hr(B)?i:pi(V)?{[V]:B}:B},J,B),M=V=>sy(Te(o.mount?a:i,V,t.shouldUnregister?Te(i,V,[]):[])),$=(V,B,J={})=>{const je=Te(n,V);let xe=B;if(je){const ce=je._f;ce&&(!ce.disabled&&Mt(a,V,L3(B,ce)),xe=wv(ce.ref)&&xn(B)?"":B,D3(ce.ref)?[...ce.ref.options].forEach(De=>De.selected=xe.includes(De.value)):ce.refs?xm(ce.ref)?ce.refs.length>1?ce.refs.forEach(De=>(!De.defaultChecked||!De.disabled)&&(De.checked=Array.isArray(xe)?!!xe.find(St=>St===De.value):xe===De.value)):ce.refs[0]&&(ce.refs[0].checked=!!xe):ce.refs.forEach(De=>De.checked=De.value===xe):xN(ce.ref)?ce.ref.value="":(ce.ref.value=xe,ce.ref.type||h.values.next({name:V,values:{...a}})))}(J.shouldDirty||J.shouldTouch)&&I(V,xe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&z(V)},q=(V,B,J)=>{for(const je in B){const xe=B[je],ce=`${V}.${je}`,De=Te(n,ce);(l.array.has(V)||!_v(xe)||De&&!De._f)&&!Jc(xe)?q(ce,xe,J):$(ce,xe,J)}},F=(V,B,J={})=>{const je=Te(n,V),xe=l.array.has(V),ce=ms(B);Mt(a,V,ce),xe?(h.array.next({name:V,values:{...a}}),(d.isDirty||d.dirtyFields)&&J.shouldDirty&&h.state.next({name:V,dirtyFields:Ep(i,a),isDirty:D(V,ce)})):je&&!je._f&&!xn(ce)?q(V,ce,J):$(V,ce,J),ik(V,l)&&h.state.next({...r}),h.values.next({name:o.mount?V:void 0,values:{...a}})},L=async V=>{o.mount=!0;const B=V.target;let J=B.name,je=!0;const xe=Te(n,J),ce=()=>B.type?ew(xe._f):Cae(V),De=St=>{je=Number.isNaN(St)||Za(St,Te(a,J,St))};if(xe){let St,gt;const wt=ce(),fs=V.type===nk.BLUR||V.type===nk.FOCUS_OUT,Em=!$ae(xe._f)&&!e.resolver&&!Te(r.errors,J)&&!xe._f.deps||zae(fs,Te(r.touchedFields,J),r.isSubmitted,g,m),dc=ik(J,l,fs);Mt(a,J,wt),fs?(xe._f.onBlur&&xe._f.onBlur(V),c&&c(0)):xe._f.onChange&&xe._f.onChange(V);const gd=I(J,wt,fs,!1),Yo=!Tn(gd)||dc;if(!fs&&h.values.next({name:J,type:V.type,values:{...a}}),Em)return d.isValid&&(t.mode==="onBlur"?fs&&_():_()),Yo&&h.state.next({name:J,...dc?{}:gd});if(!fs&&dc&&h.state.next({...r}),e.resolver){const{errors:vd}=await k([J]);if(De(wt),je){const Cm=hk(r.errors,n,J),hc=hk(vd,n,Cm.name||J);St=hc.error,J=hc.name,gt=Tn(vd)}}else b([J],!0),St=(await uk(xe,a,x,e.shouldUseNativeValidation))[J],b([J]),De(wt),je&&(St?gt=!1:d.isValid&&(gt=await j(n,!0)));je&&(xe._f.deps&&z(xe._f.deps),T(J,gt,St,gd))}},W=(V,B)=>{if(Te(r.errors,B)&&V.focus)return V.focus(),1},z=async(V,B={})=>{let J,je;const xe=og(V);if(e.resolver){const ce=await R(hr(V)?V:xe);J=Tn(ce),je=V?!xe.some(De=>Te(ce,De)):J}else V?(je=(await Promise.all(xe.map(async ce=>{const De=Te(n,ce);return await j(De&&De._f?{[ce]:De}:De)}))).every(Boolean),!(!je&&!r.isValid)&&_()):je=J=await j(n);return h.state.next({...!pi(V)||d.isValid&&J!==r.isValid?{}:{name:V},...e.resolver||!V?{isValid:J}:{},errors:r.errors}),B.shouldFocus&&!je&&kh(n,W,V?xe:l.mount),je},X=V=>{const B={...o.mount?a:i};return hr(V)?B:pi(V)?Te(B,V):V.map(J=>Te(B,J))},se=(V,B)=>({invalid:!!Te((B||r).errors,V),isDirty:!!Te((B||r).dirtyFields,V),error:Te((B||r).errors,V),isValidating:!!Te(r.validatingFields,V),isTouched:!!Te((B||r).touchedFields,V)}),_e=V=>{V&&og(V).forEach(B=>Er(r.errors,B)),h.state.next({errors:V?r.errors:{}})},ot=(V,B,J)=>{const je=(Te(n,V,{_f:{}})._f||{}).ref,xe=Te(r.errors,V)||{},{ref:ce,message:De,type:St,...gt}=xe;Mt(r.errors,V,{...gt,...B,ref:je}),h.state.next({name:V,errors:r.errors,isValid:!1}),J&&J.shouldFocus&&je&&je.focus&&je.focus()},jt=(V,B)=>ea(V)?h.values.subscribe({next:J=>V(S(void 0,B),J)}):S(V,B,!0),yt=(V,B={})=>{for(const J of V?og(V):l.mount)l.mount.delete(J),l.array.delete(J),B.keepValue||(Er(n,J),Er(a,J)),!B.keepError&&Er(r.errors,J),!B.keepDirty&&Er(r.dirtyFields,J),!B.keepTouched&&Er(r.touchedFields,J),!B.keepIsValidating&&Er(r.validatingFields,J),!e.shouldUnregister&&!B.keepDefaultValue&&Er(i,J);h.values.next({values:{...a}}),h.state.next({...r,...B.keepDirty?{isDirty:D()}:{}}),!B.keepIsValid&&_()},Se=({disabled:V,name:B,field:J,fields:je,value:xe})=>{if(li(V)&&o.mount||V){const ce=V?void 0:hr(xe)?ew(J?J._f:Te(je,B)._f):xe;Mt(a,B,ce),I(B,ce,!1,!1,!0)}},tt=(V,B={})=>{let J=Te(n,V);const je=li(B.disabled)||li(t.disabled);return Mt(n,V,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:V}},name:V,mount:!0,...B}}),l.mount.add(V),J?Se({field:J,disabled:li(B.disabled)?B.disabled:t.disabled,name:V,value:B.value}):C(V,!0,B.value),{...je?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:Bd(B.min),max:Bd(B.max),minLength:Bd(B.minLength),maxLength:Bd(B.maxLength),pattern:Bd(B.pattern)}:{},name:V,onChange:L,onBlur:L,ref:xe=>{if(xe){tt(V,B),J=Te(n,V);const ce=hr(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,De=Vae(ce),St=J._f.refs||[];if(De?St.find(gt=>gt===ce):ce===J._f.ref)return;Mt(n,V,{_f:{...J._f,...De?{refs:[...St.filter(Z0),ce,...Array.isArray(Te(i,V))?[{}]:[]],ref:{type:ce.type,name:V}}:{ref:ce}}}),C(V,!1,void 0,ce)}else J=Te(n,V,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(kae(l.array,V)&&o.action)&&l.unMount.add(V)}}},Z=()=>e.shouldFocusError&&kh(n,W,l.mount),ge=V=>{li(V)&&(h.state.next({disabled:V}),kh(n,(B,J)=>{const je=Te(n,J);je&&(B.disabled=je._f.disabled||V,Array.isArray(je._f.refs)&&je._f.refs.forEach(xe=>{xe.disabled=je._f.disabled||V}))},0,!1))},Y=(V,B)=>async J=>{let je;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let xe=ms(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:ce,values:De}=await k();r.errors=ce,xe=De}else await j(n);if(Er(r.errors,"root"),Tn(r.errors)){h.state.next({errors:{}});try{await V(xe,J)}catch(ce){je=ce}}else B&&await B({...r.errors},J),Z(),setTimeout(Z);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tn(r.errors)&&!je,submitCount:r.submitCount+1,errors:r.errors}),je)throw je},ie=(V,B={})=>{Te(n,V)&&(hr(B.defaultValue)?F(V,ms(Te(i,V))):(F(V,B.defaultValue),Mt(i,V,ms(B.defaultValue))),B.keepTouched||Er(r.touchedFields,V),B.keepDirty||(Er(r.dirtyFields,V),r.isDirty=B.defaultValue?D(V,ms(Te(i,V))):D()),B.keepError||(Er(r.errors,V),d.isValid&&_()),h.state.next({...r}))},de=(V,B={})=>{const J=V?ms(V):i,je=ms(J),xe=Tn(V),ce=xe?i:je;if(B.keepDefaultValues||(i=J),!B.keepValues){if(B.keepDirtyValues)for(const De of l.mount)Te(r.dirtyFields,De)?Mt(ce,De,Te(a,De)):F(De,Te(ce,De));else{if(gN&&hr(V))for(const De of l.mount){const St=Te(n,De);if(St&&St._f){const gt=Array.isArray(St._f.refs)?St._f.refs[0]:St._f.ref;if(wv(gt)){const wt=gt.closest("form");if(wt){wt.reset();break}}}}n={}}a=t.shouldUnregister?B.keepDefaultValues?ms(i):{}:ms(ce),h.array.next({values:{...ce}}),h.values.next({values:{...ce}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:xe?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!Za(V,i)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:xe?{}:B.keepDirtyValues?B.keepDefaultValues&&a?Ep(i,a):r.dirtyFields:B.keepDefaultValues&&V?Ep(i,V):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Me=(V,B)=>de(ea(V)?V(a):V,B);return{control:{register:tt,unregister:yt,getFieldState:se,handleSubmit:Y,setError:ot,_executeSchema:k,_getWatch:S,_getDirty:D,_updateValid:_,_removeUnmounted:P,_updateFieldArray:v,_updateDisabledField:Se,_getFieldArray:M,_reset:de,_resetDefaultValues:()=>ea(e.defaultValues)&&e.defaultValues().then(V=>{Me(V,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:V=>{r={...r,...V}},_disableForm:ge,_subjects:h,_proxyFormState:d,_setErrors:E,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(V){o=V},get _defaultValues(){return i},get _names(){return l},set _names(V){l=V},get _formState(){return r},set _formState(V){r=V},get _options(){return e},set _options(V){e={...e,...V}}},trigger:z,register:tt,handleSubmit:Y,watch:jt,setValue:F,getValues:X,reset:Me,resetField:ie,clearErrors:_e,unregister:yt,setError:ot,setFocus:(V,B={})=>{const J=Te(n,V),je=J&&J._f;if(je){const xe=je.refs?je.refs[0]:je.ref;xe.focus&&(xe.focus(),B.shouldSelect&&xe.select())}},getFieldState:se}}function _l(t={}){const e=Ce.useRef(),r=Ce.useRef(),[n,i]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:ea(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:ea(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Wae(t),formState:n});const a=e.current.control;return a._options=t,Pae({subject:a._subjects.state,next:o=>{Rae(o,a._proxyFormState,a._updateFormState)&&i({...a._formState})}}),Ce.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Ce.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),Ce.useEffect(()=>{t.values&&!Za(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Ce.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Ce.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Ce.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Aae(n,a),e.current}const fk=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Te(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},V3=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?fk(n.ref,r,t):n.refs&&n.refs.forEach(i=>fk(i,r,t))}},Hae=(t,e)=>{e.shouldUseNativeValidation&&V3(t,e);const r={};for(const n in t){const i=Te(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(Gae(e.names||Object.keys(t),n)){const o=Object.assign({},Te(r,n));Mt(o,"root",a),Mt(r,n,o)}else Mt(r,n,a)}return r},Gae=(t,e)=>t.some(r=>r.startsWith(e+"."));var Kae=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=r[o].types,u=c&&c[n.code];r[o]=A3(o,e,r,i,u?[].concat(u,n.message):n.message)}t.shift()}return r},jl=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&V3({},a),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Hae(Kae(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},_t;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(_t||(_t={}));var o_;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(o_||(o_={}));const Ee=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eo=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},oe=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Yae=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class as extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),n}static assert(e){if(!(e instanceof as))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}as.create=t=>new as(t);const qu=(t,e)=>{let r;switch(t.code){case oe.invalid_type:t.received===Ee.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_t.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(t.keys,", ")}`;break;case oe.invalid_union:r="Invalid input";break;case oe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(t.options)}`;break;case oe.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:r="Invalid function arguments";break;case oe.invalid_return_type:r="Invalid function return type";break;case oe.invalid_date:r="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_t.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case oe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case oe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case oe.custom:r="Invalid input";break;case oe.invalid_intersection_types:r="Intersection results could not be merged";break;case oe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:r="Number must be finite";break;default:r=e.defaultError,_t.assertNever(t)}return{message:r}};let F3=qu;function Jae(t){F3=t}function Nv(){return F3}const Sv=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}},Xae=[];function Ne(t,e){const r=Nv(),n=Sv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===qu?void 0:qu].filter(i=>!!i)});t.common.issues.push(n)}class un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return We;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return un.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return We;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const We=Object.freeze({status:"aborted"}),Xc=t=>({status:"dirty",value:t}),jn=t=>({status:"valid",value:t}),l_=t=>t.status==="aborted",c_=t=>t.status==="dirty",vf=t=>t.status==="valid",xf=t=>typeof Promise<"u"&&t instanceof Promise;function Ev(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function U3(t,e,r,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));var sh,ih;class Ii{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mk=(t,e)=>{if(vf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new as(t.common.issues);return this._error=r,this._error}}};function et(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}class dt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return eo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:eo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new un,ctx:{common:e.parent.common,data:e.data,parsedType:eo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(xf(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eo(e)},a=this._parseSync({data:e,path:i.path,parent:i});return mk(i,a)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eo(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(xf(i)?i:Promise.resolve(i));return mk(n,a)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:oe.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new ti({schema:this,typeName:$e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ji.create(this,this._def)}nullable(){return Do.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hs.create(this,this._def)}promise(){return Hu.create(this,this._def)}or(e){return _f.create([this,e],this._def)}and(e){return jf.create(this,e,this._def)}transform(e){return new ti({...et(this._def),schema:this,typeName:$e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Tf({...et(this._def),innerType:this,defaultValue:r,typeName:$e.ZodDefault})}brand(){return new wN({typeName:$e.ZodBranded,type:this,...et(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new kf({...et(this._def),innerType:this,catchValue:r,typeName:$e.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ym.create(this,e)}readonly(){return If.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Qae=/^c[^\s-]{8,}$/i,Zae=/^[0-9a-z]+$/,eoe=/^[0-9A-HJKMNP-TV-Z]{26}$/,toe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,roe=/^[a-z0-9_-]{21}$/i,noe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,soe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ioe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let tw;const aoe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ooe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,loe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",coe=new RegExp(`^${$3}$`);function z3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function uoe(t){return new RegExp(`^${z3(t)}$`)}function B3(t){let e=`${$3}T${z3(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function doe(t,e){return!!((e==="v4"||!e)&&aoe.test(t)||(e==="v6"||!e)&&ooe.test(t))}class $s extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const a=this._getOrReturnCtx(e);return Ne(a,{code:oe.invalid_type,expected:Ee.string,received:a.parsedType}),We}const n=new un;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Ne(i,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ne(i,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")soe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"email",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")tw||(tw=new RegExp(ioe,"u")),tw.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"emoji",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")toe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"uuid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")roe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"nanoid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Qae.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"cuid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Zae.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"cuid2",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")eoe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"ulid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ne(i,{validation:"url",code:oe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"regex",code:oe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?B3(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?coe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?uoe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?noe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"duration",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?doe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"ip",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?loe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"base64",code:oe.invalid_string,message:a.message}),n.dirty()):_t.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:oe.invalid_string,...Oe.errToObj(n)})}_addCheck(e){return new $s({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Oe.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Oe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Oe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Oe.errToObj(r)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new $s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}$s.create=t=>{var e;return new $s({checks:[],typeName:$e.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...et(t)})};function hoe(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Ao extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const a=this._getOrReturnCtx(e);return Ne(a,{code:oe.invalid_type,expected:Ee.number,received:a.parsedType}),We}let n;const i=new un;for(const a of this._def.checks)a.kind==="int"?_t.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?hoe(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.not_finite,message:a.message}),i.dirty()):_t.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Oe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Oe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Oe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Oe.toString(r))}setLimit(e,r,n,i){return new Ao({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Oe.toString(i)}]})}_addCheck(e){return new Ao({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_t.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ao.create=t=>new Ao({checks:[],typeName:$e.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});class Ro extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ee.bigint){const a=this._getOrReturnCtx(e);return Ne(a,{code:oe.invalid_type,expected:Ee.bigint,received:a.parsedType}),We}let n;const i=new un;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):_t.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Oe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Oe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Oe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Oe.toString(r))}setLimit(e,r,n,i){return new Ro({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Oe.toString(i)}]})}_addCheck(e){return new Ro({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ro.create=t=>{var e;return new Ro({checks:[],typeName:$e.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...et(t)})};class yf extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.boolean,received:n.parsedType}),We}return jn(e.data)}}yf.create=t=>new yf({typeName:$e.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});class zl extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const a=this._getOrReturnCtx(e);return Ne(a,{code:oe.invalid_type,expected:Ee.date,received:a.parsedType}),We}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ne(a,{code:oe.invalid_date}),We}const n=new un;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:oe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):_t.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zl({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}zl.create=t=>new zl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$e.ZodDate,...et(t)});class Cv extends dt{_parse(e){if(this._getType(e)!==Ee.symbol){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.symbol,received:n.parsedType}),We}return jn(e.data)}}Cv.create=t=>new Cv({typeName:$e.ZodSymbol,...et(t)});class wf extends dt{_parse(e){if(this._getType(e)!==Ee.undefined){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.undefined,received:n.parsedType}),We}return jn(e.data)}}wf.create=t=>new wf({typeName:$e.ZodUndefined,...et(t)});class bf extends dt{_parse(e){if(this._getType(e)!==Ee.null){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.null,received:n.parsedType}),We}return jn(e.data)}}bf.create=t=>new bf({typeName:$e.ZodNull,...et(t)});class Wu extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return jn(e.data)}}Wu.create=t=>new Wu({typeName:$e.ZodAny,...et(t)});class Nl extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return jn(e.data)}}Nl.create=t=>new Nl({typeName:$e.ZodUnknown,...et(t)});class Sa extends dt{_parse(e){const r=this._getOrReturnCtx(e);return Ne(r,{code:oe.invalid_type,expected:Ee.never,received:r.parsedType}),We}}Sa.create=t=>new Sa({typeName:$e.ZodNever,...et(t)});class Tv extends dt{_parse(e){if(this._getType(e)!==Ee.undefined){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.void,received:n.parsedType}),We}return jn(e.data)}}Tv.create=t=>new Tv({typeName:$e.ZodVoid,...et(t)});class Hs extends dt{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ee.array)return Ne(r,{code:oe.invalid_type,expected:Ee.array,received:r.parsedType}),We;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Ne(r,{code:o?oe.too_big:oe.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ne(r,{code:oe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ne(r,{code:oe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new Ii(r,o,r.path,l)))).then(o=>un.mergeArray(n,o));const a=[...r.data].map((o,l)=>i.type._parseSync(new Ii(r,o,r.path,l)));return un.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Hs({...this._def,minLength:{value:e,message:Oe.toString(r)}})}max(e,r){return new Hs({...this._def,maxLength:{value:e,message:Oe.toString(r)}})}length(e,r){return new Hs({...this._def,exactLength:{value:e,message:Oe.toString(r)}})}nonempty(e){return this.min(1,e)}}Hs.create=(t,e)=>new Hs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$e.ZodArray,...et(e)});function Oc(t){if(t instanceof sr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ji.create(Oc(n))}return new sr({...t._def,shape:()=>e})}else return t instanceof Hs?new Hs({...t._def,type:Oc(t.element)}):t instanceof ji?ji.create(Oc(t.unwrap())):t instanceof Do?Do.create(Oc(t.unwrap())):t instanceof Ai?Ai.create(t.items.map(e=>Oc(e))):t}class sr extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=_t.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ee.object){const u=this._getOrReturnCtx(e);return Ne(u,{code:oe.invalid_type,expected:Ee.object,received:u.parsedType}),We}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Sa&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ii(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Sa){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Ne(i,{code:oe.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ii(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>un.mergeObjectSync(n,u)):un.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new sr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Oe.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new sr({...this._def,unknownKeys:"strip"})}passthrough(){return new sr({...this._def,unknownKeys:"passthrough"})}extend(e){return new sr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$e.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new sr({...this._def,catchall:e})}pick(e){const r={};return _t.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new sr({...this._def,shape:()=>r})}omit(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new sr({...this._def,shape:()=>r})}deepPartial(){return Oc(this)}partial(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new sr({...this._def,shape:()=>r})}required(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ji;)a=a._def.innerType;r[n]=a}}),new sr({...this._def,shape:()=>r})}keyof(){return q3(_t.objectKeys(this.shape))}}sr.create=(t,e)=>new sr({shape:()=>t,unknownKeys:"strip",catchall:Sa.create(),typeName:$e.ZodObject,...et(e)});sr.strictCreate=(t,e)=>new sr({shape:()=>t,unknownKeys:"strict",catchall:Sa.create(),typeName:$e.ZodObject,...et(e)});sr.lazycreate=(t,e)=>new sr({shape:t,unknownKeys:"strip",catchall:Sa.create(),typeName:$e.ZodObject,...et(e)});class _f extends dt{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new as(l.ctx.common.issues));return Ne(r,{code:oe.invalid_union,unionErrors:o}),We}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new as(c));return Ne(r,{code:oe.invalid_union,unionErrors:l}),We}}get options(){return this._def.options}}_f.create=(t,e)=>new _f({options:t,typeName:$e.ZodUnion,...et(e)});const zi=t=>t instanceof Sf?zi(t.schema):t instanceof ti?zi(t.innerType()):t instanceof Ef?[t.value]:t instanceof Po?t.options:t instanceof Cf?_t.objectValues(t.enum):t instanceof Tf?zi(t._def.innerType):t instanceof wf?[void 0]:t instanceof bf?[null]:t instanceof ji?[void 0,...zi(t.unwrap())]:t instanceof Do?[null,...zi(t.unwrap())]:t instanceof wN||t instanceof If?zi(t.unwrap()):t instanceof kf?zi(t._def.innerType):[];class iy extends dt{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.object)return Ne(r,{code:oe.invalid_type,expected:Ee.object,received:r.parsedType}),We;const n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(Ne(r,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const a of r){const o=zi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,a)}}return new iy({typeName:$e.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...et(n)})}}function u_(t,e){const r=eo(t),n=eo(e);if(t===e)return{valid:!0,data:t};if(r===Ee.object&&n===Ee.object){const i=_t.objectKeys(e),a=_t.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=u_(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Ee.array&&n===Ee.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=u_(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===Ee.date&&n===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jf extends dt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(l_(a)||l_(o))return We;const l=u_(a.value,o.value);return l.valid?((c_(a)||c_(o))&&r.dirty(),{status:r.value,value:l.data}):(Ne(n,{code:oe.invalid_intersection_types}),We)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}jf.create=(t,e,r)=>new jf({left:t,right:e,typeName:$e.ZodIntersection,...et(r)});class Ai extends dt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.array)return Ne(n,{code:oe.invalid_type,expected:Ee.array,received:n.parsedType}),We;if(n.data.length<this._def.items.length)return Ne(n,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&n.data.length>this._def.items.length&&(Ne(n,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ii(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>un.mergeArray(r,o)):un.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Ai({...this._def,rest:e})}}Ai.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ai({items:t,typeName:$e.ZodTuple,rest:null,...et(e)})};class Nf extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.object)return Ne(n,{code:oe.invalid_type,expected:Ee.object,received:n.parsedType}),We;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in n.data)i.push({key:a._parse(new Ii(n,l,n.path,l)),value:o._parse(new Ii(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?un.mergeObjectAsync(r,i):un.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof dt?new Nf({keyType:e,valueType:r,typeName:$e.ZodRecord,...et(n)}):new Nf({keyType:$s.create(),valueType:e,typeName:$e.ZodRecord,...et(r)})}}class kv extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.map)return Ne(n,{code:oe.invalid_type,expected:Ee.map,received:n.parsedType}),We;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new Ii(n,l,n.path,[u,"key"])),value:a._parse(new Ii(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}kv.create=(t,e,r)=>new kv({valueType:e,keyType:t,typeName:$e.ZodMap,...et(r)});class Bl extends dt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.set)return Ne(n,{code:oe.invalid_type,expected:Ee.set,received:n.parsedType}),We;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ne(n,{code:oe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ne(n,{code:oe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return We;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>a._parse(new Ii(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new Bl({...this._def,minSize:{value:e,message:Oe.toString(r)}})}max(e,r){return new Bl({...this._def,maxSize:{value:e,message:Oe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Bl.create=(t,e)=>new Bl({valueType:t,minSize:null,maxSize:null,typeName:$e.ZodSet,...et(e)});class pu extends dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.function)return Ne(r,{code:oe.invalid_type,expected:Ee.function,received:r.parsedType}),We;function n(l,c){return Sv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Nv(),qu].filter(u=>!!u),issueData:{code:oe.invalid_arguments,argumentsError:c}})}function i(l,c){return Sv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Nv(),qu].filter(u=>!!u),issueData:{code:oe.invalid_return_type,returnTypeError:c}})}const a={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Hu){const l=this;return jn(async function(...c){const u=new as([]),d=await l._def.args.parseAsync(c,a).catch(g=>{throw u.addIssue(n(c,g)),u}),h=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(h,a).catch(g=>{throw u.addIssue(i(h,g)),u})})}else{const l=this;return jn(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new as([n(c,u.error)]);const d=Reflect.apply(o,this,u.data),h=l._def.returns.safeParse(d,a);if(!h.success)throw new as([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pu({...this._def,args:Ai.create(e).rest(Nl.create())})}returns(e){return new pu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new pu({args:e||Ai.create([]).rest(Nl.create()),returns:r||Nl.create(),typeName:$e.ZodFunction,...et(n)})}}class Sf extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Sf.create=(t,e)=>new Sf({getter:t,typeName:$e.ZodLazy,...et(e)});class Ef extends dt{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ne(r,{received:r.data,code:oe.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ef.create=(t,e)=>new Ef({value:t,typeName:$e.ZodLiteral,...et(e)});function q3(t,e){return new Po({values:t,typeName:$e.ZodEnum,...et(e)})}class Po extends dt{constructor(){super(...arguments),sh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ne(r,{expected:_t.joinValues(n),received:r.parsedType,code:oe.invalid_type}),We}if(Ev(this,sh)||U3(this,sh,new Set(this._def.values)),!Ev(this,sh).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ne(r,{received:r.data,code:oe.invalid_enum_value,options:n}),We}return jn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Po.create(e,{...this._def,...r})}exclude(e,r=this._def){return Po.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}sh=new WeakMap;Po.create=q3;class Cf extends dt{constructor(){super(...arguments),ih.set(this,void 0)}_parse(e){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ee.string&&n.parsedType!==Ee.number){const i=_t.objectValues(r);return Ne(n,{expected:_t.joinValues(i),received:n.parsedType,code:oe.invalid_type}),We}if(Ev(this,ih)||U3(this,ih,new Set(_t.getValidEnumValues(this._def.values))),!Ev(this,ih).has(e.data)){const i=_t.objectValues(r);return Ne(n,{received:n.data,code:oe.invalid_enum_value,options:i}),We}return jn(e.data)}get enum(){return this._def.values}}ih=new WeakMap;Cf.create=(t,e)=>new Cf({values:t,typeName:$e.ZodNativeEnum,...et(e)});class Hu extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.promise&&r.common.async===!1)return Ne(r,{code:oe.invalid_type,expected:Ee.promise,received:r.parsedType}),We;const n=r.parsedType===Ee.promise?r.data:Promise.resolve(r.data);return jn(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Hu.create=(t,e)=>new Hu({type:t,typeName:$e.ZodPromise,...et(e)});class ti extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ne(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return We;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?We:c.status==="dirty"||r.value==="dirty"?Xc(c.value):c});{if(r.value==="aborted")return We;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?We:l.status==="dirty"||r.value==="dirty"?Xc(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?We:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?We:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!vf(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>vf(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:r.value,value:l})):o);_t.assertNever(i)}}ti.create=(t,e,r)=>new ti({schema:t,typeName:$e.ZodEffects,effect:e,...et(r)});ti.createWithPreprocess=(t,e,r)=>new ti({schema:e,effect:{type:"preprocess",transform:t},typeName:$e.ZodEffects,...et(r)});class ji extends dt{_parse(e){return this._getType(e)===Ee.undefined?jn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ji.create=(t,e)=>new ji({innerType:t,typeName:$e.ZodOptional,...et(e)});class Do extends dt{_parse(e){return this._getType(e)===Ee.null?jn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Do.create=(t,e)=>new Do({innerType:t,typeName:$e.ZodNullable,...et(e)});class Tf extends dt{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Tf.create=(t,e)=>new Tf({innerType:t,typeName:$e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});class kf extends dt{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return xf(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new as(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new as(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}kf.create=(t,e)=>new kf({innerType:t,typeName:$e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});class Iv extends dt{_parse(e){if(this._getType(e)!==Ee.nan){const n=this._getOrReturnCtx(e);return Ne(n,{code:oe.invalid_type,expected:Ee.nan,received:n.parsedType}),We}return{status:"valid",value:e.data}}}Iv.create=t=>new Iv({typeName:$e.ZodNaN,...et(t)});const foe=Symbol("zod_brand");class wN extends dt{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ym extends dt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?We:a.status==="dirty"?(r.dirty(),Xc(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?We:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new ym({in:e,out:r,typeName:$e.ZodPipeline})}}class If extends dt{_parse(e){const r=this._def.innerType._parse(e),n=i=>(vf(i)&&(i.value=Object.freeze(i.value)),i);return xf(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}If.create=(t,e)=>new If({innerType:t,typeName:$e.ZodReadonly,...et(e)});function W3(t,e={},r){return t?Wu.create().superRefine((n,i)=>{var a,o;if(!t(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:r)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:c})}}):Wu.create()}const moe={object:sr.lazycreate};var $e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($e||($e={}));const poe=(t,e={message:`Input not instance of ${t.name}`})=>W3(r=>r instanceof t,e),H3=$s.create,G3=Ao.create,goe=Iv.create,voe=Ro.create,K3=yf.create,xoe=zl.create,yoe=Cv.create,woe=wf.create,boe=bf.create,_oe=Wu.create,joe=Nl.create,Noe=Sa.create,Soe=Tv.create,Eoe=Hs.create,Coe=sr.create,Toe=sr.strictCreate,koe=_f.create,Ioe=iy.create,Aoe=jf.create,Roe=Ai.create,Poe=Nf.create,Doe=kv.create,Ooe=Bl.create,Moe=pu.create,Loe=Sf.create,Voe=Ef.create,Foe=Po.create,Uoe=Cf.create,$oe=Hu.create,pk=ti.create,zoe=ji.create,Boe=Do.create,qoe=ti.createWithPreprocess,Woe=ym.create,Hoe=()=>H3().optional(),Goe=()=>G3().optional(),Koe=()=>K3().optional(),Yoe={string:t=>$s.create({...t,coerce:!0}),number:t=>Ao.create({...t,coerce:!0}),boolean:t=>yf.create({...t,coerce:!0}),bigint:t=>Ro.create({...t,coerce:!0}),date:t=>zl.create({...t,coerce:!0})},Joe=We;var Le=Object.freeze({__proto__:null,defaultErrorMap:qu,setErrorMap:Jae,getErrorMap:Nv,makeIssue:Sv,EMPTY_PATH:Xae,addIssueToContext:Ne,ParseStatus:un,INVALID:We,DIRTY:Xc,OK:jn,isAborted:l_,isDirty:c_,isValid:vf,isAsync:xf,get util(){return _t},get objectUtil(){return o_},ZodParsedType:Ee,getParsedType:eo,ZodType:dt,datetimeRegex:B3,ZodString:$s,ZodNumber:Ao,ZodBigInt:Ro,ZodBoolean:yf,ZodDate:zl,ZodSymbol:Cv,ZodUndefined:wf,ZodNull:bf,ZodAny:Wu,ZodUnknown:Nl,ZodNever:Sa,ZodVoid:Tv,ZodArray:Hs,ZodObject:sr,ZodUnion:_f,ZodDiscriminatedUnion:iy,ZodIntersection:jf,ZodTuple:Ai,ZodRecord:Nf,ZodMap:kv,ZodSet:Bl,ZodFunction:pu,ZodLazy:Sf,ZodLiteral:Ef,ZodEnum:Po,ZodNativeEnum:Cf,ZodPromise:Hu,ZodEffects:ti,ZodTransformer:ti,ZodOptional:ji,ZodNullable:Do,ZodDefault:Tf,ZodCatch:kf,ZodNaN:Iv,BRAND:foe,ZodBranded:wN,ZodPipeline:ym,ZodReadonly:If,custom:W3,Schema:dt,ZodSchema:dt,late:moe,get ZodFirstPartyTypeKind(){return $e},coerce:Yoe,any:_oe,array:Eoe,bigint:voe,boolean:K3,date:xoe,discriminatedUnion:Ioe,effect:pk,enum:Foe,function:Moe,instanceof:poe,intersection:Aoe,lazy:Loe,literal:Voe,map:Doe,nan:goe,nativeEnum:Uoe,never:Noe,null:boe,nullable:Boe,number:G3,object:Coe,oboolean:Koe,onumber:Goe,optional:zoe,ostring:Hoe,pipeline:Woe,preprocess:qoe,promise:$oe,record:Poe,set:Ooe,strictObject:Toe,string:H3,symbol:yoe,transformer:pk,tuple:Roe,undefined:woe,union:koe,unknown:joe,void:Soe,NEVER:Joe,ZodIssueCode:oe,quotelessJson:Yae,ZodError:as}),Xoe="Label",Y3=p.forwardRef((t,e)=>s.jsx(Ae.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Y3.displayName=Xoe;var J3=Y3;const Qoe=zx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ye=p.forwardRef(({className:t,...e},r)=>s.jsx(J3,{ref:r,className:Pe(Qoe(),t),...e}));ye.displayName=J3.displayName;var Zoe="Separator",gk="horizontal",ele=["horizontal","vertical"],X3=p.forwardRef((t,e)=>{const{decorative:r,orientation:n=gk,...i}=t,a=tle(n)?n:gk,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Ae.div,{"data-orientation":a,...l,...i,ref:e})});X3.displayName=Zoe;function tle(t){return ele.includes(t)}var Q3=X3;const Hi=p.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>s.jsx(Q3,{ref:i,decorative:r,orientation:e,className:Pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Hi.displayName=Q3.displayName;function Af(t,[e,r]){return Math.min(r,Math.max(e,t))}function ay(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var rle="VisuallyHidden",Z3=p.forwardRef((t,e)=>s.jsx(Ae.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Z3.displayName=rle;var nle=[" ","Enter","ArrowUp","ArrowDown"],sle=[" ","Enter"],wm="Select",[oy,ly,ile]=cm(wm),[md,xme]=hs(wm,[ile,hd]),cy=hd(),[ale,Wo]=md(wm),[ole,lle]=md(wm),e5=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:x}=t,y=cy(e),[_,b]=p.useState(null),[v,w]=p.useState(null),[E,C]=p.useState(!1),I=ac(u),[T=!1,k]=cs({prop:n,defaultProp:i,onChange:a}),[R,j]=cs({prop:o,defaultProp:l,onChange:c}),P=p.useRef(null),D=_?x||!!_.closest("form"):!0,[S,M]=p.useState(new Set),$=Array.from(S).map(q=>q.props.value).join(";");return s.jsx(Q1,{...y,children:s.jsxs(ale,{required:g,scope:e,trigger:_,onTriggerChange:b,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:E,onValueNodeHasChildrenChange:C,contentId:ns(),value:R,onValueChange:j,open:T,onOpenChange:k,dir:I,triggerPointerDownPosRef:P,disabled:m,children:[s.jsx(oy.Provider,{scope:e,children:s.jsx(ole,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(q=>{M(F=>new Set(F).add(q))},[]),onNativeOptionRemove:p.useCallback(q=>{M(F=>{const L=new Set(F);return L.delete(q),L})},[]),children:r})}),D?s.jsxs(S5,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:R,onChange:q=>j(q.target.value),disabled:m,form:x,children:[R===void 0?s.jsx("option",{value:""}):null,Array.from(S)]},$):null]})})};e5.displayName=wm;var t5="SelectTrigger",r5=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,a=cy(r),o=Wo(t5,r),l=o.disabled||n,c=Xe(e,o.onTriggerChange),u=ly(r),d=p.useRef("touch"),[h,m,g]=E5(y=>{const _=u().filter(w=>!w.disabled),b=_.find(w=>w.value===o.value),v=C5(_,y,b);v!==void 0&&o.onValueChange(v.value)}),x=y=>{l||(o.onOpenChange(!0),g()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(Jx,{asChild:!0,...a,children:s.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":N5(o.value)?"":void 0,...i,ref:c,onClick:me(i.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&x(y)}),onPointerDown:me(i.onPointerDown,y=>{d.current=y.pointerType;const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:me(i.onKeyDown,y=>{const _=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(_&&y.key===" ")&&nle.includes(y.key)&&(x(),y.preventDefault())})})})});r5.displayName=t5;var n5="SelectValue",s5=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...l}=t,c=Wo(n5,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Xe(e,c.onValueNodeChange);return Ar(()=>{u(d)},[u,d]),s.jsx(Ae.span,{...l,ref:h,style:{pointerEvents:"none"},children:N5(c.value)?s.jsx(s.Fragment,{children:o}):a})});s5.displayName=n5;var cle="SelectIcon",i5=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return s.jsx(Ae.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});i5.displayName=cle;var ule="SelectPortal",a5=t=>s.jsx(fm,{asChild:!0,...t});a5.displayName=ule;var ql="SelectContent",o5=p.forwardRef((t,e)=>{const r=Wo(ql,t.__scopeSelect),[n,i]=p.useState();if(Ar(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?Kl.createPortal(s.jsx(l5,{scope:t.__scopeSelect,children:s.jsx(oy.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(c5,{...t,ref:e})});o5.displayName=ql;var Rs=10,[l5,Ho]=md(ql),dle="SelectContentImpl",c5=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:_,...b}=t,v=Wo(ql,r),[w,E]=p.useState(null),[C,I]=p.useState(null),T=Xe(e,Se=>E(Se)),[k,R]=p.useState(null),[j,P]=p.useState(null),D=ly(r),[S,M]=p.useState(!1),$=p.useRef(!1);p.useEffect(()=>{if(w)return Zx(w)},[w]),Wx();const q=p.useCallback(Se=>{const[tt,...Z]=D().map(ie=>ie.ref.current),[ge]=Z.slice(-1),Y=document.activeElement;for(const ie of Se)if(ie===Y||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===tt&&C&&(C.scrollTop=0),ie===ge&&C&&(C.scrollTop=C.scrollHeight),ie==null||ie.focus(),document.activeElement!==Y))return},[D,C]),F=p.useCallback(()=>q([k,w]),[q,k,w]);p.useEffect(()=>{S&&F()},[S,F]);const{onOpenChange:L,triggerPointerDownPosRef:W}=v;p.useEffect(()=>{if(w){let Se={x:0,y:0};const tt=ge=>{var Y,ie;Se={x:Math.abs(Math.round(ge.pageX)-(((Y=W.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((ie=W.current)==null?void 0:ie.y)??0))}},Z=ge=>{Se.x<=10&&Se.y<=10?ge.preventDefault():w.contains(ge.target)||L(!1),document.removeEventListener("pointermove",tt),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",tt),document.addEventListener("pointerup",Z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",tt),document.removeEventListener("pointerup",Z,{capture:!0})}}},[w,L,W]),p.useEffect(()=>{const Se=()=>L(!1);return window.addEventListener("blur",Se),window.addEventListener("resize",Se),()=>{window.removeEventListener("blur",Se),window.removeEventListener("resize",Se)}},[L]);const[z,X]=E5(Se=>{const tt=D().filter(Y=>!Y.disabled),Z=tt.find(Y=>Y.ref.current===document.activeElement),ge=C5(tt,Se,Z);ge&&setTimeout(()=>ge.ref.current.focus())}),se=p.useCallback((Se,tt,Z)=>{const ge=!$.current&&!Z;(v.value!==void 0&&v.value===tt||ge)&&(R(Se),ge&&($.current=!0))},[v.value]),_e=p.useCallback(()=>w==null?void 0:w.focus(),[w]),ot=p.useCallback((Se,tt,Z)=>{const ge=!$.current&&!Z;(v.value!==void 0&&v.value===tt||ge)&&P(Se)},[v.value]),jt=n==="popper"?d_:u5,yt=jt===d_?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:_}:{};return s.jsx(l5,{scope:r,content:w,viewport:C,onViewportChange:I,itemRefCallback:se,selectedItem:k,onItemLeave:_e,itemTextRefCallback:ot,focusSelectedItem:F,selectedItemText:j,position:n,isPositioned:S,searchRef:z,children:s.jsx(mm,{as:ya,allowPinchZoom:!0,children:s.jsx(dm,{asChild:!0,trapped:v.open,onMountAutoFocus:Se=>{Se.preventDefault()},onUnmountAutoFocus:me(i,Se=>{var tt;(tt=v.trigger)==null||tt.focus({preventScroll:!0}),Se.preventDefault()}),children:s.jsx(um,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Se=>Se.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(jt,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Se=>Se.preventDefault(),...b,...yt,onPlaced:()=>M(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:me(b.onKeyDown,Se=>{const tt=Se.ctrlKey||Se.altKey||Se.metaKey;if(Se.key==="Tab"&&Se.preventDefault(),!tt&&Se.key.length===1&&X(Se.key),["ArrowUp","ArrowDown","Home","End"].includes(Se.key)){let ge=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(Se.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(Se.key)){const Y=Se.target,ie=ge.indexOf(Y);ge=ge.slice(ie+1)}setTimeout(()=>q(ge)),Se.preventDefault()}})})})})})})});c5.displayName=dle;var hle="SelectItemAlignedPosition",u5=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,a=Wo(ql,r),o=Ho(ql,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Xe(e,T=>d(T)),m=ly(r),g=p.useRef(!1),x=p.useRef(!0),{viewport:y,selectedItem:_,selectedItemText:b,focusSelectedItem:v}=o,w=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&y&&_&&b){const T=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),j=b.getBoundingClientRect();if(a.dir!=="rtl"){const Y=j.left-k.left,ie=R.left-Y,de=T.left-ie,Me=T.width+de,ze=Math.max(Me,k.width),Ke=window.innerWidth-Rs,Nt=Af(ie,[Rs,Math.max(Rs,Ke-ze)]);l.style.minWidth=Me+"px",l.style.left=Nt+"px"}else{const Y=k.right-j.right,ie=window.innerWidth-R.right-Y,de=window.innerWidth-T.right-ie,Me=T.width+de,ze=Math.max(Me,k.width),Ke=window.innerWidth-Rs,Nt=Af(ie,[Rs,Math.max(Rs,Ke-ze)]);l.style.minWidth=Me+"px",l.style.right=Nt+"px"}const P=m(),D=window.innerHeight-Rs*2,S=y.scrollHeight,M=window.getComputedStyle(u),$=parseInt(M.borderTopWidth,10),q=parseInt(M.paddingTop,10),F=parseInt(M.borderBottomWidth,10),L=parseInt(M.paddingBottom,10),W=$+q+S+L+F,z=Math.min(_.offsetHeight*5,W),X=window.getComputedStyle(y),se=parseInt(X.paddingTop,10),_e=parseInt(X.paddingBottom,10),ot=T.top+T.height/2-Rs,jt=D-ot,yt=_.offsetHeight/2,Se=_.offsetTop+yt,tt=$+q+Se,Z=W-tt;if(tt<=ot){const Y=P.length>0&&_===P[P.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-y.offsetTop-y.offsetHeight,de=Math.max(jt,yt+(Y?_e:0)+ie+F),Me=tt+de;l.style.height=Me+"px"}else{const Y=P.length>0&&_===P[0].ref.current;l.style.top="0px";const de=Math.max(ot,$+y.offsetTop+(Y?se:0)+yt)+Z;l.style.height=de+"px",y.scrollTop=tt-ot+y.offsetTop}l.style.margin=`${Rs}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,l,u,y,_,b,a.dir,n]);Ar(()=>w(),[w]);const[E,C]=p.useState();Ar(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const I=p.useCallback(T=>{T&&x.current===!0&&(w(),v==null||v(),x.current=!1)},[w,v]);return s.jsx(mle,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:I,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:s.jsx(Ae.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});u5.displayName=hle;var fle="SelectPopperPosition",d_=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Rs,...a}=t,o=cy(r);return s.jsx(Z1,{...o,...a,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});d_.displayName=fle;var[mle,bN]=md(ql,{}),h_="SelectViewport",d5=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,a=Ho(h_,r),o=bN(h_,r),l=Xe(e,a.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(oy.Slot,{scope:r,children:s.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:me(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const x=window.innerHeight-Rs*2,y=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),b=Math.max(y,_);if(b<x){const v=b+g,w=Math.min(x,v),E=v-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});d5.displayName=h_;var h5="SelectGroup",[ple,gle]=md(h5),vle=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=ns();return s.jsx(ple,{scope:r,id:i,children:s.jsx(Ae.div,{role:"group","aria-labelledby":i,...n,ref:e})})});vle.displayName=h5;var f5="SelectLabel",m5=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=gle(f5,r);return s.jsx(Ae.div,{id:i.id,...n,ref:e})});m5.displayName=f5;var Av="SelectItem",[xle,p5]=md(Av),g5=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=t,l=Wo(Av,r),c=Ho(Av,r),u=l.value===n,[d,h]=p.useState(a??""),[m,g]=p.useState(!1),x=Xe(e,v=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,v,n,i)}),y=ns(),_=p.useRef("touch"),b=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(xle,{scope:r,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:p.useCallback(v=>{h(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:s.jsx(oy.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:s.jsx(Ae.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:me(o.onFocus,()=>g(!0)),onBlur:me(o.onBlur,()=>g(!1)),onClick:me(o.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:me(o.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:me(o.onPointerDown,v=>{_.current=v.pointerType}),onPointerMove:me(o.onPointerMove,v=>{var w;_.current=v.pointerType,i?(w=c.onItemLeave)==null||w.call(c):_.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:me(o.onKeyDown,v=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&v.key===" "||(sle.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});g5.displayName=Av;var ah="SelectItemText",v5=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...a}=t,o=Wo(ah,r),l=Ho(ah,r),c=p5(ah,r),u=lle(ah,r),[d,h]=p.useState(null),m=Xe(e,b=>h(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),g=d==null?void 0:d.textContent,x=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:_}=u;return Ar(()=>(y(x),()=>_(x)),[y,_,x]),s.jsxs(s.Fragment,{children:[s.jsx(Ae.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kl.createPortal(a.children,o.valueNode):null]})});v5.displayName=ah;var x5="SelectItemIndicator",y5=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return p5(x5,r).isSelected?s.jsx(Ae.span,{"aria-hidden":!0,...n,ref:e}):null});y5.displayName=x5;var f_="SelectScrollUpButton",w5=p.forwardRef((t,e)=>{const r=Ho(f_,t.__scopeSelect),n=bN(f_,t.__scopeSelect),[i,a]=p.useState(!1),o=Xe(e,n.onScrollButtonChange);return Ar(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(_5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});w5.displayName=f_;var m_="SelectScrollDownButton",b5=p.forwardRef((t,e)=>{const r=Ho(m_,t.__scopeSelect),n=bN(m_,t.__scopeSelect),[i,a]=p.useState(!1),o=Xe(e,n.onScrollButtonChange);return Ar(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(_5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});b5.displayName=m_;var _5=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,a=Ho("SelectScrollButton",r),o=p.useRef(null),l=ly(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Ar(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ae.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:me(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:me(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:me(i.onPointerLeave,()=>{c()})})}),yle="SelectSeparator",j5=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return s.jsx(Ae.div,{"aria-hidden":!0,...n,ref:e})});j5.displayName=yle;var p_="SelectArrow",wle=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=cy(r),a=Wo(p_,r),o=Ho(p_,r);return a.open&&o.position==="popper"?s.jsx(eN,{...i,...n,ref:e}):null});wle.displayName=p_;function N5(t){return t===""||t===void 0}var S5=p.forwardRef((t,e)=>{const{value:r,...n}=t,i=p.useRef(null),a=Xe(e,i),o=ay(r);return p.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&d){const h=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(h)}},[o,r]),s.jsx(Z3,{asChild:!0,children:s.jsx("select",{...n,ref:a,defaultValue:r})})});S5.displayName="BubbleSelect";function E5(t){const e=_r(t),r=p.useRef(""),n=p.useRef(0),i=p.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function C5(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=ble(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function ble(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var _le=e5,T5=r5,jle=s5,Nle=i5,Sle=a5,k5=o5,Ele=d5,I5=m5,A5=g5,Cle=v5,Tle=y5,R5=w5,P5=b5,D5=j5;const ct=_le,ut=jle,st=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(T5,{ref:n,className:Pe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,s.jsx(Nle,{asChild:!0,children:s.jsx(zne,{className:"h-4 w-4 opacity-50"})})]}));st.displayName=T5.displayName;const O5=p.forwardRef(({className:t,...e},r)=>s.jsx(R5,{ref:r,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(Yne,{})}));O5.displayName=R5.displayName;const M5=p.forwardRef(({className:t,...e},r)=>s.jsx(P5,{ref:r,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(s3,{})}));M5.displayName=P5.displayName;const it=p.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>s.jsx(Sle,{children:s.jsxs(k5,{ref:i,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[s.jsx(O5,{}),s.jsx(Ele,{className:Pe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(M5,{})]})}));it.displayName=k5.displayName;const kle=p.forwardRef(({className:t,...e},r)=>s.jsx(I5,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",t),...e}));kle.displayName=I5.displayName;const re=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(A5,{ref:n,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Tle,{children:s.jsx(cN,{className:"h-4 w-4"})})}),s.jsx(Cle,{children:e})]}));re.displayName=A5.displayName;const Ile=p.forwardRef(({className:t,...e},r)=>s.jsx(D5,{ref:r,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));Ile.displayName=D5.displayName;const Ale=zx("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Bt=p.forwardRef(({className:t,variant:e,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Pe(Ale({variant:e}),t),...r}));Bt.displayName="Alert";const Rle=p.forwardRef(({className:t,...e},r)=>s.jsx("h5",{ref:r,className:Pe("mb-1 font-medium leading-none tracking-tight",t),...e}));Rle.displayName="AlertTitle";const qt=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Pe("text-sm [&_p]:leading-relaxed",t),...e}));qt.displayName="AlertDescription";const Ple=()=>{const{currentUser:t}=Ot(),[e,r]=p.useState(!1),[n,i]=p.useState(!1),[a,o]=p.useState(!1),[l,c]=p.useState(null);p.useEffect(()=>{const h=new URLSearchParams(window.location.search),m=h.get("mode"),g=h.get("oobCode");m==="verifyEmail"&&g&&(console.log(" [VERIFY] Redirection depuis la vrification d'email"),o(!0),c("pending"),r(!0),u())},[]),p.useEffect(()=>{t&&!t.emailVerified&&!a?(o(!0),c("pending")):t&&t.emailVerified&&a&&setTimeout(()=>{o(!1),c(null)},3e3)},[t,a]);const u=async()=>{try{console.log(" [VERIFY] Traitement de la redirection de vrification"),await new Promise(h=>setTimeout(h,1e3)),t&&(await t.reload(),t.emailVerified?(console.log(" [VERIFY] Email vrifi avec succs"),c("success"),ht.success(" Flicitations ! Votre inscription est valide !"),setTimeout(()=>{window.location.href="/StudyMarket/"},3e3)):(console.log(" [VERIFY] Email toujours non vrifi"),c("pending"),ht.error("Erreur lors de la vrification de l'email")))}catch(h){console.error(" [VERIFY] Erreur lors de la vrification:",h),ht.error("Erreur lors de la vrification de l'email"),c("pending")}finally{r(!1)}},d=async()=>{if(t)try{r(!0),console.log(" [VERIFY] Renvoi de l'email de vrification"),await hb(t,{url:`${window.location.origin}/StudyMarket/auth?verified=true`}),i(!0),ht.success("Email de vrification renvoy !"),setTimeout(()=>{i(!1)},6e4)}catch(h){console.error(" [VERIFY] Erreur envoi email:",h),ht.error("Erreur lors de l'envoi de l'email")}finally{r(!1)}};return a?l==="success"?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(H,{className:"w-full max-w-md mx-auto bg-white",children:[s.jsxs(he,{className:"text-center",children:[s.jsx(fe,{className:"flex items-center justify-center gap-2 text-2xl text-green-600",children:" Flicitations !"}),s.jsx(at,{className:"text-lg",children:"Votre inscription est valide"})]}),s.jsxs(K,{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:s.jsx(le,{className:"bg-green-500 text-white text-2xl p-3",children:""})}),s.jsx("p",{className:"text-gray-600",children:"Votre email a t vrifi avec succs. Vous allez tre redirig vers la page d'accueil."}),s.jsx("div",{className:"text-sm text-gray-500",children:"Redirection dans 3 secondes..."})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(H,{className:"w-full max-w-md mx-auto bg-white",children:[s.jsxs(he,{className:"text-center",children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Vrification d'Email Requise"}),s.jsx(at,{children:"Vrifiez votre email pour activer votre compte"})]}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(le,{className:"bg-yellow-500 text-white mb-4",children:"En attente"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Un email de vrification a t envoy  ",s.jsx("strong",{children:t==null?void 0:t.email})]}),n&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-green-700",children:" Email de vrification renvoy !"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{onClick:d,disabled:e||n,variant:"outline",className:"w-full",children:e?"Envoi...":"Renvoyer l'email"}),s.jsx(U,{onClick:()=>o(!1),variant:"outline",className:"w-full",children:"Fermer"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-blue-700",children:[" ",s.jsx("strong",{children:"Conseil :"})," Vrifiez votre dossier spam si vous ne recevez pas l'email"]})})]})]})}):null},Dle=Le.object({email:Le.string().email("Email invalide"),password:Le.string().min(6,"Le mot de passe doit contenir au moins 6 caractres")}),Ole=Le.object({firstName:Le.string().min(2,"Le prnom doit contenir au moins 2 caractres"),lastName:Le.string().min(2,"Le nom doit contenir au moins 2 caractres"),displayName:Le.string().optional(),email:Le.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),"Vous devez utiliser une adresse email universitaire"),university:Le.string().min(1,"Veuillez slectionner votre universit"),otherUniversity:Le.string().optional(),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filire"),otherFieldOfStudy:Le.string().optional(),graduationYear:Le.string().min(1,"Veuillez indiquer votre anne de diplme"),password:Le.string().min(6,"Le mot de passe doit contenir au moins 6 caractres"),confirmPassword:Le.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre universit"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre universit",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filire",path:["otherFieldOfStudy"]}),Mle=Le.object({university:Le.string().min(1,"Veuillez slectionner votre universit"),otherUniversity:Le.string().optional(),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filire"),otherFieldOfStudy:Le.string().optional(),graduationYear:Le.string().min(1,"Veuillez indiquer votre anne de diplme"),displayName:Le.string().min(2,"Le nom doit contenir au moins 2 caractres")}).refine(t=>t.university==="Autre universit"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre universit",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filire",path:["otherFieldOfStudy"]}),vk=["Sorbonne Universit","Universit Paris-Dauphine","cole Polytechnique","ENS Paris","CentraleSuplec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Universit Paris 1 Panthon-Sorbonne","Universit Paris 3 Sorbonne","Universit Paris Cit","Sciences Po Paris","Autre universit"],xk=["Informatique","Ingnierie","Commerce/Management","Droit","Mdecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Lle=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),Vle=()=>{var P,D;const{currentUser:t,signIn:e,signInWithGoogle:r}=Ot(),[n]=wj(),[i,a]=p.useState(()=>n.get("mode")==="signup"),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[x,y]=p.useState(""),[_,b]=p.useState(!1),[v,w]=p.useState(null),E=Hn(),C=_l({resolver:jl(Dle),defaultValues:{email:"",password:""}}),I=_l({resolver:jl(Ole),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),T=_l({resolver:jl(Mle),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(p.useEffect(()=>{const S=n.get("mode");a(S==="signup")},[n]),p.useEffect(()=>{(async()=>{if(!t){b(!1),w(null);return}try{const M=await On(Ze(be,"users",t.uid));if(M.exists()){const $=M.data();try{const F=localStorage.getItem("pendingUserData"),L=localStorage.getItem("pendingUserEmail");if(F&&L===t.email&&t.emailVerified){const W=JSON.parse(F),z=Object.fromEntries(Object.entries(W).filter(([,X])=>X!==void 0));await wh(Ze(be,"users",t.uid),{...z,emailVerified:!0,profileCompleted:!0},{merge:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload();return}}catch(F){console.error("Error merging pending data into existing profile:",F)}!(t.emailVerified||t.providerData.some(F=>F.providerId==="google.com"))&&!$.emailVerified&&(y(t.email||""),h(!0)),b(!1)}else{if(t.providerData.some(F=>F.providerId==="google.com")){if(!Lle(t.email||"")){g("Vous devez utiliser une adresse email universitaire"),Et.signOut();return}w({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),b(!0);return}const $=localStorage.getItem("pendingUserData"),q=localStorage.getItem("pendingUserEmail");if($&&q===t.email&&t.emailVerified)try{const F=JSON.parse($),L=Object.fromEntries(Object.entries(F).filter(([,W])=>W!==void 0));await wh(Ze(be,"users",t.uid),{...L,emailVerified:!0,profileCompleted:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}catch(F){console.error("Error saving pending user data:",F),g("Erreur lors de la sauvegarde du profil")}else $&&q===t.email&&!t.emailVerified&&(y(t.email||""),h(!0),b(!1))}}catch(M){console.error("Error checking user profile:",M),b(!1)}})()},[t]),p.useEffect(()=>{let S=null;return d&&t&&!t.emailVerified&&(S=setInterval(async()=>{try{await Hp(t),t.emailVerified&&(h(!1),y(""),g(""),window.location.reload())}catch(M){console.error("Error checking email verification:",M)}},5e3)),()=>{S&&clearInterval(S)}},[d,t]),p.useEffect(()=>{if(!d||!t)return;const M=setInterval(async()=>{try{await Hp(t),t.emailVerified&&(h(!1),y(""),g(""),ue.success("Email vrifi avec succs ! Redirection..."),setTimeout(()=>{window.location.reload()},1500))}catch{console.log("Vrification automatique en cours...")}},5e3);return()=>clearInterval(M)},[d,t]),_&&v)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(H,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(gT,{className:"w-6 h-6 text-green-600"})})}),s.jsx(fe,{className:"text-2xl text-green-600",children:"Compltez votre profil tudiant"}),s.jsx(at,{children:"Dernire tape pour accder  StudyMarket"})]}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs(Bt,{children:[s.jsx(gT,{className:"h-4 w-4"}),s.jsxs(qt,{children:["Connect avec ",s.jsx("strong",{children:v.email})]})]}),m&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx(sa,{className:"h-4 w-4"}),s.jsx(qt,{children:m})]}),s.jsxs("form",{onSubmit:T.handleSubmit(async S=>{u(!0),g("");try{const M=S.university==="Autre universit"?S.otherUniversity:S.university,$=S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:S.fieldOfStudy,q=Object.fromEntries(Object.entries(S).filter(([,F])=>F!==void 0));if(await wh(Ze(be,"users",v.uid),{email:v.email,displayName:q.displayName,photoURL:v.photoURL,university:M,otherUniversity:S.university==="Autre universit"?S.otherUniversity:null,fieldOfStudy:$,otherFieldOfStudy:S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:null,graduationYear:parseInt(S.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&v.displayName)try{await Zh(t,{displayName:q.displayName})}catch(F){console.error("Error updating profile:",F)}window.location.reload()}catch(M){console.error("Error completing profile:",M),g("Erreur lors de la sauvegarde du profil")}finally{u(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"university",children:"Universit"}),s.jsxs(ct,{onValueChange:S=>T.setValue("university",S),value:T.watch("university"),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Slectionnez votre universit"})}),s.jsx(it,{children:vk.map(S=>s.jsx(re,{value:S,children:S},S))})]}),T.watch("university")==="Autre universit"&&s.jsx(Ie,{id:"otherUniversity",type:"text",placeholder:"Nom de votre universit",...T.register("otherUniversity"),className:"mt-2"}),T.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.university.message}),T.watch("university")==="Autre universit"&&T.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"fieldOfStudy",children:"Filire"}),s.jsxs(ct,{onValueChange:S=>T.setValue("fieldOfStudy",S),value:T.watch("fieldOfStudy"),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Filire"})}),s.jsx(it,{children:xk.map(S=>s.jsx(re,{value:S,children:S},S))})]}),T.watch("fieldOfStudy")==="Autre"&&s.jsx(Ie,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filire",...T.register("otherFieldOfStudy"),className:"mt-2"}),T.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.fieldOfStudy.message}),T.watch("fieldOfStudy")==="Autre"&&T.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"graduationYear",children:"Anne de diplme"}),s.jsxs(ct,{onValueChange:S=>T.setValue("graduationYear",S),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Anne"})}),s.jsx(it,{children:Array.from({length:8},(S,M)=>2024+M).map(S=>s.jsx(re,{value:S.toString(),children:S},S))})]}),T.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.graduationYear.message})]})]}),s.jsxs(U,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:c,children:[c?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(U,{variant:"outline",onClick:()=>{Et.signOut(),b(!1),w(null)},className:"w-full",children:"Se dconnecter et recommencer"})]})]})});if(d)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(H,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Vr,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(fe,{className:"text-2xl text-blue-600",children:"Vrifiez votre email"}),s.jsxs(at,{children:["Un lien d'activation a t envoy  ",s.jsx("strong",{children:x}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir aprs avoir valid l'email)"})]})]}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:" Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:" Vrifiez votre bote de rception et vos spams"}),s.jsx("p",{children:" Le lien expire dans 24h"})]}),s.jsxs(U,{onClick:async()=>{if(t){u(!0);try{await hb(t,G2.actionCodeSettings),g(""),alert("Email d'activation renvoy !")}catch(S){g("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",S)}u(!1)}},variant:"outline",className:"w-full",disabled:c||!t,children:[c?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Vr,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(U,{onClick:async()=>{if(t){u(!0);try{await Hp(t),t.emailVerified?(h(!1),y(""),g(""),window.location.reload()):g("L'email n'est pas encore valid. Pensez  vrifier vos spams.")}catch{g("Erreur lors de la vrification de l'tat de l'email")}u(!1)}},variant:"secondary",className:"w-full",disabled:c||!t,children:"J'ai dj valid mon email"}),m&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx(sa,{className:"h-4 w-4"}),s.jsx(qt,{children:m})]}),s.jsx(U,{variant:"link",onClick:()=>{h(!1),y(""),g(""),t&&Et.signOut()},className:"w-full",children:"Retour  l'inscription"})]})]})});const k=async S=>{u(!0),g("");try{await e(S.email,S.password),E("/")}catch(M){const $=M instanceof Error?M.message:"Erreur inconnue",q=M==null?void 0:M.code;g(q==="auth/invalid-credential"?"Email ou mot de passe incorrect":q==="auth/user-not-found"?"Aucun compte trouv avec cet email":q==="auth/user-disabled"?"Ce compte a t dsactiv":q==="auth/too-many-requests"?"Trop de tentatives. Ressayez plus tard.":"Erreur de connexion: "+$),console.error("Sign in error:",M)}finally{u(!1)}},R=async S=>{u(!0),g("");try{const{firstName:M,lastName:$}=S,q=`${M} ${$}`,L=(await tP(Et,S.email,S.password)).user;await hb(L,G2.actionCodeSettings);const W=S.university==="Autre universit"?S.otherUniversity:S.university,z=S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:S.fieldOfStudy,X={firstName:M,lastName:$,displayName:q,university:W,otherUniversity:S.university==="Autre universit"?S.otherUniversity:null,fieldOfStudy:z,otherFieldOfStudy:S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:null,graduationYear:parseInt(S.graduationYear),email:S.email,createdAt:new Date().toISOString(),emailVerified:!1,isStudent:!0,provider:"email"};localStorage.setItem("pendingUserData",JSON.stringify(X)),localStorage.setItem("pendingUserEmail",S.email),L&&await Zh(L,{displayName:q}),y(S.email),h(!0)}catch(M){const $=M==null?void 0:M.code;g($==="auth/email-already-in-use"?"Cette adresse email est dj utilise":$==="auth/weak-password"?"Le mot de passe est trop faible":$==="auth/invalid-email"?"Adresse email invalide":"Erreur lors de la cration du compte"),console.error("Sign up error:",M)}finally{u(!1)}},j=async()=>{u(!0),g("");try{await r()}catch(S){const M=S instanceof Error?S.message:"Erreur inconnue",$=S==null?void 0:S.code;g($==="auth/popup-closed-by-user"?"Connexion annule":$==="auth/popup-blocked"?"Popup bloque par le navigateur":$==="auth/account-exists-with-different-credential"?"Un compte existe dj avec cet email":"Erreur de connexion avec Google: "+M),console.error("Google sign in error:",S)}finally{u(!1)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-4 py-4 sm:py-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:[s.jsx(Ple,{}),s.jsxs(H,{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto",children:[s.jsxs(he,{className:"text-center space-y-2 sm:space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(_n,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),s.jsx(fe,{className:"text-xl sm:text-2xl lg:text-3xl",children:i?"Rejoindre StudyMarket":"Connectez-vous  votre compte tudiant"}),s.jsx(at,{className:"text-sm sm:text-base",children:i?"Crez votre compte tudiant vrifi et rejoignez la communaut":"Connectez-vous  votre compte tudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 sm:mt-4",children:s.jsxs(le,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs sm:text-sm",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(K,{className:"space-y-4 sm:space-y-6",children:[m&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx(sa,{className:"h-4 w-4"}),s.jsx(qt,{children:m})]}),s.jsxs(U,{variant:"outline",className:"w-full",onClick:j,disabled:c,children:[c?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Continuer avec Google ducation"}),s.jsx("span",{className:"sm:hidden",children:"Google ducation"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Hi,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?I.handleSubmit(R):C.handleSubmit(k),className:"space-y-4",children:[i&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"firstName",className:"text-sm",children:"Prnom"}),s.jsx(Ie,{id:"firstName",...I.register("firstName"),autoComplete:"given-name",className:"text-sm"}),I.formState.errors.firstName&&s.jsx("span",{className:"text-red-500 text-xs",children:I.formState.errors.firstName.message})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"lastName",className:"text-sm",children:"Nom"}),s.jsx(Ie,{id:"lastName",...I.register("lastName"),autoComplete:"family-name",className:"text-sm"}),I.formState.errors.lastName&&s.jsx("span",{className:"text-red-500 text-xs",children:I.formState.errors.lastName.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"email",className:"text-sm",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10 text-sm",...i?I.register("email"):C.register("email")})]}),(i?I.formState.errors.email:C.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(P=i?I.formState.errors.email:C.formState.errors.email)==null?void 0:P.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoy  cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"university",className:"text-sm",children:"Universit"}),s.jsxs(ct,{onValueChange:S=>I.setValue("university",S),value:I.watch("university"),children:[s.jsx(st,{className:"text-sm",children:s.jsx(ut,{placeholder:"Slectionnez votre universit"})}),s.jsx(it,{children:vk.map(S=>s.jsx(re,{value:S,children:S},S))})]}),I.watch("university")==="Autre universit"&&s.jsx(Ie,{id:"otherUniversity",type:"text",placeholder:"Nom de votre universit",...I.register("otherUniversity"),className:"mt-2 text-sm"}),I.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.university.message}),I.watch("university")==="Autre universit"&&I.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"fieldOfStudy",className:"text-sm",children:"Filire"}),s.jsxs(ct,{onValueChange:S=>I.setValue("fieldOfStudy",S),value:I.watch("fieldOfStudy"),children:[s.jsx(st,{className:"text-sm",children:s.jsx(ut,{placeholder:"Slectionnez votre filire"})}),s.jsx(it,{children:xk.map(S=>s.jsx(re,{value:S,children:S},S))})]}),I.watch("fieldOfStudy")==="Autre"&&s.jsx(Ie,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filire",...I.register("otherFieldOfStudy"),className:"mt-2 text-sm"}),I.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.fieldOfStudy.message}),I.watch("fieldOfStudy")==="Autre"&&I.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"graduationYear",className:"text-sm",children:"Anne de diplme"}),s.jsxs(ct,{onValueChange:S=>I.setValue("graduationYear",S),value:I.watch("graduationYear"),children:[s.jsx(st,{className:"text-sm",children:s.jsx(ut,{placeholder:"Slectionnez votre anne"})}),s.jsx(it,{children:Array.from({length:8},(S,M)=>2024+M).map(S=>s.jsx(re,{value:S.toString(),children:S},S))})]}),I.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"password",className:"text-sm",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{id:"password",type:o?"text":"password",placeholder:"",className:"pl-10 text-sm",...i?I.register("password"):C.register("password")}),s.jsx(U,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(oO,{className:"w-4 h-4"}):s.jsx(va,{className:"w-4 h-4"})})]}),(i?I.formState.errors.password:C.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(D=i?I.formState.errors.password:C.formState.errors.password)==null?void 0:D.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{id:"confirmPassword",type:o?"text":"password",placeholder:"",className:"pl-10 text-sm",...I.register("confirmPassword")})]}),I.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.confirmPassword.message})]}),s.jsxs(U,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-sm sm:text-base",disabled:c,children:[c?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Crer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(U,{variant:"link",onClick:()=>a(!i),disabled:c,className:"w-full flex justify-center items-center text-center break-words px-1 text-sm sm:text-base",children:i?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En crant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptes."})]})]})]})};var _N="Tabs",[Fle,yme]=hs(_N,[Qx]),L5=Qx(),[Ule,jN]=Fle(_N),V5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=ac(l),[h,m]=cs({prop:n,onChange:i,defaultProp:a});return s.jsx(Ule,{scope:r,baseId:ns(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(Ae.div,{dir:d,"data-orientation":o,...u,ref:e})})});V5.displayName=_N;var F5="TabsList",U5=p.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,a=jN(F5,r),o=L5(r);return s.jsx(rM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:s.jsx(Ae.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});U5.displayName=F5;var $5="TabsTrigger",z5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=t,o=jN($5,r),l=L5(r),c=W5(o.baseId,n),u=H5(o.baseId,n),d=n===o.value;return s.jsx(nM,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(Ae.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:me(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:me(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:me(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(n)})})})});z5.displayName=$5;var B5="TabsContent",q5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...o}=t,l=jN(B5,r),c=W5(l.baseId,n),u=H5(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Kr,{present:i||d,children:({present:m})=>s.jsx(Ae.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});q5.displayName=B5;function W5(t,e){return`${t}-trigger-${e}`}function H5(t,e){return`${t}-content-${e}`}var $le=V5,G5=U5,K5=z5,Y5=q5;const uc=$le,Go=p.forwardRef(({className:t,...e},r)=>s.jsx(G5,{ref:r,className:Pe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Go.displayName=G5.displayName;const zt=p.forwardRef(({className:t,...e},r)=>s.jsx(K5,{ref:r,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));zt.displayName=K5.displayName;const ar=p.forwardRef(({className:t,...e},r)=>s.jsx(Y5,{ref:r,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ar.displayName=Y5.displayName;var NN="Dialog",[J5,wme]=hs(NN),[zle,si]=J5(NN),X5=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=cs({prop:n,defaultProp:i,onChange:a});return s.jsx(zle,{scope:e,triggerRef:l,contentRef:c,contentId:ns(),titleId:ns(),descriptionId:ns(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};X5.displayName=NN;var Q5="DialogTrigger",Z5=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=si(Q5,r),a=Xe(e,i.triggerRef);return s.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":CN(i.open),...n,ref:a,onClick:me(t.onClick,i.onOpenToggle)})});Z5.displayName=Q5;var SN="DialogPortal",[Ble,eL]=J5(SN,{forceMount:void 0}),tL=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,a=si(SN,e);return s.jsx(Ble,{scope:e,forceMount:r,children:p.Children.map(n,o=>s.jsx(Kr,{present:r||a.open,children:s.jsx(fm,{asChild:!0,container:i,children:o})}))})};tL.displayName=SN;var Rv="DialogOverlay",rL=p.forwardRef((t,e)=>{const r=eL(Rv,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=si(Rv,t.__scopeDialog);return a.modal?s.jsx(Kr,{present:n||a.open,children:s.jsx(qle,{...i,ref:e})}):null});rL.displayName=Rv;var qle=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=si(Rv,r);return s.jsx(mm,{as:ya,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ae.div,{"data-state":CN(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Wl="DialogContent",nL=p.forwardRef((t,e)=>{const r=eL(Wl,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=si(Wl,t.__scopeDialog);return s.jsx(Kr,{present:n||a.open,children:a.modal?s.jsx(Wle,{...i,ref:e}):s.jsx(Hle,{...i,ref:e})})});nL.displayName=Wl;var Wle=p.forwardRef((t,e)=>{const r=si(Wl,t.__scopeDialog),n=p.useRef(null),i=Xe(e,r.contentRef,n);return p.useEffect(()=>{const a=n.current;if(a)return Zx(a)},[]),s.jsx(sL,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:me(t.onFocusOutside,a=>a.preventDefault())})}),Hle=p.forwardRef((t,e)=>{const r=si(Wl,t.__scopeDialog),n=p.useRef(!1),i=p.useRef(!1);return s.jsx(sL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),sL=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=si(Wl,r),c=p.useRef(null),u=Xe(e,c);return Wx(),s.jsxs(s.Fragment,{children:[s.jsx(dm,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(um,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":CN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Gle,{titleId:l.titleId}),s.jsx(Yle,{contentRef:c,descriptionId:l.descriptionId})]})]})}),EN="DialogTitle",iL=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=si(EN,r);return s.jsx(Ae.h2,{id:i.titleId,...n,ref:e})});iL.displayName=EN;var aL="DialogDescription",oL=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=si(aL,r);return s.jsx(Ae.p,{id:i.descriptionId,...n,ref:e})});oL.displayName=aL;var lL="DialogClose",cL=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=si(lL,r);return s.jsx(Ae.button,{type:"button",...n,ref:e,onClick:me(t.onClick,()=>i.onOpenChange(!1))})});cL.displayName=lL;function CN(t){return t?"open":"closed"}var uL="DialogTitleWarning",[bme,dL]=ree(uL,{contentName:Wl,titleName:EN,docsSlug:"dialog"}),Gle=({titleId:t})=>{const e=dL(uL),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Kle="DialogDescriptionWarning",Yle=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dL(Kle).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Jle=X5,Xle=Z5,Qle=tL,hL=rL,fL=nL,mL=iL,pL=oL,Zle=cL;const aa=Jle,gu=Xle,ece=Qle,gL=p.forwardRef(({className:t,...e},r)=>s.jsx(hL,{ref:r,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));gL.displayName=hL.displayName;const Ni=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(ece,{children:[s.jsx(gL,{}),s.jsxs(fL,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,s.jsxs(Zle,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Xne,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ni.displayName=fL.displayName;const oa=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});oa.displayName="DialogHeader";const cg=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cg.displayName="DialogFooter";const Si=p.forwardRef(({className:t,...e},r)=>s.jsx(mL,{ref:r,className:Pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Si.displayName=mL.displayName;const vu=p.forwardRef(({className:t,...e},r)=>s.jsx(pL,{ref:r,className:Pe("text-sm text-muted-foreground",t),...e}));vu.displayName=pL.displayName;class tce{static async uploadProfilePhoto(e,r,n){if(!r.type.startsWith("image/"))throw new Error("Le fichier doit tre une image");if(r.size>5*1024*1024)throw new Error("L'image ne peut pas dpasser 5MB");const a=`profile_${Date.now()}.${r.name.split(".").pop()}`,o=tg(rg,`users/${e}/${a}`);return new Promise((l,c)=>{const u=V2(o,r,{contentType:r.type,cacheControl:"public,max-age=3600",customMetadata:{uploadedAt:new Date().toISOString(),userId:e}});u.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;n==null||n({progress:h,isComplete:!1})},d=>{console.error("Upload error:",d);let h="Erreur lors de l'upload";switch(d.code){case"storage/unauthorized":h="Vous n'tes pas autoris  upload ce fichier";break;case"storage/canceled":h="Upload annul";break;case"storage/quota-exceeded":h="Quota de stockage dpass";break;case"storage/invalid-format":h="Format de fichier invalide";break}n==null||n({progress:0,isComplete:!1,error:h}),c(new Error(h))},async()=>{try{const d=await Ib(u.snapshot.ref);n==null||n({progress:100,isComplete:!0,downloadURL:d}),l(d)}catch(d){c(d)}})})}static async deleteFile(e){try{const r=tg(rg,e);await jG(r)}catch(r){console.error("Error deleting file:",r)}}static async uploadListingImages(e,r,n){const i=r.map(async(a,o)=>{const l=Date.now(),c=`image_${o}_${l}.${a.name.split(".").pop()}`,u=tg(rg,`listings/${e}/${c}`);return new Promise((d,h)=>{const m=V2(u,a,{contentType:a.type,cacheControl:"public,max-age=3600"});m.on("state_changed",g=>{const x=g.bytesTransferred/g.totalBytes*100;n==null||n(o,{progress:x,isComplete:!1})},g=>{n==null||n(o,{progress:0,isComplete:!1,error:g.message}),h(g)},async()=>{const g=await Ib(m.snapshot.ref);n==null||n(o,{progress:100,isComplete:!0,downloadURL:g}),d(g)})})});return Promise.all(i)}static async uploadCompressedImage(e,r=1200,n=1200,i=.8){return new Promise(a=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:d}=c;u>d?u>r&&(d=d*r/u,u=r):d>n&&(u=u*n/d,d=n),o.width=u,o.height=d,l.drawImage(c,0,0,u,d),o.toBlob(h=>{if(h){const m=new File([h],e.name,{type:e.type,lastModified:Date.now()});a(m)}else a(e)},e.type,i)},c.src=URL.createObjectURL(e)})}}const vL=({currentPhotoURL:t,displayName:e,onPhotoUpdate:r})=>{var v,w;const{currentUser:n,updateUserProfile:i}=Ot(),[a,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(null),[h,m]=p.useState(null),g=p.useRef(null),x=E=>{var T;const C=(T=E.target.files)==null?void 0:T[0];if(!C)return;if(!C.type.startsWith("image/")){ue.error("Veuillez slectionner une image");return}if(C.size>5*1024*1024){ue.error("L'image ne doit pas dpasser 5MB");return}m(C);const I=new FileReader;I.onload=k=>{var R;d((R=k.target)==null?void 0:R.result)},I.readAsDataURL(C)},y=async()=>{if(!(!h||!n)){c(!0);try{const E=await tce.uploadProfilePhoto(n.uid,h,C=>{C.error&&ue.error(C.error)});await Zh(n,{photoURL:E}),await i({photoURL:E}),r&&r(E),ue.success("Photo de profil mise  jour avec succs !"),o(!1),d(null),m(null)}catch(E){console.error("Erreur lors de l'upload:",E);let C="Erreur lors de la mise  jour de la photo";E&&typeof E=="object"&&"message"in E&&typeof E.message=="string"&&(E.message.includes("duplicate")?C="Une photo avec ce nom existe dj, ressayez":E.message.includes("size")?C="Fichier trop volumineux":E.message.includes("type")&&(C="Type de fichier non support")),ue.error(C)}finally{c(!1)}}},_=async()=>{if(n){c(!0);try{await Zh(n,{photoURL:void 0}),await i({photoURL:void 0}),r&&r(void 0),ue.success("Photo de profil supprime"),o(!1)}catch(E){console.error("Erreur lors de la suppression:",E),ue.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},b=()=>{m(null),d(null),g.current&&(g.current.value="")};return s.jsxs(aa,{open:a,onOpenChange:o,children:[s.jsx(gu,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(_a,{className:"h-20 w-20",children:[s.jsx(ja,{src:t||""}),s.jsx(Na,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xl font-semibold",children:((v=e[0])==null?void 0:v.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(bl,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(bl,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Ni,{className:"max-w-md",children:[s.jsx(oa,{children:s.jsxs(Si,{className:"flex items-center gap-2",children:[s.jsx(bl,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(_a,{className:"h-32 w-32",children:[s.jsx(ja,{src:u||t||""}),s.jsx(Na,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:x,className:"hidden"}),h?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:h.name}),s.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{onClick:y,disabled:l,className:"flex-1",children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(uv,{className:"w-4 h-4 mr-2"}),l?"Upload en cours...":"Uploader"]}),s.jsx(U,{onClick:b,variant:"outline",disabled:l,children:s.jsx(Fl,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(U,{onClick:()=>{var E;return(E=g.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[s.jsx(uv,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(U,{onClick:_,variant:"outline",disabled:l,className:"w-full text-destructive hover:text-destructive",children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Fl,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]})]})]})]})},Gs=p.forwardRef(({className:t,...e},r)=>s.jsx("textarea",{className:Pe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Gs.displayName="Textarea";const mn=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},rce=()=>{const{currentUser:t,userProfile:e}=Ot(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(null),[d,h]=p.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[m,g]=p.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[x,y]=p.useState({}),[_,b]=p.useState(null),[v,w]=p.useState(""),[E,C]=p.useState((c==null?void 0:c.firstName)||""),[I,T]=p.useState((c==null?void 0:c.lastName)||""),k=async()=>{if(t)try{g(ie=>({...ie,profile:!0}));const Y=await On(Ze(be,"users",t.uid));if(Y.exists()){const ie=Y.data();u({...ie,createdAt:mn(ie.createdAt),updatedAt:mn(ie.updatedAt)})}else console.log("Aucun document utilisateur trouv dans Firestore"),u(null)}catch(Y){console.error("Erreur lors du chargement du profil:",Y),u(null)}finally{g(Y=>({...Y,profile:!1}))}};p.useEffect(()=>{t&&(k(),R(),j(),P())},[t]);const R=async()=>{if(t)try{g(ze=>({...ze,listings:!0}));const Y=$t(It(be,"listings"),Yt("sellerId","==",t.uid),qs(20)),ie=await rr(Y),de=[];ie.forEach(ze=>{const Ke=ze.data();de.push({id:ze.id,...Ke,createdAt:mn(Ke.createdAt),updatedAt:mn(Ke.updatedAt)})}),de.sort((ze,Ke)=>mn(Ke.createdAt).getTime()-mn(ze.createdAt).getTime()),n(de);const Me=de.filter(ze=>ze.status==="active");h(ze=>({...ze,totalListings:de.length,activeListings:Me.length}))}catch(Y){console.error("Erreur lors du chargement des annonces:",Y)}finally{g(Y=>({...Y,listings:!1}))}},j=async()=>{if(t)try{g(V=>({...V,reviews:!0}));const Y=$t(It(be,"reviews"),Yt("revieweeId","==",t.uid),qs(10)),ie=await rr(Y),de=[];ie.forEach(V=>{const B=V.data();de.push({id:V.id,...B,replies:Array.isArray(B.replies)?B.replies.map(J=>({...J,createdAt:J.createdAt instanceof Date?J.createdAt:J.createdAt&&typeof J.createdAt.toDate=="function"?J.createdAt.toDate():new Date})):[],likes:Array.isArray(B.likes)?B.likes:[],dislikes:Array.isArray(B.dislikes)?B.dislikes:[],createdAt:mn(B.createdAt)})}),de.sort((V,B)=>mn(B.createdAt).getTime()-mn(V.createdAt).getTime()),a(de);const Me=Array.from(new Set(de.map(V=>V.reviewerId))),ze={...x};await Promise.all(Me.map(async V=>{if(!ze[V]){const B=await On(Ze(be,"users",V));if(B.exists()){const J=B.data();ze[V]={displayName:J.displayName||"Utilisateur",photoURL:J.photoURL||void 0}}else ze[V]={displayName:""}}})),y(ze);const Ke=de.reduce((V,B)=>V+B.rating,0),Nt=de.length>0?Ke/de.length:0;h(V=>({...V,totalReviews:de.length,averageRating:Math.round(Nt*10)/10}))}catch(Y){console.error("Erreur lors du chargement des avis:",Y)}finally{g(Y=>({...Y,reviews:!1}))}},P=async()=>{if(t)try{g(Me=>({...Me,favorites:!0}));const Y=$t(It(be,"favorites"),Yt("userId","==",t.uid),qs(20)),ie=await rr(Y),de=[];if(ie.forEach(Me=>{const ze=Me.data();de.push({id:Me.id,...ze,createdAt:mn(ze.createdAt)})}),de.sort((Me,ze)=>mn(ze.createdAt).getTime()-mn(Me.createdAt).getTime()),h(Me=>({...Me,totalFavorites:de.length})),de.length>0){const Me=de.slice(0,6).map(async Ke=>{try{const Nt=await On(Ze(be,"listings",Ke.listingId));if(Nt.exists()){const V=Nt.data();return{id:Nt.id,...V,createdAt:mn(V.createdAt),updatedAt:mn(V.updatedAt)}}return null}catch(Nt){return console.error("Erreur lors du chargement d'une annonce favorite:",Nt),null}}),ze=await Promise.all(Me);l(ze.filter(Ke=>Ke!==null))}}catch(Y){console.error("Erreur lors du chargement des favoris:",Y)}finally{g(Y=>({...Y,favorites:!1}))}},D=Y=>{if(!Y)return"Date inconnue";try{const ie=mn(Y);return isNaN(ie.getTime())?"Date invalide":cc(ie,{addSuffix:!0,locale:bs})}catch{return"Date invalide"}},S=Y=>Array.from({length:5},(ie,de)=>s.jsx(Zi,{className:`h-4 w-4 ${de<Y?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},de)),M=localStorage.getItem("pendingUserData"),$=M?JSON.parse(M):{};let q=(c==null?void 0:c.displayName)||(e==null?void 0:e.displayName)||$.displayName||"";!q&&(t!=null&&t.displayName)&&(q=t.displayName),!q&&(t!=null&&t.email)&&(q=t.email.split("@")[0]),q||(q="Utilisateur");let F=(c==null?void 0:c.university)||(e==null?void 0:e.university)||$.university||"";if((c==null?void 0:c.university)==="Autre universit"&&c.otherUniversity||(e==null?void 0:e.university)==="Autre universit"&&e.otherUniversity||$.university==="Autre universit"&&$.otherUniversity){const Y=c==null?void 0:c.otherUniversity,ie=e==null?void 0:e.otherUniversity,de=$.otherUniversity;F=Y||ie||de||"Universit personnalise"}F||(F="Universit spcifie lors de l'inscription");let L=(c==null?void 0:c.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||$.fieldOfStudy||"";if((c==null?void 0:c.fieldOfStudy)==="Autre"&&c.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||$.fieldOfStudy==="Autre"&&$.otherFieldOfStudy){const Y=c==null?void 0:c.otherFieldOfStudy,ie=e==null?void 0:e.otherFieldOfStudy,de=$.otherFieldOfStudy;L=Y||ie||de||"Filire personnalise"}L||(L="Filire non spcifie");const W=(c==null?void 0:c.graduationYear)||(e==null?void 0:e.graduationYear)||$.graduationYear||"",z=(c==null?void 0:c.email)||(e==null?void 0:e.email)||$.email||(t==null?void 0:t.email)||"",X=(c==null?void 0:c.photoURL)||(e==null?void 0:e.photoURL)||"",se=(c==null?void 0:c.createdAt)||(e==null?void 0:e.createdAt),_e=(c==null?void 0:c.isVerified)||(e==null?void 0:e.isVerified),ot=(c==null?void 0:c.location)||(e==null?void 0:e.location)||"",jt=(c==null?void 0:c.co2Saved)||(e==null?void 0:e.co2Saved)||0,yt=t&&e&&t.uid===e.id,Se=async Y=>{if(t)try{const ie=Ze(be,"reviews",Y),de=i.find(Ke=>Ke.id===Y);if(!de)return;const Me=de.likes||[],ze=de.dislikes||[];Me.includes(t.uid)?await yr(ie,{likes:Me.filter(Ke=>Ke!==t.uid)}):await yr(ie,{likes:[...Me,t.uid],dislikes:ze.filter(Ke=>Ke!==t.uid)}),a(Ke=>Ke.map(Nt=>{if(Nt.id===Y){const V=Nt.likes||[],B=Nt.dislikes||[];return V.includes(t.uid)?{...Nt,likes:V.filter(J=>J!==t.uid)}:{...Nt,likes:[...V,t.uid],dislikes:B.filter(J=>J!==t.uid)}}return Nt}))}catch(ie){console.error("Error liking review:",ie),ht.error("Erreur lors du like")}},tt=async Y=>{if(t)try{const ie=Ze(be,"reviews",Y),de=i.find(Ke=>Ke.id===Y);if(!de)return;const Me=de.likes||[],ze=de.dislikes||[];ze.includes(t.uid)?await yr(ie,{dislikes:ze.filter(Ke=>Ke!==t.uid)}):await yr(ie,{dislikes:[...ze,t.uid],likes:Me.filter(Ke=>Ke!==t.uid)}),a(Ke=>Ke.map(Nt=>{if(Nt.id===Y){const V=Nt.likes||[],B=Nt.dislikes||[];return B.includes(t.uid)?{...Nt,dislikes:B.filter(J=>J!==t.uid)}:{...Nt,dislikes:[...B,t.uid],likes:V.filter(J=>J!==t.uid)}}return Nt}))}catch(ie){console.error("Error disliking review:",ie),ht.error("Erreur lors du dislike")}},Z=async Y=>{if(!(!t||!v.trim()))try{const ie=Ze(be,"reviews",Y),de=i.find(ze=>ze.id===Y);if(!de)return;const Me={userId:t.uid,comment:v.trim(),createdAt:new Date};await yr(ie,{replies:[...de.replies||[],Me]}),a(ze=>ze.map(Ke=>Ke.id===Y?{...Ke,replies:[...Ke.replies||[],Me]}:Ke)),w(""),b(null),ht.success("Rponse envoye")}catch(ie){console.error("Error replying to review:",ie),ht.error("Erreur lors de l'envoi de la rponse")}},ge=async()=>{if(t)try{const Y=`${E} ${I}`.trim();await yr(Ze(be,"users",t.uid),{firstName:E,lastName:I,displayName:Y,updatedAt:new Date}),await t.reload(),ht.success("Nom mis  jour !")}catch{ht.error("Erreur lors de la mise  jour du nom")}};return t?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 space-y-4 sm:space-y-6",children:[s.jsx(H,{children:s.jsx(he,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(vL,{currentPhotoURL:X,displayName:q}),_e&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(qe,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(fe,{className:"text-xl sm:text-2xl lg:text-3xl text-center sm:text-left w-full sm:w-auto",children:q}),_e?s.jsxs(le,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"Vrifi"]}):s.jsxs(le,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"Non vrifi"]})]}),s.jsx(at,{className:"text-sm sm:text-base text-center sm:text-left break-all",children:z}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left text-xs sm:text-sm",children:[s.jsxs("div",{children:[s.jsx(on,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Universit : ",s.jsx("span",{className:"text-xs sm:text-sm",children:F})]}),s.jsxs("div",{children:[s.jsx(_n,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Filire : ",s.jsx("span",{className:"text-xs sm:text-sm",children:L})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Anne de diplme :"})," ",s.jsx("span",{className:"text-xs sm:text-sm",children:W})]})]}),ot&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(ls,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsx("span",{className:"text-xs sm:text-sm",children:ot})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(sc,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsxs("span",{className:"text-xs sm:text-sm",children:["Membre depuis ",D(se)]})]}),jt&&jt>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(Ws,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[jt," kg CO conomiss"]})]}),!_e&&s.jsx("div",{className:"flex items-center justify-center sm:justify-start mt-3",children:s.jsx(U,{asChild:!0,size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(ve,{to:"/verification",children:[s.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Vrifier mon statut tudiant"]})})})]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsx(H,{children:s.jsx(K,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Us,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalListings}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xa,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.activeListings}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.reviews?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.averageRating||""}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.favorites?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalFavorites}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(uc,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Go,{className:"grid w-full grid-cols-4 sm:grid-cols-4",children:[s.jsxs(zt,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Us,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!m.listings&&d.totalListings>0&&s.jsx(le,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalListings})]}),s.jsxs(zt,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Zi,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!m.reviews&&d.totalReviews>0&&s.jsx(le,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalReviews})]}),s.jsxs(zt,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(sn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!m.favorites&&d.totalFavorites>0&&s.jsx(le,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalFavorites})]}),s.jsxs(zt,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(on,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Paramtres"}),s.jsx("span",{className:"sm:hidden",children:"Paramtres"})]})]}),s.jsx(ar,{value:"listings",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(at,{children:"Grez vos annonces publies sur StudyMarket"})]}),s.jsx(K,{children:m.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,ie)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(K,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ie))}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Us,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publi d'annonces."}),s.jsx(U,{asChild:!0,children:s.jsx(ve,{to:"/create",children:"Publier ma premire annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(Y=>s.jsx(Bu,{listing:Y},Y.id))})})]})}),s.jsx(ar,{value:"reviews",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Zi,{className:"w-5 h-5"}),"Avis Reus"]}),s.jsx(at,{children:"Les avis laisss par d'autres tudiants"})]}),s.jsx(K,{children:m.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((Y,ie)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((de,Me)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Me))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},ie))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Xt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reu pour le moment. Les avis apparatront aprs vos premires transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(Y=>{var ie,de,Me,ze,Ke,Nt;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:S(Y.rating)}),s.jsxs(le,{variant:"secondary",className:"text-xs",children:[Y.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:D(Y.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:Y.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((ie=x[Y.reviewerId])==null?void 0:ie.photoURL)&&s.jsx("img",{src:x[Y.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),Y.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(de=x[Y.reviewerId])!=null&&de.displayName?x[Y.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprim"})]}),s.jsx(le,{variant:"outline",className:"text-xs",children:Y.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(U,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Me=Y.likes)!=null&&Me.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>Se(Y.id),children:[s.jsx(bQ,{className:"w-4 h-4"}),s.jsx("span",{children:((ze=Y.likes)==null?void 0:ze.length)||0})]}),s.jsxs(U,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ke=Y.dislikes)!=null&&Ke.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>tt(Y.id),children:[s.jsx(wQ,{className:"w-4 h-4"}),s.jsx("span",{children:((Nt=Y.dislikes)==null?void 0:Nt.length)||0})]}),s.jsxs(U,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>b(_===Y.id?null:Y.id),children:[s.jsx(Xt,{className:"w-4 h-4"}),s.jsx("span",{children:"Rpondre"})]})]}),_===Y.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(Gs,{placeholder:"Votre rponse...",value:v,onChange:V=>w(V.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>{b(null),w("")},children:"Annuler"}),s.jsx(U,{size:"sm",onClick:()=>Z(Y.id),disabled:!v.trim(),children:"Envoyer"})]})]}),Y.replies&&Y.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:Y.replies.map((V,B)=>{var J;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:yt&&V.userId===(t==null?void 0:t.uid)?"Vous":((J=x[V.userId])==null?void 0:J.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:D(V.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:V.comment})]},B)})})]},Y.id)})})})]})}),s.jsx(ar,{value:"favorites",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(at,{children:"Les annonces que vous avez ajoutes  vos favoris"})]}),s.jsx(K,{children:m.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,ie)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(K,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ie))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les  vos favoris !"}),s.jsx(U,{asChild:!0,children:s.jsx(ve,{to:"/create",children:"Publier ma premire annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Y=>s.jsx(Bu,{listing:Y},Y.id))})})]})}),s.jsx(ar,{value:"settings",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsx(fe,{children:"Paramtres du profil"}),s.jsx(at,{children:"Modifie tes informations principales."})]}),s.jsxs(K,{children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"firstName",children:"Prnom"}),s.jsx(Ie,{id:"firstName",value:E,onChange:Y=>C(Y.target.value),autoComplete:"given-name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"lastName",children:"Nom"}),s.jsx(Ie,{id:"lastName",value:I,onChange:Y=>T(Y.target.value),autoComplete:"family-name"})]})]}),s.jsx(U,{onClick:ge,disabled:!E||!I,children:"Enregistrer"})]})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez tre connect pour voir votre profil."})})})})},rw=[{value:"all",label:"Toutes catgories",icon:null},{value:"electronics",label:"lectronique",icon:ic},{value:"vehicles",label:"Vhicules",icon:U1},{value:"real-estate",label:"Immobilier",icon:Ls},{value:"fashion",label:"Mode",icon:z1},{value:"gaming",label:"Jeux & Jouets",icon:cQ},{value:"baby",label:"Bb & Enfant",icon:QX},{value:"business",label:"quipement Pro",icon:Eh}],nce=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon tat"},{value:"fair",label:"tat correct"},{value:"poor",label:"Mauvais tat"}],sce=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus rcent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix dcroissant"}],ice=()=>{var b;const[t,e]=wj(),{listings:r,loading:n,hasMore:i,fetchListings:a,searchListings:o}=vm(),[l,c]=p.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=p.useState("grid"),[h,m]=p.useState(!1);p.useEffect(()=>{const v={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(v),o(v)},[t,o]);const g=()=>{const v={...l};o(v);const w=new URLSearchParams;v.query&&w.set("q",v.query),v.category&&w.set("category",v.category),e(w)},x=(v,w)=>{const E={...l,[v]:w};c(E)},y=()=>{a(l,!1)},_=()=>{const v={query:"",sortBy:"date"};c(v),o(v),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:v=>x("query",v.target.value),onKeyPress:v=>v.key==="Enter"&&g(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{onClick:g,className:"whitespace-nowrap",children:[s.jsx(pr,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(U,{variant:"outline",onClick:()=>m(!h),className:"lg:hidden",children:[s.jsx(am,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:rw.slice(1,6).map(v=>{const w=v.icon;return s.jsxs(U,{variant:l.category===v.value?"default":"outline",size:"sm",onClick:()=>x("category",l.category===v.value?"":v.value),className:"flex items-center gap-2",children:[w&&s.jsx(w,{className:"w-4 h-4"}),v.label]},v.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${h?"block":"hidden lg:block"}`,children:s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_,children:"Effacer"})]})}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catgorie"}),s.jsxs(ct,{value:l.category||"all",onValueChange:v=>x("category",v==="all"?"":v),children:[s.jsx(st,{children:s.jsx(ut,{})}),s.jsx(it,{children:rw.map(v=>{const w=v.icon;return s.jsx(re,{value:v.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[w&&s.jsx(w,{className:"w-4 h-4"}),v.label]})},v.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:v=>x("minPrice",v.target.value?parseInt(v.target.value):void 0)}),s.jsx(Ie,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:v=>x("maxPrice",v.target.value?parseInt(v.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"tat"}),s.jsx("div",{className:"space-y-2",children:nce.map(v=>{var w;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((w=l.condition)==null?void 0:w.includes(v.value))||!1,onChange:E=>{const C=l.condition||[],I=E.target.checked?[...C,v.value]:C.filter(T=>T!==v.value);x("condition",I.length>0?I:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:v.label})]},v.value)})})]}),s.jsx(U,{onClick:g,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[r.length," rsultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&s.jsxs(le,{variant:"secondary",children:['"',l.query,'"']}),l.category&&s.jsx(le,{variant:"secondary",children:(b=rw.find(v=>v.value===l.category))==null?void 0:b.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ct,{value:l.sortBy||"date",onValueChange:v=>x("sortBy",v),children:[s.jsx(st,{className:"w-40",children:s.jsx(ut,{})}),s.jsx(it,{children:sce.map(v=>s.jsx(re,{value:v.value,children:v.label},v.value))})]}),s.jsx(Hi,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(U,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(cO,{className:"w-4 h-4"})}),s.jsx(U,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(hO,{className:"w-4 h-4"})})]})]})]}),n&&r.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((v,w)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(K,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},w))}):r.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:r.map(v=>s.jsx(Bu,{listing:v},v.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(U,{onClick:y,disabled:n,variant:"outline",size:"lg",children:n?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun rsultat trouv"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critres de recherche"}),s.jsx(U,{onClick:_,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var Be=function(){return Be=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Be.apply(this,arguments)};function ace(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function xL(t,e,r){for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function bm(t){return t.mode==="multiple"}function _m(t){return t.mode==="range"}function uy(t){return t.mode==="single"}var oce={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function lce(t,e){return is(t,"LLLL y",e)}function cce(t,e){return is(t,"d",e)}function uce(t,e){return is(t,"LLLL",e)}function dce(t){return"".concat(t)}function hce(t,e){return is(t,"cccccc",e)}function fce(t,e){return is(t,"yyyy",e)}var mce=Object.freeze({__proto__:null,formatCaption:lce,formatDay:cce,formatMonthCaption:uce,formatWeekNumber:dce,formatWeekdayName:hce,formatYearCaption:fce}),pce=function(t,e,r){return is(t,"do MMMM (EEEE)",r)},gce=function(){return"Month: "},vce=function(){return"Go to next month"},xce=function(){return"Go to previous month"},yce=function(t,e){return is(t,"cccc",e)},wce=function(t){return"Week n. ".concat(t)},bce=function(){return"Year: "},_ce=Object.freeze({__proto__:null,labelDay:pce,labelMonthDropdown:gce,labelNext:vce,labelPrevious:xce,labelWeekNumber:wce,labelWeekday:yce,labelYearDropdown:bce});function jce(){var t="buttons",e=oce,r=mN,n={},i={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:mce,labels:_ce,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Nce(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return n?a=Bn(n):e&&(a=new Date(e,0,1)),i?o=ny(i):r&&(o=new Date(r,11,31)),{fromDate:a?Uu(a):void 0,toDate:o?Uu(o):void 0}}var yL=p.createContext(void 0);function Sce(t){var e,r=t.initialProps,n=jce(),i=Nce(r),a=i.fromDate,o=i.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(uy(r)||bm(r)||_m(r))&&(c=r.onSelect);var u=Be(Be(Be({},n),r),{captionLayout:l,classNames:Be(Be({},n.classNames),r.classNames),components:Be({},r.components),formatters:Be(Be({},n.formatters),r.formatters),fromDate:a,labels:Be(Be({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Be(Be({},n.modifiers),r.modifiers),modifiersClassNames:Be(Be({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Be(Be({},n.styles),r.styles),toDate:o});return s.jsx(yL.Provider,{value:u,children:t.children})}function Wt(){var t=p.useContext(yL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function wL(t){var e=Wt(),r=e.locale,n=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function Ece(t){return s.jsx("svg",Be({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function bL(t){var e,r,n=t.onChange,i=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=Wt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:Ece;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:n,children:a}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Cce(t){var e,r=Wt(),n=r.fromDate,i=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var h=[];if(Cie(n,i))for(var m=Bn(n),g=n.getMonth();g<=i.getMonth();g++)h.push(X0(m,g));else for(var m=Bn(new Date),g=0;g<=11;g++)h.push(X0(m,g));var x=function(_){var b=Number(_.target.value),v=X0(Bn(t.displayMonth),b);t.onChange(v)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:bL;return s.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(_){return s.jsx("option",{value:_.getMonth(),children:l(_,{locale:o})},_.getMonth())})})}function Tce(t){var e,r=t.displayMonth,n=Wt(),i=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var g=i.getFullYear(),x=a.getFullYear(),y=g;y<=x;y++)m.push(ek(y3(new Date),y));var _=function(v){var w=ek(Bn(r),Number(v.target.value));t.onChange(w)},b=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:bL;return s.jsx(b,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:_,value:r.getFullYear(),caption:d(r,{locale:o}),children:m.map(function(v){return s.jsx("option",{value:v.getFullYear(),children:d(v,{locale:o})},v.getFullYear())})})}function kce(t,e){var r=p.useState(t),n=r[0],i=r[1],a=e===void 0?n:e;return[a,i]}function Ice(t){var e=t.month,r=t.defaultMonth,n=t.today,i=e||r||n||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&zu(a,i)<0){var u=-1*(c-1);i=ei(a,u)}return o&&zu(i,o)<0&&(i=o),Bn(i)}function Ace(){var t=Wt(),e=Ice(t),r=kce(e,t.month),n=r[0],i=r[1],a=function(o){var l;if(!t.disableNavigation){var c=Bn(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,a]}function Rce(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,i=Bn(t),a=Bn(ei(i,n)),o=zu(a,i),l=[],c=0;c<o;c++){var u=ei(i,c);l.push(u)}return r&&(l=l.reverse()),l}function Pce(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Bn(t);if(!r)return ei(l,o);var c=zu(r,t);if(!(c<a))return ei(l,o)}}function Dce(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Bn(t);if(!r)return ei(l,-o);var c=zu(l,r);if(!(c<=0))return ei(l,-o)}}var _L=p.createContext(void 0);function Oce(t){var e=Wt(),r=Ace(),n=r[0],i=r[1],a=Rce(n,e),o=Pce(n,e),l=Dce(n,e),c=function(h){return a.some(function(m){return pN(h,m)})},u=function(h,m){c(h)||(m&&E3(h,m)?i(ei(h,1+e.numberOfMonths*-1)):i(h))},d={currentMonth:n,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(_L.Provider,{value:d,children:t.children})}function jm(){var t=p.useContext(_L);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function yk(t){var e,r=Wt(),n=r.classNames,i=r.styles,a=r.components,o=jm().goToMonth,l=function(d){o(ei(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:wL,u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(Cce,{onChange:l,displayMonth:t.displayMonth}),s.jsx(Tce,{onChange:l,displayMonth:t.displayMonth})]})}function Mce(t){return s.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Lce(t){return s.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Pv=p.forwardRef(function(t,e){var r=Wt(),n=r.classNames,i=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var o=a.join(" "),l=Be(Be({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),s.jsx("button",Be({},t,{ref:e,type:"button",className:o,style:l}))});function Vce(t){var e,r,n=Wt(),i=n.dir,a=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var m=u(t.previousMonth,{locale:a}),g=[o.nav_button,o.nav_button_previous].join(" "),x=d(t.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),_=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:Lce,b=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:Mce;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&s.jsx(Pv,{name:"previous-month","aria-label":m,className:g,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(_,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&s.jsx(Pv,{name:"next-month","aria-label":x,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(_,{className:o.nav_icon,style:l.nav_icon})})]})}function wk(t){var e=Wt().numberOfMonths,r=jm(),n=r.previousMonth,i=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(x){return pN(t.displayMonth,x)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&a(n)},g=function(){i&&a(i)};return s.jsx(Vce,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:i,previousMonth:n,onPreviousClick:m,onNextClick:g})}function Fce(t){var e,r=Wt(),n=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:wL,u;return i?u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=s.jsx(yk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(yk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(wk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(wk,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:n.caption,style:a.caption,children:u})}function Uce(t){var e=Wt(),r=e.footer,n=e.styles,i=e.classNames.tfoot;return r?s.jsx("tfoot",{className:i,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function $ce(t,e,r){for(var n=r?$l(new Date):ki(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=vn(n,a);i.push(o)}return i}function zce(){var t=Wt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=$ce(i,a,o);return s.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return s.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},h)})]})}function Bce(){var t,e=Wt(),r=e.classNames,n=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:zce;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(a,{})})}function qce(t){var e=Wt(),r=e.locale,n=e.formatters.formatDay;return s.jsx(s.Fragment,{children:n(t.date,{locale:r})})}var TN=p.createContext(void 0);function Wce(t){if(!bm(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(TN.Provider,{value:e,children:t.children})}return s.jsx(Hce,{initialProps:t.initialProps,children:t.children})}function Hce(t){var e=t.initialProps,r=t.children,n=e.selected,i=e.min,a=e.max,o=function(u,d,h){var m,g;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var x=!!(d.selected&&i&&(n==null?void 0:n.length)===i);if(!x){var y=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var _=n?xL([],n):[];if(d.selected){var b=_.findIndex(function(v){return Ln(u,v)});_.splice(b,1)}else _.push(u);(g=e.onSelect)===null||g===void 0||g.call(e,_,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,h=n.some(function(m){return Ln(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(TN.Provider,{value:c,children:r})}function kN(){var t=p.useContext(TN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Gce(t,e){var r=e||{},n=r.from,i=r.to;return n&&i?Ln(i,t)&&Ln(n,t)?void 0:Ln(i,t)?{from:i,to:void 0}:Ln(n,t)?void 0:a_(n,t)?{from:t,to:i}:{from:n,to:t}:i?a_(t,i)?{from:i,to:t}:{from:t,to:i}:n?E3(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var IN=p.createContext(void 0);function Kce(t){if(!_m(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(IN.Provider,{value:e,children:t.children})}return s.jsx(Yce,{initialProps:t.initialProps,children:t.children})}function Yce(t){var e=t.initialProps,r=t.children,n=e.selected,i=n||{},a=i.from,o=i.to,l=e.min,c=e.max,u=function(g,x,y){var _,b;(_=e.onDayClick)===null||_===void 0||_.call(e,g,x,y);var v=Gce(g,n);(b=e.onSelect)===null||b===void 0||b.call(e,v,g,x,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],Ln(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:J0(a,l-1),before:vn(a,l-1)}),a&&o&&d.disabled.push({after:a,before:vn(a,l-1)}),!a&&o&&d.disabled.push({after:J0(o,l-1),before:vn(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:vn(a,-c+1)}),d.disabled.push({after:vn(a,c-1)})),a&&o){var h=mi(o,a)+1,m=c-h;d.disabled.push({before:J0(a,m)}),d.disabled.push({after:vn(o,m)})}!a&&o&&(d.disabled.push({before:vn(o,-c+1)}),d.disabled.push({after:vn(o,c-1)}))}return s.jsx(IN.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function AN(){var t=p.useContext(IN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function ug(t){return Array.isArray(t)?xL([],t):t!==void 0?[t]:[]}function Jce(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],i=r[1];e[n]=ug(i)}),e}var ri;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ri||(ri={}));var Xce=ri.Selected,Ui=ri.Disabled,Qce=ri.Hidden,Zce=ri.Today,nw=ri.RangeEnd,sw=ri.RangeMiddle,iw=ri.RangeStart,eue=ri.Outside;function tue(t,e,r){var n,i=(n={},n[Xce]=ug(t.selected),n[Ui]=ug(t.disabled),n[Qce]=ug(t.hidden),n[Zce]=[t.today],n[nw]=[],n[sw]=[],n[iw]=[],n[eue]=[],n);return t.fromDate&&i[Ui].push({before:t.fromDate}),t.toDate&&i[Ui].push({after:t.toDate}),bm(t)?i[Ui]=i[Ui].concat(e.modifiers[Ui]):_m(t)&&(i[Ui]=i[Ui].concat(r.modifiers[Ui]),i[iw]=r.modifiers[iw],i[sw]=r.modifiers[sw],i[nw]=r.modifiers[nw]),i}var jL=p.createContext(void 0);function rue(t){var e=Wt(),r=kN(),n=AN(),i=tue(e,r,n),a=Jce(e.modifiers),o=Be(Be({},i),a);return s.jsx(jL.Provider,{value:o,children:t.children})}function NL(){var t=p.useContext(jL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function nue(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function sue(t){return!!(t&&typeof t=="object"&&"from"in t)}function iue(t){return!!(t&&typeof t=="object"&&"after"in t)}function aue(t){return!!(t&&typeof t=="object"&&"before"in t)}function oue(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function lue(t,e){var r,n=e.from,i=e.to;if(n&&i){var a=mi(i,n)<0;a&&(r=[i,n],n=r[0],i=r[1]);var o=mi(t,n)>=0&&mi(i,t)>=0;return o}return i?Ln(i,t):n?Ln(n,t):!1}function cue(t){return hN(t)}function uue(t){return Array.isArray(t)&&t.every(hN)}function due(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(cue(r))return Ln(t,r);if(uue(r))return r.includes(t);if(sue(r))return lue(t,r);if(oue(r))return r.dayOfWeek.includes(t.getDay());if(nue(r)){var n=mi(r.before,t),i=mi(r.after,t),a=n>0,o=i<0,l=a_(r.before,r.after);return l?o&&a:a||o}return iue(r)?mi(t,r.after)>0:aue(r)?mi(r.before,t)>0:typeof r=="function"?r(t):!1})}function RN(t,e,r){var n=Object.keys(e).reduce(function(a,o){var l=e[o];return due(t,l)&&a.push(o),a},[]),i={};return n.forEach(function(a){return i[a]=!0}),r&&!pN(t,r)&&(i.outside=!0),i}function hue(t,e){for(var r=Bn(t[0]),n=ny(t[t.length-1]),i,a,o=r;o<=n;){var l=RN(o,e),c=!l.disabled&&!l.hidden;if(!c){o=vn(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=vn(o,1)}return a||i}var fue=365;function SL(t,e){var r=e.moveBy,n=e.direction,i=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,h=i.locale,m={day:vn,week:i_,month:ei,year:gse,startOfWeek:function(_){return i.ISOWeek?$l(_):ki(_,{locale:h,weekStartsOn:c})},endOfWeek:function(_){return i.ISOWeek?w3(_):fN(_,{locale:h,weekStartsOn:c})}},g=m[r](t,n==="after"?1:-1);n==="before"&&u?g=vse([u,g]):n==="after"&&d&&(g=xse([d,g]));var x=!0;if(a){var y=RN(g,a);x=!y.disabled&&!y.hidden}return x?g:l.count>fue?l.lastFocused:SL(g,{moveBy:r,direction:n,context:i,modifiers:a,retry:Be(Be({},l),{count:l.count+1})})}var EL=p.createContext(void 0);function mue(t){var e=jm(),r=NL(),n=p.useState(),i=n[0],a=n[1],o=p.useState(),l=o[0],c=o[1],u=hue(e.displayMonths,r),d=i??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(i),a(void 0)},m=function(_){a(_)},g=Wt(),x=function(_,b){if(i){var v=SL(i,{moveBy:_,direction:b,context:g,modifiers:r});Ln(i,v)||(e.goToDate(v,i),m(v))}},y={focusedDay:i,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return s.jsx(EL.Provider,{value:y,children:t.children})}function PN(){var t=p.useContext(EL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function pue(t,e){var r=NL(),n=RN(t,r,e);return n}var DN=p.createContext(void 0);function gue(t){if(!uy(t.initialProps)){var e={selected:void 0};return s.jsx(DN.Provider,{value:e,children:t.children})}return s.jsx(vue,{initialProps:t.initialProps,children:t.children})}function vue(t){var e=t.initialProps,r=t.children,n=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},i={selected:e.selected,onDayClick:n};return s.jsx(DN.Provider,{value:i,children:r})}function CL(){var t=p.useContext(DN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function xue(t,e){var r=Wt(),n=CL(),i=kN(),a=AN(),o=PN(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,m=o.focus,g=o.focusMonthBefore,x=o.focusMonthAfter,y=o.focusYearBefore,_=o.focusYearAfter,b=o.focusStartOfWeek,v=o.focusEndOfWeek,w=function(F){var L,W,z,X;uy(r)?(L=n.onDayClick)===null||L===void 0||L.call(n,t,e,F):bm(r)?(W=i.onDayClick)===null||W===void 0||W.call(i,t,e,F):_m(r)?(z=a.onDayClick)===null||z===void 0||z.call(a,t,e,F):(X=r.onDayClick)===null||X===void 0||X.call(r,t,e,F)},E=function(F){var L;m(t),(L=r.onDayFocus)===null||L===void 0||L.call(r,t,e,F)},C=function(F){var L;h(),(L=r.onDayBlur)===null||L===void 0||L.call(r,t,e,F)},I=function(F){var L;(L=r.onDayMouseEnter)===null||L===void 0||L.call(r,t,e,F)},T=function(F){var L;(L=r.onDayMouseLeave)===null||L===void 0||L.call(r,t,e,F)},k=function(F){var L;(L=r.onDayPointerEnter)===null||L===void 0||L.call(r,t,e,F)},R=function(F){var L;(L=r.onDayPointerLeave)===null||L===void 0||L.call(r,t,e,F)},j=function(F){var L;(L=r.onDayTouchCancel)===null||L===void 0||L.call(r,t,e,F)},P=function(F){var L;(L=r.onDayTouchEnd)===null||L===void 0||L.call(r,t,e,F)},D=function(F){var L;(L=r.onDayTouchMove)===null||L===void 0||L.call(r,t,e,F)},S=function(F){var L;(L=r.onDayTouchStart)===null||L===void 0||L.call(r,t,e,F)},M=function(F){var L;(L=r.onDayKeyUp)===null||L===void 0||L.call(r,t,e,F)},$=function(F){var L;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?y():g();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?_():x();break;case"Home":F.preventDefault(),F.stopPropagation(),b();break;case"End":F.preventDefault(),F.stopPropagation(),v();break}(L=r.onDayKeyDown)===null||L===void 0||L.call(r,t,e,F)},q={onClick:w,onFocus:E,onBlur:C,onKeyDown:$,onKeyUp:M,onMouseEnter:I,onMouseLeave:T,onPointerEnter:k,onPointerLeave:R,onTouchCancel:j,onTouchEnd:P,onTouchMove:D,onTouchStart:S};return q}function yue(){var t=Wt(),e=CL(),r=kN(),n=AN(),i=uy(t)?e.selected:bm(t)?r.selected:_m(t)?n.selected:void 0;return i}function wue(t){return Object.values(ri).includes(t)}function bue(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var i=t.modifiersClassNames[n];if(i)r.push(i);else if(wue(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function _ue(t,e){var r=Be({},t.styles.day);return Object.keys(e).forEach(function(n){var i;r=Be(Be({},r),(i=t.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function jue(t,e,r){var n,i,a,o=Wt(),l=PN(),c=pue(t,e),u=xue(t,c),d=yue(),h=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var I;c.outside||l.focusedDay&&h&&Ln(l.focusedDay,t)&&((I=r.current)===null||I===void 0||I.focus())},[l.focusedDay,t,r,h,c.outside]);var m=bue(o,c).join(" "),g=_ue(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:qce,_=s.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),b={style:g,className:m,children:_,role:"gridcell"},v=l.focusTarget&&Ln(l.focusTarget,t)&&!c.outside,w=l.focusedDay&&Ln(l.focusedDay,t),E=Be(Be(Be({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||v?0:-1,n)),u),C={isButton:h,isHidden:x,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:b};return C}function Nue(t){var e=p.useRef(null),r=jue(t.date,t.displayMonth,e);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Pv,Be({name:"day",ref:e},r.buttonProps)):s.jsx("div",Be({},r.divProps))}function Sue(t){var e=t.number,r=t.dates,n=Wt(),i=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(g){i(e,r,g)};return s.jsx(Pv,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function Eue(t){var e,r,n=Wt(),i=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Nue,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:Sue,d;return o&&(d=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(u,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(h){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:t.displayMonth,date:h})},Nie(h))})]})}function bk(t,e,r){for(var n=r!=null&&r.ISOWeek?w3(e):fN(e,r),i=r!=null&&r.ISOWeek?$l(t):ki(t,r),a=mi(n,i),o=[],l=0;l<=a;l++)o.push(vn(i,l));var c=o.reduce(function(u,d){var h=r!=null&&r.ISOWeek?_3(d):N3(d,r),m=u.find(function(g){return g.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Cue(t,e){var r=bk(Bn(t),ny(t),e);if(e!=null&&e.useFixedWeeks){var n=Eie(t,e);if(n<6){var i=r[r.length-1],a=i.dates[i.dates.length-1],o=i_(a,6-n),l=bk(i_(a,1),o,e);r.push.apply(r,l)}}return r}function Tue(t){var e,r,n,i=Wt(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,h=i.weekStartsOn,m=i.firstWeekContainsDate,g=i.ISOWeek,x=Cue(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:g,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),y=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:Bce,_=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:Eue,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:Uce;return s.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&s.jsx(y,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(v){return s.jsx(_,{displayMonth:t.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),s.jsx(b,{displayMonth:t.displayMonth})]})}function kue(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Iue=kue()?p.useLayoutEffect:p.useEffect,aw=!1,Aue=0;function _k(){return"react-day-picker-".concat(++Aue)}function Rue(t){var e,r=t??(aw?_k():null),n=p.useState(r),i=n[0],a=n[1];return Iue(function(){i===null&&a(_k())},[]),p.useEffect(function(){aw===!1&&(aw=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Pue(t){var e,r,n=Wt(),i=n.dir,a=n.classNames,o=n.styles,l=n.components,c=jm().displayMonths,u=Rue(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],m=o.month,g=t.displayIndex===0,x=t.displayIndex===c.length-1,y=!g&&!x;i==="rtl"&&(e=[g,x],x=e[0],g=e[1]),g&&(h.push(a.caption_start),m=Be(Be({},m),o.caption_start)),x&&(h.push(a.caption_end),m=Be(Be({},m),o.caption_end)),y&&(h.push(a.caption_between),m=Be(Be({},m),o.caption_between));var _=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:Fce;return s.jsxs("div",{className:h.join(" "),style:m,children:[s.jsx(_,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(Tue,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Due(t){var e=Wt(),r=e.classNames,n=e.styles;return s.jsx("div",{className:r.months,style:n.months,children:t.children})}function Oue(t){var e,r,n=t.initialProps,i=Wt(),a=PN(),o=jm(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var h=Be(Be({},i.styles.root),i.style),m=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,y){var _;return Be(Be({},x),(_={},_[y]=n[y],_))},{}),g=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:Due;return s.jsx("div",Be({className:d.join(" "),style:h,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:s.jsx(g,{children:o.displayMonths.map(function(x,y){return s.jsx(Pue,{displayIndex:y,displayMonth:x},y)})})}))}function Mue(t){var e=t.children,r=ace(t,["children"]);return s.jsx(Sce,{initialProps:r,children:s.jsx(Oce,{children:s.jsx(gue,{initialProps:r,children:s.jsx(Wce,{initialProps:r,children:s.jsx(Kce,{initialProps:r,children:s.jsx(rue,{children:s.jsx(mue,{children:e})})})})})})})}function Lue(t){return s.jsx(Mue,Be({},t,{children:s.jsx(Oue,{initialProps:t})}))}function TL({className:t,classNames:e,showOutsideDays:r=!0,...n}){return s.jsx(Lue,{showOutsideDays:r,className:Pe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Pe(Jb({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Pe("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Pe(Jb({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(Hne,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(i3,{className:"h-4 w-4"})},...n})}TL.displayName="Calendar";var ON="Popover",[kL,_me]=hs(ON,[hd]),Nm=hd(),[Vue,Ko]=kL(ON),IL=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=Nm(e),c=p.useRef(null),[u,d]=p.useState(!1),[h=!1,m]=cs({prop:n,defaultProp:i,onChange:a});return s.jsx(Q1,{...l,children:s.jsx(Vue,{scope:e,contentId:ns(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:r})})};IL.displayName=ON;var AL="PopoverAnchor",Fue=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Ko(AL,r),a=Nm(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Jx,{...a,...n,ref:e})});Fue.displayName=AL;var RL="PopoverTrigger",PL=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Ko(RL,r),a=Nm(r),o=Xe(e,i.triggerRef),l=s.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":VL(i.open),...n,ref:o,onClick:me(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Jx,{asChild:!0,...a,children:l})});PL.displayName=RL;var MN="PopoverPortal",[Uue,$ue]=kL(MN,{forceMount:void 0}),DL=t=>{const{__scopePopover:e,forceMount:r,children:n,container:i}=t,a=Ko(MN,e);return s.jsx(Uue,{scope:e,forceMount:r,children:s.jsx(Kr,{present:r||a.open,children:s.jsx(fm,{asChild:!0,container:i,children:n})})})};DL.displayName=MN;var Gu="PopoverContent",OL=p.forwardRef((t,e)=>{const r=$ue(Gu,t.__scopePopover),{forceMount:n=r.forceMount,...i}=t,a=Ko(Gu,t.__scopePopover);return s.jsx(Kr,{present:n||a.open,children:a.modal?s.jsx(zue,{...i,ref:e}):s.jsx(Bue,{...i,ref:e})})});OL.displayName=Gu;var zue=p.forwardRef((t,e)=>{const r=Ko(Gu,t.__scopePopover),n=p.useRef(null),i=Xe(e,n),a=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return Zx(o)},[]),s.jsx(mm,{as:ya,allowPinchZoom:!0,children:s.jsx(ML,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:me(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Bue=p.forwardRef((t,e)=>{const r=Ko(Gu,t.__scopePopover),n=p.useRef(!1),i=p.useRef(!1);return s.jsx(ML,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),ML=p.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=Ko(Gu,r),g=Nm(r);return Wx(),s.jsx(dm,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(um,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Z1,{"data-state":VL(m.open),role:"dialog",id:m.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),LL="PopoverClose",que=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Ko(LL,r);return s.jsx(Ae.button,{type:"button",...n,ref:e,onClick:me(t.onClick,()=>i.onOpenChange(!1))})});que.displayName=LL;var Wue="PopoverArrow",Hue=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Nm(r);return s.jsx(eN,{...i,...n,ref:e})});Hue.displayName=Wue;function VL(t){return t?"open":"closed"}var Gue=IL,Kue=PL,Yue=DL,FL=OL;const Jue=Gue,Xue=Kue,UL=p.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},i)=>s.jsx(Yue,{children:s.jsx(FL,{ref:i,align:e,sideOffset:r,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));UL.displayName=FL.displayName;const Tc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},dy=lm((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espces",icon:"",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immdiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"",description:"Virement SEPA scuris",fees:0,processingTime:"1-2 jours ouvrs",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"",description:"Paiement scuris via PayPal",fees:2.9,processingTime:"Immdiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"",description:"Paiement mobile instantan",fees:0,processingTime:"Immdiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async r=>{try{t({loading:!0});const n=e().generateSecurityCode(),i={...r,securityCode:n,status:"pending",createdAt:Pr(),updatedAt:Pr()},a=await Du(It(be,"paymentRequests"),i),o={id:a.id,...r,securityCode:n,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),ue.success("Demande de paiement cre avec succs"),a.id}catch(n){throw console.error("Erreur lors de la cration de la demande de paiement:",n),ue.error("Erreur lors de la cration de la demande de paiement"),t({loading:!1}),n}},updatePaymentStatus:async(r,n,i)=>{try{const a={status:n,updatedAt:Pr()};i&&(a.notes=i),await yr(Ze(be,"paymentRequests",r),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===r?{...c,status:n,notes:i||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirm",completed:"Paiement termin",cancelled:"Paiement annul",disputed:"Litige signal"};ue.success(o[n]||"Statut mis  jour")}catch(a){console.error("Erreur lors de la mise  jour du statut:",a),ue.error("Erreur lors de la mise  jour du statut")}},fetchUserPaymentRequests:async r=>{if(r)try{t({loading:!0});const n=$t(It(be,"paymentRequests"),Yt("buyerId","==",r),qs(50)),i=$t(It(be,"paymentRequests"),Yt("sellerId","==",r),qs(50)),[a,o]=await Promise.all([rr(n),rr(i)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:Tc(u.createdAt),updatedAt:Tc(u.updatedAt),meetingDateTime:u.meetingDateTime?Tc(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:Tc(u.createdAt),updatedAt:Tc(u.updatedAt),meetingDateTime:u.meetingDateTime?Tc(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(n){console.error("Erreur lors du chargement des demandes de paiement:",n),ue.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(r,n)=>{switch(r){case"cash":return!0;case"transfer":return n.bankDetails&&n.bankDetails.iban&&n.bankDetails.accountName;case"paypal":return n.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.paypalEmail);case"lydia":return n.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(n.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(r,n)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===n);return a?r*a.fees/100:0},getPaymentInstructions:(r,n)=>{var a,o,l;const i=[];switch(r){case"cash":i.push(" Paiement en espces"," Rencontrez-vous au lieu convenu"," Vrifiez l'objet avant de payer"," Demandez un reu si ncessaire",` Code de scurit : ${n.securityCode}`);break;case"transfer":i.push(" Virement bancaire SEPA"," Utilisez les coordonnes bancaires fournies"," Indiquez la rfrence de transaction"," Dlai : 1-2 jours ouvrs",` Code de scurit : ${n.securityCode}`),(a=n.paymentDetails)!=null&&a.bankDetails&&i.push(` IBAN : ${n.paymentDetails.bankDetails.iban}`,` Titulaire : ${n.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push(" Paiement PayPal"," Envoyez le paiement  l'adresse email fournie",' Utilisez "Biens et services" pour la protection'," Paiement instantan",` Code de scurit : ${n.securityCode}`),(o=n.paymentDetails)!=null&&o.paypalEmail&&i.push(` Email PayPal : ${n.paymentDetails.paypalEmail}`);break;case"lydia":i.push(" Paiement Lydia"," Envoyez le paiement au numro fourni"," Indiquez la rfrence de transaction"," Paiement instantan",` Code de scurit : ${n.securityCode}`),(l=n.paymentDetails)!=null&&l.lydiaPhone&&i.push(` Numro Lydia : ${n.paymentDetails.lydiaPhone}`);break}return i}}));var $L="https://js.stripe.com/v3",Que=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,jk="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Zue=function(){for(var e=document.querySelectorAll('script[src^="'.concat($L,'"]')),r=0;r<e.length;r++){var n=e[r];if(Que.test(n.src))return n}return null},Nk=function(e){var r="",n=document.createElement("script");n.src="".concat($L).concat(r);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},ede=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:r})},qd=null,Cp=null,Tp=null,tde=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},rde=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},nde=function(e){return qd!==null?qd:(qd=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(jk),window.Stripe){r(window.Stripe);return}try{var i=Zue();if(i&&e)console.warn(jk);else if(!i)i=Nk(e);else if(i&&Tp!==null&&Cp!==null){var a;i.removeEventListener("load",Tp),i.removeEventListener("error",Cp),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=Nk(e)}Tp=rde(r,n),Cp=tde(n),i.addEventListener("load",Tp),i.addEventListener("error",Cp)}catch(o){n(o);return}}),qd.catch(function(r){return qd=null,Promise.reject(r)}))},sde=function(e,r,n){if(e===null)return null;var i=e.apply(void 0,r);return ede(i,n),i},Wd,zL=!1,BL=function(){return Wd||(Wd=nde(null).catch(function(e){return Wd=null,Promise.reject(e)}),Wd)};Promise.resolve().then(function(){return BL()}).catch(function(t){zL||console.warn(t)});var ide=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];zL=!0;var i=Date.now();return BL().then(function(a){return sde(a,r,i)})},qL={exports:{}},ade="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ode=ade,lde=ode;function WL(){}function HL(){}HL.resetWarningCache=WL;var cde=function(){function t(n,i,a,o,l,c){if(c!==lde){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:HL,resetWarningCache:WL};return r.PropTypes=r,r};qL.exports=cde();var ude=qL.exports;const nr=Fv(ude);function Sk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ek(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(r),!0).forEach(function(n){GL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dg=function(e){return typeof e}:dg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function GL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KL(t,e){return dde(t)||hde(t,e)||fde(t,e)||mde()}function dde(t){if(Array.isArray(t))return t}function hde(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],i=!0,a=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function fde(t,e){if(t){if(typeof t=="string")return Ck(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ck(t,e)}}function Ck(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kn=function(e,r,n){var i=!!n,a=Ce.useRef(n);Ce.useEffect(function(){a.current=n},[n]),Ce.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,o),function(){e.off(r,o)}},[i,r,e,a])},g_=function(e){var r=Ce.useRef(e);return Ce.useEffect(function(){r.current=e},[e]),r.current},Ku=function(e){return e!==null&&dg(e)==="object"},pde=function(e){return Ku(e)&&typeof e.then=="function"},gde=function(e){return Ku(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Tk="[object Object]",vde=function t(e,r){if(!Ku(e)||!Ku(r))return e===r;var n=Array.isArray(e),i=Array.isArray(r);if(n!==i)return!1;var a=Object.prototype.toString.call(e)===Tk,o=Object.prototype.toString.call(r)===Tk;if(a!==o)return!1;if(!a&&!n)return e===r;var l=Object.keys(e),c=Object.keys(r);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var h=0;h<c.length;h+=1)u[c[h]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var g=e,x=r,y=function(b){return t(g[b],x[b])};return m.every(y)},YL=function(e,r,n){return Ku(e)?Object.keys(e).reduce(function(i,a){var o=!Ku(r)||!vde(e[a],r[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?Ek(Ek({},i||{}),{},GL({},a,e[a])):i},null):null},JL="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",kk=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:JL;if(e===null||gde(e))return e;throw new Error(r)},xde=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:JL;if(pde(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return kk(i,r)})};var n=kk(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},yde=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},hy=Ce.createContext(null);hy.displayName="ElementsContext";var XL=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},QL=function(e){var r=e.stripe,n=e.options,i=e.children,a=Ce.useMemo(function(){return xde(r)},[r]),o=Ce.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),l=KL(o,2),c=l[0],u=l[1];Ce.useEffect(function(){var m=!0,g=function(y){u(function(_){return _.stripe?_:{stripe:y,elements:y.elements(n)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(x){x&&m&&g(x)}):a.tag==="sync"&&!c.stripe&&g(a.stripe),function(){m=!1}},[a,c,n]);var d=g_(r);Ce.useEffect(function(){d!==null&&d!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,r]);var h=g_(n);return Ce.useEffect(function(){if(c.elements){var m=YL(n,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,h,c.elements]),Ce.useEffect(function(){yde(c.stripe)},[c.stripe]),Ce.createElement(hy.Provider,{value:c},i)};QL.propTypes={stripe:nr.any,options:nr.object};var wde=function(e){var r=Ce.useContext(hy);return XL(r,e)},bde=function(){var e=wde("calls useElements()"),r=e.elements;return r};nr.func.isRequired;var ZL=Ce.createContext(null);ZL.displayName="CustomCheckoutSdkContext";var _de=function(e,r){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CustomCheckoutProvider> provider."));return e},jde=Ce.createContext(null);jde.displayName="CustomCheckoutContext";nr.any,nr.shape({clientSecret:nr.string.isRequired,elementsOptions:nr.object}).isRequired;var v_=function(e){var r=Ce.useContext(ZL),n=Ce.useContext(hy);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return r?_de(r,e):XL(n,e)},Nde=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Nr=function(e,r){var n="".concat(Nde(e),"Element"),i=function(c){var u=c.id,d=c.className,h=c.options,m=h===void 0?{}:h,g=c.onBlur,x=c.onFocus,y=c.onReady,_=c.onChange,b=c.onEscape,v=c.onClick,w=c.onLoadError,E=c.onLoaderStart,C=c.onNetworksChange,I=c.onConfirm,T=c.onCancel,k=c.onShippingAddressChange,R=c.onShippingRateChange,j=v_("mounts <".concat(n,">")),P="elements"in j?j.elements:null,D="customCheckoutSdk"in j?j.customCheckoutSdk:null,S=Ce.useState(null),M=KL(S,2),$=M[0],q=M[1],F=Ce.useRef(null),L=Ce.useRef(null);Kn($,"blur",g),Kn($,"focus",x),Kn($,"escape",b),Kn($,"click",v),Kn($,"loaderror",w),Kn($,"loaderstart",E),Kn($,"networkschange",C),Kn($,"confirm",I),Kn($,"cancel",T),Kn($,"shippingaddresschange",k),Kn($,"shippingratechange",R),Kn($,"change",_);var W;y&&(e==="expressCheckout"?W=y:W=function(){y($)}),Kn($,"ready",W),Ce.useLayoutEffect(function(){if(F.current===null&&L.current!==null&&(P||D)){var X=null;D?X=D.createElement(e,m):P&&(X=P.create(e,m)),F.current=X,q(X),X&&X.mount(L.current)}},[P,D,m]);var z=g_(m);return Ce.useEffect(function(){if(F.current){var X=YL(m,z,["paymentRequest"]);X&&"update"in F.current&&F.current.update(X)}},[m,z]),Ce.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),Ce.createElement("div",{id:u,className:d,ref:L})},a=function(c){v_("mounts <".concat(n,">"));var u=c.id,d=c.className;return Ce.createElement("div",{id:u,className:d})},o=r?a:i;return o.propTypes={id:nr.string,className:nr.string,onChange:nr.func,onBlur:nr.func,onFocus:nr.func,onReady:nr.func,onEscape:nr.func,onClick:nr.func,onLoadError:nr.func,onLoaderStart:nr.func,onNetworksChange:nr.func,onConfirm:nr.func,onCancel:nr.func,onShippingAddressChange:nr.func,onShippingRateChange:nr.func,options:nr.object},o.displayName=n,o.__elementType=e,o},Sr=typeof window>"u",Sde=Ce.createContext(null);Sde.displayName="EmbeddedCheckoutProviderContext";var Ede=function(){var e=v_("calls useStripe()"),r=e.stripe;return r};Nr("auBankAccount",Sr);Nr("card",Sr);Nr("cardNumber",Sr);Nr("cardExpiry",Sr);Nr("cardCvc",Sr);Nr("fpxBank",Sr);Nr("iban",Sr);Nr("idealBank",Sr);Nr("p24Bank",Sr);Nr("epsBank",Sr);Nr("payment",Sr);Nr("expressCheckout",Sr);Nr("currencySelector",Sr);Nr("paymentRequestButton",Sr);Nr("linkAuthentication",Sr);Nr("address",Sr);Nr("shippingAddress",Sr);Nr("paymentMethodMessaging",Sr);Nr("affirmMessage",Sr);Nr("afterpayClearpayMessage",Sr);const Cde=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{Ede(),bde();const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(h=>setTimeout(h,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);ue.success("Paiement russi !"),r(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),n(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(at,{children:"Paiement scuris via Stripe"})]}),s.jsx(K,{children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(Bt,{className:"border-red-200 bg-red-50",children:[s.jsx(Qt,{className:"h-4 w-4 text-red-600"}),s.jsx(qt,{className:"text-red-800",children:o})]}),s.jsxs(Bt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Mu,{className:"h-4 w-4 text-blue-600"}),s.jsx(qt,{className:"text-blue-800",children:"Vos informations de paiement sont scurises et cryptes par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succs : 4242 4242 4242 4242"}),s.jsx("li",{children:"chec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre  3 chiffres"})]})]}),s.jsx(U,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Mu,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},Ik=ide("your_stripe_publishable_key"),Tde=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return Ik?s.jsx(QL,{stripe:Ik,options:i,children:s.jsx(Cde,{amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})}):s.jsxs(Bt,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Qt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(qt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre cl publique Stripe dans le fichier .env"]})]})},kde=({amount:t,currency:e,onMethodSelect:r,selectedMethod:n})=>{const{paymentMethods:i,calculateFees:a}=dy(),[o,l]=p.useState({}),[c,u]=p.useState({}),[d,h]=p.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:Mr,description:"Paiement scuris par carte",fees:1.5,processingTime:"Immdiat",securityLevel:"high",available:!0},...i],g=C=>{switch(C){case"card":return Mr;case"cash":return nO;case"transfer":return eQ;case"paypal":return Mr;case"lydia":return ic;default:return Mr}},x=C=>{switch(C){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},y=(C,I)=>{var k,R;const T={};switch(C){case"card":return!0;case"transfer":(k=I.bankDetails)!=null&&k.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(I.bankDetails.iban.replace(/\s/g,""))||(T.iban="Format IBAN invalide"):T.iban="IBAN requis",(R=I.bankDetails)!=null&&R.accountName||(T.accountName="Nom du titulaire requis");break;case"paypal":I.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.paypalEmail)||(T.paypalEmail="Format email invalide"):T.paypalEmail="Email PayPal requis";break;case"lydia":I.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(I.lydiaPhone.replace(/\s/g,""))||(T.lydiaPhone="Format de tlphone invalide"):T.lydiaPhone="Numro de tlphone requis";break}return u(T),Object.keys(T).length===0},_=C=>{if(C==="card"){r(C,{});return}const I=o[C]||{};(C==="cash"||y(C,I))&&r(C,I)},b=(C,I,T)=>{l(k=>({...k,[C]:{...k[C],[I]:T}}))},v=(C,I)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:I||"EUR"}).format(C),w=C=>{h(C),r("card",{stripePaymentId:C})},E=C=>{console.error("Stripe payment error:",C)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant  payer : ",s.jsx("span",{className:"font-semibold text-primary",children:v(t,e)})]})]}),n==="card"?s.jsx(Tde,{amount:t,currency:e,onPaymentSuccess:w,onPaymentError:E}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(C=>{var j,P,D,S,M,$,q,F;const I=g(C.type),T=C.type==="card"?t*C.fees/100:a(t,C.type),k=t+T,R=n===C.type;return s.jsxs(H,{className:`cursor-pointer transition-all hover:shadow-md ${R?"ring-2 ring-primary bg-primary/5":""} ${C.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>C.available&&_(C.type),children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(I,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(fe,{className:"text-lg",children:C.name}),s.jsx(at,{className:"text-sm",children:C.description})]})]}),R&&s.jsx(lt,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(K,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(At,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:C.processingTime})]}),s.jsxs(le,{className:x(C.securityLevel),children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),C.securityLevel==="high"?"Trs scuris":C.securityLevel==="medium"?"Scuris":"Basique"]})]}),T>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:v(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-blue-600",children:[s.jsxs("span",{children:["Frais (",C.fees,"%) :"]}),s.jsx("span",{children:v(T,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:v(k,e)})]})]}),R&&C.type!=="cash"&&C.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[C.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:`iban-${C.id}`,children:"IBAN *"}),s.jsx(Ie,{id:`iban-${C.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((P=(j=o[C.type])==null?void 0:j.bankDetails)==null?void 0:P.iban)||"",onChange:L=>{var W;return b(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,iban:L.target.value})},className:c.iban?"border-red-500":""}),c.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:`account-name-${C.id}`,children:"Nom du titulaire *"}),s.jsx(Ie,{id:`account-name-${C.id}`,placeholder:"Jean Dupont",value:((S=(D=o[C.type])==null?void 0:D.bankDetails)==null?void 0:S.accountName)||"",onChange:L=>{var W;return b(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,accountName:L.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:`bic-${C.id}`,children:"BIC (optionnel)"}),s.jsx(Ie,{id:`bic-${C.id}`,placeholder:"BNPAFRPP",value:(($=(M=o[C.type])==null?void 0:M.bankDetails)==null?void 0:$.bic)||"",onChange:L=>{var W;return b(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,bic:L.target.value})}})]})]}),C.type==="paypal"&&s.jsxs("div",{children:[s.jsx(ye,{htmlFor:`paypal-email-${C.id}`,children:"Email PayPal *"}),s.jsx(Ie,{id:`paypal-email-${C.id}`,type:"email",placeholder:"votre.email@example.com",value:((q=o[C.type])==null?void 0:q.paypalEmail)||"",onChange:L=>b(C.type,"paypalEmail",L.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),C.type==="lydia"&&s.jsxs("div",{children:[s.jsx(ye,{htmlFor:`lydia-phone-${C.id}`,children:"Numro de tlphone *"}),s.jsx(Ie,{id:`lydia-phone-${C.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((F=o[C.type])==null?void 0:F.lydiaPhone)||"",onChange:L=>b(C.type,"lydiaPhone",L.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),R&&C.type!=="card"&&s.jsxs(Bt,{className:"mt-3",children:[s.jsx(Eo,{className:"h-4 w-4"}),s.jsxs(qt,{children:[C.type==="cash"&&"Rencontrez-vous dans un lieu public et vrifiez l'objet avant de payer.",C.type==="transfer"&&"Le virement sera effectu aprs confirmation de la transaction. Dlai : 1-2 jours ouvrs.",C.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bnficier de la protection PayPal.",C.type==="lydia"&&"Le paiement Lydia est instantan. Vrifiez le numro avant d'envoyer."]})]})]})]},C.id)})}),s.jsxs(Bt,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Qt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(qt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de scurit :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux scuriss de BOXETU pour les transactions."]})]})]})},Ide=({open:t,onOpenChange:e,listing:r})=>{var E;const{currentUser:n,userProfile:i}=Ot(),{createPaymentRequest:a,loading:o}=dy(),[l,c]=p.useState("method"),[u,d]=p.useState(null),[h,m]=p.useState({}),[g,x]=p.useState({location:"",date:void 0,time:"",notes:""}),y=(C,I)=>{d(C),m(I),c("details")},_=async()=>{if(!(!n||!u))try{const C=g.date&&g.time?new Date(`${is(g.date,"yyyy-MM-dd")} ${g.time}`):void 0;await a({listingId:r.id,buyerId:n.uid,sellerId:r.sellerId,amount:r.price,currency:r.currency||"EUR",paymentMethod:u,meetingLocation:g.location,meetingDateTime:C,paymentDetails:h,notes:g.notes}),e(!1),b()}catch(C){console.error("Erreur lors de la cration de la demande:",C)}},b=()=>{c("method"),d(null),m({}),x({location:"",date:void 0,time:"",notes:""})},v=(C,I)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:I||"EUR"}).format(C),w=C=>({cash:"Espces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[C]||C;return s.jsx(aa,{open:t,onOpenChange:e,children:s.jsxs(Ni,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(oa,{children:[s.jsxs(Si,{className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(vu,{children:['Crez une demande de paiement scurise pour "',r.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Dtails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((E=r.images)==null?void 0:E[0])&&s.jsx("img",{src:r.images[0],alt:r.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:r.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",r.sellerName,"  ",r.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:v(r.price,r.currency||"EUR")})]})]})}),l==="method"&&s.jsx(kde,{amount:r.price,currency:r.currency||"EUR",onMethodSelect:y,selectedMethod:u}),l==="details"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement slectionn : ",w(u)]})]}),u==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(ls,{className:"w-5 h-5"}),"Dtails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsx(Ie,{id:"meeting-location",placeholder:"Ex: Bibliothque universitaire, Hall principal...",value:g.location,onChange:C=>x(I=>({...I,location:C.target.value})),className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{children:"Date de rencontre"}),s.jsxs(Jue,{children:[s.jsx(Xue,{asChild:!0,children:s.jsxs(U,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(sc,{className:"mr-2 h-4 w-4"}),g.date?is(g.date,"PPP",{locale:bs}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(UL,{className:"w-auto p-0",children:s.jsx(TL,{mode:"single",selected:g.date,onSelect:C=>x(I=>({...I,date:C})),disabled:C=>C<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(Ie,{id:"meeting-time",type:"time",value:g.time,onChange:C=>x(I=>({...I,time:C.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(Gs,{id:"payment-notes",placeholder:"Informations complmentaires pour le vendeur...",value:g.notes,onChange:C=>x(I=>({...I,notes:C.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(Bt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(qe,{className:"h-4 w-4 text-blue-600"}),s.jsxs(qt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Scurit :"})," Un code de scurit unique sera gnr pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(U,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),s.jsx(U,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!g.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Rcapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:w(u)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:v(r.price,r.currency||"EUR")})]}),u==="cash"&&g.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:g.location})]}),g.date&&g.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[is(g.date,"PPP",{locale:bs}),"  ",g.time]})]})]})]}),g.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:g.notes})]})]}),s.jsxs(Bt,{children:[s.jsx(Eo,{className:"h-4 w-4"}),s.jsx(qt,{children:"En crant cette demande, vous vous engagez  effectuer le paiement selon les modalits convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(U,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),s.jsx(U,{onClick:_,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Cration..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Crer la demande"]})})]})]})]})]})})},Ade=({listing:t,className:e})=>{const{currentUser:r,userProfile:n}=Ot(),{createConversation:i,setCurrentConversation:a,conversations:o}=qx(),l=Hn(),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[x,y]=p.useState(""),[_,b]=p.useState(!1);if((r==null?void 0:r.uid)===t.sellerId)return null;const v=o.find(T=>T.listingId===t.id&&T.participants.includes((r==null?void 0:r.uid)||"")&&T.participants.includes(t.sellerId)),w=()=>{if(!r){l("/auth?mode=signin");return}if(v){a(v),l("/messages");return}const T=`Bonjour ${t.sellerName},

Je suis intress(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si ncessaire.

Cordialement,
${(n==null?void 0:n.displayName)||"Un tudiant intress"}`;g(T),y((n==null?void 0:n.email)||""),u(!0)},E=()=>{if(!r){l("/auth?mode=signin");return}h(!0)},C=async()=>{var T;if(!m.trim()||!x.trim()||!r||!n){ue.error("Veuillez remplir tous les champs");return}b(!0);try{const k=await i(t.id,t.title,t.price,(T=t.images)==null?void 0:T[0],r.uid,t.sellerId,{displayName:n.displayName,photoURL:n.photoURL,university:n.university,isVerified:n.isVerified,email:n.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),ue.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoy !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",t.sellerName," recevra une notification email"]})]}),s.jsxs(U,{size:"sm",variant:"ghost",onClick:()=>{ue.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(qb,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(k){console.error("Erreur lors de l'envoi du message:",k),ue.error("Erreur lors de l'envoi du message")}finally{b(!1)}},I=(T,k)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"change";const R=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(T)}catch{return`${T} `}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{onClick:w,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),v?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(U,{onClick:E,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(aa,{open:c,onOpenChange:u,children:s.jsxs(Ni,{className:"max-w-md",children:[s.jsx(oa,{children:s.jsxs(Si,{className:"flex items-center gap-2",children:[s.jsx(Xt,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(_a,{className:"w-8 h-8",children:[s.jsx(ja,{src:t.sellerAvatar||void 0}),s.jsx(Na,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:I(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(Ie,{id:"contact-email",type:"email",value:x,onChange:T=>y(T.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(Gs,{id:"contact-message",value:m,onChange:T=>g(T.target.value),placeholder:"Dcrivez votre intrt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Eo,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:" Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoy via la messagerie BOXETU ET ",t.sellerName," recevra une notification email pour rpondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),s.jsx(U,{onClick:C,disabled:_||!m.trim()||!x.trim(),className:"flex-1",children:_?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Lu,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(Ide,{open:d,onOpenChange:h,listing:t})]})},Rde=()=>{var I;const{id:t}=V$(),e=Hn(),{currentUser:r}=Ot(),{currentListing:n,loading:i,fetchListingById:a}=vm(),{fetchUserFavorites:o}=p3(),[l,c]=p.useState(0);if(p.useEffect(()=>{t&&a(t)},[t,a]),p.useEffect(()=>{r&&o(r.uid)},[r,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!n)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Qt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a t supprime."}),s.jsx(U,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=n,d=(r==null?void 0:r.uid)===u.sellerId,h=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:T}),m=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:T}),g=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:T}),x=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vente",className:T}),y=(T,k)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"change";const R=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(T)}catch{return`${T} `}},_=T=>{switch(T){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon tat";case"fair":return"tat correct";case"poor":return"Mauvais tat";default:return T}},b=T=>{switch(T){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-blue-100 text-blue-800 border-blue-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=()=>{switch(u.transactionType){case"donation":return s.jsx(h,{className:"w-4 h-4"});case"exchange":return s.jsx(m,{className:"w-4 h-4"});case"service":return s.jsx(g,{className:"w-4 h-4"});default:return s.jsx(x,{className:"w-4 h-4"})}},w=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},E=()=>{u.images&&u.images.length>1&&c(T=>T===u.images.length-1?0:T+1)},C=()=>{u.images&&u.images.length>1&&c(T=>T===0?u.images.length-1:T-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ve,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(ve,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:u.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(U,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(tO,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:C,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image prcdente",children:s.jsx(nQ,{className:"w-6 h-6"})}),s.jsx("div",{onClick:E,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(sQ,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),s.jsxs(aa,{children:[s.jsx(gu,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(bl,{className:"w-5 h-5"})})}),s.jsxs(Ni,{className:"max-w-4xl",children:[s.jsx(Si,{children:"Image en plein cran de l'annonce"}),s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(bl,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((T,k)=>s.jsx("button",{onClick:()=>c(k),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${k===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:T,alt:`${u.title} ${k+1}`,className:"w-full h-full object-cover"})},k))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(H,{children:s.jsx(K,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(le,{className:"bg-primary/10 text-primary border-primary/20",children:[v(),s.jsx("span",{className:"ml-1",children:w()})]}),u.sellerVerified&&s.jsxs(le,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"Vrifi"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[y(u.price,u.currency),u.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en change :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(xa,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estim par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min," - ",u.aiPriceEstimate.max,"",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:d?s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{to:`/edit-listing/${u.id}`,children:s.jsxs(U,{variant:"outline",className:"w-full",children:[s.jsx(on,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ade,{listing:u,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(g3,{listing:u,size:"lg",showText:!1}),s.jsx(v3,{listing:u,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(gl,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-lg",children:"Vendeur"})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(_a,{className:"w-12 h-12",children:[s.jsx(ja,{src:u.sellerAvatar||void 0}),s.jsx(Na,{children:(I=u.sellerName[0])==null?void 0:I.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&s.jsx(qe,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ws,{className:"w-5 h-5 text-green-600"}),"Impact cologique"]})}),s.jsx(K,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"conomiss en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(va,{className:"w-4 h-4"}),s.jsxs("span",{children:[u.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(At,{className:"w-4 h-4"}),s.jsx("span",{children:cc(u.createdAt,{addSuffix:!0,locale:bs})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ls,{className:"w-4 h-4"}),s.jsx("span",{children:u.location.city})]})]})]}),s.jsx(le,{className:b(u.condition),children:_(u.condition)})]})}),s.jsx(K,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-lg",children:"Tags"})}),s.jsx(K,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((T,k)=>s.jsx(le,{variant:"secondary",children:T},k))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[s.jsx(ls,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(K,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:u.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Universit"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[s.jsx(qe,{className:"w-5 h-5"}),"Conseils de scurit"]})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(lt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(lt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vrifiez l'identit de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(lt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Eo,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var LN="Checkbox",[Pde,jme]=hs(LN),[Dde,Ode]=Pde(LN),e6=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),x=Xe(e,E=>g(E)),y=p.useRef(!1),_=m?d||!!m.closest("form"):!0,[b=!1,v]=cs({prop:i,defaultProp:a,onChange:u}),w=p.useRef(b);return p.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const C=()=>v(w.current);return E.addEventListener("reset",C),()=>E.removeEventListener("reset",C)}},[m,v]),s.jsxs(Dde,{scope:r,state:b,disabled:l,children:[s.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":yo(b)?"mixed":b,"aria-required":o,"data-state":n6(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:me(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:me(t.onClick,E=>{v(C=>yo(C)?!0:!C),_&&(y.current=E.isPropagationStopped(),y.current||E.stopPropagation())})}),_&&s.jsx(Mde,{control:m,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:yo(a)?!1:a})]})});e6.displayName=LN;var t6="CheckboxIndicator",r6=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,a=Ode(t6,r);return s.jsx(Kr,{present:n||yo(a.state)||a.state===!0,children:s.jsx(Ae.span,{"data-state":n6(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});r6.displayName=t6;var Mde=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:i,...a}=t,o=p.useRef(null),l=ay(r),c=Yx(e);p.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&g){const x=new Event("click",{bubbles:n});d.indeterminate=yo(r),g.call(d,yo(r)?!1:r),d.dispatchEvent(x)}},[l,r,n]);const u=p.useRef(yo(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function yo(t){return t==="indeterminate"}function n6(t){return yo(t)?"indeterminate":t?"checked":"unchecked"}var s6=e6,Lde=r6;const fy=p.forwardRef(({className:t,...e},r)=>s.jsx(s6,{ref:r,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(Lde,{className:Pe("flex items-center justify-center text-current"),children:s.jsx(cN,{className:"h-4 w-4"})})}));fy.displayName=s6.displayName;var i6=["PageUp","PageDown"],a6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],o6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pd="Slider",[x_,Vde,Fde]=cm(pd),[l6,Nme]=hs(pd,[Fde]),[Ude,my]=l6(pd),c6=p.forwardRef((t,e)=>{const{name:r,min:n=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:x,...y}=t,_=p.useRef(new Set),b=p.useRef(0),w=o==="horizontal"?$de:zde,[E=[],C]=cs({prop:d,defaultProp:u,onChange:P=>{var S;(S=[..._.current][b.current])==null||S.focus(),h(P)}}),I=p.useRef(E);function T(P){const D=Gde(E,P);j(P,D)}function k(P){j(P,b.current)}function R(){const P=I.current[b.current];E[b.current]!==P&&m(E)}function j(P,D,{commit:S}={commit:!1}){const M=Xde(a),$=Qde(Math.round((P-n)/a)*a+n,M),q=Af($,[n,i]);C((F=[])=>{const L=Wde(F,q,D);if(Jde(L,c*a)){b.current=L.indexOf(q);const W=String(L)!==String(F);return W&&S&&m(L),W?L:F}else return F})}return s.jsx(Ude,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:i,valueIndexToChangeRef:b,thumbs:_.current,values:E,orientation:o,form:x,children:s.jsx(x_.Provider,{scope:t.__scopeSlider,children:s.jsx(x_.Slot,{scope:t.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:e,onPointerDown:me(y.onPointerDown,()=>{l||(I.current=E)}),min:n,max:i,inverted:g,onSlideStart:l?void 0:T,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&j(n,0,{commit:!0}),onEndKeyDown:()=>!l&&j(i,E.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:D})=>{if(!l){const $=i6.includes(P.key)||P.shiftKey&&a6.includes(P.key)?10:1,q=b.current,F=E[q],L=a*$*D;j(F+L,q,{commit:!0})}}})})})})});c6.displayName=pd;var[u6,d6]=l6(pd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$de=p.forwardRef((t,e)=>{const{min:r,max:n,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,m]=p.useState(null),g=Xe(e,w=>m(w)),x=p.useRef(),y=ac(i),_=y==="ltr",b=_&&!a||!_&&a;function v(w){const E=x.current||h.getBoundingClientRect(),C=[0,E.width],T=VN(C,b?[r,n]:[n,r]);return x.current=E,T(w-E.left)}return s.jsx(u6,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:s.jsx(h6,{dir:y,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const E=v(w.clientX);o==null||o(E)},onSlideMove:w=>{const E=v(w.clientX);l==null||l(E)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:w=>{const C=o6[b?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:C?-1:1})}})})}),zde=p.forwardRef((t,e)=>{const{min:r,max:n,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),h=Xe(e,d),m=p.useRef(),g=!i;function x(y){const _=m.current||d.current.getBoundingClientRect(),b=[0,_.height],w=VN(b,g?[n,r]:[r,n]);return m.current=_,w(y-_.top)}return s.jsx(u6,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:s.jsx(h6,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const _=x(y.clientY);a==null||a(_)},onSlideMove:y=>{const _=x(y.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:y=>{const b=o6[g?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:b?-1:1})}})})}),h6=p.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=my(pd,r);return s.jsx(Ae.span,{...u,ref:e,onKeyDown:me(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):i6.concat(a6).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:me(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():n(h)}),onPointerMove:me(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:me(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),f6="SliderTrack",m6=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=my(f6,r);return s.jsx(Ae.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});m6.displayName=f6;var y_="SliderRange",p6=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=my(y_,r),a=d6(y_,r),o=p.useRef(null),l=Xe(e,o),c=i.values.length,u=i.values.map(m=>v6(m,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return s.jsx(Ae.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});p6.displayName=y_;var w_="SliderThumb",g6=p.forwardRef((t,e)=>{const r=Vde(t.__scopeSlider),[n,i]=p.useState(null),a=Xe(e,l=>i(l)),o=p.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(Bde,{...t,ref:a,index:o})}),Bde=p.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:i,...a}=t,o=my(w_,r),l=d6(w_,r),[c,u]=p.useState(null),d=Xe(e,v=>u(v)),h=c?o.form||!!c.closest("form"):!0,m=Yx(c),g=o.values[n],x=g===void 0?0:v6(g,o.min,o.max),y=Hde(n,o.values.length),_=m==null?void 0:m[l.size],b=_?Kde(_,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${b}px)`},children:[s.jsx(x_.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Ae.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:me(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&s.jsx(qde,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},n)]})});g6.displayName=w_;var qde=t=>{const{value:e,...r}=t,n=p.useRef(null),i=ay(e);return p.useEffect(()=>{const a=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[i,e]),s.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:e})};function Wde(t=[],e,r){const n=[...t];return n[r]=e,n.sort((i,a)=>i-a)}function v6(t,e,r){const a=100/(r-e)*(t-e);return Af(a,[0,100])}function Hde(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Gde(t,e){if(t.length===1)return 0;const r=t.map(i=>Math.abs(i-e)),n=Math.min(...r);return r.indexOf(n)}function Kde(t,e,r){const n=t/2,a=VN([0,50],[0,n]);return(n-a(e)*r)*r}function Yde(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function Jde(t,e){if(e>0){const r=Yde(t);return Math.min(...r)>=e}return!0}function VN(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function Xde(t){return(String(t).split(".")[1]||"").length}function Qde(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var x6=c6,Zde=m6,ehe=p6,the=g6;const FN=p.forwardRef(({className:t,...e},r)=>s.jsxs(x6,{ref:r,className:Pe("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Zde,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(ehe,{className:"absolute h-full bg-primary"})}),s.jsx(the,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));FN.displayName=x6.displayName;const Sm=Le.object({title:Le.string().min(5,"Le titre doit contenir au moins 5 caractres").max(80,"Le titre ne peut pas dpasser 80 caractres"),description:Le.string().min(20,"La description doit contenir au moins 20 caractres").max(1e3,"La description ne peut pas dpasser 1000 caractres"),tags:Le.array(Le.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Le.string().min(1,"Veuillez spcifier un lieu de rencontre")}),rhe=Sm.extend({price:Le.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit tre d'au moins 1");if(e>1e4)throw new Error("Le prix ne peut pas dpasser 10 000");return e}),condition:Le.enum(["new","like-new","good","fair"]),paymentMethods:Le.array(Le.string()).min(1,"Slectionnez au moins un mode de paiement")}),nhe=Sm.extend({donationReason:Le.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractres")}),she=Sm.extend({desiredItems:Le.array(Le.string()).min(1,"Ajoutez au moins un objet recherch"),estimatedValue:Le.string().min(1,"La valeur estime est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estime doit tre d'au moins 1");return e})}),ihe=Sm.extend({hourlyRate:Le.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit tre d'au moins 5/h");if(e>200)throw new Error("Le tarif ne peut pas dpasser 200/h");return e}),duration:Le.number().min(1,"La dure doit tre d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Le.string().min(20,"Dcrivez vos comptences en dtail").max(500,"Maximum 500 caractres"),availability:Le.string().optional()}),ahe=[{value:"new",label:"Neuf",description:"Jamais utilis, dans son emballage"},{value:"like-new",label:"Trs bon",description:"Utilis trs peu, aucun dfaut visible"},{value:"good",label:"Bon",description:"Utilis mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],Ak=[{value:"cash",label:"Espces",icon:nO},{value:"transfer",label:"Virement bancaire",icon:Mr},{value:"lydia",label:"Lydia",icon:ic},{value:"paypal",label:"PayPal",icon:Mr}],ohe=()=>{var X,se,_e,ot,jt,yt,Se,tt;const{currentUser:t,userProfile:e}=Ot(),{createListing:r}=vm(),n=Hn(),[i]=wj(),[a,o]=p.useState(()=>i.get("type")||"sell"),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,m]=p.useState(""),[g,x]=p.useState([]),[y,_]=p.useState(!1),[b,v]=p.useState([""]),[w,E]=p.useState(""),[C,I]=p.useState([]),[T,k]=p.useState([1]),j=_l({resolver:jl((()=>{switch(a){case"sell":return rhe;case"gift":return nhe;case"swap":return she;case"service":return ihe;default:return Sm}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});p.useEffect(()=>{j.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),x([]),v([""]),I([]),k([1]),c([])},[a,j]);const P=async Z=>{if(!t)throw new Error("User not authenticated");const ge=Date.now(),Y=`listings/${t.uid}/${ge}_${Z.name}`,ie=tg(rg,Y),de=await _G(ie,Z);return await Ib(de.ref)},D=async Z=>{const ge=Z.target.files;if(!(!ge||ge.length===0)){d(!0);try{const ie=Array.from(ge).slice(0,10-l.length).filter(Me=>Me.size<=15728640).map(Me=>P(Me)),de=await Promise.all(ie);c(Me=>[...Me,...de])}catch(Y){console.error("Error uploading images:",Y)}finally{d(!1)}}},S=Z=>{c(ge=>ge.filter((Y,ie)=>ie!==Z))},M=()=>{if(h.trim()&&!g.includes(h.trim())&&g.length<5){const Z=[...g,h.trim()];x(Z),j.setValue("tags",Z),m("")}},$=Z=>{const ge=g.filter(Y=>Y!==Z);x(ge),j.setValue("tags",ge)},q=()=>{if(w.trim()){const Z=[...b.filter(ge=>ge.trim()),w.trim()];v(Z),j.setValue("desiredItems",Z),E("")}},F=Z=>{const ge=b.filter((Y,ie)=>ie!==Z);v(ge),j.setValue("desiredItems",ge)},L=(Z,ge)=>{const Y=ge?[...C,Z]:C.filter(ie=>ie!==Z);I(Y),j.setValue("paymentMethods",Y)},W=async Z=>{if(!(!t||!e)){_(!0);try{const ge={title:Z.title,description:Z.description,currency:"EUR",category:"electronics",images:l,tags:Z.tags,location:{city:"Paris",state:"le-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let Y;switch(a){case"sell":Y={...ge,price:Z.price,condition:Z.condition,transactionType:"sale",description:`${Z.description}

Modes de paiement accepts: ${C.map(de=>{var Me;return(Me=Ak.find(ze=>ze.value===de))==null?void 0:Me.label}).join(", ")}`};break;case"gift":Y={...ge,price:0,condition:"good",transactionType:"donation",description:`${Z.description}

Raison du don: ${Z.donationReason}`};break;case"swap":Y={...ge,price:Z.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:b.filter(de=>de.trim()).join(", "),description:`${Z.description}

Recherche en change: ${b.filter(de=>de.trim()).join(", ")}
Valeur estime: ${Z.estimatedValue}`};break;case"service":Y={...ge,price:Z.hourlyRate,condition:"new",transactionType:"service",description:`${Z.description}

Comptences: ${Z.skills}
Tarif: ${Z.hourlyRate}/h
Dure prvue: ${T[0]}h${Z.availability?`
Disponibilits: ${Z.availability}`:""}`};break;default:throw new Error("Type de transaction non support")}console.log("Submitting listing data:",Y);const ie=await r(Y);n(`/listing/${ie}`)}catch(ge){console.error("Error creating listing:",ge)}finally{_(!1)}}},z=()=>{const Z=j.formState.errors,ge=j.watch("title")&&j.watch("description")&&j.watch("meetingLocation")&&g.length>0;switch(a){case"sell":return ge&&j.watch("price")&&C.length>0&&!Z.title&&!Z.description&&!Z.price;case"gift":return ge&&j.watch("donationReason")&&!Z.title&&!Z.description&&!Z.donationReason;case"swap":return ge&&b.some(Y=>Y.trim())&&j.watch("estimatedValue")&&!Z.title&&!Z.description&&!Z.estimatedValue;case"service":return ge&&j.watch("hourlyRate")&&j.watch("skills")&&!Z.title&&!Z.description&&!Z.hourlyRate&&!Z.skills;default:return!1}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Crer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communaut tudiante vrifie"})]}),s.jsxs("form",{onSubmit:j.handleSubmit(W),className:"space-y-8",children:[s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Gb,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(at,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(K,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vendre",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(K,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Donner",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(K,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"changer des objets"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(K,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractres)"}),s.jsx(Ie,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait tat":a==="gift"?"Ex: Vlo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathmatiques",...j.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(X=j.formState.errors.title)==null?void 0:X.message}),s.jsxs("span",{children:[((se=j.watch("title"))==null?void 0:se.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"description",className:"text-foreground",children:"Description dtaille * (max 1000 caractres)"}),s.jsx(Gs,{id:"description",placeholder:a==="sell"?"Dcrivez l'tat, l'utilisation, la raison de la vente...":a==="gift"?"Dcrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Dcrivez ce que vous proposez et ce que vous recherchez...":"Dcrivez vos comptences, votre exprience, votre mthode...",rows:6,...j.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(_e=j.formState.errors.description)==null?void 0:_e.message}),s.jsxs("span",{children:[((ot=j.watch("description"))==null?void 0:ot.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vente",className:"w-5 h-5"}),"Informations de vente"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"price",className:"text-foreground",children:"Prix () *"}),s.jsx(Ie,{id:"price",type:"text",placeholder:"0,00",...j.register("price"),className:"mt-1"}),j.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:j.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"condition",className:"text-foreground",children:"tat du produit *"}),s.jsxs(ct,{onValueChange:Z=>j.setValue("condition",Z),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{placeholder:"Slectionnez un tat"})}),s.jsx(it,{children:ahe.map(Z=>s.jsx(re,{value:Z.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:Z.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Z.description})]})},Z.value))})]}),j.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:j.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(ye,{className:"text-foreground",children:"Modes de paiement accepts *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:Ak.map(Z=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fy,{id:Z.value,checked:C.includes(Z.value),onCheckedChange:ge=>L(Z.value,ge)}),s.jsxs(ye,{htmlFor:Z.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(Z.icon,{className:"w-4 h-4"}),Z.label]})]},Z.value))}),C.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Slectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:"w-5 h-5"}),"Informations du don"]})}),s.jsx(K,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractres)"}),s.jsx(Gs,{id:"donationReason",placeholder:"Ex: Je dmnage, plus besoin, fin d'tudes...",rows:3,...j.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(jt=j.formState.errors.donationReason)==null?void 0:jt.message}),s.jsxs("span",{children:[((yt=j.watch("donationReason"))==null?void 0:yt.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-5 h-5"}),"Informations d'change"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{className:"text-foreground",children:"Objets recherchs * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[b.filter(Z=>Z.trim()).map((Z,ge)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{value:Z,readOnly:!0,className:"flex-1"}),s.jsx(U,{type:"button",variant:"outline",size:"icon",onClick:()=>F(ge),children:s.jsx(mQ,{className:"w-4 h-4"})})]},ge)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{placeholder:"Ex: Livre de physique L2",value:w,onChange:Z=>E(Z.target.value),onKeyPress:Z=>Z.key==="Enter"&&(Z.preventDefault(),q()),className:"flex-1"}),s.jsx(U,{type:"button",onClick:q,disabled:!w.trim(),children:s.jsx(ia,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estime () *"}),s.jsx(Ie,{id:"estimatedValue",type:"text",placeholder:"0,00",...j.register("estimatedValue"),className:"mt-1"}),j.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:j.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:"w-5 h-5"}),"Informations du service"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"skills",className:"text-foreground",children:"Description des comptences *"}),s.jsx(Gs,{id:"skills",placeholder:"Dcrivez vos comptences, votre exprience, votre mthode d'enseignement...",rows:4,...j.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Se=j.formState.errors.skills)==null?void 0:Se.message}),s.jsxs("span",{children:[((tt=j.watch("skills"))==null?void 0:tt.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (/h) *"}),s.jsx(Ie,{id:"hourlyRate",type:"text",placeholder:"15,00",...j.register("hourlyRate"),className:"mt-1"}),j.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:j.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(ye,{className:"text-foreground",children:["Dure prvue: ",T[0],"h"]}),s.jsx(FN,{value:T,onValueChange:Z=>{k(Z),j.setValue("duration",Z[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"availability",className:"text-foreground",children:"Disponibilits (optionnel)"}),s.jsx(Ie,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...j.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(bl,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(at,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Premire photo = photo principale. Max 15MB par image."})]}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((Z,ge)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:Z,alt:`Photo ${ge+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(U,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>S(ge),children:s.jsx(Fl,{className:"w-3 h-3"})}),ge===0&&s.jsx(le,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},ge)),l.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[u?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(uv,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:D,className:"hidden",disabled:u})]})]})})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(cv,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.map(Z=>s.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[Z,s.jsx(U,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>$(Z),children:s.jsx(Fl,{className:"w-3 h-3"})})]},Z))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{placeholder:"Ajouter un tag...",value:h,onChange:Z=>m(Z.target.value),onKeyPress:Z=>Z.key==="Enter"&&(Z.preventDefault(),M()),className:"flex-1"}),s.jsx(U,{type:"button",onClick:M,disabled:!h.trim()||g.length>=5,children:"Ajouter"})]}),g.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsx(Ie,{id:"meetingLocation",placeholder:"Ex: Bibliothque universitaire, Hall principal...",...j.register("meetingLocation"),className:"mt-1"}),j.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:j.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilgiez les lieux publics et frquents"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(sa,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("title")&&j.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("title")&&j.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractres)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("description")&&j.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("description")&&j.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractres)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${g.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${g.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("price")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Prix ( 1)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${C.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${C.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("donationReason")&&j.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("donationReason")&&j.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Motif du don"})]}),a==="swap"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${b.some(Z=>Z.trim())?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${b.some(Z=>Z.trim())?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Objets recherchs"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Valeur estime"})]})]}),a==="service"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tarif ( 5/h)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${j.watch("skills")&&j.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${j.watch("skills")&&j.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Comptences"})]})]})]})})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(qe,{className:"w-4 h-4"}),"Conseils de scurit"]})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vrifiez l'identit de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilgiez les paiements scuriss"})]})]})})]}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6",children:[s.jsx(U,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:y||!z()||u,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gb,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:z()?"Votre annonce sera visible immdiatement":"Compltez tous les champs obligatoires"})]})})]})]})]})]})};function lhe(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var UN="ScrollArea",[y6,Sme]=hs(UN),[che,Cs]=y6(UN),w6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,x]=p.useState(null),[y,_]=p.useState(null),[b,v]=p.useState(0),[w,E]=p.useState(0),[C,I]=p.useState(!1),[T,k]=p.useState(!1),R=Xe(e,P=>c(P)),j=ac(i);return s.jsx(che,{scope:r,type:n,dir:j,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:C,onScrollbarXEnabledChange:I,scrollbarY:y,onScrollbarYChange:_,scrollbarYEnabled:T,onScrollbarYEnabledChange:k,onCornerWidthChange:v,onCornerHeightChange:E,children:s.jsx(Ae.div,{dir:j,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});w6.displayName=UN;var b6="ScrollAreaViewport",_6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,asChild:i,nonce:a,...o}=t,l=Cs(b6,r),c=p.useRef(null),u=Xe(e,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:yhe({asChild:i,children:n},d=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});_6.displayName=b6;var Di="ScrollAreaScrollbar",$N=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Cs(Di,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(uhe,{...n,ref:e,forceMount:r}):i.type==="scroll"?s.jsx(dhe,{...n,ref:e,forceMount:r}):i.type==="auto"?s.jsx(j6,{...n,ref:e,forceMount:r}):i.type==="always"?s.jsx(zN,{...n,ref:e}):null});$N.displayName=Di;var uhe=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Cs(Di,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Kr,{present:r||a,children:s.jsx(j6,{"data-state":a?"visible":"hidden",...n,ref:e})})}),dhe=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Cs(Di,t.__scopeScrollArea),a=t.orientation==="horizontal",o=gy(()=>c("SCROLL_END"),100),[l,c]=lhe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(c("SCROLL"),o()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,a,c,o]),s.jsx(Kr,{present:r||l!=="hidden",children:s.jsx(zN,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),j6=p.forwardRef((t,e)=>{const r=Cs(Di,t.__scopeScrollArea),{forceMount:n,...i}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=gy(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Yu(r.viewport,c),Yu(r.content,c),s.jsx(Kr,{present:n||a,children:s.jsx(zN,{"data-state":a?"visible":"hidden",...i,ref:e})})}),zN=p.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Cs(Di,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=T6(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return vhe(m,o.current,l,g)}return r==="horizontal"?s.jsx(hhe,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,g=Rk(m,l,i.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=h(m,i.dir))}}):r==="vertical"?s.jsx(fhe,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,g=Rk(m,l);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=h(m))}}):null}),hhe=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Cs(Di,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Xe(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(S6,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":py(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),I6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ov(o.paddingLeft),paddingEnd:Ov(o.paddingRight)}})}})}),fhe=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Cs(Di,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Xe(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(S6,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":py(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),I6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ov(o.paddingTop),paddingEnd:Ov(o.paddingBottom)}})}})}),[mhe,N6]=y6(Di),S6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,g=Cs(Di,r),[x,y]=p.useState(null),_=Xe(e,R=>y(R)),b=p.useRef(null),v=p.useRef(""),w=g.viewport,E=n.content-n.viewport,C=_r(d),I=_r(c),T=gy(h,10);function k(R){if(b.current){const j=R.clientX-b.current.left,P=R.clientY-b.current.top;u({x:j,y:P})}}return p.useEffect(()=>{const R=j=>{const P=j.target;(x==null?void 0:x.contains(P))&&C(j,E)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[w,x,E,C]),p.useEffect(I,[n,I]),Yu(x,T),Yu(g.content,T),s.jsx(mhe,{scope:r,scrollbar:x,hasThumb:i,onThumbChange:_r(a),onThumbPointerUp:_r(o),onThumbPositionChange:I,onThumbPointerDown:_r(l),children:s.jsx(Ae.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:me(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),b.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:me(t.onPointerMove,k),onPointerUp:me(t.onPointerUp,R=>{const j=R.target;j.hasPointerCapture(R.pointerId)&&j.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),Dv="ScrollAreaThumb",E6=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=N6(Dv,t.__scopeScrollArea);return s.jsx(Kr,{present:r||i.hasThumb,children:s.jsx(phe,{ref:e,...n})})}),phe=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,a=Cs(Dv,r),o=N6(Dv,r),{onThumbPositionChange:l}=o,c=Xe(e,h=>o.onThumbChange(h)),u=p.useRef(),d=gy(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(d(),!u.current){const g=xhe(h,l);u.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,d,l]),s.jsx(Ae.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:me(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),x=h.clientX-g.left,y=h.clientY-g.top;o.onThumbPointerDown({x,y})}),onPointerUp:me(t.onPointerUp,o.onThumbPointerUp)})});E6.displayName=Dv;var BN="ScrollAreaCorner",C6=p.forwardRef((t,e)=>{const r=Cs(BN,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(ghe,{...t,ref:e}):null});C6.displayName=BN;var ghe=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Cs(BN,r),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return Yu(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Yu(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(Ae.div,{...n,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ov(t){return t?parseInt(t,10):0}function T6(t,e){const r=t/e;return isNaN(r)?0:r}function py(t){const e=T6(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function vhe(t,e,r,n="ltr"){const i=py(r),a=i/2,o=e||a,l=i-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return k6([c,u],h)(t)}function Rk(t,e,r="ltr"){const n=py(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Af(t,c);return k6([0,o],[0,l])(u)}function k6(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function I6(t,e){return t>0&&t<e}var xhe=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&e(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function gy(t,e){const r=_r(t),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Yu(t,e){const r=_r(e);Ar(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}function yhe(t,e){const{asChild:r,children:n}=t;if(!r)return typeof e=="function"?e(n):e;const i=p.Children.only(n);return p.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var A6=w6,whe=_6,bhe=C6;const qN=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(A6,{ref:n,className:Pe("relative overflow-hidden",t),...r,children:[s.jsx(whe,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(R6,{}),s.jsx(bhe,{})]}));qN.displayName=A6.displayName;const R6=p.forwardRef(({className:t,orientation:e="vertical",...r},n)=>s.jsx($N,{ref:n,orientation:e,className:Pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:s.jsx(E6,{className:"relative flex-1 rounded-full bg-border"})}));R6.displayName=$N.displayName;const Pk=({conversations:t,loading:e,searchQuery:r,setSearchQuery:n,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const h=d.participants.find(g=>g!==(a==null?void 0:a.uid)),m=h?d.participantDetails[h]:null;return(m==null?void 0:m.name.toLowerCase().includes(r.toLowerCase()))||d.listingTitle.toLowerCase().includes(r.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const h=d.participants.find(m=>m!==(a==null?void 0:a.uid));return h?d.participantDetails[h]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xt,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(am,{className:"w-4 h-4"})}),s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(eO,{className:"w-4 h-4"})}),s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramtres",children:s.jsx(Ux,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Rechercher conversations...",value:r,onChange:d=>n(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(qN,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,h)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(on,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},h))}):l.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(Xt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r?s.jsxs(s.Fragment,{children:[s.jsx(pr,{className:"w-3 h-3 inline mr-1"}),'Aucun rsultat pour "',r,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(Vr,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparatront ici"]})})]}):s.jsx("div",{className:"p-1",children:l.map(d=>{var x,y;const h=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,g=(i==null?void 0:i.id)===d.id;return s.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${g?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(_a,{className:"w-10 h-10",children:[s.jsx(ja,{src:h==null?void 0:h.avatar}),s.jsx(Na,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((y=(x=h==null?void 0:h.name)==null?void 0:x[0])==null?void 0:y.toUpperCase())||s.jsx(on,{className:"w-4 h-4"})})]}),(h==null?void 0:h.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(qe,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(on,{className:"w-3 h-3 text-muted-foreground"}),(h==null?void 0:h.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),cc(d.lastMessage.sentAt,{addSuffix:!0,locale:bs})]}),m>0&&s.jsx(le,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?s.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(uO,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?s.jsx(sn,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:""}),c(d.listingPrice)]})]}),d.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Lu,{className:"w-3 h-3"}):s.jsx(Xt,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},Dk=({conversation:t,messages:e,loading:r,currentUser:n,onBack:i})=>{var z,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=qx(),[d,h]=p.useState(""),[m,g]=p.useState(40),[x,y]=p.useState(!1),[_,b]=p.useState(!1),[v,w]=p.useState(""),[E,C]=p.useState(""),I=p.useRef(null),T=p.useRef(null),k=()=>{var se;(se=T.current)==null||se.scrollIntoView({behavior:"smooth"})},R=p.useCallback(()=>{const se=I.current;if(!se)return;se.style.height="auto";const _e=Math.max(40,Math.min(se.scrollHeight,120));g(_e)},[]),j=p.useCallback(se=>{const _e=se.target.value;h(_e),y(!!_e.trim()),setTimeout(R,0)},[R]),P=async()=>{if(!d.trim()||!t||!n)return;const se=d.trim();h(""),y(!1),g(40),await a(t.id,se,n.uid,n.displayName||"Utilisateur",n.photoURL)},D=se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),P())},S=async()=>{!t||!n||await l(t.id,n.uid)},M=async()=>{if(!t||!n||!v.trim())return;const se=t.participants.find(_e=>_e!==n.uid);se&&(await c(t.id,n.uid,se,v,E),b(!1),w(""),C(""))},$=async()=>{!t||!n||(await u(t.id,n.uid),i())};if(p.useEffect(()=>{t&&n&&o(t.id,n.uid)},[t,n,o]),p.useEffect(k,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Xt,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Slectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(pr,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer  discuter"]})]})});const q=t.participants.find(se=>se!==(n==null?void 0:n.uid)),F=q?t.participantDetails[q]:null,L=se=>{const _e=new Date,ot=new Date(se);return ot.toDateString()===_e.toDateString()?ot.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((_e.getTime()-ot.getTime())/(1e3*60*60*24))<7?ot.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):ot.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},W=se=>se.senderId!==(n==null?void 0:n.uid)?null:se.seen?s.jsx(rQ,{className:"w-3 h-3 text-blue-500"}):s.jsx(Wb,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(U,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(tO,{className:"w-4 h-4"})}),s.jsxs(_a,{className:"w-8 h-8",children:[s.jsx(ja,{src:F==null?void 0:F.avatar}),s.jsx(Na,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(z=F==null?void 0:F.name)==null?void 0:z[0])==null?void 0:X.toUpperCase())||s.jsx(on,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(on,{className:"w-3 h-3 text-muted-foreground"}),(F==null?void 0:F.name)||"Utilisateur"]}),(F==null?void 0:F.verified)&&s.jsx(qe,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(ls,{className:"w-3 h-3"}),F==null?void 0:F.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(om,{className:"w-4 h-4"})}),s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vido",children:s.jsx(mO,{className:"w-4 h-4"})}),s.jsxs(Ch,{children:[s.jsx(Th,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(aO,{className:"w-4 h-4"})})}),s.jsxs(fu,{align:"end",children:[s.jsx(nt,{asChild:!0,children:s.jsxs(ve,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(nt,{children:[s.jsx(Zi,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(nt,{children:[s.jsx(XX,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Ur,{}),s.jsxs(nt,{onClick:()=>b(!0),children:[s.jsx(gl,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(nt,{onClick:S,children:[s.jsx(ZX,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(nt,{onClick:$,className:"text-destructive",children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(H,{className:"mt-2",children:s.jsx(K,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(uO,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(F1,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(sn,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:""}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(U,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(ve,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(Mn,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(qN,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[r?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((se,_e)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${_e%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},_e))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Xt,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Lu,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(se=>{const _e=se.senderId===(n==null?void 0:n.uid);return s.jsx("div",{className:`flex ${_e?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${_e?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${_e?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:se.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${_e?"justify-end":"justify-start"}`,children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:L(se.sentAt)}),W(se)]})]})},se.id)}),s.jsx("div",{ref:T})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(Gs,{ref:I,value:d,placeholder:"Tapez votre message...",onChange:j,onKeyDown:D,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(U,{onClick:P,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Lu,{className:"h-3.5 w-3.5"})})]}),x&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(Xt,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(aa,{open:_,onOpenChange:b,children:s.jsxs(Ni,{children:[s.jsx(oa,{children:s.jsxs(Si,{className:"flex items-center gap-2",children:[s.jsx(gl,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(ct,{value:v,onValueChange:w,children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Slectionnez un motif"})}),s.jsxs(it,{children:[s.jsx(re,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(re,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Harclement"]})}),s.jsx(re,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gl,{className:"w-4 h-4"}),"Contenu inappropri"]})}),s.jsx(re,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(re,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Eo,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(Xt,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(Gs,{id:"report-description",value:E,onChange:se=>C(se.target.value),placeholder:"Dcrivez le problme...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(U,{variant:"outline",onClick:()=>b(!1),children:"Annuler"}),s.jsxs(U,{onClick:M,disabled:!v,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(gl,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},_he=()=>{const{currentUser:t,userProfile:e}=Ot(),{conversations:r,currentConversation:n,messages:i,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=qx(),[d,h]=p.useState(""),[m,g]=p.useState(!1);p.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),p.useEffect(()=>{n&&l(n.id)},[n,l]);const x=_=>{c(_),g(!0)},y=()=>{g(!1),c(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:m?s.jsx(Dk,{conversation:n,messages:i,loading:a,currentUser:t,onBack:y}):s.jsx(Pk,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:x})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(Pk,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:x}),s.jsx(Dk,{conversation:n,messages:i,loading:a,currentUser:t,onBack:y})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Xt,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accder  vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(on,{className:"w-4 h-4"}),"Vous devez tre connect pour voir et envoyer des messages."]}),s.jsx(U,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(ve,{to:"/auth?mode=signin",className:"flex items-center gap-2",children:[s.jsx(on,{className:"w-4 h-4"}),"Se connecter"]})})]})},kp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ok=[{value:"all",label:"Toutes catgories",icon:Us},{value:"electronics",label:"lectronique",icon:ic},{value:"books",label:"Livres & Cours",icon:sO},{value:"furniture",label:"Mobilier",icon:Ls},{value:"clothing",label:"Vtements",icon:z1},{value:"services",label:"Services",icon:ka},{value:"housing",label:"Logement",icon:Ls},{value:"jobs",label:"Jobs & Stages",icon:Eh}],jhe=[{value:"all",label:"Tous types",icon:Us},{value:"sale",label:"Vente",icon:aQ},{value:"donation",label:"Don",icon:Hb},{value:"exchange",label:"change",icon:Fx},{value:"service",label:"Service",icon:ka}],Nhe=[{value:"recent",label:"Plus rcents",icon:At},{value:"oldest",label:"Plus anciens",icon:sc},{value:"price-asc",label:"Prix croissant",icon:hT},{value:"price-desc",label:"Prix dcroissant",icon:eO},{value:"title",label:"Titre A-Z",icon:hT},{value:"category",label:"Par catgorie",icon:cv}],She=()=>{const{currentUser:t,userProfile:e}=Ot(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=p.useState({favorites:!0,listings:!0,removing:!1}),[d,h]=p.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,g]=p.useState("recent"),[x,y]=p.useState("grid"),[_,b]=p.useState([]);p.useEffect(()=>{t&&v()},[t]),p.useEffect(()=>{r.length>0&&w()},[r]);const v=async()=>{if(t)try{u(q=>({...q,favorites:!0}));const S=$t(It(be,"favorites"),Yt("userId","==",t.uid),qs(100)),M=await rr(S),$=[];M.forEach(q=>{const F=q.data();$.push({id:q.id,...F,createdAt:kp(F.createdAt),updatedAt:kp(F.updatedAt)})}),$.sort((q,F)=>F.createdAt.getTime()-q.createdAt.getTime()),n($),E($)}catch(S){console.error("Erreur lors du chargement des favoris:",S),ue.error("Erreur lors du chargement des favoris")}finally{u(S=>({...S,favorites:!1}))}},w=async()=>{try{u(q=>({...q,listings:!0}));const S=r.map(async q=>{try{const F=await On(Ze(be,"listings",q.listingId));if(F.exists()){const L=F.data();return{id:F.id,...L,createdAt:kp(L.createdAt),updatedAt:kp(L.updatedAt)}}return null}catch(F){return console.error(`Erreur lors du chargement de l'annonce ${q.listingId}:`,F),null}}),$=(await Promise.all(S)).filter(q=>q!==null);a($)}catch(S){console.error("Erreur lors du chargement des annonces favorites:",S)}finally{u(S=>({...S,listings:!1}))}},E=S=>{const M={},$={};let q=0,F=0;const L=new Date;L.setDate(L.getDate()-7);let W=0;S.forEach(z=>{M[z.listingCategory]=(M[z.listingCategory]||0)+1,$[z.listingTransactionType]=($[z.listingTransactionType]||0)+1,z.listingPrice>0&&(q+=z.listingPrice,F++),z.createdAt>=L&&W++}),l({totalFavorites:S.length,byCategory:M,byTransactionType:$,averagePrice:F>0?Math.round(q/F):0,recentlyAdded:W,availableCount:S.length,soldCount:0})},C=async S=>{try{await Pu(Ze(be,"favorites",S)),ue.success("Favori supprim"),v()}catch(M){console.error("Erreur lors de la suppression:",M),ue.error("Erreur lors de la suppression")}},I=async()=>{if(_.length!==0&&window.confirm(`Supprimer ${_.length} favori(s) slectionn(s) ?`)){u(S=>({...S,removing:!0}));try{const S=_.map(M=>Pu(Ze(be,"favorites",M)));await Promise.all(S),ue.success(`${_.length} favori(s) supprim(s)`),b([]),v()}catch(S){console.error("Erreur lors de la suppression multiple:",S),ue.error("Erreur lors de la suppression")}finally{u(S=>({...S,removing:!1}))}}},T=()=>{const S={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:r.length,favorites:r.map(F=>({title:F.listingTitle,price:F.listingPrice,category:F.listingCategory,transactionType:F.listingTransactionType,seller:F.sellerName,university:F.sellerUniversity,addedDate:F.createdAt.toISOString(),notes:F.notes||"",tags:F.tags}))},M=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),$=URL.createObjectURL(M),q=document.createElement("a");q.href=$,q.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,q.click(),URL.revokeObjectURL($)},k=async()=>{const S=` Mes favoris StudyMarket :

 ${o.totalFavorites} annonces sauvegardes
 Prix moyen : ${o.averagePrice}
 ${o.recentlyAdded} ajoutes cette semaine

Dcouvrez la marketplace tudiante ! `;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:S,url:window.location.origin})}catch{navigator.clipboard.writeText(S),ue.success("Lien copi dans le presse-papiers")}else navigator.clipboard.writeText(S),ue.success("Lien copi dans le presse-papiers")},R=()=>{let S=r;if(d.search){const M=d.search.toLowerCase();S=S.filter($=>$.listingTitle.toLowerCase().includes(M)||$.sellerName.toLowerCase().includes(M)||$.tags.some(q=>q.toLowerCase().includes(M)))}if(d.category!=="all"&&(S=S.filter(M=>M.listingCategory===d.category)),d.transactionType!=="all"&&(S=S.filter(M=>M.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":S=S.filter(M=>M.listingPrice===0);break;case"under-50":S=S.filter(M=>M.listingPrice>0&&M.listingPrice<50);break;case"50-200":S=S.filter(M=>M.listingPrice>=50&&M.listingPrice<=200);break;case"over-200":S=S.filter(M=>M.listingPrice>200);break}switch(m){case"recent":S.sort((M,$)=>$.createdAt.getTime()-M.createdAt.getTime());break;case"oldest":S.sort((M,$)=>M.createdAt.getTime()-$.createdAt.getTime());break;case"price-asc":S.sort((M,$)=>M.listingPrice-$.listingPrice);break;case"price-desc":S.sort((M,$)=>$.listingPrice-M.listingPrice);break;case"title":S.sort((M,$)=>M.listingTitle.localeCompare($.listingTitle));break;case"category":S.sort((M,$)=>M.listingCategory.localeCompare($.listingCategory));break}return S},j=S=>{try{return cc(S,{addSuffix:!0,locale:bs})}catch{return"Date inconnue"}},P=(S,M)=>M==="donation"?"Gratuit":M==="exchange"?"change":S===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(S),D=R();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(sn,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardes"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[s.jsx($1,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(U,{variant:"outline",onClick:T,className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(sn,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,""]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(xa,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Rcent",className:"w-8 h-8"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catgories"})]}),s.jsx(cv,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:S=>h(M=>({...M,search:S.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ct,{value:m,onValueChange:g,children:[s.jsx(st,{className:"w-40",children:s.jsx(ut,{})}),s.jsx(it,{children:Nhe.map(S=>s.jsx(re,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(U,{variant:x==="grid"?"default":"ghost",size:"icon",onClick:()=>y("grid"),className:"rounded-none",children:s.jsx(cO,{className:"w-4 h-4"})}),s.jsx(U,{variant:x==="list"?"default":"ghost",size:"icon",onClick:()=>y("list"),className:"rounded-none",children:s.jsx(hO,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(ct,{value:d.category,onValueChange:S=>h(M=>({...M,category:S})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Catgorie"})}),s.jsx(it,{children:Ok.map(S=>s.jsx(re,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs(ct,{value:d.transactionType,onValueChange:S=>h(M=>({...M,transactionType:S})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Type"})}),s.jsx(it,{children:jhe.map(S=>s.jsx(re,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs(ct,{value:d.priceRange,onValueChange:S=>h(M=>({...M,priceRange:S})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Prix"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Tous les prix"}),s.jsx(re,{value:"free",children:"Gratuit"}),s.jsx(re,{value:"under-50",children:"Moins de 50"}),s.jsx(re,{value:"50-200",children:"50 - 200"}),s.jsx(re,{value:"over-200",children:"Plus de 200"})]})]}),s.jsxs(ct,{value:d.availability,onValueChange:S=>h(M=>({...M,availability:S})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Disponibilit"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Toutes"}),s.jsx(re,{value:"available",children:"Disponibles"}),s.jsx(re,{value:"sold",children:"Vendues"}),s.jsx(re,{value:"reserved",children:"Rserves"})]})]})]}),_.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[_.length," favori(s) slectionn(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>b([]),children:"Dslectionner"}),s.jsx(U,{variant:"destructive",size:"sm",onClick:I,disabled:c.removing,children:c.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xo,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:c.favorites?s.jsx("div",{className:`grid gap-6 ${x==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((S,M)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(K,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},M))}):D.length===0?s.jsx(H,{children:s.jsx(K,{className:"pt-12 pb-12 text-center",children:r.length===0?s.jsxs(s.Fragment,{children:[s.jsx(sn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajout d'annonces  vos favoris. Explorez les annonces et cliquez sur  pour les sauvegarder !"}),s.jsx(U,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(pr,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(am,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun rsultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond  vos critres de recherche. Essayez de modifier vos filtres."}),s.jsx(U,{variant:"outline",onClick:()=>h({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Rinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[D.length," favori(s) trouv(s)",D.length!==r.length&&` sur ${r.length}`]}),s.jsx(U,{variant:"outline",size:"sm",onClick:()=>{_.length===D.length?b([]):b(D.map(S=>S.id))},children:_.length===D.length?"Dslectionner tout":"Slectionner tout"})]}),x==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(S=>{const M=i.find($=>$.id===S.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:_.includes(S.id),onChange:$=>{$.target.checked?b(q=>[...q,S.id]):b(q=>q.filter(F=>F!==S.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(U,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>C(S.id),children:s.jsx(xo,{className:"w-4 h-4"})})}),M?s.jsx(Bu,{listing:M}):s.jsxs(H,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(sa,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:S.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P(S.listingPrice,S.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajout ",j(S.createdAt)]})]})]})]},S.id)})}):s.jsx("div",{className:"space-y-4",children:D.map(S=>{var $;const M=i.find(q=>q.id===S.listingId);return s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:_.includes(S.id),onChange:q=>{q.target.checked?b(F=>[...F,S.id]):b(F=>F.filter(L=>L!==S.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:S.listingImage?s.jsx("img",{src:S.listingImage,alt:S.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(Us,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:S.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:P(S.listingPrice,S.listingTransactionType)}),(M==null?void 0:M.status)&&s.jsx(le,{variant:M.status==="active"?"default":"secondary",children:M.status==="active"?"Disponible":M.status==="sold"?"Vendu":"Rserv"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(on,{className:"w-3 h-3"}),S.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ls,{className:"w-3 h-3"}),S.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(cv,{className:"w-3 h-3"}),($=Ok.find(q=>q.value===S.listingCategory))==null?void 0:$.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajout ",j(S.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(U,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${S.listingId}`,"_blank"),children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>C(S.id),className:"text-destructive hover:text-destructive",children:s.jsx(xo,{className:"w-3 h-3"})})]})]})]})]})})},S.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(sn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces prfres et retrouvez-les facilement"})]})})})};var WN="Switch",[Ehe,Eme]=hs(WN),[Che,The]=Ehe(WN),P6=p.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),x=Xe(e,w=>g(w)),y=p.useRef(!1),_=m?d||!!m.closest("form"):!0,[b=!1,v]=cs({prop:i,defaultProp:a,onChange:u});return s.jsxs(Che,{scope:r,checked:b,disabled:l,children:[s.jsx(Ae.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":M6(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:me(t.onClick,w=>{v(E=>!E),_&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),_&&s.jsx(khe,{control:m,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});P6.displayName=WN;var D6="SwitchThumb",O6=p.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=The(D6,r);return s.jsx(Ae.span,{"data-state":M6(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});O6.displayName=D6;var khe=t=>{const{control:e,checked:r,bubbles:n=!0,...i}=t,a=p.useRef(null),o=ay(r),l=Yx(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[o,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function M6(t){return t?"checked":"unchecked"}var L6=P6,Ihe=O6;const Cr=p.forwardRef(({className:t,...e},r)=>s.jsx(L6,{className:Pe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:s.jsx(Ihe,{className:Pe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Cr.displayName=L6.displayName;const Ip=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Mv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Mv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=Mv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},Mk=[{value:"all",label:"Toutes catgories"},{value:"electronics",label:"lectronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],Lk=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"change"},{value:"service",label:"Service"}],Ahe=[{value:"all",label:"Toutes universits"},{value:"sorbonne",label:"Sorbonne Universit"},{value:"dauphine",label:"Universit Paris-Dauphine"},{value:"polytechnique",label:"cole Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSuplec"}],Rhe=()=>{const{currentUser:t,userProfile:e}=Ot(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=p.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,h]=p.useState(!1),[m,g]=p.useState(null),[x,y]=p.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});p.useEffect(()=>{t&&(_(),b())},[t]);const _=async()=>{if(t)try{u(M=>({...M,searches:!0}));const j=$t(It(be,"savedSearches"),Yt("userId","==",t.uid),qs(50)),P=await rr(j),D=[];P.forEach(M=>{const $=M.data();D.push({id:M.id,...$,createdAt:Ip($.createdAt),updatedAt:Ip($.updatedAt),lastNotified:$.lastNotified?Ip($.lastNotified):void 0})}),D.sort((M,$)=>$.createdAt.getTime()-M.createdAt.getTime()),n(D);const S=D.filter(M=>M.alertsEnabled).length;l(M=>({...M,totalSearches:D.length,activeAlerts:S}))}catch(j){console.error("Erreur lors du chargement des recherches sauvegardes:",j),ue.error("Erreur lors du chargement des recherches sauvegardes")}finally{u(j=>({...j,searches:!1}))}},b=async()=>{if(t)try{u(M=>({...M,matches:!0}));const j=$t(It(be,"alertMatches"),Yt("userId","==",t.uid),qs(100)),P=await rr(j),D=[];P.forEach(M=>{const $=M.data();D.push({id:M.id,...$,matchedAt:Ip($.matchedAt)})}),D.sort((M,$)=>$.matchedAt.getTime()-M.matchedAt.getTime()),a(D);const S=D.filter(M=>!M.seen).length;l(M=>({...M,totalMatches:D.length,newMatches:S}))}catch(j){console.error("Erreur lors du chargement des correspondances:",j),ue.error("Erreur lors du chargement des correspondances")}finally{u(j=>({...j,matches:!1}))}},v=async()=>{if(!t||!x.name.trim()){ue.error("Veuillez remplir le nom de la recherche");return}u(j=>({...j,creating:!0}));try{const j={};if(x.query&&x.query.trim()&&(j.query=x.query.trim()),x.category&&x.category!=="all"&&(j.category=x.category),x.transactionType&&x.transactionType!=="all"&&(j.transactionType=x.transactionType),x.university&&x.university!=="all"&&(j.university=x.university),x.minPrice&&x.minPrice.trim()){const S=parseFloat(x.minPrice);!isNaN(S)&&S>=0&&(j.minPrice=S)}if(x.maxPrice&&x.maxPrice.trim()){const S=parseFloat(x.maxPrice);!isNaN(S)&&S>=0&&(j.maxPrice=S)}const P={userId:t.uid,name:x.name.trim(),filters:j,alertsEnabled:x.alertsEnabled,notificationFrequency:x.notificationFrequency,notificationMethods:{email:x.notificationMethods.email,push:x.notificationMethods.push,sms:x.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},D=Mv(P);await Du(It(be,"savedSearches"),D),ue.success("Alerte cre avec succs !"),h(!1),T(),_()}catch(j){console.error("Erreur lors de la cration de l'alerte:",j),ue.error("Erreur lors de la cration de l'alerte")}finally{u(j=>({...j,creating:!1}))}},w=async(j,P)=>{try{u(S=>({...S,updating:!0}));const D=Mv({...P,updatedAt:new Date});await yr(Ze(be,"savedSearches",j),D),ue.success("Recherche mise  jour !"),_()}catch(D){console.error("Erreur lors de la mise  jour:",D),ue.error("Erreur lors de la mise  jour")}finally{u(D=>({...D,updating:!1}))}},E=async j=>{if(window.confirm("tes-vous sr de vouloir supprimer cette recherche sauvegarde ?"))try{await Pu(Ze(be,"savedSearches",j)),ue.success("Recherche supprime !"),_()}catch(P){console.error("Erreur lors de la suppression:",P),ue.error("Erreur lors de la suppression")}},C=async(j,P)=>{await w(j,{alertsEnabled:P})},I=async j=>{try{await yr(Ze(be,"alertMatches",j),{seen:!0,seenAt:new Date}),b()}catch(P){console.error("Erreur lors du marquage comme vu:",P)}},T=()=>{y({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),g(null)},k=j=>{try{return cc(j,{addSuffix:!0,locale:bs})}catch{return"Date inconnue"}},R=j=>{const P=[];if(j.query&&P.push(`"${j.query}"`),j.category&&j.category!=="all"){const D=Mk.find(S=>S.value===j.category);D&&P.push(D.label)}if(j.transactionType&&j.transactionType!=="all"){const D=Lk.find(S=>S.value===j.transactionType);D&&P.push(D.label)}return j.minPrice!==void 0&&P.push(` ${j.minPrice}`),j.maxPrice!==void 0&&P.push(` ${j.maxPrice}`),P.length>0?P.join("  "):"Tous les critres"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(tn,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos recherches sauvegardes et recevez des notifications"})]}),s.jsxs(aa,{open:d,onOpenChange:h,children:[s.jsx(gu,{asChild:!0,children:s.jsxs(U,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Ni,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(oa,{children:[s.jsxs(Si,{className:"flex items-center gap-2",children:[s.jsx(tl,{className:"w-5 h-5"}),"Crer une Alerte Personnalise"]}),s.jsx(vu,{children:"Dfinissez vos critres de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(Ie,{id:"alert-name",value:x.name,onChange:j=>y(P=>({...P,name:j.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(am,{className:"w-4 h-4"}),"Critres de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"search-query",children:"Mots-cls"}),s.jsx(Ie,{id:"search-query",value:x.query,onChange:j=>y(P=>({...P,query:j.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"search-category",children:"Catgorie"}),s.jsxs(ct,{value:x.category,onValueChange:j=>y(P=>({...P,category:j})),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{})}),s.jsx(it,{children:Mk.map(j=>s.jsx(re,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(ct,{value:x.transactionType,onValueChange:j=>y(P=>({...P,transactionType:j})),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{})}),s.jsx(it,{children:Lk.map(j=>s.jsx(re,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"search-university",children:"Universit"}),s.jsxs(ct,{value:x.university,onValueChange:j=>y(P=>({...P,university:j})),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{})}),s.jsx(it,{children:Ahe.map(j=>s.jsx(re,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"min-price",children:"Prix minimum ()"}),s.jsx(Ie,{id:"min-price",type:"number",value:x.minPrice,onChange:j=>y(P=>({...P,minPrice:j.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"max-price",children:"Prix maximum ()"}),s.jsx(Ie,{id:"max-price",type:"number",value:x.maxPrice,onChange:j=>y(P=>({...P,maxPrice:j.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(tn,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(Cr,{id:"alerts-enabled",checked:x.alertsEnabled,onCheckedChange:j=>y(P=>({...P,alertsEnabled:j}))})]}),x.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ye,{children:"Frquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantan",description:"Ds qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un rsum par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un rsum par semaine"}].map(j=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:j.value,name:"frequency",value:j.value,checked:x.notificationFrequency===j.value,onChange:P=>y(D=>({...D,notificationFrequency:P.target.value})),className:"rounded border-border"}),s.jsx(ye,{htmlFor:j.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:j.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:j.description})]})})]},j.value))})]}),s.jsxs("div",{children:[s.jsx(ye,{children:"Mthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"w-4 h-4 text-blue-600"}),s.jsx(ye,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(Cr,{id:"email-notifications",checked:x.notificationMethods.email,onCheckedChange:j=>y(P=>({...P,notificationMethods:{...P.notificationMethods,email:j}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"w-4 h-4 text-green-600"}),s.jsx(ye,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(Cr,{id:"push-notifications",checked:x.notificationMethods.push,onCheckedChange:j=>y(P=>({...P,notificationMethods:{...P.notificationMethods,push:j}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lv,{className:"w-4 h-4 text-purple-600"}),s.jsx(ye,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(le,{variant:"outline",className:"text-xs",children:"Bientt"})]}),s.jsx(Cr,{id:"sms-notifications",checked:x.notificationMethods.sms,onCheckedChange:j=>y(P=>({...P,notificationMethods:{...P.notificationMethods,sms:j}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(U,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(U,{onClick:v,disabled:c.creating||!x.name.trim(),children:c.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Cration..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tl,{className:"w-4 h-4 mr-2"}),"Crer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauves"})]}),s.jsx(pr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(tn,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(tl,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Nouvelles",className:"w-8 h-8"})]})})})]}),s.jsxs(uc,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Go,{className:"grid w-full grid-cols-2",children:[s.jsxs(zt,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(pr,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(zt,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(tl,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(le,{className:"ml-1 bg-blue-500",children:o.newMatches})]})]}),s.jsx(ar,{value:"searches",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(F1,{className:"w-5 h-5"}),"Recherches Sauvegardes"]}),s.jsx(at,{children:"Grez vos alertes et critres de recherche personnaliss"})]}),s.jsx(K,{children:c.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((j,P)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},P))}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegarde"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Crez votre premire alerte pour tre notifi des nouvelles annonces"}),s.jsxs(U,{onClick:()=>h(!0),children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Crer ma premire alerte"]})]}):s.jsx("div",{className:"space-y-4",children:r.map(j=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:j.name}),j.alertsEnabled?s.jsxs(le,{className:"bg-green-100 text-green-800",children:[s.jsx(tn,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(le,{variant:"secondary",children:[s.jsx(pT,{className:"w-3 h-3 mr-1"}),"Paus"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R(j.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sc,{className:"w-3 h-3"}),"Cr ",k(j.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(tl,{className:"w-3 h-3"}),j.matchCount," correspondance",j.matchCount!==1?"s":""]}),j.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(tn,{className:"w-3 h-3"}),"Dernire alerte ",k(j.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>C(j.id,!j.alertsEnabled),title:j.alertsEnabled?"Dsactiver les alertes":"Activer les alertes",children:j.alertsEnabled?s.jsx(pT,{className:"w-4 h-4"}):s.jsx(gQ,{className:"w-4 h-4"})}),s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>{var P,D;g(j),y({name:j.name,query:j.filters.query||"",category:j.filters.category||"all",transactionType:j.filters.transactionType||"all",university:j.filters.university||"all",minPrice:((P=j.filters.minPrice)==null?void 0:P.toString())||"",maxPrice:((D=j.filters.maxPrice)==null?void 0:D.toString())||"",alertsEnabled:j.alertsEnabled,notificationFrequency:j.notificationFrequency,notificationMethods:j.notificationMethods}),h(!0)},title:"Modifier",children:s.jsx(xQ,{className:"w-4 h-4"})}),s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>E(j.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(xo,{className:"w-4 h-4"})})]})]}),j.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsxs("span",{children:["Frquence: ",j.notificationFrequency==="instant"?"Instantan":j.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[j.notificationMethods.email&&s.jsx(Vr,{className:"w-3 h-3 text-blue-600\\",title:"Email activ"}),j.notificationMethods.push&&s.jsx(tn,{className:"w-3 h-3 text-green-600\\",title:"Push activ"}),j.notificationMethods.sms&&s.jsx(lv,{className:"w-3 h-3 text-purple-600\\",title:"SMS activ"})]})]})]},j.id))})})]})}),s.jsx(ar,{value:"matches",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(tl,{className:"w-5 h-5"}),"Correspondances Trouves"]}),s.jsx(at,{children:"Les annonces qui correspondent  vos critres de recherche"})]}),s.jsx(K,{children:c.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((j,P)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},P))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore  vos critres. Les nouvelles correspondances apparatront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(j=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${j.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[j.listingImage?s.jsx("img",{src:j.listingImage,alt:j.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:j.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!j.seen&&s.jsx(le,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:j.listingPrice===0?"Gratuit":`${j.listingPrice}`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),"Trouv ",k(j.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>I(j.id),disabled:j.seen,children:j.seen?s.jsxs(s.Fragment,{children:[s.jsx(lt,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(va,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(U,{size:"sm",onClick:()=>window.open(`/listing/${j.listingId}`,"_blank"),children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},j.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(pr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour grer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Crez des alertes personnalises pour tre notifi des nouvelles annonces"})]})})})},Phe=Le.object({displayName:Le.string().min(2,"Le nom doit contenir au moins 2 caractres"),bio:Le.string().max(500,"La bio ne peut pas dpasser 500 caractres").optional(),phone:Le.string().optional(),university:Le.string().min(1,"Veuillez slectionner votre universit"),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filire"),graduationYear:Le.number().min(2020).max(2035),campus:Le.string().optional(),location:Le.string().optional()}),Dhe=Le.object({currentPassword:Le.string().min(6,"Le mot de passe actuel est requis"),newPassword:Le.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractres"),confirmPassword:Le.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Ohe=Le.object({newEmail:Le.string().email("Email invalide"),password:Le.string().min(6,"Mot de passe requis pour changer l'email")}),Mhe=["Sorbonne Universit","Universit Paris-Dauphine","cole Polytechnique","ENS Paris","CentraleSuplec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Universit Paris 1 Panthon-Sorbonne","Universit Paris Cit","Sciences Po Paris","Universit de Lyon","Universit de Marseille","Universit de Toulouse","Universit de Bordeaux","Universit de Lille","Universit de Strasbourg","Universit de Nantes","Universit de Montpellier","Autre universit"],Lhe=["Informatique","Ingnierie","Commerce/Management","Droit","Mdecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","conomie","Psychologie","Communication","Design","Autre"],Vhe=()=>{var M,$,q,F,L,W;const{currentUser:t,userProfile:e,updateUserProfile:r,logout:n}=Ot(),i=Hn(),[a,o]=p.useState("profile"),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(!1),[y,_]=p.useState(""),[b,v]=p.useState({email:((M=e==null?void 0:e.notificationPreferences)==null?void 0:M.email)??!0,push:(($=e==null?void 0:e.notificationPreferences)==null?void 0:$.push)??!0,sms:((q=e==null?void 0:e.notificationPreferences)==null?void 0:q.sms)??!1,alerts:((F=e==null?void 0:e.notificationPreferences)==null?void 0:F.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[w,E]=p.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),C=_l({resolver:jl(Phe),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),I=_l({resolver:jl(Dhe)}),T=_l({resolver:jl(Ohe)});p.useEffect(()=>{var z,X,se,_e;e&&(C.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),v({email:((z=e.notificationPreferences)==null?void 0:z.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((se=e.notificationPreferences)==null?void 0:se.sms)??!1,alerts:((_e=e.notificationPreferences)==null?void 0:_e.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,C]);const k=async z=>{c(!0);try{await r({displayName:z.displayName,bio:z.bio||void 0,phone:z.phone||void 0,university:z.university,fieldOfStudy:z.fieldOfStudy,graduationYear:z.graduationYear,campus:z.campus||void 0,location:z.location||void 0}),ue.success("Profil mis  jour avec succs !")}catch(X){console.error("Erreur lors de la mise  jour du profil:",X),ue.error("Erreur lors de la mise  jour du profil")}finally{c(!1)}},R=async()=>{c(!0);try{await r({notificationPreferences:{email:b.email,push:b.push,sms:b.sms,alerts:b.alerts}}),ue.success("Prfrences de notification mises  jour !")}catch(z){console.error("Erreur lors de la mise  jour des notifications:",z),ue.error("Erreur lors de la mise  jour des notifications")}finally{c(!1)}},j=async z=>{if(t){c(!0);try{const X=_o.credential(t.email,z.currentPassword);await PC(t,X),await Qz(t,z.newPassword),ue.success("Mot de passe mis  jour avec succs !"),m(!1),I.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?ue.error("Mot de passe actuel incorrect"):ue.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},P=async z=>{if(t){c(!0);try{const X=_o.credential(t.email,z.password);await PC(t,X),await Xz(t,z.newEmail),await r({email:z.newEmail}),ue.success("Email mis  jour avec succs !"),x(!1),T.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?ue.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?ue.error("Cet email est dj utilis"):ue.error("Erreur lors du changement d'email")}finally{c(!1)}}},D=async()=>{if(!(!t||y!=="SUPPRIMER")){c(!0);try{const z=D4(be),X=["listings","conversations","reviews","favorites","reports"];for(const se of X){const _e=$t(It(be,se),Yt("userId","==",t.uid));(await rr(_e)).forEach(jt=>{z.delete(jt.ref)})}z.delete(Ze(be,"users",t.uid)),await z.commit(),await tB(t),ue.success("Compte supprim avec succs"),i("/")}catch(z){console.error("Erreur lors de la suppression du compte:",z),ue.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},S=async()=>{if(t){c(!0);try{const z={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=$t(It(be,"listings"),Yt("sellerId","==",t.uid)),se=await rr(X);z.listings=se.docs.map(de=>({id:de.id,...de.data()}));const _e=$t(It(be,"conversations"),Yt("participants","array-contains",t.uid)),ot=await rr(_e);z.conversations=ot.docs.map(de=>({id:de.id,...de.data()}));const jt=$t(It(be,"reviews"),Yt("revieweeId","==",t.uid)),yt=await rr(jt);z.reviews=yt.docs.map(de=>({id:de.id,...de.data()}));const Se=$t(It(be,"favorites"),Yt("userId","==",t.uid)),tt=await rr(Se);z.favorites=tt.docs.map(de=>({id:de.id,...de.data()}));const Z=JSON.stringify(z,null,2),ge=new Blob([Z],{type:"application/json"}),Y=URL.createObjectURL(ge),ie=document.createElement("a");ie.href=Y,ie.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,ie.click(),URL.revokeObjectURL(Y),ue.success("Donnes exportes avec succs !")}catch(z){console.error("Erreur lors de l'export des donnes:",z),ue.error("Erreur lors de l'export des donnes")}finally{c(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(Ux,{className:"w-8 h-8"}),"Paramtres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Grez votre profil, vos prfrences et votre scurit"})]}),s.jsxs(uc,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Go,{className:"grid w-full grid-cols-5",children:[s.jsxs(zt,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(on,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(zt,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(zt,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(va,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialit"})]}),s.jsxs(zt,{value:"security",className:"flex items-center gap-2",children:[s.jsx(qe,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Scurit"})]}),s.jsxs(zt,{value:"data",className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Donnes"})]})]}),s.jsx(ar,{value:"profile",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(on,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(at,{children:"Mettez  jour vos informations de profil et vos prfrences"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(vL,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Hi,{}),s.jsxs("form",{onSubmit:C.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(Ie,{id:"displayName",...C.register("displayName"),placeholder:"Votre nom complet"}),C.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"phone",children:"Tlphone"}),s.jsx(Ie,{id:"phone",type:"tel",...C.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"bio",children:"Biographie"}),s.jsx(Gs,{id:"bio",...C.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((L=C.watch("bio"))==null?void 0:L.length)||0,"/500 caractres"]})]}),s.jsx(Hi,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(_n,{className:"w-4 h-4"}),"Informations acadmiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"university",children:"Universit *"}),s.jsxs(ct,{value:C.watch("university"),onValueChange:z=>C.setValue("university",z),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Slectionnez votre universit"})}),s.jsx(it,{children:Mhe.map(z=>s.jsx(re,{value:z,children:z},z))})]}),C.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"fieldOfStudy",children:"Filire d'tudes *"}),s.jsxs(ct,{value:C.watch("fieldOfStudy"),onValueChange:z=>C.setValue("fieldOfStudy",z),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Slectionnez votre filire"})}),s.jsx(it,{children:Lhe.map(z=>s.jsx(re,{value:z,children:z},z))})]}),C.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"graduationYear",children:"Anne de diplme *"}),s.jsxs(ct,{value:(W=C.watch("graduationYear"))==null?void 0:W.toString(),onValueChange:z=>C.setValue("graduationYear",parseInt(z)),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Anne de diplme"})}),s.jsx(it,{children:Array.from({length:16},(z,X)=>2020+X).map(z=>s.jsx(re,{value:z.toString(),children:z},z))})]}),C.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"campus",children:"Campus"}),s.jsx(Ie,{id:"campus",...C.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"location",children:"Localisation"}),s.jsx(Ie,{id:"location",...C.register("location"),placeholder:"Paris, France"})]}),s.jsx(U,{type:"submit",disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(M0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(ar,{value:"notifications",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"w-5 h-5"}),"Prfrences de notification"]}),s.jsx(at,{children:"Choisissez comment vous souhaitez tre notifi"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Vr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(Cr,{checked:b.email,onCheckedChange:z=>v(X=>({...X,email:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ic,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(Cr,{checked:b.push,onCheckedChange:z=>v(X=>({...X,push:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(om,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientt disponible)"})]})]}),s.jsx(Cr,{checked:b.sms,onCheckedChange:z=>v(X=>({...X,sms:z})),disabled:!0})]})]})]}),s.jsx(Hi,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xt,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(Cr,{checked:b.messages,onCheckedChange:z=>v(X=>({...X,messages:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Us,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant  vos recherches"})]})]}),s.jsx(Cr,{checked:b.listings,onCheckedChange:z=>v(X=>({...X,listings:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zi,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et valuations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(Cr,{checked:b.reviews,onCheckedChange:z=>v(X=>({...X,reviews:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tn,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de scurit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises  jour de scurit"})]})]}),s.jsx(Cr,{checked:b.alerts,onCheckedChange:z=>v(X=>({...X,alerts:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pQ,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalits et promotions"})]})]}),s.jsx(Cr,{checked:b.marketing,onCheckedChange:z=>v(X=>({...X,marketing:z}))})]})]})]}),s.jsx(U,{onClick:R,disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(M0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les prfrences"]})})]})]})}),s.jsx(ar,{value:"privacy",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(va,{className:"w-5 h-5"}),"Confidentialit et visibilit"]}),s.jsx(at,{children:"Contrlez qui peut voir vos informations"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilit du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les tudiants vrifis"})]}),s.jsx(Cr,{checked:w.profileVisibility==="public",onCheckedChange:z=>E(X=>({...X,profileVisibility:z?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(Cr,{checked:w.showEmail,onCheckedChange:z=>E(X=>({...X,showEmail:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le tlphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numro de tlphone est visible sur votre profil"})]}),s.jsx(Cr,{checked:w.showPhone,onCheckedChange:z=>E(X=>({...X,showPhone:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'universit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre universit est visible sur votre profil"})]}),s.jsx(Cr,{checked:w.showUniversity,onCheckedChange:z=>E(X=>({...X,showUniversity:z}))})]})]})]}),s.jsx(Hi,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres tudiants peuvent vous envoyer des messages"})]}),s.jsx(Cr,{checked:w.allowMessages,onCheckedChange:z=>E(X=>({...X,allowMessages:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous tes en ligne"})]}),s.jsx(Cr,{checked:w.showOnlineStatus,onCheckedChange:z=>E(X=>({...X,showOnlineStatus:z}))})]})]})]}),s.jsxs(Bt,{children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx(qt,{children:"Vos informations personnelles sont toujours protges et ne sont jamais partages avec des tiers sans votre consentement."})]})]})]})}),s.jsx(ar,{value:"security",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(qe,{className:"w-5 h-5"}),"Scurit du compte"]}),s.jsx(at,{children:"Grez la scurit de votre compte StudyMarket"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Vr,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(aa,{open:g,onOpenChange:x,children:[s.jsx(gu,{asChild:!0,children:s.jsx(U,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Ni,{children:[s.jsxs(oa,{children:[s.jsx(Si,{children:"Changer l'adresse email"}),s.jsx(vu,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:T.handleSubmit(P),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(Ie,{id:"newEmail",type:"email",...T.register("newEmail"),placeholder:"nouveau@email.com"}),T.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(Ie,{id:"emailPassword",type:"password",...T.register("password"),placeholder:""}),T.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.password.message})]}),s.jsxs(cg,{children:[s.jsx(U,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Annuler"}),s.jsxs(U,{type:"submit",disabled:l,children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(M0,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Mu,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernire modification : il y a 30 jours"}),s.jsxs(aa,{open:h,onOpenChange:m,children:[s.jsx(gu,{asChild:!0,children:s.jsx(U,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Ni,{children:[s.jsxs(oa,{children:[s.jsx(Si,{children:"Changer le mot de passe"}),s.jsx(vu,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:I.handleSubmit(j),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(Ie,{id:"currentPassword",type:"password",...I.register("currentPassword"),placeholder:""}),I.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(Ie,{id:"newPassword",type:"password",...I.register("newPassword"),placeholder:""}),I.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(Ie,{id:"confirmPassword",type:"password",...I.register("confirmPassword"),placeholder:""}),I.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.confirmPassword.message})]}),s.jsxs(cg,{children:[s.jsx(U,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsxs(U,{type:"submit",disabled:l,children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(dQ,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Hi,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vrification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vrifi":"Vrification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut tudiant a t vrifi":"Votre statut tudiant est en cours de vrification"})]})]}),e!=null&&e.isVerified?s.jsxs(le,{className:"bg-green-100 text-green-800",children:[s.jsx(lt,{className:"w-3 h-3 mr-1"}),"Vrifi"]}):s.jsx(le,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(Bt,{children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx(qt,{children:"Pour votre scurit, nous vous recommandons d'utiliser un mot de passe fort et de le changer rgulirement."})]})]})]})}),s.jsxs(ar,{value:"data",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-5 h-5"}),"Gestion des donnes"]}),s.jsx(at,{children:"Exportez ou supprimez vos donnes personnelles"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes donnes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tlchargez une copie de toutes vos donnes StudyMarket au format JSON."}),s.jsxs(U,{onClick:S,disabled:l,variant:"outline",children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(rs,{className:"w-4 h-4 mr-2"}),"Exporter mes donnes"]})]}),s.jsx(Hi,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(Bt,{className:"border-destructive",children:[s.jsx(Qt,{className:"h-4 w-4"}),s.jsx(qt,{children:"La suppression de votre compte est irrversible. Toutes vos donnes seront dfinitivement supprimes."})]}),s.jsxs(aa,{open:u,onOpenChange:d,children:[s.jsx(gu,{asChild:!0,children:s.jsxs(U,{variant:"destructive",children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Ni,{children:[s.jsxs(oa,{children:[s.jsx(Si,{className:"text-destructive",children:"Supprimer dfinitivement le compte"}),s.jsxs(vu,{children:["Cette action est irrversible. Toutes vos donnes seront supprimes :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et valuations"}),s.jsx("li",{children:"Favoris et recherches sauvegardes"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(Ie,{id:"deleteConfirm",value:y,onChange:z=>_(z.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(cg,{children:[s.jsx(U,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),s.jsxs(U,{variant:"destructive",onClick:D,disabled:y!=="SUPPRIMER"||l,children:[l?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Supprimer dfinitivement"]})]})]})]})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(ov,{className:"w-5 h-5"}),"Informations lgales"]})}),s.jsx(K,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(U,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(U,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),"Politique de confidentialit"]})}),s.jsx(U,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(U,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez tre connect pour accder aux paramtres."})})})})};var HN="Collapsible",[Fhe,V6]=hs(HN),[Uhe,GN]=Fhe(HN),F6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=cs({prop:n,defaultProp:i,onChange:o});return s.jsx(Uhe,{scope:r,disabled:a,contentId:ns(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:s.jsx(Ae.div,{"data-state":YN(c),"data-disabled":a?"":void 0,...l,ref:e})})});F6.displayName=HN;var U6="CollapsibleTrigger",$6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,i=GN(U6,r);return s.jsx(Ae.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":YN(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:e,onClick:me(t.onClick,i.onOpenToggle)})});$6.displayName=U6;var KN="CollapsibleContent",z6=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=GN(KN,t.__scopeCollapsible);return s.jsx(Kr,{present:r||i.open,children:({present:a})=>s.jsx($he,{...n,ref:e,present:a})})});z6.displayName=KN;var $he=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:i,...a}=t,o=GN(KN,r),[l,c]=p.useState(n),u=p.useRef(null),d=Xe(e,u),h=p.useRef(0),m=h.current,g=p.useRef(0),x=g.current,y=o.open||l,_=p.useRef(y),b=p.useRef();return p.useEffect(()=>{const v=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(v)},[]),Ar(()=>{const v=u.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const w=v.getBoundingClientRect();h.current=w.height,g.current=w.width,_.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),c(n)}},[o.open,n]),s.jsx(Ae.div,{"data-state":YN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:y&&i})});function YN(t){return t?"open":"closed"}var zhe=F6,Bhe=$6,qhe=z6,Ia="Accordion",Whe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[JN,Hhe,Ghe]=cm(Ia),[vy,Cme]=hs(Ia,[Ghe,V6]),XN=V6(),B6=Ce.forwardRef((t,e)=>{const{type:r,...n}=t,i=n,a=n;return s.jsx(JN.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?s.jsx(Xhe,{...a,ref:e}):s.jsx(Jhe,{...i,ref:e})})});B6.displayName=Ia;var[q6,Khe]=vy(Ia),[W6,Yhe]=vy(Ia,{collapsible:!1}),Jhe=Ce.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[l,c]=cs({prop:r,defaultProp:n,onChange:i});return s.jsx(q6,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Ce.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(W6,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(H6,{...o,ref:e})})})}),Xhe=Ce.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...a}=t,[o=[],l]=cs({prop:r,defaultProp:n,onChange:i}),c=Ce.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=Ce.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return s.jsx(q6,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(W6,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(H6,{...a,ref:e})})})}),[Qhe,xy]=vy(Ia),H6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:i,orientation:a="vertical",...o}=t,l=Ce.useRef(null),c=Xe(l,e),u=Hhe(r),h=ac(i)==="ltr",m=me(t.onKeyDown,g=>{var k;if(!Whe.includes(g.key))return;const x=g.target,y=u().filter(R=>{var j;return!((j=R.ref.current)!=null&&j.disabled)}),_=y.findIndex(R=>R.ref.current===x),b=y.length;if(_===-1)return;g.preventDefault();let v=_;const w=0,E=b-1,C=()=>{v=_+1,v>E&&(v=w)},I=()=>{v=_-1,v<w&&(v=E)};switch(g.key){case"Home":v=w;break;case"End":v=E;break;case"ArrowRight":a==="horizontal"&&(h?C():I());break;case"ArrowDown":a==="vertical"&&C();break;case"ArrowLeft":a==="horizontal"&&(h?I():C());break;case"ArrowUp":a==="vertical"&&I();break}const T=v%b;(k=y[T].ref.current)==null||k.focus()});return s.jsx(Qhe,{scope:r,disabled:n,direction:i,orientation:a,children:s.jsx(JN.Slot,{scope:r,children:s.jsx(Ae.div,{...o,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),Lv="AccordionItem",[Zhe,QN]=vy(Lv),G6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...i}=t,a=xy(Lv,r),o=Khe(Lv,r),l=XN(r),c=ns(),u=n&&o.value.includes(n)||!1,d=a.disabled||t.disabled;return s.jsx(Zhe,{scope:r,open:u,disabled:d,triggerId:c,children:s.jsx(zhe,{"data-orientation":a.orientation,"data-state":Z6(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});G6.displayName=Lv;var K6="AccordionHeader",Y6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=xy(Ia,r),a=QN(K6,r);return s.jsx(Ae.h3,{"data-orientation":i.orientation,"data-state":Z6(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:e})});Y6.displayName=K6;var b_="AccordionTrigger",J6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=xy(Ia,r),a=QN(b_,r),o=Yhe(b_,r),l=XN(r);return s.jsx(JN.ItemSlot,{scope:r,children:s.jsx(Bhe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...n,ref:e})})});J6.displayName=b_;var X6="AccordionContent",Q6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=xy(Ia,r),a=QN(X6,r),o=XN(r);return s.jsx(qhe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Q6.displayName=X6;function Z6(t){return t?"open":"closed"}var efe=B6,tfe=G6,rfe=Y6,eV=J6,tV=Q6;const nfe=efe,rV=p.forwardRef(({className:t,...e},r)=>s.jsx(tfe,{ref:r,className:Pe("border-b",t),...e}));rV.displayName="AccordionItem";const nV=p.forwardRef(({className:t,children:e,...r},n)=>s.jsx(rfe,{className:"flex",children:s.jsxs(eV,{ref:n,className:Pe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,s.jsx(s3,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));nV.displayName=eV.displayName;const sV=p.forwardRef(({className:t,children:e,...r},n)=>s.jsx(tV,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:s.jsx("div",{className:Pe("pb-4 pt-0",t),children:e})}));sV.displayName=tV.displayName;const Vk=[{category:"Compte et Inscription",icon:ka,questions:[{question:"Comment crer un compte tudiant vrifi ?",answer:'Pour crer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre systme vrifie automatiquement votre statut tudiant. Vous recevrez un badge "tudiant certifi" une fois la vrification termine.'},{question:"Pourquoi mon universit n'est pas reconnue ?",answer:"Nous ajoutons rgulirement de nouvelles universits. Si la vtre n'apparat pas, contactez-nous avec votre carte tudiante et nous l'ajouterons rapidement  notre base de donnes."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, universit, et prfrences de notification. Certaines informations ncessitent une re-vrification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autoris. Cela garantit la confiance et la scurit de notre communaut tudiante."}]},{category:"Achats et Ventes",icon:Mr,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description dtaille, prix et lieu de rencontre. Votre annonce sera visible immdiatement aprs publication.'},{question:"Quels modes de paiement sont accepts ?",answer:"Nous recommandons les paiements scuriss : espces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. vitez les paiements  distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggre une fourchette de prix base sur l'tat et la catgorie. Consultez les annonces similaires et considrez l'tat rel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se prsente pas ?",answer:"Contactez-le via notre messagerie. Si pas de rponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au srieux."}]},{category:"Scurit et Confiance",icon:qe,questions:[{question:"Comment viter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothque). Vrifiez l'identit avec la carte tudiante. Ne payez jamais  l'avance sans avoir vu l'objet. Utilisez notre systme de signalement en cas de doute."},{question:"O se rencontrer en scurit ?",answer:`Privilgiez les lieux publics de votre campus : bibliothques, halls d'entre, caftrias. vitez les parkings isols ou les domiciles privs. Certaines universits ont des "zones d'change scurises".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Dcrivez prcisment le problme. Notre quipe examine tous les signalements sous 24h et prend les mesures appropries.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de rsolution, utilisez notre service de mdiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Xt,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rdigez un message poli et prcis. Le vendeur recevra une notification email et pourra vous rpondre via notre messagerie scurise.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reoivent des notifications email mais peuvent avoir des dlais de rponse. Soyez patient (24-48h). Si pas de rponse, l'annonce est peut-tre dj vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnes ?",answer:"Oui, mais seulement aprs les premiers changes via notre messagerie. Cela nous permet de garder une trace en cas de problme et de vous protger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez dbloquer depuis vos paramtres si ncessaire.`}]},{category:"Impact cologique",icon:sn,questions:[{question:"Comment est calcul mon impact CO ?",answer:"Chaque objet achet d'occasion vite la production d'un neuf. Nous calculons le CO conomis selon des donnes ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges cologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1re transaction), "co-Warrior" (10kg CO), "Hros Climatique" (100kg CO). Ils apparaissent sur votre profil et motivent la communaut.'},{question:"Comment amliorer mon rang cologique ?",answer:"Multipliez les transactions d'occasion, privilgiez les dons (bonus +20%), participez aux changes. Plus vous conomisez de CO, plus votre rang augmente : Dbutant  co-Warrior  Matre Environnemental  Lgende cologique."}]},{category:"Technique et Bugs",icon:Ux,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vrifiez votre connexion internet. Si le problme persiste, contactez-nous avec votre navigateur et systme d'exploitation."},{question:"Je ne reois pas les notifications email",answer:'Vrifiez vos spams/courriers indsirables. Ajoutez notifications@boxetu.fr  vos contacts. Vrifiez vos prfrences de notification dans "Paramtres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vrifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous tes sur mobile, autorisez l'accs  la galerie dans les paramtres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramtres" > "Compte" > "Supprimer mon compte". Cette action est irrversible et supprime toutes vos donnes. Vos annonces actives seront automatiquement retires.'}]}],sfe=[{title:"Chat en direct",description:"Rponse immdiate pendant les heures ouvrables",icon:Xt,action:"Dmarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Rponse sous 24h maximum",icon:Vr,action:"support@boxetu.fr",available:!0,hours:"24h/7j"},{title:"Tlphone",description:"Pour les urgences uniquement",icon:om,action:"01 23 45 67 89",available:!1,hours:"Bientt disponible"},{title:"Centre de ressources",description:"Guides dtaills et tutoriels",icon:iO,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],ife=[{title:"Guide du vendeur dbutant",description:"Tout savoir pour vendre efficacement",icon:Zi,duration:"5 min",type:"Article"},{title:"Scurit : viter les arnaques",description:"Reconnatre et viter les situations dangereuses",icon:qe,duration:"3 min",type:"Vido"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:kQ,duration:"7 min",type:"Article"},{title:"Impact cologique expliqu",description:"Comment nous calculons votre empreinte carbone",icon:sn,duration:"4 min",type:"Infographie"}],afe=()=>{const{currentUser:t,userProfile:e}=Ot(),[r,n]=p.useState(""),[i,a]=p.useState("all"),[o,l]=p.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=p.useState(!1),d=Vk.filter(m=>{if(i!=="all"&&m.category!==i)return!1;if(r){const g=r.toLowerCase();return m.questions.some(x=>x.question.toLowerCase().includes(g)||x.answer.toLowerCase().includes(g))}return!0}),h=async m=>{if(m.preventDefault(),!o.subject||!o.message){ue.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(g=>setTimeout(g,1e3)),ue.success("Votre message a t envoy ! Nous vous rpondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{ue.error("Erreur lors de l'envoi. Veuillez ressayer.")}finally{u(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(ov,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide BOXETU"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les rponses  vos questions ou contactez notre quipe support"})]}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(pr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, scurit, notifications)",value:r,onChange:m=>n(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:sfe.map((m,g)=>s.jsx(H,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(m.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:m.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),s.jsx(U,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},g))}),s.jsxs(uc,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Go,{className:"grid w-full grid-cols-3",children:[s.jsxs(zt,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(ov,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(zt,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(iO,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(zt,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(Xt,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(ar,{value:"faq",className:"space-y-6",children:[s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(U,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catgories"}),Vk.map(m=>s.jsxs(U,{variant:i===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?s.jsx(H,{children:s.jsxs(K,{className:"pt-12 pb-12 text-center",children:[s.jsx(pr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun rsultat trouv"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-cls ou contactez notre support"}),s.jsx(U,{variant:"outline",onClick:()=>n(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:d.map((m,g)=>s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),s.jsx(K,{children:s.jsx(nfe,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((x,y)=>s.jsxs(rV,{value:`${g}-${y}`,children:[s.jsx(nV,{className:"text-left",children:x.question}),s.jsx(sV,{className:"text-muted-foreground leading-relaxed",children:x.answer})]},y))})})]},g))})]}),s.jsxs(ar,{value:"guides",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(dO,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(at,{children:"Apprenez  utiliser BOXETU comme un pro avec nos guides dtaills"})]}),s.jsx(K,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ife.map((m,g)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:m.title}),s.jsx(le,{variant:"outline",className:"text-xs",children:m.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),m.duration]}),s.jsxs(U,{size:"sm",variant:"outline",children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},g))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(mO,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vido"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidos courtes"}),s.jsxs(U,{variant:"outline",size:"sm",children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Voir les vidos"]})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(rs,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tlchargez nos guides au format PDF"}),s.jsxs(U,{variant:"outline",size:"sm",children:[s.jsx(rs,{className:"w-3 h-3 mr-1"}),"Tlcharger"]})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(ka,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communaut"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"changez avec d'autres tudiants"}),s.jsxs(U,{variant:"outline",size:"sm",children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(ar,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Lu,{className:"w-5 h-5"}),"Contactez notre quipe"]}),s.jsx(at,{children:"Dcrivez votre problme en dtail pour une rponse rapide et prcise"})]}),s.jsx(K,{children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"subject",children:"Sujet *"}),s.jsx(Ie,{id:"subject",value:o.subject,onChange:m=>l(g=>({...g,subject:m.target.value})),placeholder:"Rsumez votre problme en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"category",children:"Catgorie"}),s.jsxs(ct,{value:o.category,onValueChange:m=>l(g=>({...g,category:m})),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{placeholder:"Slectionnez une catgorie"})}),s.jsxs(it,{children:[s.jsx(re,{value:"account",children:"Compte et profil"}),s.jsx(re,{value:"listing",children:"Annonces"}),s.jsx(re,{value:"payment",children:"Paiements"}),s.jsx(re,{value:"security",children:"Scurit"}),s.jsx(re,{value:"technical",children:"Problme technique"}),s.jsx(re,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"priority",children:"Priorit"}),s.jsxs(ct,{value:o.priority,onValueChange:m=>l(g=>({...g,priority:m})),children:[s.jsx(st,{className:"mt-1",children:s.jsx(ut,{})}),s.jsxs(it,{children:[s.jsx(re,{value:"low",children:"Basse - Question gnrale"}),s.jsx(re,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(re,{value:"high",children:"Haute - Problme bloquant"}),s.jsx(re,{value:"urgent",children:"Urgente - Scurit/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"message",children:"Message *"}),s.jsx(Gs,{id:"message",value:o.message,onChange:m=>l(g=>({...g,message:m.target.value})),placeholder:"Dcrivez votre problme en dtail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(Bt,{children:[s.jsx(lt,{className:"h-4 w-4"}),s.jsxs(qt,{children:["Nous vous rpondrons  l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(U,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Lu,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(At,{className:"w-5 h-5"}),"Temps de rponse"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions gnrales"}),s.jsx(le,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problmes techniques"}),s.jsx(le,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences scurit"}),s.jsx(le,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(lO,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Vr,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@boxetu.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xt,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ic,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientt disponible"})]})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Systme",className:"w-5 h-5"}),"tat du systme"]})}),s.jsxs(K,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Oprationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Oprationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(U,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(Mn,{className:"w-3 h-3 mr-1"}),"Page de statut complte"]})]})]})]})]})})]})]})},ofe=[{category:"Rencontres et changes",icon:ls,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits frquents : bibliothques universitaires, halls d'entre, caftrias du campus.",type:"do",icon:lt},{title:"vitez les lieux isols",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privs ou endroits dserts.",type:"dont",icon:qn},{title:"Prvenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontre.",type:"do",icon:lt},{title:"Rencontrez en journe",description:"Privilgiez les rendez-vous en journe, vitez les rencontres tardives ou nocturnes.",type:"do",icon:lt}]},{category:"Vrification d'Identit",icon:fO,color:"text-green-600",tips:[{title:"Demandez la carte tudiante",description:"Vrifiez toujours l'identit avec la carte tudiante. C'est votre garantie de scurit.",type:"do",icon:lt},{title:"Vrifiez le profil StudyMarket",description:"Consultez le profil : badge vrifi, avis, nombre de transactions, anciennet du compte.",type:"do",icon:lt},{title:"Mfiez-vous des profils rcents",description:"Soyez prudent avec les comptes crs rcemment sans historique de transactions.",type:"dont",icon:Qt},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos changes via notre messagerie scurise.",type:"do",icon:lt}]},{category:"Paiements Scuriss",icon:Mr,color:"text-purple-600",tips:[{title:"Payez  la remise",description:"Ne payez qu'aprs avoir inspect l'objet et lors de la remise en main propre.",type:"do",icon:lt},{title:"vitez les paiements  l'avance",description:"Ne versez jamais d'acompte ou de paiement intgral avant d'avoir vu l'objet.",type:"dont",icon:qn},{title:"Utilisez des moyens traables",description:"Privilgiez Lydia, PayPal, virements ou espces. vitez les cryptomonnaies.",type:"do",icon:lt},{title:"Mfiez-vous des prix trop bas",description:"Un iPhone  50 ou un MacBook  200 sont probablement des arnaques.",type:"dont",icon:Qt}]},{category:"Communication",icon:Xt,color:"text-blue-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos changes, mme en cas de dsaccord.",type:"do",icon:lt},{title:"Posez des questions prcises",description:"Demandez des dtails sur l'tat, l'ge, la raison de la vente, les dfauts ventuels.",type:"do",icon:lt},{title:"Mfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernire chance") sont suspects.',type:"dont",icon:Qt},{title:"Gardez les preuves",description:"Conservez les captures d'cran des conversations en cas de litige.",type:"do",icon:lt}]}],lfe=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Qt},{title:"Paiement demand  l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Mr},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:ls},{title:"Photos de mauvaise qualit",description:"Images floues, prises sur internet ou trs peu nombreuses",severity:"medium",icon:bl},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte rcent",severity:"medium",icon:ka},{title:"Communication trange",description:"Franais approximatif, rponses vasives, pression temporelle",severity:"medium",icon:Xt},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:At},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres donnes sensibles",severity:"high",icon:Mu}],cfe=[{title:"Urgence immdiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:om,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des rgles",contact:`Bouton "Signaler" dans l'app`,icon:gl,color:"text-blue-600"},{title:"Support StudyMarket",description:"Questions, aide, mdiation de conflit",contact:"support@studymarket.fr",icon:Xt,color:"text-blue-600"},{title:"Scurit Campus",description:"Incidents sur le campus universitaire",contact:"Service scurit de votre universit",icon:qe,color:"text-green-600"}],ufe=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(qe,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Scurit & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre scurit est notre priorit. Suivez ces conseils pour des changes sereins et scuriss entre tudiants."})]}),s.jsxs(Bt,{className:"border-green-200 bg-green-50",children:[s.jsx(qe,{className:"h-4 w-4 text-green-600"}),s.jsx(qt,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vrifiez l'identit avec la carte tudiante."]}),s.jsxs(U,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(rs,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(qe,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions scurises"})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(fO,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"tudiants vrifis"})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(At,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Rponse aux signalements"})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Zi,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction scurit"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Scurit Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des changes en toute scurit"})]}),ofe.map((t,e)=>s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(K,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((r,n)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${r.type==="do"?"border-green-200 bg-green-50":r.type==="dont"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r.icon,{className:`w-5 h-5 mt-0.5 ${r.type==="do"?"text-green-600":r.type==="dont"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${r.type==="do"?"text-green-800":r.type==="dont"?"text-red-800":"text-blue-800"}`,children:r.title}),s.jsx("p",{className:`text-sm ${r.type==="do"?"text-green-700":r.type==="dont"?"text-red-700":"text-blue-700"}`,children:r.description})]})]})},n))})})]},e))]}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme  Reconnatre"]}),s.jsx(at,{children:"Ces comportements doivent vous alerter et vous inciter  la prudence"})]}),s.jsx(K,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:lfe.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-blue-800"}`,children:t.title}),s.jsx(le,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-blue-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(om,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(at,{children:"En cas de problme, voici qui contacter selon la situation"})]}),s.jsx(K,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:cfe.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-blue-600"||t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(df,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tlchargez notre guide de scurit complet"}),s.jsxs(U,{variant:"outline",className:"w-full",children:[s.jsx(rs,{className:"w-4 h-4 mr-2"}),"Tlcharger"]})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(ov,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions frquentes sur la scurit"}),s.jsx(U,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(ve,{to:"/help",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(Xt,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problme"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre quipe de scurit"}),s.jsxs(U,{variant:"outline",className:"w-full",children:[s.jsx(gl,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(Bt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(dO,{className:"h-4 w-4 text-blue-600"}),s.jsxs(qt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hsitez pas  annuler la transaction. Votre scurit vaut plus que n'importe quel objet. L'quipe StudyMarket est l pour vous aider 24h/7j."]})]})]});function dfe(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,y=(m==null?void 0:m[t][c])||l,_=p.useMemo(()=>x,Object.values(x));return s.jsx(y.Provider,{value:_,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,hfe(i,...e)]}function hfe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var ZN="Progress",eS=100,[ffe,Tme]=dfe(ZN),[mfe,pfe]=ffe(ZN),iV=p.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=gfe,...o}=t;(i||i===0)&&!Fk(i)&&console.error(vfe(`${i}`,"Progress"));const l=Fk(i)?i:eS;n!==null&&!Uk(n,l)&&console.error(xfe(`${n}`,"Progress"));const c=Uk(n,l)?n:null,u=Vv(c)?a(c,l):void 0;return s.jsx(mfe,{scope:r,value:c,max:l,children:s.jsx(Ae.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Vv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":lV(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});iV.displayName=ZN;var aV="ProgressIndicator",oV=p.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,i=pfe(aV,r);return s.jsx(Ae.div,{"data-state":lV(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});oV.displayName=aV;function gfe(t,e){return`${Math.round(t/e*100)}%`}function lV(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Vv(t){return typeof t=="number"}function Fk(t){return Vv(t)&&!isNaN(t)&&t>0}function Uk(t,e){return Vv(t)&&!isNaN(t)&&t<=e&&t>=0}function vfe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${eS}\`.`}function xfe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${eS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var cV=iV,yfe=oV;const uV=p.forwardRef(({className:t,value:e,...r},n)=>s.jsx(cV,{ref:n,className:Pe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:s.jsx(yfe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));uV.displayName=cV.displayName;const nl={electronics:{category:"lectronique",icon:ic,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:sO,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:Ls,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, dco, lectromnager"},clothing:{category:"Vtements",icon:z1,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vtements, chaussures, accessoires"}},wfe=[{id:"first_transaction",name:"Premier Pas",icon:"",threshold:1,description:"Premire transaction cologique"},{id:"co2_saver_10",name:"co-Warrior",icon:"",threshold:10,description:"10 kg CO conomiss"},{id:"co2_saver_50",name:"Plante Protecteur",icon:"",threshold:50,description:"50 kg CO conomiss"},{id:"co2_saver_100",name:"Hros Climatique",icon:"",threshold:100,description:"100 kg CO conomiss"},{id:"water_saver",name:"Gardien de l'Eau",icon:"",threshold:1e3,description:"1000L d'eau conomiss"},{id:"recycling_master",name:"Matre du Recyclage",icon:"",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"",threshold:10,description:"10 transactions en un mois"}],kc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},bfe=()=>{const{currentUser:t,userProfile:e}=Ot(),[r,n]=p.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Dbutant",percentile:0}),[i,a]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const v=$t(It(be,"listings"),Yt("sellerId","==",t.uid)),w=await rr(v),E=[];w.forEach(I=>{const T=I.data();E.push({id:I.id,...T,createdAt:kc(T.createdAt),updatedAt:kc(T.updatedAt)})}),a(E);const C=h(E,c);n(C),await y(C)}catch(v){console.error("Erreur lors du chargement des donnes environnementales:",v)}finally{l(!1)}}},h=(v,w)=>{const E=new Date;let C=v;if(w==="month"){const $=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());C=v.filter(q=>kc(q.createdAt)>=$)}else if(w==="year"){const $=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());C=v.filter(q=>kc(q.createdAt)>=$)}let I=0,T=0,k=0,R=0;const j={};C.forEach($=>{const q=nl[$.category]||nl.electronics,F=1;let L=1;$.transactionType==="donation"?L=1.2:$.transactionType==="exchange"&&(L=.8),I+=q.co2PerItem*F*L,T+=q.waterPerItem*F*L,k+=q.energyPerItem*F*L,R+=q.wastePerItem*F*L,j[$.category]=(j[$.category]||0)+1});const P=m(v),D=g(v,I,T),{rank:S,percentile:M}=x(I,v.length);return{totalCo2Saved:Math.round(I*10)/10,totalWaterSaved:Math.round(T),totalEnergySaved:Math.round(k*10)/10,totalWasteAvoided:Math.round(R*10)/10,transactionsByCategory:j,monthlyImpact:P,badges:D,rank:S,percentile:M}},m=v=>{const w={};for(let E=11;E>=0;E--){const C=new Date;C.setMonth(C.getMonth()-E);const I=C.toISOString().slice(0,7);w[I]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return v.forEach(E=>{const I=kc(E.createdAt).toISOString().slice(0,7);if(w[I]){const T=nl[E.category]||nl.electronics;let k=1;E.transactionType==="donation"?k=1.2:E.transactionType==="exchange"&&(k=.8),w[I].co2Saved+=T.co2PerItem*k,w[I].waterSaved+=T.waterPerItem*k,w[I].energySaved+=T.energyPerItem*k,w[I].transactions+=1}}),Object.entries(w).map(([E,C])=>({month:E,co2Saved:Math.round(C.co2Saved*10)/10,transactions:C.transactions,waterSaved:Math.round(C.waterSaved),energySaved:Math.round(C.energySaved*10)/10}))},g=(v,w,E)=>{const C=[];v.length>=1&&C.push("first_transaction"),w>=10&&C.push("co2_saver_10"),w>=50&&C.push("co2_saver_50"),w>=100&&C.push("co2_saver_100"),E>=1e3&&C.push("water_saver"),v.length>=20&&C.push("recycling_master"),v.filter(R=>R.transactionType==="donation").length>=5&&C.push("donation_hero");const T=new Date().toISOString().slice(0,7);return v.filter(R=>kc(R.createdAt).toISOString().slice(0,7)===T).length>=10&&C.push("monthly_champion"),C},x=(v,w)=>{let E="Dbutant",C=0;return v>=200?(E="Lgende cologique",C=95):v>=100?(E="Matre Environnemental",C=85):v>=50?(E="Expert Vert",C=70):v>=25?(E="co-Warrior",C=50):v>=10?(E="Protecteur",C=30):v>=5&&(E="Apprenti Vert",C=15),{rank:E,percentile:C}},y=async v=>{if(t)try{const w=Ze(be,"users",t.uid);await yr(w,{co2Saved:v.totalCo2Saved,environmentalRank:v.rank,environmentalBadges:v.badges,lastEnvironmentalUpdate:new Date})}catch(w){console.error("Erreur lors de la mise  jour des donnes environnementales:",w)}},_=async()=>{const v=` Mon impact cologique sur StudyMarket :

 ${r.totalCo2Saved} kg CO conomiss
 ${r.totalWaterSaved} L d'eau prservs
 ${r.totalEnergySaved} kWh d'nergie conomiss
 Rang : ${r.rank}

Rejoignez la communaut tudiante co-responsable ! `;if(navigator.share)try{await navigator.share({title:"Mon Impact cologique - StudyMarket",text:v,url:window.location.origin})}catch{navigator.clipboard.writeText(v)}else navigator.clipboard.writeText(v)},b=()=>{const v={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:r,transactions:i.length,period:c},w=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),E=URL.createObjectURL(w),C=document.createElement("a");C.href=E,C.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ws,{className:"w-8 h-8 text-green-600"}),"Mon Impact cologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Dcouvrez votre contribution  la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[s.jsx($1,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(U,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sc,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Priode d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette anne"},{key:"all",label:"Tout"}].map(v=>s.jsx(U,{variant:c===v.key?"default":"outline",size:"sm",onClick:()=>u(v.key),children:v.label},v.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((v,w)=>s.jsx(H,{className:"animate-pulse",children:s.jsx(K,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},w))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(H,{className:"border-green-200 bg-green-50/50",children:s.jsxs(K,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO conomiss"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ws,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:[" ",Math.round(r.totalCo2Saved/2.3)," km en voiture vits"]})]})}),s.jsx(H,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(K,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:r.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau prservs"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(fT,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[" ",Math.round(r.totalWaterSaved/150)," douches conomises"]})]})}),s.jsx(H,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(K,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:r.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh conomiss"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"nergie",className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:[" ",Math.round(r.totalEnergySaved/3.5)," jours d'lectricit"]})]})}),s.jsx(H,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(K,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:r.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg dchets vits"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(vQ,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:[" ",Math.round(r.totalWasteAvoided/.5)," sacs poubelle vits"]})]})})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(rO,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang cologique"]})}),s.jsxs(K,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:r.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous tes dans le top ",100-r.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(uV,{value:r.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Dbutant"}),s.jsx("span",{children:"Lgende cologique"})]})]})]}),s.jsxs(uc,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Go,{className:"grid w-full grid-cols-4",children:[s.jsx(zt,{value:"overview",children:"Vue d'ensemble"}),s.jsx(zt,{value:"categories",children:"Par catgorie"}),s.jsx(zt,{value:"badges",children:"Badges"}),s.jsx(zt,{value:"methodology",children:"Mthodologie"})]}),s.jsxs(ar,{value:"overview",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(av,{className:"w-5 h-5"}),"volution Mensuelle"]}),s.jsx(at,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(K,{children:s.jsx("div",{className:"space-y-4",children:r.monthlyImpact.slice(-6).map((v,w)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(v.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[v.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[v.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:v.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},v.month))})})]}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(lO,{className:"w-5 h-5"}),"quivalences Concrtes"]}),s.jsx(at,{children:"Votre impact traduit en quivalences du quotidien"})]}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(U1,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture vits"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(_Q,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plants (quivalent CO)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(lQ,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation lectrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(fT,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes conomises"})]})]})]})})]})]}),s.jsx(ar,{value:"categories",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5"}),"Impact par Catgorie"]}),s.jsx(at,{children:"Dtail de votre impact selon les types d'objets changs"})]}),s.jsx(K,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(r.transactionsByCategory).map(([v,w])=>{const E=nl[v]||nl.electronics,C=E.icon,I=w*E.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(C,{className:`w-5 h-5 ${E.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:E.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[w," transaction",w>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(I*10)/10," kg CO"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(w*E.waterPerItem)," L eau"]})]})]},v)})})})]})}),s.jsx(ar,{value:"badges",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Gb,{className:"w-5 h-5"}),"Badges cologiques"]}),s.jsx(at,{children:"Vos rcompenses pour votre engagement environnemental"})]}),s.jsx(K,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:wfe.map(v=>{const w=r.badges.includes(v.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${w?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:v.icon}),s.jsx("h3",{className:`font-semibold ${w?"text-green-800":"text-gray-600"}`,children:v.name}),s.jsx("p",{className:`text-sm ${w?"text-green-600":"text-gray-500"}`,children:v.description}),w&&s.jsx(le,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},v.id)})})})]})}),s.jsx(ar,{value:"methodology",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Eo,{className:"w-5 h-5"}),"Mthodologie de Calcul"]}),s.jsx(at,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs(Bt,{children:[s.jsx(Eo,{className:"h-4 w-4"}),s.jsx(qt,{children:"Nos calculs sont bass sur des tudes scientifiques et des donnes de l'ADEME (Agence de l'Environnement et de la Matrise de l'nergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet achet d'occasion vite la production d'un objet neuf. Nous calculons l'impact environnemental vit en nous basant sur l'empreinte carbone, hydrique et nergtique de la production de chaque catgorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catgorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(nl).map(([v,w])=>{const E=w.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(E,{className:`w-4 h-4 ${w.color}`}),s.jsx("span",{className:"font-medium",children:w.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[w.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[w.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"nergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[w.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[w.wastePerItem," kg"]})]})]})]},v)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondration"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("strong",{children:"changes/Troc :"})," -20% d'impact (pas de transaction montaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Rfrences"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:" ADEME - Base Carbone pour les facteurs d'mission"}),s.jsx("li",{children:" Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:" IEA (International Energy Agency) pour l'nergie"}),s.jsx("li",{children:" Ellen MacArthur Foundation pour l'conomie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(Ws,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Dcouvrez combien vous contribuez  la protection de l'environnement"})]})})})},_fe=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[i,a]=p.useState(""),[o,l]=p.useState({type:"",contract:"",level:"",city:"",remote:""}),c=[{id:"1",title:"Dveloppeur Frontend React - Stage",company:"TechStart Paris",description:"Rejoins notre quipe pour dvelopper des interfaces modernes avec React et TypeScript. Formation et mentoring assurs.",type:"stage",contract:"stage",salary:{min:600,max:800,period:"month"},location:{city:"Paris",remote:!0,university:"Sorbonne Universit"},requirements:{level:"master",experience:"Dbutant accept",skills:["React","TypeScript","CSS"]},schedule:{hours:"35h/semaine",flexible:!0},contact:{email:"stage@techstart.fr",website:"techstart.fr"},postedAt:new Date,deadline:new Date("2025-02-28")},{id:"2",title:"Cours particuliers Mathmatiques",company:"Particulier",description:"Recherche tudiant en Master Maths pour donner des cours  domicile niveau lyce.",type:"cours-particuliers",contract:"freelance",salary:{min:20,max:25,period:"hour"},location:{city:"Paris 16e",remote:!1},requirements:{level:"master",experience:"Premire exprience souhaite",skills:["Mathmatiques","Pdagogie"]},schedule:{hours:"2h/semaine",flexible:!0},contact:{email:"marie.martin@example.com",phone:"06.12.34.56.78"},postedAt:new Date,deadline:new Date("2025-01-30")},{id:"3",title:"Assistant Marketing Digital",company:"Agence Digital Plus",description:"Job tudiant flexible. Gestion rseaux sociaux et cration de contenu pour nos clients.",type:"job-etudiant",contract:"cdd",salary:{min:12,max:15,period:"hour"},location:{city:"Lyon",remote:!0},requirements:{level:"licence",experience:"Dbutant accept",skills:["Rseaux sociaux","Canva","Communication"]},schedule:{hours:"15h/semaine",flexible:!0},contact:{email:"recrutement@digitalplus.fr"},postedAt:new Date}];p.useEffect(()=>{(async()=>{n(!0);try{i||Object.keys(o).length>0,setTimeout(()=>{e(c),n(!1)},1e3)}catch(y){console.error("Erreur recherche emplois:",y),n(!1)}})()},[i,o]);const u=x=>{a(x)},d=(x,y)=>{l(_=>({..._,[x]:y}))},h=x=>{switch(x){case"stage":return s.jsx(_n,{className:"w-4 h-4"});case"job-etudiant":return s.jsx(Eh,{className:"w-4 h-4"});case"cours-particuliers":return s.jsx(_n,{className:"w-4 h-4"});case"babysitting":return s.jsx(Eh,{className:"w-4 h-4"});default:return s.jsx(Eh,{className:"w-4 h-4"})}},m=x=>{switch(x){case"stage":return"bg-blue-100 text-blue-800";case"job-etudiant":return"bg-green-100 text-green-800";case"cours-particuliers":return"bg-purple-100 text-purple-800";case"babysitting":return"bg-pink-100 text-pink-800";case"freelance":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=x=>{const{min:y,max:_,period:b}=x,v=b==="hour"?"/h":b==="month"?"/mois":"/an";return y===_?`${y}${v}`:`${y}-${_}${v}`};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Jobs & Stages tudiants"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez l'opportunit parfaite compatible avec vos tudes"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher par poste, entreprise, comptences...",value:i,onChange:x=>u(x.target.value),className:"pl-10 py-3 text-lg"})]})}),s.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs(ct,{onValueChange:x=>d("type",x),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Type d'emploi"})}),s.jsxs(it,{children:[s.jsx(re,{value:"stage",children:"Stages"}),s.jsx(re,{value:"job-etudiant",children:"Jobs tudiants"}),s.jsx(re,{value:"cours-particuliers",children:"Cours particuliers"}),s.jsx(re,{value:"babysitting",children:"Baby-sitting"}),s.jsx(re,{value:"freelance",children:"Freelance"})]})]}),s.jsxs(ct,{onValueChange:x=>d("level",x),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Niveau d'tudes"})}),s.jsxs(it,{children:[s.jsx(re,{value:"tous-niveaux",children:"Tous niveaux"}),s.jsx(re,{value:"licence",children:"Licence"}),s.jsx(re,{value:"master",children:"Master"}),s.jsx(re,{value:"doctorat",children:"Doctorat"})]})]}),s.jsx(Ie,{type:"text",placeholder:"Ville",value:o.city,onChange:x=>d("city",x.target.value)}),s.jsxs(ct,{onValueChange:x=>d("remote",x),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Modalit"})}),s.jsxs(it,{children:[s.jsx(re,{value:"true",children:"Tltravail"}),s.jsx(re,{value:"false",children:"Prsentiel"})]})]}),s.jsxs(ct,{onValueChange:x=>d("contract",x),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Contrat"})}),s.jsxs(it,{children:[s.jsx(re,{value:"stage",children:"Stage"}),s.jsx(re,{value:"cdd",children:"CDD"}),s.jsx(re,{value:"freelance",children:"Freelance"}),s.jsx(re,{value:"interim",children:"Intrim"})]})]})]}),r?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((x,y)=>s.jsx(H,{className:"animate-pulse",children:s.jsxs(K,{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},y))}):s.jsx("div",{className:"space-y-4",children:t.map(x=>s.jsx(H,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:s.jsxs(K,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-semibold",children:x.title}),s.jsxs(le,{className:m(x.type),children:[h(x.type),s.jsx("span",{className:"ml-1 capitalize",children:x.type.replace("-"," ")})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:x.company}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 line-clamp-2",children:x.description})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:g(x.salary)}),s.jsx("div",{className:"text-sm text-gray-500",children:x.schedule.hours})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),x.location.city,x.location.remote&&s.jsx(le,{variant:"secondary",className:"ml-2 text-xs",children:"Tltravail possible"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(_n,{className:"w-4 h-4 mr-1"}),x.requirements.level]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(At,{className:"w-4 h-4 mr-1"}),"Publi il y a ",Math.floor((Date.now()-x.postedAt.getTime())/(1e3*60*60*24))," jours"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[x.requirements.skills.slice(0,4).map((y,_)=>s.jsx(le,{variant:"outline",className:"text-xs",children:y},_)),x.requirements.skills.length>4&&s.jsxs(le,{variant:"outline",className:"text-xs",children:["+",x.requirements.skills.length-4," autres"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-gray-500",children:x.deadline&&s.jsxs("span",{children:["Candidature avant le ",x.deadline.toLocaleDateString("fr-FR")]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{variant:"outline",size:"sm",children:"Sauvegarder"}),s.jsx(U,{size:"sm",children:"Postuler"})]})]})]})},x.id))})]})})},jfe=()=>{const{listings:t,fetchListings:e,loading:r}=vm(),{currentUser:n}=Ot(),[i,a]=p.useState(""),[o,l]=p.useState({priceRange:[0,2e3],location:"",roomType:"",amenities:[],availability:"",sortBy:"newest"}),[c,u]=p.useState(!1),d=t.filter(b=>b.category==="housing"&&b.title.toLowerCase().includes(i.toLowerCase())),h=[{id:"wifi",label:"WiFi",icon:TQ},{id:"parking",label:"Parking",icon:U1},{id:"kitchen",label:"Cuisine quipe",icon:SQ},{id:"laundry",label:"Machine  laver",icon:CQ},{id:"tv",label:"TV",icon:jQ},{id:"ac",label:"Climatisation",icon:JX}],m=[{value:"studio",label:"Studio"},{value:"room",label:"Chambre prive"},{value:"shared-room",label:"Chambre partage"},{value:"apartment",label:"Appartement complet"},{value:"house",label:"Maison"}],g=[{value:"immediate",label:"Disponible immdiatement"},{value:"next-month",label:"Prochain mois"},{value:"flexible",label:"Date flexible"}];p.useEffect(()=>{e()},[e]);const x=b=>{l(v=>({...v,amenities:v.amenities.includes(b)?v.amenities.filter(w=>w!==b):[...v.amenities,b]}))},y=b=>{l(v=>({...v,priceRange:[b[0],b[1]]}))},_=()=>{l({priceRange:[0,2e3],location:"",roomType:"",amenities:[],availability:"",sortBy:"newest"}),a("")};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Logement & Colocation"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Trouvez votre logement tudiant idal ou partagez votre espace"})]}),n&&s.jsx(U,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(ve,{to:"/create?category=housing",children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Publier un logement"]})})]}),s.jsxs("div",{className:"relative max-w-2xl",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher un logement, une ville, une universit...",value:i,onChange:b=>a(b.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(fe,{className:"flex items-center",children:[s.jsx(am,{className:"w-4 h-4 mr-2"}),"Filtres"]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"lg:hidden",children:c?"Masquer":"Afficher"})]})}),s.jsxs(K,{className:`space-y-6 ${c?"":"hidden lg:block"}`,children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Prix mensuel"}),s.jsxs("div",{className:"px-2",children:[s.jsx(FN,{value:o.priceRange,onValueChange:y,max:2e3,min:0,step:50,className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsxs("span",{children:[o.priceRange[0],""]}),s.jsxs("span",{children:[o.priceRange[1],""]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Localisation"}),s.jsx(Ie,{placeholder:"Ville, quartier...",value:o.location,onChange:b=>l(v=>({...v,location:b.target.value}))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Type de logement"}),s.jsxs(ct,{value:o.roomType,onValueChange:b=>l(v=>({...v,roomType:b})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Tous les types"})}),s.jsx(it,{children:m.map(b=>s.jsx(re,{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"quipements"}),s.jsx("div",{className:"space-y-2",children:h.map(b=>{const v=b.icon;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fy,{id:b.id,checked:o.amenities.includes(b.id),onCheckedChange:()=>x(b.id)}),s.jsxs("label",{htmlFor:b.id,className:"text-sm flex items-center cursor-pointer",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),b.label]})]},b.id)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Disponibilit"}),s.jsxs(ct,{value:o.availability,onValueChange:b=>l(v=>({...v,availability:b})),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Toutes les dates"})}),s.jsx(it,{children:g.map(b=>s.jsx(re,{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Trier par"}),s.jsxs(ct,{value:o.sortBy,onValueChange:b=>l(v=>({...v,sortBy:b})),children:[s.jsx(st,{children:s.jsx(ut,{})}),s.jsxs(it,{children:[s.jsx(re,{value:"newest",children:"Plus rcent"}),s.jsx(re,{value:"price-low",children:"Prix croissant"}),s.jsx(re,{value:"price-high",children:"Prix dcroissant"}),s.jsx(re,{value:"popular",children:"Plus populaire"})]})]})]}),s.jsx(U,{variant:"outline",onClick:_,className:"w-full",children:"Rinitialiser les filtres"})]})]})}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(H,{children:s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ls,{className:"w-8 h-8 text-primary mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Logements disponibles"})]})]})})}),s.jsx(H,{children:s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ka,{className:"w-8 h-8 text-secondary mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.filter(b=>b.transactionType==="rent").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Colocations"})]})]})})}),s.jsx(H,{children:s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-8 h-8 text-green-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.filter(b=>{var v;return(v=b.user)==null?void 0:v.isVerified}).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Propritaires vrifis"})]})]})})})]}),r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):d.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:d.map(b=>s.jsx(Bu,{listing:b},b.id))}):s.jsx(H,{children:s.jsxs(K,{className:"p-8 text-center",children:[s.jsx(Ls,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun logement trouv"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critres de recherche ou de publier une annonce."}),n&&s.jsx(U,{asChild:!0,children:s.jsxs(ve,{to:"/create?category=housing",children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Publier un logement"]})})]})})]})]}),s.jsx("div",{className:"mt-12",children:s.jsx(H,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950",children:s.jsx(K,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Conseils pour trouver un logement"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(qe,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),"Privilgiez les propritaires vrifis"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(ls,{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),"Vrifiez la proximit avec votre universit"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Prix",className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),"N'oubliez pas les charges et le dpt de garantie"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(sc,{className:"w-4 h-4 text-purple-600 mr-2 mt-0.5 flex-shrink-0"}),"Planifiez vos visites  l'avance"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Notre quipe est l pour vous accompagner dans votre recherche de logement."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{variant:"outline",asChild:!0,className:"w-full justify-start",children:s.jsxs(ve,{to:"/help",children:[s.jsx(_n,{className:"w-4 h-4 mr-2"}),"Guide du logement tudiant"]})}),s.jsx(U,{variant:"outline",asChild:!0,className:"w-full justify-start",children:s.jsxs(ve,{to:"/safety",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Conseils de scurit"]})})]})]})]})})})})]})},Nfe=[{objectID:"1",title:"Studio moderne prs de la Sorbonne",description:"Meubl, chez un propritaire, dans une maison",price:850,type:"studio",city:"Paris 5me",address:"RUE DES CAROLUS75005 Paris",surface:25,imageUrl:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400&h=300&fit=crop",detailUrl:"/logement/1",isAvailable:!0,availabilityText:"Disponible du 01/09/2025 au 18/07/2027",rating:4.5,source:"BOXETU"}],Sfe=t=>!t.title||!t.objectID?null:{objectID:String(t.objectID),source:String(t.sourceNormalized??t.source??t.platform??"unknown"),title:String(t.title),description:String(t.description??""),price:typeof t.price=="number"&&t.price>0?t.price:0,priceTotal:typeof t.priceTotal=="number"?t.priceTotal:0,type:String(t.type??t.category??""),city:String(t.city??""),address:String(t.address??t.quartier??""),surface:typeof t.surface=="number"&&t.surface>0?t.surface:null,imageUrl:String(t.imageUrl??(Array.isArray(t.images)?t.images[0]:"")??""),detailUrl:String(t.detailUrl??t.url??""),isAvailable:t.hasAvailability!==!1,availabilityText:Array.isArray(t.availabilityMonths)?`Disponible: ${t.availabilityMonths.join(", ")}`:String(t.availabilityMonths??""),rating:typeof t.rating=="number"&&t.rating>0?t.rating:null,_geoloc:t._geoloc},Efe=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[i,a]=p.useState(""),[o,l]=p.useState(0),[c,u]=p.useState(0),[d,h]=p.useState(0),[m,g]=p.useState({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),[x,y]=p.useState(""),_="Q3E5Y56YF4",b="ff26b6f0fa03bc6384566ea42dfe0ab4",v="student-housing";p.useEffect(()=>{(async()=>{n(!0),y("");try{const R=`https://${_}-dsn.algolia.net/1/indexes/${v}/query`;console.log(" URL Algolia:",R),console.log(" Filtres appliqus:",{searchQuery:i,type:m.type,source:m.source,city:m.city,prix:`${m.minPrice||0} - ${m.maxPrice||""}`});const j=[],P=[];if(m.type&&j.push([`type:${m.type}`,`logementTypes:${m.type}`,`category:${m.type}`]),m.source&&j.push([`sourceNormalized:${m.source}`,`source:${m.source}`,`platform:${m.source}`]),m.city&&j.push([`city:${m.city}`]),m.university&&j.push([`university:${m.university}`]),m.furnished){const $=m.furnished==="true";j.push([`_tags:${$?"meuble":"non-meuble"}`,`guarantees:${$?"meuble":"non-meuble"}`])}if(m.minPrice||m.maxPrice){const $=m.minPrice?Number(m.minPrice):0,q=m.maxPrice?Number(m.maxPrice):999999;$>0&&P.push(`price>=${$}`),q<999999&&P.push(`price<=${q}`)}console.log(" Filtres construits:",{facetFilters:j,numericFilters:P});const D=await fetch(R,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":_,"X-Algolia-API-Key":b},body:JSON.stringify({query:i,hitsPerPage:48,page:o,attributesToRetrieve:["*"],attributesToHighlight:[],attributesToSnippet:[],facetFilters:j.length?j:void 0,numericFilters:P.length?P:void 0,getRankingInfo:!0})});if(!D.ok){const $=await D.text();throw console.error(" Erreur Algolia:",D.status,$),new Error(`Algolia HTTP ${D.status}: ${$}`)}const S=await D.json();console.log(" Rponse Algolia russie!",{nbHits:S.nbHits,nbPages:S.nbPages,resultats:S.hits.length,page:o+1,total:`${S.nbHits} logements`}),S.hits.length>0&&(console.log(" Premier rsultat brut:",S.hits[0]),console.log(" Structure des champs disponibles:",Object.keys(S.hits[0])));const M=S.hits.map($=>Sfe($)).filter($=>$!==null);console.log(" Donnes normalises:",M.length,"logements valides sur",S.hits.length,"rsultats bruts"),e(M),u(S.nbPages||0),h(S.nbHits||0)}catch(R){console.error(" Erreur lors de la recherche:",R),console.log(" Fallback vers les donnes de dmonstration");const j=[...Nfe].map(P=>({objectID:P.objectID,source:P.source,title:P.title,description:P.description,price:P.price,priceTotal:0,type:P.type,city:P.city,address:P.address,surface:P.surface,imageUrl:P.imageUrl,detailUrl:P.detailUrl,isAvailable:P.isAvailable,availabilityText:P.availabilityText,rating:P.rating,_geoloc:void 0}));e(j),y(" Problme de connexion Algolia. Donnes de dmonstration affiches.")}finally{n(!1)}})()},[i,m,o]);const w=k=>{a(k),l(0)},E=(k,R)=>{g(j=>({...j,[k]:R})),l(0)},C=k=>{k>=0&&k<c&&(l(k),window.scrollTo({top:0,behavior:"smooth"}))},I=k=>{switch(k){case"studio":return s.jsx(Ls,{className:"w-4 h-4"});case"appartement":return s.jsx(Ls,{className:"w-4 h-4"});case"chambre":return s.jsx(Ls,{className:"w-4 h-4"});case"colocation":return s.jsx(ka,{className:"w-4 h-4"});default:return s.jsx(Ls,{className:"w-4 h-4"})}},T=k=>{switch(k){case"studio":return"bg-blue-100 text-blue-800";case"appartement":return"bg-green-100 text-green-800";case"chambre":return"bg-purple-100 text-purple-800";case"colocation":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Logements tudiants"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez le logement parfait prs de votre campus"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(Ie,{type:"text",placeholder:"Rechercher par ville, universit, quartier...",value:i,onChange:k=>w(k.target.value),className:"pl-10 py-3 text-lg"})]})}),s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ct,{value:m.type,onValueChange:k=>E("type",k==="all"?"":k),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Type de logement"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Tous les types"}),s.jsx(re,{value:"Rsidence tudiante",children:"Rsidence tudiante"}),s.jsx(re,{value:"Chambre",children:"Chambre"}),s.jsx(re,{value:"Studio",children:"Studio"}),s.jsx(re,{value:"Appartement",children:"Appartement"}),s.jsx(re,{value:"Colocation",children:"Colocation"})]})]}),s.jsx(Ie,{type:"number",placeholder:"Prix min ()",value:m.minPrice,onChange:k=>E("minPrice",k.target.value)}),s.jsx(Ie,{type:"number",placeholder:"Prix max ()",value:m.maxPrice,onChange:k=>E("maxPrice",k.target.value)}),s.jsxs(ct,{value:m.source,onValueChange:k=>E("source",k==="all"?"":k),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Source"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Toutes les sources"}),s.jsx(re,{value:"adele",children:"Adele"}),s.jsx(re,{value:"lokaviz",children:"Lokaviz"}),s.jsx(re,{value:"studymarket",children:"BOXETU"})]})]})]}),s.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Ie,{type:"text",placeholder:"Ville (ex: Paris, Poitiers)",value:m.city,onChange:k=>E("city",k.target.value)}),s.jsxs(ct,{value:m.university,onValueChange:k=>E("university",k==="all"?"":k),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Universit"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Toutes les universits"}),s.jsx(re,{value:"sorbonne",children:"Sorbonne"}),s.jsx(re,{value:"dauphine",children:"Dauphine"}),s.jsx(re,{value:"assas",children:"Panthon-Assas"}),s.jsx(re,{value:"sciences-po",children:"Sciences Po"}),s.jsx(re,{value:"poitiers",children:"Universit de Poitiers"})]})]}),s.jsxs(ct,{value:m.furnished,onValueChange:k=>E("furnished",k==="any"?"":k),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Meubl"})}),s.jsxs(it,{children:[s.jsx(re,{value:"any",children:"Indiffrent"}),s.jsx(re,{value:"true",children:"Meubl"}),s.jsx(re,{value:"false",children:"Non meubl"})]})]})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(U,{variant:"outline",onClick:()=>{g({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),a(""),l(0)},children:"Rinitialiser les filtres"}),!r&&s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-semibold",children:d.toLocaleString()})," logements trouvs",c>1&&s.jsxs("span",{className:"ml-2",children:[" Page ",o+1," sur ",c]})]})]}),c>1&&!r&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Navigation rapide:"}),s.jsx("div",{className:"flex gap-1",children:[0,Math.floor(c/4),Math.floor(c/2),Math.floor(3*c/4),c-1].filter((k,R,j)=>j.indexOf(k)===R&&k>=0).map(k=>s.jsx(U,{variant:o===k?"default":"outline",size:"sm",onClick:()=>C(k),className:"px-2 py-1 text-xs",children:k+1},k))})]})]}),x&&s.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg",children:x}),r?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((k,R)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),s.jsxs(K,{className:"p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},R))}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>{var se;const R=k.objectID,j=k.imageUrl||"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop",P=k.title,D=k.description,S=k.price||k.priceTotal||0,M=k.city,$=((se=k.type)==null?void 0:se.toLowerCase())||"logement",q=k.surface,F=k.detailUrl||`/logement/${R}`,L=k.isAvailable,W=k.availabilityText,z=k.rating,X=k.source;return s.jsxs(H,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:j,alt:P,className:"w-full h-48 object-cover rounded-t-lg",onError:_e=>{_e.target.src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop"}}),s.jsxs(le,{className:`absolute top-3 left-3 ${T($)}`,children:[I($),s.jsx("span",{className:"ml-1 capitalize",children:$})]}),X&&s.jsx(le,{className:"absolute top-3 right-3 bg-gray-800 text-white text-xs",children:X})]}),s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:P}),D&&s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:D}),s.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 mb-2",children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:M})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S>0?s.jsxs("div",{className:"flex items-center text-blue-600 font-bold text-xl",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Prix",className:"w-5 h-5 mr-1"}),S,s.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}):s.jsx("span",{className:"text-gray-500 text-sm",children:"Prix  ngocier"}),q&&s.jsxs("span",{className:"text-sm text-gray-500",children:[q,"m"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[L!==!1&&s.jsx(le,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:"Disponible"}),z&&s.jsxs(le,{variant:"secondary",className:"text-xs",children:[" ",z]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[W&&s.jsx("span",{className:"text-sm text-gray-500 flex-1 mr-2",children:W}),s.jsx(U,{size:"sm",onClick:()=>window.open(F,"_blank"),disabled:!F,children:"Voir l'annonce"})]})]})]},R)})}),!r&&t.length===0&&!x&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ls,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Aucun logement trouv"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez de modifier vos critres de recherche"})]}),!r&&c>1&&s.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>C(0),disabled:o===0,children:" Dbut"}),s.jsx(U,{variant:"outline",size:"sm",onClick:()=>C(o-1),disabled:o===0,children:" Prcdent"}),s.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,c)},(k,R)=>{const P=Math.max(0,Math.min(o-2,c-5))+R;return s.jsx(U,{variant:o===P?"default":"outline",size:"sm",onClick:()=>C(P),className:"px-3 py-1",children:P+1},P)})}),s.jsx(U,{variant:"outline",size:"sm",onClick:()=>C(o+1),disabled:o>=c-1,children:"Suivant "}),s.jsx(U,{variant:"outline",size:"sm",onClick:()=>C(c-1),disabled:o>=c-1,children:" Fin"})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Affichage de ",o*48+1,"  ",Math.min((o+1)*48,d)," sur ",d.toLocaleString()," logements"]})]}),!r&&c>10&&s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Aller  la page:"}),s.jsx(Ie,{type:"number",min:"1",max:c,placeholder:"Page",className:"w-20 text-center",onKeyPress:k=>{if(k.key==="Enter"){const R=parseInt(k.target.value)-1;R>=0&&R<c&&C(R)}}}),s.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",c]})]}),s.jsx("div",{className:"mt-12 text-center",children:s.jsx(H,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:s.jsxs(K,{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Vous proposez un logement ?"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Publiez votre annonce gratuitement et touchez des milliers d'tudiants"}),s.jsx(U,{size:"lg",children:"Publier une annonce logement"})]})})})]})})},ow=({request:t,userRole:e,onStatusUpdate:r})=>{const{updatePaymentStatus:n,getPaymentInstructions:i}=dy(),a=x=>{switch(x){case"pending":return At;case"confirmed":return lt;case"completed":return lt;case"cancelled":return qn;case"disputed":return Qt;default:return At}},o=x=>{switch(x){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=x=>{switch(x){case"pending":return"En attente";case"confirmed":return"Confirm";case"completed":return"Termin";case"cancelled":return"Annul";case"disputed":return"Litige";default:return x}},c=x=>({cash:"Espces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[x]||x,u=(x,y)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:y||"EUR"}).format(x),d=(x,y)=>{navigator.clipboard.writeText(x),ue.success(`${y} copi dans le presse-papiers`)},h=async x=>{try{await n(t.id,x),r==null||r(x)}catch(y){console.error("Erreur lors de la mise  jour du statut:",y)}},m=a(t.status),g=i(t.paymentMethod,t);return s.jsxs(H,{className:"w-full",children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Mr,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(fe,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),s.jsxs(at,{children:[u(t.amount,t.currency),"  ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(le,{className:o(t.status),children:[s.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Cr le :"}),s.jsx("p",{className:"font-medium",children:is(t.createdAt,"PPP  HH:mm",{locale:bs})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernire mise  jour :"}),s.jsx("p",{className:"font-medium",children:is(t.updatedAt,"PPP  HH:mm",{locale:bs})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(ls,{className:"w-4 h-4"}),"Dtails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:is(t.meetingDateTime,"PPP  HH:mm",{locale:bs})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(qe,{className:"w-4 h-4"}),"Code de scurit"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de scurit"),children:s.jsx(iQ,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&g.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:g.map((x,y)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:""}),s.jsx("span",{children:x})]},y))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(U,{onClick:()=>h("confirmed"),className:"flex-1",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(U,{variant:"outline",onClick:()=>h("cancelled"),className:"flex-1",children:[s.jsx(qn,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(U,{onClick:()=>h("completed"),className:"flex-1",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Marquer comme pay"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(U,{onClick:()=>h("completed"),className:"flex-1",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Confirmer la rception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(U,{variant:"outline",onClick:()=>h("disputed"),className:"text-blue-600 hover:text-blue-700",children:[s.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Signaler un problme"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(Bt,{children:[s.jsx(At,{className:"h-4 w-4"}),s.jsx(qt,{children:"Votre demande de paiement a t envoye au vendeur. Vous recevrez une notification ds qu'il l'aura accepte."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(Bt,{className:"border-green-200 bg-green-50",children:[s.jsx(lt,{className:"h-4 w-4 text-green-600"}),s.jsx(qt,{className:"text-green-800",children:"Le vendeur a accept votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(Bt,{className:"border-green-200 bg-green-50",children:[s.jsx(lt,{className:"h-4 w-4 text-green-600"}),s.jsx(qt,{className:"text-green-800",children:"Transaction termine avec succs ! Merci d'avoir utilis BOXETU."})]}),t.status==="disputed"&&s.jsxs(Bt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Qt,{className:"h-4 w-4 text-blue-600"}),s.jsx(qt,{className:"text-blue-800",children:"Un litige a t signal. Notre quipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},Cfe=()=>{const{currentUser:t,userProfile:e}=Ot(),{paymentRequests:r,loading:n,fetchUserPaymentRequests:i,initializePaymentMethods:a}=dy(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,h]=p.useState("all"),[m,g]=p.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});p.useEffect(()=>{a()},[a]),p.useEffect(()=>{t&&i(t.uid)},[t,i]),p.useEffect(()=>{x()},[r]);const x=()=>{const E={},C={};let I=0;r.forEach(T=>{E[T.paymentMethod]=(E[T.paymentMethod]||0)+1,C[T.status]=(C[T.status]||0)+1,I+=T.amount}),g({totalRequests:r.length,pendingRequests:C.pending||0,completedRequests:C.completed||0,totalAmount:I,averageAmount:r.length>0?I/r.length:0,byMethod:E,byStatus:C})},y=()=>r.filter(E=>{const C=!o||E.listingId.toLowerCase().includes(o.toLowerCase())||E.id.toLowerCase().includes(o.toLowerCase()),I=c==="all"||E.status===c,T=d==="all"||E.paymentMethod===d;return C&&I&&T}),_=()=>y().filter(E=>E.buyerId===(t==null?void 0:t.uid)),b=()=>y().filter(E=>E.sellerId===(t==null?void 0:t.uid)),v=E=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(E),w=()=>{const E={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:r.map(k=>({id:k.id,amount:k.amount,currency:k.currency,method:k.paymentMethod,status:k.status,role:k.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:k.createdAt.toISOString(),updatedAt:k.updatedAt.toISOString()}))},C=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),I=URL.createObjectURL(C),T=document.createElement("a");T.href=I,T.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,T.click(),URL.revokeObjectURL(I)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(EQ,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(U,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(Mr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(At,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Termines"})]}),s.jsx(lt,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v(m.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(xa,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),s.jsxs(ct,{value:c,onValueChange:u,children:[s.jsx(st,{className:"w-40",children:s.jsx(ut,{placeholder:"Statut"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Tous les statuts"}),s.jsx(re,{value:"pending",children:"En attente"}),s.jsx(re,{value:"confirmed",children:"Confirm"}),s.jsx(re,{value:"completed",children:"Termin"}),s.jsx(re,{value:"cancelled",children:"Annul"}),s.jsx(re,{value:"disputed",children:"Litige"})]})]}),s.jsxs(ct,{value:d,onValueChange:h,children:[s.jsx(st,{className:"w-40",children:s.jsx(ut,{placeholder:"Mthode"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Toutes les mthodes"}),s.jsx(re,{value:"cash",children:"Espces"}),s.jsx(re,{value:"transfer",children:"Virement"}),s.jsx(re,{value:"paypal",children:"PayPal"}),s.jsx(re,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(uc,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Go,{className:"grid w-full grid-cols-3",children:[s.jsxs(zt,{value:"all",className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsxs(zt,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(O0,{className:"w-4 h-4"}),"Mes achats",_().length>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:_().length})]}),s.jsxs(zt,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(D0,{className:"w-4 h-4"}),"Mes ventes",b().length>0&&s.jsx(le,{variant:"secondary\\",className:"ml-1",children:b().length})]})]}),s.jsx(ar,{value:"all",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(av,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(at,{children:"Historique complet de vos transactions"})]}),s.jsx(K,{children:n?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,C)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},C))}):y().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Mr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond  vos critres de recherche."})]}):s.jsx("div",{className:"space-y-4",children:y().map(E=>s.jsx(ow,{request:E,userRole:E.buyerId===t.uid?"buyer":"seller"},E.id))})})]})}),s.jsx(ar,{value:"purchases",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(O0,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(at,{children:"Demandes de paiement que vous avez inities"})]}),s.jsx(K,{children:_().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(O0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initi de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:_().map(E=>s.jsx(ow,{request:E,userRole:"buyer"},E.id))})})]})}),s.jsx(ar,{value:"sales",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(D0,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(at,{children:"Demandes de paiement reues pour vos annonces"})]}),s.jsx(K,{children:b().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(D0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:b().map(E=>s.jsx(ow,{request:E,userRole:"seller"},E.id))})})]})})]}),s.jsxs(Bt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(qe,{className:"h-4 w-4 text-blue-600"}),s.jsxs(qt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de scurit :"})," Ne communiquez jamais vos informations bancaires par message priv. Utilisez uniquement les canaux scuriss de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center",children:[s.jsx(Mr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Grez vos demandes de paiement et suivez vos transactions"})]})})})};function Tfe({request:t,isSelected:e,onSelect:r,onStatusChange:n}){const[i,a]=p.useState(!1),[o,l]=p.useState(!1),c=x=>{switch(x){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200 border-yellow-200 dark:border-yellow-800";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200 border-green-200 dark:border-green-800";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200 border-red-200 dark:border-red-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200 border-gray-200 dark:border-gray-800"}},u=x=>{switch(x){case"pending":return s.jsx(At,{className:"w-4 h-4"});case"approved":return s.jsx(lt,{className:"w-4 h-4"});case"rejected":return s.jsx(qn,{className:"w-4 h-4"});default:return s.jsx(At,{className:"w-4 h-4"})}},d=x=>{switch(x){case"pending":return"En attente";case"approved":return"Approuve";case"rejected":return"Rejete";default:return"Inconnu"}},h=x=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(x),m=async x=>{try{a(!0),await n(x)}catch(y){console.error("Erreur lors du changement de statut:",y)}finally{a(!1)}},g=x=>{console.log("Tlchargement de:",x)};return s.jsxs(H,{className:`transition-all duration-200 ${e?"ring-2 ring-primary":""}`,children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(fy,{checked:e,onCheckedChange:x=>r(x),className:"mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fe,{className:"text-lg font-semibold truncate",children:t.userName}),s.jsx(le,{className:c(t.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[u(t.status),d(t.status)]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:t.userEmail})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:t.university})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sc,{className:"w-4 h-4"}),s.jsx("span",{children:h(t.submittedAt)})]})]})]})]}),s.jsxs(Ch,{children:[s.jsx(Th,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(aO,{className:"w-4 h-4"})})}),s.jsxs(fu,{align:"end",children:[s.jsxs(nt,{onClick:()=>l(!o),children:[s.jsx(va,{className:"w-4 h-4 mr-2"}),o?"Masquer":"Afficher"," les dtails"]}),s.jsxs(nt,{onClick:()=>g("tous"),children:[s.jsx(rs,{className:"w-4 h-4 mr-2"}),"Tlcharger tous les documents"]}),s.jsxs(nt,{children:[s.jsx(lv,{className:"w-4 h-4 mr-2"}),"Contacter l'tudiant"]})]})]})]})}),s.jsxs(K,{className:"space-y-4",children:[o&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Informations tudiant"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Nom complet:"}),s.jsx("span",{children:t.userName})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Email personnel:"}),s.jsx("span",{className:"truncate",children:t.userEmail})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Email tudiant:"}),s.jsx("span",{className:"truncate",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Numro tudiant:"}),s.jsx("span",{children:t.studentId})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Documents soumis"}),s.jsx("div",{className:"space-y-2",children:t.documents&&t.documents.length>0?t.documents.map((x,y)=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(df,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm truncate",children:x.includes("http")?`Document ${y+1}`:x})]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>g(x),className:"h-6 px-2 flex-shrink-0",children:s.jsx(rs,{className:"w-3 h-3"})})]}),x.includes("http")&&s.jsx("div",{className:"border rounded-lg overflow-hidden",children:x.toLowerCase().includes(".pdf")?s.jsx("iframe",{src:`${x}#toolbar=0&navpanes=0&scrollbar=0`,className:"w-full h-96 border-0",title:`Document ${y+1}`}):s.jsx("img",{src:x,alt:`Document ${y+1}`,className:"w-full h-auto max-h-96 object-contain"})})]},y)):s.jsx("div",{className:"p-3 bg-muted/30 rounded text-sm text-muted-foreground",children:"Aucun document fourni"})})]})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Notes"}),s.jsx("div",{className:"p-3 bg-muted/50 rounded text-sm",children:t.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4 border-t",children:[t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(U,{onClick:()=>m("approved"),disabled:i,className:"flex-1 sm:flex-none bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Approuver"]}),s.jsxs(U,{onClick:()=>m("rejected"),disabled:i,variant:"destructive",className:"flex-1 sm:flex-none",children:[s.jsx(qn,{className:"w-4 h-4 mr-2"}),"Rejeter"]})]}),t.status==="approved"&&s.jsxs(U,{onClick:()=>m("pending"),disabled:i,variant:"outline",className:"flex-1 sm:flex-none",children:[s.jsx(At,{className:"w-4 h-4 mr-2"}),"Remettre en attente"]}),t.status==="rejected"&&s.jsxs(U,{onClick:()=>m("pending"),disabled:i,variant:"outline",className:"flex-1 sm:flex-none",children:[s.jsx(At,{className:"w-4 h-4 mr-2"}),"Remettre en attente"]}),s.jsxs(U,{variant:"outline",onClick:()=>l(!o),className:"flex-1 sm:flex-none",children:[s.jsx(va,{className:"w-4 h-4 mr-2"}),o?"Masquer":"Afficher"," les dtails"]})]})]})]})}function kfe({selectedCount:t,onApprove:e,onReject:r,onClear:n}){const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async m=>{try{a(!0),l(m),m==="approve"?await e():await r()}catch(g){console.error(`Erreur lors de l'action ${m}:`,g)}finally{a(!1),l(null)}},u=m=>m==="approve"?s.jsx(lt,{className:"w-4 h-4"}):s.jsx(qn,{className:"w-4 h-4"}),d=m=>m==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",h=m=>m==="approve"?"Approuver":"Rejeter";return s.jsx(H,{className:"mb-6 border-2 border-primary/20 bg-primary/5",children:s.jsxs(K,{className:"pt-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(ka,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium",children:[t," demande",t>1?"s":""," slectionne",t>1?"s":""]}),s.jsx(le,{variant:"secondary",className:"ml-2",children:t})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prt pour une action en lot"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(U,{onClick:()=>c("approve"),disabled:i,className:`${d("approve")} text-white min-w-[120px]`,children:[i&&o==="approve"?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):u("approve"),i&&o==="approve"?"Traitement...":h("approve")]}),s.jsxs(U,{onClick:()=>c("reject"),disabled:i,className:`${d("reject")} text-white min-w-[120px]`,children:[i&&o==="reject"?s.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}):u("reject"),i&&o==="reject"?"Traitement...":h("reject")]}),s.jsx(U,{variant:"outline",onClick:n,disabled:i,className:"min-w-[100px]",children:"Annuler"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Qt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("p",{className:"font-medium mb-1",children:"Action en lot"}),s.jsx("p",{children:"Cette action sera applique  toutes les demandes slectionnes. Assurez-vous de vrifier chaque demande individuellement avant de procder."})]})]})}),i&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[s.jsx("span",{children:"Traitement en cours..."}),s.jsxs("span",{children:[o==="approve"?"Approbation":"Rejet"," des demandes"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})]})})}function Ife({stats:t}){const e=[{title:"Total des demandes",value:t.total,icon:s.jsx(ka,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",description:"Toutes les demandes reues"},{title:"En attente",value:t.pending,icon:s.jsx(At,{className:"w-5 h-5"}),color:"text-yellow-600 bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",description:"Demandes  traiter",priority:t.pending>0},{title:"Approuves",value:t.approved,icon:s.jsx(lt,{className:"w-5 h-5"}),color:"text-green-600 bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",description:"Demandes valides"},{title:"Rejetes",value:t.rejected,icon:s.jsx(qn,{className:"w-5 h-5"}),color:"text-red-600 bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",description:"Demandes refuses"},{title:"Aujourd'hui",value:t.todayRequests,icon:s.jsx(At,{className:"w-5 h-5"}),color:"text-purple-600 bg-purple-50 dark:bg-purple-950/20 border-purple-200 dark:border-purple-800",description:"Nouvelles demandes"},{title:"Croissance",value:`${t.weeklyGrowth}%`,icon:s.jsx(xa,{className:"w-5 h-5"}),color:t.weeklyGrowth>=0?"text-green-600 bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800":"text-red-600 bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",description:"vs semaine dernire"}],r=t.total>0?Math.round(t.approved/t.total*100):0,n=t.total>0?Math.round(t.pending/t.total*100):0;return s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6",children:e.map((i,a)=>s.jsxs(H,{className:"relative overflow-hidden",children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:i.title}),s.jsx("div",{className:`p-2 rounded-lg ${i.color}`,children:i.icon})]})}),s.jsxs(K,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.value}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.description}),i.priority&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"})})]})]},a))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[s.jsx(xa,{className:"w-5 h-5 text-green-600"}),"Taux d'approbation"]})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Taux global"}),s.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[r,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:`${r}%`}})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.approved," demandes approuves sur ",t.total," total"]})]})})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[s.jsx(Qt,{className:"w-5 h-5 text-yellow-600"}),"Demandes en attente"]})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"En attente"}),s.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:t.pending})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-yellow-600 h-2 rounded-full transition-all duration-500",style:{width:`${n}%`}})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[n,"% des demandes ncessitent une action"]}),t.pending>0&&s.jsxs("div",{className:"text-xs text-yellow-600 bg-yellow-50 dark:bg-yellow-950/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:[" ",t.pending," demande",t.pending>1?"s":"","  traiter en priorit"]})]})})]})]})]})}class Afe{constructor(){this.cache=new Map,this.CACHE_DURATION=24*60*60*1e3}getCachedUser(e){const r=this.cache.get(e);return r?Date.now()-r.lastSeen.getTime()>this.CACHE_DURATION?(this.cache.delete(e),null):r:null}cacheUser(e){this.cache.set(e.id,{...e,lastSeen:new Date})}generateUserName(e){if(!e)return"Utilisateur inconnu";const[r]=e.split("@");return r?r.split(".").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Utilisateur inconnu"}getOrCreateUser(e,r,n){const i=this.getCachedUser(e);if(i)return i;const a={id:e,email:r,fullName:this.generateUserName(r),university:n,lastSeen:new Date};return this.cacheUser(a),a}cleanupExpiredCache(){const e=Date.now();for(const[r,n]of this.cache.entries())e-n.lastSeen.getTime()>this.CACHE_DURATION&&this.cache.delete(r)}getCacheSize(){return this.cache.size}clearCache(){this.cache.clear()}}const Ih=new Afe;setInterval(()=>{Ih.cleanupExpiredCache()},60*60*1e3);class $k{static async sendEmail(e){try{const{data:r,error:n}=await Ue.functions.invoke("send-email",{body:{to:e.to,subject:e.template.subject,html:e.template.html,text:e.template.text,type:"verification"}});return n?(console.error(" Erreur Edge Function:",n),console.log(" Fallback vers email simul pour:",e.to),console.log(" Sujet:",e.template.subject),!0):r!=null&&r.success?(console.log(" Email envoy avec succs via Edge Function:",r.message),r.id&&console.log(" ID de l'email:",r.id),!0):(console.error(" chec de l'envoi via Edge Function:",r==null?void 0:r.error),!1)}catch(r){return console.error(" Erreur lors de l'envoi de l'email:",r),console.log(" Fallback vers email simul pour:",e.to),!0}}static async sendApprovalEmail(e,r){const n={subject:" Votre vrification BOXETU a t approuve !",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;"> BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Vrification approuve</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #28a745; margin-top: 0;">Flicitations ${r.fullName} !</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Votre demande de vrification tudiante a t <strong>approuve</strong> ! 
              Vous avez maintenant accs  toutes les fonctionnalits de BOXETU.
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #28a745;">
              <h3 style="margin-top: 0; color: #333;">Dtails de votre vrification</h3>
              <p><strong>Universit :</strong> ${r.university}</p>
              <p><strong>Email universitaire :</strong> ${r.studentEmail}</p>
              ${r.studentId?`<p><strong>Numro tudiant :</strong> ${r.studentId}</p>`:""}
              <p><strong>Date d'approbation :</strong> ${r.approvedAt.toLocaleDateString("fr-FR")}</p>
            </div>
            
            <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #155724;">Avantages de votre vrification</h3>
              <ul style="color: #155724; line-height: 1.8;">
                <li> Accs complet  toutes les fonctionnalits de BOXETU</li>
                <li> Possibilit de publier des annonces</li>
                <li> Accs aux messages et contacts</li>
                <li> Profil vrifi et de confiance</li>
                <li> Support prioritaire</li>
              </ul>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                 Commencer  utiliser BOXETU
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Votre vrification est valide indfiniment.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous  <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;"> 2024 BOXETU - Tous droits rservs</p>
          </div>
        </div>
      `,text:`
        Flicitations ${r.fullName} !
        
        Votre demande de vrification tudiante a t approuve !
        Vous avez maintenant accs  toutes les fonctionnalits de BOXETU.
        
        Dtails de votre vrification :
        - Universit : ${r.university}
        - Email universitaire : ${r.studentEmail}
        ${r.studentId?`- Numro tudiant : ${r.studentId}`:""}
        - Date d'approbation : ${r.approvedAt.toLocaleDateString("fr-FR")}
        
        Avantages de votre vrification :
         Accs complet  toutes les fonctionnalits de BOXETU
         Possibilit de publier des annonces
         Accs aux messages et contacts
         Profil vrifi et de confiance
         Support prioritaire
        
        Commencer  utiliser BOXETU : ${window.location.origin}/verification
        
        Votre vrification est valide indfiniment.
        
        Besoin d'aide ? Contactez-nous  support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}static async sendRejectionEmail(e,r){const n={subject:" Votre vrification BOXETU ncessite des corrections",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;"> BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Vrification ncessite des corrections</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #dc3545; margin-top: 0;">Bonjour ${r.fullName}</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Votre demande de vrification tudiante ncessite des corrections avant d'tre approuve. 
              Ne vous inquitez pas, c'est une tape normale du processus !
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #dc3545;">
              <h3 style="margin-top: 0; color: #333;">Dtails de votre demande</h3>
              <p><strong>Universit :</strong> ${r.university}</p>
              <p><strong>Email universitaire :</strong> ${r.studentEmail}</p>
              <p><strong>Date de rejet :</strong> ${r.rejectedAt.toLocaleDateString("fr-FR")}</p>
            </div>
            
            ${r.rejectionReason?`
              <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">
                <h3 style="margin-top: 0; color: #856404;">Raison du rejet</h3>
                <p style="color: #856404; line-height: 1.6;">${r.rejectionReason}</p>
              </div>
            `:""}
            
            <div style="background: #f8d7da; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #721c24;">Prochaines tapes</h3>
              <ol style="color: #721c24; line-height: 1.8;">
                <li>Vrifiez les informations fournies</li>
                <li>Corrigez les erreurs identifies</li>
                <li>Soumettez une nouvelle demande</li>
                <li>Attendez la validation de notre quipe</li>
              </ol>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #007bff; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                 Soumettre une nouvelle demande
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Vous pouvez soumettre une nouvelle demande  tout moment.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous  <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;"> 2024 BOXETU - Tous droits rservs</p>
          </div>
        </div>
      `,text:`
        Bonjour ${r.fullName},
        
        Votre demande de vrification tudiante ncessite des corrections avant d'tre approuve.
        Ne vous inquitez pas, c'est une tape normale du processus !
        
        Dtails de votre demande :
        - Universit : ${r.university}
        - Email universitaire : ${r.studentEmail}
        - Date de rejet : ${r.rejectedAt.toLocaleDateString("fr-FR")}
        
        ${r.rejectionReason?`
        Raison du rejet :
        ${r.rejectionReason}
        `:""}
        
        Prochaines tapes :
        1. Vrifiez les informations fournies
        2. Corrigez les erreurs identifies
        3. Soumettez une nouvelle demande
        4. Attendez la validation de notre quipe
        
        Soumettre une nouvelle demande : ${window.location.origin}/verification
        
        Vous pouvez soumettre une nouvelle demande  tout moment.
        
        Besoin d'aide ? Contactez-nous  support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}static async sendReminderEmail(e,r){const n={subject:" Rappel : Votre vrification BOXETU est en cours de traitement",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;"> BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Rappel de vrification</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #f39c12; margin-top: 0;">Bonjour ${r.fullName}</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Nous vous informons que votre demande de vrification tudiante est toujours en cours de traitement par notre quipe.
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f39c12;">
              <h3 style="margin-top: 0; color: #333;">Statut de votre demande</h3>
              <p><strong>Universit :</strong> ${r.university}</p>
              <p><strong>Date de soumission :</strong> ${r.submittedAt.toLocaleDateString("fr-FR")}</p>
              <p><strong>Temps d'attente :</strong> ${r.daysWaiting} jour(s)</p>
              <p><strong>Statut actuel :</strong> En cours de traitement</p>
            </div>
            
            <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #856404;">Pourquoi ce dlai ?</h3>
              <p style="color: #856404; line-height: 1.6;">
                Notre quipe vrifie attentivement chaque demande pour garantir la qualit et la scurit de notre plateforme. 
                Ce processus prend gnralement 2-5 jours ouvrables.
              </p>
            </div>
            
            <div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #0c5460;">Que faire en attendant ?</h3>
              <ul style="color: #0c5460; line-height: 1.8;">
                <li>Explorez la plateforme BOXETU</li>
                <li>Consultez les annonces disponibles</li>
                <li>Prparez vos documents pour la publication</li>
                <li>Contactez notre support si vous avez des questions</li>
              </ul>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #17a2b8; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                 Voir le statut de ma demande
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Vous recevrez une notification ds que votre demande sera traite.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous  <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;"> 2024 BOXETU - Tous droits rservs</p>
          </div>
        </div>
      `,text:`
        Bonjour ${r.fullName},
        
        Nous vous informons que votre demande de vrification tudiante est toujours en cours de traitement par notre quipe.
        
        Statut de votre demande :
        - Universit : ${r.university}
        - Date de soumission : ${r.submittedAt.toLocaleDateString("fr-FR")}
        - Temps d'attente : ${r.daysWaiting} jour(s)
        - Statut actuel : En cours de traitement
        
        Pourquoi ce dlai ?
        Notre quipe vrifie attentivement chaque demande pour garantir la qualit et la scurit de notre plateforme. 
        Ce processus prend gnralement 2-5 jours ouvrables.
        
        Que faire en attendant ?
         Explorez la plateforme BOXETU
         Consultez les annonces disponibles
         Prparez vos documents pour la publication
         Contactez notre support si vous avez des questions
        
        Voir le statut de ma demande : ${window.location.origin}/verification
        
        Vous recevrez une notification ds que votre demande sera traite.
        
        Besoin d'aide ? Contactez-nous  support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}}class sl{static async getVerificationRequests(){try{const{data:e,error:r}=await Ue.from("verification_requests").select("*").order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((e==null?void 0:e.map(async i=>{let a="Utilisateur inconnu",o=i.student_email||"Email non disponible";try{const l=Ze(be,"users",i.user_id),c=await On(l);if(c.exists()){const u=c.data();a=u.displayName||u.fullName||u.name||"Utilisateur inconnu",o=u.email||i.student_email||"Email non disponible",Ih.cacheUser({id:i.user_id,email:o,fullName:a,university:i.university,lastSeen:new Date})}else{const u=Ih.getOrCreateUser(i.user_id,i.student_email||"email@inconnu.com",i.university);if(u.fullName!=="Utilisateur inconnu")a=u.fullName;else if(i.student_email){const d=i.student_email.split("@")[0];d.includes(".")?a=d.split(".").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "):a=d.charAt(0).toUpperCase()+d.slice(1)}}}catch(l){console.log("Erreur lors de la rcupration des donnes Firestore, utilisation du cache:",l),a=Ih.getOrCreateUser(i.user_id,i.student_email||"email@inconnu.com",i.university).fullName}return{id:i.id,user_id:i.user_id,user_email:o,user_name:a,university:i.university||"Universit non spcifie",student_email:i.student_email,student_id:i.student_id,status:i.status,submitted_at:i.submitted_at,documents:i.documents||[],notes:i.notes,created_at:i.created_at,updated_at:i.updated_at}}))||[])}catch(e){throw console.error("Erreur lors de la rcupration des demandes:",e),e}}static async getAdminStats(){try{const{count:e,error:r}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0});if(r)throw r;const{count:n,error:i}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","pending");if(i)throw i;const{count:a,error:o}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","approved");if(o)throw o;const{count:l,error:c}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","rejected");if(c)throw c;const u=new Date;u.setHours(0,0,0,0);const{count:d,error:h}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0}).gte("created_at",u.toISOString());if(h)throw h;const m=new Date;m.setDate(m.getDate()-7);const{count:g,error:x}=await Ue.from("verification_requests").select("*",{count:"exact",head:!0}).gte("created_at",m.toISOString());if(x)throw x;const y=g>0?(d-g)/g*100:0;return{totalRequests:e||0,pendingRequests:n||0,approvedRequests:a||0,rejectedRequests:l||0,todayRequests:d||0,weeklyGrowth:Math.round(y*100)/100}}catch(e){throw console.error("Erreur lors de la rcupration des statistiques:",e),e}}static async approveVerification(e,r){try{const{error:n}=await Ue.from("verification_requests").update({status:"approved",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await Ue.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();i&&console.log(" Mise  jour du profil temporairement dsactive");try{const a=Ze(be,"users",i.user_id),o=await On(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";await $k.sendApprovalEmail(l.email||"email@inconnu.com",{fullName:c,university:i.university||"Universit non spcifie",studentEmail:i.student_email||"Email non disponible",studentId:i.student_id,approvedAt:new Date})}}catch(a){console.log("Erreur lors de l'envoi de l'email d'approbation:",a)}}catch(n){throw console.error("Erreur lors de l'approbation:",n),n}}static async resetToPending(e,r){try{const{error:n}=await Ue.from("verification_requests").update({status:"pending",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await Ue.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();if(i)try{const a=Ze(be,"users",i.user_id),o=await On(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";console.log(` Notification: ${c} - Demande remise en attente`)}}catch(a){console.log("Erreur lors de la notification email:",a)}}catch(n){throw console.error("Erreur lors de la remise en attente:",n),n}}static async rejectVerification(e,r){try{const{error:n}=await Ue.from("verification_requests").update({status:"rejected",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await Ue.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();if(i)try{const a=Ze(be,"users",i.user_id),o=await On(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";await $k.sendRejectionEmail(l.email||"email@inconnu.com",{fullName:c,university:i.university||"Universit non spcifie",studentEmail:i.student_email||"Email non disponible",rejectionReason:r||"Informations insuffisantes ou incorrectes",rejectedAt:new Date})}}catch(a){console.log("Erreur lors de l'envoi de l'email de rejet:",a)}}catch(n){throw console.error("Erreur lors du rejet:",n),n}}static async batchAction(e,r,n){try{const i=r.map(o=>({id:o,status:e==="reset"?"pending":e,notes:n,updated_at:new Date().toISOString()})),{error:a}=await Ue.from("verification_requests").upsert(i);if(a)throw a;if(e==="approve"){const{data:o}=await Ue.from("verification_requests").select("user_id").in("id",r);if(o){const l=o.map(c=>c.user_id);try{await Ue.from("profiles").update({verification_status:"verified",verified_at:new Date().toISOString()}).in("id",l)}catch{console.log("Table profiles non trouve, mise  jour ignore")}}}else if(e==="reset"){const{data:o}=await Ue.from("verification_requests").select("user_id").in("id",r);if(o){const l=o.map(c=>c.user_id);console.log(" Mise  jour des profils temporairement dsactive pour:",l)}}}catch(i){throw console.error("Erreur lors de l'action en lot:",i),i}}static async searchVerificationRequests(e){try{const{data:r,error:n}=await Ue.from("verification_requests").select("*").or(`student_email.ilike.%${e}%,university.ilike.%${e}%,student_id.ilike.%${e}%`).order("created_at",{ascending:!1});if(n)throw n;return(r==null?void 0:r.map(i=>({id:i.id,user_id:i.user_id,user_email:i.student_email||"Email non disponible",user_name:`Utilisateur ${i.user_id.substring(0,8)}`,university:i.university||"Universit non spcifie",student_email:i.student_email,student_id:i.student_id,status:i.status,submitted_at:i.submitted_at,documents:i.documents||[],notes:i.notes,created_at:i.created_at,updated_at:i.updated_at})))||[]}catch(r){throw console.error("Erreur lors de la recherche:",r),r}}}function Rfe(){const{currentUser:t}=Ot(),[e,r]=p.useState([]),[n,i]=p.useState([]),[a,o]=p.useState(!0),[l,c]=p.useState([]),[u,d]=p.useState("all"),[h,m]=p.useState(""),[g,x]=p.useState(null);p.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{o(!0);const[w,E]=await Promise.all([sl.getVerificationRequests(),sl.getAdminStats()]),C=w.map(I=>({id:I.id,userId:I.user_id,userEmail:I.user_email,userName:I.user_name,university:I.university,studentEmail:I.student_email,studentId:I.student_id,status:I.status,submittedAt:new Date(I.submitted_at||I.created_at),documents:I.documents||[],notes:I.notes}));r(C),x(E),i(C)}catch(w){console.error("Erreur lors du chargement des demandes:",w)}finally{o(!1)}},_=async(w,E)=>{try{await sl.batchAction(w,E),r(C=>C.map(I=>E.includes(I.id)?{...I,status:w==="approve"?"approved":"rejected"}:I)),c([]),await y()}catch(C){console.error("Erreur lors de l'action en lot:",C)}};p.useEffect(()=>{let w=e;u!=="all"&&(w=w.filter(E=>E.status===u)),h.trim()&&(w=w.filter(E=>E.user_name.toLowerCase().includes(h.toLowerCase())||E.user_email.toLowerCase().includes(h.toLowerCase())||E.university.toLowerCase().includes(h.toLowerCase()))),i(w)},[e,u,h]);const b=async w=>{if(m(w),w.trim())try{const E=await sl.searchVerificationRequests(w);i(E)}catch(E){console.error("Erreur lors de la recherche:",E)}else i(e)},v=g||{total:e.length,pending:e.filter(w=>w.status==="pending").length,approved:e.filter(w=>w.status==="approved").length,rejected:e.filter(w=>w.status==="rejected").length,todayRequests:e.filter(w=>{const E=new Date;return new Date(w.submitted_at).toDateString()===E.toDateString()}).length,weeklyGrowth:0};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard Administrateur"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des demandes de vrification tudiant"})]}),s.jsx(Ife,{stats:v}),l.length>0&&s.jsx(kfe,{selectedCount:l.length,onApprove:()=>_("approve",l),onReject:()=>_("reject",l),onClear:()=>c([])}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{variant:u==="all"?"default":"outline",size:"sm",onClick:()=>d("all"),children:["Toutes (",e.length,")"]}),s.jsxs(U,{variant:u==="pending"?"default":"outline",size:"sm",onClick:()=>d("pending"),children:["En attente (",e.filter(w=>w.status==="pending").length,")"]}),s.jsxs(U,{variant:u==="approved"?"default":"outline",size:"sm",onClick:()=>d("approved"),children:["Approuves (",e.filter(w=>w.status==="approved").length,")"]}),s.jsxs(U,{variant:u==="rejected"?"default":"outline",size:"sm",onClick:()=>d("rejected"),children:["Rejetes (",e.filter(w=>w.status==="rejected").length,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom, email, universit...",className:"pl-10 pr-4 py-2 border rounded-md bg-background text-foreground",value:h,onChange:w=>b(w.target.value)})]}),s.jsxs(U,{variant:"outline",size:"sm",onClick:y,disabled:a,children:[s.jsx(Fx,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Actualiser"]})]})]}),s.jsx("div",{className:"space-y-4",children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des demandes..."})]}):n.length===0?s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(df,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune demande"}),s.jsx("p",{className:"text-muted-foreground",children:u==="all"?"Aucune demande de vrification pour le moment.":`Aucune demande ${u==="pending"?"en attente":u==="approved"?"approuve":"rejete"}.`})]})})}):n.map(w=>s.jsx(Tfe,{request:w,isSelected:l.includes(w.id),onSelect:E=>{c(E?C=>[...C,w.id]:C=>C.filter(I=>I!==w.id))},onStatusChange:async(E,C)=>{try{E==="approved"?await sl.approveVerification(w.id,C):E==="rejected"?await sl.rejectVerification(w.id,C):E==="pending"&&await sl.resetToPending(w.id,C),r(I=>I.map(T=>T.id===w.id?{...T,status:E,notes:C}:T)),await y()}catch(I){console.error("Erreur lors du changement de statut:",I)}}},w.id))})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Accs restreint"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous devez tre connect pour accder  cette page."})]})})})})}function Pfe(){const{currentUser:t}=Ot();console.log("AdminPage - currentUser:",t),console.log("AdminPage - currentUser?.email:",t==null?void 0:t.email);const e=(t==null?void 0:t.email)==="barrymohamadou98@gmail.com"||(t==null?void 0:t.role)==="admin";return console.log("AdminPage - isAdmin:",e),t?e?s.jsx(Rfe,{}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-md mx-auto text-center",children:s.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-red-800 dark:text-red-200 mb-2",children:"Accs refus"}),s.jsx("p",{className:"text-red-600 dark:text-red-300",children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."})]})})}):s.jsx(hR,{to:"/login",replace:!0})}const vs={NEW_VERIFICATION:"new_verification",PENDING_ACTION:"pending_action",USER_MESSAGE:"user_message",SYSTEM_ALERT:"system_alert",PAYMENT_ISSUE:"payment_issue",SAFETY_REPORT:"safety_report"},Ic={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},Dfe={[vs.NEW_VERIFICATION]:{title:"Nouvelle demande de vrification",defaultMessage:"Un nouvel utilisateur a soumis une demande de vrification",priority:Ic.MEDIUM,actionUrl:"/admin/verifications",icon:"",color:"blue"},[vs.PENDING_ACTION]:{title:"Action en attente",defaultMessage:"Une action administrative ncessite votre attention",priority:Ic.HIGH,actionUrl:"/admin/dashboard",icon:"",color:"orange"},[vs.USER_MESSAGE]:{title:"Nouveau message utilisateur",defaultMessage:"Un utilisateur a envoy un message au support",priority:Ic.MEDIUM,actionUrl:"/admin/messages",icon:"",color:"blue"},[vs.SYSTEM_ALERT]:{title:"Alerte systme",defaultMessage:"Une alerte systme ncessite une intervention",priority:Ic.HIGH,actionUrl:"/admin/system",icon:"",color:"red"},[vs.PAYMENT_ISSUE]:{title:"Problme de paiement",defaultMessage:"Un problme de paiement a t dtect",priority:Ic.HIGH,actionUrl:"/admin/payments",icon:"",color:"orange"},[vs.SAFETY_REPORT]:{title:"Signalement de scurit",defaultMessage:"Un utilisateur a signal un problme de scurit",priority:Ic.URGENT,actionUrl:"/admin/safety",icon:"",color:"red"}},Ofe=(t,e,r,n,i)=>{const a=Dfe[t];return{type:t,title:a.title,message:e||a.defaultMessage,priority:a.priority,actionUrl:a.actionUrl,data:r,userId:n,userName:i,icon:a.icon,color:a.color}};class Mfe{static async createNotification(e){var r,n;try{const i=Ofe(e.type,e.message,e.data,e.userId,e.userName),{data:a,error:o}=await Ue.from("admin_notifications").insert({type:e.type,title:e.title||i.title,message:e.message||i.message,priority:e.priority||i.priority,user_id:e.userId,user_name:e.userName,action_url:e.actionUrl||i.actionUrl,data:e.data,assigned_admin_id:e.assignedAdminId||((r=Et.currentUser)==null?void 0:r.uid),expires_at:(n=e.expiresAt)==null?void 0:n.toISOString()}).select().single();if(o)throw o;return{success:!0,notification:a}}catch(i){return console.error("Erreur lors de la cration de la notification admin:",i),{success:!1,error:i instanceof Error?i.message:"Erreur inconnue"}}}static async notifyNewVerification(e,r,n="medium"){return this.createNotification({type:vs.NEW_VERIFICATION,message:`${r} a soumis une nouvelle demande de vrification`,priority:n,userId:e,userName:r})}static async notifyPendingAction(e,r="high"){return this.createNotification({type:vs.PENDING_ACTION,message:e,priority:r})}static async notifyUserMessage(e,r,n){return this.createNotification({type:vs.USER_MESSAGE,message:`Nouveau message de ${r}: "${n}"`,priority:"medium",userId:e,userName:r})}static async notifySystemAlert(e,r="high"){return this.createNotification({type:vs.SYSTEM_ALERT,message:e,priority:r})}static async notifyPaymentIssue(e,r,n){return this.createNotification({type:vs.PAYMENT_ISSUE,message:`Problme de paiement pour ${r}: ${n}`,priority:"high",userId:e,userName:r})}static async notifySafetyReport(e,r,n,i){return this.createNotification({type:vs.SAFETY_REPORT,message:`Signalement de scurit de ${r} (${n}): ${i}`,priority:"urgent",userId:e,userName:r})}static async assignToAdmin(e,r){try{const{error:n}=await Ue.from("admin_notifications").update({assigned_admin_id:r}).eq("id",e);if(n)throw n;return{success:!0}}catch(n){return console.error("Erreur lors de l'assignation:",n),{success:!1,error:n instanceof Error?n.message:"Erreur inconnue"}}}static async markAsRead(e){try{const{error:r}=await Ue.from("admin_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(r)throw r;return{success:!0}}catch(r){return console.error("Erreur lors du marquage comme lu:",r),{success:!1,error:r instanceof Error?r.message:"Erreur inconnue"}}}static async deleteNotification(e){try{const{error:r}=await Ue.from("admin_notifications").delete().eq("id",e);if(r)throw r;return{success:!0}}catch(r){return console.error("Erreur lors de la suppression:",r),{success:!1,error:r instanceof Error?r.message:"Erreur inconnue"}}}static async getNotificationStats(e){try{const r=Ue.from("admin_notifications").select("*");e&&r.eq("assigned_admin_id",e);const{data:n,error:i}=await r;if(i)throw i;return{success:!0,stats:{total:(n==null?void 0:n.length)||0,unread:(n==null?void 0:n.filter(o=>!o.is_read).length)||0,byPriority:{urgent:(n==null?void 0:n.filter(o=>o.priority==="urgent").length)||0,high:(n==null?void 0:n.filter(o=>o.priority==="high").length)||0,medium:(n==null?void 0:n.filter(o=>o.priority==="medium").length)||0,low:(n==null?void 0:n.filter(o=>o.priority==="low").length)||0},byType:{new_verification:(n==null?void 0:n.filter(o=>o.type==="new_verification").length)||0,pending_action:(n==null?void 0:n.filter(o=>o.type==="pending_action").length)||0,user_message:(n==null?void 0:n.filter(o=>o.type==="user_message").length)||0,system_alert:(n==null?void 0:n.filter(o=>o.type==="system_alert").length)||0,payment_issue:(n==null?void 0:n.filter(o=>o.type==="payment_issue").length)||0,safety_report:(n==null?void 0:n.filter(o=>o.type==="safety_report").length)||0}}}}catch(r){return console.error("Erreur lors de la rcupration des statistiques:",r),{success:!1,error:r instanceof Error?r.message:"Erreur inconnue"}}}static async cleanupExpiredNotifications(){try{const{error:e}=await Ue.from("admin_notifications").delete().lt("expires_at",new Date().toISOString());if(e)throw e;return{success:!0}}catch(e){return console.error("Erreur lors du nettoyage:",e),{success:!1,error:e instanceof Error?e.message:"Erreur inconnue"}}}}const Lfe=()=>{const t=Hn(),{adminNotifications:e,unreadCount:r,loading:n,error:i,markAdminNotificationAsRead:a,markAllAsRead:o,removeAdminNotification:l,refresh:c}=jO(),[u,d]=p.useState(""),[h,m]=p.useState("all"),[g,x]=p.useState("all"),[y,_]=p.useState("all"),[b,v]=p.useState(!1),[w,E]=p.useState(null),C=e.filter(D=>{var F;const S=D.title.toLowerCase().includes(u.toLowerCase())||D.message.toLowerCase().includes(u.toLowerCase())||((F=D.userName)==null?void 0:F.toLowerCase().includes(u.toLowerCase())),M=h==="all"||D.priority===h,$=g==="all"||D.type===g,q=y==="all"||y==="read"&&D.isRead||y==="unread"&&!D.isRead;return S&&M&&$&&q}),I={urgent:C.filter(D=>D.priority==="urgent"),high:C.filter(D=>D.priority==="high"),medium:C.filter(D=>D.priority==="medium"),low:C.filter(D=>D.priority==="low")},T=async()=>{const D=await Mfe.getNotificationStats();D.success&&E(D.stats)};p.useEffect(()=>{b&&T()},[b]);const k=async()=>{try{await o(),ue.success("Toutes les notifications ont t marques comme lues")}catch{ue.error("Erreur lors du marquage global")}},R=async D=>{try{await l(D),ue.success("Notification supprime")}catch{ue.error("Erreur lors de la suppression")}},j=D=>{switch(D){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=D=>{switch(D){case"new_verification":return"";case"pending_action":return"";case"user_message":return"";case"system_alert":return"";case"payment_issue":return"";case"safety_report":return"";default:return""}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{className:"max-w-md mx-auto",children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Qt,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Erreur de chargement"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:i}),s.jsx(U,{onClick:c,children:"Ressayer"})]})})})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[s.jsx(tn,{className:"h-8 w-8 text-primary"}),"Notifications Admin"]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Grez les notifications administratives de la plateforme"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{variant:"outline",onClick:()=>v(!b),className:"flex items-center gap-2",children:[s.jsx(av,{className:"h-4 w-4"}),"Statistiques"]}),s.jsxs(U,{onClick:k,disabled:r===0,className:"flex items-center gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Tout marquer comme lu"]}),s.jsxs(U,{variant:"outline",onClick:c,className:"flex items-center gap-2",children:[s.jsx(Fx,{className:"h-4 w-4"}),"Actualiser"]})]})]}),b&&w&&s.jsxs(H,{className:"mb-6",children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(av,{className:"h-5 w-5"}),"Statistiques des notifications"]})}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:w.total}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w.unread}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Non lues"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.byPriority.urgent}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Urgentes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.byType.new_verification}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Vrifications"})]})]})})]}),s.jsx(H,{className:"mb-6",children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Rechercher...",value:u,onChange:D=>d(D.target.value),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priorit"}),s.jsxs(ct,{value:h,onValueChange:m,children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Toutes les priorits"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Toutes les priorits"}),s.jsx(re,{value:"urgent",children:"Urgente"}),s.jsx(re,{value:"high",children:"Haute"}),s.jsx(re,{value:"medium",children:"Moyenne"}),s.jsx(re,{value:"low",children:"Basse"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),s.jsxs(ct,{value:g,onValueChange:x,children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Tous les types"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Tous les types"}),s.jsx(re,{value:"new_verification",children:"Vrification"}),s.jsx(re,{value:"pending_action",children:"Action en attente"}),s.jsx(re,{value:"user_message",children:"Message utilisateur"}),s.jsx(re,{value:"system_alert",children:"Alerte systme"}),s.jsx(re,{value:"payment_issue",children:"Problme de paiement"}),s.jsx(re,{value:"safety_report",children:"Signalement scurit"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Statut"}),s.jsxs(ct,{value:y,onValueChange:_,children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Tous les statuts"})}),s.jsxs(it,{children:[s.jsx(re,{value:"all",children:"Tous les statuts"}),s.jsx(re,{value:"unread",children:"Non lues"}),s.jsx(re,{value:"read",children:"Lues"})]})]})]})]})})}),s.jsxs(uc,{defaultValue:"urgent",className:"space-y-4",children:[s.jsxs(Go,{className:"grid w-full grid-cols-4",children:[s.jsxs(zt,{value:"urgent",className:"flex items-center gap-2",children:[" Urgentes",I.urgent.length>0&&s.jsx(le,{variant:"destructive",children:I.urgent.length})]}),s.jsxs(zt,{value:"high",className:"flex items-center gap-2",children:[" Haute",I.high.length>0&&s.jsx(le,{variant:"secondary",children:I.high.length})]}),s.jsxs(zt,{value:"medium",className:"flex items-center gap-2",children:[" Moyenne",I.medium.length>0&&s.jsx(le,{variant:"outline",children:I.medium.length})]}),s.jsxs(zt,{value:"low",className:"flex items-center gap-2",children:[" Basse",I.low.length>0&&s.jsx(le,{variant:"outline",children:I.low.length})]})]}),Object.entries(I).map(([D,S])=>s.jsx(ar,{value:D,className:"space-y-4",children:S.length===0?s.jsx(H,{children:s.jsxs(K,{className:"pt-6 text-center text-muted-foreground",children:["Aucune notification ",D==="urgent"?"urgente":D==="high"?"de haute priorit":D==="medium"?"de priorit moyenne":"de basse priorit"]})}):S.map(M=>s.jsx(H,{className:`transition-all duration-200 hover:shadow-md ${M.isRead?"":"ring-2 ring-primary/20"}`,children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[s.jsx("div",{className:"text-2xl",children:P(M.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg",children:M.title}),s.jsx(le,{className:j(M.priority),children:M.priority}),!M.isRead&&s.jsx(le,{variant:"secondary",children:"Nouveau"})]}),s.jsx("p",{className:"text-muted-foreground mb-3",children:M.message}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[M.userName&&s.jsxs("span",{children:[" ",M.userName]}),s.jsxs("span",{children:[" ",cc(M.timestamp,{locale:bs,addSuffix:!0})]}),M.actionUrl&&s.jsx(U,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>t(M.actionUrl),children:"Voir l'action "})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[M.isRead?s.jsxs(U,{variant:"outline",size:"sm",disabled:!0,className:"flex items-center gap-2",children:[s.jsx(oO,{className:"h-4 w-4"}),"Lu"]}):s.jsxs(U,{variant:"outline",size:"sm",onClick:()=>a(M.id),className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-4 w-4"}),"Marquer lu"]}),s.jsxs(U,{variant:"outline",size:"sm",onClick:()=>R(M.id),className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[s.jsx(xo,{className:"h-4 w-4"}),"Supprimer"]})]})]})})},M.id))},D))]}),s.jsx("div",{className:"mt-8 text-center text-muted-foreground",children:s.jsxs("p",{children:[C.length," notification",C.length>1?"s":""," affiche",C.length>1?"s":"","sur ",e.length," au total"]})})]})};function Vfe(){const{currentUser:t,userProfile:e}=Ot(),{showVerificationNotification:r,clearVerificationNotifications:n}=im(),i=p.useCallback(()=>!t||!e?"not_verified":e.isVerified?"verified":e.verificationStatus==="pending"?"pending":e.verificationStatus==="rejected"?"rejected":"not_verified",[t,e]),a=p.useCallback(()=>{if(!t)return;const o=i();if(o==="verified"){n();return}r(o)},[t,i,r,n]);return p.useEffect(()=>{if(t&&e){const o=setTimeout(()=>{a()},100);return()=>clearTimeout(o)}},[t,e,a]),p.useEffect(()=>{if(t&&e){const o=i();o!=="verified"?r(o):n()}},[e==null?void 0:e.isVerified,e==null?void 0:e.verificationStatus,t,i,r,n]),{verificationStatus:i(),showVerificationNotification:a,clearVerificationNotifications:n,shouldShowNotification:i()!=="verified"}}function zk(){const{showVerificationNotification:t,clearVerificationNotifications:e}=im(),{verificationStatus:r,shouldShowNotification:n}=Vfe(),i=()=>{t("not_verified")},a=()=>{t("pending")},o=()=>{t("rejected")},l=()=>{e()};return s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Test des Notifications de Vrification"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Page de test pour vrifier le bon fonctionnement du systme de notifications de vrification"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{children:"Tests des Notifications"})}),s.jsx(K,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{onClick:i,className:"w-full",children:"Test Notification Non Vrifi"}),s.jsx(U,{onClick:a,className:"w-full",children:"Test Notification En Attente"}),s.jsx(U,{onClick:o,className:"w-full",children:"Test Notification Rejete"}),s.jsx(U,{onClick:l,variant:"outline",className:"w-full",children:"Effacer les Notifications"})]})})]})}),s.jsxs("div",{children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{children:"Statut Actuel"})}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium",children:"Statut de vrification :"}),s.jsx("span",{className:"text-blue-600",children:r})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium",children:"Notification affiche :"}),s.jsx("span",{className:n?"text-green-600":"text-red-600",children:n?"Oui":"Non"})]})]})})]}),s.jsxs(H,{className:"mt-4",children:[s.jsx(he,{children:s.jsx(fe,{children:"Instructions de test"})}),s.jsx(K,{children:s.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[s.jsx("li",{children:' Cliquez sur "Test Notification Non Vrifi" pour simuler un utilisateur non vrifi'}),s.jsx("li",{children:' Cliquez sur "Test Notification En Attente" pour simuler une demande en attente'}),s.jsx("li",{children:' Cliquez sur "Test Notification Rejete" pour simuler une demande rejete'}),s.jsx("li",{children:" Vrifiez la console pour les logs dtaills"}),s.jsx("li",{children:" Les notifications apparatront en haut de page"})]})})]})]})]})]})}class Ap{static async diagnoseConfiguration(){console.log(" [DIAGNOSTIC] Dmarrage du diagnostic Supabase...");const e={connection:!1,tables:{},rls:{},functions:!1,errors:[]};try{console.log(" [DIAGNOSTIC] Test de connexion...");const{error:r}=await Ue.from("user_profiles").select("count").limit(1);r?(e.errors.push(`Erreur de connexion: ${r.message}`),console.error(" [DIAGNOSTIC] Erreur de connexion:",r)):(e.connection=!0,console.log(" [DIAGNOSTIC] Connexion russie")),console.log(" [DIAGNOSTIC] Vrification des tables...");const n=["user_profiles","user_notifications","admin_notifications","verification_requests"];for(const i of n)try{const{error:a}=await Ue.from(i).select("*").limit(1);a?(e.tables[i]=!1,e.errors.push(`Table ${i}: ${a.message}`),console.error(` [DIAGNOSTIC] Table ${i}:`,a)):(e.tables[i]=!0,console.log(` [DIAGNOSTIC] Table ${i}: OK`))}catch{e.tables[i]=!1,e.errors.push(`Table ${i}: Erreur inconnue`),console.error(` [DIAGNOSTIC] Table ${i}: Erreur inconnue`)}console.log(" [DIAGNOSTIC] Vrification des fonctions RPC...");try{const{error:i}=await Ue.rpc("create_user_profile",{user_id:"test-diagnostic",user_email:"test@diagnostic.com",user_role:"user"});i?(e.functions=!1,e.errors.push(`Fonction RPC: ${i.message}`),console.error(" [DIAGNOSTIC] Fonction RPC:",i)):(e.functions=!0,console.log(" [DIAGNOSTIC] Fonction RPC: OK"))}catch{e.functions=!1,e.errors.push("Fonction RPC: Erreur inconnue"),console.error(" [DIAGNOSTIC] Fonction RPC: Erreur inconnue")}console.log(" [DIAGNOSTIC] Vrification des politiques RLS...");for(const i of n)try{const{error:a}=await Ue.from(i).select("*").limit(1);a&&a.message.includes("RLS")?(e.rls[i]=!1,console.log(` [DIAGNOSTIC] Table ${i}: RLS actif`)):(e.rls[i]=!0,console.log(` [DIAGNOSTIC] Table ${i}: RLS configur`))}catch{e.rls[i]=!1,console.log(` [DIAGNOSTIC] Table ${i}: Erreur RLS`)}}catch(r){e.errors.push(`Erreur gnrale: ${r}`),console.error(" [DIAGNOSTIC] Erreur gnrale:",r)}return console.log(" [DIAGNOSTIC] Rsum du diagnostic:"),console.log(" Connexion:",e.connection?"":""),console.log(" Tables:",Object.entries(e.tables).map(([r,n])=>`${r}: ${n?"":""}`).join(", ")),console.log(" RLS:",Object.entries(e.rls).map(([r,n])=>`${r}: ${n?"":""}`).join(", ")),console.log(" Fonctions RPC:",e.functions?"":""),e.errors.length>0&&(console.log(" Erreurs dtectes:"),e.errors.forEach(r=>console.log(`  - ${r}`))),e}static async testUserCreation(){console.log(" [DIAGNOSTIC] Test de cration d'utilisateur...");const e={id:`test-${Date.now()}`,email:`test-${Date.now()}@diagnostic.com`,display_name:"Utilisateur Test Diagnostic",full_name:"Utilisateur Test Diagnostic",is_verified:!1,verification_status:"not_started",role:"user"};try{const{data:r,error:n}=await Ue.from("user_profiles").insert([e]).select();if(n)return console.error(" [DIAGNOSTIC] Erreur insertion directe:",n),{success:!1,error:n.message};console.log(" [DIAGNOSTIC] Utilisateur de test cr:",r);const{error:i}=await Ue.from("user_profiles").delete().eq("id",e.id);return i?console.warn(" [DIAGNOSTIC] Impossible de nettoyer l'utilisateur de test:",i):console.log(" [DIAGNOSTIC] Utilisateur de test nettoy"),{success:!0,data:r}}catch(r){return console.error(" [DIAGNOSTIC] Erreur test cration:",r),{success:!1,error:String(r)}}}static async checkTableStructure(){console.log(" [DIAGNOSTIC] Vrification de la structure des tables...");try{const{data:e,error:r}=await Ue.from("user_profiles").select("*").limit(1);r?console.error(" [DIAGNOSTIC] Erreur user_profiles:",r):console.log(" [DIAGNOSTIC] Structure user_profiles:",Object.keys(e[0]||{}));const{data:n,error:i}=await Ue.from("verification_requests").select("*").limit(1);i?console.error(" [DIAGNOSTIC] Erreur verification_requests:",i):console.log(" [DIAGNOSTIC] Structure verification_requests:",Object.keys(n[0]||{}))}catch(e){console.error(" [DIAGNOSTIC] Erreur vrification structure:",e)}}static async testUserProfileSync(e,r){console.log(" [DIAGNOSTIC] Test de synchronisation du profil utilisateur..."),console.log(` User ID: ${e}`),console.log(` Email: ${r}`);try{const{data:n,error:i}=await Ue.from("user_profiles").select("*").eq("id",e).single();if(i&&i.code==="PGRST116"){console.log(" [DIAGNOSTIC] Profil non trouv, cration en cours...");const a={id:e,email:r,display_name:r.split("@")[0],full_name:r.split("@")[0],is_verified:!1,verification_status:"not_started",role:"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:o,error:l}=await Ue.from("user_profiles").insert([a]).select();return l?(console.error(" [DIAGNOSTIC] Erreur cration profil:",l),{success:!1,error:l.message}):(console.log(" [DIAGNOSTIC] Profil utilisateur cr avec succs:",o),{success:!0,data:o,action:"created"})}else return i?(console.error(" [DIAGNOSTIC] Erreur vrification profil existant:",i),{success:!1,error:i.message}):(console.log(" [DIAGNOSTIC] Profil utilisateur existe dj:",n),{success:!0,data:n,action:"exists"})}catch(n){return console.error(" [DIAGNOSTIC] Erreur synchronisation profil:",n),{success:!1,error:String(n)}}}}const Ffe=()=>{const{currentUser:t}=Ot(),[e,r]=p.useState([]),[n,i]=p.useState({firebase:"inactive",supabase:"inactive",profile:"inactive",notifications:"inactive"}),a=g=>{const y=`[${new Date().toLocaleTimeString()}] ${g}`;r(_=>[..._,y]),console.log(y)},o=()=>{r([])},l=async()=>{try{if(a(" Test de connexion Firebase..."),!t)return a(" Aucun utilisateur connect"),i(x=>({...x,firebase:"inactive"})),!1;const g=await t.getIdToken();return a(` Token Firebase obtenu: ${g.substring(0,20)}...`),i(x=>({...x,firebase:"active"})),!0}catch(g){return a(` Erreur test Firebase: ${g}`),i(x=>({...x,firebase:"inactive"})),!1}},c=async()=>{try{a(" Test de connexion Supabase...");const g=await fetch("https://kbbhglxrcywpcktkamhl.supabase.co/rest/v1/user_profiles?select=count",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A"}});return g.ok?(a(" Connexion Supabase russie"),i(x=>({...x,supabase:"active"})),!0):(a(` Erreur connexion Supabase: ${g.status}`),i(x=>({...x,supabase:"inactive"})),!1)}catch(g){return a(` Erreur test Supabase: ${g}`),i(x=>({...x,supabase:"inactive"})),!1}},u=async()=>{try{if(a(" Test de synchronisation du profil..."),!t)return a(" Aucun utilisateur connect"),i(y=>({...y,profile:"inactive"})),!1;const{data:g,error:x}=await Ue.from("user_profiles").select("*").eq("id",t.uid).single();return x?(a(` Erreur synchronisation profil: ${x.message}`),i(y=>({...y,profile:"inactive"})),!1):g?(a(" Profil synchronis avec Supabase"),a(` Email: ${g.email}, Rle: ${g.role||"Non dfini"}`),a(` Vrifi: ${g.is_verified?"Oui":"Non"}, Statut: ${g.verification_status||"Non dfini"}`),i(y=>({...y,profile:"active"})),!0):(a(" Profil non trouv dans Supabase"),i(y=>({...y,profile:"inactive"})),!1)}catch(g){return a(` Erreur test synchronisation profil: ${g}`),i(x=>({...x,profile:"inactive"})),!1}},d=async()=>{var g;try{a(" Test des notifications temps rel...");const x={user_id:(t==null?void 0:t.uid)||"test-user",type:"system",title:"Test de synchronisation",status:"pending",message:"Test de notification temps rel",is_read:!1,timestamp:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a(" Envoi de la notification de test..."),a(` Donnes: ${JSON.stringify(x,null,2)}`);const y=await fetch("https://kbbhglxrcywpcktkamhl.supabase.co/rest/v1/user_notifications",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A","Content-Type":"application/json"},body:JSON.stringify(x)});if(a(` Rponse reue: ${y.status} ${y.statusText}`),y.ok||y.status===201){const _=await y.text();if(a(` Contenu de la rponse: ${_}`),y.status===201)return a(" Notification de test cre avec succs !"),a(" Code 201 = Cration russie (rponse vide normale)"),i(b=>({...b,notifications:"active"})),!0;if(_.trim())try{const b=JSON.parse(_);return a(" Notification de test cre"),a(` ID: ${((g=b[0])==null?void 0:g.id)||"ID non disponible"}`),i(v=>({...v,notifications:"active"})),!0}catch(b){return a(` Rponse reue mais JSON invalide: ${b}`),i(v=>({...v,notifications:"inactive"})),!1}else return a(" Rponse vide reue"),i(b=>({...b,notifications:"inactive"})),!1}else{const _=await y.text();return a(` Erreur cration notification: ${y.status}`),a(` Dtails de l'erreur: ${_}`),i(b=>({...b,notifications:"inactive"})),!1}}catch(x){return a(` Erreur test notifications: ${x}`),i(y=>({...y,notifications:"inactive"})),!1}},h=async()=>{try{a(" Dmarrage du diagnostic Supabase complet...");const g=await Ap.diagnoseConfiguration();a(` Diagnostic termin - Connexion: ${g.connection?"":""}`),a(" Test de cration d'utilisateur...");const x=await Ap.testUserCreation();if(x.success?a(" Test de cration d'utilisateur russi"):a(` Test de cration d'utilisateur chou: ${x.error}`),t){a(" Test de synchronisation de votre profil...");const y=await Ap.testUserProfileSync(t.uid,t.email||"email-inconnu@example.com");y.success?a(` Synchronisation profil: ${y.action==="created"?"Cr":"Existe dj"}`):a(` Erreur synchronisation profil: ${y.error}`)}a(" Vrification de la structure des tables..."),await Ap.checkTableStructure(),a(" Diagnostic Supabase termin - Vrifiez la console pour plus de dtails")}catch(g){a(` Erreur lors du diagnostic: ${g}`)}},m=async()=>{a(" Dmarrage des tests de synchronisation...");const g=await Promise.all([l(),c(),u(),d()]);a(" Rsum des tests:"),a(`Firebase: ${g[0]?"":""}`),a(`Supabase: ${g[1]?"":""}`),a(`Profil: ${g[2]?"":""}`),a(`Notifications: ${g[3]?"":""}`),g.every(x=>x)?a(" Tous les tests sont passs avec succs !"):a(" Certains tests ont chou. Vrifiez la configuration.")};return s.jsxs(H,{className:"w-full max-w-4xl mx-auto",children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Panel de Test de Synchronisation"}),s.jsx(at,{children:"Testez la synchronisation Firebase  Supabase et diagnostiquez les problmes"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(U,{onClick:l,variant:"outline",className:"h-20 flex flex-col items-center justify-center gap-2",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsx("div",{className:"text-xs",children:"Test Firebase"}),s.jsx(le,{variant:n.firebase==="active"?"default":"secondary",children:n.firebase==="active"?"":""})]}),s.jsxs(U,{onClick:c,variant:"outline",className:"h-20 flex flex-col items-center justify-center gap-2",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsx("div",{className:"text-xs",children:"Test Supabase"}),s.jsx(le,{variant:n.supabase==="active"?"default":"secondary",children:n.supabase==="active"?"":""})]}),s.jsxs(U,{onClick:u,variant:"outline",className:"h-20 flex flex-col items-center justify-center gap-2",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsx("div",{className:"text-xs",children:"Test Profil"}),s.jsx(le,{variant:n.profile==="active"?"default":"secondary",children:n.profile==="active"?"":""})]}),s.jsxs(U,{onClick:d,variant:"outline",className:"h-20 flex flex-col items-center justify-center gap-2",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsx("div",{className:"text-xs",children:"Test Notifications"}),s.jsx(le,{variant:n.notifications==="active"?"default":"secondary",children:n.notifications==="active"?"":""})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(U,{onClick:m,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:" Lancer Tous les Tests"}),s.jsx(U,{onClick:h,variant:"outline",className:"bg-orange-100 text-orange-700 border-orange-300 hover:bg-orange-200",children:" Diagnostic Supabase"}),s.jsx(U,{onClick:o,variant:"outline",children:" Effacer les Logs"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:" Logs de Test"}),s.jsxs(le,{variant:"outline",children:[e.length," entres"]})]}),s.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm max-h-96 overflow-y-auto",children:e.length===0?s.jsx("div",{className:"text-gray-500",children:"Aucun log disponible. Lancez un test pour commencer."}):e.map((g,x)=>s.jsx("div",{className:"mb-1",children:g},x))})]})]})]})},Ufe=()=>{Ot();const[t,e]=p.useState({totalSyncs:0,successfulSyncs:0,failedSyncs:0,averageSyncTime:0,lastSyncTime:null,activeUsers:0}),[r,n]=p.useState(!1),[i,a]=p.useState([]),o=()=>{n(!0),e(d=>({...d,totalSyncs:d.totalSyncs+1,successfulSyncs:d.successfulSyncs+1,lastSyncTime:new Date}))},l=()=>{n(!1)},c=()=>{e({totalSyncs:0,successfulSyncs:0,failedSyncs:0,averageSyncTime:0,lastSyncTime:null,activeUsers:0}),a([])},u=()=>t.totalSyncs===0?0:Math.round(t.successfulSyncs/t.totalSyncs*100);return s.jsxs(H,{className:"w-full max-w-4xl mx-auto",children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Monitoring de la Synchronisation"}),s.jsx(at,{children:"Surveillez les performances et la sant de votre intgration Firebase-Supabase"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{onClick:o,disabled:r,className:"bg-green-600 hover:bg-green-700",children:" Dmarrer le monitoring"}),s.jsx(U,{onClick:l,disabled:!r,variant:"outline",className:"text-red-600 border-red-600",children:" Arrter le monitoring"}),s.jsx(U,{onClick:c,variant:"outline",children:" Rinitialiser"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalSyncs}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Syncs"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.successfulSyncs}),s.jsx("p",{className:"text-sm text-gray-600",children:"Succs"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.failedSyncs}),s.jsx("p",{className:"text-sm text-gray-600",children:"checs"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[u(),"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Taux de succs"})]})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(le,{className:`${r?"bg-green-500":"bg-gray-500"} text-white text-lg px-4 py-2`,children:r?" Monitoring actif":" Monitoring inactif"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-lg",children:" Performance"})}),s.jsxs(K,{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Temps moyen de sync:"}),s.jsxs("span",{className:"font-mono",children:[t.averageSyncTime,"ms"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Dernire synchronisation:"}),s.jsx("span",{className:"font-mono",children:t.lastSyncTime?t.lastSyncTime.toLocaleTimeString():"Jamais"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Utilisateurs actifs:"}),s.jsx("span",{className:"font-mono",children:t.activeUsers})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-lg",children:" Sant du systme"})}),s.jsxs(K,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"Firebase:"}),s.jsx(le,{className:"bg-green-500 text-white",children:" Connect"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"Supabase:"}),s.jsx(le,{className:"bg-green-500 text-white",children:" Connect"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"Notifications:"}),s.jsx(le,{className:"bg-green-500 text-white",children:" Actives"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"RLS:"}),s.jsx(le,{className:"bg-yellow-500 text-white",children:" Dsactiv"})]})]})]})]}),s.jsxs(H,{children:[s.jsx(he,{children:s.jsx(fe,{className:"text-lg",children:" Historique des synchronisations"})}),s.jsx(K,{children:i.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"Aucune synchronisation enregistre"}):s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:i.map((d,h)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:d.timestamp}),s.jsx("span",{className:"text-sm",children:d.userId}),s.jsx(le,{className:d.success?"bg-green-500":"bg-red-500",children:d.success?"":""})]},h))})})]}),s.jsxs(H,{className:"bg-blue-50 border-blue-200",children:[s.jsx(he,{children:s.jsx(fe,{className:"text-blue-800",children:" Recommandations"})}),s.jsx(K,{className:"text-blue-700",children:s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"RLS"})," : Ractivez Row Level Security pour la production"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Monitoring"})," : Surveillez les performances en continu"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Backup"})," : Configurez des sauvegardes automatiques"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Alertes"})," : Mettez en place des notifications d'erreur"]})]})})]})]})]})},$fe=()=>{const{currentUser:t,userProfile:e}=Ot();return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:" Test d'Intgration Firebase-Supabase"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Page de test complte pour valider la synchronisation automatique des utilisateurs et des notifications temps rel entre Firebase et Supabase."})]}),s.jsxs(H,{className:"mb-8",children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Statut Global de l'Intgration"}),s.jsx(at,{children:"Vue d'ensemble de l'tat de tous les composants"})]}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold mb-2",children:"Firebase"}),s.jsx(le,{variant:t?"default":"secondary",className:"mb-2",children:t?"Connect":"Non connect"}),t&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:["UID: ",t.uid.substring(0,8),"..."]}),s.jsxs("p",{children:["Email: ",t.email]})]})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold mb-2",children:"Supabase"}),s.jsx(le,{variant:e?"default":"secondary",className:"mb-2",children:e?"Synchronis":"Non synchronis"}),e&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:["Nom: ",e.displayName]}),s.jsxs("p",{children:["Statut: ",e.verificationStatus]})]})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold mb-2",children:"Notifications"}),s.jsx(le,{variant:"secondary",className:"mb-2",children:"Temps rel"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:"Table: user_notifications"}),s.jsx("p",{children:"Structure: Complte"})]})]})]})})]}),s.jsxs(H,{className:"mb-8",children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Instructions de Test"}),s.jsx(at,{children:"Suivez ces tapes pour valider l'intgration complte"})]}),s.jsx(K,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(le,{className:"mt-1",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Connexion Firebase"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Connectez-vous avec un compte Firebase (email/password ou Google) pour activer la synchronisation automatique."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(le,{className:"mt-1",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Synchronisation Automatique"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Une fois connect, votre profil sera automatiquement synchronis avec Supabase via le FirebaseSyncService."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(le,{className:"mt-1",children:"3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Tests de Validation"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Utilisez le panneau de test ci-dessous pour valider que tous les composants fonctionnent correctement."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(le,{className:"mt-1",children:"4"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Notifications Temps Rel"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Testez la cration de notifications et vrifiez qu'elles apparaissent en temps rel via Supabase Realtime."})]})]})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx(Ffe,{}),s.jsx(Ufe,{}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Informations Techniques"}),s.jsx(at,{children:"Dtails sur l'architecture et la configuration"})]}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Architecture de Synchronisation"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"FirebaseSyncService"})," : Synchronisation automatique"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"SupabaseSyncService"})," : Oprations CRUD avances"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"AuthContext"})," : Gestion centralise de l'tat"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Realtime"})," : Notifications temps rel"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Tables Supabase"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"user_profiles"})," : Profils utilisateurs"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"user_notifications"})," : Notifications temps rel"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"admin_notifications"})," : Notifications admin"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"verification_requests"})," : Demandes de vrification"]})]})]})]})})]}),s.jsxs(H,{children:[s.jsxs(he,{children:[s.jsx(fe,{className:"flex items-center gap-2",children:" Logs de Synchronisation"}),s.jsx(at,{children:"Surveillez les oprations de synchronisation en temps rel"})]}),s.jsx(K,{children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Les logs de synchronisation apparaissent dans la console du navigateur."}),s.jsxs("div",{className:"bg-black text-green-400 p-3 rounded font-mono text-xs",children:[s.jsx("div",{children:" [AUTH] Dmarrage de la synchronisation Firebase  Supabase"}),s.jsx("div",{children:" [AUTH] Utilisateur Firebase connect: [UID]"}),s.jsx("div",{children:" [AUTH] Synchronisation immdiate Firebase  Supabase..."}),s.jsx("div",{children:" [AUTH] Synchronisation Firebase  Supabase russie: [UID]"}),s.jsx("div",{children:" [AUTH] Profil utilisateur configur: [Nom]"})]})]})})]})]})]})},Is=({children:t})=>{const{currentUser:e}=Ot(),r=Yl();return e?s.jsx(s.Fragment,{children:t}):s.jsx(hR,{to:"/auth\\",state:{from:r},replace:!0})};var zfe={};class Rf{static async getUserVerificationRequest(){try{const e=Et.currentUser;if(!e)throw new Error("Utilisateur non connect");const{data:r,error:n}=await fn.from("verification_requests").select("*").eq("user_id",e.uid).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(n&&n.code!=="PGRST116")throw n;return r||null}catch(e){throw console.error("Erreur lors de la rcupration de la demande:",e),e}}static async createVerificationRequest(e){try{const r=Et.currentUser;if(!r)throw new Error("Utilisateur non connect");let n=[];if(e.documents.length>0)try{n=await this.uploadDocuments(e.documents)}catch(o){console.log("Erreur lors de l'upload des documents, continuation sans documents:",o),n=e.documents.map(l=>`Document simul: ${l.name}`)}const{data:i,error:a}=await fn.from("verification_requests").insert({user_id:r.uid,student_email:e.student_email,student_id:e.student_id||null,university:e.university,documents:n,status:"pending"}).select().single();if(a)throw console.error("Erreur Supabase:",a),new Error(`Erreur lors de la cration: ${a.message}`);try{await fn.from("user_profiles").update({verification_status:"pending",university:e.university}).eq("id",r.uid)}catch{console.log("Table user_profiles non trouve, mise  jour ignore")}return console.log(" Notifications admin temporairement dsactives pour viter les erreurs de contrainte"),i}catch(r){throw console.error("Erreur lors de la cration de la demande:",r),r}}static async uploadDocuments(e){try{const r=Et.currentUser;if(!r)throw new Error("Utilisateur non connect");const n=[];for(const i of e)try{const a=`${r.uid}_${Date.now()}_${i.name}`,o=`${r.uid}/${a}`,{error:l}=await fn.storage.from("verification-documents").upload(o,i);if(l){console.error("Erreur upload document:",l);continue}const{data:c}=fn.storage.from("verification-documents").getPublicUrl(o);c!=null&&c.publicUrl&&n.push(c.publicUrl)}catch(a){console.error("Erreur lors de l'upload du fichier:",a)}return n}catch(r){throw console.error("Erreur lors de l'upload des documents:",r),r}}static isValidDocumentType(e){return["application/pdf","image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)}static async updateVerificationRequest(e,r){try{const n=Et.currentUser;if(!n)throw new Error("Utilisateur non connect");const i={};if(r.student_email&&(i.student_email=r.student_email),r.student_id&&(i.student_id=r.student_id),r.university&&(i.university=r.university),r.documents&&r.documents.length>0){const l=await this.uploadDocuments(r.documents),{data:c}=await fn.from("verification_requests").select("documents").eq("id",e).single(),u=(c==null?void 0:c.documents)||[];i.documents=[...u,...l]}const{data:a,error:o}=await fn.from("verification_requests").update(i).eq("id",e).eq("user_id",n.uid).select().single();if(o)throw o;if(r.university)try{await fn.from("user_profiles").update({university:r.university}).eq("id",n.uid)}catch{console.log("Table user_profiles non trouve, mise  jour ignore")}return a}catch(n){throw console.error("Erreur lors de la mise  jour de la demande:",n),n}}static async deleteVerificationRequest(e){try{const r=Et.currentUser;if(!r)throw new Error("Utilisateur non connect");const{data:n,error:i}=await fn.from("verification_requests").select("status, documents").eq("id",e).eq("user_id",r.uid).single();if(i)throw i;if(n.status!=="pending"&&n.status!=="rejected")throw new Error("Seules les demandes en attente ou rejetes peuvent tre supprimes");if(n.documents&&n.documents.length>0)try{for(const o of n.documents){const l=o.split("/").pop();l&&await fn.storage.from("verification-documents").remove([`${r.uid}/${l}`])}}catch(o){console.log("Erreur lors de la suppression des documents, continuation:",o)}const{error:a}=await fn.from("verification_requests").delete().eq("id",e).eq("user_id",r.uid);if(a)throw a;try{await fn.from("user_profiles").update({verification_status:"unverified",university:null}).eq("id",r.uid)}catch{console.log("Table user_profiles non trouve, mise  jour ignore")}}catch(r){throw console.error("Erreur lors de la suppression de la demande:",r),r}}static async resetRejectedRequest(e){try{const r=Et.currentUser;if(!r)throw new Error("Utilisateur non connect");const{error:n}=await fn.from("verification_requests").update({status:"pending",updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",r.uid);if(n)throw n;try{await fn.from("user_profiles").update({verification_status:"pending"}).eq("id",r.uid)}catch{console.log("Table user_profiles non trouve, mise  jour ignore")}}catch(r){throw console.error("Erreur lors de la rinitialisation de la demande:",r),r}}static getDocumentDownloadUrl(e){return e.startsWith("http")?e:`${zfe.VITE_SUPABASE_URL}/storage/v1/object/public/verification-documents/${e}`}static async getUserVerificationStatus(){try{const e=Et.currentUser;if(!e)throw new Error("Utilisateur non connect");const r=await this.getUserVerificationRequest();if(r)return{status:r.status,request:r};try{console.log(" [VERIF] Tentative de rcupration du profil depuis user_profiles...");const{data:n,error:i}=await fn.from("user_profiles").select("verification_status").eq("id",e.uid).single();if(i)console.warn(" [VERIF] Erreur lors de la rcupration du profil:",i),(i.code==="406"||i.code==="PGRST116")&&console.warn(" [VERIF] Table user_profiles ou colonne verification_status non trouve");else if(n!=null&&n.verification_status)return console.log(" [VERIF] Profil trouv avec statut:",n.verification_status),{status:n.verification_status,request:void 0}}catch(n){console.log(" [VERIF] Table user_profiles non trouve, utilisation du statut par dfaut:",n)}return{status:"unverified",request:void 0}}catch(e){throw console.error("Erreur lors de la vrification du statut:",e),e}}}const Bfe=Object.freeze(Object.defineProperty({__proto__:null,VerificationService:Rf},Symbol.toStringTag,{value:"Module"})),Rp={international:[".edu",".ac.",".ac.uk",".ac.za",".ac.be",".ac.jp",".ac.kr",".ac.in",".ac.au",".ac.nz"],french:[".edu.fr",".ac.fr","univ-","etu.","ens.","ecole","polytechnique","hec","sciencespo","dauphine","centrale","mines","arts-et-metiers","inp","insa","utc","utbm","utt"],sorbonne:[".sorbonne",".sn","sorbonne-nouvelle","sorbonne-universite","paris-sorbonne","pantheon-sorbonne","assas"],test:["@gmail.com","@yahoo.com","@hotmail.com","@outlook.com","@live.com","@icloud.com"]};function qfe(t){const e=t.toLowerCase();return[...Rp.international,...Rp.french,...Rp.sorbonne,...Rp.test].some(n=>e.includes(n))}function Wfe({onSuccess:t,onCancel:e}){const{currentUser:r}=Ot(),[n,i]=p.useState({student_email:"",student_id:"",university:"",documents:[]}),[a,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),h=p.useRef(null);Ce.useEffect(()=>{if(r){const w=Ih.getOrCreateUser(r.uid,r.email||"","");i(E=>({...E,student_email:r.email||"",university:w.university||"Universit Paris 3 Sorbonne Nouvelle"}))}},[r]);const m=["Universit de Paris","Sorbonne Universit","Universit Paris-Saclay","Universit Paris 1 Panthon-Sorbonne","Universit Paris 2 Panthon-Assas","Universit Paris 3 Sorbonne Nouvelle","Universit Paris 4 Sorbonne","Universit Paris 5 Ren Descartes","Universit Paris 6 Pierre et Marie Curie","Universit Paris 7 Denis Diderot","Universit Paris 8 Vincennes-Saint-Denis","Universit Paris 9 Dauphine","Universit Paris 10 Nanterre","Universit Paris 11 Orsay","Universit Paris 12 Val-de-Marne","Universit Paris 13 Nord","cole Normale Suprieure (ENS)","cole Polytechnique","HEC Paris","Sciences Po Paris","CentraleSuplec","Mines ParisTech","Arts et Mtiers ParisTech","Autre universit"],g=(w,E)=>{i(C=>({...C,[w]:E})),c(null)},x=w=>{const E=Array.from(w.target.files||[]);c(null);for(const C of E){if(!Rf.isValidDocumentType(C)){c(`Type de fichier non support: ${C.name}. Formats accepts: PDF, JPG, PNG, WebP`);return}if(C.size>5*1024*1024){c(`Fichier trop volumineux: ${C.name} (max 5MB)`);return}}i(C=>({...C,documents:[...C.documents,...E]}))},y=w=>{i(E=>({...E,documents:E.documents.filter((C,I)=>I!==w)}))},_=()=>n.student_email.trim()?n.university.trim()?qfe(n.student_email)?!0:(c("Veuillez utiliser votre email universitaire officiel"),!1):(c("L'universit est requise"),!1):(c("L'email universitaire est requis"),!1),b=async w=>{if(w.preventDefault(),!!_()){o(!0),c(null);try{await Rf.createVerificationRequest(n),d(!0),t&&t()}catch(E){c(E instanceof Error?E.message:"Une erreur est survenue")}finally{o(!1)}}},v=w=>{if(w===0)return"0 Bytes";const E=1024,C=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(w)/Math.log(E));return parseFloat((w/Math.pow(E,I)).toFixed(2))+" "+C[I]};return u?s.jsx(H,{className:"max-w-2xl mx-auto",children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(lt,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Demande soumise avec succs !"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Votre demande de vrification a t envoye. Notre quipe l'examinera dans les 24-48 heures."}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Eo,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Prochaines tapes :"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsx("li",{children:"Examen de vos documents par notre quipe"}),s.jsx("li",{children:"Vrification de votre email universitaire"}),s.jsx("li",{children:"Notification du rsultat par email"})]})]})]})}),s.jsx(U,{onClick:e,variant:"outline",children:"Retour"})]})})}):s.jsxs(H,{className:"max-w-2xl mx-auto",children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"w-6 h-6"}),"Vrification de votre statut tudiant"]})}),s.jsx(K,{children:s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(tQ,{className:"w-5 h-5"}),"Informations universitaires"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"university",children:"Universit *"}),s.jsxs(ct,{value:n.university,onValueChange:w=>g("university",w),children:[s.jsx(st,{children:s.jsx(ut,{placeholder:"Slectionnez votre universit"})}),s.jsx(it,{children:m.map(w=>s.jsx(re,{value:w,children:w},w))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"student_id",children:"Numro tudiant (optionnel)"}),s.jsx(Ie,{id:"student_id",type:"text",placeholder:"Ex: 2024001",value:n.student_id,onChange:w=>g("student_id",w.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"student_email",children:"Email universitaire *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(Ie,{id:"student_email",type:"email",placeholder:"votre.nom@etu.univ-paris.fr",value:n.student_email,onChange:w=>g("student_email",w.target.value),className:"pl-10"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Utilisez votre email universitaire officiel pour la vrification"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(df,{className:"w-5 h-5"}),"Justificatifs requis"]}),s.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(uv,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez-dposez vos documents ici ou cliquez pour slectionner"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Formats accepts: PDF, JPG, PNG, WebP (max 5MB par fichier)"}),s.jsx(U,{type:"button",variant:"outline",onClick:()=>{var w;return(w=h.current)==null?void 0:w.click()},disabled:a,children:"Slectionner des fichiers"}),s.jsx("input",{ref:h,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:x,className:"hidden"})]})}),n.documents.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ye,{children:["Documents slectionns (",n.documents.length,")"]}),s.jsx("div",{className:"space-y-2",children:n.documents.map((w,E)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(df,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:w.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:v(w.size)})]})]}),s.jsx(U,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(E),disabled:a,children:s.jsx(Fl,{className:"w-4 h-4"})})]},E))})]})]}),s.jsxs(Bt,{children:[s.jsx(sa,{className:"h-4 w-4"}),s.jsxs(qt,{children:[s.jsx("strong",{children:"Important :"})," Vos documents seront traits de manire confidentielle. Seuls les administrateurs de la plateforme y auront accs pour la vrification."]})]}),l&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx(sa,{className:"h-4 w-4"}),s.jsx(qt,{children:l})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[e&&s.jsx(U,{type:"button",variant:"outline",onClick:e,disabled:a,children:"Annuler"}),s.jsx(U,{type:"submit",disabled:a,children:a?"Soumission...":"Soumettre la demande"})]})]})})]})}function Hfe({verificationData:t}){const e=r=>r?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r):"Date inconnue";return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(H,{children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(At,{className:"w-8 h-8 text-yellow-600"})}),s.jsx(fe,{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-200",children:"Vrification en cours"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Votre demande de vrification est en cours d'examen"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(At,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Statut : En attente de validation"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Notre quipe examine votre demande et vos documents"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Dtails de votre demande"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Universit"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numro tudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date de soumission"}),s.jsx("p",{className:"font-medium",children:e(t.verificationSubmittedAt)})]})]})]}),t.verificationDocuments&&t.verificationDocuments.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Documents soumis"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.verificationDocuments.map((r,n)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(lt,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{className:"text-sm font-medium",children:["Document ",n+1]})]},n))})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(qe,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Prochaines tapes"}),s.jsxs("ol",{className:"space-y-1 text-xs list-decimal list-inside",children:[s.jsx("li",{children:"Notre quipe examine vos documents (24-48h)"}),s.jsx("li",{children:"Vrification de votre email universitaire"}),s.jsx("li",{children:"Validation ou demande de documents supplmentaires"}),s.jsx("li",{children:"Notification par email du rsultat"})]}),s.jsxs("p",{className:"mt-2 text-xs",children:[s.jsx("strong",{children:"Dlai moyen :"})," 24-48 heures ouvrables"]})]})]})}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vous recevrez une notification par email ds que votre vrification sera termine."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"En cas de question, contactez notre support  support@boxetu.fr"})]})]})]})})}function Gfe(){return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(H,{children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(lt,{className:"w-8 h-8 text-green-600"})}),s.jsx(fe,{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:"Vrification russie ! "}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Flicitations ! Votre statut tudiant a t vrifi avec succs"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-800 dark:text-green-200",children:"Statut : tudiant vrifi"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Vous avez maintenant accs  toutes les fonctionnalits de BOXETU"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Fonctionnalits maintenant disponibles"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(xa,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Publier des annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendez, donnez ou changez vos biens"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(sn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Accs aux favoris"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sauvegardez vos annonces prfres"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Hb,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Messagerie complte"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Communiquez avec les autres tudiants"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Zi,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Systme de notation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez et donnez des avis"})]})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Prochaines tapes recommandes"}),s.jsxs("ol",{className:"space-y-1 text-xs list-decimal list-inside",children:[s.jsx("li",{children:"Compltez votre profil avec vos informations"}),s.jsx("li",{children:"Ajoutez une photo de profil"}),s.jsx("li",{children:"Explorez les annonces disponibles"}),s.jsx("li",{children:"Publiez votre premire annonce"})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(U,{asChild:!0,className:"flex-1",children:s.jsxs(ve,{to:"/",children:[s.jsx(xa,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})}),s.jsx(U,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(ve,{to:"/create",children:[s.jsx(Hb,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre badge de vrification est maintenant visible sur votre profil."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Merci de faire confiance  BOXETU pour vos changes tudiants !"})]})]})]})})}function Kfe({verificationData:t,onRetry:e}){const[r,n]=p.useState(!1),[i,a]=p.useState(null),o=c=>c?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(c):"Date inconnue",l=async()=>{try{n(!0),a(null),t.requestId&&await Rf.resetRejectedRequest(t.requestId),e()}catch(c){console.error("Erreur lors de la nouvelle tentative:",c),a("Erreur lors de la rinitialisation de la demande. Veuillez ressayer.")}finally{n(!1)}};return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(H,{children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(qn,{className:"w-8 h-8 text-red-600"})}),s.jsx(fe,{className:"text-2xl font-bold text-red-800 dark:text-red-200",children:"Vrification rejete"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Votre demande de vrification n'a pas pu tre valide"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qt,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-800 dark:text-red-200",children:"Statut : Demande rejete"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Nous avons besoin d'informations supplmentaires pour valider votre statut tudiant"})]})]})}),t.rejectionReason&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Raison du rejet"}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm",children:t.rejectionReason})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Dtails de votre demande"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Universit"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numro tudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date de soumission"}),s.jsx("p",{className:"font-medium",children:o(t.verificationSubmittedAt)})]})]})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Solutions recommandes"}),s.jsxs("ul",{className:"space-y-1 text-xs list-disc list-inside",children:[s.jsx("li",{children:"Vrifiez que votre email universitaire est correct et actif"}),s.jsx("li",{children:"Assurez-vous que vos documents sont lisibles et  jour"}),s.jsx("li",{children:"Vrifiez que votre universit est bien reconnue"}),s.jsx("li",{children:"Contactez notre support si vous avez des questions"})]})]})}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(U,{onClick:l,disabled:r,className:"flex-1",children:[s.jsx(Fx,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),r?"Traitement...":"Nouvelle tentative"]}),s.jsxs(U,{variant:"outline",className:"flex-1",children:[s.jsx(Vr,{className:"w-4 h-4 mr-2"}),"Contacter le support"]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(qe,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Besoin d'aide ?"}),s.jsxs("p",{className:"text-xs",children:["Notre quipe support est l pour vous aider. Contactez-nous ",s.jsx("strong",{children:" support@boxetu.fr"})," ou utilisez le chat en ligne."]})]})]})}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vous pouvez soumettre une nouvelle demande de vrification  tout moment."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Assurez-vous de corriger les problmes identifis avant de refaire une demande."})]})]})]})})}function Yfe({verificationData:t}){const e=r=>r?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r):"Date inconnue";return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(H,{children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(lt,{className:"w-8 h-8 text-green-600"})}),s.jsx(fe,{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:"Vrification approuve !"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Flicitations ! Votre statut tudiant a t valid"})]}),s.jsxs(K,{className:"space-y-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-800 dark:text-green-200",children:"Statut : Vrifi et approuv"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Vous avez maintenant accs  toutes les fonctionnalits de BOXETU"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Dtails de votre vrification"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Universit"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numro tudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date d'approbation"}),s.jsx("p",{className:"font-medium",children:e(t.verificationCompletedAt)})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Avantages de votre vrification"}),s.jsxs("ul",{className:"space-y-1 text-xs list-disc list-inside",children:[s.jsx("li",{children:"Accs complet  toutes les fonctionnalits de BOXETU"}),s.jsx("li",{children:"Possibilit de publier des annonces"}),s.jsx("li",{children:"Accs aux messages et contacts"}),s.jsx("li",{children:"Profil vrifi et de confiance"}),s.jsx("li",{children:"Support prioritaire"})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(U,{className:"flex-1 bg-green-600 hover:bg-green-700",children:[s.jsx(_n,{className:"w-4 h-4 mr-2"}),"Commencer  utiliser BOXETU"]}),s.jsxs(U,{variant:"outline",className:"flex-1",children:[s.jsx(rs,{className:"w-4 h-4 mr-2"}),"Tlcharger le certificat"]})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre vrification est valide indfiniment."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"En cas de changement d'universit, contactez notre support pour une mise  jour."})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-950/20 border border-gray-200 dark:border-gray-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Vr,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Besoin d'aide ?"}),s.jsxs("p",{className:"text-xs",children:["Notre quipe support est l pour vous aider. Contactez-nous ",s.jsx("strong",{children:" support@boxetu.fr"}),"."]})]})]})})]})]})})}function Jfe(){const{currentUser:t}=Ot(),[e,r]=p.useState("unverified"),[n,i]=p.useState(null),[a,o]=p.useState(!0),[l,c]=p.useState(!1);p.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{o(!0);const d=await Rf.getUserVerificationStatus();r(d.status),i(d.request||null)}catch(d){console.error("Erreur lors du chargement du statut de vrification:",d)}finally{o(!1)}};if(a)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(K,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("span",{className:"ml-2",children:"Chargement..."})]})})})});if(e==="verified")return s.jsx(Gfe,{});if(e==="approved"&&n){const d={isVerified:!0,verificationStatus:"approved",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationCompletedAt:new Date(n.updated_at||n.created_at),verificationDocuments:n.documents};return s.jsx(Yfe,{verificationData:d})}if(e==="pending"&&n){const d={isVerified:!1,verificationStatus:"pending",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationDocuments:n.documents};return s.jsx(Hfe,{verificationData:d})}if(e==="rejected"&&n){const d={isVerified:!1,verificationStatus:"rejected",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationDocuments:n.documents,requestId:n.id};return s.jsx(Kfe,{verificationData:d,onRetry:()=>c(!0)})}return l?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(Wfe,{onSuccess:()=>{c(!1),u()},onCancel:()=>c(!1)})}):s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsx(H,{className:"mb-8",children:s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:s.jsx(qe,{className:"w-8 h-8 text-primary"})}),s.jsx(fe,{className:"text-2xl font-bold",children:"Vrification tudiante"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Confirmez votre statut d'tudiant pour accder  BOXETU"})]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs(U,{onClick:()=>c(!0),size:"lg",className:"px-8 py-3",children:[s.jsx(ia,{className:"w-5 h-5 mr-2"}),"Commencer la vrification"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Cliquez pour soumettre votre demande de vrification"})]}),s.jsxs(H,{className:"mt-8",children:[s.jsx(he,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"w-5 h-5"}),"Pourquoi vrifier votre statut tudiant ?"]})}),s.jsx(K,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(qe,{className:"w-5 h-5 text-green-600 mt-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Scurit garantie"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Communaut 100% tudiante vrifie pour des changes srs"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Accs complet"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dbloquez toutes les fonctionnalits de BOXETU"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(At,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Processus rapide"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vrification en 24-48h maximum"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(qn,{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Confidentialit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vos documents sont scuriss et confidentiels"})]})]})]})})]})]})}function Xfe(){return s.jsx(m8,{attribute:"class",defaultTheme:"dark",children:s.jsx(WX,{children:s.jsx(HX,{children:s.jsx(o8,{basename:"/StudyMarket",children:s.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[s.jsx(use,{}),s.jsx("main",{className:"pt-16",children:s.jsxs(Z$,{children:[s.jsx(er,{path:"/",element:s.jsx(Eae,{})}),s.jsx(er,{path:"/auth",element:s.jsx(Vle,{})}),s.jsx(er,{path:"/verification",element:s.jsx(Jfe,{})}),s.jsx(er,{path:"/profile",element:s.jsx(Is,{children:s.jsx(rce,{})})}),s.jsx(er,{path:"/listings",element:s.jsx(ice,{})}),s.jsx(er,{path:"/listings/:id",element:s.jsx(Rde,{})}),s.jsx(er,{path:"/create",element:s.jsx(Is,{children:s.jsx(ohe,{})})}),s.jsx(er,{path:"/messages",element:s.jsx(Is,{children:s.jsx(_he,{})})}),s.jsx(er,{path:"/favorites",element:s.jsx(Is,{children:s.jsx(She,{})})}),s.jsx(er,{path:"/saved-searches",element:s.jsx(Is,{children:s.jsx(Rhe,{})})}),s.jsx(er,{path:"/settings",element:s.jsx(Is,{children:s.jsx(Vhe,{})})}),s.jsx(er,{path:"/help",element:s.jsx(afe,{})}),s.jsx(er,{path:"/safety",element:s.jsx(ufe,{})}),s.jsx(er,{path:"/environmental-impact",element:s.jsx(bfe,{})}),s.jsx(er,{path:"/jobs",element:s.jsx(_fe,{})}),s.jsx(er,{path:"/housing/listings",element:s.jsx(Efe,{})}),s.jsx(er,{path:"/housing",element:s.jsx(jfe,{})}),s.jsx(er,{path:"/payments",element:s.jsx(Is,{children:s.jsx(Cfe,{})})}),s.jsx(er,{path:"/admin",element:s.jsx(Is,{children:s.jsx(Pfe,{})})}),s.jsx(er,{path:"/admin/notifications",element:s.jsx(Is,{children:s.jsx(Lfe,{})})}),s.jsx(er,{path:"/notifications",element:s.jsx(Is,{children:s.jsx(zk,{})})}),s.jsx(er,{path:"/notification-test",element:s.jsx(Is,{children:s.jsx(zk,{})})}),s.jsx(er,{path:"/test",element:s.jsx($fe,{})})]})}),s.jsx(dse,{}),s.jsx(_O,{}),s.jsx(wZ,{})]})})})})})}rR(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(Xfe,{})}));
