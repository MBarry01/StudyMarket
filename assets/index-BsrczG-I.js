function GV(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function KV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var qT={exports:{}},Gv={},WT={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm=Symbol.for("react.element"),YV=Symbol.for("react.portal"),QV=Symbol.for("react.fragment"),XV=Symbol.for("react.strict_mode"),JV=Symbol.for("react.profiler"),ZV=Symbol.for("react.provider"),eF=Symbol.for("react.context"),tF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),nF=Symbol.for("react.memo"),sF=Symbol.for("react.lazy"),QS=Symbol.iterator;function iF(t){return t===null||typeof t!="object"?null:(t=QS&&t[QS]||t["@@iterator"],typeof t=="function"?t:null)}var HT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GT=Object.assign,KT={};function Zu(t,e,r){this.props=t,this.context=e,this.refs=KT,this.updater=r||HT}Zu.prototype.isReactComponent={};Zu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YT(){}YT.prototype=Zu.prototype;function Sj(t,e,r){this.props=t,this.context=e,this.refs=KT,this.updater=r||HT}var Ej=Sj.prototype=new YT;Ej.constructor=Sj;GT(Ej,Zu.prototype);Ej.isPureReactComponent=!0;var XS=Array.isArray,QT=Object.prototype.hasOwnProperty,Cj={current:null},XT={key:!0,ref:!0,__self:!0,__source:!0};function JT(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)QT.call(e,n)&&!XT.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Wm,type:t,key:a,ref:o,props:i,_owner:Cj.current}}function aF(t,e){return{$$typeof:Wm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kj(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wm}function oF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var JS=/\/+/g;function By(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oF(""+t.key):e.toString(36)}function zp(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wm:case YV:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+By(o,0):n,XS(i)?(r="",t!=null&&(r=t.replace(JS,"$&/")+"/"),zp(i,e,r,"",function(u){return u})):i!=null&&(kj(i)&&(i=aF(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",XS(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+By(a,l);o+=zp(a,e,r,c,i)}else if(c=iF(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+By(a,l++),o+=zp(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jf(t,e,r){if(t==null)return t;var n=[],i=0;return zp(t,n,"","",function(a){return e.call(r,a,i++)}),n}function lF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},Bp={transition:null},cF={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:Cj};function ZT(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:Jf,forEach:function(t,e,r){Jf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jf(t,function(){e++}),e},toArray:function(t){return Jf(t,function(e){return e})||[]},only:function(t){if(!kj(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=Zu;ft.Fragment=QV;ft.Profiler=JV;ft.PureComponent=Sj;ft.StrictMode=XV;ft.Suspense=rF;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cF;ft.act=ZT;ft.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=GT({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Cj.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)QT.call(e,c)&&!XT.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Wm,type:t.type,key:i,ref:a,props:n,_owner:o}};ft.createContext=function(t){return t={$$typeof:eF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZV,_context:t},t.Consumer=t};ft.createElement=JT;ft.createFactory=function(t){var e=JT.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:tF,render:t}};ft.isValidElement=kj;ft.lazy=function(t){return{$$typeof:sF,_payload:{_status:-1,_result:t},_init:lF}};ft.memo=function(t,e){return{$$typeof:nF,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=Bp.transition;Bp.transition={};try{t()}finally{Bp.transition=e}};ft.unstable_act=ZT;ft.useCallback=function(t,e){return Tn.current.useCallback(t,e)};ft.useContext=function(t){return Tn.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};ft.useEffect=function(t,e){return Tn.current.useEffect(t,e)};ft.useId=function(){return Tn.current.useId()};ft.useImperativeHandle=function(t,e,r){return Tn.current.useImperativeHandle(t,e,r)};ft.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return Tn.current.useMemo(t,e)};ft.useReducer=function(t,e,r){return Tn.current.useReducer(t,e,r)};ft.useRef=function(t){return Tn.current.useRef(t)};ft.useState=function(t){return Tn.current.useState(t)};ft.useSyncExternalStore=function(t,e,r){return Tn.current.useSyncExternalStore(t,e,r)};ft.useTransition=function(){return Tn.current.useTransition()};ft.version="18.3.1";WT.exports=ft;var p=WT.exports;const ke=Hv(p),eI=GV({__proto__:null,default:ke},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uF=p,dF=Symbol.for("react.element"),hF=Symbol.for("react.fragment"),mF=Object.prototype.hasOwnProperty,fF=uF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pF={key:!0,ref:!0,__self:!0,__source:!0};function tI(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)mF.call(e,n)&&!pF.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:dF,type:t,key:a,ref:o,props:i,_owner:fF.current}}Gv.Fragment=hF;Gv.jsx=tI;Gv.jsxs=tI;qT.exports=Gv;var s=qT.exports,rI={exports:{}},ms={},nI={exports:{}},sI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var z=L.length;L.push(W);e:for(;0<z;){var J=z-1>>>1,oe=L[J];if(0<i(oe,W))L[J]=W,L[z]=oe,z=J;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var W=L[0],z=L.pop();if(z!==W){L[0]=z;e:for(var J=0,oe=L.length,Ce=oe>>>1;J<Ce;){var tt=2*(J+1)-1,vt=L[tt],ct=tt+1,Ne=L[ct];if(0>i(vt,z))ct<oe&&0>i(Ne,vt)?(L[J]=Ne,L[ct]=z,J=ct):(L[J]=vt,L[tt]=z,J=tt);else if(ct<oe&&0>i(Ne,z))L[J]=Ne,L[ct]=z,J=ct;else break e}}return W}function i(L,W){var z=L.sortIndex-W.sortIndex;return z!==0?z:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,g=!1,v=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=L)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function N(L){if(y=!1,b(L),!v)if(r(c)!==null)v=!0,H(C);else{var W=r(u);W!==null&&$(N,W.startTime-L)}}function C(L,W){v=!1,y&&(y=!1,w(k),k=-1),g=!0;var z=m;try{for(b(W),h=r(c);h!==null&&(!(h.expirationTime>W)||L&&!A());){var J=h.callback;if(typeof J=="function"){h.callback=null,m=h.priorityLevel;var oe=J(h.expirationTime<=W);W=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(c)&&n(c),b(W)}else n(c);h=r(c)}if(h!==null)var Ce=!0;else{var tt=r(u);tt!==null&&$(N,tt.startTime-W),Ce=!1}return Ce}finally{h=null,m=z,g=!1}}var P=!1,T=null,k=-1,D=5,E=-1;function A(){return!(t.unstable_now()-E<D)}function R(){if(T!==null){var L=t.unstable_now();E=L;var W=!0;try{W=T(!0,L)}finally{W?S():(P=!1,T=null)}}else P=!1}var S;if(typeof x=="function")S=function(){x(R)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=R,S=function(){U.postMessage(null)}}else S=function(){j(R,0)};function H(L){T=L,P||(P=!0,S())}function $(L,W){k=j(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,H(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var z=m;m=W;try{return L()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return W()}finally{m=z}},t.unstable_scheduleCallback=function(L,W,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=z+oe,L={id:d++,callback:W,priorityLevel:L,startTime:z,expirationTime:oe,sortIndex:-1},z>J?(L.sortIndex=z,e(u,L),r(c)===null&&L===r(u)&&(y?(w(k),k=-1):y=!0,$(N,z-J))):(L.sortIndex=oe,e(c,L),v||g||(v=!0,H(C))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var W=m;return function(){var z=m;m=W;try{return L.apply(this,arguments)}finally{m=z}}}})(sI);nI.exports=sI;var gF=nI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vF=p,ds=gF;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iI=new Set,Uh={};function nc(t,e){Su(t,e),Su(t+"Capture",e)}function Su(t,e){for(Uh[t]=e,t=0;t<e.length;t++)iI.add(e[t])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fw=Object.prototype.hasOwnProperty,xF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZS={},eE={};function yF(t){return fw.call(eE,t)?!0:fw.call(ZS,t)?!1:xF.test(t)?eE[t]=!0:(ZS[t]=!0,!1)}function wF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bF(t,e,r,n){if(e===null||typeof e>"u"||wF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xr[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xr[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xr[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xr[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xr[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xr[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xr[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xr[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xr[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tj=/[\-:]([a-z])/g;function Ij(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tj,Ij);Xr[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tj,Ij);Xr[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tj,Ij);Xr[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xr[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xr[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function Aj(t,e,r,n){var i=Xr.hasOwnProperty(e)?Xr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bF(e,r,i,n)&&(r=null),n||i===null?yF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ka=vF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zf=Symbol.for("react.element"),Bc=Symbol.for("react.portal"),qc=Symbol.for("react.fragment"),Pj=Symbol.for("react.strict_mode"),pw=Symbol.for("react.profiler"),aI=Symbol.for("react.provider"),oI=Symbol.for("react.context"),Rj=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),vw=Symbol.for("react.suspense_list"),Dj=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),lI=Symbol.for("react.offscreen"),tE=Symbol.iterator;function Ld(t){return t===null||typeof t!="object"?null:(t=tE&&t[tE]||t["@@iterator"],typeof t=="function"?t:null)}var lr=Object.assign,qy;function eh(t){if(qy===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);qy=e&&e[1]||""}return`
`+qy+t}var Wy=!1;function Hy(t,e){if(!t||Wy)return"";Wy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Wy=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?eh(t):""}function jF(t){switch(t.tag){case 5:return eh(t.type);case 16:return eh("Lazy");case 13:return eh("Suspense");case 19:return eh("SuspenseList");case 0:case 2:case 15:return t=Hy(t.type,!1),t;case 11:return t=Hy(t.type.render,!1),t;case 1:return t=Hy(t.type,!0),t;default:return""}}function xw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qc:return"Fragment";case Bc:return"Portal";case pw:return"Profiler";case Pj:return"StrictMode";case gw:return"Suspense";case vw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oI:return(t.displayName||"Context")+".Consumer";case aI:return(t._context.displayName||"Context")+".Provider";case Rj:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dj:return e=t.displayName||null,e!==null?e:xw(t.type)||"Memo";case Ba:e=t._payload,t=t._init;try{return xw(t(e))}catch{}}return null}function _F(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xw(e);case 8:return e===Pj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NF(t){var e=cI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ep(t){t._valueTracker||(t._valueTracker=NF(t))}function uI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=cI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function wg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yw(t,e){var r=e.checked;return lr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function rE(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=bo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dI(t,e){e=e.checked,e!=null&&Aj(t,"checked",e,!1)}function ww(t,e){dI(t,e);var r=bo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bw(t,e.type,r):e.hasOwnProperty("defaultValue")&&bw(t,e.type,bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nE(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function bw(t,e,r){(e!=="number"||wg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var th=Array.isArray;function iu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+bo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return lr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sE(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ue(92));if(th(r)){if(1<r.length)throw Error(ue(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:bo(r)}}function hI(t,e){var r=bo(e.value),n=bo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function iE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _w(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tp,fI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tp=tp||document.createElement("div"),tp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zh(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SF=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(t){SF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ph[e]=ph[t]})});function pI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ph.hasOwnProperty(t)&&ph[t]?(""+e).trim():e+"px"}function gI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=pI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var EF=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nw(t,e){if(e){if(EF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function Sw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ew=null;function Mj(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cw=null,au=null,ou=null;function aE(t){if(t=Km(t)){if(typeof Cw!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=Jv(e),Cw(t.stateNode,t.type,e))}}function vI(t){au?ou?ou.push(t):ou=[t]:au=t}function xI(){if(au){var t=au,e=ou;if(ou=au=null,aE(t),e)for(t=0;t<e.length;t++)aE(e[t])}}function yI(t,e){return t(e)}function wI(){}var Gy=!1;function bI(t,e,r){if(Gy)return t(e,r);Gy=!0;try{return yI(t,e,r)}finally{Gy=!1,(au!==null||ou!==null)&&(wI(),xI())}}function Bh(t,e){var r=t.stateNode;if(r===null)return null;var n=Jv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ue(231,e,typeof r));return r}var kw=!1;if(ha)try{var Vd={};Object.defineProperty(Vd,"passive",{get:function(){kw=!0}}),window.addEventListener("test",Vd,Vd),window.removeEventListener("test",Vd,Vd)}catch{kw=!1}function CF(t,e,r,n,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var gh=!1,bg=null,jg=!1,Tw=null,kF={onError:function(t){gh=!0,bg=t}};function TF(t,e,r,n,i,a,o,l,c){gh=!1,bg=null,CF.apply(kF,arguments)}function IF(t,e,r,n,i,a,o,l,c){if(TF.apply(this,arguments),gh){if(gh){var u=bg;gh=!1,bg=null}else throw Error(ue(198));jg||(jg=!0,Tw=u)}}function sc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function jI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oE(t){if(sc(t)!==t)throw Error(ue(188))}function AF(t){var e=t.alternate;if(!e){if(e=sc(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return oE(i),t;if(a===n)return oE(i),e;a=a.sibling}throw Error(ue(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?t:e}function _I(t){return t=AF(t),t!==null?NI(t):null}function NI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NI(t);if(e!==null)return e;t=t.sibling}return null}var SI=ds.unstable_scheduleCallback,lE=ds.unstable_cancelCallback,PF=ds.unstable_shouldYield,RF=ds.unstable_requestPaint,vr=ds.unstable_now,DF=ds.unstable_getCurrentPriorityLevel,Oj=ds.unstable_ImmediatePriority,EI=ds.unstable_UserBlockingPriority,_g=ds.unstable_NormalPriority,MF=ds.unstable_LowPriority,CI=ds.unstable_IdlePriority,Kv=null,wi=null;function OF(t){if(wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(Kv,t,void 0,(t.current.flags&128)===128)}catch{}}var Hs=Math.clz32?Math.clz32:FF,LF=Math.log,VF=Math.LN2;function FF(t){return t>>>=0,t===0?32:31-(LF(t)/VF|0)|0}var rp=64,np=4194304;function rh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ng(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=rh(l):(a&=o,a!==0&&(n=rh(a)))}else o=r&~i,o!==0?n=rh(o):a!==0&&(n=rh(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Hs(e),i=1<<r,n|=t[r],e&=~i;return n}function $F(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UF(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Hs(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=$F(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Iw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kI(){var t=rp;return rp<<=1,!(rp&4194240)&&(rp=64),t}function Ky(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hm(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hs(e),t[e]=r}function zF(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Hs(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function Lj(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Hs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Rt=0;function TI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var II,Vj,AI,PI,RI,Aw=!1,sp=[],ao=null,oo=null,lo=null,qh=new Map,Wh=new Map,Ha=[],BF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cE(t,e){switch(t){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":qh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wh.delete(e.pointerId)}}function Fd(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Km(e),e!==null&&Vj(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qF(t,e,r,n,i){switch(e){case"focusin":return ao=Fd(ao,t,e,r,n,i),!0;case"dragenter":return oo=Fd(oo,t,e,r,n,i),!0;case"mouseover":return lo=Fd(lo,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return qh.set(a,Fd(qh.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Wh.set(a,Fd(Wh.get(a)||null,t,e,r,n,i)),!0}return!1}function DI(t){var e=pl(t.target);if(e!==null){var r=sc(e);if(r!==null){if(e=r.tag,e===13){if(e=jI(r),e!==null){t.blockedOn=e,RI(t.priority,function(){AI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Pw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ew=n,r.target.dispatchEvent(n),Ew=null}else return e=Km(r),e!==null&&Vj(e),t.blockedOn=r,!1;e.shift()}return!0}function uE(t,e,r){qp(t)&&r.delete(e)}function WF(){Aw=!1,ao!==null&&qp(ao)&&(ao=null),oo!==null&&qp(oo)&&(oo=null),lo!==null&&qp(lo)&&(lo=null),qh.forEach(uE),Wh.forEach(uE)}function $d(t,e){t.blockedOn===e&&(t.blockedOn=null,Aw||(Aw=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,WF)))}function Hh(t){function e(i){return $d(i,t)}if(0<sp.length){$d(sp[0],t);for(var r=1;r<sp.length;r++){var n=sp[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ao!==null&&$d(ao,t),oo!==null&&$d(oo,t),lo!==null&&$d(lo,t),qh.forEach(e),Wh.forEach(e),r=0;r<Ha.length;r++)n=Ha[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ha.length&&(r=Ha[0],r.blockedOn===null);)DI(r),r.blockedOn===null&&Ha.shift()}var lu=ka.ReactCurrentBatchConfig,Sg=!0;function HF(t,e,r,n){var i=Rt,a=lu.transition;lu.transition=null;try{Rt=1,Fj(t,e,r,n)}finally{Rt=i,lu.transition=a}}function GF(t,e,r,n){var i=Rt,a=lu.transition;lu.transition=null;try{Rt=4,Fj(t,e,r,n)}finally{Rt=i,lu.transition=a}}function Fj(t,e,r,n){if(Sg){var i=Pw(t,e,r,n);if(i===null)s0(t,e,n,Eg,r),cE(t,n);else if(qF(i,t,e,r,n))n.stopPropagation();else if(cE(t,n),e&4&&-1<BF.indexOf(t)){for(;i!==null;){var a=Km(i);if(a!==null&&II(a),a=Pw(t,e,r,n),a===null&&s0(t,e,n,Eg,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else s0(t,e,n,null,r)}}var Eg=null;function Pw(t,e,r,n){if(Eg=null,t=Mj(n),t=pl(t),t!==null)if(e=sc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=jI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eg=t,null}function MI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DF()){case Oj:return 1;case EI:return 4;case _g:case MF:return 16;case CI:return 536870912;default:return 16}default:return 16}}var ro=null,$j=null,Wp=null;function OI(){if(Wp)return Wp;var t,e=$j,r=e.length,n,i="value"in ro?ro.value:ro.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Wp=i.slice(t,1<n?1-n:void 0)}function Hp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ip(){return!0}function dE(){return!1}function fs(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ip:dE,this.isPropagationStopped=dE,this}return lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ip)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ip)},persist:function(){},isPersistent:ip}),e}var ed={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uj=fs(ed),Gm=lr({},ed,{view:0,detail:0}),KF=fs(Gm),Yy,Qy,Ud,Yv=lr({},Gm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zj,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ud&&(Ud&&t.type==="mousemove"?(Yy=t.screenX-Ud.screenX,Qy=t.screenY-Ud.screenY):Qy=Yy=0,Ud=t),Yy)},movementY:function(t){return"movementY"in t?t.movementY:Qy}}),hE=fs(Yv),YF=lr({},Yv,{dataTransfer:0}),QF=fs(YF),XF=lr({},Gm,{relatedTarget:0}),Xy=fs(XF),JF=lr({},ed,{animationName:0,elapsedTime:0,pseudoElement:0}),ZF=fs(JF),e8=lr({},ed,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t8=fs(e8),r8=lr({},ed,{data:0}),mE=fs(r8),n8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=i8[t])?!!e[t]:!1}function zj(){return a8}var o8=lr({},Gm,{key:function(t){if(t.key){var e=n8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zj,charCode:function(t){return t.type==="keypress"?Hp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l8=fs(o8),c8=lr({},Yv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fE=fs(c8),u8=lr({},Gm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zj}),d8=fs(u8),h8=lr({},ed,{propertyName:0,elapsedTime:0,pseudoElement:0}),m8=fs(h8),f8=lr({},Yv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p8=fs(f8),g8=[9,13,27,32],Bj=ha&&"CompositionEvent"in window,vh=null;ha&&"documentMode"in document&&(vh=document.documentMode);var v8=ha&&"TextEvent"in window&&!vh,LI=ha&&(!Bj||vh&&8<vh&&11>=vh),pE=" ",gE=!1;function VI(t,e){switch(t){case"keyup":return g8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wc=!1;function x8(t,e){switch(t){case"compositionend":return FI(e);case"keypress":return e.which!==32?null:(gE=!0,pE);case"textInput":return t=e.data,t===pE&&gE?null:t;default:return null}}function y8(t,e){if(Wc)return t==="compositionend"||!Bj&&VI(t,e)?(t=OI(),Wp=$j=ro=null,Wc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LI&&e.locale!=="ko"?null:e.data;default:return null}}var w8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w8[t.type]:e==="textarea"}function $I(t,e,r,n){vI(n),e=Cg(e,"onChange"),0<e.length&&(r=new Uj("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xh=null,Gh=null;function b8(t){XI(t,0)}function Qv(t){var e=Kc(t);if(uI(e))return t}function j8(t,e){if(t==="change")return e}var UI=!1;if(ha){var Jy;if(ha){var Zy="oninput"in document;if(!Zy){var xE=document.createElement("div");xE.setAttribute("oninput","return;"),Zy=typeof xE.oninput=="function"}Jy=Zy}else Jy=!1;UI=Jy&&(!document.documentMode||9<document.documentMode)}function yE(){xh&&(xh.detachEvent("onpropertychange",zI),Gh=xh=null)}function zI(t){if(t.propertyName==="value"&&Qv(Gh)){var e=[];$I(e,Gh,t,Mj(t)),bI(b8,e)}}function _8(t,e,r){t==="focusin"?(yE(),xh=e,Gh=r,xh.attachEvent("onpropertychange",zI)):t==="focusout"&&yE()}function N8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qv(Gh)}function S8(t,e){if(t==="click")return Qv(e)}function E8(t,e){if(t==="input"||t==="change")return Qv(e)}function C8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xs=typeof Object.is=="function"?Object.is:C8;function Kh(t,e){if(Xs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!fw.call(e,i)||!Xs(t[i],e[i]))return!1}return!0}function wE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bE(t,e){var r=wE(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wE(r)}}function BI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qI(){for(var t=window,e=wg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=wg(t.document)}return e}function qj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k8(t){var e=qI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&BI(r.ownerDocument.documentElement,r)){if(n!==null&&qj(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=bE(r,a);var o=bE(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T8=ha&&"documentMode"in document&&11>=document.documentMode,Hc=null,Rw=null,yh=null,Dw=!1;function jE(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Dw||Hc==null||Hc!==wg(n)||(n=Hc,"selectionStart"in n&&qj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yh&&Kh(yh,n)||(yh=n,n=Cg(Rw,"onSelect"),0<n.length&&(e=new Uj("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Hc)))}function ap(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Gc={animationend:ap("Animation","AnimationEnd"),animationiteration:ap("Animation","AnimationIteration"),animationstart:ap("Animation","AnimationStart"),transitionend:ap("Transition","TransitionEnd")},e0={},WI={};ha&&(WI=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Xv(t){if(e0[t])return e0[t];if(!Gc[t])return t;var e=Gc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in WI)return e0[t]=e[r];return t}var HI=Xv("animationend"),GI=Xv("animationiteration"),KI=Xv("animationstart"),YI=Xv("transitionend"),QI=new Map,_E="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(t,e){QI.set(t,e),nc(e,[t])}for(var t0=0;t0<_E.length;t0++){var r0=_E[t0],I8=r0.toLowerCase(),A8=r0[0].toUpperCase()+r0.slice(1);Lo(I8,"on"+A8)}Lo(HI,"onAnimationEnd");Lo(GI,"onAnimationIteration");Lo(KI,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(YI,"onTransitionEnd");Su("onMouseEnter",["mouseout","mouseover"]);Su("onMouseLeave",["mouseout","mouseover"]);Su("onPointerEnter",["pointerout","pointerover"]);Su("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P8=new Set("cancel close invalid load scroll toggle".split(" ").concat(nh));function NE(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,IF(n,e,void 0,t),t.currentTarget=null}function XI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;NE(i,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;NE(i,l,u),a=c}}}if(jg)throw t=Tw,jg=!1,Tw=null,t}function Jt(t,e){var r=e[Fw];r===void 0&&(r=e[Fw]=new Set);var n=t+"__bubble";r.has(n)||(JI(e,t,2,!1),r.add(n))}function n0(t,e,r){var n=0;e&&(n|=4),JI(r,t,n,e)}var op="_reactListening"+Math.random().toString(36).slice(2);function Yh(t){if(!t[op]){t[op]=!0,iI.forEach(function(r){r!=="selectionchange"&&(P8.has(r)||n0(r,!1,t),n0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[op]||(e[op]=!0,n0("selectionchange",!1,e))}}function JI(t,e,r,n){switch(MI(e)){case 1:var i=HF;break;case 4:i=GF;break;default:i=Fj}r=i.bind(null,e,r,t),i=void 0,!kw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function s0(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=pl(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}bI(function(){var u=a,d=Mj(r),h=[];e:{var m=QI.get(t);if(m!==void 0){var g=Uj,v=t;switch(t){case"keypress":if(Hp(r)===0)break e;case"keydown":case"keyup":g=l8;break;case"focusin":v="focus",g=Xy;break;case"focusout":v="blur",g=Xy;break;case"beforeblur":case"afterblur":g=Xy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=QF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=d8;break;case HI:case GI:case KI:g=ZF;break;case YI:g=m8;break;case"scroll":g=KF;break;case"wheel":g=p8;break;case"copy":case"cut":case"paste":g=t8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=fE}var y=(e&4)!==0,j=!y&&t==="scroll",w=y?m!==null?m+"Capture":null:m;y=[];for(var x=u,b;x!==null;){b=x;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,w!==null&&(N=Bh(x,w),N!=null&&y.push(Qh(x,N,b)))),j)break;x=x.return}0<y.length&&(m=new g(m,v,null,r,d),h.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==Ew&&(v=r.relatedTarget||r.fromElement)&&(pl(v)||v[ma]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=u,v=v?pl(v):null,v!==null&&(j=sc(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=hE,N="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=fE,N="onPointerLeave",w="onPointerEnter",x="pointer"),j=g==null?m:Kc(g),b=v==null?m:Kc(v),m=new y(N,x+"leave",g,r,d),m.target=j,m.relatedTarget=b,N=null,pl(d)===u&&(y=new y(w,x+"enter",v,r,d),y.target=b,y.relatedTarget=j,N=y),j=N,g&&v)t:{for(y=g,w=v,x=0,b=y;b;b=Sc(b))x++;for(b=0,N=w;N;N=Sc(N))b++;for(;0<x-b;)y=Sc(y),x--;for(;0<b-x;)w=Sc(w),b--;for(;x--;){if(y===w||w!==null&&y===w.alternate)break t;y=Sc(y),w=Sc(w)}y=null}else y=null;g!==null&&SE(h,m,g,y,!1),v!==null&&j!==null&&SE(h,j,v,y,!0)}}e:{if(m=u?Kc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var C=j8;else if(vE(m))if(UI)C=E8;else{C=N8;var P=_8}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=S8);if(C&&(C=C(t,u))){$I(h,C,r,d);break e}P&&P(t,m,u),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&bw(m,"number",m.value)}switch(P=u?Kc(u):window,t){case"focusin":(vE(P)||P.contentEditable==="true")&&(Hc=P,Rw=u,yh=null);break;case"focusout":yh=Rw=Hc=null;break;case"mousedown":Dw=!0;break;case"contextmenu":case"mouseup":case"dragend":Dw=!1,jE(h,r,d);break;case"selectionchange":if(T8)break;case"keydown":case"keyup":jE(h,r,d)}var T;if(Bj)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wc?VI(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(LI&&r.locale!=="ko"&&(Wc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Wc&&(T=OI()):(ro=d,$j="value"in ro?ro.value:ro.textContent,Wc=!0)),P=Cg(u,k),0<P.length&&(k=new mE(k,t,null,r,d),h.push({event:k,listeners:P}),T?k.data=T:(T=FI(r),T!==null&&(k.data=T)))),(T=v8?x8(t,r):y8(t,r))&&(u=Cg(u,"onBeforeInput"),0<u.length&&(d=new mE("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=T))}XI(h,e)})}function Qh(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Cg(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Bh(t,r),a!=null&&n.unshift(Qh(t,a,i)),a=Bh(t,e),a!=null&&n.push(Qh(t,a,i))),t=t.return}return n}function Sc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SE(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=Bh(r,a),c!=null&&o.unshift(Qh(r,c,l))):i||(c=Bh(r,a),c!=null&&o.push(Qh(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var R8=/\r\n?/g,D8=/\u0000|\uFFFD/g;function EE(t){return(typeof t=="string"?t:""+t).replace(R8,`
`).replace(D8,"")}function lp(t,e,r){if(e=EE(e),EE(t)!==e&&r)throw Error(ue(425))}function kg(){}var Mw=null,Ow=null;function Lw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vw=typeof setTimeout=="function"?setTimeout:void 0,M8=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,O8=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(t){return CE.resolve(null).then(t).catch(L8)}:Vw;function L8(t){setTimeout(function(){throw t})}function i0(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Hh(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Hh(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var td=Math.random().toString(36).slice(2),di="__reactFiber$"+td,Xh="__reactProps$"+td,ma="__reactContainer$"+td,Fw="__reactEvents$"+td,V8="__reactListeners$"+td,F8="__reactHandles$"+td;function pl(t){var e=t[di];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ma]||r[di]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=kE(t);t!==null;){if(r=t[di])return r;t=kE(t)}return e}t=r,r=t.parentNode}return null}function Km(t){return t=t[di]||t[ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function Jv(t){return t[Xh]||null}var $w=[],Yc=-1;function Vo(t){return{current:t}}function er(t){0>Yc||(t.current=$w[Yc],$w[Yc]=null,Yc--)}function qt(t,e){Yc++,$w[Yc]=t.current,t.current=e}var jo={},hn=Vo(jo),Bn=Vo(!1),Pl=jo;function Eu(t,e){var r=t.type.contextTypes;if(!r)return jo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qn(t){return t=t.childContextTypes,t!=null}function Tg(){er(Bn),er(hn)}function TE(t,e,r){if(hn.current!==jo)throw Error(ue(168));qt(hn,e),qt(Bn,r)}function ZI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ue(108,_F(t)||"Unknown",i));return lr({},r,n)}function Ig(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jo,Pl=hn.current,qt(hn,t),qt(Bn,Bn.current),!0}function IE(t,e,r){var n=t.stateNode;if(!n)throw Error(ue(169));r?(t=ZI(t,e,Pl),n.__reactInternalMemoizedMergedChildContext=t,er(Bn),er(hn),qt(hn,t)):er(Bn),qt(Bn,r)}var Ki=null,Zv=!1,a0=!1;function eA(t){Ki===null?Ki=[t]:Ki.push(t)}function $8(t){Zv=!0,eA(t)}function Fo(){if(!a0&&Ki!==null){a0=!0;var t=0,e=Rt;try{var r=Ki;for(Rt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ki=null,Zv=!1}catch(i){throw Ki!==null&&(Ki=Ki.slice(t+1)),SI(Oj,Fo),i}finally{Rt=e,a0=!1}}return null}var Qc=[],Xc=0,Ag=null,Pg=0,xs=[],ys=0,Rl=null,Xi=1,Ji="";function cl(t,e){Qc[Xc++]=Pg,Qc[Xc++]=Ag,Ag=t,Pg=e}function tA(t,e,r){xs[ys++]=Xi,xs[ys++]=Ji,xs[ys++]=Rl,Rl=t;var n=Xi;t=Ji;var i=32-Hs(n)-1;n&=~(1<<i),r+=1;var a=32-Hs(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Xi=1<<32-Hs(e)+i|r<<i|n,Ji=a+t}else Xi=1<<a|r<<i|n,Ji=t}function Wj(t){t.return!==null&&(cl(t,1),tA(t,1,0))}function Hj(t){for(;t===Ag;)Ag=Qc[--Xc],Qc[Xc]=null,Pg=Qc[--Xc],Qc[Xc]=null;for(;t===Rl;)Rl=xs[--ys],xs[ys]=null,Ji=xs[--ys],xs[ys]=null,Xi=xs[--ys],xs[ys]=null}var as=null,rs=null,nr=!1,Bs=null;function rA(t,e){var r=bs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function AE(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,as=t,rs=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,as=t,rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Rl!==null?{id:Xi,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,as=t,rs=null,!0):!1;default:return!1}}function Uw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zw(t){if(nr){var e=rs;if(e){var r=e;if(!AE(t,e)){if(Uw(t))throw Error(ue(418));e=co(r.nextSibling);var n=as;e&&AE(t,e)?rA(n,r):(t.flags=t.flags&-4097|2,nr=!1,as=t)}}else{if(Uw(t))throw Error(ue(418));t.flags=t.flags&-4097|2,nr=!1,as=t}}}function PE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;as=t}function cp(t){if(t!==as)return!1;if(!nr)return PE(t),nr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lw(t.type,t.memoizedProps)),e&&(e=rs)){if(Uw(t))throw nA(),Error(ue(418));for(;e;)rA(t,e),e=co(e.nextSibling)}if(PE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){rs=co(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}rs=null}}else rs=as?co(t.stateNode.nextSibling):null;return!0}function nA(){for(var t=rs;t;)t=co(t.nextSibling)}function Cu(){rs=as=null,nr=!1}function Gj(t){Bs===null?Bs=[t]:Bs.push(t)}var U8=ka.ReactCurrentBatchConfig;function zd(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,t))}return t}function up(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RE(t){var e=t._init;return e(t._payload)}function sA(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function r(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function n(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=fo(w,x),w.index=0,w.sibling=null,w}function a(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,b,N){return x===null||x.tag!==6?(x=m0(b,w.mode,N),x.return=w,x):(x=i(x,b),x.return=w,x)}function c(w,x,b,N){var C=b.type;return C===qc?d(w,x,b.props.children,N,b.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ba&&RE(C)===x.type)?(N=i(x,b.props),N.ref=zd(w,x,b),N.return=w,N):(N=Zp(b.type,b.key,b.props,null,w.mode,N),N.ref=zd(w,x,b),N.return=w,N)}function u(w,x,b,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=f0(b,w.mode,N),x.return=w,x):(x=i(x,b.children||[]),x.return=w,x)}function d(w,x,b,N,C){return x===null||x.tag!==7?(x=_l(b,w.mode,N,C),x.return=w,x):(x=i(x,b),x.return=w,x)}function h(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=m0(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zf:return b=Zp(x.type,x.key,x.props,null,w.mode,b),b.ref=zd(w,null,x),b.return=w,b;case Bc:return x=f0(x,w.mode,b),x.return=w,x;case Ba:var N=x._init;return h(w,N(x._payload),b)}if(th(x)||Ld(x))return x=_l(x,w.mode,b,null),x.return=w,x;up(w,x)}return null}function m(w,x,b,N){var C=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:l(w,x,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zf:return b.key===C?c(w,x,b,N):null;case Bc:return b.key===C?u(w,x,b,N):null;case Ba:return C=b._init,m(w,x,C(b._payload),N)}if(th(b)||Ld(b))return C!==null?null:d(w,x,b,N,null);up(w,b)}return null}function g(w,x,b,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(b)||null,l(x,w,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Zf:return w=w.get(N.key===null?b:N.key)||null,c(x,w,N,C);case Bc:return w=w.get(N.key===null?b:N.key)||null,u(x,w,N,C);case Ba:var P=N._init;return g(w,x,b,P(N._payload),C)}if(th(N)||Ld(N))return w=w.get(b)||null,d(x,w,N,C,null);up(x,N)}return null}function v(w,x,b,N){for(var C=null,P=null,T=x,k=x=0,D=null;T!==null&&k<b.length;k++){T.index>k?(D=T,T=null):D=T.sibling;var E=m(w,T,b[k],N);if(E===null){T===null&&(T=D);break}t&&T&&E.alternate===null&&e(w,T),x=a(E,x,k),P===null?C=E:P.sibling=E,P=E,T=D}if(k===b.length)return r(w,T),nr&&cl(w,k),C;if(T===null){for(;k<b.length;k++)T=h(w,b[k],N),T!==null&&(x=a(T,x,k),P===null?C=T:P.sibling=T,P=T);return nr&&cl(w,k),C}for(T=n(w,T);k<b.length;k++)D=g(T,w,k,b[k],N),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?k:D.key),x=a(D,x,k),P===null?C=D:P.sibling=D,P=D);return t&&T.forEach(function(A){return e(w,A)}),nr&&cl(w,k),C}function y(w,x,b,N){var C=Ld(b);if(typeof C!="function")throw Error(ue(150));if(b=C.call(b),b==null)throw Error(ue(151));for(var P=C=null,T=x,k=x=0,D=null,E=b.next();T!==null&&!E.done;k++,E=b.next()){T.index>k?(D=T,T=null):D=T.sibling;var A=m(w,T,E.value,N);if(A===null){T===null&&(T=D);break}t&&T&&A.alternate===null&&e(w,T),x=a(A,x,k),P===null?C=A:P.sibling=A,P=A,T=D}if(E.done)return r(w,T),nr&&cl(w,k),C;if(T===null){for(;!E.done;k++,E=b.next())E=h(w,E.value,N),E!==null&&(x=a(E,x,k),P===null?C=E:P.sibling=E,P=E);return nr&&cl(w,k),C}for(T=n(w,T);!E.done;k++,E=b.next())E=g(T,w,k,E.value,N),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?k:E.key),x=a(E,x,k),P===null?C=E:P.sibling=E,P=E);return t&&T.forEach(function(R){return e(w,R)}),nr&&cl(w,k),C}function j(w,x,b,N){if(typeof b=="object"&&b!==null&&b.type===qc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zf:e:{for(var C=b.key,P=x;P!==null;){if(P.key===C){if(C=b.type,C===qc){if(P.tag===7){r(w,P.sibling),x=i(P,b.props.children),x.return=w,w=x;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ba&&RE(C)===P.type){r(w,P.sibling),x=i(P,b.props),x.ref=zd(w,P,b),x.return=w,w=x;break e}r(w,P);break}else e(w,P);P=P.sibling}b.type===qc?(x=_l(b.props.children,w.mode,N,b.key),x.return=w,w=x):(N=Zp(b.type,b.key,b.props,null,w.mode,N),N.ref=zd(w,x,b),N.return=w,w=N)}return o(w);case Bc:e:{for(P=b.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(w,x.sibling),x=i(x,b.children||[]),x.return=w,w=x;break e}else{r(w,x);break}else e(w,x);x=x.sibling}x=f0(b,w.mode,N),x.return=w,w=x}return o(w);case Ba:return P=b._init,j(w,x,P(b._payload),N)}if(th(b))return v(w,x,b,N);if(Ld(b))return y(w,x,b,N);up(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(w,x.sibling),x=i(x,b),x.return=w,w=x):(r(w,x),x=m0(b,w.mode,N),x.return=w,w=x),o(w)):r(w,x)}return j}var ku=sA(!0),iA=sA(!1),Rg=Vo(null),Dg=null,Jc=null,Kj=null;function Yj(){Kj=Jc=Dg=null}function Qj(t){var e=Rg.current;er(Rg),t._currentValue=e}function Bw(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function cu(t,e){Dg=t,Kj=Jc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Ts(t){var e=t._currentValue;if(Kj!==t)if(t={context:t,memoizedValue:e,next:null},Jc===null){if(Dg===null)throw Error(ue(308));Jc=t,Dg.dependencies={lanes:0,firstContext:t}}else Jc=Jc.next=t;return e}var gl=null;function Xj(t){gl===null?gl=[t]:gl.push(t)}function aA(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Xj(e)):(r.next=i.next,i.next=r),e.interleaved=r,fa(t,n)}function fa(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var qa=!1;function Jj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Et&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,fa(t,r)}return i=n.interleaved,i===null?(e.next=e,Xj(n)):(e.next=i.next,i.next=e),n.interleaved=e,fa(t,r)}function Gp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Lj(t,r)}}function DE(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Mg(t,e,r,n){var i=t.updateQueue;qa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,g=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(m=e,g=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,h,m):v,m==null)break e;h=lr({},h,m);break e;case 2:qa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ml|=o,t.lanes=o,t.memoizedState=h}}function ME(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ue(191,i));i.call(n)}}}var Ym={},bi=Vo(Ym),Jh=Vo(Ym),Zh=Vo(Ym);function vl(t){if(t===Ym)throw Error(ue(174));return t}function Zj(t,e){switch(qt(Zh,e),qt(Jh,t),qt(bi,Ym),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_w(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_w(e,t)}er(bi),qt(bi,e)}function Tu(){er(bi),er(Jh),er(Zh)}function lA(t){vl(Zh.current);var e=vl(bi.current),r=_w(e,t.type);e!==r&&(qt(Jh,t),qt(bi,r))}function e_(t){Jh.current===t&&(er(bi),er(Jh))}var ar=Vo(0);function Og(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var o0=[];function t_(){for(var t=0;t<o0.length;t++)o0[t]._workInProgressVersionPrimary=null;o0.length=0}var Kp=ka.ReactCurrentDispatcher,l0=ka.ReactCurrentBatchConfig,Dl=0,or=null,Rr=null,$r=null,Lg=!1,wh=!1,em=0,z8=0;function rn(){throw Error(ue(321))}function r_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xs(t[r],e[r]))return!1;return!0}function n_(t,e,r,n,i,a){if(Dl=a,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kp.current=t===null||t.memoizedState===null?H8:G8,t=r(n,i),wh){a=0;do{if(wh=!1,em=0,25<=a)throw Error(ue(301));a+=1,$r=Rr=null,e.updateQueue=null,Kp.current=K8,t=r(n,i)}while(wh)}if(Kp.current=Vg,e=Rr!==null&&Rr.next!==null,Dl=0,$r=Rr=or=null,Lg=!1,e)throw Error(ue(300));return t}function s_(){var t=em!==0;return em=0,t}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?or.memoizedState=$r=t:$r=$r.next=t,$r}function Is(){if(Rr===null){var t=or.alternate;t=t!==null?t.memoizedState:null}else t=Rr.next;var e=$r===null?or.memoizedState:$r.next;if(e!==null)$r=e,Rr=t;else{if(t===null)throw Error(ue(310));Rr=t,t={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},$r===null?or.memoizedState=$r=t:$r=$r.next=t}return $r}function tm(t,e){return typeof e=="function"?e(t):e}function c0(t){var e=Is(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=Rr,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Dl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,or.lanes|=d,Ml|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,Xs(n,e.memoizedState)||($n=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,or.lanes|=a,Ml|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function u0(t){var e=Is(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Xs(a,e.memoizedState)||($n=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function cA(){}function uA(t,e){var r=or,n=Is(),i=e(),a=!Xs(n.memoizedState,i);if(a&&(n.memoizedState=i,$n=!0),n=n.queue,i_(mA.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||$r!==null&&$r.memoizedState.tag&1){if(r.flags|=2048,rm(9,hA.bind(null,r,n,i,e),void 0,null),Ur===null)throw Error(ue(349));Dl&30||dA(r,e,i)}return i}function dA(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hA(t,e,r,n){e.value=r,e.getSnapshot=n,fA(e)&&pA(t)}function mA(t,e,r){return r(function(){fA(e)&&pA(t)})}function fA(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xs(t,r)}catch{return!0}}function pA(t){var e=fa(t,1);e!==null&&Gs(e,t,1,-1)}function OE(t){var e=ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:t},e.queue=t,t=t.dispatch=W8.bind(null,or,t),[e.memoizedState,t]}function rm(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function gA(){return Is().memoizedState}function Yp(t,e,r,n){var i=ci();or.flags|=t,i.memoizedState=rm(1|e,r,void 0,n===void 0?null:n)}function ex(t,e,r,n){var i=Is();n=n===void 0?null:n;var a=void 0;if(Rr!==null){var o=Rr.memoizedState;if(a=o.destroy,n!==null&&r_(n,o.deps)){i.memoizedState=rm(e,r,a,n);return}}or.flags|=t,i.memoizedState=rm(1|e,r,a,n)}function LE(t,e){return Yp(8390656,8,t,e)}function i_(t,e){return ex(2048,8,t,e)}function vA(t,e){return ex(4,2,t,e)}function xA(t,e){return ex(4,4,t,e)}function yA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wA(t,e,r){return r=r!=null?r.concat([t]):null,ex(4,4,yA.bind(null,e,t),r)}function a_(){}function bA(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&r_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function jA(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&r_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function _A(t,e,r){return Dl&21?(Xs(r,e)||(r=kI(),or.lanes|=r,Ml|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=r)}function B8(t,e){var r=Rt;Rt=r!==0&&4>r?r:4,t(!0);var n=l0.transition;l0.transition={};try{t(!1),e()}finally{Rt=r,l0.transition=n}}function NA(){return Is().memoizedState}function q8(t,e,r){var n=mo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},SA(t))EA(e,r);else if(r=aA(t,e,r,n),r!==null){var i=Nn();Gs(r,t,n,i),CA(r,e,n)}}function W8(t,e,r){var n=mo(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(SA(t))EA(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,Xs(l,o)){var c=e.interleaved;c===null?(i.next=i,Xj(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=aA(t,e,i,n),r!==null&&(i=Nn(),Gs(r,t,n,i),CA(r,e,n))}}function SA(t){var e=t.alternate;return t===or||e!==null&&e===or}function EA(t,e){wh=Lg=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function CA(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Lj(t,r)}}var Vg={readContext:Ts,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},H8={readContext:Ts,useCallback:function(t,e){return ci().memoizedState=[t,e===void 0?null:e],t},useContext:Ts,useEffect:LE,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Yp(4194308,4,yA.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Yp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yp(4,2,t,e)},useMemo:function(t,e){var r=ci();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ci();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=q8.bind(null,or,t),[n.memoizedState,t]},useRef:function(t){var e=ci();return t={current:t},e.memoizedState=t},useState:OE,useDebugValue:a_,useDeferredValue:function(t){return ci().memoizedState=t},useTransition:function(){var t=OE(!1),e=t[0];return t=B8.bind(null,t[1]),ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=or,i=ci();if(nr){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=e(),Ur===null)throw Error(ue(349));Dl&30||dA(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,LE(mA.bind(null,n,a,t),[t]),n.flags|=2048,rm(9,hA.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=ci(),e=Ur.identifierPrefix;if(nr){var r=Ji,n=Xi;r=(n&~(1<<32-Hs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=em++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=z8++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G8={readContext:Ts,useCallback:bA,useContext:Ts,useEffect:i_,useImperativeHandle:wA,useInsertionEffect:vA,useLayoutEffect:xA,useMemo:jA,useReducer:c0,useRef:gA,useState:function(){return c0(tm)},useDebugValue:a_,useDeferredValue:function(t){var e=Is();return _A(e,Rr.memoizedState,t)},useTransition:function(){var t=c0(tm)[0],e=Is().memoizedState;return[t,e]},useMutableSource:cA,useSyncExternalStore:uA,useId:NA,unstable_isNewReconciler:!1},K8={readContext:Ts,useCallback:bA,useContext:Ts,useEffect:i_,useImperativeHandle:wA,useInsertionEffect:vA,useLayoutEffect:xA,useMemo:jA,useReducer:u0,useRef:gA,useState:function(){return u0(tm)},useDebugValue:a_,useDeferredValue:function(t){var e=Is();return Rr===null?e.memoizedState=t:_A(e,Rr.memoizedState,t)},useTransition:function(){var t=u0(tm)[0],e=Is().memoizedState;return[t,e]},useMutableSource:cA,useSyncExternalStore:uA,useId:NA,unstable_isNewReconciler:!1};function Fs(t,e){if(t&&t.defaultProps){e=lr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function qw(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var tx={isMounted:function(t){return(t=t._reactInternals)?sc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Nn(),i=mo(t),a=sa(n,i);a.payload=e,r!=null&&(a.callback=r),e=uo(t,a,i),e!==null&&(Gs(e,t,i,n),Gp(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Nn(),i=mo(t),a=sa(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=uo(t,a,i),e!==null&&(Gs(e,t,i,n),Gp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Nn(),n=mo(t),i=sa(r,n);i.tag=2,e!=null&&(i.callback=e),e=uo(t,i,n),e!==null&&(Gs(e,t,n,r),Gp(e,t,n))}};function VE(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Kh(r,n)||!Kh(i,a):!0}function kA(t,e,r){var n=!1,i=jo,a=e.contextType;return typeof a=="object"&&a!==null?a=Ts(a):(i=qn(e)?Pl:hn.current,n=e.contextTypes,a=(n=n!=null)?Eu(t,i):jo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tx,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function FE(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&tx.enqueueReplaceState(e,e.state,null)}function Ww(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Jj(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ts(a):(a=qn(e)?Pl:hn.current,i.context=Eu(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(qw(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tx.enqueueReplaceState(i,i.state,null),Mg(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Iu(t,e){try{var r="",n=e;do r+=jF(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function d0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Hw(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Y8=typeof WeakMap=="function"?WeakMap:Map;function TA(t,e,r){r=sa(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){$g||($g=!0,rb=n),Hw(t,e)},r}function IA(t,e,r){r=sa(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Hw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Hw(t,e),typeof n!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function $E(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Y8;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=c$.bind(null,t,e,r),e.then(t,t))}function UE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zE(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sa(-1,1),e.tag=2,uo(r,e,1))),r.lanes|=1),t)}var Q8=ka.ReactCurrentOwner,$n=!1;function wn(t,e,r,n){e.child=t===null?iA(e,null,r,n):ku(e,t.child,r,n)}function BE(t,e,r,n,i){r=r.render;var a=e.ref;return cu(e,i),n=n_(t,e,r,n,a,i),r=s_(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(nr&&r&&Wj(e),e.flags|=1,wn(t,e,n,i),e.child)}function qE(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!f_(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,AA(t,e,a,n,i)):(t=Zp(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Kh,r(o,n)&&t.ref===e.ref)return pa(t,e,i)}return e.flags|=1,t=fo(a,n),t.ref=e.ref,t.return=e,e.child=t}function AA(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Kh(a,n)&&t.ref===e.ref)if($n=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,pa(t,e,i)}return Gw(t,e,r,n,i)}function PA(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(eu,es),es|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qt(eu,es),es|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,qt(eu,es),es|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,qt(eu,es),es|=n;return wn(t,e,i,r),e.child}function RA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Gw(t,e,r,n,i){var a=qn(r)?Pl:hn.current;return a=Eu(e,a),cu(e,i),r=n_(t,e,r,n,a,i),n=s_(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(nr&&n&&Wj(e),e.flags|=1,wn(t,e,r,i),e.child)}function WE(t,e,r,n,i){if(qn(r)){var a=!0;Ig(e)}else a=!1;if(cu(e,i),e.stateNode===null)Qp(t,e),kA(e,r,n),Ww(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ts(u):(u=qn(r)?Pl:hn.current,u=Eu(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&FE(e,o,n,u),qa=!1;var m=e.memoizedState;o.state=m,Mg(e,n,o,i),c=e.memoizedState,l!==n||m!==c||Bn.current||qa?(typeof d=="function"&&(qw(e,r,d,n),c=e.memoizedState),(l=qa||VE(e,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,oA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Fs(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ts(c):(c=qn(r)?Pl:hn.current,c=Eu(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&FE(e,o,n,c),qa=!1,m=e.memoizedState,o.state=m,Mg(e,n,o,i);var v=e.memoizedState;l!==h||m!==v||Bn.current||qa?(typeof g=="function"&&(qw(e,r,g,n),v=e.memoizedState),(u=qa||VE(e,r,u,n,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Kw(t,e,r,n,a,i)}function Kw(t,e,r,n,i,a){RA(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&IE(e,r,!1),pa(t,e,a);n=e.stateNode,Q8.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ku(e,t.child,null,a),e.child=ku(e,null,l,a)):wn(t,e,l,a),e.memoizedState=n.state,i&&IE(e,r,!0),e.child}function DA(t){var e=t.stateNode;e.pendingContext?TE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TE(t,e.context,!1),Zj(t,e.containerInfo)}function HE(t,e,r,n,i){return Cu(),Gj(i),e.flags|=256,wn(t,e,r,n),e.child}var Yw={dehydrated:null,treeContext:null,retryLane:0};function Qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function MA(t,e,r){var n=e.pendingProps,i=ar.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qt(ar,i&1),t===null)return zw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=sx(o,n,0,null),t=_l(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Qw(r),e.memoizedState=Yw,t):o_(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return X8(t,e,o,n,l,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=fo(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=fo(l,a):(a=_l(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Qw(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Yw,n}return a=t.child,t=a.sibling,n=fo(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function o_(t,e){return e=sx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dp(t,e,r,n){return n!==null&&Gj(n),ku(e,t.child,null,r),t=o_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X8(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=d0(Error(ue(422))),dp(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=sx({mode:"visible",children:n.children},i,0,null),a=_l(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&ku(e,t.child,null,o),e.child.memoizedState=Qw(o),e.memoizedState=Yw,a);if(!(e.mode&1))return dp(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ue(419)),n=d0(a,n,void 0),dp(t,e,o,n)}if(l=(o&t.childLanes)!==0,$n||l){if(n=Ur,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,fa(t,i),Gs(n,t,i,-1))}return m_(),n=d0(Error(ue(421))),dp(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u$.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,rs=co(i.nextSibling),as=e,nr=!0,Bs=null,t!==null&&(xs[ys++]=Xi,xs[ys++]=Ji,xs[ys++]=Rl,Xi=t.id,Ji=t.overflow,Rl=e),e=o_(e,n.children),e.flags|=4096,e)}function GE(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Bw(t.return,e,r)}function h0(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function OA(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(wn(t,e,n.children,r),n=ar.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GE(t,r,e);else if(t.tag===19)GE(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(qt(ar,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Og(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),h0(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Og(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}h0(e,!0,r,null,a);break;case"together":h0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ml|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,r=fo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=fo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function J8(t,e,r){switch(e.tag){case 3:DA(e),Cu();break;case 5:lA(e);break;case 1:qn(e.type)&&Ig(e);break;case 4:Zj(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;qt(Rg,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(qt(ar,ar.current&1),e.flags|=128,null):r&e.child.childLanes?MA(t,e,r):(qt(ar,ar.current&1),t=pa(t,e,r),t!==null?t.sibling:null);qt(ar,ar.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return OA(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qt(ar,ar.current),n)break;return null;case 22:case 23:return e.lanes=0,PA(t,e,r)}return pa(t,e,r)}var LA,Xw,VA,FA;LA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xw=function(){};VA=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,vl(bi.current);var a=null;switch(r){case"input":i=yw(t,i),n=yw(t,n),a=[];break;case"select":i=lr({},i,{value:void 0}),n=lr({},n,{value:void 0}),a=[];break;case"textarea":i=jw(t,i),n=jw(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=kg)}Nw(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uh.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Jt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};FA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Bd(t,e){if(!nr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Z8(t,e,r){var n=e.pendingProps;switch(Hj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return qn(e.type)&&Tg(),nn(e),null;case 3:return n=e.stateNode,Tu(),er(Bn),er(hn),t_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bs!==null&&(ib(Bs),Bs=null))),Xw(t,e),nn(e),null;case 5:e_(e);var i=vl(Zh.current);if(r=e.type,t!==null&&e.stateNode!=null)VA(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ue(166));return nn(e),null}if(t=vl(bi.current),cp(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[di]=e,n[Xh]=a,t=(e.mode&1)!==0,r){case"dialog":Jt("cancel",n),Jt("close",n);break;case"iframe":case"object":case"embed":Jt("load",n);break;case"video":case"audio":for(i=0;i<nh.length;i++)Jt(nh[i],n);break;case"source":Jt("error",n);break;case"img":case"image":case"link":Jt("error",n),Jt("load",n);break;case"details":Jt("toggle",n);break;case"input":rE(n,a),Jt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Jt("invalid",n);break;case"textarea":sE(n,a),Jt("invalid",n)}Nw(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&lp(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&lp(n.textContent,l,t),i=["children",""+l]):Uh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Jt("scroll",n)}switch(r){case"input":ep(n),nE(n,a,!0);break;case"textarea":ep(n),iE(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=kg)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[di]=e,t[Xh]=n,LA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sw(r,n),r){case"dialog":Jt("cancel",t),Jt("close",t),i=n;break;case"iframe":case"object":case"embed":Jt("load",t),i=n;break;case"video":case"audio":for(i=0;i<nh.length;i++)Jt(nh[i],t);i=n;break;case"source":Jt("error",t),i=n;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),i=n;break;case"details":Jt("toggle",t),i=n;break;case"input":rE(t,n),i=yw(t,n),Jt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=lr({},n,{value:void 0}),Jt("invalid",t);break;case"textarea":sE(t,n),i=jw(t,n),Jt("invalid",t);break;default:i=n}Nw(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?gI(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fI(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&zh(t,c):typeof c=="number"&&zh(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Uh.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Jt("scroll",t):c!=null&&Aj(t,a,c,o))}switch(r){case"input":ep(t),nE(t,n,!1);break;case"textarea":ep(t),iE(t);break;case"option":n.value!=null&&t.setAttribute("value",""+bo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?iu(t,!!n.multiple,a,!1):n.defaultValue!=null&&iu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)FA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ue(166));if(r=vl(Zh.current),vl(bi.current),cp(e)){if(n=e.stateNode,r=e.memoizedProps,n[di]=e,(a=n.nodeValue!==r)&&(t=as,t!==null))switch(t.tag){case 3:lp(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lp(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[di]=e,e.stateNode=n}return nn(e),null;case 13:if(er(ar),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nr&&rs!==null&&e.mode&1&&!(e.flags&128))nA(),Cu(),e.flags|=98560,a=!1;else if(a=cp(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ue(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ue(317));a[di]=e}else Cu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),a=!1}else Bs!==null&&(ib(Bs),Bs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ar.current&1?Dr===0&&(Dr=3):m_())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return Tu(),Xw(t,e),t===null&&Yh(e.stateNode.containerInfo),nn(e),null;case 10:return Qj(e.type._context),nn(e),null;case 17:return qn(e.type)&&Tg(),nn(e),null;case 19:if(er(ar),a=e.memoizedState,a===null)return nn(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Bd(a,!1);else{if(Dr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Og(t),o!==null){for(e.flags|=128,Bd(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return qt(ar,ar.current&1|2),e.child}t=t.sibling}a.tail!==null&&vr()>Au&&(e.flags|=128,n=!0,Bd(a,!1),e.lanes=4194304)}else{if(!n)if(t=Og(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Bd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!nr)return nn(e),null}else 2*vr()-a.renderingStartTime>Au&&r!==1073741824&&(e.flags|=128,n=!0,Bd(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vr(),e.sibling=null,r=ar.current,qt(ar,n?r&1|2:r&1),e):(nn(e),null);case 22:case 23:return h_(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?es&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function e$(t,e){switch(Hj(e),e.tag){case 1:return qn(e.type)&&Tg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tu(),er(Bn),er(hn),t_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return e_(e),null;case 13:if(er(ar),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));Cu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return er(ar),null;case 4:return Tu(),null;case 10:return Qj(e.type._context),null;case 22:case 23:return h_(),null;case 24:return null;default:return null}}var hp=!1,on=!1,t$=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Zc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hr(t,e,n)}else r.current=null}function Jw(t,e,r){try{r()}catch(n){hr(t,e,n)}}var KE=!1;function r$(t,e){if(Mw=Sg,t=qI(),qj(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===r&&++u===i&&(l=o),m===a&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ow={focusedElem:t,selectionRange:r},Sg=!1,Re=e;Re!==null;)if(e=Re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Re=t;else for(;Re!==null;){e=Re;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,j=v.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:Fs(e.type,y),j);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(N){hr(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Re=t;break}Re=e.return}return v=KE,KE=!1,v}function bh(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Jw(e,r,a)}i=i.next}while(i!==n)}}function rx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Zw(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function $A(t){var e=t.alternate;e!==null&&(t.alternate=null,$A(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[Xh],delete e[Fw],delete e[V8],delete e[F8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UA(t){return t.tag===5||t.tag===3||t.tag===4}function YE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=kg));else if(n!==4&&(t=t.child,t!==null))for(eb(t,e,r),t=t.sibling;t!==null;)eb(t,e,r),t=t.sibling}function tb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(tb(t,e,r),t=t.sibling;t!==null;)tb(t,e,r),t=t.sibling}var Br=null,$s=!1;function Oa(t,e,r){for(r=r.child;r!==null;)zA(t,e,r),r=r.sibling}function zA(t,e,r){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(Kv,r)}catch{}switch(r.tag){case 5:on||Zc(r,e);case 6:var n=Br,i=$s;Br=null,Oa(t,e,r),Br=n,$s=i,Br!==null&&($s?(t=Br,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Br.removeChild(r.stateNode));break;case 18:Br!==null&&($s?(t=Br,r=r.stateNode,t.nodeType===8?i0(t.parentNode,r):t.nodeType===1&&i0(t,r),Hh(t)):i0(Br,r.stateNode));break;case 4:n=Br,i=$s,Br=r.stateNode.containerInfo,$s=!0,Oa(t,e,r),Br=n,$s=i;break;case 0:case 11:case 14:case 15:if(!on&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Jw(r,e,o),i=i.next}while(i!==n)}Oa(t,e,r);break;case 1:if(!on&&(Zc(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){hr(r,e,l)}Oa(t,e,r);break;case 21:Oa(t,e,r);break;case 22:r.mode&1?(on=(n=on)||r.memoizedState!==null,Oa(t,e,r),on=n):Oa(t,e,r);break;default:Oa(t,e,r)}}function QE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new t$),e.forEach(function(n){var i=d$.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Os(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Br=l.stateNode,$s=!1;break e;case 3:Br=l.stateNode.containerInfo,$s=!0;break e;case 4:Br=l.stateNode.containerInfo,$s=!0;break e}l=l.return}if(Br===null)throw Error(ue(160));zA(a,o,i),Br=null,$s=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){hr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BA(e,t),e=e.sibling}function BA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(e,t),oi(t),n&4){try{bh(3,t,t.return),rx(3,t)}catch(y){hr(t,t.return,y)}try{bh(5,t,t.return)}catch(y){hr(t,t.return,y)}}break;case 1:Os(e,t),oi(t),n&512&&r!==null&&Zc(r,r.return);break;case 5:if(Os(e,t),oi(t),n&512&&r!==null&&Zc(r,r.return),t.flags&32){var i=t.stateNode;try{zh(i,"")}catch(y){hr(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&dI(i,a),Sw(l,o);var u=Sw(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?gI(i,h):d==="dangerouslySetInnerHTML"?fI(i,h):d==="children"?zh(i,h):Aj(i,d,h,u)}switch(l){case"input":ww(i,a);break;case"textarea":hI(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?iu(i,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?iu(i,!!a.multiple,a.defaultValue,!0):iu(i,!!a.multiple,a.multiple?[]:"",!1))}i[Xh]=a}catch(y){hr(t,t.return,y)}}break;case 6:if(Os(e,t),oi(t),n&4){if(t.stateNode===null)throw Error(ue(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){hr(t,t.return,y)}}break;case 3:if(Os(e,t),oi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hh(e.containerInfo)}catch(y){hr(t,t.return,y)}break;case 4:Os(e,t),oi(t);break;case 13:Os(e,t),oi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(u_=vr())),n&4&&QE(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(on=(u=on)||d,Os(e,t),on=u):Os(e,t),oi(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Re=t,d=t.child;d!==null;){for(h=Re=d;Re!==null;){switch(m=Re,g=m.child,m.tag){case 0:case 11:case 14:case 15:bh(4,m,m.return);break;case 1:Zc(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){hr(n,r,y)}}break;case 5:Zc(m,m.return);break;case 22:if(m.memoizedState!==null){JE(h);continue}}g!==null?(g.return=m,Re=g):JE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=pI("display",o))}catch(y){hr(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){hr(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Os(e,t),oi(t),n&4&&QE(t);break;case 21:break;default:Os(e,t),oi(t)}}function oi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(UA(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(zh(i,""),n.flags&=-33);var a=YE(t);tb(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=YE(t);eb(t,l,o);break;default:throw Error(ue(161))}}catch(c){hr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function n$(t,e,r){Re=t,qA(t)}function qA(t,e,r){for(var n=(t.mode&1)!==0;Re!==null;){var i=Re,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||hp;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||on;l=hp;var u=on;if(hp=o,(on=c)&&!u)for(Re=i;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?ZE(i):c!==null?(c.return=o,Re=c):ZE(i);for(;a!==null;)Re=a,qA(a),a=a.sibling;Re=i,hp=l,on=u}XE(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Re=a):XE(t)}}function XE(t){for(;Re!==null;){var e=Re;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||rx(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!on)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Fs(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ME(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ME(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Hh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}on||e.flags&512&&Zw(e)}catch(m){hr(e,e.return,m)}}if(e===t){Re=null;break}if(r=e.sibling,r!==null){r.return=e.return,Re=r;break}Re=e.return}}function JE(t){for(;Re!==null;){var e=Re;if(e===t){Re=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Re=r;break}Re=e.return}}function ZE(t){for(;Re!==null;){var e=Re;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rx(4,e)}catch(c){hr(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){hr(e,i,c)}}var a=e.return;try{Zw(e)}catch(c){hr(e,a,c)}break;case 5:var o=e.return;try{Zw(e)}catch(c){hr(e,o,c)}}}catch(c){hr(e,e.return,c)}if(e===t){Re=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Re=l;break}Re=e.return}}var s$=Math.ceil,Fg=ka.ReactCurrentDispatcher,l_=ka.ReactCurrentOwner,Ns=ka.ReactCurrentBatchConfig,Et=0,Ur=null,_r=null,Kr=0,es=0,eu=Vo(0),Dr=0,nm=null,Ml=0,nx=0,c_=0,jh=null,On=null,u_=0,Au=1/0,Hi=null,$g=!1,rb=null,ho=null,mp=!1,no=null,Ug=0,_h=0,nb=null,Xp=-1,Jp=0;function Nn(){return Et&6?vr():Xp!==-1?Xp:Xp=vr()}function mo(t){return t.mode&1?Et&2&&Kr!==0?Kr&-Kr:U8.transition!==null?(Jp===0&&(Jp=kI()),Jp):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:MI(t.type)),t):1}function Gs(t,e,r,n){if(50<_h)throw _h=0,nb=null,Error(ue(185));Hm(t,r,n),(!(Et&2)||t!==Ur)&&(t===Ur&&(!(Et&2)&&(nx|=r),Dr===4&&Ga(t,Kr)),Wn(t,n),r===1&&Et===0&&!(e.mode&1)&&(Au=vr()+500,Zv&&Fo()))}function Wn(t,e){var r=t.callbackNode;UF(t,e);var n=Ng(t,t===Ur?Kr:0);if(n===0)r!==null&&lE(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&lE(r),e===1)t.tag===0?$8(e2.bind(null,t)):eA(e2.bind(null,t)),O8(function(){!(Et&6)&&Fo()}),r=null;else{switch(TI(n)){case 1:r=Oj;break;case 4:r=EI;break;case 16:r=_g;break;case 536870912:r=CI;break;default:r=_g}r=JA(r,WA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function WA(t,e){if(Xp=-1,Jp=0,Et&6)throw Error(ue(327));var r=t.callbackNode;if(uu()&&t.callbackNode!==r)return null;var n=Ng(t,t===Ur?Kr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=zg(t,n);else{e=n;var i=Et;Et|=2;var a=GA();(Ur!==t||Kr!==e)&&(Hi=null,Au=vr()+500,jl(t,e));do try{o$();break}catch(l){HA(t,l)}while(!0);Yj(),Fg.current=a,Et=i,_r!==null?e=0:(Ur=null,Kr=0,e=Dr)}if(e!==0){if(e===2&&(i=Iw(t),i!==0&&(n=i,e=sb(t,i))),e===1)throw r=nm,jl(t,0),Ga(t,n),Wn(t,vr()),r;if(e===6)Ga(t,n);else{if(i=t.current.alternate,!(n&30)&&!i$(i)&&(e=zg(t,n),e===2&&(a=Iw(t),a!==0&&(n=a,e=sb(t,a))),e===1))throw r=nm,jl(t,0),Ga(t,n),Wn(t,vr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ue(345));case 2:ul(t,On,Hi);break;case 3:if(Ga(t,n),(n&130023424)===n&&(e=u_+500-vr(),10<e)){if(Ng(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vw(ul.bind(null,t,On,Hi),e);break}ul(t,On,Hi);break;case 4:if(Ga(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Hs(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=vr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*s$(n/1960))-n,10<n){t.timeoutHandle=Vw(ul.bind(null,t,On,Hi),n);break}ul(t,On,Hi);break;case 5:ul(t,On,Hi);break;default:throw Error(ue(329))}}}return Wn(t,vr()),t.callbackNode===r?WA.bind(null,t):null}function sb(t,e){var r=jh;return t.current.memoizedState.isDehydrated&&(jl(t,e).flags|=256),t=zg(t,e),t!==2&&(e=On,On=r,e!==null&&ib(e)),t}function ib(t){On===null?On=t:On.push.apply(On,t)}function i$(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Xs(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ga(t,e){for(e&=~c_,e&=~nx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Hs(e),n=1<<r;t[r]=-1,e&=~n}}function e2(t){if(Et&6)throw Error(ue(327));uu();var e=Ng(t,0);if(!(e&1))return Wn(t,vr()),null;var r=zg(t,e);if(t.tag!==0&&r===2){var n=Iw(t);n!==0&&(e=n,r=sb(t,n))}if(r===1)throw r=nm,jl(t,0),Ga(t,e),Wn(t,vr()),r;if(r===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ul(t,On,Hi),Wn(t,vr()),null}function d_(t,e){var r=Et;Et|=1;try{return t(e)}finally{Et=r,Et===0&&(Au=vr()+500,Zv&&Fo())}}function Ol(t){no!==null&&no.tag===0&&!(Et&6)&&uu();var e=Et;Et|=1;var r=Ns.transition,n=Rt;try{if(Ns.transition=null,Rt=1,t)return t()}finally{Rt=n,Ns.transition=r,Et=e,!(Et&6)&&Fo()}}function h_(){es=eu.current,er(eu)}function jl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,M8(r)),_r!==null)for(r=_r.return;r!==null;){var n=r;switch(Hj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tg();break;case 3:Tu(),er(Bn),er(hn),t_();break;case 5:e_(n);break;case 4:Tu();break;case 13:er(ar);break;case 19:er(ar);break;case 10:Qj(n.type._context);break;case 22:case 23:h_()}r=r.return}if(Ur=t,_r=t=fo(t.current,null),Kr=es=e,Dr=0,nm=null,c_=nx=Ml=0,On=jh=null,gl!==null){for(e=0;e<gl.length;e++)if(r=gl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}gl=null}return t}function HA(t,e){do{var r=_r;try{if(Yj(),Kp.current=Vg,Lg){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Lg=!1}if(Dl=0,$r=Rr=or=null,wh=!1,em=0,l_.current=null,r===null||r.return===null){Dr=1,nm=e,_r=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=Kr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=UE(o);if(g!==null){g.flags&=-257,zE(g,o,l,a,e),g.mode&1&&$E(a,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){$E(a,u,e),m_();break e}c=Error(ue(426))}}else if(nr&&l.mode&1){var j=UE(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),zE(j,o,l,a,e),Gj(Iu(c,l));break e}}a=c=Iu(c,l),Dr!==4&&(Dr=2),jh===null?jh=[a]:jh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=TA(a,c,e);DE(a,w);break e;case 1:l=c;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ho===null||!ho.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=IA(a,l,e);DE(a,N);break e}}a=a.return}while(a!==null)}YA(r)}catch(C){e=C,_r===r&&r!==null&&(_r=r=r.return);continue}break}while(!0)}function GA(){var t=Fg.current;return Fg.current=Vg,t===null?Vg:t}function m_(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Ur===null||!(Ml&268435455)&&!(nx&268435455)||Ga(Ur,Kr)}function zg(t,e){var r=Et;Et|=2;var n=GA();(Ur!==t||Kr!==e)&&(Hi=null,jl(t,e));do try{a$();break}catch(i){HA(t,i)}while(!0);if(Yj(),Et=r,Fg.current=n,_r!==null)throw Error(ue(261));return Ur=null,Kr=0,Dr}function a$(){for(;_r!==null;)KA(_r)}function o$(){for(;_r!==null&&!PF();)KA(_r)}function KA(t){var e=XA(t.alternate,t,es);t.memoizedProps=t.pendingProps,e===null?YA(t):_r=e,l_.current=null}function YA(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=e$(r,e),r!==null){r.flags&=32767,_r=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dr=6,_r=null;return}}else if(r=Z8(r,e,es),r!==null){_r=r;return}if(e=e.sibling,e!==null){_r=e;return}_r=e=t}while(e!==null);Dr===0&&(Dr=5)}function ul(t,e,r){var n=Rt,i=Ns.transition;try{Ns.transition=null,Rt=1,l$(t,e,r,n)}finally{Ns.transition=i,Rt=n}return null}function l$(t,e,r,n){do uu();while(no!==null);if(Et&6)throw Error(ue(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(zF(t,a),t===Ur&&(_r=Ur=null,Kr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mp||(mp=!0,JA(_g,function(){return uu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ns.transition,Ns.transition=null;var o=Rt;Rt=1;var l=Et;Et|=4,l_.current=null,r$(t,r),BA(r,t),k8(Ow),Sg=!!Mw,Ow=Mw=null,t.current=r,n$(r),RF(),Et=l,Rt=o,Ns.transition=a}else t.current=r;if(mp&&(mp=!1,no=t,Ug=i),a=t.pendingLanes,a===0&&(ho=null),OF(r.stateNode),Wn(t,vr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if($g)throw $g=!1,t=rb,rb=null,t;return Ug&1&&t.tag!==0&&uu(),a=t.pendingLanes,a&1?t===nb?_h++:(_h=0,nb=t):_h=0,Fo(),null}function uu(){if(no!==null){var t=TI(Ug),e=Ns.transition,r=Rt;try{if(Ns.transition=null,Rt=16>t?16:t,no===null)var n=!1;else{if(t=no,no=null,Ug=0,Et&6)throw Error(ue(331));var i=Et;for(Et|=4,Re=t.current;Re!==null;){var a=Re,o=a.child;if(Re.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Re=u;Re!==null;){var d=Re;switch(d.tag){case 0:case 11:case 15:bh(8,d,a)}var h=d.child;if(h!==null)h.return=d,Re=h;else for(;Re!==null;){d=Re;var m=d.sibling,g=d.return;if($A(d),d===u){Re=null;break}if(m!==null){m.return=g,Re=m;break}Re=g}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}Re=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Re=o;else e:for(;Re!==null;){if(a=Re,a.flags&2048)switch(a.tag){case 0:case 11:case 15:bh(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Re=w;break e}Re=a.return}}var x=t.current;for(Re=x;Re!==null;){o=Re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Re=b;else e:for(o=x;Re!==null;){if(l=Re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rx(9,l)}}catch(C){hr(l,l.return,C)}if(l===o){Re=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Re=N;break e}Re=l.return}}if(Et=i,Fo(),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(Kv,t)}catch{}n=!0}return n}finally{Rt=r,Ns.transition=e}}return!1}function t2(t,e,r){e=Iu(r,e),e=TA(t,e,1),t=uo(t,e,1),e=Nn(),t!==null&&(Hm(t,1,e),Wn(t,e))}function hr(t,e,r){if(t.tag===3)t2(t,t,r);else for(;e!==null;){if(e.tag===3){t2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ho===null||!ho.has(n))){t=Iu(r,t),t=IA(e,t,1),e=uo(e,t,1),t=Nn(),e!==null&&(Hm(e,1,t),Wn(e,t));break}}e=e.return}}function c$(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&r,Ur===t&&(Kr&r)===r&&(Dr===4||Dr===3&&(Kr&130023424)===Kr&&500>vr()-u_?jl(t,0):c_|=r),Wn(t,e)}function QA(t,e){e===0&&(t.mode&1?(e=np,np<<=1,!(np&130023424)&&(np=4194304)):e=1);var r=Nn();t=fa(t,e),t!==null&&(Hm(t,e,r),Wn(t,r))}function u$(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),QA(t,r)}function d$(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(e),QA(t,r)}var XA;XA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)$n=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $n=!1,J8(t,e,r);$n=!!(t.flags&131072)}else $n=!1,nr&&e.flags&1048576&&tA(e,Pg,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Qp(t,e),t=e.pendingProps;var i=Eu(e,hn.current);cu(e,r),i=n_(null,e,n,t,i,r);var a=s_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(n)?(a=!0,Ig(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jj(e),i.updater=tx,e.stateNode=i,i._reactInternals=e,Ww(e,n,t,r),e=Kw(null,e,n,!0,a,r)):(e.tag=0,nr&&a&&Wj(e),wn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Qp(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=m$(n),t=Fs(n,t),i){case 0:e=Gw(null,e,n,t,r);break e;case 1:e=WE(null,e,n,t,r);break e;case 11:e=BE(null,e,n,t,r);break e;case 14:e=qE(null,e,n,Fs(n.type,t),r);break e}throw Error(ue(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fs(n,i),Gw(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fs(n,i),WE(t,e,n,i,r);case 3:e:{if(DA(e),t===null)throw Error(ue(387));n=e.pendingProps,a=e.memoizedState,i=a.element,oA(t,e),Mg(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Iu(Error(ue(423)),e),e=HE(t,e,n,r,i);break e}else if(n!==i){i=Iu(Error(ue(424)),e),e=HE(t,e,n,r,i);break e}else for(rs=co(e.stateNode.containerInfo.firstChild),as=e,nr=!0,Bs=null,r=iA(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Cu(),n===i){e=pa(t,e,r);break e}wn(t,e,n,r)}e=e.child}return e;case 5:return lA(e),t===null&&zw(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Lw(n,i)?o=null:a!==null&&Lw(n,a)&&(e.flags|=32),RA(t,e),wn(t,e,o,r),e.child;case 6:return t===null&&zw(e),null;case 13:return MA(t,e,r);case 4:return Zj(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ku(e,null,n,r):wn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fs(n,i),BE(t,e,n,i,r);case 7:return wn(t,e,e.pendingProps,r),e.child;case 8:return wn(t,e,e.pendingProps.children,r),e.child;case 12:return wn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,qt(Rg,n._currentValue),n._currentValue=o,a!==null)if(Xs(a.value,o)){if(a.children===i.children&&!Bn.current){e=pa(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=sa(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Bw(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ue(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Bw(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}wn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,cu(e,r),i=Ts(i),n=n(i),e.flags|=1,wn(t,e,n,r),e.child;case 14:return n=e.type,i=Fs(n,e.pendingProps),i=Fs(n.type,i),qE(t,e,n,i,r);case 15:return AA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fs(n,i),Qp(t,e),e.tag=1,qn(n)?(t=!0,Ig(e)):t=!1,cu(e,r),kA(e,n,i),Ww(e,n,i,r),Kw(null,e,n,!0,t,r);case 19:return OA(t,e,r);case 22:return PA(t,e,r)}throw Error(ue(156,e.tag))};function JA(t,e){return SI(t,e)}function h$(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(t,e,r,n){return new h$(t,e,r,n)}function f_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m$(t){if(typeof t=="function")return f_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rj)return 11;if(t===Dj)return 14}return 2}function fo(t,e){var r=t.alternate;return r===null?(r=bs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Zp(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")f_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qc:return _l(r.children,i,a,e);case Pj:o=8,i|=8;break;case pw:return t=bs(12,r,e,i|2),t.elementType=pw,t.lanes=a,t;case gw:return t=bs(13,r,e,i),t.elementType=gw,t.lanes=a,t;case vw:return t=bs(19,r,e,i),t.elementType=vw,t.lanes=a,t;case lI:return sx(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aI:o=10;break e;case oI:o=9;break e;case Rj:o=11;break e;case Dj:o=14;break e;case Ba:o=16,n=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=bs(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function _l(t,e,r,n){return t=bs(7,t,n,e),t.lanes=r,t}function sx(t,e,r,n){return t=bs(22,t,n,e),t.elementType=lI,t.lanes=r,t.stateNode={isHidden:!1},t}function m0(t,e,r){return t=bs(6,t,null,e),t.lanes=r,t}function f0(t,e,r){return e=bs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function f$(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ky(0),this.expirationTimes=Ky(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ky(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function p_(t,e,r,n,i,a,o,l,c){return t=new f$(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=bs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jj(a),t}function p$(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bc,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZA(t){if(!t)return jo;t=t._reactInternals;e:{if(sc(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var r=t.type;if(qn(r))return ZI(t,r,e)}return e}function eP(t,e,r,n,i,a,o,l,c){return t=p_(r,n,!0,t,i,a,o,l,c),t.context=ZA(null),r=t.current,n=Nn(),i=mo(r),a=sa(n,i),a.callback=e??null,uo(r,a,i),t.current.lanes=i,Hm(t,i,n),Wn(t,n),t}function ix(t,e,r,n){var i=e.current,a=Nn(),o=mo(i);return r=ZA(r),e.context===null?e.context=r:e.pendingContext=r,e=sa(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=uo(i,e,o),t!==null&&(Gs(t,i,o,a),Gp(t,i,o)),o}function Bg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function g_(t,e){r2(t,e),(t=t.alternate)&&r2(t,e)}function g$(){return null}var tP=typeof reportError=="function"?reportError:function(t){console.error(t)};function v_(t){this._internalRoot=t}ax.prototype.render=v_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));ix(t,e,null,null)};ax.prototype.unmount=v_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ol(function(){ix(null,t,null,null)}),e[ma]=null}};function ax(t){this._internalRoot=t}ax.prototype.unstable_scheduleHydration=function(t){if(t){var e=PI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ha.length&&e!==0&&e<Ha[r].priority;r++);Ha.splice(r,0,t),r===0&&DI(t)}};function x_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ox(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n2(){}function v$(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Bg(o);a.call(u)}}var o=eP(e,n,t,0,null,!1,!1,"",n2);return t._reactRootContainer=o,t[ma]=o.current,Yh(t.nodeType===8?t.parentNode:t),Ol(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Bg(c);l.call(u)}}var c=p_(t,0,!1,null,null,!1,!1,"",n2);return t._reactRootContainer=c,t[ma]=c.current,Yh(t.nodeType===8?t.parentNode:t),Ol(function(){ix(e,c,r,n)}),c}function lx(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Bg(o);l.call(c)}}ix(e,o,t,i)}else o=v$(r,e,t,i,n);return Bg(o)}II=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=rh(e.pendingLanes);r!==0&&(Lj(e,r|1),Wn(e,vr()),!(Et&6)&&(Au=vr()+500,Fo()))}break;case 13:Ol(function(){var n=fa(t,1);if(n!==null){var i=Nn();Gs(n,t,1,i)}}),g_(t,1)}};Vj=function(t){if(t.tag===13){var e=fa(t,134217728);if(e!==null){var r=Nn();Gs(e,t,134217728,r)}g_(t,134217728)}};AI=function(t){if(t.tag===13){var e=mo(t),r=fa(t,e);if(r!==null){var n=Nn();Gs(r,t,e,n)}g_(t,e)}};PI=function(){return Rt};RI=function(t,e){var r=Rt;try{return Rt=t,e()}finally{Rt=r}};Cw=function(t,e,r){switch(e){case"input":if(ww(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Jv(n);if(!i)throw Error(ue(90));uI(n),ww(n,i)}}}break;case"textarea":hI(t,r);break;case"select":e=r.value,e!=null&&iu(t,!!r.multiple,e,!1)}};yI=d_;wI=Ol;var x$={usingClientEntryPoint:!1,Events:[Km,Kc,Jv,vI,xI,d_]},qd={findFiberByHostInstance:pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y$={bundleType:qd.bundleType,version:qd.version,rendererPackageName:qd.rendererPackageName,rendererConfig:qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_I(t),t===null?null:t.stateNode},findFiberByHostInstance:qd.findFiberByHostInstance||g$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{Kv=fp.inject(y$),wi=fp}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x$;ms.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x_(e))throw Error(ue(200));return p$(t,e,null,r)};ms.createRoot=function(t,e){if(!x_(t))throw Error(ue(299));var r=!1,n="",i=tP;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=p_(t,1,!1,null,null,r,!1,n,i),t[ma]=e.current,Yh(t.nodeType===8?t.parentNode:t),new v_(e)};ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=_I(e),t=t===null?null:t.stateNode,t};ms.flushSync=function(t){return Ol(t)};ms.hydrate=function(t,e,r){if(!ox(e))throw Error(ue(200));return lx(null,t,e,!0,r)};ms.hydrateRoot=function(t,e,r){if(!x_(t))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=tP;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=eP(e,null,t,1,r??null,i,!1,a,o),t[ma]=e.current,Yh(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new ax(e)};ms.render=function(t,e,r){if(!ox(e))throw Error(ue(200));return lx(null,t,e,!1,r)};ms.unmountComponentAtNode=function(t){if(!ox(t))throw Error(ue(40));return t._reactRootContainer?(Ol(function(){lx(null,null,t,!1,function(){t._reactRootContainer=null,t[ma]=null})}),!0):!1};ms.unstable_batchedUpdates=d_;ms.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ox(r))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return lx(t,e,r,!1,n)};ms.version="18.3.1-next-f1338f8080-20240426";function rP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rP)}catch(t){console.error(t)}}rP(),rI.exports=ms;var rd=rI.exports;const w$=Hv(rd);var nP,s2=rd;nP=s2.createRoot,s2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sm(){return sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sm.apply(this,arguments)}var so;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(so||(so={}));const i2="popstate";function b$(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:l="",hash:c=""}=ic(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ab("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:qg(a))}function n(i,a){y_(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return _$(e,r,n,t)}function wr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j$(){return Math.random().toString(36).substr(2,8)}function a2(t,e){return{usr:t.state,key:t.key,idx:e}}function ab(t,e,r,n){return r===void 0&&(r=null),sm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ic(e):e,{state:r,key:e&&e.key||n||j$()})}function qg(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ic(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function _$(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=so.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(sm({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=so.Pop;let j=d(),w=j==null?null:j-u;u=j,c&&c({action:l,location:y.location,delta:w})}function m(j,w){l=so.Push;let x=ab(y.location,j,w);r&&r(x,j),u=d()+1;let b=a2(x,u),N=y.createHref(x);try{o.pushState(b,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(N)}a&&c&&c({action:l,location:y.location,delta:1})}function g(j,w){l=so.Replace;let x=ab(y.location,j,w);r&&r(x,j),u=d();let b=a2(x,u),N=y.createHref(x);o.replaceState(b,"",N),a&&c&&c({action:l,location:y.location,delta:0})}function v(j){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof j=="string"?j:qg(j);return x=x.replace(/ $/,"%20"),wr(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let y={get action(){return l},get location(){return t(i,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(i2,h),c=j,()=>{i.removeEventListener(i2,h),c=null}},createHref(j){return e(i,j)},createURL:v,encodeLocation(j){let w=v(j);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(j){return o.go(j)}};return y}var o2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(o2||(o2={}));function N$(t,e,r){return r===void 0&&(r="/"),S$(t,e,r,!1)}function S$(t,e,r,n){let i=typeof e=="string"?ic(e):e,a=w_(i.pathname||"/",r);if(a==null)return null;let o=sP(t);E$(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=L$(a);l=M$(o[c],u,n)}return l}function sP(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(wr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=po([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sP(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:R$(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of iP(a.path))i(a,o,c)}),e}function iP(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=iP(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function E$(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:D$(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const C$=/^:[\w-]+$/,k$=3,T$=2,I$=1,A$=10,P$=-2,l2=t=>t==="*";function R$(t,e){let r=t.split("/"),n=r.length;return r.some(l2)&&(n+=P$),e&&(n+=T$),r.filter(i=>!l2(i)).reduce((i,a)=>i+(C$.test(a)?k$:a===""?I$:A$),n)}function D$(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function M$(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=c2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=c2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:po([a,h.pathname]),pathnameBase:U$(po([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=po([a,h.pathnameBase]))}return o}function c2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=O$(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[h];return g&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function O$(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),y_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function L$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return y_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function w_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function V$(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ic(t):t;return{pathname:r?r.startsWith("/")?r:F$(r,e):e,search:z$(n),hash:B$(i)}}function F$(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function p0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $$(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function b_(t,e){let r=$$(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function j_(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ic(t):(i=sm({},t),wr(!i.pathname||!i.pathname.includes("?"),p0("?","pathname","search",i)),wr(!i.pathname||!i.pathname.includes("#"),p0("#","pathname","hash",i)),wr(!i.search||!i.search.includes("#"),p0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=V$(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const po=t=>t.join("/").replace(/\/\/+/g,"/"),U$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aP=["post","put","patch","delete"];new Set(aP);const W$=["get",...aP];new Set(W$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},im.apply(this,arguments)}const __=p.createContext(null),H$=p.createContext(null),$o=p.createContext(null),cx=p.createContext(null),Ta=p.createContext({outlet:null,matches:[],isDataRoute:!1}),oP=p.createContext(null);function G$(t,e){let{relative:r}=e===void 0?{}:e;nd()||wr(!1);let{basename:n,navigator:i}=p.useContext($o),{hash:a,pathname:o,search:l}=cP(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:po([n,o])),i.createHref({pathname:c,search:l,hash:a})}function nd(){return p.useContext(cx)!=null}function Uo(){return nd()||wr(!1),p.useContext(cx).location}function lP(t){p.useContext($o).static||p.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=p.useContext(Ta);return t?aU():K$()}function K$(){nd()||wr(!1);let t=p.useContext(__),{basename:e,future:r,navigator:n}=p.useContext($o),{matches:i}=p.useContext(Ta),{pathname:a}=Uo(),o=JSON.stringify(b_(i,r.v7_relativeSplatPath)),l=p.useRef(!1);return lP(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=j_(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:po([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,a,t])}function N_(){let{matches:t}=p.useContext(Ta),e=t[t.length-1];return e?e.params:{}}function cP(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=p.useContext($o),{matches:i}=p.useContext(Ta),{pathname:a}=Uo(),o=JSON.stringify(b_(i,n.v7_relativeSplatPath));return p.useMemo(()=>j_(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function Y$(t,e){return Q$(t,e)}function Q$(t,e,r,n){nd()||wr(!1);let{navigator:i}=p.useContext($o),{matches:a}=p.useContext(Ta),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Uo(),d;if(e){var h;let j=typeof e=="string"?ic(e):e;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||wr(!1),d=j}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let v=N$(t,{pathname:g}),y=tU(v&&v.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:po([c,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:po([c,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,r,n);return e&&y?p.createElement(cx.Provider,{value:{location:im({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:so.Pop}},y):y}function X$(){let t=iU(),e=q$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),r?p.createElement("pre",{style:i},r):null,null)}const J$=p.createElement(X$,null);class Z$ extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?p.createElement(Ta.Provider,{value:this.props.routeContext},p.createElement(oP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eU(t){let{routeContext:e,match:r,children:n}=t,i=p.useContext(__);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Ta.Provider,{value:e},n)}function tU(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||wr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let g,v=!1,y=null,j=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||J$,c&&(u<0&&m===0?(v=!0,j=null):u===m&&(v=!0,j=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),x=()=>{let b;return g?b=y:v?b=j:h.route.Component?b=p.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,p.createElement(eU,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(Z$,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var uP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uP||{}),Wg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wg||{});function rU(t){let e=p.useContext(__);return e||wr(!1),e}function nU(t){let e=p.useContext(H$);return e||wr(!1),e}function sU(t){let e=p.useContext(Ta);return e||wr(!1),e}function dP(t){let e=sU(),r=e.matches[e.matches.length-1];return r.route.id||wr(!1),r.route.id}function iU(){var t;let e=p.useContext(oP),r=nU(Wg.UseRouteError),n=dP(Wg.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function aU(){let{router:t}=rU(uP.UseNavigateStable),e=dP(Wg.UseNavigateStable),r=p.useRef(!1);return lP(()=>{r.current=!0}),p.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,im({fromRouteId:e},a)))},[t,e])}function oU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hP(t){let{to:e,replace:r,state:n,relative:i}=t;nd()||wr(!1);let{future:a,static:o}=p.useContext($o),{matches:l}=p.useContext(Ta),{pathname:c}=Uo(),u=kr(),d=j_(e,b_(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function Ft(t){wr(!1)}function lU(t){let{basename:e="/",children:r=null,location:n,navigationType:i=so.Pop,navigator:a,static:o=!1,future:l}=t;nd()&&wr(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:o,future:im({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=ic(n));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:v="default"}=n,y=p.useMemo(()=>{let j=w_(d,c);return j==null?null:{location:{pathname:j,search:h,hash:m,state:g,key:v},navigationType:i}},[c,d,h,m,g,v,i]);return y==null?null:p.createElement($o.Provider,{value:u},p.createElement(cx.Provider,{children:r,value:y}))}function cU(t){let{children:e,location:r}=t;return Y$(ob(e),r)}new Promise(()=>{});function ob(t,e){e===void 0&&(e=[]);let r=[];return p.Children.forEach(t,(n,i)=>{if(!p.isValidElement(n))return;let a=[...e,i];if(n.type===p.Fragment){r.push.apply(r,ob(n.props.children,a));return}n.type!==Ft&&wr(!1),!n.props.index||!n.props.children||wr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ob(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lb.apply(this,arguments)}function uU(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function dU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hU(t,e){return t.button===0&&(!e||e==="_self")&&!dU(t)}function cb(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function mU(t,e){let r=cb(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}const fU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pU="6";try{window.__reactRouterVersion=pU}catch{}const gU="startTransition",u2=eI[gU];function vU(t){let{basename:e,children:r,future:n,window:i}=t,a=p.useRef();a.current==null&&(a.current=b$({window:i,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&u2?u2(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>oU(n),[n]),p.createElement(lU,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const xU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=p.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=uU(e,fU),{basename:g}=p.useContext($o),v,y=!1;if(typeof u=="string"&&yU.test(u)&&(v=u,xU))try{let b=new URL(window.location.href),N=u.startsWith("//")?new URL(b.protocol+u):new URL(u),C=w_(N.pathname,g);N.origin===b.origin&&C!=null?u=C+N.search+N.hash:y=!0}catch{}let j=G$(u,{relative:i}),w=wU(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});function x(b){n&&n(b),b.defaultPrevented||w(b)}return p.createElement("a",lb({},m,{href:v||j,onClick:y||a?n:x,ref:r,target:c}))});var d2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(d2||(d2={}));var h2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h2||(h2={}));function wU(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=kr(),u=Uo(),d=cP(t,{relative:o});return p.useCallback(h=>{if(hU(h,r)){h.preventDefault();let m=n!==void 0?n:qg(u)===qg(d);c(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,i,r,t,a,o,l])}function ux(t){let e=p.useRef(cb(t)),r=p.useRef(!1),n=Uo(),i=p.useMemo(()=>mU(n.search,r.current?null:e.current),[n.search]),a=kr(),o=p.useCallback((l,c)=>{const u=cb(typeof l=="function"?l(i):l);r.current=!0,a("?"+u,c)},[a,i]);return[i,o]}var Hg=["light","dark"],S_="(prefers-color-scheme: dark)",bU=typeof window>"u",E_=p.createContext(void 0),jU={setTheme:t=>{},themes:[]},_U=()=>{var t;return(t=p.useContext(E_))!=null?t:jU},NU=t=>p.useContext(E_)?t.children:p.createElement(EU,{...t}),SU=["light","dark"],EU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:i="theme",themes:a=SU,defaultTheme:o=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=p.useState(()=>m2(i,o)),[g,v]=p.useState(()=>m2(i)),y=c?Object.values(c):a,j=p.useCallback(N=>{let C=N;if(!C)return;N==="system"&&r&&(C=f2());let P=c?c[C]:C,T=e?kU():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...y),P&&k.classList.add(P)):P?k.setAttribute(l,P):k.removeAttribute(l),n){let D=Hg.includes(o)?o:null,E=Hg.includes(C)?C:D;k.style.colorScheme=E}T==null||T()},[]),w=p.useCallback(N=>{let C=typeof N=="function"?N(N):N;m(C);try{localStorage.setItem(i,C)}catch{}},[t]),x=p.useCallback(N=>{let C=f2(N);v(C),h==="system"&&r&&!t&&j("system")},[h,t]);p.useEffect(()=>{let N=window.matchMedia(S_);return N.addListener(x),x(N),()=>N.removeListener(x)},[x]),p.useEffect(()=>{let N=C=>{if(C.key!==i)return;let P=C.newValue||o;w(P)};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[w]),p.useEffect(()=>{j(t??h)},[t,h]);let b=p.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?g:h,themes:r?[...a,"system"]:a,systemTheme:r?g:void 0}),[h,w,t,g,r,a]);return p.createElement(E_.Provider,{value:b},p.createElement(CU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:i,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:y,nonce:d}),u)},CU=p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=i?Hg.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,y=!1,j=!0)=>{let w=o?o[v]:v,x=y?v+"|| ''":`'${w}'`,b="";return i&&j&&!y&&Hg.includes(v)&&(b+=`d.style.colorScheme = '${v}';`),r==="class"?y||w?b+=`c.add(${x})`:b+="null":w&&(b+=`d[s](n,${x})`),b},g=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${S_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})}),m2=(t,e)=>{if(bU)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},kU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},f2=t=>(t||(t=window.matchMedia(S_)),t.matches?"dark":"light");let TU={data:""},IU=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||TU,AU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,PU=/\/\*[^]*?\*\/|  +/g,p2=/\n+/g,Ka=(t,e)=>{let r="",n="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":n+=a[1]=="f"?Ka(o,a):a+"{"+Ka(o,a[1]=="k"?"":e)+"}":typeof o=="object"?n+=Ka(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ka.p?Ka.p(a,o):a+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+n},$i={},mP=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+mP(t[r]);return e}return t},RU=(t,e,r,n,i)=>{let a=mP(t),o=$i[a]||($i[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!$i[o]){let c=a!==t?t:(u=>{let d,h,m=[{}];for(;d=AU.exec(u.replace(PU,""));)d[4]?m.shift():d[3]?(h=d[3].replace(p2," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(p2," ").trim();return m[0]})(t);$i[o]=Ka(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&$i.g?$i.g:null;return r&&($i.g=$i[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})($i[o],e,n,l),o},DU=(t,e,r)=>t.reduce((n,i,a)=>{let o=e[a];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ka(l,""):l===!1?"":l}return n+i+(o??"")},"");function dx(t){let e=this||{},r=t.call?t(e.p):t;return RU(r.unshift?r.raw?DU(r,[].slice.call(arguments,1),e.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):r,IU(e.target),e.g,e.o,e.k)}let fP,ub,db;dx.bind({g:1});let ga=dx.bind({k:1});function MU(t,e,r,n){Ka.p=e,fP=t,ub=r,db=n}function zo(t,e){let r=this||{};return function(){let n=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;r.p=Object.assign({theme:ub&&ub()},l),r.o=/ *go\d+/.test(c),l.className=dx.apply(r,n)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),db&&u[0]&&db(l),fP(u,l)}return i}}var OU=t=>typeof t=="function",Gg=(t,e)=>OU(t)?t(e):t,LU=(()=>{let t=0;return()=>(++t).toString()})(),pP=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),VU=20,gP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,VU)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return gP(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},eg=[],xl={toasts:[],pausedAt:void 0},ac=t=>{xl=gP(xl,t),eg.forEach(e=>{e(xl)})},FU={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$U=(t={})=>{let[e,r]=p.useState(xl),n=p.useRef(xl);p.useEffect(()=>(n.current!==xl&&r(xl),eg.push(r),()=>{let a=eg.indexOf(r);a>-1&&eg.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||FU[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:i}},UU=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||LU()}),Qm=t=>(e,r)=>{let n=UU(e,t,r);return ac({type:2,toast:n}),n.id},xr=(t,e)=>Qm("blank")(t,e);xr.error=Qm("error");xr.success=Qm("success");xr.loading=Qm("loading");xr.custom=Qm("custom");xr.dismiss=t=>{ac({type:3,toastId:t})};xr.remove=t=>ac({type:4,toastId:t});xr.promise=(t,e,r)=>{let n=xr.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Gg(e.success,i):void 0;return a?xr.success(a,{id:n,...r,...r==null?void 0:r.success}):xr.dismiss(n),i}).catch(i=>{let a=e.error?Gg(e.error,i):void 0;a?xr.error(a,{id:n,...r,...r==null?void 0:r.error}):xr.dismiss(n)}),t};var zU=(t,e)=>{ac({type:1,toast:{id:t,height:e}})},BU=()=>{ac({type:5,time:Date.now()})},Nh=new Map,qU=1e3,WU=(t,e=qU)=>{if(Nh.has(t))return;let r=setTimeout(()=>{Nh.delete(t),ac({type:4,toastId:t})},e);Nh.set(t,r)},HU=t=>{let{toasts:e,pausedAt:r}=$U(t);p.useEffect(()=>{if(r)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&xr.dismiss(l.id);return}return setTimeout(()=>xr.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let n=p.useCallback(()=>{r&&ac({type:6,time:Date.now()})},[r]),i=p.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(g=>(g.position||u)===(a.position||u)&&g.height),h=d.findIndex(g=>g.id===a.id),m=d.filter((g,v)=>v<h&&g.visible).length;return d.filter(g=>g.visible).slice(...l?[m+1]:[0,m]).reduce((g,v)=>g+(v.height||0)+c,0)},[e]);return p.useEffect(()=>{e.forEach(a=>{if(a.dismissed)WU(a.id,a.removeDelay);else{let o=Nh.get(a.id);o&&(clearTimeout(o),Nh.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:zU,startPause:BU,endPause:n,calculateOffset:i}}},GU=ga`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,KU=ga`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YU=ga`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,QU=zo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${GU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${KU} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${YU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,XU=ga`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,JU=zo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${XU} 1s linear infinite;
`,ZU=ga`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,e9=ga`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,t9=zo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${e9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,r9=zo("div")`
  position: absolute;
`,n9=zo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,s9=ga`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,i9=zo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${s9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,a9=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?p.createElement(i9,null,e):e:r==="blank"?null:p.createElement(n9,null,p.createElement(JU,{...n}),r!=="loading"&&p.createElement(r9,null,r==="error"?p.createElement(QU,{...n}):p.createElement(t9,{...n})))},o9=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,l9=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,c9="0%{opacity:0;} 100%{opacity:1;}",u9="0%{opacity:1;} 100%{opacity:0;}",d9=zo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,h9=zo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,m9=(t,e)=>{let r=t.includes("top")?1:-1,[n,i]=pP()?[c9,u9]:[o9(r),l9(r)];return{animation:e?`${ga(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ga(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},f9=p.memo(({toast:t,position:e,style:r,children:n})=>{let i=t.height?m9(t.position||e||"top-center",t.visible):{opacity:0},a=p.createElement(a9,{toast:t}),o=p.createElement(h9,{...t.ariaProps},Gg(t.message,t));return p.createElement(d9,{className:t.className,style:{...i,...r,...t.style}},typeof n=="function"?n({icon:a,message:o}):p.createElement(p.Fragment,null,a,o))});MU(p.createElement);var p9=({id:t,className:e,style:r,onHeightUpdate:n,children:i})=>{let a=p.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return p.createElement("div",{ref:a,className:e,style:r},i)},g9=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...i}},v9=dx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pp=16,x9=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=HU(r);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:pp,left:pp,right:pp,bottom:pp,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),m=g9(d,h);return p.createElement(p9,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?v9:"",style:m},u.type==="custom"?Gg(u.message,u):i?i(u):p.createElement(f9,{toast:u,position:d}))}))},ne=xr,g2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},y9=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},xP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||h==null)throw new w9;const m=a<<2|l>>4;if(n.push(m),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const v=u<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b9=function(t){const e=vP(t);return xP.encodeByteArray(e,!0)},Kg=function(t){return b9(t).replace(/\./g,"")},yP=function(t){try{return xP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=()=>j9().__FIREBASE_DEFAULTS__,N9=()=>{if(typeof process>"u"||typeof g2>"u")return;const t=g2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yP(t[1]);return e&&JSON.parse(e)},hx=()=>{try{return _9()||N9()||S9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wP=t=>{var e,r;return(r=(e=hx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},bP=t=>{const e=wP(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},jP=()=>{var t;return(t=hx())===null||t===void 0?void 0:t.config},_P=t=>{var e;return(e=hx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E9=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kg(JSON.stringify(r)),Kg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function k9(){var t;const e=(t=hx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A9(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P9(){return!k9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EP(){try{return typeof indexedDB=="object"}catch{return!1}}function CP(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function R9(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9="FirebaseError";class Rs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=D9,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oc.prototype.create)}}class oc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?M9(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Rs(i,l,n)}}function M9(t,e){return t.replace(O9,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const O9=/\{\$([^}]+)}/g;function L9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function am(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(v2(a)&&v2(o)){if(!am(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function v2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function sh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ih(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function V9(t,e){const r=new F9(t,e);return r.subscribe.bind(r)}class F9{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");$9(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=g0),i.error===void 0&&(i.error=g0),i.complete===void 0&&(i.complete=g0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $9(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function g0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=1e3,z9=2,B9=4*60*60*1e3,q9=.5;function x2(t,e=U9,r=z9){const n=e*Math.pow(r,t),i=Math.round(q9*n*(Math.random()-.5)*2);return Math.min(B9,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new E9;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G9(e))try{this.getOrInitializeService({instanceIdentifier:dl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=dl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dl){return this.instances.has(e)}getOptions(e=dl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:H9(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=dl){return this.component?this.component.multipleInstances?e:dl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H9(t){return t===dl?void 0:t}function G9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new W9(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const Y9={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},Q9=wt.INFO,X9={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},J9=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=X9[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mx{constructor(e){this.name=e,this._logLevel=Q9,this._logHandler=J9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const Z9=(t,e)=>e.some(r=>t instanceof r);let y2,w2;function ez(){return y2||(y2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tz(){return w2||(w2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kP=new WeakMap,hb=new WeakMap,TP=new WeakMap,v0=new WeakMap,C_=new WeakMap;function rz(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(go(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&kP.set(r,t)}).catch(()=>{}),C_.set(e,t),e}function nz(t){if(hb.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});hb.set(t,e)}let mb={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return hb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TP.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return go(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sz(t){mb=t(mb)}function iz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(x0(this),e,...r);return TP.set(n,e.sort?e.sort():[e]),go(n)}:tz().includes(t)?function(...e){return t.apply(x0(this),e),go(kP.get(this))}:function(...e){return go(t.apply(x0(this),e))}}function az(t){return typeof t=="function"?iz(t):(t instanceof IDBTransaction&&nz(t),Z9(t,ez())?new Proxy(t,mb):t)}function go(t){if(t instanceof IDBRequest)return rz(t);if(v0.has(t))return v0.get(t);const e=az(t);return e!==t&&(v0.set(t,e),C_.set(e,t)),e}const x0=t=>C_.get(t);function IP(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=go(o);return n&&o.addEventListener("upgradeneeded",c=>{n(go(o.result),c.oldVersion,c.newVersion,go(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const oz=["get","getKey","getAll","getAllKeys","count"],lz=["put","add","delete","clear"],y0=new Map;function b2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(y0.get(e))return y0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=lz.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||oz.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),i&&c.done]))[0]};return y0.set(e,a),a}sz(t=>({...t,get:(e,r,n)=>b2(e,r)||t.get(e,r,n),has:(e,r)=>!!b2(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(uz(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function uz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fb="@firebase/app",j2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new mx("@firebase/app"),dz="@firebase/app-compat",hz="@firebase/analytics-compat",mz="@firebase/analytics",fz="@firebase/app-check-compat",pz="@firebase/app-check",gz="@firebase/auth",vz="@firebase/auth-compat",xz="@firebase/database",yz="@firebase/data-connect",wz="@firebase/database-compat",bz="@firebase/functions",jz="@firebase/functions-compat",_z="@firebase/installations",Nz="@firebase/installations-compat",Sz="@firebase/messaging",Ez="@firebase/messaging-compat",Cz="@firebase/performance",kz="@firebase/performance-compat",Tz="@firebase/remote-config",Iz="@firebase/remote-config-compat",Az="@firebase/storage",Pz="@firebase/storage-compat",Rz="@firebase/firestore",Dz="@firebase/vertexai-preview",Mz="@firebase/firestore-compat",Oz="firebase",Lz="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="[DEFAULT]",Vz={[fb]:"fire-core",[dz]:"fire-core-compat",[mz]:"fire-analytics",[hz]:"fire-analytics-compat",[pz]:"fire-app-check",[fz]:"fire-app-check-compat",[gz]:"fire-auth",[vz]:"fire-auth-compat",[xz]:"fire-rtdb",[yz]:"fire-data-connect",[wz]:"fire-rtdb-compat",[bz]:"fire-fn",[jz]:"fire-fn-compat",[_z]:"fire-iid",[Nz]:"fire-iid-compat",[Sz]:"fire-fcm",[Ez]:"fire-fcm-compat",[Cz]:"fire-perf",[kz]:"fire-perf-compat",[Tz]:"fire-rc",[Iz]:"fire-rc-compat",[Az]:"fire-gcs",[Pz]:"fire-gcs-compat",[Rz]:"fire-fst",[Mz]:"fire-fst-compat",[Dz]:"fire-vertex","fire-js":"fire-js",[Oz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new Map,Fz=new Map,gb=new Map;function _2(t,e){try{t.container.addComponent(e)}catch(r){va.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Js(t){const e=t.name;if(gb.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;gb.set(e,t);for(const r of Yg.values())_2(r,t);for(const r of Fz.values())_2(r,t);return!0}function Bo(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function js(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new oc("app","Firebase",$z);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=Lz;function AP(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:pb,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw vo.create("bad-app-name",{appName:String(i)});if(r||(r=jP()),!r)throw vo.create("no-options");const a=Yg.get(i);if(a){if(am(r,a.options)&&am(n,a.config))return a;throw vo.create("duplicate-app",{appName:i})}const o=new K9(i);for(const c of gb.values())o.addComponent(c);const l=new Uz(r,n,o);return Yg.set(i,l),l}function fx(t=pb){const e=Yg.get(t);if(!e&&t===pb&&jP())return AP();if(!e)throw vo.create("no-app",{appName:t});return e}function Hn(t,e,r){var n;let i=(n=Vz[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(l.join(" "));return}Js(new As(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="firebase-heartbeat-database",Bz=1,om="firebase-heartbeat-store";let w0=null;function PP(){return w0||(w0=IP(zz,Bz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(om)}catch(r){console.warn(r)}}}}).catch(t=>{throw vo.create("idb-open",{originalErrorMessage:t.message})})),w0}async function qz(t){try{const r=(await PP()).transaction(om),n=await r.objectStore(om).get(RP(t));return await r.done,n}catch(e){if(e instanceof Rs)va.warn(e.message);else{const r=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});va.warn(r.message)}}}async function N2(t,e){try{const n=(await PP()).transaction(om,"readwrite");await n.objectStore(om).put(e,RP(t)),await n.done}catch(r){if(r instanceof Rs)va.warn(r.message);else{const n=vo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});va.warn(n.message)}}}function RP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=1024,Hz=30*24*60*60*1e3;class Gz{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Yz(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=S2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Hz}),this._storage.overwrite(this._heartbeatsCache))}catch(n){va.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=S2(),{heartbeatsToSend:n,unsentEntries:i}=Kz(this._heartbeatsCache.heartbeats),a=Kg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return va.warn(r),""}}}function S2(){return new Date().toISOString().substring(0,10)}function Kz(t,e=Wz){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),E2(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),E2(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Yz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EP()?CP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await qz(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E2(t){return Kg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(t){Js(new As("platform-logger",e=>new cz(e),"PRIVATE")),Js(new As("heartbeat",e=>new Gz(e),"PRIVATE")),Hn(fb,j2,t),Hn(fb,j2,"esm2017"),Hn("fire-js","")}Qz("");var hi=function(){return hi=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hi.apply(this,arguments)};function Jm(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xz(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function DP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jz=DP,MP=new oc("auth","Firebase",DP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new mx("@firebase/auth");function Zz(t,...e){Qg.logLevel<=wt.WARN&&Qg.warn(`Auth (${lc}): ${t}`,...e)}function tg(t,...e){Qg.logLevel<=wt.ERROR&&Qg.error(`Auth (${lc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t,...e){throw T_(t,...e)}function ji(t,...e){return T_(t,...e)}function k_(t,e,r){const n=Object.assign(Object.assign({},Jz()),{[e]:r});return new oc("auth","Firebase",n).create(e,{appName:t.name})}function Ks(t){return k_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eB(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ps(t,"argument-error"),k_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return MP.create(t,...e)}function Ue(t,e,...r){if(!t)throw T_(e,...r)}function Zi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tg(e),new Error(e)}function xa(t,e){t||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tB(){return C2()==="http:"||C2()==="https:"}function C2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tB()||SP()||"connection"in navigator)?navigator.onLine:!0}function nB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,r){this.shortDelay=e,this.longDelay=r,xa(r>e,"Short delay should be less than long delay!"),this.isMobile=C9()||I9()}get(){return rB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){xa(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=new Zm(3e4,6e4);function Ia(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ii(t,e,r,n,i={}){return LP(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Xm(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return T9()||(u.referrerPolicy="no-referrer"),OP.fetch()(VP(t,t.config.apiHost,r,l),u)})}async function LP(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},sB),e);try{const i=new oB(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw gp(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw gp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw gp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw gp(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw k_(t,d,u);Ps(t,d)}}catch(i){if(i instanceof Rs)throw i;Ps(t,"network-request-failed",{message:String(i)})}}async function ef(t,e,r,n,i={}){const a=await ii(t,e,r,n,i);return"mfaPendingCredential"in a&&Ps(t,"multi-factor-auth-required",{_serverResponse:a}),a}function VP(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?I_(t.config,i):`${t.config.apiScheme}://${i}`}function aB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ji(this.auth,"network-request-failed")),iB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gp(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=ji(t,e,n);return i.customData._tokenResponse=r,i}function k2(t){return t!==void 0&&t.enterprise!==void 0}class lB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return aB(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cB(t,e){return ii(t,"GET","/v2/recaptchaConfig",Ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e){return ii(t,"POST","/v1/accounts:delete",e)}async function FP(t,e){return ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dB(t,e=!1){const r=gt(t),n=await r.getIdToken(e),i=A_(n);Ue(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Sh(b0(i.auth_time)),issuedAtTime:Sh(b0(i.iat)),expirationTime:Sh(b0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function b0(t){return Number(t)*1e3}function A_(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return tg("JWT malformed, contained fewer than 3 sections"),null;try{const i=yP(r);return i?JSON.parse(i):(tg("Failed to decode base64 JWT payload"),null)}catch(i){return tg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function T2(t){const e=A_(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Rs&&hB(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function hB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sh(this.lastLoginAt),this.creationTime=Sh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Ll(t,FP(r,{idToken:n}));Ue(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?$P(a.providerUserInfo):[],l=fB(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new xb(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function rg(t){const e=gt(t);await Xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fB(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function $P(t){return t.map(e=>{var{providerId:r}=e,n=Jm(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(t,e){const r=await LP(t,{},async()=>{const n=Xm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=VP(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",OP.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function gB(t,e){return ii(t,"POST","/v2/accounts:revokeToken",Ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const r=T2(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await pB(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new du;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(Ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Ue(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new du,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ea{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=Jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new xb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Ue(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return dB(this,e)}reload(){return rg(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ea(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Xg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(js(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await Ll(this,uB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,o,l,c,u,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(i=r.email)!==null&&i!==void 0?i:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,v=(o=r.photoURL)!==null&&o!==void 0?o:void 0,y=(l=r.tenantId)!==null&&l!==void 0?l:void 0,j=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,w=(u=r.createdAt)!==null&&u!==void 0?u:void 0,x=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:N,isAnonymous:C,providerData:P,stsTokenManager:T}=r;Ue(b&&T,e,"internal-error");const k=du.fromJSON(this.name,T);Ue(typeof b=="string",e,"internal-error"),La(h,e.name),La(m,e.name),Ue(typeof N=="boolean",e,"internal-error"),Ue(typeof C=="boolean",e,"internal-error"),La(g,e.name),La(v,e.name),La(y,e.name),La(j,e.name),La(w,e.name),La(x,e.name);const D=new ea({uid:b,auth:e,email:m,emailVerified:N,displayName:h,isAnonymous:C,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:k,createdAt:w,lastLoginAt:x});return P&&Array.isArray(P)&&(D.providerData=P.map(E=>Object.assign({},E))),j&&(D._redirectEventId=j),D}static async _fromIdTokenResponse(e,r,n=!1){const i=new du;i.updateFromServerResponse(r);const a=new ea({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Xg(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Ue(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?$P(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new du;l.updateFromIdToken(n);const c=new ea({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Map;function ta(t){xa(t instanceof Function,"Expected a class definition");let e=I2.get(t);return e?(xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}UP.type="NONE";const A2=UP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e,r){return`firebase:${t}:${e}:${r}`}class hu{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=ng(this.userKey,i.apiKey,a),this.fullPersistenceKey=ng("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ea._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new hu(ta(A2),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||ta(A2);const o=ng(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const h=ea._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new hu(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new hu(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GP(e))return"Blackberry";if(KP(e))return"Webos";if(BP(e))return"Safari";if((e.includes("chrome/")||qP(e))&&!e.includes("edge/"))return"Chrome";if(HP(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function zP(t=mn()){return/firefox\//i.test(t)}function BP(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qP(t=mn()){return/crios\//i.test(t)}function WP(t=mn()){return/iemobile/i.test(t)}function HP(t=mn()){return/android/i.test(t)}function GP(t=mn()){return/blackberry/i.test(t)}function KP(t=mn()){return/webos/i.test(t)}function P_(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vB(t=mn()){var e;return P_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xB(){return A9()&&document.documentMode===10}function YP(t=mn()){return P_(t)||HP(t)||KP(t)||GP(t)||/windows phone/i.test(t)||WP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e=[]){let r;switch(t){case"Browser":r=P2(mn());break;case"Worker":r=`${P2(mn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${lc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e={}){return ii(t,"GET","/v2/passwordPolicy",Ia(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=6;class jB{constructor(e){var r,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:bB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R2(this),this.idTokenSubscription=new R2(this),this.beforeStateQueue=new yB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ta(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await hu.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await FP(this,{idToken:e}),n=await ea._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(js(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Xg(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(js(this.app))return Promise.reject(Ks(this));const r=e?gt(e):null;return r&&Ue(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return js(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return js(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wB(this),r=new jB(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await gB(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ta(e)||this._popupRedirectResolver;Ue(r,this,"argument-error"),this.redirectPersistenceManager=await hu.create(this,[ta(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Zz(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Aa(t){return gt(t)}class R2{constructor(e){this.auth=e,this.observer=null,this.addObserver=V9(r=>this.observer=r)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let px={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NB(t){px=t}function XP(t){return px.loadJS(t)}function SB(){return px.recaptchaEnterpriseScript}function EB(){return px.gapiScript}function CB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kB="recaptcha-enterprise",TB="NO_RECAPTCHA";class IB{constructor(e){this.type=kB,this.auth=Aa(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{cB(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new lB(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;k2(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(TB)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&k2(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SB();c.length!==0&&(c+=l),XP(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function D2(t,e,r,n=!1){const i=new IB(t);let a;try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yb(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await D2(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await D2(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t,e){const r=Bo(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(am(a,e??{}))return i;Ps(i,"already-initialized")}return r.initialize({options:e})}function PB(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ta);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function RB(t,e,r){const n=Aa(t);Ue(n._canInitEmulator,n,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=JP(e),{host:o,port:l}=DB(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),MB()}function JP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DB(t){const e=JP(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:M2(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:M2(o)}}}function M2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MB(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,r){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function OB(t,e){return ii(t,"POST","/v1/accounts:update",e)}async function LB(t,e){return ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e){return ef(t,"POST","/v1/accounts:signInWithPassword",Ia(t,e))}async function FB(t,e){return ii(t,"POST","/v1/accounts:sendOobCode",Ia(t,e))}async function $B(t,e){return FB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Ia(t,e))}async function zB(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends R_{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new lm(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new lm(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yb(e,r,"signInWithPassword",VB);case"emailLink":return UB(e,{email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yb(e,n,"signUpPassword",LB);case"emailLink":return zB(e,{idToken:r,email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(t,e){return ef(t,"POST","/v1/accounts:signInWithIdp",Ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB="http://localhost";class Vl extends R_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Vl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ps("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=Jm(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Vl(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return mu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,mu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,mu(e,r)}buildRequest(){const e={requestUri:BB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Xm(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WB(t){const e=sh(ih(t)).link,r=e?sh(ih(e)).deep_link_id:null,n=sh(ih(t)).deep_link_id;return(n?sh(ih(n)).link:null)||n||r||e||t}class D_{constructor(e){var r,n,i,a,o,l;const c=sh(ih(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,h=qB((i=c.mode)!==null&&i!==void 0?i:null);Ue(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=WB(e);try{return new D_(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,r){return lm._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=D_.parseLink(r);return Ue(n,"argument-error"),lm._fromEmailAndCode(e,n.code,n.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends M_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends tf{constructor(){super("facebook.com")}static credential(e){return Vl._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends tf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Vl._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Yi.credential(r,n)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends tf{constructor(){super("github.com")}static credential(e){return Vl._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.GITHUB_SIGN_IN_METHOD="github.com";Qa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends tf{constructor(){super("twitter.com")}static credential(e,r){return Vl._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Xa.credential(r,n)}catch{return null}}}Xa.TWITTER_SIGN_IN_METHOD="twitter.com";Xa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e){return ef(t,"POST","/v1/accounts:signUp",Ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ea._fromIdTokenResponse(e,n,i),o=O2(n);return new Fl({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=O2(n);return new Fl({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function O2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Rs{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Jg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Jg(e,r,n,i)}}function ZP(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Jg._fromErrorAndOperation(t,a,e,n):a})}async function GB(t,e,r=!1){const n=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Fl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e,r=!1){const{auth:n}=t;if(js(n.app))return Promise.reject(Ks(n));const i="reauthenticate";try{const a=await Ll(t,ZP(n,i,e,t),r);Ue(a.idToken,n,"internal-error");const o=A_(a.idToken);Ue(o,n,"internal-error");const{sub:l}=o;return Ue(t.uid===l,n,"user-mismatch"),Fl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ps(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(t,e,r=!1){if(js(t.app))return Promise.reject(Ks(t));const n="signIn",i=await ZP(t,n,e),a=await Fl._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function KB(t,e){return tR(Aa(t),e)}async function L2(t,e){return eR(gt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t,e,r){var n;Ue(((n=r.url)===null||n===void 0?void 0:n.length)>0,t,"invalid-continue-uri"),Ue(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(Ue(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(Ue(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t){const e=Aa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nR(t,e,r){if(js(t.app))return Promise.reject(Ks(t));const n=Aa(t),o=await yb(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&rR(t),c}),l=await Fl._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function QB(t,e,r){return js(t.app)?Promise.reject(Ks(t)):KB(gt(t),_o.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&rR(t),n})}async function V2(t,e){const r=gt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&YB(r.auth,i,e);const{email:a}=await $B(r.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,e){return ii(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=gt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Ll(n,XB(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function JB(t,e){const r=gt(t);return js(r.auth.app)?Promise.reject(Ks(r.auth)):sR(r,e,null)}function ZB(t,e){return sR(gt(t),null,e)}async function sR(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),r&&(a.password=r);const o=await Ll(t,OB(n,a));await t._updateTokensIfNecessary(o,!0)}function e7(t,e,r,n){return gt(t).onIdTokenChanged(e,r,n)}function t7(t,e,r){return gt(t).beforeAuthStateChanged(e,r)}function r7(t,e,r,n){return gt(t).onAuthStateChanged(e,r,n)}function n7(t){return gt(t).signOut()}async function s7(t){return gt(t).delete()}const Zg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Zg,"1"),this.storage.removeItem(Zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=1e3,a7=10;class aR extends iR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);xB()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,a7):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},i7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}aR.type="LOCAL";const o7=aR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends iR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}oR.type="SESSION";const lR=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new gx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async u=>u(r.origin,a)),c=await l7(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=O_("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function u7(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function d7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function m7(){return cR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebaseLocalStorageDb",f7=1,ev="firebaseLocalStorage",dR="fbase_key";class rf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function vx(t,e){return t.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function p7(){const t=indexedDB.deleteDatabase(uR);return new rf(t).toPromise()}function wb(){const t=indexedDB.open(uR,f7);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(ev,{keyPath:dR})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(ev)?e(n):(n.close(),await p7(),e(await wb()))})})}async function F2(t,e,r){const n=vx(t,!0).put({[dR]:e,value:r});return new rf(n).toPromise()}async function g7(t,e){const r=vx(t,!1).get(e),n=await new rf(r).toPromise();return n===void 0?null:n.value}function $2(t,e){const r=vx(t,!0).delete(e);return new rf(r).toPromise()}const v7=800,x7=3;class hR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wb(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>x7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gx._getInstance(m7()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await d7(),!this.activeServiceWorker)return;this.sender=new c7(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wb();return await F2(e,Zg,"1"),await $2(e,Zg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>F2(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>g7(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>$2(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=vx(i,!1).getAll();return new rf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hR.type="LOCAL";const y7=hR;new Zm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e){return e?ta(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends R_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return mu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return mu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function w7(t){return tR(t.auth,new L_(t),t.bypassAuthState)}function b7(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),eR(r,new L_(t),t.bypassAuthState)}async function j7(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),GB(r,new L_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w7;case"linkViaPopup":case"linkViaRedirect":return j7;case"reauthViaPopup":case"reauthViaRedirect":return b7;default:Ps(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new Zm(2e3,1e4);class tu extends fR{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,tu.currentPopupAction&&tu.currentPopupAction.cancel(),tu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=O_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_7.get())};e()}}tu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7="pendingRedirect",sg=new Map;class S7 extends fR{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=sg.get(this.auth._key());if(!e){try{const n=await E7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}sg.set(this.auth._key(),e)}return this.bypassAuthState||sg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E7(t,e){const r=gR(e),n=pR(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}async function C7(t,e){return pR(t)._set(gR(e),"true")}function k7(t,e){sg.set(t._key(),e)}function pR(t){return ta(t._redirectPersistence)}function gR(t){return ng(N7,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(t,e,r){return I7(t,e,r)}async function I7(t,e,r){if(js(t.app))return Promise.reject(Ks(t));const n=Aa(t);eB(t,e,M_),await n._initializationPromise;const i=mR(n,r);return await C7(i,n),i._openRedirect(n,e,"signInViaRedirect")}async function A7(t,e){return await Aa(t)._initializationPromise,vR(t,e,!1)}async function vR(t,e,r=!1){if(js(t.app))return Promise.reject(Ks(t));const n=Aa(t),i=mR(n,e),o=await new S7(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=10*60*1e3;class R7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D7(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!xR(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ji(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P7&&this.cachedEventUids.clear(),this.cachedEventUids.has(U2(e))}saveEventToCache(e){this.cachedEventUids.add(U2(e)),this.lastProcessedEventTime=Date.now()}}function U2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(t,e={}){return ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L7=/^https?/;async function V7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M7(t);for(const r of e)try{if(F7(r))return}catch{}Ps(t,"unauthorized-domain")}function F7(t){const e=vb(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!L7.test(r))return!1;if(O7.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=new Zm(3e4,6e4);function z2(){const t=_i().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function U7(t){return new Promise((e,r)=>{var n,i,a;function o(){z2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z2(),r(ji(t,"network-request-failed"))},timeout:$7.get()})}if(!((i=(n=_i().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=_i().gapi)===null||a===void 0)&&a.load)o();else{const l=CB("iframefcb");return _i()[l]=()=>{gapi.load?o():r(ji(t,"network-request-failed"))},XP(`${EB()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw ig=null,e})}let ig=null;function z7(t){return ig=ig||U7(t),ig}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new Zm(5e3,15e3),q7="__/auth/iframe",W7="emulator/auth/iframe",H7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K7(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?I_(e,W7):`https://${t.config.authDomain}/${q7}`,n={apiKey:e.apiKey,appName:t.name,v:lc},i=G7.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Xm(n).slice(1)}`}async function Y7(t){const e=await z7(t),r=_i().gapi;return Ue(r,t,"internal-error"),e.open({where:document.body,url:K7(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H7,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=ji(t,"network-request-failed"),l=_i().setTimeout(()=>{a(o)},B7.get());function c(){_i().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X7=500,J7=600,Z7="_blank",eq="http://localhost";class B2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tq(t,e,r,n=X7,i=J7){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Q7),{width:n.toString(),height:i.toString(),top:a,left:o}),u=mn().toLowerCase();r&&(l=qP(u)?Z7:r),zP(u)&&(e=e||eq,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(vB(u)&&l!=="_self")return rq(e||"",l),new B2(null);const h=window.open(e||"",l,d);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new B2(h)}function rq(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="__/auth/handler",sq="emulator/auth/handler",iq=encodeURIComponent("fac");async function q2(t,e,r,n,i,a){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:lc,eventId:i};if(e instanceof M_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",L9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof tf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${iq}=${encodeURIComponent(c)}`:"";return`${aq(t)}?${Xm(l).slice(1)}${u}`}function aq({config:t}){return t.emulator?I_(t,sq):`https://${t.authDomain}/${nq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="webStorageSupport";class oq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lR,this._completeRedirectFn=vR,this._overrideRedirectResult=k7}async _openPopup(e,r,n,i){var a;xa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await q2(e,r,n,vb(),i);return tq(e,o,O_())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await q2(e,r,n,vb(),i);return u7(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(xa(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Y7(e),n=new R7(e);return r.register("authEvent",i=>(Ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(j0,{type:j0},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[j0];o!==void 0&&r(!!o),Ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=V7(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return YP()||BP()||P_()}}const lq=oq;var W2="@firebase/auth",H2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dq(t){Js(new As("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QP(t)},u=new _B(n,i,a,c);return PB(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Js(new As("auth-internal",e=>{const r=Aa(e.getProvider("auth").getImmediate());return(n=>new cq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(W2,H2,uq(t)),Hn(W2,H2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=5*60,mq=_P("authIdTokenMaxAge")||hq;let G2=null;const fq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>mq)return;const i=r==null?void 0:r.token;G2!==i&&(G2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pq(t=fx()){const e=Bo(t,"auth");if(e.isInitialized())return e.getImmediate();const r=AB(t,{popupRedirectResolver:lq,persistence:[y7,o7,lR]}),n=_P("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=fq(a.toString());t7(r,o,()=>o(r.currentUser)),e7(r,l=>o(l))}}const i=wP("auth");return i&&RB(r,`http://${i}`),r}function gq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NB({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=ji("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",gq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dq("Browser");var vq="firebase",xq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn(vq,xq,"app");var K2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nl,yR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,k){function D(){}D.prototype=k.prototype,T.D=k.prototype,T.prototype=new D,T.prototype.constructor=T,T.C=function(E,A,R){for(var S=Array(arguments.length-2),V=2;V<arguments.length;V++)S[V-2]=arguments[V];return k.prototype[A].apply(E,S)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,k,D){D||(D=0);var E=Array(16);if(typeof k=="string")for(var A=0;16>A;++A)E[A]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(A=0;16>A;++A)E[A]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=T.g[0],D=T.g[1],A=T.g[2];var R=T.g[3],S=k+(R^D&(A^R))+E[0]+3614090360&4294967295;k=D+(S<<7&4294967295|S>>>25),S=R+(A^k&(D^A))+E[1]+3905402710&4294967295,R=k+(S<<12&4294967295|S>>>20),S=A+(D^R&(k^D))+E[2]+606105819&4294967295,A=R+(S<<17&4294967295|S>>>15),S=D+(k^A&(R^k))+E[3]+3250441966&4294967295,D=A+(S<<22&4294967295|S>>>10),S=k+(R^D&(A^R))+E[4]+4118548399&4294967295,k=D+(S<<7&4294967295|S>>>25),S=R+(A^k&(D^A))+E[5]+1200080426&4294967295,R=k+(S<<12&4294967295|S>>>20),S=A+(D^R&(k^D))+E[6]+2821735955&4294967295,A=R+(S<<17&4294967295|S>>>15),S=D+(k^A&(R^k))+E[7]+4249261313&4294967295,D=A+(S<<22&4294967295|S>>>10),S=k+(R^D&(A^R))+E[8]+1770035416&4294967295,k=D+(S<<7&4294967295|S>>>25),S=R+(A^k&(D^A))+E[9]+2336552879&4294967295,R=k+(S<<12&4294967295|S>>>20),S=A+(D^R&(k^D))+E[10]+4294925233&4294967295,A=R+(S<<17&4294967295|S>>>15),S=D+(k^A&(R^k))+E[11]+2304563134&4294967295,D=A+(S<<22&4294967295|S>>>10),S=k+(R^D&(A^R))+E[12]+1804603682&4294967295,k=D+(S<<7&4294967295|S>>>25),S=R+(A^k&(D^A))+E[13]+4254626195&4294967295,R=k+(S<<12&4294967295|S>>>20),S=A+(D^R&(k^D))+E[14]+2792965006&4294967295,A=R+(S<<17&4294967295|S>>>15),S=D+(k^A&(R^k))+E[15]+1236535329&4294967295,D=A+(S<<22&4294967295|S>>>10),S=k+(A^R&(D^A))+E[1]+4129170786&4294967295,k=D+(S<<5&4294967295|S>>>27),S=R+(D^A&(k^D))+E[6]+3225465664&4294967295,R=k+(S<<9&4294967295|S>>>23),S=A+(k^D&(R^k))+E[11]+643717713&4294967295,A=R+(S<<14&4294967295|S>>>18),S=D+(R^k&(A^R))+E[0]+3921069994&4294967295,D=A+(S<<20&4294967295|S>>>12),S=k+(A^R&(D^A))+E[5]+3593408605&4294967295,k=D+(S<<5&4294967295|S>>>27),S=R+(D^A&(k^D))+E[10]+38016083&4294967295,R=k+(S<<9&4294967295|S>>>23),S=A+(k^D&(R^k))+E[15]+3634488961&4294967295,A=R+(S<<14&4294967295|S>>>18),S=D+(R^k&(A^R))+E[4]+3889429448&4294967295,D=A+(S<<20&4294967295|S>>>12),S=k+(A^R&(D^A))+E[9]+568446438&4294967295,k=D+(S<<5&4294967295|S>>>27),S=R+(D^A&(k^D))+E[14]+3275163606&4294967295,R=k+(S<<9&4294967295|S>>>23),S=A+(k^D&(R^k))+E[3]+4107603335&4294967295,A=R+(S<<14&4294967295|S>>>18),S=D+(R^k&(A^R))+E[8]+1163531501&4294967295,D=A+(S<<20&4294967295|S>>>12),S=k+(A^R&(D^A))+E[13]+2850285829&4294967295,k=D+(S<<5&4294967295|S>>>27),S=R+(D^A&(k^D))+E[2]+4243563512&4294967295,R=k+(S<<9&4294967295|S>>>23),S=A+(k^D&(R^k))+E[7]+1735328473&4294967295,A=R+(S<<14&4294967295|S>>>18),S=D+(R^k&(A^R))+E[12]+2368359562&4294967295,D=A+(S<<20&4294967295|S>>>12),S=k+(D^A^R)+E[5]+4294588738&4294967295,k=D+(S<<4&4294967295|S>>>28),S=R+(k^D^A)+E[8]+2272392833&4294967295,R=k+(S<<11&4294967295|S>>>21),S=A+(R^k^D)+E[11]+1839030562&4294967295,A=R+(S<<16&4294967295|S>>>16),S=D+(A^R^k)+E[14]+4259657740&4294967295,D=A+(S<<23&4294967295|S>>>9),S=k+(D^A^R)+E[1]+2763975236&4294967295,k=D+(S<<4&4294967295|S>>>28),S=R+(k^D^A)+E[4]+1272893353&4294967295,R=k+(S<<11&4294967295|S>>>21),S=A+(R^k^D)+E[7]+4139469664&4294967295,A=R+(S<<16&4294967295|S>>>16),S=D+(A^R^k)+E[10]+3200236656&4294967295,D=A+(S<<23&4294967295|S>>>9),S=k+(D^A^R)+E[13]+681279174&4294967295,k=D+(S<<4&4294967295|S>>>28),S=R+(k^D^A)+E[0]+3936430074&4294967295,R=k+(S<<11&4294967295|S>>>21),S=A+(R^k^D)+E[3]+3572445317&4294967295,A=R+(S<<16&4294967295|S>>>16),S=D+(A^R^k)+E[6]+76029189&4294967295,D=A+(S<<23&4294967295|S>>>9),S=k+(D^A^R)+E[9]+3654602809&4294967295,k=D+(S<<4&4294967295|S>>>28),S=R+(k^D^A)+E[12]+3873151461&4294967295,R=k+(S<<11&4294967295|S>>>21),S=A+(R^k^D)+E[15]+530742520&4294967295,A=R+(S<<16&4294967295|S>>>16),S=D+(A^R^k)+E[2]+3299628645&4294967295,D=A+(S<<23&4294967295|S>>>9),S=k+(A^(D|~R))+E[0]+4096336452&4294967295,k=D+(S<<6&4294967295|S>>>26),S=R+(D^(k|~A))+E[7]+1126891415&4294967295,R=k+(S<<10&4294967295|S>>>22),S=A+(k^(R|~D))+E[14]+2878612391&4294967295,A=R+(S<<15&4294967295|S>>>17),S=D+(R^(A|~k))+E[5]+4237533241&4294967295,D=A+(S<<21&4294967295|S>>>11),S=k+(A^(D|~R))+E[12]+1700485571&4294967295,k=D+(S<<6&4294967295|S>>>26),S=R+(D^(k|~A))+E[3]+2399980690&4294967295,R=k+(S<<10&4294967295|S>>>22),S=A+(k^(R|~D))+E[10]+4293915773&4294967295,A=R+(S<<15&4294967295|S>>>17),S=D+(R^(A|~k))+E[1]+2240044497&4294967295,D=A+(S<<21&4294967295|S>>>11),S=k+(A^(D|~R))+E[8]+1873313359&4294967295,k=D+(S<<6&4294967295|S>>>26),S=R+(D^(k|~A))+E[15]+4264355552&4294967295,R=k+(S<<10&4294967295|S>>>22),S=A+(k^(R|~D))+E[6]+2734768916&4294967295,A=R+(S<<15&4294967295|S>>>17),S=D+(R^(A|~k))+E[13]+1309151649&4294967295,D=A+(S<<21&4294967295|S>>>11),S=k+(A^(D|~R))+E[4]+4149444226&4294967295,k=D+(S<<6&4294967295|S>>>26),S=R+(D^(k|~A))+E[11]+3174756917&4294967295,R=k+(S<<10&4294967295|S>>>22),S=A+(k^(R|~D))+E[2]+718787259&4294967295,A=R+(S<<15&4294967295|S>>>17),S=D+(R^(A|~k))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}n.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var D=k-this.blockSize,E=this.B,A=this.h,R=0;R<k;){if(A==0)for(;R<=D;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<k;)if(E[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,E),A=0;break}}else for(;R<k;)if(E[A++]=T[R++],A==this.blockSize){i(this,E),A=0;break}}this.h=A,this.o+=k},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var D=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=D&255,D/=256;for(this.u(T),T=Array(16),k=D=0;4>k;++k)for(var E=0;32>E;E+=8)T[D++]=this.g[k]>>>E&255;return T};function a(T,k){var D=l;return Object.prototype.hasOwnProperty.call(D,T)?D[T]:D[T]=k(T)}function o(T,k){this.h=k;for(var D=[],E=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;E&&R==k||(D[A]=R,E=!1)}this.g=D}var l={};function c(T){return-128<=T&&128>T?a(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return j(u(-T));for(var k=[],D=1,E=0;T>=D;E++)k[E]=T/D|0,D*=4294967296;return new o(k,0)}function d(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return j(d(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(k,8)),E=h,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),S=parseInt(T.substring(A,A+R),k);8>R?(R=u(Math.pow(k,R)),E=E.j(R).add(u(S))):(E=E.j(D),E=E.add(u(S)))}return E}var h=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-j(this).m();for(var T=0,k=1,D=0;D<this.g.length;D++){var E=this.i(D);T+=(0<=E?E:4294967296+E)*k,k*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(y(this))return"-"+j(this).toString(T);for(var k=u(Math.pow(T,6)),D=this,E="";;){var A=N(D,k).g;D=w(D,A.j(k));var R=((0<D.g.length?D.g[0]:D.h)>>>0).toString(T);if(D=A,v(D))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=w(this,T),y(T)?-1:v(T)?0:1};function j(T){for(var k=T.g.length,D=[],E=0;E<k;E++)D[E]=~T.g[E];return new o(D,~T.h).add(m)}t.abs=function(){return y(this)?j(this):this},t.add=function(T){for(var k=Math.max(this.g.length,T.g.length),D=[],E=0,A=0;A<=k;A++){var R=E+(this.i(A)&65535)+(T.i(A)&65535),S=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);E=S>>>16,R&=65535,S&=65535,D[A]=S<<16|R}return new o(D,D[D.length-1]&-2147483648?-1:0)};function w(T,k){return T.add(j(k))}t.j=function(T){if(v(this)||v(T))return h;if(y(this))return y(T)?j(this).j(j(T)):j(j(this).j(T));if(y(T))return j(this.j(j(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var k=this.g.length+T.g.length,D=[],E=0;E<2*k;E++)D[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<T.g.length;A++){var R=this.i(E)>>>16,S=this.i(E)&65535,V=T.i(A)>>>16,U=T.i(A)&65535;D[2*E+2*A]+=S*U,x(D,2*E+2*A),D[2*E+2*A+1]+=R*U,x(D,2*E+2*A+1),D[2*E+2*A+1]+=S*V,x(D,2*E+2*A+1),D[2*E+2*A+2]+=R*V,x(D,2*E+2*A+2)}for(E=0;E<k;E++)D[E]=D[2*E+1]<<16|D[2*E];for(E=k;E<2*k;E++)D[E]=0;return new o(D,0)};function x(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function b(T,k){this.g=T,this.h=k}function N(T,k){if(v(k))throw Error("division by zero");if(v(T))return new b(h,h);if(y(T))return k=N(j(T),k),new b(j(k.g),j(k.h));if(y(k))return k=N(T,j(k)),new b(j(k.g),k.h);if(30<T.g.length){if(y(T)||y(k))throw Error("slowDivide_ only works with positive integers.");for(var D=m,E=k;0>=E.l(T);)D=C(D),E=C(E);var A=P(D,1),R=P(E,1);for(E=P(E,2),D=P(D,2);!v(E);){var S=R.add(E);0>=S.l(T)&&(A=A.add(D),R=S),E=P(E,1),D=P(D,1)}return k=w(T,A.j(k)),new b(A,k)}for(A=h;0<=T.l(k);){for(D=Math.max(1,Math.floor(T.m()/k.m())),E=Math.ceil(Math.log(D)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=u(D),S=R.j(k);y(S)||0<S.l(T);)D-=E,R=u(D),S=R.j(k);v(R)&&(R=m),A=A.add(R),T=w(T,S)}return new b(A,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var k=Math.max(this.g.length,T.g.length),D=[],E=0;E<k;E++)D[E]=this.i(E)&T.i(E);return new o(D,this.h&T.h)},t.or=function(T){for(var k=Math.max(this.g.length,T.g.length),D=[],E=0;E<k;E++)D[E]=this.i(E)|T.i(E);return new o(D,this.h|T.h)},t.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),D=[],E=0;E<k;E++)D[E]=this.i(E)^T.i(E);return new o(D,this.h^T.h)};function C(T){for(var k=T.g.length+1,D=[],E=0;E<k;E++)D[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(D,T.h)}function P(T,k){var D=k>>5;k%=32;for(var E=T.g.length-D,A=[],R=0;R<E;R++)A[R]=0<k?T.i(R+D)>>>k|T.i(R+D+1)<<32-k:T.i(R+D);return new o(A,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,yR=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Nl=o}).apply(typeof K2<"u"?K2:typeof self<"u"?self:typeof window<"u"?window:{});var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wR,ah,bR,ag,bb,jR,_R,NR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,I){return f==Array.prototype||f==Object.prototype||(f[_]=I.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof vp=="object"&&vp];for(var _=0;_<f.length;++_){var I=f[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=r(this);function i(f,_){if(_)e:{var I=n;f=f.split(".");for(var M=0;M<f.length-1;M++){var G=f[M];if(!(G in I))break e;I=I[G]}f=f[f.length-1],M=I[f],_=_(M),_!=M&&_!=null&&e(I,f,{configurable:!0,writable:!0,value:_})}}function a(f,_){f instanceof String&&(f+="");var I=0,M=!1,G={next:function(){if(!M&&I<f.length){var ee=I++;return{value:_(ee,f[ee]),done:!1}}return M=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(f){return f||function(){return a(this,function(_,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function u(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,I){return f.call.apply(f.bind,arguments)}function h(f,_,I){if(!f)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,M),f.apply(_,G)}}return function(){return f.apply(_,arguments)}}function m(f,_,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(f,_){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function v(f,_){function I(){}I.prototype=_.prototype,f.aa=_.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(M,G,ee){for(var xe=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)xe[Vt-2]=arguments[Vt];return _.prototype[G].apply(M,xe)}}function y(f){const _=f.length;if(0<_){const I=Array(_);for(let M=0;M<_;M++)I[M]=f[M];return I}return[]}function j(f,_){for(let I=1;I<arguments.length;I++){const M=arguments[I];if(c(M)){const G=f.length||0,ee=M.length||0;f.length=G+ee;for(let xe=0;xe<ee;xe++)f[G+xe]=M[xe]}else f.push(M)}}class w{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(f){return/^[\s\xa0]*$/.test(f)}function b(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function N(f){return N[" "](f),f}N[" "]=function(){};var C=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function P(f,_,I){for(const M in f)_.call(I,f[M],M,f)}function T(f,_){for(const I in f)_.call(void 0,f[I],I,f)}function k(f){const _={};for(const I in f)_[I]=f[I];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(f,_){let I,M;for(let G=1;G<arguments.length;G++){M=arguments[G];for(I in M)f[I]=M[I];for(let ee=0;ee<D.length;ee++)I=D[ee],Object.prototype.hasOwnProperty.call(M,I)&&(f[I]=M[I])}}function A(f){var _=1;f=f.split(":");const I=[];for(;0<_&&f.length;)I.push(f.shift()),_--;return f.length&&I.push(f.join(":")),I}function R(f){l.setTimeout(()=>{throw f},0)}function S(){var f=W;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class V{constructor(){this.h=this.g=null}add(_,I){const M=U.get();M.set(_,I),this.h?this.h.next=M:this.g=M,this.h=M}}var U=new w(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let $,L=!1,W=new V,z=()=>{const f=l.Promise.resolve(void 0);$=()=>{f.then(J)}};var J=()=>{for(var f;f=S();){try{f.h.call(f.g)}catch(I){R(I)}var _=U;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}L=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var tt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};l.addEventListener("test",I,_),l.removeEventListener("test",I,_)}catch{}return f}();function vt(f,_){if(Ce.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(C){e:{try{N(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else I=="mouseover"?_=f.fromElement:I=="mouseout"&&(_=f.toElement);this.relatedTarget=_,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ct[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&vt.aa.h.call(this)}}v(vt,Ce);var ct={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function te(f,_,I,M,G){this.listener=f,this.proxy=null,this.src=_,this.type=I,this.capture=!!M,this.ha=G,this.key=++Ze,this.da=this.fa=!1}function pe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Q(f){this.src=f,this.g={},this.h=0}Q.prototype.add=function(f,_,I,M,G){var ee=f.toString();f=this.g[ee],f||(f=this.g[ee]=[],this.h++);var xe=q(f,_,M,G);return-1<xe?(_=f[xe],I||(_.fa=!1)):(_=new te(_,this.src,ee,!!M,G),_.fa=I,f.push(_)),_};function le(f,_){var I=_.type;if(I in f.g){var M=f.g[I],G=Array.prototype.indexOf.call(M,_,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(M,G,1),ee&&(pe(_),f.g[I].length==0&&(delete f.g[I],f.h--))}}function q(f,_,I,M){for(var G=0;G<f.length;++G){var ee=f[G];if(!ee.da&&ee.listener==_&&ee.capture==!!I&&ee.ha==M)return G}return-1}var Z="closure_lm_"+(1e6*Math.random()|0),me={};function Ie(f,_,I,M,G){if(Array.isArray(_)){for(var ee=0;ee<_.length;ee++)Ie(f,_[ee],I,M,G);return null}return I=St(I),f&&f[Ne]?f.K(_,I,u(M)?!!M.capture:!!M,G):He(f,_,I,!1,M,G)}function He(f,_,I,M,G,ee){if(!_)throw Error("Invalid event type");var xe=u(G)?!!G.capture:!!G,Vt=he(f);if(Vt||(f[Z]=Vt=new Q(f)),I=Vt.add(_,I,M,xe,ee),I.proxy)return I;if(M=O(),I.proxy=M,M.src=f,M.listener=I,f.addEventListener)tt||(G=xe),G===void 0&&(G=!1),f.addEventListener(_.toString(),M,G);else if(f.attachEvent)f.attachEvent(Se(_.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return I}function O(){function f(I){return _.call(f.src,f.listener,I)}const _=we;return f}function B(f,_,I,M,G){if(Array.isArray(_))for(var ee=0;ee<_.length;ee++)B(f,_[ee],I,M,G);else M=u(M)?!!M.capture:!!M,I=St(I),f&&f[Ne]?(f=f.i,_=String(_).toString(),_ in f.g&&(ee=f.g[_],I=q(ee,I,M,G),-1<I&&(pe(ee[I]),Array.prototype.splice.call(ee,I,1),ee.length==0&&(delete f.g[_],f.h--)))):f&&(f=he(f))&&(_=f.g[_.toString()],f=-1,_&&(f=q(_,I,M,G)),(I=-1<f?_[f]:null)&&X(I))}function X(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Ne])le(_.i,f);else{var I=f.type,M=f.proxy;_.removeEventListener?_.removeEventListener(I,M,f.capture):_.detachEvent?_.detachEvent(Se(I),M):_.addListener&&_.removeListener&&_.removeListener(M),(I=he(_))?(le(I,f),I.h==0&&(I.src=null,_[Z]=null)):pe(f)}}}function Se(f){return f in me?me[f]:me[f]="on"+f}function we(f,_){if(f.da)f=!0;else{_=new vt(_,this);var I=f.listener,M=f.ha||f.src;f.fa&&X(f),f=I.call(M,_)}return f}function he(f){return f=f[Z],f instanceof Q?f:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(f){return typeof f=="function"?f:(f[Le]||(f[Le]=function(_){return f.handleEvent(_)}),f[Le])}function xt(){oe.call(this),this.i=new Q(this),this.M=this,this.F=null}v(xt,oe),xt.prototype[Ne]=!0,xt.prototype.removeEventListener=function(f,_,I,M){B(this,f,_,I,M)};function bt(f,_){var I,M=f.F;if(M)for(I=[];M;M=M.F)I.push(M);if(f=f.M,M=_.type||_,typeof _=="string")_=new Ce(_,f);else if(_ instanceof Ce)_.target=_.target||f;else{var G=_;_=new Ce(M,f),E(_,G)}if(G=!0,I)for(var ee=I.length-1;0<=ee;ee--){var xe=_.g=I[ee];G=gs(xe,M,!0,_)&&G}if(xe=_.g=f,G=gs(xe,M,!0,_)&&G,G=gs(xe,M,!1,_)&&G,I)for(ee=0;ee<I.length;ee++)xe=_.g=I[ee],G=gs(xe,M,!1,_)&&G}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var I=f.g[_],M=0;M<I.length;M++)pe(I[M]);delete f.g[_],f.h--}}this.F=null},xt.prototype.K=function(f,_,I,M){return this.i.add(String(f),_,!1,I,M)},xt.prototype.L=function(f,_,I,M){return this.i.add(String(f),_,!0,I,M)};function gs(f,_,I,M){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,ee=0;ee<_.length;++ee){var xe=_[ee];if(xe&&!xe.da&&xe.capture==I){var Vt=xe.listener,zr=xe.ha||xe.src;xe.fa&&le(f.i,xe),G=Vt.call(zr,M)!==!1&&G}}return G&&!M.defaultPrevented}function Mf(f,_,I){if(typeof f=="function")I&&(f=m(f,I));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:l.setTimeout(f,_||0)}function yc(f){f.g=Mf(()=>{f.g=null,f.i&&(f.i=!1,yc(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class _d extends oe{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:yc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zo(f){oe.call(this),this.h=f,this.g={}}v(Zo,oe);var Nd=[];function Of(f){P(f.g,function(_,I){this.g.hasOwnProperty(I)&&X(_)},f),f.g={}}Zo.prototype.N=function(){Zo.aa.N.call(this),Of(this)},Zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wc=l.JSON.stringify,jV=l.JSON.parse,_V=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function ky(){}ky.prototype.h=null;function iS(f){return f.h||(f.h=f.i())}function aS(){}var Sd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ty(){Ce.call(this,"d")}v(Ty,Ce);function Iy(){Ce.call(this,"c")}v(Iy,Ce);var el={},oS=null;function Lf(){return oS=oS||new xt}el.La="serverreachability";function lS(f){Ce.call(this,el.La,f)}v(lS,Ce);function Ed(f){const _=Lf();bt(_,new lS(_))}el.STAT_EVENT="statevent";function cS(f,_){Ce.call(this,el.STAT_EVENT,f),this.stat=_}v(cS,Ce);function gn(f){const _=Lf();bt(_,new cS(_,f))}el.Ma="timingevent";function uS(f,_){Ce.call(this,el.Ma,f),this.size=_}v(uS,Ce);function Cd(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},_)}function kd(){this.g=!0}kd.prototype.xa=function(){this.g=!1};function NV(f,_,I,M,G,ee){f.info(function(){if(f.g)if(ee)for(var xe="",Vt=ee.split("&"),zr=0;zr<Vt.length;zr++){var kt=Vt[zr].split("=");if(1<kt.length){var en=kt[0];kt=kt[1];var tn=en.split("_");xe=2<=tn.length&&tn[1]=="type"?xe+(en+"="+kt+"&"):xe+(en+"=redacted&")}}else xe=null;else xe=ee;return"XMLHTTP REQ ("+M+") [attempt "+G+"]: "+_+`
`+I+`
`+xe})}function SV(f,_,I,M,G,ee,xe){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+G+"]: "+_+`
`+I+`
`+ee+" "+xe})}function bc(f,_,I,M){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+CV(f,I)+(M?" "+M:"")})}function EV(f,_){f.info(function(){return"TIMEOUT: "+_})}kd.prototype.info=function(){};function CV(f,_){if(!f.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var M=I[f];if(!(2>M.length)){var G=M[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var xe=1;xe<G.length;xe++)G[xe]=""}}}}return wc(I)}catch{return _}}var Vf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ay;function Ff(){}v(Ff,ky),Ff.prototype.g=function(){return new XMLHttpRequest},Ff.prototype.i=function(){return{}},Ay=new Ff;function Ra(f,_,I,M){this.j=f,this.i=_,this.l=I,this.R=M||1,this.U=new Zo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hS}function hS(){this.i=null,this.g="",this.h=!1}var mS={},Py={};function Ry(f,_,I){f.L=1,f.v=Bf(Vi(_)),f.m=I,f.P=!0,fS(f,null)}function fS(f,_){f.F=Date.now(),$f(f),f.A=Vi(f.v);var I=f.A,M=f.R;Array.isArray(M)||(M=[String(M)]),kS(I.i,"t",M),f.C=0,I=f.j.J,f.h=new hS,f.g=HS(f.j,I?_:null,!f.m),0<f.O&&(f.M=new _d(m(f.Y,f,f.g),f.O)),_=f.U,I=f.g,M=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(Nd[0]=G.toString()),G=Nd);for(var ee=0;ee<G.length;ee++){var xe=Ie(I,G[ee],M||_.handleEvent,!1,_.h||_);if(!xe)break;_.g[xe.key]=xe}_=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Ed(),NV(f.i,f.u,f.A,f.l,f.R,f.m)}Ra.prototype.ca=function(f){f=f.target;const _=this.M;_&&Fi(f)==3?_.j():this.Y(f)},Ra.prototype.Y=function(f){try{if(f==this.g)e:{const tn=Fi(this.g);var _=this.g.Ba();const Nc=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||MS(this.g)))){this.J||tn!=4||_==7||(_==8||0>=Nc?Ed(3):Ed(2)),Dy(this);var I=this.g.Z();this.X=I;t:if(pS(this)){var M=MS(this.g);f="";var G=M.length,ee=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tl(this),Td(this);var xe="";break t}this.h.i=new l.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,f+=this.h.i.decode(M[_],{stream:!(ee&&_==G-1)});M.length=0,this.h.g+=f,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=I==200,SV(this.i,this.u,this.A,this.l,this.R,tn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Vt,zr=this.g;if((Vt=zr.g?zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Vt)){var kt=Vt;break t}}kt=null}if(I=kt)bc(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,My(this,I);else{this.o=!1,this.s=3,gn(12),tl(this),Td(this);break e}}if(this.P){I=!0;let Ms;for(;!this.J&&this.C<xe.length;)if(Ms=kV(this,xe),Ms==Py){tn==4&&(this.s=4,gn(14),I=!1),bc(this.i,this.l,null,"[Incomplete Response]");break}else if(Ms==mS){this.s=4,gn(15),bc(this.i,this.l,xe,"[Invalid Chunk]"),I=!1;break}else bc(this.i,this.l,Ms,null),My(this,Ms);if(pS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||xe.length!=0||this.h.h||(this.s=1,gn(16),I=!1),this.o=this.o&&I,!I)bc(this.i,this.l,xe,"[Invalid Chunked Response]"),tl(this),Td(this);else if(0<xe.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Uy(en),en.M=!0,gn(11))}}else bc(this.i,this.l,xe,null),My(this,xe);tn==4&&tl(this),this.o&&!this.J&&(tn==4?zS(this.j,this):(this.o=!1,$f(this)))}else WV(this.g),I==400&&0<xe.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),tl(this),Td(this)}}}catch{}finally{}};function pS(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function kV(f,_){var I=f.C,M=_.indexOf(`
`,I);return M==-1?Py:(I=Number(_.substring(I,M)),isNaN(I)?mS:(M+=1,M+I>_.length?Py:(_=_.slice(M,M+I),f.C=M+I,_)))}Ra.prototype.cancel=function(){this.J=!0,tl(this)};function $f(f){f.S=Date.now()+f.I,gS(f,f.I)}function gS(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Cd(m(f.ba,f),_)}function Dy(f){f.B&&(l.clearTimeout(f.B),f.B=null)}Ra.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(EV(this.i,this.A),this.L!=2&&(Ed(),gn(17)),tl(this),this.s=2,Td(this)):gS(this,this.S-f)};function Td(f){f.j.G==0||f.J||zS(f.j,f)}function tl(f){Dy(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Of(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function My(f,_){try{var I=f.j;if(I.G!=0&&(I.g==f||Oy(I.h,f))){if(!f.K&&Oy(I.h,f)&&I.G==3){try{var M=I.Da.g.parse(_)}catch{M=null}if(Array.isArray(M)&&M.length==3){var G=M;if(G[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)Yf(I),Gf(I);else break e;$y(I),gn(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&I.v==0&&!I.C&&(I.C=Cd(m(I.Za,I),6e3));if(1>=yS(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else nl(I,11)}else if((f.K||I.g==f)&&Yf(I),!x(_))for(G=I.Da.g.parse(_),_=0;_<G.length;_++){let kt=G[_];if(I.T=kt[0],kt=kt[1],I.G==2)if(kt[0]=="c"){I.K=kt[1],I.ia=kt[2];const en=kt[3];en!=null&&(I.la=en,I.j.info("VER="+I.la));const tn=kt[4];tn!=null&&(I.Aa=tn,I.j.info("SVER="+I.Aa));const Nc=kt[5];Nc!=null&&typeof Nc=="number"&&0<Nc&&(M=1.5*Nc,I.L=M,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const Ms=f.g;if(Ms){const Xf=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xf){var ee=M.h;ee.g||Xf.indexOf("spdy")==-1&&Xf.indexOf("quic")==-1&&Xf.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ly(ee,ee.h),ee.h=null))}if(M.D){const zy=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;zy&&(M.ya=zy,Qt(M.I,M.D,zy))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),M=I;var xe=f;if(M.qa=WS(M,M.J?M.ia:null,M.W),xe.K){wS(M.h,xe);var Vt=xe,zr=M.L;zr&&(Vt.I=zr),Vt.B&&(Dy(Vt),$f(Vt)),M.g=xe}else $S(M);0<I.i.length&&Kf(I)}else kt[0]!="stop"&&kt[0]!="close"||nl(I,7);else I.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?nl(I,7):Fy(I):kt[0]!="noop"&&I.l&&I.l.ta(kt),I.v=0)}}Ed(4)}catch{}}var TV=class{constructor(f,_){this.g=f,this.map=_}};function vS(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xS(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function yS(f){return f.h?1:f.g?f.g.size:0}function Oy(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ly(f,_){f.g?f.g.add(_):f.h=_}function wS(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}vS.prototype.cancel=function(){if(this.i=bS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function bS(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const I of f.g.values())_=_.concat(I.D);return _}return y(f.i)}function IV(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],I=f.length,M=0;M<I;M++)_.push(f[M]);return _}_=[],I=0;for(M in f)_[I++]=f[M];return _}function AV(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var I=0;I<f;I++)_.push(I);return _}_=[],I=0;for(const M in f)_[I++]=M;return _}}}function jS(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var I=AV(f),M=IV(f),G=M.length,ee=0;ee<G;ee++)_.call(void 0,M[ee],I&&I[ee],f)}var _S=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PV(f,_){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var M=f[I].indexOf("="),G=null;if(0<=M){var ee=f[I].substring(0,M);G=f[I].substring(M+1)}else ee=f[I];_(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function rl(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof rl){this.h=f.h,Uf(this,f.j),this.o=f.o,this.g=f.g,zf(this,f.s),this.l=f.l;var _=f.i,I=new Pd;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),NS(this,I),this.m=f.m}else f&&(_=String(f).match(_S))?(this.h=!1,Uf(this,_[1]||"",!0),this.o=Id(_[2]||""),this.g=Id(_[3]||"",!0),zf(this,_[4]),this.l=Id(_[5]||"",!0),NS(this,_[6]||"",!0),this.m=Id(_[7]||"")):(this.h=!1,this.i=new Pd(null,this.h))}rl.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Ad(_,SS,!0),":");var I=this.g;return(I||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Ad(_,SS,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Ad(I,I.charAt(0)=="/"?MV:DV,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Ad(I,LV)),f.join("")};function Vi(f){return new rl(f)}function Uf(f,_,I){f.j=I?Id(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function zf(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function NS(f,_,I){_ instanceof Pd?(f.i=_,VV(f.i,f.h)):(I||(_=Ad(_,OV)),f.i=new Pd(_,f.h))}function Qt(f,_,I){f.i.set(_,I)}function Bf(f){return Qt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Id(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ad(f,_,I){return typeof f=="string"?(f=encodeURI(f).replace(_,RV),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function RV(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var SS=/[#\/\?@]/g,DV=/[#\?:]/g,MV=/[#\?]/g,OV=/[#\?@]/g,LV=/#/g;function Pd(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Da(f){f.g||(f.g=new Map,f.h=0,f.i&&PV(f.i,function(_,I){f.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}t=Pd.prototype,t.add=function(f,_){Da(this),this.i=null,f=jc(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(_),this.h+=1,this};function ES(f,_){Da(f),_=jc(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function CS(f,_){return Da(f),_=jc(f,_),f.g.has(_)}t.forEach=function(f,_){Da(this),this.g.forEach(function(I,M){I.forEach(function(G){f.call(_,G,M,this)},this)},this)},t.na=function(){Da(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let M=0;M<_.length;M++){const G=f[M];for(let ee=0;ee<G.length;ee++)I.push(_[M])}return I},t.V=function(f){Da(this);let _=[];if(typeof f=="string")CS(this,f)&&(_=_.concat(this.g.get(jc(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)_=_.concat(f[I])}return _},t.set=function(f,_){return Da(this),this.i=null,f=jc(this,f),CS(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function kS(f,_,I){ES(f,_),0<I.length&&(f.i=null,f.g.set(jc(f,_),y(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var M=_[I];const ee=encodeURIComponent(String(M)),xe=this.V(M);for(M=0;M<xe.length;M++){var G=ee;xe[M]!==""&&(G+="="+encodeURIComponent(String(xe[M]))),f.push(G)}}return this.i=f.join("&")};function jc(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function VV(f,_){_&&!f.j&&(Da(f),f.i=null,f.g.forEach(function(I,M){var G=M.toLowerCase();M!=G&&(ES(this,M),kS(this,G,I))},f)),f.j=_}function FV(f,_){const I=new kd;if(l.Image){const M=new Image;M.onload=g(Ma,I,"TestLoadImage: loaded",!0,_,M),M.onerror=g(Ma,I,"TestLoadImage: error",!1,_,M),M.onabort=g(Ma,I,"TestLoadImage: abort",!1,_,M),M.ontimeout=g(Ma,I,"TestLoadImage: timeout",!1,_,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else _(!1)}function $V(f,_){const I=new kd,M=new AbortController,G=setTimeout(()=>{M.abort(),Ma(I,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:M.signal}).then(ee=>{clearTimeout(G),ee.ok?Ma(I,"TestPingServer: ok",!0,_):Ma(I,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),Ma(I,"TestPingServer: error",!1,_)})}function Ma(f,_,I,M,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),M(I)}catch{}}function UV(){this.g=new _V}function zV(f,_,I){const M=I||"";try{jS(f,function(G,ee){let xe=G;u(G)&&(xe=wc(G)),_.push(M+ee+"="+encodeURIComponent(xe))})}catch(G){throw _.push(M+"type="+encodeURIComponent("_badmap")),G}}function qf(f){this.l=f.Ub||null,this.j=f.eb||!1}v(qf,ky),qf.prototype.g=function(){return new Wf(this.l,this.j)},qf.prototype.i=function(f){return function(){return f}}({});function Wf(f,_){xt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Wf,xt),t=Wf.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Dd(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||l).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rd(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Dd(this)),this.g&&(this.readyState=3,Dd(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TS(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function TS(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Rd(this):Dd(this),this.readyState==3&&TS(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Rd(this))},t.Qa=function(f){this.g&&(this.response=f,Rd(this))},t.ga=function(){this.g&&Rd(this)};function Rd(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Dd(f)}t.setRequestHeader=function(f,_){this.u.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var I=_.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=_.next();return f.join(`\r
`)};function Dd(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function IS(f){let _="";return P(f,function(I,M){_+=M,_+=":",_+=I,_+=`\r
`}),_}function Vy(f,_,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=IS(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):Qt(f,_,I))}function ur(f){xt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ur,xt);var BV=/^https?$/i,qV=["POST","PUT"];t=ur.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,_,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ay.g(),this.v=this.o?iS(this.o):iS(Ay),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(ee){AS(this,ee);return}if(f=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var G in M)I.set(G,M[G]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ee of M.keys())I.set(ee,M.get(ee));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(I.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qV,_,void 0))||M||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,xe]of I)this.g.setRequestHeader(ee,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{DS(this),this.u=!0,this.g.send(f),this.u=!1}catch(ee){AS(this,ee)}};function AS(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,PS(f),Hf(f)}function PS(f){f.A||(f.A=!0,bt(f,"complete"),bt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,bt(this,"complete"),bt(this,"abort"),Hf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hf(this,!0)),ur.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?RS(this):this.bb())},t.bb=function(){RS(this)};function RS(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Fi(f)!=4||f.Z()!=2)){if(f.u&&Fi(f)==4)Mf(f.Ea,0,f);else if(bt(f,"readystatechange"),Fi(f)==4){f.h=!1;try{const xe=f.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var M;if(M=xe===0){var G=String(f.D).match(_S)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),M=!BV.test(G?G.toLowerCase():"")}I=M}if(I)bt(f,"complete"),bt(f,"success");else{f.m=6;try{var ee=2<Fi(f)?f.g.statusText:""}catch{ee=""}f.l=ee+" ["+f.Z()+"]",PS(f)}}finally{Hf(f)}}}}function Hf(f,_){if(f.g){DS(f);const I=f.g,M=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||bt(f,"ready");try{I.onreadystatechange=M}catch{}}}function DS(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Fi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),jV(_)}};function MS(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function WV(f){const _={};f=(f.g&&2<=Fi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(x(f[M]))continue;var I=A(f[M]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ee=_[G]||[];_[G]=ee,ee.push(I)}T(_,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Md(f,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||_}function OS(f){this.Aa=0,this.i=[],this.j=new kd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Md("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Md("baseRetryDelayMs",5e3,f),this.cb=Md("retryDelaySeedMs",1e4,f),this.Wa=Md("forwardChannelMaxRetries",2,f),this.wa=Md("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new vS(f&&f.concurrentRequestLimit),this.Da=new UV,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=OS.prototype,t.la=8,t.G=1,t.connect=function(f,_,I,M){gn(0),this.W=f,this.H=_||{},I&&M!==void 0&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.I=WS(this,null,this.W),Kf(this)};function Fy(f){if(LS(f),f.G==3){var _=f.U++,I=Vi(f.I);if(Qt(I,"SID",f.K),Qt(I,"RID",_),Qt(I,"TYPE","terminate"),Od(f,I),_=new Ra(f,f.j,_),_.L=2,_.v=Bf(Vi(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=_.v,I=!0),I||(_.g=HS(_.j,null),_.g.ea(_.v)),_.F=Date.now(),$f(_)}qS(f)}function Gf(f){f.g&&(Uy(f),f.g.cancel(),f.g=null)}function LS(f){Gf(f),f.u&&(l.clearTimeout(f.u),f.u=null),Yf(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function Kf(f){if(!xS(f.h)&&!f.s){f.s=!0;var _=f.Ga;$||z(),L||($(),L=!0),W.add(_,f),f.B=0}}function HV(f,_){return yS(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Cd(m(f.Ga,f,_),BS(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new Ra(this,this.j,f);let ee=this.o;if(this.S&&(ee?(ee=k(ee),E(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){t:{var M=this.i[I];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(_+=M,4096<_){_=I;break e}if(_===4096||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=FS(this,G,_),I=Vi(this.I),Qt(I,"RID",f),Qt(I,"CVER",22),this.D&&Qt(I,"X-HTTP-Session-Id",this.D),Od(this,I),ee&&(this.O?_="headers="+encodeURIComponent(String(IS(ee)))+"&"+_:this.m&&Vy(I,this.m,ee)),Ly(this.h,G),this.Ua&&Qt(I,"TYPE","init"),this.P?(Qt(I,"$req",_),Qt(I,"SID","null"),G.T=!0,Ry(G,I,null)):Ry(G,I,_),this.G=2}}else this.G==3&&(f?VS(this,f):this.i.length==0||xS(this.h)||VS(this))};function VS(f,_){var I;_?I=_.l:I=f.U++;const M=Vi(f.I);Qt(M,"SID",f.K),Qt(M,"RID",I),Qt(M,"AID",f.T),Od(f,M),f.m&&f.o&&Vy(M,f.m,f.o),I=new Ra(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),_&&(f.i=_.D.concat(f.i)),_=FS(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ly(f.h,I),Ry(I,M,_)}function Od(f,_){f.H&&P(f.H,function(I,M){Qt(_,M,I)}),f.l&&jS({},function(I,M){Qt(_,M,I)})}function FS(f,_,I){I=Math.min(f.i.length,I);var M=f.l?m(f.l.Na,f.l,f):null;e:{var G=f.i;let ee=-1;for(;;){const xe=["count="+I];ee==-1?0<I?(ee=G[0].g,xe.push("ofs="+ee)):ee=0:xe.push("ofs="+ee);let Vt=!0;for(let zr=0;zr<I;zr++){let kt=G[zr].g;const en=G[zr].map;if(kt-=ee,0>kt)ee=Math.max(0,G[zr].g-100),Vt=!1;else try{zV(en,xe,"req"+kt+"_")}catch{M&&M(en)}}if(Vt){M=xe.join("&");break e}}}return f=f.i.splice(0,I),_.D=f,M}function $S(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;$||z(),L||($(),L=!0),W.add(_,f),f.v=0}}function $y(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Cd(m(f.Fa,f),BS(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,US(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Cd(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gn(10),Gf(this),US(this))};function Uy(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function US(f){f.g=new Ra(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Vi(f.qa);Qt(_,"RID","rpc"),Qt(_,"SID",f.K),Qt(_,"AID",f.T),Qt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Qt(_,"TO",f.ja),Qt(_,"TYPE","xmlhttp"),Od(f,_),f.m&&f.o&&Vy(_,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=Bf(Vi(_)),I.m=null,I.P=!0,fS(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Gf(this),$y(this),gn(19))};function Yf(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function zS(f,_){var I=null;if(f.g==_){Yf(f),Uy(f),f.g=null;var M=2}else if(Oy(f.h,_))I=_.D,wS(f.h,_),M=1;else return;if(f.G!=0){if(_.o)if(M==1){I=_.m?_.m.length:0,_=Date.now()-_.F;var G=f.B;M=Lf(),bt(M,new uS(M,I)),Kf(f)}else $S(f);else if(G=_.s,G==3||G==0&&0<_.X||!(M==1&&HV(f,_)||M==2&&$y(f)))switch(I&&0<I.length&&(_=f.h,_.i=_.i.concat(I)),G){case 1:nl(f,5);break;case 4:nl(f,10);break;case 3:nl(f,6);break;default:nl(f,2)}}}function BS(f,_){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*_}function nl(f,_){if(f.j.info("Error code "+_),_==2){var I=m(f.fb,f),M=f.Xa;const G=!M;M=new rl(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Uf(M,"https"),Bf(M),G?FV(M.toString(),I):$V(M.toString(),I)}else gn(2);f.G=0,f.l&&f.l.sa(_),qS(f),LS(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function qS(f){if(f.G=0,f.ka=[],f.l){const _=bS(f.h);(_.length!=0||f.i.length!=0)&&(j(f.ka,_),j(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function WS(f,_,I){var M=I instanceof rl?Vi(I):new rl(I);if(M.g!="")_&&(M.g=_+"."+M.g),zf(M,M.s);else{var G=l.location;M=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var ee=new rl(null);M&&Uf(ee,M),_&&(ee.g=_),G&&zf(ee,G),I&&(ee.l=I),M=ee}return I=f.D,_=f.ya,I&&_&&Qt(M,I,_),Qt(M,"VER",f.la),Od(f,M),M}function HS(f,_,I){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new ur(new qf({eb:I})):new ur(f.pa),_.Ha(f.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function GS(){}t=GS.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qf(){}Qf.prototype.g=function(f,_){return new Xn(f,_)};function Xn(f,_){xt.call(this),this.g=new OS(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!x(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new _c(this)}v(Xn,xt),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Fy(this.g)},Xn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=wc(f),f=I);_.i.push(new TV(_.Ya++,f)),_.G==3&&Kf(_)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Fy(this.g),delete this.g,Xn.aa.N.call(this)};function KS(f){Ty.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const I in _){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}v(KS,Ty);function YS(){Iy.call(this),this.status=1}v(YS,Iy);function _c(f){this.g=f}v(_c,GS),_c.prototype.ua=function(){bt(this.g,"a")},_c.prototype.ta=function(f){bt(this.g,new KS(f))},_c.prototype.sa=function(f){bt(this.g,new YS)},_c.prototype.ra=function(){bt(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,NR=function(){return new Qf},_R=function(){return Lf()},jR=el,bb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vf.NO_ERROR=0,Vf.TIMEOUT=8,Vf.HTTP_ERROR=6,ag=Vf,dS.COMPLETE="complete",bR=dS,aS.EventType=Sd,Sd.OPEN="a",Sd.CLOSE="b",Sd.ERROR="c",Sd.MESSAGE="d",xt.prototype.listen=xt.prototype.K,ah=aS,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,wR=ur}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});const Y2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new mx("@firebase/firestore");function Wd(){return $l.logLevel}function Me(t,...e){if($l.logLevel<=wt.DEBUG){const r=e.map(V_);$l.debug(`Firestore (${sd}): ${t}`,...r)}}function ya(t,...e){if($l.logLevel<=wt.ERROR){const r=e.map(V_);$l.error(`Firestore (${sd}): ${t}`,...r)}}function Pu(t,...e){if($l.logLevel<=wt.WARN){const r=e.map(V_);$l.warn(`Firestore (${sd}): ${t}`,...r)}}function V_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t="Unexpected state"){const e=`FIRESTORE (${sd}) INTERNAL ASSERTION FAILED: `+t;throw ya(e),new Error(e)}function Dt(t,e){t||Ge()}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Rs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(an.UNAUTHENTICATED))}shutdown(){}}class wq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class bq{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Dt(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ia,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ia)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Dt(typeof n.accessToken=="string"),new SR(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string"),new an(e)}}class jq{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _q{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new jq(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Dt(this.o===void 0);const n=a=>{a.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Dt(typeof r.token=="string"),this.R=r.token,new Nq(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Eq(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Tt(t,e){return t<e?-1:t>e?1:0}function Ru(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Or(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Or(0,0))}static max(){return new Qe(new Or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ge(),n===void 0?n=e.length-r:n>e.length-r&&Ge(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return um.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof um?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),o=r.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class zt extends um{construct(e,r,n){return new zt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new be(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new zt(r)}static emptyPath(){return new zt([])}}const Cq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends um{construct(e,r,n){return new Wr(e,r,n)}static isValidIdentifier(e){return Cq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new be(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new be(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new be(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(r)}static emptyPath(){return new Wr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(zt.fromString(e))}static fromName(e){return new $e(zt.fromString(e).popFirst(5))}static empty(){return new $e(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return zt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new zt(e.slice()))}}function kq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Qe.fromTimestamp(n===1e9?new Or(r+1,0):new Or(r,n));return new No(i,$e.empty(),e)}function Tq(t){return new No(t.readTime,t.key,-1)}class No{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new No(Qe.min(),$e.empty(),-1)}static max(){return new No(Qe.max(),$e.empty(),-1)}}function Iq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(t.documentKey,e.documentKey),r!==0?r:Tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==Aq)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ae((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ae?r:ae.resolve(r)}catch(r){return ae.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.reject(r)}static resolve(e){return new ae((r,n)=>{r(e)})}static reject(e){return new ae((r,n)=>{n(e)})}static waitFor(e){return new ae((r,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&r()},c=>n(c))}),o=!0,a===i&&r()})}static or(e){let r=ae.resolve(!1);for(const n of e)r=r.next(i=>i?ae.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new ae((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===a&&n(o)},d=>i(d))}})}static doWhile(e,r){return new ae((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function Rq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function sf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}F_.oe=-1;function xx(t){return t==null}function tv(t){return t===0&&1/t==-1/0}function Dq(t){return typeof t=="number"&&Number.isInteger(t)&&!tv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function cc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function CR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,r){this.comparator=e,this.root=r||qr.EMPTY}insert(e,r){return new cr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xp(this.root,e,this.comparator,!1)}getReverseIterator(){return new xp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xp(this.root,e,this.comparator,!0)}}class xp{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??qr.RED,this.left=i??qr.EMPTY,this.right=a??qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new qr(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return qr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ge();const e=this.left.check();if(e!==this.right.check())throw Ge();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge()}get value(){throw Ge()}get color(){throw Ge()}get left(){throw Ge()}get right(){throw Ge()}copy(e,r,n,i,a){return this}insert(e,r,n){return new qr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new X2(this.data.getIterator())}getIteratorFrom(e){return new X2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yr(this.comparator);return r.data=e,r}}class X2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new ns([])}unionWith(e){let r=new Yr(Wr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ns(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kR("Invalid base64 string: "+a):a}}(e);return new Jr(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Jr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const Mq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(t){if(Dt(!!t),typeof t=="string"){let e=0;const r=Mq.exec(t);if(Dt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:gr(t.seconds),nanos:gr(t.nanos)}}function gr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ul(t){return typeof t=="string"?Jr.fromBase64String(t):Jr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function $_(t){const e=t.mapValue.fields.__previous_value__;return yx(e)?$_(e):e}function dm(t){const e=So(t.mapValue.fields.__local_write_time__.timestampValue);return new Or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,r,n,i,a,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class hm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new hm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yx(t)?4:Vq(t)?9007199254740991:Lq(t)?10:11:Ge()}function Ti(t,e){if(t===e)return!0;const r=zl(t);if(r!==zl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dm(t).isEqual(dm(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=So(i.timestampValue),l=So(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ul(i.bytesValue).isEqual(Ul(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return gr(i.geoPointValue.latitude)===gr(a.geoPointValue.latitude)&&gr(i.geoPointValue.longitude)===gr(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return gr(i.integerValue)===gr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=gr(i.doubleValue),l=gr(a.doubleValue);return o===l?tv(o)===tv(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ru(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Q2(o)!==Q2(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ti(o[c],l[c])))return!1;return!0}(t,e);default:return Ge()}}function mm(t,e){return(t.values||[]).find(r=>Ti(r,e))!==void 0}function Du(t,e){if(t===e)return 0;const r=zl(t),n=zl(e);if(r!==n)return Tt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Tt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gr(a.integerValue||a.doubleValue),c=gr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return J2(t.timestampValue,e.timestampValue);case 4:return J2(dm(t),dm(e));case 5:return Tt(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ul(a),c=Ul(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Tt(l[u],c[u]);if(d!==0)return d}return Tt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Tt(gr(a.latitude),gr(o.latitude));return l!==0?l:Tt(gr(a.longitude),gr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z2(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const h=a.fields||{},m=o.fields||{},g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,y=Tt(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:Z2(g,v)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===yp.mapValue&&o===yp.mapValue)return 0;if(a===yp.mapValue)return 1;if(o===yp.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=Tt(c[h],d[h]);if(m!==0)return m;const g=Du(l[c[h]],u[d[h]]);if(g!==0)return g}return Tt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ge()}}function J2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Tt(t,e);const r=So(t),n=So(e),i=Tt(r.seconds,n.seconds);return i!==0?i:Tt(r.nanos,n.nanos)}function Z2(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Du(r[i],n[i]);if(a)return a}return Tt(r.length,n.length)}function Mu(t){return jb(t)}function jb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=So(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ul(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return $e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=jb(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${jb(r.fields[o])}`;return i+"}"}(t.mapValue):Ge()}function rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _b(t){return!!t&&"integerValue"in t}function U_(t){return!!t&&"arrayValue"in t}function eC(t){return!!t&&"nullValue"in t}function tC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function og(t){return!!t&&"mapValue"in t}function Lq(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Eh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Eh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Eh(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Vq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!og(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eh(r)}setAll(e){let r=Wr.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=l.popLast()}o?n[l.lastSegment()]=Eh(o):i.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());og(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];og(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){cc(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Vn(Eh(this.value))}}function TR(t){const e=[];return cc(t.fields,(r,n)=>{const i=new Wr([r]);if(og(n)){const a=TR(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,r,n,i,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ln(e,0,Qe.min(),Qe.min(),Qe.min(),Vn.empty(),0)}static newFoundDocument(e,r,n,i){return new ln(e,1,r,Qe.min(),n,i,0)}static newNoDocument(e,r){return new ln(e,2,r,Qe.min(),Qe.min(),Vn.empty(),0)}static newUnknownDocument(e,r){return new ln(e,3,r,Qe.min(),Qe.min(),Vn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,r){this.position=e,this.inclusive=r}}function rC(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=$e.comparator($e.fromName(o.referenceValue),r.key):n=Du(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function nC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ti(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,r="asc"){this.field=e,this.dir=r}}function Fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IR=class{};class Nr extends IR{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Uq(e,r,n):r==="array-contains"?new qq(e,n):r==="in"?new Wq(e,n):r==="not-in"?new Hq(e,n):r==="array-contains-any"?new Gq(e,n):new Nr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new zq(e,n):new Bq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Du(r,this.value)):r!==null&&zl(this.value)===zl(r)&&this.matchesComparison(Du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends IR{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Zs(e,r)}matches(e){return AR(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AR(t){return t.op==="and"}function PR(t){return $q(t)&&AR(t)}function $q(t){for(const e of t.filters)if(e instanceof Zs)return!1;return!0}function Nb(t){if(t instanceof Nr)return t.field.canonicalString()+t.op.toString()+Mu(t.value);if(PR(t))return t.filters.map(e=>Nb(e)).join(",");{const e=t.filters.map(r=>Nb(r)).join(",");return`${t.op}(${e})`}}function RR(t,e){return t instanceof Nr?function(n,i){return i instanceof Nr&&n.op===i.op&&n.field.isEqual(i.field)&&Ti(n.value,i.value)}(t,e):t instanceof Zs?function(n,i){return i instanceof Zs&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&RR(o,i.filters[l]),!0):!1}(t,e):void Ge()}function DR(t){return t instanceof Nr?function(r){return`${r.field.canonicalString()} ${r.op} ${Mu(r.value)}`}(t):t instanceof Zs?function(r){return r.op.toString()+" {"+r.getFilters().map(DR).join(" ,")+"}"}(t):"Filter"}class Uq extends Nr{constructor(e,r,n){super(e,r,n),this.key=$e.fromName(n.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class zq extends Nr{constructor(e,r){super(e,"in",r),this.keys=MR("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Bq extends Nr{constructor(e,r){super(e,"not-in",r),this.keys=MR("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function MR(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>$e.fromName(n.referenceValue))}class qq extends Nr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return U_(r)&&mm(r.arrayValue,this.value)}}class Wq extends Nr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&mm(this.value.arrayValue,r)}}class Hq extends Nr{constructor(e,r){super(e,"not-in",r)}matches(e){if(mm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!mm(this.value.arrayValue,r)}}class Gq extends Nr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!U_(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>mm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,r=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function sC(t,e=null,r=[],n=[],i=null,a=null,o=null){return new Kq(t,e,r,n,i,a,o)}function z_(t){const e=Xe(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Nb(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),xx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Mu(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Mu(n)).join(",")),e.ue=r}return e.ue}function B_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Fq(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!RR(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nC(t.startAt,e.startAt)&&nC(t.endAt,e.endAt)}function Sb(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,r=null,n=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Yq(t,e,r,n,i,a,o,l){return new uc(t,e,r,n,i,a,o,l)}function wx(t){return new uc(t)}function iC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q_(t){return t.collectionGroup!==null}function fu(t){const e=Xe(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Yr(Wr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new fm(a,n))}),r.has(Wr.keyField().canonicalString())||e.ce.push(new fm(Wr.keyField(),n))}return e.ce}function Ni(t){const e=Xe(t);return e.le||(e.le=Qq(e,fu(t))),e.le}function Qq(t,e){if(t.limitType==="F")return sC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new fm(i.field,a)});const r=t.endAt?new Ou(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ou(t.startAt.position,t.startAt.inclusive):null;return sC(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Eb(t,e){const r=t.filters.concat([e]);return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function nv(t,e,r){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function bx(t,e){return B_(Ni(t),Ni(e))&&t.limitType===e.limitType}function OR(t){return`${z_(Ni(t))}|lt:${t.limitType}`}function Vc(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>DR(i)).join(", ")}]`),xx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Mu(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Mu(i)).join(",")),`Target(${n})`}(Ni(t))}; limitType=${t.limitType})`}function jx(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):$e.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of fu(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,c){const u=rC(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,fu(n),i)||n.endAt&&!function(o,l,c){const u=rC(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,fu(n),i))}(t,e)}function Xq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LR(t){return(e,r)=>{let n=!1;for(const i of fu(t)){const a=Jq(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Jq(t,e,r){const n=t.field.isKeyField()?$e.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Du(c,u):Ge()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return CR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=new cr($e.comparator);function wa(){return Zq}const VR=new cr($e.comparator);function oh(...t){let e=VR;for(const r of t)e=e.insert(r.key,r);return e}function FR(t){let e=VR;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function yl(){return Ch()}function $R(){return Ch()}function Ch(){return new id(t=>t.toString(),(t,e)=>t.isEqual(e))}const eW=new cr($e.comparator),tW=new Yr($e.comparator);function pt(...t){let e=tW;for(const r of t)e=e.add(r);return e}const rW=new Yr(Tt);function nW(){return rW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tv(e)?"-0":e}}function UR(t){return{integerValue:""+t}}function zR(t,e){return Dq(e)?UR(e):W_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this._=void 0}}function sW(t,e,r){return t instanceof pm?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&yx(a)&&(a=$_(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof gm?qR(t,e):t instanceof vm?WR(t,e):function(i,a){const o=BR(i,a),l=aC(o)+aC(i.Pe);return _b(o)&&_b(i.Pe)?UR(l):W_(i.serializer,l)}(t,e)}function iW(t,e,r){return t instanceof gm?qR(t,e):t instanceof vm?WR(t,e):r}function BR(t,e){return t instanceof xm?function(n){return _b(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class pm extends _x{}class gm extends _x{constructor(e){super(),this.elements=e}}function qR(t,e){const r=HR(e);for(const n of t.elements)r.some(i=>Ti(i,n))||r.push(n);return{arrayValue:{values:r}}}class vm extends _x{constructor(e){super(),this.elements=e}}function WR(t,e){let r=HR(e);for(const n of t.elements)r=r.filter(i=>!Ti(i,n));return{arrayValue:{values:r}}}class xm extends _x{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function aC(t){return gr(t.integerValue||t.doubleValue)}function HR(t){return U_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,r){this.field=e,this.transform=r}}function aW(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof gm&&i instanceof gm||n instanceof vm&&i instanceof vm?Ru(n.elements,i.elements,Ti):n instanceof xm&&i instanceof xm?Ti(n.Pe,i.Pe):n instanceof pm&&i instanceof pm}(t.transform,e.transform)}class oW{constructor(e,r){this.version=e,this.transformResults=r}}class Sn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nx{}function KR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sx(t.key,Sn.none()):new af(t.key,t.data,Sn.none());{const r=t.data,n=Vn.empty();let i=new Yr(Wr.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new qo(t.key,n,new ns(i.toArray()),Sn.none())}}function lW(t,e,r){t instanceof af?function(i,a,o){const l=i.value.clone(),c=lC(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof qo?function(i,a,o){if(!lg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=lC(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(YR(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function kh(t,e,r,n){return t instanceof af?function(a,o,l,c){if(!lg(a.precondition,o))return l;const u=a.value.clone(),d=cC(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof qo?function(a,o,l,c){if(!lg(a.precondition,o))return l;const u=cC(a.fieldTransforms,c,o),d=o.data;return d.setAll(YR(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,o,l){return lg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function cW(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=BR(n.transform,i||null);a!=null&&(r===null&&(r=Vn.empty()),r.set(n.field,a))}return r||null}function oC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ru(n,i,(a,o)=>aW(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class af extends Nx{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qo extends Nx{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function YR(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function lC(t,e,r){const n=new Map;Dt(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,iW(o,l,r[i]))}return n}function cC(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,sW(a,o,e))}return n}class Sx extends Nx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uW extends Nx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&lW(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=kh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=kh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=$R();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const c=KR(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Qe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),pt())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(r,n)=>oC(r,n))&&Ru(this.baseMutations,e.baseMutations,(r,n)=>oC(r,n))}}class H_{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Dt(e.mutations.length===n.length);let i=function(){return eW}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new H_(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hW=class{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr,jt;function fW(t){switch(t){default:return Ge();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function QR(t){if(t===void 0)return ya("GRPC error has no .code"),re.UNKNOWN;switch(t){case jr.OK:return re.OK;case jr.CANCELLED:return re.CANCELLED;case jr.UNKNOWN:return re.UNKNOWN;case jr.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jr.INTERNAL:return re.INTERNAL;case jr.UNAVAILABLE:return re.UNAVAILABLE;case jr.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jr.NOT_FOUND:return re.NOT_FOUND;case jr.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jr.ABORTED:return re.ABORTED;case jr.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jr.DATA_LOSS:return re.DATA_LOSS;default:return Ge()}}(jt=jr||(jr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW=new Nl([4294967295,4294967295],0);function uC(t){const e=pW().encode(t),r=new yR;return r.update(e),new Uint8Array(r.digest())}function dC(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Nl([r,n],0),new Nl([i,a],0)]}class G_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new lh(`Invalid padding: ${r}`);if(n<0)throw new lh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new lh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new lh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Nl.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Nl.fromNumber(n)));return i.compare(gW)===1&&(i=new Nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=uC(e),[n,i]=dC(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new G_(a,i,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=uC(e),[n,i]=dC(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,of.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ex(Qe.min(),i,new cr(Tt),wa(),pt())}}class of{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new of(n,r,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class XR{constructor(e,r){this.targetId=e,this.me=r}}class JR{constructor(e,r,n=Jr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class hC{constructor(){this.fe=0,this.ge=fC(),this.pe=Jr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pt(),r=pt(),n=pt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Ge()}}),new of(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=fC()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vW{constructor(e){this.Le=e,this.Be=new Map,this.ke=wa(),this.qe=mC(),this.Qe=new cr(Tt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ge()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(Sb(a))if(n===0){const o=new $e(a.path);this.Ue(r,o,ln.newNoDocument(o,Qe.min()))}else Dt(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=Ul(n).toUint8Array()}catch(c){if(c instanceof kR)return Pu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new G_(o,i,a)}catch(c){return Pu(c instanceof lh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&Sb(l.target)){const c=new $e(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ln.newNoDocument(c,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=pt();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Ex(e,r,this.Qe,this.ke,n);return this.ke=wa(),this.qe=mC(),this.Qe=new cr(Tt),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new hC,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Yr(Tt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Me("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hC),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function mC(){return new cr($e.comparator)}function fC(){return new cr($e.comparator)}const xW={asc:"ASCENDING",desc:"DESCENDING"},yW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wW={and:"AND",or:"OR"};class bW{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Cb(t,e){return t.useProto3Json||xx(e)?e:{value:e}}function sv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jW(t,e){return sv(t,e.toTimestamp())}function Si(t){return Dt(!!t),Qe.fromTimestamp(function(r){const n=So(r);return new Or(n.seconds,n.nanos)}(t))}function K_(t,e){return kb(t,e).canonicalString()}function kb(t,e){const r=function(i){return new zt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function e4(t){const e=zt.fromString(t);return Dt(i4(e)),e}function Tb(t,e){return K_(t.databaseId,e.path)}function _0(t,e){const r=e4(e);if(r.get(1)!==t.databaseId.projectId)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new $e(r4(r))}function t4(t,e){return K_(t.databaseId,e)}function _W(t){const e=e4(t);return e.length===4?zt.emptyPath():r4(e)}function Ib(t){return new zt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function r4(t){return Dt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pC(t,e,r){return{name:Tb(t,e),fields:r.value.mapValue.fields}}function NW(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Dt(d===void 0||typeof d=="string"),Jr.fromBase64String(d||"")):(Dt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Jr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?re.UNKNOWN:QR(u.code);return new be(d,u.message||"")}(o);r=new JR(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=_0(t,n.document.name),a=Si(n.document.updateTime),o=n.document.createTime?Si(n.document.createTime):Qe.min(),l=new Vn({mapValue:{fields:n.document.fields}}),c=ln.newFoundDocument(i,a,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new cg(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=_0(t,n.document),a=n.readTime?Si(n.readTime):Qe.min(),o=ln.newNoDocument(i,a),l=n.removedTargetIds||[];r=new cg([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=_0(t,n.document),a=n.removedTargetIds||[];r=new cg([],a,i,null)}else{if(!("filter"in e))return Ge();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new mW(i,a),l=n.targetId;r=new XR(l,o)}}return r}function SW(t,e){let r;if(e instanceof af)r={update:pC(t,e.key,e.value)};else if(e instanceof Sx)r={delete:Tb(t,e.key)};else if(e instanceof qo)r={update:pC(t,e.key,e.data),updateMask:DW(e.fieldMask)};else{if(!(e instanceof uW))return Ge();r={verify:Tb(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof pm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xm)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Ge()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:jW(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ge()}(t,e.precondition)),r}function EW(t,e){return t&&t.length>0?(Dt(e!==void 0),t.map(r=>function(i,a){let o=i.updateTime?Si(i.updateTime):Si(a);return o.isEqual(Qe.min())&&(o=Si(a)),new oW(o,i.transformResults||[])}(r,e))):[]}function CW(t,e){return{documents:[t4(t,e.path)]}}function kW(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=t4(t,i);const a=function(u){if(u.length!==0)return s4(Zs.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Fc(m.field),direction:AW(m.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Cb(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:i}}function TW(t){let e=_W(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Dt(n===1);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const m=n4(h);return m instanceof Zs&&PR(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(m=>function(v){return new fm($c(v.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,xx(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(h){const m=!!h.before,g=h.values||[];return new Ou(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new Ou(g,m)}(r.endAt)),Yq(e,i,o,a,l,"F",c,u)}function IW(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function n4(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=$c(r.unaryFilter.field);return Nr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=$c(r.unaryFilter.field);return Nr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$c(r.unaryFilter.field);return Nr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$c(r.unaryFilter.field);return Nr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ge()}}(t):t.fieldFilter!==void 0?function(r){return Nr.create($c(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ge()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Zs.create(r.compositeFilter.filters.map(n=>n4(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge()}}(r.compositeFilter.op))}(t):Ge()}function AW(t){return xW[t]}function PW(t){return yW[t]}function RW(t){return wW[t]}function Fc(t){return{fieldPath:t.canonicalString()}}function $c(t){return Wr.fromServerFormat(t.fieldPath)}function s4(t){return t instanceof Nr?function(r){if(r.op==="=="){if(tC(r.value))return{unaryFilter:{field:Fc(r.field),op:"IS_NAN"}};if(eC(r.value))return{unaryFilter:{field:Fc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(tC(r.value))return{unaryFilter:{field:Fc(r.field),op:"IS_NOT_NAN"}};if(eC(r.value))return{unaryFilter:{field:Fc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fc(r.field),op:PW(r.op),value:r.value}}}(t):t instanceof Zs?function(r){const n=r.getFilters().map(i=>s4(i));return n.length===1?n[0]:{compositeFilter:{op:RW(r.op),filters:n}}}(t):Ge()}function DW(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function i4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,r,n,i,a=Qe.min(),o=Qe.min(),l=Jr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.ct=e}}function OW(t){const e=TW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.un=new VW}addToCollectionParentIndex(e,r){return this.un.add(r),ae.resolve()}getCollectionParents(e,r){return ae.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ae.resolve()}deleteFieldIndex(e,r){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,r){return ae.resolve()}getDocumentsMatchingTarget(e,r){return ae.resolve(null)}getIndexType(e,r){return ae.resolve(0)}getFieldIndexes(e,r){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,r){return ae.resolve(No.min())}getMinOffsetFromCollectionGroup(e,r){return ae.resolve(No.min())}updateCollectionGroup(e,r,n){return ae.resolve()}updateIndexEntries(e,r){return ae.resolve()}}class VW{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yr(zt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Lu(0)}static kn(){return new Lu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(){this.changes=new id(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ae.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&kh(n.mutation,i,ns.empty(),Or.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,pt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=pt()){const i=yl();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=oh();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=yl();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,pt()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,i){let a=wa();const o=Ch(),l=function(){return Ch()}();return r.forEach((c,u)=>{const d=n.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof qo)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),kh(d.mutation,u,d.mutation.getFieldMask(),Or.now())):o.set(u.key,ns.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var h;return l.set(u,new $W(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Ch();let i=new cr((o,l)=>o-l),a=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||ns.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(i.get(l.batchId)||pt()).add(c);i=i.insert(l.batchId,h)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=$R();d.forEach(m=>{if(!a.has(m)){const g=KR(r.get(m),n.get(m));g!==null&&h.set(m,g),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ae.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):q_(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):ae.resolve(yl());let l=-1,c=a;return o.next(u=>ae.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?ae.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,pt())).next(d=>({batchId:l,changes:FR(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(n=>{let i=oh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=oh();return this.indexManager.getCollectionParents(e,a).next(l=>ae.forEach(l,c=>{const u=function(h,m){return new uc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,ln.newInvalidDocument(d)))});let l=oh();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&kh(d.mutation,u,ns.empty(),Or.now()),jx(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ae.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Si(i.createTime)}}(r)),ae.resolve()}getNamedQuery(e,r){return ae.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:OW(i.bundledQuery),readTime:Si(i.readTime)}}(r)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(){this.overlays=new cr($e.comparator),this.Ir=new Map}getOverlay(e,r){return ae.resolve(this.overlays.get(r))}getOverlays(e,r){const n=yl();return ae.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.ht(e,r,a)}),ae.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),ae.resolve()}getOverlaysForCollection(e,r,n){const i=yl(),a=r.length+1,o=new $e(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new cr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=yl(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=yl(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return ae.resolve(l)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new hW(r,n));let a=this.Ir.get(r);a===void 0&&(a=pt(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(){this.sessionToken=Jr.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.Tr=new Yr(Fr.Er),this.dr=new Yr(Fr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Fr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Fr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new $e(new zt([])),n=new Fr(r,e),i=new Fr(r,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new $e(new zt([])),n=new Fr(r,e),i=new Fr(r,e+1);let a=pt();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Fr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Fr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return $e.comparator(e.key,r.key)||Tt(e.wr,r.wr)}static Ar(e,r){return Tt(e.wr,r.wr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Yr(Fr.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dW(a,r,n,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Fr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,r){return ae.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Fr(r,0),i=new Fr(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const l=this.Dr(o.wr);a.push(l)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yr(Tt);return r.forEach(i=>{const a=new Fr(i,0),o=new Fr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),ae.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;$e.isDocumentKey(a)||(a=a.child(""));const o=new Fr(new $e(a),0);let l=new Yr(Tt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},o),ae.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Dt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ae.forEach(r.mutations,i=>{const a=new Fr(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Fr(r,0),i=this.br.firstAfterOrEqual(n);return ae.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e){this.Mr=e,this.docs=function(){return new cr($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ae.resolve(n?n.document.mutableCopy():ln.newInvalidDocument(r))}getEntries(e,r){let n=wa();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():ln.newInvalidDocument(i))}),ae.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=wa();const o=r.path,l=new $e(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Iq(Tq(d),n)<=0||(i.has(d.key)||jx(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,r,n,i){Ge()}Or(e,r){return ae.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new GW(this)}getSize(e){return ae.resolve(this.size)}}class GW extends FW{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),ae.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e){this.persistence=e,this.Nr=new id(r=>z_(r),B_),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Y_,this.targetCount=0,this.kr=Lu.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Lu(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ae.resolve()}updateTargetData(e,r){return this.Kn(r),ae.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ae.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ae.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ae.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ae.resolve(n)}containsKey(e,r){return ae.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e,r){this.qr={},this.overlays={},this.Qr=new F_(0),this.Kr=!1,this.Kr=!0,this.$r=new qW,this.referenceDelegate=e(this),this.Ur=new KW(this),this.indexManager=new LW,this.remoteDocumentCache=function(i){return new HW(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new MW(r),this.Gr=new zW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new BW,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new WW(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Me("MemoryPersistence","Starting transaction:",e);const i=new QW(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,r){return ae.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class QW extends Pq{constructor(e){super(),this.currentSequenceNumber=e}}class Q_{constructor(e){this.persistence=e,this.Jr=new Y_,this.Yr=null}static Zr(e){return new Q_(e)}get Xr(){if(this.Yr)return this.Yr;throw Ge()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ae.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ae.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ae.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,n=>{const i=$e.fromPath(n);return this.ei(e,i).next(a=>{a||r.removeEntry(i,Qe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ae.or([()=>ae.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=pt(),i=pt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new X_(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return P9()?8:Rq(mn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new XW;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(Wd()<=wt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Vc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):(Wd()<=wt.DEBUG&&Me("QueryEngine","Query:",Vc(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Wd()<=wt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Vc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(r))):ae.resolve())}Yi(e,r){if(iC(r))return ae.resolve(null);let n=Ni(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=nv(r,null,"F"),n=Ni(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=pt(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,nv(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,i){return iC(r)||i.isEqual(Qe.min())?ae.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,i)?ae.resolve(null):(Wd()<=wt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vc(r)),this.rs(e,o,r,kq(i,-1)).next(l=>l))})}ts(e,r){let n=new Yr(LR(e));return r.forEach((i,a)=>{jx(e,a)&&(n=n.add(a))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return Wd()<=wt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Vc(r)),this.Ji.getDocumentsMatchingQuery(e,r,No.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new cr(Tt),this._s=new id(a=>z_(a),B_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function eH(t,e,r,n){return new ZW(t,e,r,n)}async function a4(t,e){const r=Xe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=pt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function tH(t,e){const r=Xe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,m=h.keys();let g=ae.resolve();return m.forEach(v=>{g=g.next(()=>d.getEntry(c,v)).next(y=>{const j=u.docVersions.get(v);Dt(j!==null),y.version.compareTo(j)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=pt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function o4(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function rH(t,e){const r=Xe(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;l.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(a,d.addedDocuments,h)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Jr.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),i=i.insert(h,g),function(y,j,w){return y.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,d)&&l.push(r.Ur.updateTargetData(a,g))});let c=wa(),u=pt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(nH(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Qe.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next(h=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(d)}return ae.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(r.os=i,a))}function nH(t,e,r){let n=pt(),i=pt();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=wa();return r.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Me("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function sH(t,e){const r=Xe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function iH(t,e){const r=Xe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(a=>a?(i=a,ae.resolve(i)):r.Ur.allocateTargetId(n).next(o=>(i=new io(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ab(t,e,r){const n=Xe(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sf(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function gC(t,e,r){const n=Xe(t);let i=Qe.min(),a=pt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Xe(c),m=h._s.get(d);return m!==void 0?ae.resolve(h.os.get(m)):h.Ur.getTargetData(u,d)}(n,o,Ni(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:Qe.min(),r?a:pt())).next(l=>(aH(n,Xq(e),l),{documents:l,Ts:a})))}function aH(t,e,r){let n=t.us.get(e)||Qe.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class vC{constructor(){this.activeTargetIds=nW()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oH{constructor(){this.so=new vC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vC,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wp=null;function N0(){return wp===null?wp=function(){return 268435456+Math.round(2147483648*Math.random())}():wp++,"0x"+wp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class dH extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,o){const l=N0(),c=this.xo(r,n.toUriEncodedString());Me("RestConnection",`Sending RPC '${r}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(r,c,u,i).then(d=>(Me("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw Pu("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(r,n,i,a,o,l){return this.Mo(r,n,i,a,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),i&&i.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const i=cH[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=N0();return new Promise((o,l)=>{const c=new wR;c.setWithCredentials(!0),c.listenOnce(bR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ag.NO_ERROR:const d=c.getResponseJson();Me(sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case ag.TIMEOUT:Me(sn,`RPC '${e}' ${a} timed out`),l(new be(re.DEADLINE_EXCEEDED,"Request time out"));break;case ag.HTTP_ERROR:const h=c.getStatus();if(Me(sn,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(j){const w=j.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(w)>=0?w:re.UNKNOWN}(g.status);l(new be(v,g.message))}else l(new be(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new be(re.UNAVAILABLE,"Connection failed."));break;default:Ge()}}finally{Me(sn,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);Me(sn,`RPC '${e}' ${a} sending request:`,i),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const i=N0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NR(),l=_R(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Me(sn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=o.createWebChannel(d,c);let m=!1,g=!1;const v=new uH({Io:j=>{g?Me(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(m||(Me(sn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Me(sn,`RPC '${e}' stream ${i} sending:`,j),h.send(j))},To:()=>h.close()}),y=(j,w,x)=>{j.listen(w,b=>{try{x(b)}catch(N){setTimeout(()=>{throw N},0)}})};return y(h,ah.EventType.OPEN,()=>{g||(Me(sn,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),y(h,ah.EventType.CLOSE,()=>{g||(g=!0,Me(sn,`RPC '${e}' stream ${i} transport closed`),v.So())}),y(h,ah.EventType.ERROR,j=>{g||(g=!0,Pu(sn,`RPC '${e}' stream ${i} transport errored:`,j),v.So(new be(re.UNAVAILABLE,"The operation could not be completed")))}),y(h,ah.EventType.MESSAGE,j=>{var w;if(!g){const x=j.data[0];Dt(!!x);const b=x,N=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(N){Me(sn,`RPC '${e}' stream ${i} received error:`,N);const C=N.status;let P=function(D){const E=jr[D];if(E!==void 0)return QR(E)}(C),T=N.message;P===void 0&&(P=re.INTERNAL,T="Unknown error status: "+C+" with message "+N.message),g=!0,v.So(new be(P,T)),h.close()}else Me(sn,`RPC '${e}' stream ${i} received:`,x),v.bo(x)}}),y(l,jR.STAT_EVENT,j=>{j.stat===bb.PROXY?Me(sn,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===bb.NOPROXY&&Me(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function S0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){return new bW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,r,n,i,a,o,l,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new l4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(ya(r.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new be(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hH extends c4{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=NW(this.serializer,e),n=function(a){if(!("targetChange"in a))return Qe.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Qe.min():o.readTime?Si(o.readTime):Qe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Ib(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=Sb(c)?{documents:CW(a,c)}:{query:kW(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ZR(a,o.resumeToken);const u=Cb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Qe.min())>0){l.readTime=sv(a,o.snapshotVersion.toTimestamp());const u=Cb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=IW(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Ib(this.serializer),r.removeTarget=e,this.a_(r)}}class mH extends c4{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=EW(e.writeResults,e.commitTime),n=Si(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Ib(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>SW(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,kb(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(re.UNKNOWN,a.toString())})}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,kb(r,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pH{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ya(r),this.D_=!1):Me("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{dc(this)&&(Me("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Xe(c);u.L_.add(4),await lf(u),u.q_.set("Unknown"),u.L_.delete(4),await kx(u)}(this))})}),this.q_=new pH(n,i)}}async function kx(t){if(dc(t))for(const e of t.B_)await e(!0)}async function lf(t){for(const e of t.B_)await e(!1)}function u4(t,e){const r=Xe(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),t1(r)?e1(r):ad(r).r_()&&Z_(r,e))}function J_(t,e){const r=Xe(t),n=ad(r);r.N_.delete(e),n.r_()&&d4(r,e),r.N_.size===0&&(n.r_()?n.o_():dc(r)&&r.q_.set("Unknown"))}function Z_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ad(t).A_(e)}function d4(t,e){t.Q_.xe(e),ad(t).R_(e)}function e1(t){t.Q_=new vW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ad(t).start(),t.q_.v_()}function t1(t){return dc(t)&&!ad(t).n_()&&t.N_.size>0}function dc(t){return Xe(t).L_.size===0}function h4(t){t.Q_=void 0}async function vH(t){t.q_.set("Online")}async function xH(t){t.N_.forEach((e,r)=>{Z_(t,e)})}async function yH(t,e){h4(t),t1(t)?(t.q_.M_(e),e1(t)):t.q_.set("Unknown")}async function wH(t,e,r){if(t.q_.set("Online"),e instanceof JR&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(n){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await iv(t,n)}else if(e instanceof cg?t.Q_.Ke(e):e instanceof XR?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Qe.min()))try{const n=await o4(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Jr.EMPTY_BYTE_STRING,d.snapshotVersion)),d4(a,c);const h=new io(d.target,c,u,d.sequenceNumber);Z_(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Me("RemoteStore","Failed to raise snapshot:",n),await iv(t,n)}}async function iv(t,e,r){if(!sf(e))throw e;t.L_.add(1),await lf(t),t.q_.set("Offline"),r||(r=()=>o4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Me("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await kx(t)})}function m4(t,e){return e().catch(r=>iv(t,r,e))}async function Tx(t){const e=Xe(t),r=Eo(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bH(e);)try{const i=await sH(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,jH(e,i)}catch(i){await iv(e,i)}f4(e)&&p4(e)}function bH(t){return dc(t)&&t.O_.length<10}function jH(t,e){t.O_.push(e);const r=Eo(t);r.r_()&&r.V_&&r.m_(e.mutations)}function f4(t){return dc(t)&&!Eo(t).n_()&&t.O_.length>0}function p4(t){Eo(t).start()}async function _H(t){Eo(t).p_()}async function NH(t){const e=Eo(t);for(const r of t.O_)e.m_(r.mutations)}async function SH(t,e,r){const n=t.O_.shift(),i=H_.from(n,e,r);await m4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tx(t)}async function EH(t,e){e&&Eo(t).V_&&await async function(n,i){if(function(o){return fW(o)&&o!==re.ABORTED}(i.code)){const a=n.O_.shift();Eo(n).s_(),await m4(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Tx(n)}}(t,e),f4(t)&&p4(t)}async function yC(t,e){const r=Xe(t);r.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const n=dc(r);r.L_.add(3),await lf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await kx(r)}async function CH(t,e){const r=Xe(t);e?(r.L_.delete(2),await kx(r)):e||(r.L_.add(2),await lf(r),r.q_.set("Unknown"))}function ad(t){return t.K_||(t.K_=function(r,n,i){const a=Xe(r);return a.w_(),new hH(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:vH.bind(null,t),Ro:xH.bind(null,t),mo:yH.bind(null,t),d_:wH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),t1(t)?e1(t):t.q_.set("Unknown")):(await t.K_.stop(),h4(t))})),t.K_}function Eo(t){return t.U_||(t.U_=function(r,n,i){const a=Xe(r);return a.w_(),new mH(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_H.bind(null,t),mo:EH.bind(null,t),f_:NH.bind(null,t),g_:SH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tx(t)):(await t.U_.stop(),t.O_.length>0&&(Me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,l=new r1(e,r,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n1(t,e){if(ya("AsyncQueue",`${e}: ${t}`),sf(t))return new be(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.comparator=e?(r,n)=>e(r,n)||$e.comparator(r.key,n.key):(r,n)=>$e.comparator(r.key,n.key),this.keyedMap=oh(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new pu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new pu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.W_=new cr($e.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ge():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Vu{constructor(e,r,n,i,a,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Vu(e,r,pu.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class TH{constructor(){this.queries=bC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=Xe(r),a=i.queries;i.queries=bC(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new be(re.ABORTED,"Firestore shutting down"))}}function bC(){return new id(t=>OR(t),bx)}async function s1(t,e){const r=Xe(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new kH,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=n1(o,`Initialization of query '${Vc(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&a1(r)}async function i1(t,e){const r=Xe(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function IH(t,e){const r=Xe(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(n=!0);o.z_=i}}n&&a1(r)}function AH(t,e,r){const n=Xe(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function a1(t){t.Y_.forEach(e=>{e.next()})}var Pb,jC;(jC=Pb||(Pb={})).ea="default",jC.Cache="cache";class o1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Vu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.key=e}}class v4{constructor(e){this.key=e}}class PH{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pt(),this.mutatedKeys=pt(),this.Aa=LR(e),this.Ra=new pu(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new wC,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),g=jx(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let j=!1;m&&g?m.data.isEqual(g.data)?v!==y&&(n.track({type:3,doc:g}),j=!0):this.ga(m,g)||(n.track({type:2,doc:g}),j=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),j=!0):m&&!g&&(n.track({type:1,doc:m}),j=!0,(c||u)&&(l=!0)),j&&(g?(o=o.add(g),a=y?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,v){const y=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge()}};return y(g)-y(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),i=i!=null&&i;const l=r&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Vu(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new v4(n))}),this.da.forEach(n=>{e.has(n)||r.push(new g4(n))}),r}ba(e){this.Ta=e.Ts,this.da=pt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Vu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RH{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class DH{constructor(e){this.key=e,this.va=!1}}class MH{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new id(l=>OR(l),bx),this.Ma=new Map,this.xa=new Set,this.Oa=new cr($e.comparator),this.Na=new Map,this.La=new Y_,this.Ba={},this.ka=new Map,this.qa=Lu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function OH(t,e,r=!0){const n=_4(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await x4(n,e,r,!0),i}async function LH(t,e){const r=_4(t);await x4(r,e,!0,!1)}async function x4(t,e,r,n){const i=await iH(t.localStore,Ni(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await VH(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&u4(t.remoteStore,i),l}async function VH(t,e,r,n,i){t.Ka=(h,m,g)=>async function(y,j,w,x){let b=j.view.ma(w);b.ns&&(b=await gC(y.localStore,j.query,!1).then(({documents:T})=>j.view.ma(T,b)));const N=x&&x.targetChanges.get(j.targetId),C=x&&x.targetMismatches.get(j.targetId)!=null,P=j.view.applyChanges(b,y.isPrimaryClient,N,C);return NC(y,j.targetId,P.wa),P.snapshot}(t,h,m,g);const a=await gC(t.localStore,e,!0),o=new PH(e,a.Ts),l=o.ma(a.documents),c=of.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);NC(t,r,u.wa);const d=new RH(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function FH(t,e,r){const n=Xe(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!bx(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ab(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&J_(n.remoteStore,i.targetId),Rb(n,i.targetId)}).catch(nf)):(Rb(n,i.targetId),await Ab(n.localStore,i.targetId,!0))}async function $H(t,e){const r=Xe(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),J_(r.remoteStore,n.targetId))}async function UH(t,e,r){const n=KH(t);try{const i=await function(o,l){const c=Xe(o),u=Or.now(),d=l.reduce((g,v)=>g.add(v.key),pt());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=wa(),y=pt();return c.cs.getEntries(g,d).next(j=>{v=j,v.forEach((w,x)=>{x.isValidDocument()||(y=y.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(j=>{h=j;const w=[];for(const x of l){const b=cW(x,h.get(x.key).overlayedDocument);b!=null&&w.push(new qo(x.key,b,TR(b.value.mapValue),Sn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,w,l)}).next(j=>{m=j;const w=j.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(g,j.batchId,w)})}).then(()=>({batchId:m.batchId,changes:FR(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new cr(Tt)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,i.batchId,r),await cf(n,i.changes),await Tx(n.remoteStore)}catch(i){const a=n1(i,"Failed to persist write");r.reject(a)}}async function y4(t,e){const r=Xe(t);try{const n=await rH(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Na.get(a);o&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Dt(o.va):i.removedDocuments.size>0&&(Dt(o.va),o.va=!1))}),await cf(r,n,e)}catch(n){await nf(n)}}function _C(t,e,r){const n=Xe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Xe(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(l)&&(u=!0)}),u&&a1(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function zH(t,e,r){const n=Xe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new cr($e.comparator);o=o.insert(a,ln.newNoDocument(a,Qe.min()));const l=pt().add(a),c=new Ex(Qe.min(),new Map,new cr(Tt),o,l);await y4(n,c),n.Oa=n.Oa.remove(a),n.Na.delete(e),l1(n)}else await Ab(n.localStore,e,!1).then(()=>Rb(n,e,r)).catch(nf)}async function BH(t,e){const r=Xe(t),n=e.batch.batchId;try{const i=await tH(r.localStore,e);b4(r,n,null),w4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await cf(r,i)}catch(i){await nf(i)}}async function qH(t,e,r){const n=Xe(t);try{const i=await function(o,l){const c=Xe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Dt(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);b4(n,e,r),w4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await cf(n,i)}catch(i){await nf(i)}}function w4(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function b4(t,e,r){const n=Xe(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Rb(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||j4(t,n)})}function j4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(J_(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),l1(t))}function NC(t,e,r){for(const n of r)n instanceof g4?(t.La.addReference(n.key,e),WH(t,n)):n instanceof v4?(Me("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||j4(t,n.key)):Ge()}function WH(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Me("SyncEngine","New document in limbo: "+r),t.xa.add(n),l1(t))}function l1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new $e(zt.fromString(e)),n=t.qa.next();t.Na.set(n,new DH(r)),t.Oa=t.Oa.insert(r,n),u4(t.remoteStore,new io(Ni(wx(r.path)),n,"TargetPurposeLimboResolution",F_.oe))}}async function cf(t,e,r){const n=Xe(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=X_.Wi(c.targetId,u);a.push(h)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(c,u){const d=Xe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ae.forEach(u,m=>ae.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>ae.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!sf(h))throw h;Me("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.os.get(m),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(m,y)}}}(n.localStore,a))}async function HH(t,e){const r=Xe(t);if(!r.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const n=await a4(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new be(re.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await cf(r,n.hs)}}function GH(t,e){const r=Xe(t),n=r.Na.get(e);if(n&&n.va)return pt().add(n.key);{let i=pt();const a=r.Ma.get(e);if(!a)return i;for(const o of a){const l=r.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function _4(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zH.bind(null,e),e.Ca.d_=IH.bind(null,e.eventManager),e.Ca.$a=AH.bind(null,e.eventManager),e}function KH(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qH.bind(null,e),e}class av{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return eH(this.persistence,new JW,e.initialUser,this.serializer)}Ga(e){return new YW(Q_.Zr,this.serializer)}Wa(e){return new oH}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}av.provider={build:()=>new av};class Db{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>_C(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=HH.bind(null,this.syncEngine),await CH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TH}()}createDatastore(e){const r=Cx(e.databaseInfo.databaseId),n=function(a){return new dH(a)}(e.databaseInfo);return function(a,o,l,c){return new fH(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,l){return new gH(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>_C(this.syncEngine,r,0),function(){return xC.D()?new xC:new lH}())}createSyncEngine(e,r){return function(i,a,o,l,c,u,d){const h=new MH(i,a,o,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Xe(i);Me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await lf(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Db.provider={build:()=>new Db};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=ER.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{Me("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=n1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function E0(t,e){t.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await a4(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function SC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await QH(t);Me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>yC(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>yC(e.remoteStore,i)),t._onlineComponents=e}async function QH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{await E0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Pu("Error using user provided cache. Falling back to memory cache: "+r),await E0(t,new av)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),await E0(t,new av);return t._offlineComponents}async function N4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),await SC(t,t._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),await SC(t,new Db))),t._onlineComponents}function XH(t){return N4(t).then(e=>e.syncEngine)}async function ov(t){const e=await N4(t),r=e.eventManager;return r.onListen=OH.bind(null,e.syncEngine),r.onUnlisten=FH.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=LH.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=$H.bind(null,e.syncEngine),r}function JH(t,e,r={}){const n=new ia;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new c1({next:m=>{d.Za(),o.enqueueAndForget(()=>i1(a,h));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new be(re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new be(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new o1(wx(l.path),d,{includeMetadataChanges:!0,_a:!0});return s1(a,h)}(await ov(t),t.asyncQueue,e,r,n)),n.promise}function ZH(t,e,r={}){const n=new ia;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new c1({next:m=>{d.Za(),o.enqueueAndForget(()=>i1(a,h)),m.fromCache&&c.source==="server"?u.reject(new be(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new o1(l,d,{includeMetadataChanges:!0,_a:!0});return s1(a,h)}(await ov(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t,e,r){if(!r)throw new be(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eG(t,e,r,n){if(e===!0&&n===!0)throw new be(re.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function CC(t){if(!$e.isDocumentKey(t))throw new be(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kC(t){if($e.isDocumentKey(t))throw new be(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ix(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ge()}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ix(t);throw new be(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function tG(t,e){if(e<=0)throw new be(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new be(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ax{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new yq;switch(n.type){case"firstParty":return new _q(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new be(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=EC.get(r);n&&(Me("ComponentProvider","Removing Datastore"),EC.delete(r),n.terminate())}(this),Promise.resolve()}}function rG(t,e,r,n={}){var i;const a=(t=En(t,Ax))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=an.MOCK_USER;else{l=NP(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new be(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new an(u)}t._authCredentials=new wq(new SR(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class dn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class xo extends Mi{constructor(e,r,n){super(e,r,wx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new $e(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function Nt(t,e,...r){if(t=gt(t),E4("collection","path",e),t instanceof Ax){const n=zt.fromString(e,...r);return kC(n),new xo(t,null,n)}{if(!(t instanceof dn||t instanceof xo))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zt.fromString(e,...r));return kC(n),new xo(t.firestore,null,n)}}function ze(t,e,...r){if(t=gt(t),arguments.length===1&&(e=ER.newId()),E4("doc","path",e),t instanceof Ax){const n=zt.fromString(e,...r);return CC(n),new dn(t,null,new $e(n))}{if(!(t instanceof dn||t instanceof xo))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zt.fromString(e,...r));return CC(n),new dn(t.firestore,t instanceof xo?t.converter:null,new $e(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new l4(this,"async_queue_retry"),this.Vu=()=>{const n=S0();n&&Me("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=S0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=S0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ia;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sf(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw ya("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=r1.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&Ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function AC(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ii extends Ax{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new IC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IC(e),this._firestoreClient=void 0,await e}}}function nG(t,e){const r=typeof t=="object"?t:fx(),n=typeof t=="string"?t:"(default)",i=Bo(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=bP("firestore");a&&rG(i,...a)}return i}function uf(t){if(t._terminated)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sG(t),t._firestoreClient}function sG(t){var e,r,n;const i=t._freezeSettings(),a=function(l,c,u,d){return new Oq(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,S4(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new YH(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fu(Jr.fromBase64String(e))}catch(r){throw new be(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Fu(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new be(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new be(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new be(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=/^__.*__$/;class aG{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,r,this.fieldTransforms):new af(e,this.data,r,this.fieldTransforms)}}class C4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new qo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function k4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge()}}class h1{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new h1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(k4(this.Cu)&&iG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oG{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Cx(e)}Qu(e,r,n,i=!1){return new h1({Cu:e,methodName:r,qu:n,path:Wr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function od(t){const e=t._freezeSettings(),r=Cx(t._databaseId);return new oG(t._databaseId,!!e.ignoreUndefinedProperties,r)}function m1(t,e,r,n,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);g1("Data must be an object, but it was:",o,n);const l=P4(n,o);let c,u;if(a.merge)c=new ns(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=Mb(e,h,r);if(!o.contains(m))throw new be(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);D4(d,m)||d.push(m)}c=new ns(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new aG(new Vn(l),c,u)}class Px extends hf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Px}}class f1 extends hf{_toFieldTransform(e){return new GR(e.path,new pm)}isEqual(e){return e instanceof f1}}class p1 extends hf{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new xm(e.serializer,zR(e.serializer,this.$u));return new GR(e.path,r)}isEqual(e){return e instanceof p1&&this.$u===e.$u}}function T4(t,e,r,n){const i=t.Qu(1,e,r);g1("Data must be an object, but it was:",i,n);const a=[],o=Vn.empty();cc(n,(c,u)=>{const d=v1(e,c,r);u=gt(u);const h=i.Nu(d);if(u instanceof Px)a.push(d);else{const m=mf(u,h);m!=null&&(a.push(d),o.set(d,m))}});const l=new ns(a);return new C4(o,l,i.fieldTransforms)}function I4(t,e,r,n,i,a){const o=t.Qu(1,e,r),l=[Mb(e,n,r)],c=[i];if(a.length%2!=0)throw new be(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Mb(e,a[m])),c.push(a[m+1]);const u=[],d=Vn.empty();for(let m=l.length-1;m>=0;--m)if(!D4(u,l[m])){const g=l[m];let v=c[m];v=gt(v);const y=o.Nu(g);if(v instanceof Px)u.push(g);else{const j=mf(v,y);j!=null&&(u.push(g),d.set(g,j))}}const h=new ns(u);return new C4(d,h,o.fieldTransforms)}function A4(t,e,r,n=!1){return mf(r,t.Qu(n?4:3,e))}function mf(t,e){if(R4(t=gt(t)))return g1("Unsupported field value:",e,t),P4(t,e);if(t instanceof hf)return function(n,i){if(!k4(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let c=mf(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zR(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Or.fromDate(n);return{timestampValue:sv(i.serializer,a)}}if(n instanceof Or){const a=new Or(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sv(i.serializer,a)}}if(n instanceof u1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Fu)return{bytesValue:ZR(i.serializer,n._byteString)};if(n instanceof dn){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:K_(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof d1)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return W_(l.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${Ix(n)}`)}(t,e)}function P4(t,e){const r={};return CR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(t,(n,i)=>{const a=mf(i,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function R4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Or||t instanceof u1||t instanceof Fu||t instanceof dn||t instanceof hf||t instanceof d1)}function g1(t,e,r){if(!R4(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=Ix(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Mb(t,e,r){if((e=gt(e))instanceof df)return e._internalPath;if(typeof e=="string")return v1(t,e);throw lv("Field path arguments must be of type string or ",t,!1,void 0,r)}const lG=new RegExp("[~\\*/\\[\\]]");function v1(t,e,r){if(e.search(lG)>=0)throw lv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new df(...e.split("."))._internalPath}catch{throw lv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function lv(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new be(re.INVALID_ARGUMENT,l+t+c)}function D4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Rx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class cG extends x1{data(){return super.data()}}function Rx(t,e){return typeof e=="string"?v1(t,e):e instanceof df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y1{}class Dx extends y1{}function $t(t,e,...r){let n=[];e instanceof y1&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof w1).length,l=a.filter(c=>c instanceof Mx).length;if(o>1||o>0&&l>0)throw new be(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Mx extends Dx{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Mx(e,r,n)}_apply(e){const r=this._parse(e);return O4(e._query,r),new Mi(e.firestore,e.converter,Eb(e._query,r))}_parse(e){const r=od(e.firestore);return function(a,o,l,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new be(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){RC(h,d);const g=[];for(const v of h)g.push(PC(c,a,v));m={arrayValue:{values:g}}}else m=PC(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||RC(h,d),m=A4(l,o,h,d==="in"||d==="not-in");return Nr.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Bt(t,e,r){const n=e,i=Rx("where",t);return Mx._create(i,n,r)}class w1 extends y1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new w1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Zs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)O4(o,c),o=Eb(o,c)}(e._query,r),new Mi(e.firestore,e.converter,Eb(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class b1 extends Dx{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new b1(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fm(a,o)}(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new uc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function cv(t,e="asc"){const r=e,n=Rx("orderBy",t);return b1._create(n,r)}class j1 extends Dx{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new j1(e,r,n)}_apply(e){return new Mi(e.firestore,e.converter,nv(e._query,this._limit,this._limitType))}}function Ss(t){return tG("limit",t),j1._create("limit",t,"F")}class _1 extends Dx{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new _1(e,r,n)}_apply(e){const r=dG(e,this.type,this._docOrFields,this._inclusive);return new Mi(e.firestore,e.converter,function(i,a){return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,r))}}function uG(...t){return _1._create("startAfter",t,!1)}function dG(t,e,r,n){if(r[0]=gt(r[0]),r[0]instanceof x1)return function(a,o,l,c,u){if(!c)throw new be(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of fu(a))if(h.field.isKeyField())d.push(rv(o,c.key));else{const m=c.data.field(h.field);if(yx(m))throw new be(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=h.field.canonicalString();throw new be(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new Ou(d,u)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=od(t.firestore);return function(o,l,c,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new be(re.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<d.length;v++){const y=d[v];if(m[v].field.isKeyField()){if(typeof y!="string")throw new be(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!q_(o)&&y.indexOf("/")!==-1)throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const j=o.path.child(zt.fromString(y));if(!$e.isDocumentKey(j))throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const w=new $e(j);g.push(rv(l,w))}else{const j=A4(c,u,y);g.push(j)}}return new Ou(g,h)}(t._query,t.firestore._databaseId,i,e,r,n)}}function PC(t,e,r){if(typeof(r=gt(r))=="string"){if(r==="")throw new be(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q_(e)&&r.indexOf("/")!==-1)throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(zt.fromString(r));if(!$e.isDocumentKey(n))throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rv(t,new $e(n))}if(r instanceof dn)return rv(t,r._key);throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ix(r)}.`)}function RC(t,e){if(!Array.isArray(t)||t.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O4(t,e){const r=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class hG{convertValue(e,r="none"){switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return cc(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>gr(o.doubleValue));return new d1(a)}convertGeoPoint(e){return new u1(gr(e.latitude),gr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=$_(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(dm(e));default:return null}}convertTimestamp(e){const r=So(e);return new Or(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=zt.fromString(e);Dt(i4(n));const i=new hm(n.get(1),n.get(3)),a=new $e(n.popFirst(5));return i.isEqual(r)||ya(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class L4 extends x1{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ug(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Rx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ug extends L4{data(e={}){return super.data(e)}}class V4{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new ch(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ug(this._firestore,this._userDataWriter,n.key,n,new ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new be(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new ug(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ch(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new ug(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ch(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:mG(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function mG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){t=En(t,dn);const e=En(t.firestore,Ii);return JH(uf(e),t._key).then(r=>F4(e,t,r))}class S1 extends hG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,r)}}function Zt(t){t=En(t,Mi);const e=En(t.firestore,Ii),r=uf(e),n=new S1(e);return M4(t._query),ZH(r,t._query).then(i=>new V4(e,n,t,i))}function Sl(t,e,r){t=En(t,dn);const n=En(t.firestore,Ii),i=N1(t.converter,e,r);return ff(n,[m1(od(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Sn.none())])}function mr(t,e,r,...n){t=En(t,dn);const i=En(t.firestore,Ii),a=od(i);let o;return o=typeof(e=gt(e))=="string"||e instanceof df?I4(a,"updateDoc",t._key,e,r,n):T4(a,"updateDoc",t._key,e),ff(i,[o.toMutation(t._key,Sn.exists(!0))])}function $u(t){return ff(En(t.firestore,Ii),[new Sx(t._key,Sn.none())])}function Bl(t,e){const r=En(t.firestore,Ii),n=ze(t),i=N1(t.converter,e);return ff(r,[m1(od(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Sn.exists(!1))]).then(()=>n)}function DC(t,...e){var r,n,i;t=gt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AC(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(AC(e[o])){const h=e[o];e[o]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(t instanceof dn)u=En(t.firestore,Ii),d=wx(t._key.path),c={next:h=>{e[o]&&e[o](F4(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=En(t,Mi);u=En(h.firestore,Ii),d=h._query;const m=new S1(u);c={next:g=>{e[o]&&e[o](new V4(u,m,h,g))},error:e[o+1],complete:e[o+2]},M4(t._query)}return function(m,g,v,y){const j=new c1(y),w=new o1(g,j,v);return m.asyncQueue.enqueueAndForget(async()=>s1(await ov(m),w)),()=>{j.Za(),m.asyncQueue.enqueueAndForget(async()=>i1(await ov(m),w))}}(uf(u),d,l,c)}function ff(t,e){return function(n,i){const a=new ia;return n.asyncQueue.enqueueAndForget(async()=>UH(await XH(n),i,a)),a.promise}(uf(t),e)}function F4(t,e,r){const n=r.docs.get(e._key),i=new S1(t);return new L4(t,i,e._key,n,new ch(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=od(e)}set(e,r,n){this._verifyNotCommitted();const i=C0(e,this._firestore),a=N1(i.converter,r,n),o=m1(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,Sn.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const a=C0(e,this._firestore);let o;return o=typeof(r=gt(r))=="string"||r instanceof df?I4(this._dataReader,"WriteBatch.update",a._key,r,n,i):T4(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=C0(e,this._firestore);return this._mutations=this._mutations.concat(new Sx(r._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function C0(t,e){if((t=gt(t)).firestore!==e)throw new be(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function dr(){return new f1("serverTimestamp")}function MC(t){return new p1("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){return uf(t=En(t,Ii)),new fG(t,e=>ff(t,e))}(function(e,r=!0){(function(i){sd=i})(lc),Js(new As("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new Ii(new bq(n.getProvider("auth-internal")),new Sq(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new be(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hm(u.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Hn(Y2,"4.7.3",e),Hn(Y2,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="firebasestorage.googleapis.com",z4="storageBucket",pG=2*60*1e3,gG=10*60*1e3,vG=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class B4 extends Rs{constructor(e,r,n=0){super(k0(e),`Firebase Storage: ${r} (${k0(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,B4.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return k0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var tr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tr||(tr={}));function k0(t){return"storage/"+t}function E1(){const t="An unknown error occurred, please check the error payload for server response.";return new br(tr.UNKNOWN,t)}function xG(t){return new br(tr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yG(t){return new br(tr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wG(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new br(tr.UNAUTHENTICATED,t)}function bG(){return new br(tr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jG(t){return new br(tr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function q4(){return new br(tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W4(){return new br(tr.CANCELED,"User canceled the upload/download.")}function _G(t){return new br(tr.INVALID_URL,"Invalid URL '"+t+"'.")}function NG(t){return new br(tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SG(){return new br(tr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+z4+"' property when initializing the app?")}function H4(){return new br(tr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EG(){return new br(tr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function CG(){return new br(tr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kG(t){return new br(tr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ob(t){return new br(tr.INVALID_ARGUMENT,t)}function G4(){return new br(tr.APP_DELETED,"The Firebase app was deleted.")}function TG(t){return new br(tr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Th(t,e){return new br(tr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hd(t){throw new br(tr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ss.makeFromUrl(e,r)}catch{return new ss(e,"")}if(n.path==="")return n;throw NG(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),v={bucket:1,path:3},y=r===U4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,j="([^?#]*)",w=new RegExp(`^https?://${y}/${i}/${j}`,"i"),b=[{regex:l,indices:c,postModify:a},{regex:g,indices:v,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<b.length;N++){const C=b[N],P=C.regex.exec(e);if(P){const T=P[C.indices.bucket];let k=P[C.indices.path];k||(k=""),n=new ss(T,k),C.postModify(n);break}}if(n==null)throw _G(e);return n}}class IG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AG(t,e,r){let n=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...j){u||(u=!0,e.apply(null,j))}function h(j){i=setTimeout(()=>{i=null,t(g,c())},j)}function m(){a&&clearTimeout(a)}function g(j,...w){if(u){m();return}if(j){m(),d.call(null,j,...w);return}if(c()||o){m(),d.call(null,j,...w);return}n<64&&(n*=2);let b;l===1?(l=2,b=0):b=(n+Math.random())*1e3,h(b)}let v=!1;function y(j){v||(v=!0,m(),!u&&(i!==null?(j||(l=2),clearTimeout(i),h(0)):j||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,y(!0)},r),y}function PG(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(t){return t!==void 0}function DG(t){return typeof t=="function"}function MG(t){return typeof t=="object"&&!Array.isArray(t)}function Ox(t){return typeof t=="string"||t instanceof String}function OC(t){return C1()&&t instanceof Blob}function C1(){return typeof Blob<"u"}function LC(t,e,r,n){if(n<e)throw Ob(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Ob(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function K4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var El;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(El||(El={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e,r,n,i,a,o,l,c,u,d,h,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new bp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===El.NO_ERROR,c=a.getStatus();if(!l||Y4(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===El.ABORT;n(!1,new bp(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new bp(u,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());RG(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=E1();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?G4():W4();o(c)}else{const c=q4();o(c)}};this.canceled_?r(!1,new bp(!1,null,!0)):this.backoffId_=AG(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bp{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function LG(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function VG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $G(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UG(t,e,r,n,i,a,o=!0){const l=K4(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return FG(u,e),LG(u,r),VG(u,a),$G(u,n),new OG(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BG(...t){const e=zG();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(C1())return new Blob(t);throw new br(tr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qG(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(t){if(typeof atob>"u")throw kG("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class T0{constructor(e,r){this.data=e,this.contentType=r||null}}function HG(t,e){switch(t){case gi.RAW:return new T0(Q4(e));case gi.BASE64:case gi.BASE64URL:return new T0(X4(t,e));case gi.DATA_URL:return new T0(KG(e),YG(e))}throw E1()}function Q4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function GG(t){let e;try{e=decodeURIComponent(t)}catch{throw Th(gi.DATA_URL,"Malformed data URL.")}return Q4(e)}function X4(t,e){switch(t){case gi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Th(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Th(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=WG(e)}catch(i){throw i.message.includes("polyfill")?i:Th(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class J4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Th(gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=QG(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function KG(t){const e=new J4(t);return e.base64?X4(gi.BASE64,e.rest):GG(e.rest)}function YG(t){return new J4(t).contentType}function QG(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,r){let n=0,i="";OC(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(OC(this.data_)){const n=this.data_,i=qG(n,e,r);return i===null?null:new Qi(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Qi(n,!0)}}static getBlob(...e){if(C1()){const r=e.map(n=>n instanceof Qi?n.data_:n);return new Qi(BG.apply(null,r))}else{const r=e.map(o=>Ox(o)?HG(gi.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new Qi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){let e;try{e=JSON.parse(t)}catch{return null}return MG(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function JG(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function eD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZG(t,e){return e}class vn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||ZG}}let jp=null;function eK(t){return!Ox(t)||t.length<2?t:eD(t)}function k1(){if(jp)return jp;const t=[];t.push(new vn("bucket")),t.push(new vn("generation")),t.push(new vn("metageneration")),t.push(new vn("name","fullPath",!0));function e(a,o){return eK(o)}const r=new vn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const i=new vn("size");return i.xform=n,t.push(i),t.push(new vn("timeCreated")),t.push(new vn("updated")),t.push(new vn("md5Hash",null,!0)),t.push(new vn("cacheControl",null,!0)),t.push(new vn("contentDisposition",null,!0)),t.push(new vn("contentEncoding",null,!0)),t.push(new vn("contentLanguage",null,!0)),t.push(new vn("contentType",null,!0)),t.push(new vn("metadata","customMetadata",!0)),jp=t,jp}function tK(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ss(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function rK(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return tK(n,t),n}function tD(t,e,r){const n=Z4(e);return n===null?null:rK(t,n,r)}function nK(t,e,r,n){const i=Z4(e);if(i===null||!Ox(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),g=ld(m,r,n),v=K4({alt:"media",token:u});return g+v})[0]}function rD(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class hc{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){if(!t)throw E1()}function T1(t,e){function r(n,i){const a=tD(t,i,e);return aa(a!==null),a}return r}function sK(t,e){function r(n,i){const a=tD(t,i,e);return aa(a!==null),nK(a,i,t.host,t._protocol)}return r}function pf(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=bG():i=wG():r.getStatus()===402?i=yG(t.bucket):r.getStatus()===403?i=jG(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function I1(t){const e=pf(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=xG(t.path)),a.serverResponse=i.serverResponse,a}return r}function iK(t,e,r){const n=e.fullServerUrl(),i=ld(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new hc(i,a,T1(t,r),o);return l.errorHandler=I1(e),l}function aK(t,e,r){const n=e.fullServerUrl(),i=ld(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new hc(i,a,sK(t,r),o);return l.errorHandler=I1(e),l}function oK(t,e){const r=e.fullServerUrl(),n=ld(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function o(c,u){}const l=new hc(n,i,o,a);return l.successCodes=[200,204],l.errorHandler=I1(e),l}function lK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nD(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=lK(null,e)),n}function sD(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let b="";for(let N=0;N<2;N++)b=b+Math.random().toString().slice(2);return b}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=nD(e,n,i),d=rD(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Qi.getBlob(h,n,m);if(g===null)throw H4();const v={name:u.fullPath},y=ld(a,t.host,t._protocol),j="POST",w=t.maxUploadRetryTime,x=new hc(y,j,T1(t,r),w);return x.urlParams=v,x.headers=o,x.body=g.uploadData(),x.errorHandler=pf(e),x}class uv{constructor(e,r,n,i){this.current=e,this.total=r,this.finalized=!!n,this.metadata=i||null}}function A1(t,e){let r=null;try{r=t.getResponseHeader("X-Goog-Upload-Status")}catch{aa(!1)}return aa(!!r&&(e||["active"]).indexOf(r)!==-1),r}function cK(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o=nD(e,n,i),l={name:o.fullPath},c=ld(a,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=rD(o,r),m=t.maxUploadRetryTime;function g(y){A1(y);let j;try{j=y.getResponseHeader("X-Goog-Upload-URL")}catch{aa(!1)}return aa(Ox(j)),j}const v=new hc(c,u,g,m);return v.urlParams=l,v.headers=d,v.body=h,v.errorHandler=pf(e),v}function uK(t,e,r,n){const i={"X-Goog-Upload-Command":"query"};function a(u){const d=A1(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{aa(!1)}h||aa(!1);const m=Number(h);return aa(!isNaN(m)),new uv(m,n.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,c=new hc(r,o,a,l);return c.headers=i,c.errorHandler=pf(e),c}const VC=256*1024;function dK(t,e,r,n,i,a,o,l){const c=new uv(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw EG();const u=c.total-c.current;let d=u;i>0&&(d=Math.min(d,i));const h=c.current,m=h+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},y=n.slice(h,m);if(y===null)throw H4();function j(N,C){const P=A1(N,["active","final"]),T=c.current+d,k=n.size();let D;return P==="final"?D=T1(e,a)(N,C):D=null,new uv(T,k,P==="final",D)}const w="POST",x=e.maxUploadRetryTime,b=new hc(r,w,j,x);return b.headers=v,b.body=y.uploadData(),b.progressCallback=l||null,b.errorHandler=pf(t),b}const Mn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function I0(t){switch(t){case"running":case"pausing":case"canceling":return Mn.RUNNING;case"paused":return Mn.PAUSED;case"success":return Mn.SUCCESS;case"canceled":return Mn.CANCELED;case"error":return Mn.ERROR;default:return Mn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(e,r,n){if(DG(e)||r!=null||n!=null)this.next=e,this.error=r??void 0,this.complete=n??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class mK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=El.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=El.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=El.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Hd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fK extends mK{initXhr(){this.xhr_.responseType="text"}}function Ja(){return new fK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=r,this._metadata=n,this._mappings=k1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(tr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Y4(i.status,[]))if(a)i=q4();else{this.sleepTime=Math.max(this.sleepTime*2,vG),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(tr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return r=>this._updateProgress(e+r)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":e(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,r)=>{const n=cK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((r,n)=>{const i=uK(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ja,r,n);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=VC*this._chunkMultiplier,r=new uv(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,a)=>{let o;try{o=dK(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Ja,i,a,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){VC*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,r)=>{const n=iK(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,r)=>{const n=sD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Ja,e,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const r=this._transferred;this._transferred=e,this._transferred!==r&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=e,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=W4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=I0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,r,n,i){const a=new hK(r||void 0,n||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,r){return this._promise.then(e,r)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const r=this._observers.indexOf(e);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(I0(this._state)){case Mn.SUCCESS:Ec(this._resolve.bind(null,this.snapshot))();break;case Mn.CANCELED:case Mn.ERROR:const r=this._reject;Ec(r.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(I0(this._state)){case Mn.RUNNING:case Mn.PAUSED:e.next&&Ec(e.next.bind(e,this.snapshot))();break;case Mn.SUCCESS:e.complete&&Ec(e.complete.bind(e))();break;case Mn.CANCELED:case Mn.ERROR:e.error&&Ec(e.error.bind(e,this._error))();break;default:e.error&&Ec(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,r){this._service=e,r instanceof ss?this._location=r:this._location=ss.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new ql(e,r)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eD(this._location.path)}get storage(){return this._service}get parent(){const e=XG(this._location.path);if(e===null)return null;const r=new ss(this._location.bucket,e);return new ql(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw TG(e)}}function gK(t,e,r){t._throwIfRoot("uploadBytes");const n=sD(t.storage,t._location,k1(),new Qi(e,!0),r);return t.storage.makeRequestWithTokens(n,Ja).then(i=>({metadata:i,ref:t}))}function vK(t,e,r){return t._throwIfRoot("uploadBytesResumable"),new pK(t,new Qi(e),r)}function xK(t){t._throwIfRoot("getDownloadURL");const e=aK(t.storage,t._location,k1());return t.storage.makeRequestWithTokens(e,Ja).then(r=>{if(r===null)throw CG();return r})}function yK(t){t._throwIfRoot("deleteObject");const e=oK(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ja)}function wK(t,e){const r=JG(t._location.path,e),n=new ss(t._location.bucket,r);return new ql(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t){return/^[A-Za-z]+:\/\//.test(t)}function jK(t,e){return new ql(t,e)}function iD(t,e){if(t instanceof P1){const r=t;if(r._bucket==null)throw SG();const n=new ql(r,r._bucket);return e!=null?iD(n,e):n}else return e!==void 0?wK(t,e):t}function _K(t,e){if(e&&bK(e)){if(t instanceof P1)return jK(t,e);throw Ob("To use ref(service, url), the first argument must be a Storage instance.")}else return iD(t,e)}function FC(t,e){const r=e==null?void 0:e[z4];return r==null?null:ss.makeFromBucketSpec(r,t)}function NK(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:NP(i,t.app.options.projectId))}class P1{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=U4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pG,this._maxUploadRetryTime=gG,this._requests=new Set,i!=null?this._bucket=ss.makeFromBucketSpec(i,this._host):this._bucket=FC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ss.makeFromBucketSpec(this._url,e):this._bucket=FC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ql(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new IG(G4());{const o=UG(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const $C="@firebase/storage",UC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="storage";function oD(t,e,r){return t=gt(t),gK(t,e,r)}function zC(t,e,r){return t=gt(t),vK(t,e,r)}function dv(t){return t=gt(t),xK(t)}function SK(t){return t=gt(t),yK(t)}function Ih(t,e){return t=gt(t),_K(t,e)}function EK(t=fx(),e){t=gt(t);const n=Bo(t,aD).getImmediate({identifier:e}),i=bP("storage");return i&&CK(n,...i),n}function CK(t,e,r,n={}){NK(t,e,r,n)}function kK(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new P1(r,n,i,e,lc)}function TK(){Js(new As(aD,kK,"PUBLIC").setMultipleInstances(!0)),Hn($C,UC,""),Hn($C,UC,"esm2017")}TK();const lD="@firebase/installations",R1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=1e4,uD=`w:${R1}`,dD="FIS_v2",IK="https://firebaseinstallations.googleapis.com/v1",AK=60*60*1e3,PK="installations",RK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wl=new oc(PK,RK,DK);function hD(t){return t instanceof Rs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD({projectId:t}){return`${IK}/projects/${t}/installations`}function fD(t){return{token:t.token,requestStatus:2,expiresIn:OK(t.expiresIn),creationTime:Date.now()}}async function pD(t,e){const n=(await e.json()).error;return Wl.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function gD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MK(t,{refreshToken:e}){const r=gD(t);return r.append("Authorization",LK(e)),r}async function vD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function OK(t){return Number(t.replace("s","000"))}function LK(t){return`${dD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VK({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=mD(t),i=gD(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:r,authVersion:dD,appId:t.appId,sdkVersion:uD},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await vD(()=>fetch(n,l));if(c.ok){const u=await c.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:fD(u.authToken)}}else throw await pD("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=/^[cdef][\w-]{21}$/,Lb="";function UK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=zK(t);return $K.test(r)?r:Lb}catch{return Lb}}function zK(t){return FK(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Map;function wD(t,e){const r=Lx(t);bD(r,e),BK(r,e)}function bD(t,e){const r=yD.get(t);if(r)for(const n of r)n(e)}function BK(t,e){const r=qK();r&&r.postMessage({key:t,fid:e}),WK()}let wl=null;function qK(){return!wl&&"BroadcastChannel"in self&&(wl=new BroadcastChannel("[Firebase] FID Change"),wl.onmessage=t=>{bD(t.data.key,t.data.fid)}),wl}function WK(){yD.size===0&&wl&&(wl.close(),wl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK="firebase-installations-database",GK=1,Hl="firebase-installations-store";let A0=null;function D1(){return A0||(A0=IP(HK,GK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hl)}}})),A0}async function hv(t,e){const r=Lx(t),i=(await D1()).transaction(Hl,"readwrite"),a=i.objectStore(Hl),o=await a.get(r);return await a.put(e,r),await i.done,(!o||o.fid!==e.fid)&&wD(t,e.fid),e}async function jD(t){const e=Lx(t),n=(await D1()).transaction(Hl,"readwrite");await n.objectStore(Hl).delete(e),await n.done}async function Vx(t,e){const r=Lx(t),i=(await D1()).transaction(Hl,"readwrite"),a=i.objectStore(Hl),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await i.done,l&&(!o||o.fid!==l.fid)&&wD(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t){let e;const r=await Vx(t.appConfig,n=>{const i=KK(n),a=YK(t,i);return e=a.registrationPromise,a.installationEntry});return r.fid===Lb?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function KK(t){const e=t||{fid:UK(),registrationStatus:0};return _D(e)}function YK(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Wl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=QK(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XK(t)}:{installationEntry:e}}async function QK(t,e){try{const r=await VK(t,e);return hv(t.appConfig,r)}catch(r){throw hD(r)&&r.customData.serverCode===409?await jD(t.appConfig):await hv(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function XK(t){let e=await BC(t.appConfig);for(;e.registrationStatus===1;)await xD(100),e=await BC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await M1(t);return n||r}return e}function BC(t){return Vx(t,e=>{if(!e)throw Wl.create("installation-not-found");return _D(e)})}function _D(t){return JK(t)?{fid:t.fid,registrationStatus:0}:t}function JK(t){return t.registrationStatus===1&&t.registrationTime+cD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZK({appConfig:t,heartbeatServiceProvider:e},r){const n=eY(t,r),i=MK(t,r),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:uD,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await vD(()=>fetch(n,l));if(c.ok){const u=await c.json();return fD(u)}else throw await pD("Generate Auth Token",c)}function eY(t,{fid:e}){return`${mD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(t,e=!1){let r;const n=await Vx(t.appConfig,a=>{if(!ND(a))throw Wl.create("not-registered");const o=a.authToken;if(!e&&nY(o))return a;if(o.requestStatus===1)return r=tY(t,e),a;{if(!navigator.onLine)throw Wl.create("app-offline");const l=iY(a);return r=rY(t,l),l}});return r?await r:n.authToken}async function tY(t,e){let r=await qC(t.appConfig);for(;r.authToken.requestStatus===1;)await xD(100),r=await qC(t.appConfig);const n=r.authToken;return n.requestStatus===0?O1(t,e):n}function qC(t){return Vx(t,e=>{if(!ND(e))throw Wl.create("not-registered");const r=e.authToken;return aY(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function rY(t,e){try{const r=await ZK(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await hv(t.appConfig,n),r}catch(r){if(hD(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await jD(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hv(t.appConfig,n)}throw r}}function ND(t){return t!==void 0&&t.registrationStatus===2}function nY(t){return t.requestStatus===2&&!sY(t)}function sY(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+AK}function iY(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function aY(t){return t.requestStatus===1&&t.requestTime+cD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oY(t){const e=t,{installationEntry:r,registrationPromise:n}=await M1(e);return n?n.catch(console.error):O1(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lY(t,e=!1){const r=t;return await cY(r),(await O1(r,e)).token}async function cY(t){const{registrationPromise:e}=await M1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t){if(!t||!t.options)throw P0("App Configuration");if(!t.name)throw P0("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw P0(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function P0(t){return Wl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="installations",dY="installations-internal",hY=t=>{const e=t.getProvider("app").getImmediate(),r=uY(e),n=Bo(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},mY=t=>{const e=t.getProvider("app").getImmediate(),r=Bo(e,SD).getImmediate();return{getId:()=>oY(r),getToken:i=>lY(r,i)}};function fY(){Js(new As(SD,hY,"PUBLIC")),Js(new As(dY,mY,"PRIVATE"))}fY();Hn(lD,R1);Hn(lD,R1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="analytics",pY="firebase_id",gY="origin",vY=60*1e3,xY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",L1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new mx("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},os=new oc("analytics","Analytics",yY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(t){if(!t.startsWith(L1)){const e=os.create("invalid-gtag-resource",{gtagURL:t});return Gn.warn(e.message),""}return t}function ED(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function bY(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function jY(t,e){const r=bY("firebase-js-sdk-policy",{createScriptURL:wY}),n=document.createElement("script"),i=`${L1}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function _Y(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function NY(t,e,r,n,i,a){const o=n[i];try{if(o)await e[o];else{const c=(await ED(r)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(l){Gn.error(l)}t("config",i,a)}async function SY(t,e,r,n,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await ED(r);for(const c of o){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,i||{})}catch(a){Gn.error(a)}}function EY(t,e,r,n){async function i(a,...o){try{if(a==="event"){const[l,c]=o;await SY(t,e,r,l,c)}else if(a==="config"){const[l,c]=o;await NY(t,e,r,n,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){Gn.error(l)}}return i}function CY(t,e,r,n,i){let a=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=EY(a,t,e,r),{gtagCore:a,wrappedGtag:window[i]}}function kY(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(L1)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY=30,IY=1e3;class AY{constructor(e={},r=IY){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CD=new AY;function PY(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function RY(t){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:PY(n)},a=xY.replace("{app-id}",r),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw os.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function DY(t,e=CD,r){const{appId:n,apiKey:i,measurementId:a}=t.options;if(!n)throw os.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:n};throw os.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new LY;return setTimeout(async()=>{l.abort()},vY),kD({appId:n,apiKey:i,measurementId:a},o,l,e)}async function kD(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=CD){var a;const{appId:o,measurementId:l}=t;try{await MY(n,e)}catch(c){if(l)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await RY(t);return i.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!OY(u)){if(i.deleteThrottleMetadata(o),l)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((a=u==null?void 0:u.customData)===null||a===void 0?void 0:a.httpStatus)===503?x2(r,i.intervalMillis,TY):x2(r,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return i.setThrottleMetadata(o,h),Gn.debug(`Calling attemptFetch again in ${d} millis`),kD(t,h,n,i)}}function MY(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(a),n(os.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OY(t){if(!(t instanceof Rs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class LY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function VY(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const a=await e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FY(){if(EP())try{await CP()}catch(t){return Gn.warn(os.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Gn.warn(os.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $Y(t,e,r,n,i,a,o){var l;const c=DY(t);c.then(g=>{r[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Gn.error(g)),e.push(c);const u=FY().then(g=>{if(g)return n.getId()}),[d,h]=await Promise.all([c,u]);kY(a)||jY(a,d.measurementId),i("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[gY]="firebase",m.update=!0,h!=null&&(m[pY]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e){this.app=e}_delete(){return delete Ah[this.app.options.appId],Promise.resolve()}}let Ah={},WC=[];const HC={};let R0="dataLayer",zY="gtag",GC,TD,KC=!1;function BY(){const t=[];if(SP()&&t.push("This is a browser extension environment."),R9()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=os.create("invalid-analytics-context",{errorInfo:e});Gn.warn(r.message)}}function qY(t,e,r){BY();const n=t.options.appId;if(!n)throw os.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw os.create("no-api-key");if(Ah[n]!=null)throw os.create("already-exists",{id:n});if(!KC){_Y(R0);const{wrappedGtag:a,gtagCore:o}=CY(Ah,WC,HC,R0,zY);TD=a,GC=o,KC=!0}return Ah[n]=$Y(t,WC,HC,e,GC,R0,r),new UY(t)}function WY(t=fx()){t=gt(t);const e=Bo(t,mv);return e.isInitialized()?e.getImmediate():HY(t)}function HY(t,e={}){const r=Bo(t,mv);if(r.isInitialized()){const i=r.getImmediate();if(am(e,r.getOptions()))return i;throw os.create("already-initialized")}return r.initialize({options:e})}function GY(t,e,r,n){t=gt(t),VY(TD,Ah[t.app.options.appId],e,r,n).catch(i=>Gn.error(i))}const YC="@firebase/analytics",QC="0.10.8";function KY(){Js(new As(mv,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return qY(n,i,r)},"PUBLIC")),Js(new As("analytics-internal",t,"PRIVATE")),Hn(YC,QC),Hn(YC,QC,"esm2017");function t(e){try{const r=e.getProvider(mv).getImmediate();return{logEvent:(n,i,a)=>GY(r,n,i,a)}}catch(r){throw os.create("interop-component-reg-failed",{reason:r})}}}KY();const YY={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Fx=AP(YY),Lt=pq(Fx),fe=nG(Fx),Ph=EK(Fx);WY(Fx);const li={USERS:"users",LISTINGS:"listings",REVIEWS:"reviews",FAVORITES:"favorites",CONVERSATIONS:"conversations",MESSAGES:"messages",REPORTS:"reports",CHAT_HISTORY:"chatHistory"},XC={actionCodeSettings:{url:`${window.location.origin}/BOXETU/auth`,handleCodeInApp:!1}};Lt.useDeviceLanguage();Lt.settings.appVerificationDisabledForTesting=!1;class Gd{static async createUser(e,r){const n=ze(fe,li.USERS,e),i={id:e,email:r.email,displayName:r.displayName||"Utilisateur",photoURL:r.photoURL||null,phone:null,isVerified:!1,verificationStatus:"not_started",university:r.university||"Université non spécifiée",studentEmail:r.studentEmail||null,fieldOfStudy:r.fieldOfStudy||"Non spécifié",graduationYear:r.graduationYear||new Date().getFullYear()+2,campus:r.campus||"Campus principal",bio:null,location:"Paris, France",rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date};await Sl(n,{...i,createdAt:dr(),lastSeen:dr()})}static async getUser(e){var r,n;try{const i=await Gr(ze(fe,li.USERS,e));if(!i.exists())return null;const a=i.data();return{...a,id:e,createdAt:((r=a.createdAt)==null?void 0:r.toDate())||new Date,lastSeen:((n=a.lastSeen)==null?void 0:n.toDate())||new Date}}catch(i){return console.error("Error getting user:",i),null}}static async updateUser(e,r){const n=ze(fe,li.USERS,e),i=Object.fromEntries(Object.entries(r).filter(([a,o])=>o!==void 0));await mr(n,{...i,updatedAt:dr()})}static async updateUserStats(e,r){const n=ze(fe,li.USERS,e),i={};r.reviewCount!==void 0&&(i.reviewCount=r.reviewCount),r.averageRating!==void 0&&(i.rating=r.averageRating),r.transactionsCount!==void 0&&(i.transactionsCount=MC(r.transactionsCount)),r.co2Saved!==void 0&&(i.co2Saved=MC(r.co2Saved)),await mr(n,i)}static async deleteUser(e){const r=$4(fe);r.delete(ze(fe,li.USERS,e));const n=$t(Nt(fe,li.LISTINGS),Bt("sellerId","==",e));(await Zt(n)).forEach(u=>{r.delete(u.ref)});const a=$t(Nt(fe,li.FAVORITES),Bt("userId","==",e));(await Zt(a)).forEach(u=>{r.delete(u.ref)});const l=$t(Nt(fe,li.REVIEWS),Bt("reviewerId","==",e));(await Zt(l)).forEach(u=>{r.delete(u.ref)}),await r.commit()}static async searchUsers(e,r=10){try{const n=Nt(fe,li.USERS),i=e(n,Bt("displayName",">=",e),Bt("displayName","<=",e+""),cv("displayName"),r(r));return(await Zt(i)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error searching users:",n),[]}}static async getUsersByUniversity(e,r=20){try{const n=Nt(fe,li.USERS),i=$t(n,Bt("university","==",e),cv("createdAt","desc"),r(r));return(await Zt(i)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error getting users by university:",n),[]}}}const ID=p.createContext(void 0),Mt=()=>{const t=p.useContext(ID);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},QY=({children:t})=>{const[e,r]=p.useState(null),[n,i]=p.useState(null),[a,o]=p.useState(!0),l=async(y,j)=>{try{await Gd.getUser(y.uid)||await Gd.createUser(y.uid,{email:y.email,displayName:y.displayName||"Utilisateur",photoURL:y.photoURL||void 0,isVerified:!1,verificationStatus:"not_started",university:j==null?void 0:j.university,fieldOfStudy:j==null?void 0:j.fieldOfStudy,graduationYear:j==null?void 0:j.graduationYear,campus:j==null?void 0:j.campus,...j});const x=await Gd.getUser(y.uid);i(x)}catch(w){console.error("Error creating/updating user profile:",w),ne.error("Erreur lors de la création du profil")}},c=async()=>{if(e)try{const y=await Gd.getUser(e.uid);i(y)}catch(y){console.error("Error refreshing user profile:",y)}},u=async(y,j)=>{try{await QB(Lt,y,j),ne.success("Connexion réussie !")}catch(w){let x="Erreur de connexion";if(w instanceof Error){const b=w;switch(b.code){case"auth/user-not-found":x="Aucun compte trouvé avec cet email";break;case"auth/wrong-password":x="Mot de passe incorrect";break;case"auth/invalid-email":x="Format d'email invalide";break;case"auth/too-many-requests":x="Trop de tentatives. Réessayez plus tard";break;default:x=b.message}}throw ne.error(x),w}},d=async(y,j,w,x)=>{try{const{user:b}=await nR(Lt,y,j);await cm(b,{displayName:w}),await l(b,x),ne.success("Compte créé avec succès !")}catch(b){let N="Erreur lors de la création du compte";if(b instanceof Error){const C=b;switch(C.code){case"auth/email-already-in-use":N="Cet email est déjà utilisé";break;case"auth/weak-password":N="Le mot de passe est trop faible";break;case"auth/invalid-email":N="Format d'email invalide";break;default:N=C.message}}throw ne.error(N),b}},h=async()=>{try{const y=new Yi;y.setCustomParameters({prompt:"select_account"}),y.addScope("email"),y.addScope("profile"),await T7(Lt,y)}catch(y){throw console.error("Google sign in error:",y),y instanceof Error&&ne.error("Erreur de connexion Google : "+y.message),y}},m=async()=>{try{await n7(Lt),i(null),ne.success("Déconnexion réussie !")}catch(y){throw ne.error("Erreur lors de la déconnexion"),y}},g=async y=>{if(!(!e||!n))try{await Gd.updateUser(e.uid,y),i({...n,...y}),ne.success("Profil mis à jour !")}catch(j){throw console.error("Error updating profile:",j),ne.error("Erreur lors de la mise à jour du profil"),j}};p.useEffect(()=>{const y=r7(Lt,async w=>{r(w),w?await l(w):i(null),o(!1)});return(async()=>{try{const w=await A7(Lt);w!=null&&w.user&&(await l(w.user),ne.success("Connexion Google réussie !"))}catch(w){if(console.error("Redirect result error:",w),w instanceof Error){const x=w;x.code!=="auth/null-user"&&ne.error("Erreur de connexion Google : "+x.message)}}})(),y},[]);const v={currentUser:e,userProfile:n,loading:a,signIn:u,signUp:d,signInWithGoogle:h,logout:m,updateUserProfile:g,refreshUserProfile:c};return s.jsx(ID.Provider,{value:v,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AD=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...JY,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:AD("lucide",i),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const r=p.forwardRef(({className:n,...i},a)=>p.createElement(ZY,{ref:a,iconNode:e,className:AD(`lucide-${XY(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=se("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=se("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=se("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=se("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=se("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=se("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=se("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=se("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=se("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=se("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=se("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=se("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=se("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=se("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=se("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=se("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=se("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function TQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function qx(...t){return e=>t.forEach(r=>TQ(r,e))}function Je(...t){return p.useCallback(qx(...t),t)}var _a=p.forwardRef((t,e)=>{const{children:r,...n}=t,i=p.Children.toArray(r),a=i.find(AQ);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return s.jsx(Ub,{...n,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return s.jsx(Ub,{...n,ref:e,children:r})});_a.displayName="Slot";var Ub=p.forwardRef((t,e)=>{const{children:r,...n}=t;if(p.isValidElement(r)){const i=RQ(r);return p.cloneElement(r,{...PQ(n,r.props),ref:e?qx(e,i):i})}return p.Children.count(r)>1?p.Children.only(null):null});Ub.displayName="SlotClone";var IQ=({children:t})=>s.jsx(s.Fragment,{children:t});function AQ(t){return p.isValidElement(t)&&t.type===IQ}function PQ(t,e){const r={...e};for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{a(...l),i(...l)}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function RQ(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function QD(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=QD(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function DQ(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=QD(t))&&(n&&(n+=" "),n+=e);return n}const sk=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,ik=DQ,Wx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return ik(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const m=sk(d)||sk(h);return i[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[y,j]=v;return Array.isArray(j)?j.includes({...a,...l}[y]):{...a,...l}[y]===j})?[...u,h,m]:u},[]);return ik(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};function XD(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=XD(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function MQ(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=XD(t))&&(n&&(n+=" "),n+=e);return n}const U1="-",OQ=t=>{const e=VQ(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(U1);return l[0]===""&&l.length!==1&&l.shift(),JD(l,e)||LQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},JD=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?JD(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(U1);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},ak=/^\[(.+)\]$/,LQ=t=>{if(ak.test(t)){const e=ak.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},VQ=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return $Q(Object.entries(t.classGroups),r).forEach(([a,o])=>{zb(o,n,a,e)}),n},zb=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:ok(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(FQ(i)){zb(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{zb(o,ok(e,a),r,n)})})},ok=(t,e)=>{let r=t;return e.split(U1).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},FQ=t=>t.isThemeGetter,$Q=(t,e)=>e?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[r,i]}):t,UQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},ZD="!",zQ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let j=0;j<l.length;j++){let w=l[j];if(u===0){if(w===i&&(n||l.slice(j,j+a)===e)){c.push(l.slice(d,j)),d=j+a;continue}if(w==="/"){h=j;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(ZD),v=g?m.substring(1):m,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},BQ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},qQ=t=>({cache:UQ(t.cacheSize),parseClassName:zQ(t),...OQ(t)}),WQ=/\s+/,HQ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(WQ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let v=!!g,y=n(v?m.substring(0,g):m);if(!y){if(!v){l=u+(l.length>0?" "+l:l);continue}if(y=n(m),!y){l=u+(l.length>0?" "+l:l);continue}v=!1}const j=BQ(d).join(":"),w=h?j+ZD:j,x=w+y;if(a.includes(x))continue;a.push(x);const b=i(y,v);for(let N=0;N<b.length;++N){const C=b[N];a.push(w+C)}l=u+(l.length>0?" "+l:l)}return l};function GQ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=eM(e))&&(n&&(n+=" "),n+=r);return n}const eM=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=eM(t[n]))&&(r&&(r+=" "),r+=e);return r};function KQ(t,...e){let r,n,i,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return r=qQ(u),n=r.cache.get,i=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=HQ(c,r);return i(c,d),d}return function(){return a(GQ.apply(null,arguments))}}const Xt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},tM=/^\[(?:([a-z-]+):)?(.+)\]$/i,YQ=/^\d+\/\d+$/,QQ=new Set(["px","full","screen"]),XQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eX=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ui=t=>gu(t)||QQ.has(t)||YQ.test(t),Va=t=>ud(t,"length",cX),gu=t=>!!t&&!Number.isNaN(Number(t)),L0=t=>ud(t,"number",gu),Kd=t=>!!t&&Number.isInteger(Number(t)),rX=t=>t.endsWith("%")&&gu(t.slice(0,-1)),st=t=>tM.test(t),Fa=t=>XQ.test(t),nX=new Set(["length","size","percentage"]),sX=t=>ud(t,nX,rM),iX=t=>ud(t,"position",rM),aX=new Set(["image","url"]),oX=t=>ud(t,aX,dX),lX=t=>ud(t,"",uX),Yd=()=>!0,ud=(t,e,r)=>{const n=tM.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},cX=t=>JQ.test(t)&&!ZQ.test(t),rM=()=>!1,uX=t=>eX.test(t),dX=t=>tX.test(t),hX=()=>{const t=Xt("colors"),e=Xt("spacing"),r=Xt("blur"),n=Xt("brightness"),i=Xt("borderColor"),a=Xt("borderRadius"),o=Xt("borderSpacing"),l=Xt("borderWidth"),c=Xt("contrast"),u=Xt("grayscale"),d=Xt("hueRotate"),h=Xt("invert"),m=Xt("gap"),g=Xt("gradientColorStops"),v=Xt("gradientColorStopPositions"),y=Xt("inset"),j=Xt("margin"),w=Xt("opacity"),x=Xt("padding"),b=Xt("saturate"),N=Xt("scale"),C=Xt("sepia"),P=Xt("skew"),T=Xt("space"),k=Xt("translate"),D=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",st,e],R=()=>[st,e],S=()=>["",Ui,Va],V=()=>["auto",gu,st],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",st],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[gu,st];return{cacheSize:500,separator:":",theme:{colors:[Yd],spacing:[Ui,Va],blur:["none","",Fa,st],brightness:J(),borderColor:[t],borderRadius:["none","","full",Fa,st],borderSpacing:R(),borderWidth:S(),contrast:J(),grayscale:W(),hueRotate:J(),invert:W(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[rX,Va],inset:A(),margin:A(),opacity:J(),padding:R(),saturate:J(),scale:J(),sepia:W(),skew:J(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",st]}],container:["container"],columns:[{columns:[Fa]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),st]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kd,st]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",st]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Kd,st]}],"grid-cols":[{"grid-cols":[Yd]}],"col-start-end":[{col:["auto",{span:["full",Kd,st]},st]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Yd]}],"row-start-end":[{row:["auto",{span:[Kd,st]},st]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",st]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",st]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",st,e]}],"min-w":[{"min-w":[st,e,"min","max","fit"]}],"max-w":[{"max-w":[st,e,"none","full","min","max","fit","prose",{screen:[Fa]},Fa]}],h:[{h:[st,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[st,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Fa,Va]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",L0]}],"font-family":[{font:[Yd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",st]}],"line-clamp":[{"line-clamp":["none",gu,L0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ui,st]}],"list-image":[{"list-image":["none",st]}],"list-style-type":[{list:["none","disc","decimal",st]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ui,Va]}],"underline-offset":[{"underline-offset":["auto",Ui,st]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),iX]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oX]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Ui,st]}],"outline-w":[{outline:[Ui,Va]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ui,Va]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Fa,lX]}],"shadow-color":[{shadow:[Yd]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Fa,st]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",st]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",st]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",st]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Kd,st]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",st]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",st]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",st]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ui,Va,L0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},mX=KQ(hX);function Oe(...t){return mX(MQ(t))}const Bb=Wx("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-full px-3 text-xs",lg:"h-10 rounded-full px-8",icon:"h-9 w-9 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),F=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},a)=>{const o=n?_a:"button";return s.jsx(o,{className:Oe(Bb({variant:e,size:r,className:t})),ref:a,...i})});F.displayName="Button";const ye=p.forwardRef(({className:t,type:e,...r},n)=>s.jsx("input",{type:e,className:Oe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));ye.displayName="Input";function ve(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function fX(t,e){const r=p.createContext(e),n=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function i(a){const o=p.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,i]}function ps(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var w;const{scope:m,children:g,...v}=h,y=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,j=p.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:j,children:g})};u.displayName=a+"Provider";function d(h,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,pX(i,...e)]}function pX(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Sr(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function hs({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=gX({defaultProp:e,onChange:r}),a=t!==void 0,o=a?t:n,l=Sr(r),c=p.useCallback(u=>{if(a){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else i(u)},[a,t,i,l]);return[o,c]}function gX({defaultProp:t,onChange:e}){const r=p.useState(t),[n]=r,i=p.useRef(n),a=Sr(e);return p.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),r}var vX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],De=vX.reduce((t,e)=>{const r=p.forwardRef((n,i)=>{const{asChild:a,...o}=n,l=a?_a:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function nM(t,e){t&&rd.flushSync(()=>t.dispatchEvent(e))}function xX(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:j,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,yX(i,...e)]}function yX(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function gf(t){const e=t+"CollectionProvider",[r,n]=xX(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,j=ke.useRef(null),w=ke.useRef(new Map).current;return s.jsx(i,{scope:v,itemMap:w,collectionRef:j,children:y})};o.displayName=e;const l=t+"CollectionSlot",c=ke.forwardRef((g,v)=>{const{scope:y,children:j}=g,w=a(l,y),x=Je(v,w.collectionRef);return s.jsx(_a,{ref:x,children:j})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=ke.forwardRef((g,v)=>{const{scope:y,children:j,...w}=g,x=ke.useRef(null),b=Je(v,x),N=a(u,y);return ke.useEffect(()=>(N.itemMap.set(x,{ref:x,...w}),()=>void N.itemMap.delete(x))),s.jsx(_a,{[d]:"",ref:b,children:j})});h.displayName=u;function m(g){const v=a(t+"CollectionConsumer",g);return ke.useCallback(()=>{const j=v.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((N,C)=>w.indexOf(N.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,n]}var wX=p.createContext(void 0);function fc(t){const e=p.useContext(wX);return t||e||"ltr"}function bX(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t);p.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var jX="DismissableLayer",qb="dismissableLayer.update",_X="dismissableLayer.pointerDownOutside",NX="dismissableLayer.focusOutside",lk,sM=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vf=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(sM),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),v=Je(e,T=>h(T)),y=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(j),x=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,N=x>=w,C=CX(T=>{const k=T.target,D=[...u.branches].some(E=>E.contains(k));!N||D||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),P=kX(T=>{const k=T.target;[...u.branches].some(E=>E.contains(k))||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return bX(T=>{x===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lk=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ck(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=lk)}},[d,m,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ck())},[d,u]),p.useEffect(()=>{const T=()=>g({});return document.addEventListener(qb,T),()=>document.removeEventListener(qb,T)},[]),s.jsx(De.div,{...c,ref:v,style:{pointerEvents:b?N?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,P.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,C.onPointerDownCapture)})});vf.displayName=jX;var SX="DismissableLayerBranch",EX=p.forwardRef((t,e)=>{const r=p.useContext(sM),n=p.useRef(null),i=Je(e,n);return p.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(De.div,{...t,ref:i})});EX.displayName=SX;function CX(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t),n=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){iM(_X,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function kX(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t),n=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!n.current&&iM(NX,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ck(){const t=new CustomEvent(qb);document.dispatchEvent(t)}function iM(t,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?nM(i,a):i.dispatchEvent(a)}var V0=0;function Hx(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uk()),document.body.insertAdjacentElement("beforeend",t[1]??uk()),V0++,()=>{V0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),V0--}},[])}function uk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var F0="focusScope.autoFocusOnMount",$0="focusScope.autoFocusOnUnmount",dk={bubbles:!1,cancelable:!0},TX="FocusScope",xf=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=Sr(i),d=Sr(a),h=p.useRef(null),m=Je(e,y=>c(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let y=function(b){if(g.paused||!l)return;const N=b.target;l.contains(N)?h.current=N:Ua(h.current,{select:!0})},j=function(b){if(g.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||Ua(h.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&Ua(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",j);const x=new MutationObserver(w);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",j),x.disconnect()}}},[n,l,g.paused]),p.useEffect(()=>{if(l){mk.add(g);const y=document.activeElement;if(!l.contains(y)){const w=new CustomEvent(F0,dk);l.addEventListener(F0,u),l.dispatchEvent(w),w.defaultPrevented||(IX(MX(aM(l)),{select:!0}),document.activeElement===y&&Ua(l))}return()=>{l.removeEventListener(F0,u),setTimeout(()=>{const w=new CustomEvent($0,dk);l.addEventListener($0,d),l.dispatchEvent(w),w.defaultPrevented||Ua(y??document.body,{select:!0}),l.removeEventListener($0,d),mk.remove(g)},0)}}},[l,u,d,g]);const v=p.useCallback(y=>{if(!r&&!n||g.paused)return;const j=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(j&&w){const x=y.currentTarget,[b,N]=AX(x);b&&N?!y.shiftKey&&w===N?(y.preventDefault(),r&&Ua(b,{select:!0})):y.shiftKey&&w===b&&(y.preventDefault(),r&&Ua(N,{select:!0})):w===x&&y.preventDefault()}},[r,n,g.paused]);return s.jsx(De.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});xf.displayName=TX;function IX(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ua(n,{select:e}),document.activeElement!==r)return}function AX(t){const e=aM(t),r=hk(e,t),n=hk(e.reverse(),t);return[r,n]}function aM(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function hk(t,e){for(const r of t)if(!PX(r,{upTo:e}))return r}function PX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function RX(t){return t instanceof HTMLInputElement&&"select"in t}function Ua(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&RX(t)&&e&&t.select()}}var mk=DX();function DX(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=fk(t,e),t.unshift(e)},remove(e){var r;t=fk(t,e),(r=t[0])==null||r.resume()}}}function fk(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function MX(t){return t.filter(e=>e.tagName!=="A")}var Lr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},OX=eI.useId||(()=>{}),LX=0;function ls(t){const[e,r]=p.useState(OX());return Lr(()=>{r(n=>n??String(LX++))},[t]),e?`radix-${e}`:""}const VX=["top","right","bottom","left"],To=Math.min,ts=Math.max,gv=Math.round,_p=Math.floor,Io=t=>({x:t,y:t}),FX={left:"right",right:"left",bottom:"top",top:"bottom"},$X={start:"end",end:"start"};function Wb(t,e,r){return ts(t,To(e,r))}function Na(t,e){return typeof t=="function"?t(e):t}function Sa(t){return t.split("-")[0]}function dd(t){return t.split("-")[1]}function z1(t){return t==="x"?"y":"x"}function B1(t){return t==="y"?"height":"width"}function Ao(t){return["top","bottom"].includes(Sa(t))?"y":"x"}function q1(t){return z1(Ao(t))}function UX(t,e,r){r===void 0&&(r=!1);const n=dd(t),i=q1(t),a=B1(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=vv(o)),[o,vv(o)]}function zX(t){const e=vv(t);return[Hb(t),e,Hb(e)]}function Hb(t){return t.replace(/start|end/g,e=>$X[e])}function BX(t,e,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?a:o;default:return[]}}function qX(t,e,r,n){const i=dd(t);let a=BX(Sa(t),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Hb)))),a}function vv(t){return t.replace(/left|right|bottom|top/g,e=>FX[e])}function WX(t){return{top:0,right:0,bottom:0,left:0,...t}}function oM(t){return typeof t!="number"?WX(t):{top:t,right:t,bottom:t,left:t}}function xv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function pk(t,e,r){let{reference:n,floating:i}=t;const a=Ao(e),o=q1(e),l=B1(o),c=Sa(e),u=a==="y",d=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-i.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-i.width,y:h};break;default:g={x:n.x,y:n.y}}switch(dd(e)){case"start":g[o]-=m*(r&&u?-1:1);break;case"end":g[o]+=m*(r&&u?-1:1);break}return g}const HX=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=pk(u,n,c),m=n,g={},v=0;for(let y=0;y<l.length;y++){const{name:j,fn:w}=l[y],{x,y:b,data:N,reset:C}=await w({x:d,y:h,initialPlacement:n,placement:m,strategy:i,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,h=b??h,g={...g,[j]:{...g[j],...N}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:d,y:h}=pk(u,m,c)),y=-1)}return{x:d,y:h,placement:m,strategy:i,middlewareData:g}};async function bm(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Na(e,t),v=oM(g),j=l[m?h==="floating"?"reference":"floating":h],w=xv(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(j)))==null||r?j:j.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},C=xv(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(w.top-C.top+v.top)/N.y,bottom:(C.bottom-w.bottom+v.bottom)/N.y,left:(w.left-C.left+v.left)/N.x,right:(C.right-w.right+v.right)/N.x}}const GX=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Na(t,e)||{};if(u==null)return{};const h=oM(d),m={x:r,y:n},g=q1(i),v=B1(g),y=await o.getDimensions(u),j=g==="y",w=j?"top":"left",x=j?"bottom":"right",b=j?"clientHeight":"clientWidth",N=a.reference[v]+a.reference[g]-m[g]-a.floating[v],C=m[g]-a.reference[g],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=P?P[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(P)))&&(T=l.floating[b]||a.floating[v]);const k=N/2-C/2,D=T/2-y[v]/2-1,E=To(h[w],D),A=To(h[x],D),R=E,S=T-y[v]-A,V=T/2-y[v]/2+k,U=Wb(R,V,S),H=!c.arrow&&dd(i)!=null&&V!==U&&a.reference[v]/2-(V<R?E:A)-y[v]/2<0,$=H?V<R?V-R:V-S:0;return{[g]:m[g]+$,data:{[g]:U,centerOffset:V-U-$,...H&&{alignmentOffset:$}},reset:H}}}),KX=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...j}=Na(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const w=Sa(i),x=Ao(l),b=Sa(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=m||(b||!y?[vv(l)]:zX(l)),P=v!=="none";!m&&P&&C.push(...qX(l,y,v,N));const T=[l,...C],k=await bm(e,j),D=[];let E=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&D.push(k[w]),h){const V=UX(i,o,N);D.push(k[V[0]],k[V[1]])}if(E=[...E,{placement:i,overflows:D}],!D.every(V=>V<=0)){var A,R;const V=(((A=a.flip)==null?void 0:A.index)||0)+1,U=T[V];if(U)return{data:{index:V,overflows:E},reset:{placement:U}};let H=(R=E.filter($=>$.overflows[0]<=0).sort(($,L)=>$.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!H)switch(g){case"bestFit":{var S;const $=(S=E.filter(L=>{if(P){const W=Ao(L.placement);return W===x||W==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(W=>W>0).reduce((W,z)=>W+z,0)]).sort((L,W)=>L[1]-W[1])[0])==null?void 0:S[0];$&&(H=$);break}case"initialPlacement":H=l;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function gk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vk(t){return VX.some(e=>t[e]>=0)}const YX=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Na(t,e);switch(n){case"referenceHidden":{const a=await bm(e,{...i,elementContext:"reference"}),o=gk(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vk(o)}}}case"escaped":{const a=await bm(e,{...i,altBoundary:!0}),o=gk(a,r.floating);return{data:{escapedOffsets:o,escaped:vk(o)}}}default:return{}}}}};async function QX(t,e){const{placement:r,platform:n,elements:i}=t,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Sa(r),l=dd(r),c=Ao(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,h=Na(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(g=l==="end"?v*-1:v),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const XX=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await QX(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},JX=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:w,y:x}=j;return{x:w,y:x}}},...c}=Na(t,e),u={x:r,y:n},d=await bm(e,c),h=Ao(Sa(i)),m=z1(h);let g=u[m],v=u[h];if(a){const j=m==="y"?"top":"left",w=m==="y"?"bottom":"right",x=g+d[j],b=g-d[w];g=Wb(x,g,b)}if(o){const j=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=v+d[j],b=v-d[w];v=Wb(x,v,b)}const y=l.fn({...e,[m]:g,[h]:v});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[m]:a,[h]:o}}}}}},ZX=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Na(t,e),d={x:r,y:n},h=Ao(i),m=z1(h);let g=d[m],v=d[h];const y=Na(l,e),j=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=m==="y"?"height":"width",N=a.reference[m]-a.floating[b]+j.mainAxis,C=a.reference[m]+a.reference[b]-j.mainAxis;g<N?g=N:g>C&&(g=C)}if(u){var w,x;const b=m==="y"?"width":"height",N=["top","left"].includes(Sa(i)),C=a.reference[h]-a.floating[b]+(N&&((w=o.offset)==null?void 0:w[h])||0)+(N?0:j.crossAxis),P=a.reference[h]+a.reference[b]+(N?0:((x=o.offset)==null?void 0:x[h])||0)-(N?j.crossAxis:0);v<C?v=C:v>P&&(v=P)}return{[m]:g,[h]:v}}}},eJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Na(t,e),d=await bm(e,u),h=Sa(i),m=dd(i),g=Ao(i)==="y",{width:v,height:y}=a.floating;let j,w;h==="top"||h==="bottom"?(j=h,w=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,j=m==="end"?"top":"bottom");const x=y-d.top-d.bottom,b=v-d.left-d.right,N=To(y-d[j],x),C=To(v-d[w],b),P=!e.middlewareData.shift;let T=N,k=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=x),P&&!m){const E=ts(d.left,0),A=ts(d.right,0),R=ts(d.top,0),S=ts(d.bottom,0);g?k=v-2*(E!==0||A!==0?E+A:ts(d.left,d.right)):T=y-2*(R!==0||S!==0?R+S:ts(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:T});const D=await o.getDimensions(l.floating);return v!==D.width||y!==D.height?{reset:{rects:!0}}:{}}}};function Gx(){return typeof window<"u"}function hd(t){return lM(t)?(t.nodeName||"").toLowerCase():"#document"}function cs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Oi(t){var e;return(e=(lM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lM(t){return Gx()?t instanceof Node||t instanceof cs(t).Node:!1}function ei(t){return Gx()?t instanceof Element||t instanceof cs(t).Element:!1}function Ai(t){return Gx()?t instanceof HTMLElement||t instanceof cs(t).HTMLElement:!1}function xk(t){return!Gx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cs(t).ShadowRoot}function yf(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=ti(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function tJ(t){return["table","td","th"].includes(hd(t))}function Kx(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function W1(t){const e=H1(),r=ei(t)?ti(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function rJ(t){let e=Po(t);for(;Ai(e)&&!Uu(e);){if(W1(e))return e;if(Kx(e))return null;e=Po(e)}return null}function H1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uu(t){return["html","body","#document"].includes(hd(t))}function ti(t){return cs(t).getComputedStyle(t)}function Yx(t){return ei(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Po(t){if(hd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xk(t)&&t.host||Oi(t);return xk(e)?e.host:e}function cM(t){const e=Po(t);return Uu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ai(e)&&yf(e)?e:cM(e)}function jm(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=cM(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),o=cs(i);if(a){const l=Gb(o);return e.concat(o,o.visualViewport||[],yf(i)?i:[],l&&r?jm(l):[])}return e.concat(i,jm(i,[],r))}function Gb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uM(t){const e=ti(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ai(t),a=i?t.offsetWidth:r,o=i?t.offsetHeight:n,l=gv(r)!==a||gv(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function G1(t){return ei(t)?t:t.contextElement}function vu(t){const e=G1(t);if(!Ai(e))return Io(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:a}=uM(e);let o=(a?gv(r.width):r.width)/n,l=(a?gv(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const nJ=Io(0);function dM(t){const e=cs(t);return!H1()||!e.visualViewport?nJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sJ(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==cs(t)?!1:e}function Xl(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=G1(t);let o=Io(1);e&&(n?ei(n)&&(o=vu(n)):o=vu(t));const l=sJ(a,r,n)?dM(a):Io(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(a){const m=cs(a),g=n&&ei(n)?cs(n):n;let v=m,y=Gb(v);for(;y&&n&&g!==v;){const j=vu(y),w=y.getBoundingClientRect(),x=ti(y),b=w.left+(y.clientLeft+parseFloat(x.paddingLeft))*j.x,N=w.top+(y.clientTop+parseFloat(x.paddingTop))*j.y;c*=j.x,u*=j.y,d*=j.x,h*=j.y,c+=b,u+=N,v=cs(y),y=Gb(v)}}return xv({width:d,height:h,x:c,y:u})}function iJ(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const a=i==="fixed",o=Oi(n),l=e?Kx(e.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Io(1);const d=Io(0),h=Ai(n);if((h||!h&&!a)&&((hd(n)!=="body"||yf(o))&&(c=Yx(n)),Ai(n))){const m=Xl(n);u=vu(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function aJ(t){return Array.from(t.getClientRects())}function Kb(t,e){const r=Yx(t).scrollLeft;return e?e.left+r:Xl(Oi(t)).left+r}function oJ(t){const e=Oi(t),r=Yx(t),n=t.ownerDocument.body,i=ts(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=ts(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Kb(t);const l=-r.scrollTop;return ti(n).direction==="rtl"&&(o+=ts(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}function lJ(t,e){const r=cs(t),n=Oi(t),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=H1();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function cJ(t,e){const r=Xl(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,a=Ai(t)?vu(t):Io(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function yk(t,e,r){let n;if(e==="viewport")n=lJ(t,r);else if(e==="document")n=oJ(Oi(t));else if(ei(e))n=cJ(e,r);else{const i=dM(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return xv(n)}function hM(t,e){const r=Po(t);return r===e||!ei(r)||Uu(r)?!1:ti(r).position==="fixed"||hM(r,e)}function uJ(t,e){const r=e.get(t);if(r)return r;let n=jm(t,[],!1).filter(l=>ei(l)&&hd(l)!=="body"),i=null;const a=ti(t).position==="fixed";let o=a?Po(t):t;for(;ei(o)&&!Uu(o);){const l=ti(o),c=W1(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||yf(o)&&!c&&hM(t,o))?n=n.filter(d=>d!==o):i=l,o=Po(o)}return e.set(t,n),n}function dJ(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Kx(e)?[]:uJ(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=yk(e,d,i);return u.top=ts(h.top,u.top),u.right=To(h.right,u.right),u.bottom=To(h.bottom,u.bottom),u.left=ts(h.left,u.left),u},yk(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hJ(t){const{width:e,height:r}=uM(t);return{width:e,height:r}}function mJ(t,e,r){const n=Ai(e),i=Oi(e),a=r==="fixed",o=Xl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Io(0);if(n||!n&&!a)if((hd(e)!=="body"||yf(i))&&(l=Yx(e)),n){const g=Xl(e,!0,a,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else i&&(c.x=Kb(i));let u=0,d=0;if(i&&!n&&!a){const g=i.getBoundingClientRect();d=g.top+l.scrollTop,u=g.left+l.scrollLeft-Kb(i,g)}const h=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:h,y:m,width:o.width,height:o.height}}function U0(t){return ti(t).position==="static"}function wk(t,e){if(!Ai(t)||ti(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Oi(t)===r&&(r=r.ownerDocument.body),r}function mM(t,e){const r=cs(t);if(Kx(t))return r;if(!Ai(t)){let i=Po(t);for(;i&&!Uu(i);){if(ei(i)&&!U0(i))return i;i=Po(i)}return r}let n=wk(t,e);for(;n&&tJ(n)&&U0(n);)n=wk(n,e);return n&&Uu(n)&&U0(n)&&!W1(n)?r:n||rJ(t)||r}const fJ=async function(t){const e=this.getOffsetParent||mM,r=this.getDimensions,n=await r(t.floating);return{reference:mJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function pJ(t){return ti(t).direction==="rtl"}const gJ={convertOffsetParentRelativeRectToViewportRelativeRect:iJ,getDocumentElement:Oi,getClippingRect:dJ,getOffsetParent:mM,getElementRects:fJ,getClientRects:aJ,getDimensions:hJ,getScale:vu,isElement:ei,isRTL:pJ};function vJ(t,e){let r=null,n;const i=Oi(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:m}=t.getBoundingClientRect();if(l||e(),!h||!m)return;const g=_p(d),v=_p(i.clientWidth-(u+h)),y=_p(i.clientHeight-(d+m)),j=_p(u),x={rootMargin:-g+"px "+-v+"px "+-y+"px "+-j+"px",threshold:ts(0,To(1,c))||1};let b=!0;function N(C){const P=C[0].intersectionRatio;if(P!==c){if(!b)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(N,{...x,root:i.ownerDocument})}catch{r=new IntersectionObserver(N,x)}r.observe(t)}return o(!0),a}function xJ(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=G1(t),d=i||a?[...u?jm(u):[],...jm(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const h=u&&l?vJ(u,r):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[x]=w;x&&x.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let v,y=c?Xl(t):null;c&&j();function j(){const w=Xl(t);y&&(w.x!==y.x||w.y!==y.y||w.width!==y.width||w.height!==y.height)&&r(),y=w,v=requestAnimationFrame(j)}return r(),()=>{var w;d.forEach(x=>{i&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const yJ=XX,wJ=JX,bJ=KX,jJ=eJ,_J=YX,bk=GX,NJ=ZX,SJ=(t,e,r)=>{const n=new Map,i={platform:gJ,...r},a={...i.platform,_c:n};return HX(t,e,{...i,platform:a})};var dg=typeof document<"u"?p.useLayoutEffect:p.useEffect;function yv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!yv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!yv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function fM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jk(t,e){const r=fM(t);return Math.round(e*r)/r}function z0(t){const e=p.useRef(t);return dg(()=>{e.current=t}),e}function EJ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(n);yv(m,n)||g(n);const[v,y]=p.useState(null),[j,w]=p.useState(null),x=p.useCallback(L=>{L!==P.current&&(P.current=L,y(L))},[]),b=p.useCallback(L=>{L!==T.current&&(T.current=L,w(L))},[]),N=a||v,C=o||j,P=p.useRef(null),T=p.useRef(null),k=p.useRef(d),D=c!=null,E=z0(c),A=z0(i),R=z0(u),S=p.useCallback(()=>{if(!P.current||!T.current)return;const L={placement:e,strategy:r,middleware:m};A.current&&(L.platform=A.current),SJ(P.current,T.current,L).then(W=>{const z={...W,isPositioned:R.current!==!1};V.current&&!yv(k.current,z)&&(k.current=z,rd.flushSync(()=>{h(z)}))})},[m,e,r,A,R]);dg(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[u]);const V=p.useRef(!1);dg(()=>(V.current=!0,()=>{V.current=!1}),[]),dg(()=>{if(N&&(P.current=N),C&&(T.current=C),N&&C){if(E.current)return E.current(N,C,S);S()}},[N,C,S,E,D]);const U=p.useMemo(()=>({reference:P,floating:T,setReference:x,setFloating:b}),[x,b]),H=p.useMemo(()=>({reference:N,floating:C}),[N,C]),$=p.useMemo(()=>{const L={position:r,left:0,top:0};if(!H.floating)return L;const W=jk(H.floating,d.x),z=jk(H.floating,d.y);return l?{...L,transform:"translate("+W+"px, "+z+"px)",...fM(H.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:z}},[r,l,H.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:S,refs:U,elements:H,floatingStyles:$}),[d,S,U,H,$])}const CJ=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?bk({element:n.current,padding:i}).fn(r):{}:n?bk({element:n,padding:i}).fn(r):{}}}},kJ=(t,e)=>({...yJ(t),options:[t,e]}),TJ=(t,e)=>({...wJ(t),options:[t,e]}),IJ=(t,e)=>({...NJ(t),options:[t,e]}),AJ=(t,e)=>({...bJ(t),options:[t,e]}),PJ=(t,e)=>({...jJ(t),options:[t,e]}),RJ=(t,e)=>({..._J(t),options:[t,e]}),DJ=(t,e)=>({...CJ(t),options:[t,e]});var MJ="Arrow",pM=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...a}=t;return s.jsx(De.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});pM.displayName=MJ;var OJ=pM;function LJ(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:j,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,VJ(i,...e)]}function VJ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Qx(t){const[e,r]=p.useState(void 0);return Lr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var K1="Popper",[gM,md]=LJ(K1),[FJ,vM]=gM(K1),xM=t=>{const{__scopePopper:e,children:r}=t,[n,i]=p.useState(null);return s.jsx(FJ,{scope:e,anchor:n,onAnchorChange:i,children:r})};xM.displayName=K1;var yM="PopperAnchor",wM=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,a=vM(yM,r),o=p.useRef(null),l=Je(e,o);return p.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(De.div,{...i,ref:l})});wM.displayName=yM;var Y1="PopperContent",[$J,UJ]=gM(Y1),bM=p.forwardRef((t,e)=>{var Ne,Ze,te,pe,Q,le;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,j=vM(Y1,r),[w,x]=p.useState(null),b=Je(e,q=>x(q)),[N,C]=p.useState(null),P=Qx(N),T=(P==null?void 0:P.width)??0,k=(P==null?void 0:P.height)??0,D=n+(a!=="center"?"-"+a:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],R=A.length>0,S={padding:E,boundary:A.filter(BJ),altBoundary:R},{refs:V,floatingStyles:U,placement:H,isPositioned:$,middlewareData:L}=EJ({strategy:"fixed",placement:D,whileElementsMounted:(...q)=>xJ(...q,{animationFrame:g==="always"}),elements:{reference:j.anchor},middleware:[kJ({mainAxis:i+k,alignmentAxis:o}),c&&TJ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?IJ():void 0,...S}),c&&AJ({...S}),PJ({...S,apply:({elements:q,rects:Z,availableWidth:me,availableHeight:Ie})=>{const{width:He,height:O}=Z.reference,B=q.floating.style;B.setProperty("--radix-popper-available-width",`${me}px`),B.setProperty("--radix-popper-available-height",`${Ie}px`),B.setProperty("--radix-popper-anchor-width",`${He}px`),B.setProperty("--radix-popper-anchor-height",`${O}px`)}}),N&&DJ({element:N,padding:l}),qJ({arrowWidth:T,arrowHeight:k}),m&&RJ({strategy:"referenceHidden",...S})]}),[W,z]=NM(H),J=Sr(v);Lr(()=>{$&&(J==null||J())},[$,J]);const oe=(Ne=L.arrow)==null?void 0:Ne.x,Ce=(Ze=L.arrow)==null?void 0:Ze.y,tt=((te=L.arrow)==null?void 0:te.centerOffset)!==0,[vt,ct]=p.useState();return Lr(()=>{w&&ct(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:$?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:vt,"--radix-popper-transform-origin":[(pe=L.transformOrigin)==null?void 0:pe.x,(Q=L.transformOrigin)==null?void 0:Q.y].join(" "),...((le=L.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx($J,{scope:r,placedSide:W,onArrowChange:C,arrowX:oe,arrowY:Ce,shouldHideArrow:tt,children:s.jsx(De.div,{"data-side":W,"data-align":z,...y,ref:b,style:{...y.style,animation:$?void 0:"none"}})})})});bM.displayName=Y1;var jM="PopperArrow",zJ={top:"bottom",right:"left",bottom:"top",left:"right"},_M=p.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,a=UJ(jM,n),o=zJ[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(OJ,{...i,ref:r,style:{...i.style,display:"block"}})})});_M.displayName=jM;function BJ(t){return t!==null}var qJ=t=>({name:"transformOrigin",options:t,fn(e){var j,w,x;const{placement:r,rects:n,middlewareData:i}=e,o=((j=i.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=NM(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=i.arrow)==null?void 0:w.x)??0)+l/2,g=(((x=i.arrow)==null?void 0:x.y)??0)+c/2;let v="",y="";return u==="bottom"?(v=o?h:`${m}px`,y=`${-c}px`):u==="top"?(v=o?h:`${m}px`,y=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,y=o?h:`${g}px`):u==="left"&&(v=`${n.floating.width+c}px`,y=o?h:`${g}px`),{data:{x:v,y}}}});function NM(t){const[e,r="center"]=t.split("-");return[e,r]}var Q1=xM,Xx=wM,X1=bM,J1=_M,WJ="Portal",wf=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[i,a]=p.useState(!1);Lr(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?w$.createPortal(s.jsx(De.div,{...n,ref:e}),o):null});wf.displayName=WJ;function HJ(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Zr=t=>{const{present:e,children:r}=t,n=GJ(e),i=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),a=Je(n.ref,KJ(i));return typeof r=="function"||n.isPresent?p.cloneElement(i,{ref:a}):null};Zr.displayName="Presence";function GJ(t){const[e,r]=p.useState(),n=p.useRef({}),i=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=HJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Np(n.current);a.current=l==="mounted"?u:"none"},[l]),Lr(()=>{const u=n.current,d=i.current;if(d!==t){const m=a.current,g=Np(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Lr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const y=Np(n.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!i.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},m=g=>{g.target===e&&(a.current=Np(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Np(t){return(t==null?void 0:t.animationName)||"none"}function KJ(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function YJ(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:j,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,QJ(i,...e)]}function QJ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var B0="rovingFocusGroup.onEntryFocus",XJ={bubbles:!1,cancelable:!0},Jx="RovingFocusGroup",[Yb,SM,JJ]=gf(Jx),[ZJ,Zx]=YJ(Jx,[JJ]),[eZ,tZ]=ZJ(Jx),EM=p.forwardRef((t,e)=>s.jsx(Yb.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(Yb.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(rZ,{...t,ref:e})})}));EM.displayName=Jx;var rZ=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=Je(e,m),v=fc(a),[y=null,j]=hs({prop:o,defaultProp:l,onChange:c}),[w,x]=p.useState(!1),b=Sr(u),N=SM(r),C=p.useRef(!1),[P,T]=p.useState(0);return p.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(B0,b),()=>k.removeEventListener(B0,b)},[b]),s.jsx(eZ,{scope:r,orientation:n,dir:v,loop:i,currentTabStopId:y,onItemFocus:p.useCallback(k=>j(k),[j]),onItemShiftTab:p.useCallback(()=>x(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>T(k=>k-1),[]),children:s.jsx(De.div,{tabIndex:w||P===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{C.current=!0}),onFocus:ve(t.onFocus,k=>{const D=!C.current;if(k.target===k.currentTarget&&D&&!w){const E=new CustomEvent(B0,XJ);if(k.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=N().filter(H=>H.focusable),R=A.find(H=>H.active),S=A.find(H=>H.id===y),U=[R,S,...A].filter(Boolean).map(H=>H.ref.current);TM(U,d)}}C.current=!1}),onBlur:ve(t.onBlur,()=>x(!1))})})}),CM="RovingFocusGroupItem",kM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,...o}=t,l=ls(),c=a||l,u=tZ(CM,r),d=u.currentTabStopId===c,h=SM(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(Yb.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:s.jsx(De.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ve(t.onMouseDown,v=>{n?u.onItemFocus(c):v.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ve(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=iZ(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const x=w.indexOf(v.currentTarget);w=u.loop?aZ(w,x+1):w.slice(x+1)}setTimeout(()=>TM(w))}})})})});kM.displayName=CM;var nZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iZ(t,e,r){const n=sZ(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return nZ[n]}function TM(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function aZ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var IM=EM,AM=kM,oZ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cc=new WeakMap,Sp=new WeakMap,Ep={},q0=0,PM=function(t){return t&&(t.host||PM(t.parentNode))},lZ=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=PM(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},cZ=function(t,e,r,n){var i=lZ(e,Array.isArray(t)?t:[t]);Ep[r]||(Ep[r]=new WeakMap);var a=Ep[r],o=[],l=new Set,c=new Set(i),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),v=g!==null&&g!=="false",y=(Cc.get(m)||0)+1,j=(a.get(m)||0)+1;Cc.set(m,y),a.set(m,j),o.push(m),y===1&&v&&Sp.set(m,!0),j===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(e),l.clear(),q0++,function(){o.forEach(function(h){var m=Cc.get(h)-1,g=a.get(h)-1;Cc.set(h,m),a.set(h,g),m||(Sp.has(h)||h.removeAttribute(n),Sp.delete(h)),g||h.removeAttribute(r)}),q0--,q0||(Cc=new WeakMap,Cc=new WeakMap,Sp=new WeakMap,Ep={})}},ey=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=oZ(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),cZ(n,i,r,"aria-hidden")):function(){return null}},hg="right-scroll-bar-position",mg="width-before-scroll-bar",uZ="with-scroll-bars-hidden",dZ="--removed-body-scroll-bar-size";function W0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hZ(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var mZ=typeof window<"u"?p.useLayoutEffect:p.useEffect,_k=new WeakMap;function fZ(t,e){var r=hZ(null,function(n){return t.forEach(function(i){return W0(i,n)})});return mZ(function(){var n=_k.get(r);if(n){var i=new Set(n),a=new Set(t),o=r.current;i.forEach(function(l){a.has(l)||W0(l,null)}),a.forEach(function(l){i.has(l)||W0(l,o)})}_k.set(r,t)},[t]),r}function pZ(t){return t}function gZ(t,e){e===void 0&&(e=pZ);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function vZ(t){t===void 0&&(t={});var e=gZ(null);return e.options=hi({async:!0,ssr:!1},t),e}var RM=function(t){var e=t.sideCar,r=Jm(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,hi({},r))};RM.isSideCarExport=!0;function xZ(t,e){return t.useMedium(e),RM}var DM=vZ(),H0=function(){},ty=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:H0,onWheelCapture:H0,onTouchMoveCapture:H0}),i=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,j=t.as,w=j===void 0?"div":j,x=t.gapMode,b=Jm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,C=fZ([r,e]),P=hi(hi({},b),i);return p.createElement(p.Fragment,null,d&&p.createElement(N,{sideCar:DM,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:x}),o?p.cloneElement(p.Children.only(l),hi(hi({},P),{ref:C})):p.createElement(w,hi({},P,{className:c,ref:C}),l))});ty.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ty.classNames={fullWidth:mg,zeroRight:hg};var yZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=yZ();return e&&t.setAttribute("nonce",e),t}function bZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function jZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _Z=function(){var t=0,e=null;return{add:function(r){t==0&&(e=wZ())&&(bZ(e,r),jZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NZ=function(){var t=_Z();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},MM=function(){var t=NZ(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},SZ={left:0,top:0,right:0,gap:0},G0=function(t){return parseInt(t||"",10)||0},EZ=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[G0(r),G0(n),G0(i)]},CZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return SZ;var e=EZ(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},kZ=MM(),xu="data-scroll-locked",TZ=function(t,e,r,n){var i=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(uZ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(xu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(mg,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(hg," .").concat(hg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(mg," .").concat(mg,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(xu,`] {
    `).concat(dZ,": ").concat(l,`px;
  }
`)},Nk=function(){var t=parseInt(document.body.getAttribute(xu)||"0",10);return isFinite(t)?t:0},IZ=function(){p.useEffect(function(){return document.body.setAttribute(xu,(Nk()+1).toString()),function(){var t=Nk()-1;t<=0?document.body.removeAttribute(xu):document.body.setAttribute(xu,t.toString())}},[])},AZ=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;IZ();var a=p.useMemo(function(){return CZ(i)},[i]);return p.createElement(kZ,{styles:TZ(a,!e,i,r?"":"!important")})},Qb=!1;if(typeof window<"u")try{var Cp=Object.defineProperty({},"passive",{get:function(){return Qb=!0,!0}});window.addEventListener("test",Cp,Cp),window.removeEventListener("test",Cp,Cp)}catch{Qb=!1}var kc=Qb?{passive:!1}:!1,PZ=function(t){return t.tagName==="TEXTAREA"},OM=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!PZ(t)&&r[e]==="visible")},RZ=function(t){return OM(t,"overflowY")},DZ=function(t){return OM(t,"overflowX")},Sk=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=LM(t,n);if(i){var a=VM(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},MZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},OZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},LM=function(t,e){return t==="v"?RZ(e):DZ(e)},VM=function(t,e){return t==="v"?MZ(e):OZ(e)},LZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},VZ=function(t,e,r,n,i){var a=LZ(t,window.getComputedStyle(e).direction),o=a*n,l=r.target,c=e.contains(l),u=!1,d=o>0,h=0,m=0;do{var g=VM(t,l),v=g[0],y=g[1],j=g[2],w=y-j-a*v;(v||w)&&LM(t,l)&&(h+=w,m+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!i)||!d&&(Math.abs(m)<1||!i))&&(u=!0),u},kp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ek=function(t){return[t.deltaX,t.deltaY]},Ck=function(t){return t&&"current"in t?t.current:t},FZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$Z=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UZ=0,Tc=[];function zZ(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),i=p.useState(UZ++)[0],a=p.useState(MM)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Xz([t.lockRef.current],(t.shards||[]).map(Ck),!0).filter(Boolean);return y.forEach(function(j){return j.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(y,j){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var w=kp(y),x=r.current,b="deltaX"in y?y.deltaX:x[0]-w[0],N="deltaY"in y?y.deltaY:x[1]-w[1],C,P=y.target,T=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in y&&T==="h"&&P.type==="range")return!1;var k=Sk(T,P);if(!k)return!0;if(k?C=T:(C=T==="v"?"h":"v",k=Sk(T,P)),!k)return!1;if(!n.current&&"changedTouches"in y&&(b||N)&&(n.current=C),!C)return!0;var D=n.current||C;return VZ(D,j,y,D==="h"?b:N,!0)},[]),c=p.useCallback(function(y){var j=y;if(!(!Tc.length||Tc[Tc.length-1]!==a)){var w="deltaY"in j?Ek(j):kp(j),x=e.current.filter(function(C){return C.name===j.type&&(C.target===j.target||j.target===C.shadowParent)&&FZ(C.delta,w)})[0];if(x&&x.should){j.cancelable&&j.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(Ck).filter(Boolean).filter(function(C){return C.contains(j.target)}),N=b.length>0?l(j,b[0]):!o.current.noIsolation;N&&j.cancelable&&j.preventDefault()}}},[]),u=p.useCallback(function(y,j,w,x){var b={name:y,delta:j,target:w,should:x,shadowParent:BZ(w)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(N){return N!==b})},1)},[]),d=p.useCallback(function(y){r.current=kp(y),n.current=void 0},[]),h=p.useCallback(function(y){u(y.type,Ek(y),y.target,l(y,t.lockRef.current))},[]),m=p.useCallback(function(y){u(y.type,kp(y),y.target,l(y,t.lockRef.current))},[]);p.useEffect(function(){return Tc.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,kc),document.addEventListener("touchmove",c,kc),document.addEventListener("touchstart",d,kc),function(){Tc=Tc.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,kc),document.removeEventListener("touchmove",c,kc),document.removeEventListener("touchstart",d,kc)}},[]);var g=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(a,{styles:$Z(i)}):null,g?p.createElement(AZ,{gapMode:t.gapMode}):null)}function BZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qZ=xZ(DM,zZ);var bf=p.forwardRef(function(t,e){return p.createElement(ty,hi({},t,{ref:e,sideCar:qZ}))});bf.classNames=ty.classNames;var Xb=["Enter"," "],WZ=["ArrowDown","PageUp","Home"],FM=["ArrowUp","PageDown","End"],HZ=[...WZ,...FM],GZ={ltr:[...Xb,"ArrowRight"],rtl:[...Xb,"ArrowLeft"]},KZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jf="Menu",[_m,YZ,QZ]=gf(jf),[pc,$M]=ps(jf,[QZ,md,Zx]),ry=md(),UM=Zx(),[XZ,gc]=pc(jf),[JZ,_f]=pc(jf),zM=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=t,l=ry(e),[c,u]=p.useState(null),d=p.useRef(!1),h=Sr(a),m=fc(i);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(Q1,{...l,children:s.jsx(XZ,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(JZ,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};zM.displayName=jf;var ZZ="MenuAnchor",Z1=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=ry(r);return s.jsx(Xx,{...i,...n,ref:e})});Z1.displayName=ZZ;var eN="MenuPortal",[eee,BM]=pc(eN,{forceMount:void 0}),qM=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,a=gc(eN,e);return s.jsx(eee,{scope:e,forceMount:r,children:s.jsx(Zr,{present:r||a.open,children:s.jsx(wf,{asChild:!0,container:i,children:n})})})};qM.displayName=eN;var Es="MenuContent",[tee,tN]=pc(Es),WM=p.forwardRef((t,e)=>{const r=BM(Es,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,a=gc(Es,t.__scopeMenu),o=_f(Es,t.__scopeMenu);return s.jsx(_m.Provider,{scope:t.__scopeMenu,children:s.jsx(Zr,{present:n||a.open,children:s.jsx(_m.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(ree,{...i,ref:e}):s.jsx(nee,{...i,ref:e})})})})}),ree=p.forwardRef((t,e)=>{const r=gc(Es,t.__scopeMenu),n=p.useRef(null),i=Je(e,n);return p.useEffect(()=>{const a=n.current;if(a)return ey(a)},[]),s.jsx(rN,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),nee=p.forwardRef((t,e)=>{const r=gc(Es,t.__scopeMenu);return s.jsx(rN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),rN=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...y}=t,j=gc(Es,r),w=_f(Es,r),x=ry(r),b=UM(r),N=YZ(r),[C,P]=p.useState(null),T=p.useRef(null),k=Je(e,T,j.onContentChange),D=p.useRef(0),E=p.useRef(""),A=p.useRef(0),R=p.useRef(null),S=p.useRef("right"),V=p.useRef(0),U=v?bf:p.Fragment,H=v?{as:_a,allowPinchZoom:!0}:void 0,$=W=>{var Ne,Ze;const z=E.current+W,J=N().filter(te=>!te.disabled),oe=document.activeElement,Ce=(Ne=J.find(te=>te.ref.current===oe))==null?void 0:Ne.textValue,tt=J.map(te=>te.textValue),vt=pee(tt,z,Ce),ct=(Ze=J.find(te=>te.textValue===vt))==null?void 0:Ze.ref.current;(function te(pe){E.current=pe,window.clearTimeout(D.current),pe!==""&&(D.current=window.setTimeout(()=>te(""),1e3))})(z),ct&&setTimeout(()=>ct.focus())};p.useEffect(()=>()=>window.clearTimeout(D.current),[]),Hx();const L=p.useCallback(W=>{var J,oe;return S.current===((J=R.current)==null?void 0:J.side)&&vee(W,(oe=R.current)==null?void 0:oe.area)},[]);return s.jsx(tee,{scope:r,searchRef:E,onItemEnter:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),onItemLeave:p.useCallback(W=>{var z;L(W)||((z=T.current)==null||z.focus(),P(null))},[L]),onTriggerLeave:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),pointerGraceTimerRef:A,onPointerGraceIntentChange:p.useCallback(W=>{R.current=W},[]),children:s.jsx(U,{...H,children:s.jsx(xf,{asChild:!0,trapped:i,onMountAutoFocus:ve(a,W=>{var z;W.preventDefault(),(z=T.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(vf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:s.jsx(IM,{asChild:!0,...b,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:P,onEntryFocus:ve(c,W=>{w.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(X1,{role:"menu","aria-orientation":"vertical","data-state":oO(j.open),"data-radix-menu-content":"",dir:w.dir,...x,...y,ref:k,style:{outline:"none",...y.style},onKeyDown:ve(y.onKeyDown,W=>{const J=W.target.closest("[data-radix-menu-content]")===W.currentTarget,oe=W.ctrlKey||W.altKey||W.metaKey,Ce=W.key.length===1;J&&(W.key==="Tab"&&W.preventDefault(),!oe&&Ce&&$(W.key));const tt=T.current;if(W.target!==tt||!HZ.includes(W.key))return;W.preventDefault();const ct=N().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);FM.includes(W.key)&&ct.reverse(),mee(ct)}),onBlur:ve(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(D.current),E.current="")}),onPointerMove:ve(t.onPointerMove,Nm(W=>{const z=W.target,J=V.current!==W.clientX;if(W.currentTarget.contains(z)&&J){const oe=W.clientX>V.current?"right":"left";S.current=oe,V.current=W.clientX}}))})})})})})})});WM.displayName=Es;var see="MenuGroup",nN=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(De.div,{role:"group",...n,ref:e})});nN.displayName=see;var iee="MenuLabel",HM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(De.div,{...n,ref:e})});HM.displayName=iee;var wv="MenuItem",kk="menu.itemSelect",ny=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...i}=t,a=p.useRef(null),o=_f(wv,t.__scopeMenu),l=tN(wv,t.__scopeMenu),c=Je(e,a),u=p.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(kk,{bubbles:!0,cancelable:!0});h.addEventListener(kk,g=>n==null?void 0:n(g),{once:!0}),nM(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(GM,{...i,ref:c,disabled:r,onClick:ve(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:ve(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ve(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||Xb.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ny.displayName=wv;var GM=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=t,o=tN(wv,r),l=UM(r),c=p.useRef(null),u=Je(e,c),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const v=c.current;v&&g((v.textContent??"").trim())},[a.children]),s.jsx(_m.ItemSlot,{scope:r,disabled:n,textValue:i??m,children:s.jsx(AM,{asChild:!0,...l,focusable:!n,children:s.jsx(De.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:ve(t.onPointerMove,Nm(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,Nm(v=>o.onItemLeave(v))),onFocus:ve(t.onFocus,()=>h(!0)),onBlur:ve(t.onBlur,()=>h(!1))})})})}),aee="MenuCheckboxItem",KM=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...i}=t;return s.jsx(ZM,{scope:t.__scopeMenu,checked:r,children:s.jsx(ny,{role:"menuitemcheckbox","aria-checked":bv(r)?"mixed":r,...i,ref:e,"data-state":iN(r),onSelect:ve(i.onSelect,()=>n==null?void 0:n(bv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});KM.displayName=aee;var YM="MenuRadioGroup",[oee,lee]=pc(YM,{value:void 0,onValueChange:()=>{}}),QM=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...i}=t,a=Sr(n);return s.jsx(oee,{scope:t.__scopeMenu,value:r,onValueChange:a,children:s.jsx(nN,{...i,ref:e})})});QM.displayName=YM;var XM="MenuRadioItem",JM=p.forwardRef((t,e)=>{const{value:r,...n}=t,i=lee(XM,t.__scopeMenu),a=r===i.value;return s.jsx(ZM,{scope:t.__scopeMenu,checked:a,children:s.jsx(ny,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":iN(a),onSelect:ve(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,r)},{checkForDefaultPrevented:!1})})})});JM.displayName=XM;var sN="MenuItemIndicator",[ZM,cee]=pc(sN,{checked:!1}),eO=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...i}=t,a=cee(sN,r);return s.jsx(Zr,{present:n||bv(a.checked)||a.checked===!0,children:s.jsx(De.span,{...i,ref:e,"data-state":iN(a.checked)})})});eO.displayName=sN;var uee="MenuSeparator",tO=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});tO.displayName=uee;var dee="MenuArrow",rO=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=ry(r);return s.jsx(J1,{...i,...n,ref:e})});rO.displayName=dee;var hee="MenuSub",[_fe,nO]=pc(hee),uh="MenuSubTrigger",sO=p.forwardRef((t,e)=>{const r=gc(uh,t.__scopeMenu),n=_f(uh,t.__scopeMenu),i=nO(uh,t.__scopeMenu),a=tN(uh,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(Z1,{asChild:!0,...u,children:s.jsx(GM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":oO(r.open),...t,ref:qx(e,i.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Nm(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ve(t.onPointerLeave,Nm(h=>{var g,v;d();const m=(g=r.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(v=r.content)==null?void 0:v.dataset.side,j=y==="right",w=j?-5:5,x=m[j?"left":"right"],b=m[j?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,h=>{var g;const m=a.searchRef.current!=="";t.disabled||m&&h.key===" "||GZ[n.dir].includes(h.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),h.preventDefault())})})})});sO.displayName=uh;var iO="MenuSubContent",aO=p.forwardRef((t,e)=>{const r=BM(Es,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,a=gc(Es,t.__scopeMenu),o=_f(Es,t.__scopeMenu),l=nO(iO,t.__scopeMenu),c=p.useRef(null),u=Je(e,c);return s.jsx(_m.Provider,{scope:t.__scopeMenu,children:s.jsx(Zr,{present:n||a.open,children:s.jsx(_m.Slot,{scope:t.__scopeMenu,children:s.jsx(rN,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ve(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=KZ[o.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});aO.displayName=iO;function oO(t){return t?"open":"closed"}function bv(t){return t==="indeterminate"}function iN(t){return bv(t)?"indeterminate":t?"checked":"unchecked"}function mee(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function fee(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function pee(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=fee(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function gee(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}function vee(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return gee(r,e)}function Nm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var xee=zM,yee=Z1,wee=qM,bee=WM,jee=nN,_ee=HM,Nee=ny,See=KM,Eee=QM,Cee=JM,kee=eO,Tee=tO,Iee=rO,Aee=sO,Pee=aO,aN="DropdownMenu",[Ree,Nfe]=ps(aN,[$M]),An=$M(),[Dee,lO]=Ree(aN),cO=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=An(e),u=p.useRef(null),[d=!1,h]=hs({prop:i,defaultProp:a,onChange:o});return s.jsx(Dee,{scope:e,triggerId:ls(),triggerRef:u,contentId:ls(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(xee,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};cO.displayName=aN;var uO="DropdownMenuTrigger",dO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=t,a=lO(uO,r),o=An(r);return s.jsx(yee,{asChild:!0,...o,children:s.jsx(De.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:qx(e,a.triggerRef),onPointerDown:ve(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ve(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});dO.displayName=uO;var Mee="DropdownMenuPortal",hO=t=>{const{__scopeDropdownMenu:e,...r}=t,n=An(e);return s.jsx(wee,{...n,...r})};hO.displayName=Mee;var mO="DropdownMenuContent",fO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=lO(mO,r),a=An(r),o=p.useRef(!1);return s.jsx(bee,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fO.displayName=mO;var Oee="DropdownMenuGroup",Lee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(jee,{...i,...n,ref:e})});Lee.displayName=Oee;var Vee="DropdownMenuLabel",pO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(_ee,{...i,...n,ref:e})});pO.displayName=Vee;var Fee="DropdownMenuItem",gO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Nee,{...i,...n,ref:e})});gO.displayName=Fee;var $ee="DropdownMenuCheckboxItem",vO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(See,{...i,...n,ref:e})});vO.displayName=$ee;var Uee="DropdownMenuRadioGroup",zee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Eee,{...i,...n,ref:e})});zee.displayName=Uee;var Bee="DropdownMenuRadioItem",xO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Cee,{...i,...n,ref:e})});xO.displayName=Bee;var qee="DropdownMenuItemIndicator",yO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(kee,{...i,...n,ref:e})});yO.displayName=qee;var Wee="DropdownMenuSeparator",wO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Tee,{...i,...n,ref:e})});wO.displayName=Wee;var Hee="DropdownMenuArrow",Gee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Iee,{...i,...n,ref:e})});Gee.displayName=Hee;var Kee="DropdownMenuSubTrigger",bO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Aee,{...i,...n,ref:e})});bO.displayName=Kee;var Yee="DropdownMenuSubContent",jO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=An(r);return s.jsx(Pee,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jO.displayName=Yee;var Qee=cO,Xee=dO,Jee=hO,_O=fO,NO=pO,SO=gO,EO=vO,CO=xO,kO=yO,TO=wO,IO=bO,AO=jO;function Ho(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Zee=["color"],ete=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,Zee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),tte=["color"],oN=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,tte);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),rte=["color"],PO=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,rte);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),nte=["color"],ste=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,nte);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ite=["color"],RO=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,ite);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ate=["color"],ote=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,ate);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),lte=["color"],cte=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,lte);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ute=["color"],dte=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,i=Ho(t,ute);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});const Dh=Qee,Mh=Xee,hte=p.forwardRef(({className:t,inset:e,children:r,...n},i)=>s.jsxs(IO,{ref:i,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,s.jsx(RO,{className:"ml-auto h-4 w-4"})]}));hte.displayName=IO.displayName;const mte=p.forwardRef(({className:t,...e},r)=>s.jsx(AO,{ref:r,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));mte.displayName=AO.displayName;const yu=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>s.jsx(Jee,{children:s.jsx(_O,{ref:n,sideOffset:e,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));yu.displayName=_O.displayName;const yt=p.forwardRef(({className:t,inset:e,...r},n)=>s.jsx(SO,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));yt.displayName=SO.displayName;const fte=p.forwardRef(({className:t,children:e,checked:r,...n},i)=>s.jsxs(EO,{ref:i,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(kO,{children:s.jsx(oN,{className:"h-4 w-4"})})}),e]}));fte.displayName=EO.displayName;const pte=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(CO,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(kO,{children:s.jsx(dte,{className:"h-4 w-4 fill-current"})})}),e]}));pte.displayName=CO.displayName;const gte=p.forwardRef(({className:t,inset:e,...r},n)=>s.jsx(NO,{ref:n,className:Oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));gte.displayName=NO.displayName;const Rn=p.forwardRef(({className:t,...e},r)=>s.jsx(TO,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",t),...e}));Rn.displayName=TO.displayName;var lN="Avatar",[vte,Sfe]=ps(lN),[xte,DO]=vte(lN),MO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,a]=p.useState("idle");return s.jsx(xte,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(De.span,{...n,ref:e})})});MO.displayName=lN;var OO="AvatarImage",LO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=t,o=DO(OO,r),l=yte(n,a.referrerPolicy),c=Sr(u=>{i(u),o.onImageLoadingStatusChange(u)});return Lr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(De.img,{...a,ref:e,src:n}):null});LO.displayName=OO;var VO="AvatarFallback",FO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,a=DO(VO,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(De.span,{...i,ref:e}):null});FO.displayName=VO;function yte(t,e){const[r,n]=p.useState("idle");return Lr(()=>{if(!t){n("error");return}let i=!0;const a=new window.Image,o=l=>()=>{i&&n(l)};return n("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),r}var $O=MO,UO=LO,zO=FO;const is=p.forwardRef(({className:t,...e},r)=>s.jsx($O,{ref:r,className:Oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));is.displayName=$O.displayName;const Ea=p.forwardRef(({className:t,...e},r)=>s.jsx(UO,{ref:r,className:Oe("aspect-square h-full w-full",t),...e}));Ea.displayName=UO.displayName;const Fn=p.forwardRef(({className:t,...e},r)=>s.jsx(zO,{ref:r,className:Oe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Fn.displayName=zO.displayName;const wte=Wx("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Te({className:t,variant:e,...r}){return s.jsx("div",{className:Oe(wte({variant:e}),t),...r})}const bte={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},Tk=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(v=>v(e,g))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(bte?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,i,c);return c},jte=t=>t?Tk(t):Tk;var BO={exports:{}},qO={},WO={exports:{}},HO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=p;function _te(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nte=typeof Object.is=="function"?Object.is:_te,Ste=zu.useState,Ete=zu.useEffect,Cte=zu.useLayoutEffect,kte=zu.useDebugValue;function Tte(t,e){var r=e(),n=Ste({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return Cte(function(){i.value=r,i.getSnapshot=e,K0(i)&&a({inst:i})},[t,r,e]),Ete(function(){return K0(i)&&a({inst:i}),t(function(){K0(i)&&a({inst:i})})},[t]),kte(r),r}function K0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nte(t,r)}catch{return!0}}function Ite(t,e){return e()}var Ate=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ite:Tte;HO.useSyncExternalStore=zu.useSyncExternalStore!==void 0?zu.useSyncExternalStore:Ate;WO.exports=HO;var Pte=WO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=p,Rte=Pte;function Dte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mte=typeof Object.is=="function"?Object.is:Dte,Ote=Rte.useSyncExternalStore,Lte=sy.useRef,Vte=sy.useEffect,Fte=sy.useMemo,$te=sy.useDebugValue;qO.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=Lte(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Fte(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),i!==void 0&&o.hasValue){var v=o.value;if(i(v,g))return h=v}return h=g}if(v=h,Mte(d,g))return v;var y=n(g);return i!==void 0&&i(v,y)?(d=g,v):(d=g,h=y)}var u=!1,d,h,m=r===void 0?null:r;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,r,n,i]);var l=Ote(t,a[0],a[1]);return Vte(function(){o.hasValue=!0,o.value=l},[l]),$te(l),l};BO.exports=qO;var Ute=BO.exports;const zte=Hv(Ute),GO={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},{useDebugValue:Bte}=ke,{useSyncExternalStoreWithSelector:qte}=zte;let Ik=!1;const Wte=t=>t;function Hte(t,e=Wte,r){(GO?"production":void 0)!=="production"&&r&&!Ik&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ik=!0);const n=qte(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return Bte(n),n}const Ak=t=>{(GO?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?jte(t):t,r=(n,i)=>Hte(e,n,i);return Object.assign(r,e),r},fd=t=>t?Ak(t):Ak,il=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Gte=(t,e,r)=>{const n=[t,e].sort();return`${n[0]}_${n[1]}_${r}`},Kte=async(t,e,r,n,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:r,senderUniversity:n,listingTitle:i,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},iy=fd((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:r=>{t({loading:!0});const{unsubscribeConversations:n}=e();n&&n();try{const i=$t(Nt(fe,"conversations"),Bt("participants","array-contains",r)),a=DC(i,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(r)||u.blockedBy&&u.blockedBy.includes(r)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:il(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:il(u.createdAt),updatedAt:il(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),ne.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:r=>{const{unsubscribeMessages:n}=e();n&&n();try{const i=$t(Nt(fe,"conversations",r,"messages")),a=DC(i,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:r,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:il(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),ne.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(r,n,i,a,o)=>{try{console.log("Sending message:",{conversationId:r,text:n,senderId:i,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(i)){ne.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:r,senderId:i,senderName:a,senderAvatar:o||null,text:n,type:"text",seen:!1,sentAt:dr()};console.log("Adding message to Firestore:",c);const u=await Bl(Nt(fe,"conversations",r,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==i),h={};d.forEach(m=>{h[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:n,sentAt:dr(),senderId:i,senderName:a},updatedAt:dr(),...h}),await mr(ze(fe,"conversations",r),{lastMessage:{text:n,sentAt:dr(),senderId:i,senderName:a},updatedAt:dr(),...h}),d.forEach(async m=>{const g=l.participantDetails[m];if(g&&g.email){const v=l.participantDetails[i];await Kte(g.email,g.name,a,(v==null?void 0:v.university)||"Université non spécifiée",l.listingTitle,n,r)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),ne.error("Erreur lors de l'envoi du message")}},createConversation:async(r,n,i,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:r,buyerId:o,sellerId:l});const h=Gte(o,l,r);console.log("Generated conversation ID:",h);const m=await Gr(ze(fe,"conversations",h));if(m.exists()){console.log("Conversation already exists, sending message");const y=m.data(),j={id:h,participants:y.participants||[],listingId:y.listingId||"",listingTitle:y.listingTitle||"",listingImage:y.listingImage,listingPrice:y.listingPrice||0,participantDetails:y.participantDetails||{},lastMessage:y.lastMessage?{...y.lastMessage,sentAt:il(y.lastMessage.sentAt)}:void 0,unreadCount:y.unreadCount||{},blockedBy:y.blockedBy||[],deletedFor:y.deletedFor||[],status:y.status||"active",createdAt:il(y.createdAt),updatedAt:il(y.updatedAt)};return t({currentConversation:j}),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}console.log("Creating new conversation");const g={participants:[o,l],listingId:r,listingTitle:n,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:dr(),updatedAt:dr()};console.log("Setting conversation document:",g),await Sl(ze(fe,"conversations",h),g);const v={id:h,participants:[o,l],listingId:r,listingTitle:n,listingImage:a||void 0,listingPrice:i,participantDetails:g.participantDetails,unreadCount:g.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:v}),console.log("Sending initial message"),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}catch(h){throw console.error("Error creating conversation:",h),ne.error("Erreur lors de la création de la conversation"),h}},markMessagesAsSeen:async(r,n)=>{try{const i=ze(fe,"conversations",r);await mr(i,{[`unreadCount.${n}`]:0})}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:r=>{t({currentConversation:r})},blockUser:async(r,n)=>{try{const i=ze(fe,"conversations",r),a=await Gr(i);if(a.exists()){const l=a.data().blockedBy||[];l.includes(n)||(await mr(i,{blockedBy:[...l,n],status:"blocked",updatedAt:dr()}),ne.success("Utilisateur bloqué"))}}catch(i){console.error("Error blocking user:",i),ne.error("Erreur lors du blocage")}},reportUser:async(r,n,i,a,o)=>{try{const l={reporterId:n,reportedUserId:i,conversationId:r,reason:a,description:o,status:"pending",createdAt:dr()};await Bl(Nt(fe,"reports"),l),ne.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),ne.error("Erreur lors du signalement")}},deleteConversation:async(r,n)=>{try{const i=ze(fe,"conversations",r),a=await Gr(i);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(n)){const c=[...l,n];c.length===o.participants.length?await $u(i):await mr(i,{deletedFor:c,updatedAt:dr()}),ne.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),ne.error("Erreur lors de la suppression")}},findConversationByListing:(r,n)=>{const{conversations:i}=e();return i.find(a=>a.listingId===r&&a.participants.includes(n))||null},cleanup:()=>{const{unsubscribeConversations:r,unsubscribeMessages:n}=e();r&&r(),n&&n(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),Yte={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"};function Qte(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=r.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>r.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>r.removeItem(i)}}const Sm=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Sm(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Sm(n)(r)}}}},Xte=(t,e)=>(r,n,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,w)=>({...w,...j}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...j)},n,i);const d=Sm(a.serialize),h=()=>{const j=a.partialize({...n()});let w;const x=d({state:j,version:a.version}).then(b=>u.setItem(a.name,b)).catch(b=>{w=b});if(w)throw w;return x},m=i.setState;i.setState=(j,w)=>{m(j,w),h()};const g=t((...j)=>{r(...j),h()},n,i);let v;const y=()=>{var j;if(!u)return;o=!1,l.forEach(x=>x(n()));const w=((j=a.onRehydrateStorage)==null?void 0:j.call(a,n()))||void 0;return Sm(u.getItem.bind(u))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return v=a.merge(x,(b=n())!=null?b:g),r(v,!0),h()}).then(()=>{w==null||w(v,void 0),o=!0,c.forEach(x=>x(v))}).catch(x=>{w==null||w(void 0,x)})};return i.persist={setOptions:j=>{a={...a,...j},j.getStorage&&(u=j.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:j=>(l.add(j),()=>{l.delete(j)}),onFinishHydration:j=>(c.add(j),()=>{c.delete(j)})},y(),v||g},Jte=(t,e)=>(r,n,i)=>{let a={storage:Qte(()=>localStorage),partialize:y=>y,version:0,merge:(y,j)=>({...j,...y}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...y)},n,i);const d=()=>{const y=a.partialize({...n()});return u.setItem(a.name,{state:y,version:a.version})},h=i.setState;i.setState=(y,j)=>{h(y,j),d()};const m=t((...y)=>{r(...y),d()},n,i);i.getInitialState=()=>m;let g;const v=()=>{var y,j;if(!u)return;o=!1,l.forEach(x=>{var b;return x((b=n())!=null?b:m)});const w=((j=a.onRehydrateStorage)==null?void 0:j.call(a,(y=n())!=null?y:m))||void 0;return Sm(u.getItem.bind(u))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[N,C]=x;if(g=a.merge(C,(b=n())!=null?b:m),r(g,!0),N)return d()}).then(()=>{w==null||w(g,void 0),g=n(),o=!0,c.forEach(x=>x(g))}).catch(x=>{w==null||w(void 0,x)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},a.skipHydration||v(),g||m},Zte=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Yte?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Xte(t,e)):Jte(t,e),ere=Zte,pd=fd()(ere((t,e)=>({cart:[],cartTotal:0,addToCart:r=>{const{cart:n}=e(),i=n.find(a=>a.id===r.id);t(i?{cart:n.map(a=>a.id===r.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+r.price}:{cart:[...n,{...r,quantity:1}],cartTotal:e().cartTotal+r.price}),ne.success("Article ajouté au panier")},removeFromCart:r=>{const{cart:n}=e(),i=n.find(a=>a.id===r);i&&t({cart:n.filter(a=>a.id!==r),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(r,n)=>{const{cart:i}=e(),a=i.find(o=>o.id===r);if(a){const o=n-a.quantity;t({cart:i.map(l=>l.id===r?{...l,quantity:n}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((r,n)=>r+n.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})}));function tre({status:t,className:e=""}){const n=(i=>{switch(i){case"approved":return{label:"Vérifié",icon:s.jsx(Ye,{className:"w-3 h-3"}),variant:"default",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-200 dark:border-green-800"};case"pending":return{label:"En attente",icon:s.jsx(Ct,{className:"w-3 h-3"}),variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-200 dark:border-yellow-800"};case"rejected":return{label:"Rejeté",icon:s.jsx(fn,{className:"w-3 h-3"}),variant:"destructive",className:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-200 dark:border-red-800"};case"not_started":default:return{label:"Non vérifié",icon:s.jsx(la,{className:"w-3 h-3"}),variant:"outline",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}}})(t);return s.jsxs(Te,{variant:n.variant,className:`flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium border ${n.className} ${e}`,children:[n.icon,n.label]})}const rre="modulepreload",nre=function(t){return"/StudyMarket/"+t},Pk={},gd=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=nre(c),c in Pk)return;Pk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":rre,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},sre=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gd(async()=>{const{default:n}=await Promise.resolve().then(()=>vd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class cN extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class ire extends cN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class are extends cN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ore extends cN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jb||(Jb={}));var lre=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class cre{constructor(e,{headers:r={},customFetch:n,region:i=Jb.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=sre(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return lre(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(v=>{throw new ire(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new are(d);if(!d.ok)throw new ore(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var Ln={},uN={},ay={},Nf={},oy={},ly={},ure=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bu=ure();const dre=Bu.fetch,KO=Bu.fetch.bind(Bu),YO=Bu.Headers,hre=Bu.Request,mre=Bu.Response,vd=Object.freeze(Object.defineProperty({__proto__:null,Headers:YO,Request:hre,Response:mre,default:KO,fetch:dre},Symbol.toStringTag,{value:"Module"})),fre=KV(vd);var cy={};Object.defineProperty(cy,"__esModule",{value:!0});let pre=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cy.default=pre;var QO=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ly,"__esModule",{value:!0});const gre=QO(fre),vre=QO(cy);let xre=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=gre.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,m=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const w=await a.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&j&&j.length>1&&(h=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await a.text();try{u=JSON.parse(y),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,g="OK")}catch{a.status===404&&y===""?(m=204,g="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&this.shouldThrowOnError)throw new vre.default(u)}return{error:u,data:d,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};ly.default=xre;var yre=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oy,"__esModule",{value:!0});const wre=yre(ly);let bre=class extends wre.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};oy.default=bre;var jre=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nf,"__esModule",{value:!0});const _re=jre(oy);let Nre=class extends _re.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Nf.default=Nre;var Sre=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ay,"__esModule",{value:!0});const Qd=Sre(Nf);let Ere=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Qd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Qd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Qd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Qd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ay.default=Ere;var uy={},dy={};Object.defineProperty(dy,"__esModule",{value:!0});dy.version=void 0;dy.version="0.0.0-automated";Object.defineProperty(uy,"__esModule",{value:!0});uy.DEFAULT_HEADERS=void 0;const Cre=dy;uy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Cre.version}`};var XO=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uN,"__esModule",{value:!0});const kre=XO(ay),Tre=XO(Nf),Ire=uy;let Are=class JO{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ire.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new kre.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new JO(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Tre.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};uN.default=Are;var xd=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PostgrestError=Ln.PostgrestBuilder=Ln.PostgrestTransformBuilder=Ln.PostgrestFilterBuilder=Ln.PostgrestQueryBuilder=Ln.PostgrestClient=void 0;const ZO=xd(uN);Ln.PostgrestClient=ZO.default;const e3=xd(ay);Ln.PostgrestQueryBuilder=e3.default;const t3=xd(Nf);Ln.PostgrestFilterBuilder=t3.default;const r3=xd(oy);Ln.PostgrestTransformBuilder=r3.default;const n3=xd(ly);Ln.PostgrestBuilder=n3.default;const s3=xd(cy);Ln.PostgrestError=s3.default;var Pre=Ln.default={PostgrestClient:ZO.default,PostgrestQueryBuilder:e3.default,PostgrestFilterBuilder:t3.default,PostgrestTransformBuilder:r3.default,PostgrestBuilder:n3.default,PostgrestError:s3.default};const{PostgrestClient:Rre,PostgrestQueryBuilder:Afe,PostgrestFilterBuilder:Pfe,PostgrestTransformBuilder:Rfe,PostgrestBuilder:Dfe,PostgrestError:Mfe}=Pre;let Zb;typeof window>"u"?Zb=require("ws"):Zb=window.WebSocket;const Dre=Zb,Mre="2.11.10",Ore={"X-Client-Info":`realtime-js/${Mre}`},Lre="1.0.0",i3=1e4,Vre=1e3;var wu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wu||(wu={}));var yn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(yn||(yn={}));var zs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(zs||(zs={}));var ej;(function(t){t.websocket="websocket"})(ej||(ej={}));var fl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fl||(fl={}));class Fre{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class a3{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const Rk=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=$re(o,t,e,i),a),{})},$re=(t,e,r,n)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?o3(a,o):tj(o)},o3=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return qre(e,r)}switch(t){case Ut.bool:return Ure(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return zre(e);case Ut.json:case Ut.jsonb:return Bre(e);case Ut.timestamp:return Wre(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return tj(e);default:return tj(e)}},tj=t=>t,Ure=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},zre=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Bre=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qre=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>o3(e,l))}return t},Wre=t=>typeof t=="string"?t.replace(" ","T"):t,l3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Y0{constructor(e,r,n={},i=i3){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dk;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dk||(Dk={}));class Oh{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oh.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Oh.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Oh.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const m=d.map(j=>j.presence_ref),g=h.map(j=>j.presence_ref),v=d.filter(j=>g.indexOf(j.presence_ref)<0),y=h.filter(j=>m.indexOf(j.presence_ref)<0);v.length>0&&(l[u]=v),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mk;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Mk||(Mk={}));var Ok;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ok||(Ok={}));var Gi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gi||(Gi={}));class dN{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Y0(this,zs.join,this.params,this.timeout),this.rejoinTimer=new a3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zs.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Oh(this),this.broadcastEndpointURL=l3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Gi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Gi.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Gi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<g;y++){const j=m[y],{filter:{event:w,schema:x,table:b,filter:N}}=j,C=d&&d[y];if(C&&C.event===w&&C.schema===x&&C.table===b&&C.filter===N)v.push(Object.assign(Object.assign({},j),{id:C.id}));else{this.unsubscribe(),this.state=yn.errored,e==null||e(Gi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Gi.SUBSCRIBED);return}}).receive("error",d=>{this.state=yn.errored,e==null||e(Gi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zs.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const i=new Y0(this,zs.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Y0(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=zs;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,y,j;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((j=(y=g.filter)===null||y===void 0?void 0:y.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(g=>g.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var v,y,j,w,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const N=g.id,C=(v=g.filter)===null||v===void 0?void 0:v.event;return N&&((y=r.ids)===null||y===void 0?void 0:y.includes(N))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const N=(x=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return N==="*"||N===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:y,table:j,commit_timestamp:w,type:x,errors:b}=v;m=Object.assign(Object.assign({},{schema:y,table:j,commit_timestamp:w,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(v))}g.callback(m,n)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&dN.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zs.close,{},e)}_onError(e){this._on(zs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Rk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Rk(e.columns,e.old_record)),r}}const Lk=()=>{},Hre=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gre{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ore,this.params={},this.timeout=i3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lk,this.ref=0,this.logger=Lk,this.conn=null,this.sendBuffer=[],this.serializer=new Fre,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>gd(async()=>{const{default:c}=await Promise.resolve().then(()=>vd);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ej.websocket}`,this.httpEndpoint=l3(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new a3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Dre),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Kre(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lre}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wu.connecting:return fl.Connecting;case wu.open:return fl.Open;case wu.closing:return fl.Closing;default:return fl.Closed}}isConnected(){return this.connectionState()===fl.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new dN(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(zs.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Vre,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:a,ref:o}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(zs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Hre],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Kre{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=wu.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class hN extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Yre extends hN{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class rj extends hN{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Qre=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const c3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gd(async()=>{const{default:n}=await Promise.resolve().then(()=>vd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Xre=()=>Qre(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gd(()=>Promise.resolve().then(()=>vd),void 0)).Response:Response}),nj=t=>{if(Array.isArray(t))return t.map(r=>nj(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=nj(n)}),e};var vc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Q0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jre=(t,e,r)=>vc(void 0,void 0,void 0,function*(){const n=yield Xre();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{e(new Yre(Q0(i),t.status||500))}).catch(i=>{e(new rj(Q0(i),i))}):e(new rj(Q0(t),t))}),Zre=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function Sf(t,e,r,n,i,a){return vc(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Zre(e,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Jre(c,l,n))})})}function jv(t,e,r,n){return vc(this,void 0,void 0,function*(){return Sf(t,"GET",e,r,n)})}function Wa(t,e,r,n,i){return vc(this,void 0,void 0,function*(){return Sf(t,"POST",e,n,i,r)})}function ene(t,e,r,n,i){return vc(this,void 0,void 0,function*(){return Sf(t,"PUT",e,n,i,r)})}function tne(t,e,r,n){return vc(this,void 0,void 0,function*(){return Sf(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function u3(t,e,r,n,i){return vc(this,void 0,void 0,function*(){return Sf(t,"DELETE",e,n,i,r)})}var Pn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const rne={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nne{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=c3(i)}uploadOrUpdate(e,r,n,i){return Pn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Vk),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Vr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Pn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Vk.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Vr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Pn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Wa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new hN("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Pn(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Pn(this,void 0,void 0,function*(){try{return{data:{path:(yield Wa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Pn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Wa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Pn(this,void 0,void 0,function*(){try{const i=yield Wa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}download(e,r){return Pn(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield jv(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Vr(l))return{data:null,error:l};throw l}})}info(e){return Pn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield jv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:nj(n),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}exists(e){return Pn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield tne(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Vr(n)&&n instanceof rj){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Pn(this,void 0,void 0,function*(){try{return{data:yield u3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Pn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},rne),r),{prefix:e||""});return{data:yield Wa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const sne="2.7.1",ine={"X-Client-Info":`storage-js/${sne}`};var Ic=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class ane{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},ine),r),this.fetch=c3(n)}listBuckets(){return Ic(this,void 0,void 0,function*(){try{return{data:yield jv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Vr(e))return{data:null,error:e};throw e}})}getBucket(e){return Ic(this,void 0,void 0,function*(){try{return{data:yield jv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ic(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Ic(this,void 0,void 0,function*(){try{return{data:yield ene(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ic(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ic(this,void 0,void 0,function*(){try{return{data:yield u3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}}class one extends ane{constructor(e,r={},n){super(e,r,n)}from(e){return new nne(this.url,this.headers,e,this.fetch)}}const lne="2.50.0";let dh="";typeof Deno<"u"?dh="deno":typeof document<"u"?dh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dh="react-native":dh="node";const cne={"X-Client-Info":`supabase-js-${dh}/${lne}`},une={headers:cne},dne={schema:"public"},hne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mne={};var fne=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const pne=t=>{let e;return t?e=t:typeof fetch>"u"?e=KO:e=fetch,(...r)=>e(...r)},gne=()=>typeof Headers>"u"?YO:Headers,vne=(t,e,r)=>{const n=pne(r),i=gne();return(a,o)=>fne(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var xne=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function yne(t){return t.endsWith("/")?t:t+"/"}function wne(t,e){var r,n;const{db:i,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>xne(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const d3="2.70.0",Uc=30*1e3,sj=3,X0=sj*Uc,bne="http://localhost:9999",jne="supabase.auth.token",_ne={"X-Client-Info":`gotrue-js/${d3}`},ij="X-Supabase-Api-Version",h3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Nne=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sne=6e5;class mN extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ene extends mN{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Cne(t){return rt(t)&&t.name==="AuthApiError"}class m3 extends mN{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Go extends mN{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class za extends Go{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kne(t){return rt(t)&&t.name==="AuthSessionMissingError"}class Tp extends Go{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ip extends Go{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ap extends Go{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tne(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Fk extends Go{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class aj extends Go{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function J0(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class $k extends Go{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Lh extends Go{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uk=` 	
\r=`.split(""),Ine=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Uk.length;e+=1)t[Uk[e].charCodeAt(0)]=-2;for(let e=0;e<_v.length;e+=1)t[_v[e].charCodeAt(0)]=e;return t})();function zk(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_v[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_v[n]),e.queuedBits-=6}}function f3(t,e,r){const n=Ine[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Bk(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{Rne(o,n,r)};for(let o=0;o<t.length;o+=1)f3(t.charCodeAt(o),i,a);return e.join("")}function Ane(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pne(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Ane(n,e)}}function Rne(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Dne(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)f3(t.charCodeAt(i),r,n);return new Uint8Array(e)}function Mne(t){const e=[];return Pne(t,r=>e.push(r)),new Uint8Array(e)}function One(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>zk(i,r,n)),zk(null,r,n),e.join("")}function Lne(t){return Math.round(Date.now()/1e3)+t}function Vne(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ls=()=>typeof window<"u"&&typeof document<"u",al={tested:!1,writable:!1},Vh=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(al.tested)return al.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),al.tested=!0,al.writable=!0}catch{al.tested=!0,al.writable=!1}return al.writable};function Fne(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const p3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gd(async()=>{const{default:n}=await Promise.resolve().then(()=>vd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},$ne=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",g3=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Pp=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rp=async(t,e)=>{await t.removeItem(e)};class hy{constructor(){this.promise=new hy.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}hy.promiseConstructor=Promise;function Z0(t){const e=t.split(".");if(e.length!==3)throw new Lh("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Nne.test(e[n]))throw new Lh("JWT not in base64url format");return{header:JSON.parse(Bk(e[0])),payload:JSON.parse(Bk(e[1])),signature:Dne(e[2]),raw:{header:e[0],payload:e[1]}}}async function Une(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zne(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function Bne(t){return("0"+t.toString(16)).substr(-2)}function qne(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Bne).join("")}async function Wne(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Hne(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Wne(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ac(t,e,r=!1){const n=qne();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await g3(t,`${e}-code-verifier`,i);const a=await Hne(n);return[a,n===a?"plain":"s256"]}const Gne=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kne(t){const e=t.headers.get(ij);if(!e||!e.match(Gne))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yne(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Qne(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xne=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pc(t){if(!Xne.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Jne=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zne=[502,503,504];async function qk(t){var e;if(!$ne(t))throw new aj(hl(t),0);if(Zne.includes(t.status))throw new aj(hl(t),t.status);let r;try{r=await t.json()}catch(a){throw new m3(hl(a),a)}let n;const i=Kne(t);if(i&&i.getTime()>=h3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new $k(hl(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new za}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new $k(hl(r),t.status,r.weak_password.reasons);throw new Ene(hl(r),t.status||500,n)}const ese=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ut(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[ij]||(a[ij]=h3["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await tse(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function tse(t,e,r,n,i,a){const o=ese(e,n,i,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new aj(hl(c),0)}if(l.ok||await qk(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await qk(c)}}function qi(t){var e;let r=null;ise(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Lne(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Wk(t){const e=qi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function rse(t){return{data:t,error:null}}function nse(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=Jne(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function sse(t){return t}function ise(t){return t.access_token&&t.refresh_token&&t.expires_in}const ew=["global","local","others"];var ase=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class ose{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=p3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ew[0]){if(ew.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ew.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Za})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ase(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nse,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Za})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:sse});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(v.split(";")[1].split("=")[1]);u[`${j}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(rt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Pc(e);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Za})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Pc(e);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Za})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Pc(e);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Za})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pc(e.userId);try{const{data:r,error:n}=await ut(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Pc(e.userId),Pc(e.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}}const lse={getItem:t=>Vh()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Vh()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Vh()&&globalThis.localStorage.removeItem(t)}};function Hk(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function cse(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Rc={debug:!!(globalThis&&Vh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class v3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class use extends v3{}async function dse(t,e,r){Rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new use(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Rc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}cse();const hse={url:bne,storageKey:jne,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_ne,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gk(t,e,r){return await r()}class Em{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Em.nextInstanceID,Em.nextInstanceID+=1,this.instanceID>0&&Ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},hse),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ose({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=p3(i.fetch),this.lock=i.lock||Gk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ls()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=dse:this.lock=Gk,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Vh()?this.storage=lse:(this.memoryStorage={},this.storage=Hk(this.memoryStorage)):(this.memoryStorage={},this.storage=Hk(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${d3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Fne(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ls()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Tne(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return rt(r)?{error:r}:{error:new m3("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:qi}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:d,password:h,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ac(this.storage,this.storageKey)),a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:qi})}else if("phone"in e){const{phone:d,password:h,options:m}=e;a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:qi})}else throw new Ip("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wk})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wk})}else throw new Ip("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Tp}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,a,o,l,c,u,d,h,m,g;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:j,wallet:w,statement:x,options:b}=e;let N;if(Ls())if(typeof w=="object")N=w;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))N=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=w}const C=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const P=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),x?{statement:x}:null));let T;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")T=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)T=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)v=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),y=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const P=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:j,error:w}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:One(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:qi});if(w)throw w;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Tp}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:w})}catch(j){if(rt(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const r=await Pp(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qi});if(await Rp(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Tp}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(rt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,l=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qi}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Tp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ac(this.storage,this.storageKey));const{error:h}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ip("You must provide either an email or phone number.")}catch(l){if(rt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:qi});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Ac(this.storage,this.storageKey)),await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:rse})}catch(a){if(rt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new za;const{error:i}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:l}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ip("You must provide either an email or phone number and a type")}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Pp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<X0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Za}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new za}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Za})})}catch(r){if(rt(r))return kne(r)&&(await this._removeSession(),await Rp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new za;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ac(this.storage,this.storageKey));const{data:u,error:d}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Za});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new za;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Z0(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(rt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new za;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ls())throw new Ap("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ap(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ap("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fk("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Ap("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const g=m-d;g*1e3<=Uc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:y,error:j}=await this._getUser(a);if(j)throw j;const w={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(rt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Pp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Cne(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Rp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Vne(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ac(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(rt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ls()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(rt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zne(async i=>(i>0&&await Une(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qi})),(i,a)=>{const o=200*Math.pow(2,i);return a&&J0(a)&&Date.now()+o-n<Uc})}catch(n){if(this._debug(r,"error",n),rt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ls()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Pp(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<X0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${X0}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),J0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hy;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new za;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),rt(a)){const o={session:null,error:a};return J0(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await g3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Rp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Uc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Uc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Uc}ms, refresh threshold is ${sj} ticks`),i<=sj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof v3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Ac(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ut(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Z0(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Sne>Date.now()))return n;const{data:i,error:a}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new Lh("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new Lh("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};n=g.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=Z0(n);if(Yne(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:i,signature:o},error:null}}const u=Qne(i.alg),d=await this.fetchJwk(i.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Mne(`${l}.${c}`)))throw new Lh("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}}Em.nextInstanceID=0;const mse=Em;class fse extends mse{constructor(e){super(e)}}var pse=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class gse{constructor(e,r,n){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=yne(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:dne,realtime:mne,auth:Object.assign(Object.assign({},hne),{storageKey:u}),global:une},h=wne(n??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=vne(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Rre(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new cre(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new one(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return pse(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fse({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Gre(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vse=(t,e,r)=>new gse(t,e,r),x3="https://kbbhglxrcywpcktkamhl.supabase.co",xse="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",it=vse(x3,xse,{auth:{persistSession:!0}}),yse={isConfigured:!0,url:x3},y3=p.createContext(void 0);function wse({children:t}){const[e,r]=p.useState([]),n=p.useCallback(async()=>{try{const h=Lt.currentUser;if(!h)return;const{data:m,error:g}=await it.from("user_notifications").select("*").eq("user_id",h.uid).order("timestamp",{ascending:!1});if(g){console.error("Erreur lors du chargement des notifications:",g);return}const v=(m||[]).map(y=>({id:y.id,status:y.status,message:y.message,timestamp:new Date(y.timestamp),isRead:y.is_read||!1}));console.log("📱 [CONTEXT] Notifications chargées depuis la base:",v.length),r(v)}catch(h){console.error("Erreur lors du chargement des notifications:",h)}},[]),i=p.useCallback(async h=>{try{const m=Lt.currentUser;if(!m)return;const{error:g}=await it.from("user_notifications").insert({id:h.id,user_id:m.uid,status:h.status,message:h.message,timestamp:h.timestamp.toISOString(),is_read:h.isRead,redirect_to:h.redirectTo,context:h.context});g?console.error("Erreur lors de la sauvegarde de la notification:",g):console.log("💾 [CONTEXT] Notification sauvegardée en base:",h.id)}catch(m){console.error("Erreur lors de la sauvegarde de la notification:",m)}},[]),a=p.useCallback(async h=>{try{const m=Lt.currentUser;if(!m)return;r(v=>v.map(y=>y.id===h?{...y,isRead:!0}:y));const{error:g}=await it.from("user_notifications").update({is_read:!0}).eq("id",h).eq("user_id",m.uid);g&&console.error("Erreur lors de la mise à jour de la notification:",g)}catch(m){console.error("Erreur lors de la mise à jour de la notification:",m)}},[]),o=p.useCallback(async h=>{try{const m=Lt.currentUser;if(!m)return;r(v=>v.filter(y=>y.id!==h));const{error:g}=await it.from("user_notifications").delete().eq("id",h).eq("user_id",m.uid);g?console.error("Erreur lors de la suppression de la notification:",g):console.log("🗑️ [CONTEXT] Notification supprimée de la base:",h)}catch(m){console.error("Erreur lors de la suppression de la notification:",m)}},[]),l=p.useCallback((h,m,g,v)=>{console.log("🔔 [CONTEXT] Ajout de notification:",h,m,g,v);const y={id:crypto.randomUUID(),status:h,message:m,timestamp:new Date,isRead:!1,redirectTo:g||"/verification",context:v||"verification"};r(j=>{console.log("📱 [CONTEXT] Notifications actuelles:",j.length);const w=[...j,y];return console.log("📱 [CONTEXT] Nouvelles notifications après ajout:",w.length),w}),i(y)},[i]),c=p.useCallback(async()=>{try{const h=Lt.currentUser;if(!h)return;r([]);const{error:m}=await it.from("user_notifications").delete().eq("user_id",h.uid);m?console.error("Erreur lors de la suppression de toutes les notifications:",m):console.log("🗑️ [CONTEXT] Toutes les notifications supprimées de la base")}catch(h){console.error("Erreur lors de la suppression de toutes les notifications:",h)}},[]),u=p.useCallback(h=>{const m={approved:"Félicitations ! Votre vérification a été approuvée. Vous avez maintenant accès à toutes les fonctionnalités de BOXETU.",pending:"Votre demande de vérification est en cours de traitement. Nous vous tiendrons informé.",rejected:"Votre demande de vérification a été rejetée. Vous pouvez soumettre une nouvelle demande.",not_started:"Vous n'avez pas encore soumis de demande de vérification."},g={approved:"/verification?status=approved&tab=success",pending:"/verification?status=pending&tab=progress",rejected:"/verification?status=rejected&tab=issues",not_started:"/verification?status=not_started&tab=start"};l(h,m[h],g[h],"verification")},[l]);p.useEffect(()=>{n()},[n]),p.useEffect(()=>{Lt.currentUser&&setTimeout(()=>{var v;if(window.location.pathname.includes("/auth")||window.location.pathname.includes("/verify")||window.location.pathname.includes("/signup")||window.location.pathname.includes("/login"))return;const m=((v=e.find(y=>y.status!=="not_started"))==null?void 0:v.status)||"not_started";m==="approved"||e.find(y=>y.context==="reminder")||(m==="not_started"?l("not_started","🎓 Vérifiez votre statut étudiant pour accéder à toutes les fonctionnalités de BOXETU !","/verification?status=not_started&tab=start","reminder"):m==="pending"?l("pending","⏳ Votre demande de vérification est en cours de traitement. Nous vous tiendrons informé !","/verification?status=pending&tab=progress","reminder"):m==="rejected"&&l("rejected","❌ Votre vérification a été rejetée. Cliquez ici pour soumettre une nouvelle demande.","/verification?status=rejected&tab=issues","reminder"))},1e3)},[Lt.currentUser,l,o]),p.useEffect(()=>{if(!Lt.currentUser)return;const h=()=>{setTimeout(()=>{var y;if(window.location.pathname.includes("/auth")||window.location.pathname.includes("/verify")||window.location.pathname.includes("/signup")||window.location.pathname.includes("/login"))return;const g=((y=e.find(j=>j.status!=="not_started"))==null?void 0:y.status)||"not_started";e.filter(j=>j.context==="reminder").forEach(j=>o(j.id)),g==="not_started"&&l("not_started","🎓 Vérifiez votre statut étudiant pour accéder à toutes les fonctionnalités de BOXETU !","/verification?status=not_started&tab=start","reminder")},1e3)};return window.addEventListener("load",h),()=>{window.removeEventListener("load",h)}},[Lt.currentUser,l,o]);const d={notifications:e,addNotification:l,removeNotification:o,clearAllNotifications:c,notifyStatusChange:u,markAsRead:a,loadNotifications:n};return s.jsx(y3.Provider,{value:d,children:t})}function fN(){const t=p.useContext(y3);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t}class ru{constructor(){this.activeSubscriptions=new Map,this.isInitialized=!1}static getInstance(){return ru.instance||(ru.instance=new ru),ru.instance}async createSubscription(e,r,n,i){if(this.activeSubscriptions.has(e)){console.log("🔄 Subscription existante trouvée, réutilisation:",e);return}try{console.log("🆕 Création d'une nouvelle subscription:",e);const a=it.channel(e).on("postgres_changes",{event:"*",schema:"public",table:r,filter:`user_id=eq.${n}`},i).subscribe();this.activeSubscriptions.set(e,a),console.log("✅ Subscription créée avec succès:",e)}catch(a){console.error("❌ Erreur lors de la création de la subscription:",a)}}removeSubscription(e){const r=this.activeSubscriptions.get(e);if(r)try{r.unsubscribe(),this.activeSubscriptions.delete(e),console.log("🧹 Subscription supprimée:",e)}catch(n){console.log("⚠️ Erreur lors de la suppression de la subscription:",n)}}removeAllSubscriptions(){console.log("🧹 Suppression de toutes les subscriptions...");for(const[e,r]of this.activeSubscriptions.entries())try{r.unsubscribe(),console.log("🧹 Subscription supprimée:",e)}catch(n){console.log("⚠️ Erreur lors de la suppression de la subscription:",n)}this.activeSubscriptions.clear(),console.log("✅ Toutes les subscriptions ont été supprimées")}hasSubscription(e){return this.activeSubscriptions.has(e)}getActiveSubscriptionsCount(){return this.activeSubscriptions.size}getActiveChannels(){return Array.from(this.activeSubscriptions.keys())}}const Kk=ru.getInstance();function bse(){const{currentUser:t}=Mt(),{notifyStatusChange:e}=fN(),[r,n]=p.useState("not_started"),[i,a]=p.useState(!1),o=p.useRef("not_started"),l=p.useRef(!0),c=p.useCallback(async()=>{if(t){a(!0);try{const{VerificationService:d}=await gd(async()=>{const{VerificationService:v}=await Promise.resolve().then(()=>Dme);return{VerificationService:v}},void 0),h=await d.getUserVerificationStatus();let m;switch(h.status){case"pending":m="pending";break;case"approved":case"verified":m="approved";break;case"rejected":m="rejected";break;default:m="not_started"}const g=m!==o.current;n(m),o.current=m,g&&!l.current&&(console.log("🔔 Statut de vérification changé:",o.current,"→",m),e(m)),l.current&&(l.current=!1)}catch(d){console.log("Erreur lors du chargement du statut de vérification:",d),n("not_started")}finally{a(!1)}}},[t,e]);p.useEffect(()=>{if(!t)return;const d=`verification_status_changes_${t.uid}`;return Kk.createSubscription(d,"verification_requests",t.uid,h=>{if(console.log("🔄 Changement détecté dans verification_requests:",h),h.eventType==="UPDATE"&&h.new){const m=h.new.status;let g;switch(m){case"pending":g="pending";break;case"approved":case"verified":g="approved";break;case"rejected":g="rejected";break;default:g="not_started"}g!==r&&(console.log("🔔 Changement de statut détecté en temps réel:",r,"→",g),n(g),e(g))}}),()=>{console.log("🧹 Nettoyage de la subscription:",d),Kk.removeSubscription(d)}},[t,e]),p.useEffect(()=>{c()},[c]);const u=p.useCallback(()=>{c()},[c]);return{verificationStatus:r,loading:i,refreshStatus:u}}function jse({status:t,message:e,isVisible:r,onClose:n,onNotificationClick:i,onMarkAsRead:a,autoHide:o=!0,duration:l=5e3}){if(p.useEffect(()=>{if(o&&r){const d=setTimeout(()=>{n()},l);return()=>clearTimeout(d)}},[r,o,l,n]),!r)return null;const u=(d=>{switch(d){case"approved":return{icon:s.jsx(Ye,{className:"w-5 h-5"}),className:"bg-green-500 border-green-600 text-white",title:"Vérification approuvée !"};case"pending":return{icon:s.jsx(Ct,{className:"w-5 h-5"}),className:"bg-yellow-500 border-yellow-600 text-white",title:"Vérification en cours"};case"rejected":return{icon:s.jsx(fn,{className:"w-5 h-5"}),className:"bg-red-500 border-red-600 text-white",title:"Vérification rejetée"};default:return{icon:s.jsx(la,{className:"w-5 h-5"}),className:"bg-blue-500 border-blue-600 text-white",title:"Statut de vérification"}}})(t);return s.jsx("div",{className:"transform transition-all duration-300 ease-in-out",children:s.jsxs("div",{className:Oe("flex items-center gap-3 p-4 rounded-lg border shadow-lg max-w-sm cursor-pointer",u.className),onClick:i,children:[s.jsx("div",{className:"flex-shrink-0",children:u.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:u.title}),s.jsx("p",{className:"text-sm opacity-90",children:e})]}),s.jsx("button",{onClick:d=>{d.stopPropagation(),a?a():n()},className:"flex-shrink-0 p-1 rounded-full hover:bg-white/20 transition-colors",title:"Marquer comme lu",children:s.jsx(Ql,{className:"w-4 h-4"})})]})})}function _se(){const{notifications:t,removeNotification:e,markAsRead:r}=fN(),n=kr(),i=l=>{if(l.redirectTo){n(l.redirectTo);return}switch(l.status){case"pending":n("/verification?status=pending&tab=progress");break;case"approved":n("/verification?status=approved&tab=success");break;case"rejected":n("/verification?status=rejected&tab=issues");break;case"not_started":n("/verification?status=not_started&tab=start");break;default:n("/verification")}},a=t.filter(l=>!l.isRead);return a.length>0?s.jsx("div",{className:"fixed top-20 right-4 z-[60] space-y-2",children:a.map(l=>s.jsx(jse,{status:l.status,message:l.message,isVisible:!0,onClose:()=>e(l.id),onMarkAsRead:()=>r(l.id),autoHide:!1,onNotificationClick:()=>i(l)},l.id))}):null}const Nse=()=>{var x,b;const{currentUser:t,userProfile:e,logout:r}=Mt(),{conversations:n,fetchConversations:i}=iy(),{getCartItemCount:a}=pd(),{theme:o,setTheme:l}=_U(),c=kr(),[u,d]=p.useState(""),{verificationStatus:h}=bse(),{notifications:m,markAsRead:g}=fN();p.useEffect(()=>{console.log("🔔 Header - Nombre de notifications:",m.length),console.log("🔔 Header - Notifications:",m)},[m]);const v=ke.useMemo(()=>!t||!n.length?0:n.reduce((N,C)=>{const P=C.unreadCount[t.uid]||0;return N+P},0),[n,t]);p.useEffect(()=>{t&&i(t.uid)},[t,i]);const y=N=>{N.preventDefault(),u.trim()&&c(`/listings?q=${encodeURIComponent(u.trim())}`)},j=async()=>{try{await r(),c("/")}catch(N){console.error("Logout error:",N)}},w=a();return s.jsxs(s.Fragment,{children:[s.jsx(_se,{}),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border w-full overflow-x-hidden",children:s.jsx("div",{className:"w-full max-w-full mx-auto px-3 sm:px-4 lg:px-6 overflow-hidden",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between gap-2 sm:gap-4 min-w-0",children:[s.jsxs(ge,{to:"/",className:"flex items-center",children:[s.jsx("div",{className:"sm:hidden w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Kn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block flex flex-col justify-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/logoBoxetu.svg",alt:"BOXETU",className:"h-6 sm:h-7 w-auto",onError:N=>{var C;console.error("❌ Erreur de chargement du logo:",N),N.currentTarget.style.display="none",(C=N.currentTarget.nextElementSibling)==null||C.classList.remove("hidden")}}),s.jsx("div",{className:"hidden text-lg font-bold text-primary",children:"BOXETU"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-left",children:"Étudie, échange & économise"})]})]}),s.jsx("form",{onSubmit:y,className:"flex-1 max-w-sm sm:max-w-md lg:max-w-lg mx-2 sm:mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{type:"text",placeholder:"Rechercher...",value:u,onChange:N=>d(N.target.value),className:"pl-8 sm:pl-10 pr-3 h-9 sm:h-10 text-sm w-full"})]})}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors p-2","aria-label":"Changer le thème",children:[s.jsx(nk,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(ek,{className:"absolute top-2 left-2 h-4 w-4 sm:h-5 sm:w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(F,{asChild:!0,className:"hidden md:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm",children:s.jsxs(ge,{to:"/create",children:[s.jsx(yo,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden lg:inline",children:"Publier"})]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(F,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:s.jsx(ge,{to:"/cart",children:s.jsx(ko,{className:"w-4 h-4"})})}),w>0&&s.jsx(Te,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:w>99?"99+":w})]}),s.jsxs(Dh,{children:[s.jsx(Mh,{asChild:!0,children:s.jsxs(F,{variant:"ghost",size:"icon",className:"hidden sm:flex h-8 w-8 sm:h-9 sm:w-9 relative",children:[s.jsx(Us,{className:"w-4 h-4"}),m.filter(C=>!C.isRead).length>0&&s.jsx(Te,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:(()=>{const N=m.filter(C=>!C.isRead).length;return N>99?"99+":N})()})]})}),s.jsxs(yu,{className:"w-80 max-h-96 overflow-y-auto",align:"end",children:[s.jsx("div",{className:"p-2 border-b",children:s.jsxs("h3",{className:"font-semibold text-sm",children:["Notifications (",m.length,")",(()=>{const N=m.filter(C=>!C.isRead).length;return N>0?` - ${N} non lues`:""})()]})}),m.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Aucune notification"}):s.jsx("div",{className:"space-y-1",children:m.map(N=>s.jsx("div",{className:`p-3 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors ${N.isRead?"":"bg-blue-50 dark:bg-blue-950/20"}`,onClick:()=>{g(N.id)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[N.status==="approved"&&s.jsx(et,{className:"w-4 h-4 text-green-500"}),N.status==="pending"&&s.jsx(Ct,{className:"w-4 h-4 text-yellow-500"}),N.status==="rejected"&&s.jsx(fn,{className:"w-4 h-4 text-red-500"}),N.status==="not_started"&&s.jsx(Kt,{className:"w-4 h-4 text-blue-500"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:`text-sm font-medium ${N.isRead?"":"font-bold"}`,children:[N.status==="approved"&&"Vérification approuvée !",N.status==="pending"&&"Vérification en cours",N.status==="rejected"&&"Vérification rejetée",N.status==="not_started"&&"Statut de vérification"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(N.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:`text-sm ${N.isRead?"text-muted-foreground":"font-medium"}`,children:N.message}),!N.isRead&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Non lue"})]})]})]})},N.id))}),m.filter(C=>!C.isRead).length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Rn,{}),s.jsx("div",{className:"p-2",children:s.jsx(F,{variant:"outline",size:"sm",onClick:()=>{m.forEach(N=>{N.isRead||g(N.id)})},className:"w-full text-xs",children:"Marquer toutes comme lues"})})]})]})]}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(F,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:s.jsx(ge,{to:"/messages",children:s.jsx(Gt,{className:"w-4 h-4"})})}),v>0&&s.jsx(Te,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:v>99?"99+":v})]}),s.jsxs(Dh,{children:[s.jsx(Mh,{asChild:!0,children:s.jsxs(F,{variant:"ghost",className:"relative h-8 w-8 sm:h-9 sm:w-9 rounded-full p-0",children:[s.jsxs(is,{className:"h-7 w-7 sm:h-8 sm:w-8",children:[s.jsx(Ea,{src:e==null?void 0:e.photoURL}),s.jsx(Fn,{className:"text-xs sm:text-sm",children:((b=(x=e==null?void 0:e.displayName)==null?void 0:x[0])==null?void 0:b.toUpperCase())||"U"})]}),h==="approved"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(et,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})}),h==="pending"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-yellow-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(Ct,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})}),h==="rejected"&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-red-500 rounded-full flex items-center justify-center border-2 border-background shadow-sm",children:s.jsx(fn,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})})]})}),s.jsxs(yu,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:e==null?void 0:e.displayName}),s.jsx(tre,{status:h})]}),s.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e==null?void 0:e.university}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ys,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/profile",className:"cursor-pointer",children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),!(e!=null&&e.isVerified)&&s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/verification",className:"cursor-pointer",children:[s.jsx(et,{className:"w-4 h-4 mr-2"}),"Vérification étudiante"]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/settings",className:"cursor-pointer",children:[s.jsx(zx,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/orders",className:"cursor-pointer",children:[s.jsx(rr,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/payments",className:"cursor-pointer",children:[s.jsx(ja,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(cn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(V1,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Messages",v>0&&s.jsx(Te,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:v>99?"99+":v})]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/impact",className:"cursor-pointer",children:[s.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/help",className:"cursor-pointer",children:[s.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/safety",className:"cursor-pointer",children:[s.jsx(et,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),(()=>{const N=(t==null?void 0:t.email)==="barrymohamadou98@gmail.com";return console.log("Header - showAdmin:",N,"currentUser?.email:",t==null?void 0:t.email),N})()&&s.jsxs(s.Fragment,{children:[s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/admin",className:"cursor-pointer text-primary",children:[s.jsx(et,{className:"w-4 h-4 mr-2"}),"Administration"]})})]}),s.jsx(Rn,{}),s.jsxs(yt,{onClick:j,className:"cursor-pointer text-destructive",children:[s.jsx(vQ,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx(F,{size:"icon",asChild:!0,className:"md:hidden bg-gradient-to-r from-primary to-secondary h-8 w-8",children:s.jsx(ge,{to:"/create",children:s.jsx(yo,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(F,{variant:"ghost",asChild:!0,className:"hidden sm:flex h-8 sm:h-9 text-xs sm:text-sm",children:s.jsx(ge,{to:"/auth?mode=signin",children:"Se connecter"})}),s.jsx(F,{asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 text-xs px-3",children:s.jsx(ge,{to:"/auth?mode=signin",children:"Connexion"})}),s.jsx(F,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-4",children:s.jsx(ge,{to:"/auth?mode=signup",children:"Rejoindre"})})]}),s.jsxs(Dh,{children:[s.jsx(Mh,{asChild:!0,className:"sm:hidden",children:s.jsx(F,{className:"p-2 text-foreground hover:text-primary transition-colors sm:hidden","aria-label":"Menu mobile",children:s.jsx(xQ,{className:"w-4 h-4"})})}),s.jsxs(yu,{className:"w-56",align:"end",children:[s.jsxs(yt,{onClick:()=>l(o==="dark"?"light":"dark"),className:"cursor-pointer",children:[s.jsxs("div",{className:"relative mr-2",children:[s.jsx(nk,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(ek,{className:"absolute top-0 left-0 h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),"Changer le thème"]}),s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(yt,{asChild:!0,children:s.jsx(ge,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/create",className:"cursor-pointer",children:[s.jsx(yo,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(ko,{className:"w-4 h-4 mr-2"}),"Panier",w>0&&s.jsx(Te,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:w>99?"99+":w})]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Messages",v>0&&s.jsx(Te,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:v>99?"99+":v})]})}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(cn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]}),!t&&s.jsxs(s.Fragment,{children:[s.jsx(Rn,{}),s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:"/auth?mode=signin",className:"cursor-pointer",children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Se connecter"]})})]})]})]})]})]})})})]})},Sse=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto w-full overflow-x-hidden",children:s.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-8 sm:py-12 max-w-full overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex flex-col justify-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/logoBoxetu.svg",alt:"BOXETU",className:"h-6 sm:h-7 w-auto"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-left",children:"Étudie, échange & économise"})]})}),s.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-3 sm:space-x-4",children:[s.jsx("a",{href:"https://facebook.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(hQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx("a",{href:"https://twitter.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(EQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx("a",{href:"https://instagram.com/boxetu",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:s.jsx(pQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Navigation"}),s.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[s.jsx("li",{children:s.jsx(ge,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(ge,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(ge,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(ge,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(ge,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[s.jsx("li",{children:s.jsx(ge,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(ge,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Électronique"})}),s.jsx("li",{children:s.jsx(ge,{to:"/housing",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(ge,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(ge,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(et,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(Ys,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[s.jsx(fr,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"break-all",children:"support@boxetu.fr"})]})]}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(ge,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Conseils de sécurité"}),s.jsx(ge,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Processus de vérification"}),s.jsx(ge,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Règles de la communauté"}),s.jsx(ge,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Centre d'aide"})]})]})]}),s.jsx("div",{className:"border-t border-border mt-6 sm:mt-8 pt-6 sm:pt-8",children:s.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center",children:[s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:"© 2024 BOXETU. Tous droits réservés."}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Plateforme dédiée aux étudiants vérifiés."})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row gap-3 sm:gap-6 justify-center sm:justify-end",children:[s.jsx(ge,{to:"/terms",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Conditions d'utilisation"}),s.jsx(ge,{to:"/privacy",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Politique de confidentialité"}),s.jsx(ge,{to:"/cookies",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@boxetu.fr",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1 flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),"Contact"]})]})]})})]})}),K=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Oe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));K.displayName="Card";const je=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Oe("flex flex-col space-y-1.5 p-6",t),...e}));je.displayName="CardHeader";const _e=p.forwardRef(({className:t,...e},r)=>s.jsx("h3",{ref:r,className:Oe("font-semibold leading-none tracking-tight",t),...e}));_e.displayName="CardTitle";const mt=p.forwardRef(({className:t,...e},r)=>s.jsx("p",{ref:r,className:Oe("text-sm text-muted-foreground",t),...e}));mt.displayName="CardDescription";const Y=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Oe("p-6 pt-0",t),...e}));Y.displayName="CardContent";const w3=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Oe("flex items-center p-6 pt-0",t),...e}));w3.displayName="CardFooter";const Nv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Nv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=Nv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},Yk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},tw=t=>{var r,n,i,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:Yk(e.createdAt),updatedAt:Yk(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((r=e.location)==null?void 0:r.city)||"Paris",state:((n=e.location)==null?void 0:n.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},Ef=fd((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(r={},n=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!n&&!a)){t({loading:!0});try{let o=$t(Nt(fe,"listings"),cv("createdAt","desc"),Ss(20));!n&&a&&(o=$t(o,uG(a)));const l=await Zt(o);let c=l.docs.map(tw);if(r.category&&r.category!=="all"&&(c=c.filter(d=>d.category===r.category)),r.minPrice!==void 0&&(c=c.filter(d=>d.price>=r.minPrice)),r.maxPrice!==void 0&&(c=c.filter(d=>d.price<=r.maxPrice)),r.query){const d=r.query.toLowerCase();c=c.filter(h=>{var m;return h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d)||((m=h.tags)==null?void 0:m.some(g=>g.toLowerCase().includes(d)))})}if(r.condition&&r.condition.length>0&&(c=c.filter(d=>r.condition.includes(d.condition))),r.sortBy)switch(r.sortBy){case"price-asc":c.sort((d,h)=>d.price-h.price);break;case"price-desc":c.sort((d,h)=>h.price-d.price);break;case"date":default:c.sort((d,h)=>new Date(h.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:n?c:[...i,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),ne.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const r=$t(Nt(fe,"listings"),cv("createdAt","desc"),Ss(6)),n=await Zt(r);console.log(`📊 Found ${n.docs.length} documents`);const i=n.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=tw(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(r){console.error("❌ Error fetching featured listings:",r),t({featuredListings:[]})}},fetchListingById:async r=>{t({loading:!0});try{const n=ze(fe,"listings",r),i=await Gr(n);if(i.exists()){const a=tw(i);await mr(n,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),ne.error("Annonce introuvable")}catch(n){console.error("Error fetching listing:",n),ne.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async r=>{var n,i,a,o,l,c;try{const u=Nv({...r,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((n=r.location)==null?void 0:n.city)||"Paris",state:((i=r.location)==null?void 0:i.state)||"Île-de-France",country:((a=r.location)==null?void 0:a.country)||"France",campus:((o=r.location)==null?void 0:o.campus)||null,university:((l=r.location)==null?void 0:l.university)||null,coordinates:((c=r.location)==null?void 0:c.coordinates)||null},currency:r.currency||"EUR",images:r.images||[],tags:r.tags||[],condition:r.condition||"good",transactionType:r.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Bl(Nt(fe,"listings"),u);return ne.success("Annonce créée avec succès !"),d.id}catch(u){throw console.error("Error creating listing:",u),ne.error("Erreur lors de la création de l'annonce"),u}},updateListing:async(r,n)=>{try{const i=ze(fe,"listings",r),a=Nv({...n,updatedAt:new Date});await mr(i,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===r?{...u,...n}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===r?{...l,...n}:l}),ne.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),ne.error("Erreur lors de la mise à jour"),i}},deleteListing:async r=>{try{await $u(ze(fe,"listings",r));const{listings:n}=e(),i=n.filter(a=>a.id!==r);t({listings:i}),ne.success("Annonce supprimée !")}catch(n){throw console.error("Error deleting listing:",n),ne.error("Erreur lors de la suppression"),n}},searchListings:async r=>{await e().fetchListings(r,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),Qk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},b3=fd((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async r=>{if(r){t({loading:!0});try{const n=$t(Nt(fe,"favorites"),Bt("userId","==",r),Ss(100)),i=await Zt(n),a=[],o=new Set;i.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:Qk(c.createdAt),updatedAt:Qk(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(n){console.error("Erreur lors du chargement des favoris:",n),ne.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(r,n)=>{var i;if(!(!r||!n))try{if(e().userFavoriteIds.has(n.id)){ne.info("Déjà dans vos favoris");return}const a={userId:r,listingId:n.id,listingTitle:n.title,listingPrice:n.price,listingImage:((i=n.images)==null?void 0:i[0])||null,listingCategory:n.category,listingTransactionType:n.transactionType,sellerName:n.sellerName,sellerUniversity:n.sellerUniversity,notes:"",tags:n.tags||[],createdAt:dr(),updatedAt:dr()},l={id:(await Bl(Nt(fe,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(n.id),t({favorites:[l,...c],userFavoriteIds:d});try{await mr(ze(fe,"listings",n.id),{likes:(n.likes||0)+1})}catch(h){console.error("Erreur lors de la mise à jour du compteur de likes:",h)}ne.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),ne.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(r,n)=>{if(!(!r||!n))try{const i=$t(Nt(fe,"favorites"),Bt("userId","==",r),Bt("listingId","==",n)),a=await Zt(i);if(a.empty){ne.info("Pas dans vos favoris");return}const o=a.docs[0];await $u(ze(fe,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(n),t({favorites:l.filter(d=>d.listingId!==n),userFavoriteIds:u});try{const d=ze(fe,"listings",n),h=await Zt($t(Nt(fe,"listings"),Bt("__name__","==",n)));if(!h.empty){const m=h.docs[0].data().likes||0;await mr(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise à jour du compteur de likes:",d)}ne.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),ne.error("Erreur lors de la suppression des favoris")}},isFavorite:r=>e().userFavoriteIds.has(r),toggleFavorite:async(r,n)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(n.id)?await o(r,n.id):await a(r,n)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),j3=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const{currentUser:i}=Mt(),{isFavorite:a,toggleFavorite:o}=b3(),l=kr(),c=a(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!i){ne.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(i.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(F,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(cn,{className:`w-4 h-4 ${c?"fill-current":""}`})})},Ese={borderRadius:"50%",aspectRatio:"1/1",minHeight:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",padding:0,overflow:"hidden",flexShrink:0},_3=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const i=async l=>{l.preventDefault(),l.stopPropagation();const c={title:t.title,text:`Découvrez cette annonce sur BOXETU: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),ne.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return{width:"32px",height:"32px"};case"lg":return{width:"40px",height:"40px"};default:return{width:"36px",height:"36px"}}},o=()=>{switch(e){case"sm":return 14;case"lg":return 20;default:return 16}};return s.jsx("button",{onClick:i,className:`hover:bg-gray-100 ${n}`,style:{...Ese,...a()},"aria-label":"Partager",type:"button",children:s.jsx(F1,{size:o(),strokeWidth:2})})};function Ke(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Qn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function bn(t,e){const r=Ke(t);return isNaN(e)?Qn(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function ri(t,e){const r=Ke(t);if(isNaN(e))return Qn(t,NaN);if(!e)return r;const n=r.getDate(),i=Qn(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const pN=6048e5,Cse=864e5,Dp=43200,Xk=1440;let kse={};function yd(){return kse}function Pi(t,e){var l,c,u,d;const r=yd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ke(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Jl(t){return Pi(t,{weekStartsOn:1})}function N3(t){const e=Ke(t),r=e.getFullYear(),n=Qn(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Jl(n),a=Qn(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Jl(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function qu(t){const e=Ke(t);return e.setHours(0,0,0,0),e}function Wu(t){const e=Ke(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function xi(t,e){const r=qu(t),n=qu(e),i=+r-Wu(r),a=+n-Wu(n);return Math.round((i-a)/Cse)}function Tse(t){const e=N3(t),r=Qn(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Jl(r)}function oj(t,e){const r=e*7;return bn(t,r)}function Ise(t,e){return ri(t,e*12)}function Ase(t){let e;return t.forEach(function(r){const n=Ke(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function Pse(t){let e;return t.forEach(r=>{const n=Ke(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function fg(t,e){const r=Ke(t),n=Ke(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function Rse(t){return Qn(t,Date.now())}function zn(t,e){const r=qu(t),n=qu(e);return+r==+n}function gN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Dse(t){if(!gN(t)&&typeof t!="number")return!1;const e=Ke(t);return!isNaN(Number(e))}function Hu(t,e){const r=Ke(t),n=Ke(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function Mse(t,e,r){const n=Pi(t,r),i=Pi(e,r),a=+n-Wu(n),o=+i-Wu(i);return Math.round((a-o)/pN)}function Ose(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Lse(t,e){return+Ke(t)-+Ke(e)}function Vse(t){const e=Ke(t);return e.setHours(23,59,59,999),e}function my(t){const e=Ke(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Fse(t){const e=Ke(t);return+Vse(e)==+my(e)}function $se(t,e){const r=Ke(t),n=Ke(e),i=fg(r,n),a=Math.abs(Hu(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let l=fg(r,n)===-i;Fse(Ke(t))&&a===1&&fg(t,n)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function Use(t,e,r){const n=Lse(t,e)/1e3;return Ose(r==null?void 0:r.roundingMethod)(n)}function Yn(t){const e=Ke(t);return e.setDate(1),e.setHours(0,0,0,0),e}function S3(t){const e=Ke(t),r=Qn(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function vN(t,e){var l,c,u,d;const r=yd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ke(t),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function E3(t){return vN(t,{weekStartsOn:1})}const zse={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bse=(t,e,r)=>{let n;const i=zse[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function bu(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const qse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wse={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Hse={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gse={date:bu({formats:qse,defaultWidth:"full"}),time:bu({formats:Wse,defaultWidth:"full"}),dateTime:bu({formats:Hse,defaultWidth:"full"})},Kse={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yse=(t,e,r,n)=>Kse[t];function fi(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Qse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rie=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},nie={ordinalNumber:rie,era:fi({values:Qse,defaultWidth:"wide"}),quarter:fi({values:Xse,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fi({values:Jse,defaultWidth:"wide"}),day:fi({values:Zse,defaultWidth:"wide"}),dayPeriod:fi({values:eie,defaultWidth:"wide",formattingValues:tie,defaultFormattingWidth:"wide"})};function pi(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?iie(l,h=>h.test(o)):sie(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function sie(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function iie(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function C3(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const aie=/^(\d+)(th|st|nd|rd)?/i,oie=/\d+/i,lie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cie={any:[/^b/i,/^(a|c)/i]},uie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},die={any:[/1/i,/2/i,/3/i,/4/i]},hie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xie={ordinalNumber:C3({matchPattern:aie,parsePattern:oie,valueCallback:t=>parseInt(t,10)}),era:pi({matchPatterns:lie,defaultMatchWidth:"wide",parsePatterns:cie,defaultParseWidth:"any"}),quarter:pi({matchPatterns:uie,defaultMatchWidth:"wide",parsePatterns:die,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pi({matchPatterns:hie,defaultMatchWidth:"wide",parsePatterns:mie,defaultParseWidth:"any"}),day:pi({matchPatterns:fie,defaultMatchWidth:"wide",parsePatterns:pie,defaultParseWidth:"any"}),dayPeriod:pi({matchPatterns:gie,defaultMatchWidth:"any",parsePatterns:vie,defaultParseWidth:"any"})},xN={code:"en-US",formatDistance:Bse,formatLong:Gse,formatRelative:Yse,localize:nie,match:xie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yie(t){const e=Ke(t);return xi(e,S3(e))+1}function k3(t){const e=Ke(t),r=+Jl(e)-+Tse(e);return Math.round(r/pN)+1}function T3(t,e){var d,h,m,g;const r=Ke(t),n=r.getFullYear(),i=yd(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Qn(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=Pi(o,e),c=Qn(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Pi(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function wie(t,e){var l,c,u,d;const r=yd(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=T3(t,e),a=Qn(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Pi(a,e)}function I3(t,e){const r=Ke(t),n=+Pi(r,e)-+wie(r,e);return Math.round(n/pN)+1}function Pt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const $a={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Pt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Pt(r+1,2)},d(t,e){return Pt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Pt(t.getHours()%12||12,e.length)},H(t,e){return Pt(t.getHours(),e.length)},m(t,e){return Pt(t.getMinutes(),e.length)},s(t,e){return Pt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Pt(i,e.length)}},Dc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jk={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return $a.y(t,e)},Y:function(t,e,r,n){const i=T3(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Pt(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Pt(a,e.length)},R:function(t,e){const r=N3(t);return Pt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Pt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Pt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Pt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return $a.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Pt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=I3(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Pt(i,e.length)},I:function(t,e,r){const n=k3(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Pt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):$a.d(t,e)},D:function(t,e,r){const n=yie(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Pt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Pt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Pt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Pt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Dc.noon:n===0?i=Dc.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Dc.evening:n>=12?i=Dc.afternoon:n>=4?i=Dc.morning:i=Dc.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return $a.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):$a.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Pt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Pt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):$a.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):$a.s(t,e)},S:function(t,e){return $a.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return eT(n);case"XXXX":case"XX":return ml(n);case"XXXXX":case"XXX":default:return ml(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return eT(n);case"xxxx":case"xx":return ml(n);case"xxxxx":case"xxx":default:return ml(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zk(n,":");case"OOOO":default:return"GMT"+ml(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zk(n,":");case"zzzz":default:return"GMT"+ml(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Pt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Pt(n,e.length)}};function Zk(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Pt(a,2)}function eT(t,e){return t%60===0?(t>0?"-":"+")+Pt(Math.abs(t)/60,2):ml(t,e)}function ml(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Pt(Math.trunc(n/60),2),a=Pt(n%60,2);return r+i+e+a}const tT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},A3=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bie=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return tT(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",tT(n,e)).replace("{{time}}",A3(i,e))},jie={p:A3,P:bie},_ie=/^D+$/,Nie=/^Y+$/,Sie=["D","DD","YY","YYYY"];function Eie(t){return _ie.test(t)}function Cie(t){return Nie.test(t)}function kie(t,e,r){const n=Tie(t,e,r);if(console.warn(n),Sie.includes(t))throw new RangeError(n)}function Tie(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Iie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Aie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pie=/^'([^]*?)'?$/,Rie=/''/g,Die=/[a-zA-Z]/;function Mr(t,e,r){var d,h,m,g,v,y,j,w;const n=yd(),i=(r==null?void 0:r.locale)??n.locale??xN,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((w=(j=n.locale)==null?void 0:j.options)==null?void 0:w.weekStartsOn)??0,l=Ke(t);if(!Dse(l))throw new RangeError("Invalid time value");let c=e.match(Aie).map(x=>{const b=x[0];if(b==="p"||b==="P"){const N=jie[b];return N(x,i.formatLong)}return x}).join("").match(Iie).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:Mie(x)};if(Jk[b])return{isToken:!0,value:x};if(b.match(Die))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Cie(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Eie(b))&&kie(b,e,String(t));const N=Jk[b[0]];return N(l,b,i.localize,u)}).join("")}function Mie(t){const e=t.match(Pie);return e?e[1].replace(Rie,"'"):t}function Oie(t,e,r){const n=yd(),i=(r==null?void 0:r.locale)??n.locale??xN,a=2520,o=fg(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ke(e),u=Ke(t)):(c=Ke(t),u=Ke(e));const d=Use(u,c),h=(Wu(u)-Wu(c))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<Xk){const v=Math.round(m/60);return i.formatDistance("aboutXHours",v,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<Dp){const v=Math.round(m/Xk);return i.formatDistance("xDays",v,l)}else if(m<Dp*2)return g=Math.round(m/Dp),i.formatDistance("aboutXMonths",g,l)}if(g=$se(u,c),g<12){const v=Math.round(m/Dp);return i.formatDistance("xMonths",v,l)}else{const v=g%12,y=Math.trunc(g/12);return v<3?i.formatDistance("aboutXYears",y,l):v<9?i.formatDistance("overXYears",y,l):i.formatDistance("almostXYears",y+1,l)}}function wd(t,e){return Oie(t,Rse(t),e)}function Lie(t){const e=Ke(t),r=e.getFullYear(),n=e.getMonth(),i=Qn(t,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function Vie(t){return Math.trunc(+Ke(t)/1e3)}function Fie(t){const e=Ke(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function $ie(t,e){return Mse(Fie(t),Yn(t),e)+1}function lj(t,e){const r=Ke(t),n=Ke(e);return r.getTime()>n.getTime()}function P3(t,e){const r=Ke(t),n=Ke(e);return+r<+n}function yN(t,e){const r=Ke(t),n=Ke(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Uie(t,e){const r=Ke(t),n=Ke(e);return r.getFullYear()===n.getFullYear()}function rw(t,e){return bn(t,-e)}function nw(t,e){const r=Ke(t),n=r.getFullYear(),i=r.getDate(),a=Qn(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const o=Lie(a);return r.setMonth(e,Math.min(i,o)),r}function rT(t,e){const r=Ke(t);return isNaN(+r)?Qn(t,NaN):(r.setFullYear(e),r)}const zie={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Bie=(t,e,r)=>{let n;const i=zie[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},qie={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Wie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Hie={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gie={date:bu({formats:qie,defaultWidth:"full"}),time:bu({formats:Wie,defaultWidth:"full"}),dateTime:bu({formats:Hie,defaultWidth:"full"})},Kie={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Yie=(t,e,r,n)=>Kie[t],Qie={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Xie={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Jie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Zie={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eae={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},tae=(t,e)=>{const r=Number(t),n=e==null?void 0:e.unit;if(r===0)return"0";const i=["year","week","hour","minute","second"];let a;return r===1?a=n&&i.includes(n)?"ère":"er":a="ème",r+a},rae=["MMM","MMMM"],nae={preprocessor:(t,e)=>t.getDate()===1||!e.some(n=>n.isToken&&rae.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:tae,era:fi({values:Qie,defaultWidth:"wide"}),quarter:fi({values:Xie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fi({values:Jie,defaultWidth:"wide"}),day:fi({values:Zie,defaultWidth:"wide"}),dayPeriod:fi({values:eae,defaultWidth:"wide"})},sae=/^(\d+)(ième|ère|ème|er|e)?/i,iae=/\d+/i,aae={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},oae={any:[/^av/i,/^ap/i]},lae={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},cae={any:[/1/i,/2/i,/3/i,/4/i]},uae={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},dae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},hae={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},mae={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},fae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},pae={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},gae={ordinalNumber:C3({matchPattern:sae,parsePattern:iae,valueCallback:t=>parseInt(t)}),era:pi({matchPatterns:aae,defaultMatchWidth:"wide",parsePatterns:oae,defaultParseWidth:"any"}),quarter:pi({matchPatterns:lae,defaultMatchWidth:"wide",parsePatterns:cae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pi({matchPatterns:uae,defaultMatchWidth:"wide",parsePatterns:dae,defaultParseWidth:"any"}),day:pi({matchPatterns:hae,defaultMatchWidth:"wide",parsePatterns:mae,defaultParseWidth:"any"}),dayPeriod:pi({matchPatterns:fae,defaultMatchWidth:"any",parsePatterns:pae,defaultParseWidth:"any"})},un={code:"fr",formatDistance:Bie,formatLong:Gie,formatRelative:Yie,localize:nae,match:gae,options:{weekStartsOn:1,firstWeekContainsDate:4}},Cm=({listing:t})=>{var g,v,y,j,w,x;const e=({className:b})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:b}),r=({className:b})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:b}),n=(b,N)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const C=N||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:C}).format(b)}catch{return`${b} €`}},i=b=>{switch(b){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-blue-100 text-blue-700 border-blue-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},a=b=>{switch(b){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return b}},o=()=>{switch(t.transactionType){case"donation":return s.jsx(e,{className:"w-3 h-3"});case"exchange":return s.jsx(r,{className:"w-3 h-3"});default:return null}},l=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},c=b=>{try{let N;if(!b)return"Date inconnue";if(b instanceof Date)N=b;else if(typeof b=="string"||typeof b=="number")N=new Date(b);else if(b&&typeof b.toDate=="function")N=b.toDate();else if(b&&typeof b=="object"&&b.seconds)N=new Date(b.seconds*1e3);else return"Date inconnue";return isNaN(N.getTime())?"Date inconnue":wd(N,{addSuffix:!0,locale:un})}catch(N){return console.warn("Error formatting date:",N),"Date inconnue"}},u=t.price||0,d=t.currency||"EUR",h=t.condition||"good",m=t.transactionType||"sale";return s.jsxs(K,{className:"group relative bg-card rounded-xl border border-border hover:border-accent/30 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(ge,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-800",children:[s.jsx("img",{src:((g=t.images)==null?void 0:g[0])||"/placeholder.jpg",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(j3,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"}),s.jsx(_3,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"})]}),m!=="sale"&&s.jsxs(Te,{className:`absolute top-3 left-3 ${l()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[o(),s.jsx("span",{className:"ml-1.5 text-sm",children:m==="donation"?"Don":"Troc"})]}),m==="sale"&&s.jsx(Te,{className:`absolute top-3 left-3 ${i(h)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:a(h)}),t.environmentalImpact&&s.jsxs(Te,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(Ys,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(Y,{className:"p-6 space-y-4",children:[s.jsxs(ge,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${m==="donation"?"text-green-600":m==="exchange"?"text-purple-600":"text-foreground"}`,children:n(u,d)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground bg-muted px-2.5 py-1 rounded-full",children:[s.jsx(Co,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-foreground line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),m==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-purple-50/80 dark:bg-purple-500/10 px-3 py-2 rounded-lg mb-4",children:[s.jsx(r,{className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(Hr,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((v=t.location)==null?void 0:v.campus)||((y=t.location)!=null&&y.city&&((j=t.location)!=null&&j.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(Ct,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"whitespace-nowrap",children:c(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(is,{className:"w-9 h-9 border-2 border-border",children:[s.jsx(Ea,{src:t.sellerAvatar}),s.jsx(Fn,{className:"text-sm bg-muted text-muted-foreground font-medium",children:((x=(w=t.sellerName)==null?void 0:w[0])==null?void 0:x.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(et,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-muted-foreground truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&m==="sale"&&s.jsx(Te,{className:"bg-green-50 dark:bg-emerald-900/20 text-green-700 dark:text-emerald-300 border-green-200 dark:border-emerald-800 hover:bg-green-100 dark:hover:bg-emerald-900/30 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var R3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nT=ke.createContext&&ke.createContext(R3),vae=["attr","size","title"];function xae(t,e){if(t==null)return{};var r=yae(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sv.apply(this,arguments)}function sT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(r),!0).forEach(function(n){wae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wae(t,e,r){return e=bae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function jae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D3(t){return t&&t.map((e,r)=>ke.createElement(e.tag,Ev({key:r},e.attr),D3(e.child)))}function Ko(t){return e=>ke.createElement(_ae,Sv({attr:Ev({},t.attr)},e),D3(t.child))}function _ae(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=xae(t,vae),l=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),ke.createElement("svg",Sv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:Ev(Ev({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&ke.createElement("title",null,a),t.children)};return nT!==void 0?ke.createElement(nT.Consumer,null,r=>e(r)):e(R3)}function Nae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Sae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Eae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Cae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function kae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Tae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function Iae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Aae(t){return Ko({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Pae=()=>{const[t,e]=p.useState(""),r=kr(),n=i=>{i.preventDefault(),t.trim()&&r(`/listings?search=${encodeURIComponent(t.trim())}`)};return s.jsx("form",{onSubmit:n,className:"w-full max-w-2xl mx-auto",children:s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Er,{className:"absolute left-3 text-muted-foreground w-4 h-4"}),s.jsx(ye,{type:"text",placeholder:"Rechercher des annonces, services, logements...",value:t,onChange:i=>e(i.target.value),className:"pl-10 pr-24 h-12 text-base"}),s.jsx(F,{type:"submit",className:"absolute right-1 h-10 px-4 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:"Rechercher"})]})})},Rae={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/refresh.svg"},Dae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:t}),Mae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Give Up",className:t}),Oae=({className:t})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Exchange",className:t}),Lae=[{id:"electronics",name:"Électronique",icon:Cae,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Sae,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:Nae,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:Eae,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:kae,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Tae,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Aae,color:"text-green-600",description:"Donnez ce dont vous n'avez plus besoin"},{id:"exchange",name:"Échanges",icon:Iae,color:"text-purple-600",description:"Échangez vos objets contre d'autres"}],Vae=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",link:"/create?type=sell",icon:Dae,color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",link:"/create?type=gift",icon:Mae,color:"border-2 border-green-500 text-green-50"},{title:"Échanger facilement",description:"Trouvez des échanges équitables",link:"/create?type=swap",icon:Oae,color:"border-2 border-green-500 text-green-50"}],Fae=[{title:"Vérification étudiante",description:"Tous nos utilisateurs sont vérifiés avec leur carte étudiante pour garantir une communauté sûre et authentique.",icon:et},{title:"Impact écologique",description:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental en temps réel.",icon:Ys},{title:"Communauté locale",description:"Connectez-vous avec des étudiants de votre région pour des échanges rapides et des rencontres enrichissantes.",icon:Kn},{title:"Sécurité garantie",description:"Système de notation et de modération pour assurer des transactions sûres et transparentes.",icon:RD}],$ae=()=>{const{featuredListings:t,fetchFeaturedListings:e}=Ef();return p.useEffect(()=>{e()},[e]),s.jsx("div",{className:"w-full min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:s.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-hidden",children:[s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 rounded-lg sm:rounded-xl overflow-hidden mb-8",children:s.jsx("div",{className:"w-full py-6 sm:py-8 lg:py-12 px-3 sm:px-6 lg:px-8 overflow-hidden",children:s.jsxs("div",{className:"w-full max-w-4xl mx-auto text-center overflow-hidden",children:[s.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4 lg:mb-6",children:s.jsxs(Te,{className:"bg-green-100 text-green-800 border-green-200 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 text-xs sm:text-sm",children:[s.jsx(et,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Communauté 100% étudiants vérifiés"}),s.jsx("span",{className:"sm:hidden",children:"Étudiants vérifiés"})]})}),s.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 lg:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent px-2",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground mb-4 sm:mb-6 lg:mb-8 max-w-2xl mx-auto px-2",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"mb-4 sm:mb-6 lg:mb-8 px-2 sm:px-4",children:s.jsx(Pae,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Vae.map((r,n)=>s.jsx(ge,{to:r.link,className:"group",children:s.jsx(K,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(Y,{className:"p-3 sm:p-4 text-center",children:[s.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${r.color} rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(r.icon,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),s.jsx("h3",{className:"font-semibold mb-1 text-sm sm:text-base",children:r.title}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:r.description})]})})},n))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center px-2",children:[s.jsx(F,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto text-sm sm:text-base",children:s.jsxs(ge,{to:"/listings",children:["Parcourir les annonces",s.jsx(Gl,{className:"w-4 h-4 ml-2"})]})}),s.jsx(F,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto text-sm sm:text-base",children:s.jsx(ge,{to:"/auth?mode=signup",children:"Rejoindre la communauté"})})]})]})})}),s.jsx("section",{className:"py-8 sm:py-10 lg:py-16 px-2 sm:px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-2 sm:mb-3 lg:mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-6 sm:mb-8 lg:mb-12 max-w-2xl mx-auto text-xs sm:text-sm lg:text-base px-2",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:Lae.map(r=>{let n;return r.id==="jobs"?n="/jobs":r.id==="housing"?n="/housing":n=`/listings?category=${r.id}`,s.jsx(ge,{to:n,className:"group",children:s.jsx(K,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(Y,{className:"p-3 sm:p-4 text-center",children:[s.jsx("img",{src:Rae[r.id],alt:r.name,className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 mx-auto mb-2 sm:mb-3"}),s.jsx("h3",{className:"font-semibold text-xs sm:text-sm lg:text-base mb-1",children:r.name}),s.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:r.description})]})})},r.id)})})]})}),t.length>0&&s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto mb-6",children:[s.jsx("div",{className:"text-center sm:text-left",children:s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:"Annonces récentes"})}),s.jsx(F,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsxs(ge,{to:"/listings",children:["Voir tout",s.jsx(Gl,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.slice(0,6).map(r=>s.jsx(Cm,{listing:r},r.id))})]})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Pourquoi BOXETU ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base px-2",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Fae.map((r,n)=>s.jsx(K,{className:"border-0 shadow-none",children:s.jsx(Y,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(r.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-1 sm:mb-2",children:r.title}),s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-muted-foreground",children:r.description})]})]})})},n))})]})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg sm:rounded-xl",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(Ys,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-green-600 mx-auto mb-4 sm:mb-6"}),s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-muted-foreground mb-6 sm:mb-8 px-2",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"2.5T"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"15K"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"8K"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx(F,{size:"lg",variant:"outline",asChild:!0,className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white w-full sm:w-auto justify-center",children:s.jsx(ge,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-primary to-secondary rounded-lg sm:rounded-xl",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(Kn,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-white mx-auto mb-4 sm:mb-6"}),s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-2",children:"Plus de 10 000 étudiants font déjà confiance à BOXETU pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[s.jsx(F,{size:"lg",variant:"secondary",asChild:!0,className:"w-full sm:w-auto",children:s.jsxs(ge,{to:"/auth?mode=signup",children:[s.jsx(et,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx(F,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary w-full sm:w-auto",asChild:!0,children:s.jsx(ge,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})})};function km(t,[e,r]){return Math.min(r,Math.max(e,t))}function fy(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Uae="VisuallyHidden",M3=p.forwardRef((t,e)=>s.jsx(De.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));M3.displayName=Uae;var zae=[" ","Enter","ArrowUp","ArrowDown"],Bae=[" ","Enter"],Cf="Select",[py,gy,qae]=gf(Cf),[bd,Ofe]=ps(Cf,[qae,md]),vy=md(),[Wae,Yo]=bd(Cf),[Hae,Gae]=bd(Cf),O3=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:v}=t,y=vy(e),[j,w]=p.useState(null),[x,b]=p.useState(null),[N,C]=p.useState(!1),P=fc(u),[T=!1,k]=hs({prop:n,defaultProp:i,onChange:a}),[D,E]=hs({prop:o,defaultProp:l,onChange:c}),A=p.useRef(null),R=j?v||!!j.closest("form"):!0,[S,V]=p.useState(new Set),U=Array.from(S).map(H=>H.props.value).join(";");return s.jsx(Q1,{...y,children:s.jsxs(Wae,{required:g,scope:e,trigger:j,onTriggerChange:w,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:C,contentId:ls(),value:D,onValueChange:E,open:T,onOpenChange:k,dir:P,triggerPointerDownPosRef:A,disabled:m,children:[s.jsx(py.Provider,{scope:e,children:s.jsx(Hae,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(H=>{V($=>new Set($).add(H))},[]),onNativeOptionRemove:p.useCallback(H=>{V($=>{const L=new Set($);return L.delete(H),L})},[]),children:r})}),R?s.jsxs(o5,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:D,onChange:H=>E(H.target.value),disabled:m,form:v,children:[D===void 0?s.jsx("option",{value:""}):null,Array.from(S)]},U):null]})})};O3.displayName=Cf;var L3="SelectTrigger",V3=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,a=vy(r),o=Yo(L3,r),l=o.disabled||n,c=Je(e,o.onTriggerChange),u=gy(r),d=p.useRef("touch"),[h,m,g]=l5(y=>{const j=u().filter(b=>!b.disabled),w=j.find(b=>b.value===o.value),x=c5(j,y,w);x!==void 0&&o.onValueChange(x.value)}),v=y=>{l||(o.onOpenChange(!0),g()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(Xx,{asChild:!0,...a,children:s.jsx(De.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":a5(o.value)?"":void 0,...i,ref:c,onClick:ve(i.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&v(y)}),onPointerDown:ve(i.onPointerDown,y=>{d.current=y.pointerType;const j=y.target;j.hasPointerCapture(y.pointerId)&&j.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:ve(i.onKeyDown,y=>{const j=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(j&&y.key===" ")&&zae.includes(y.key)&&(v(),y.preventDefault())})})})});V3.displayName=L3;var F3="SelectValue",$3=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...l}=t,c=Yo(F3,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Je(e,c.onValueNodeChange);return Lr(()=>{u(d)},[u,d]),s.jsx(De.span,{...l,ref:h,style:{pointerEvents:"none"},children:a5(c.value)?s.jsx(s.Fragment,{children:o}):a})});$3.displayName=F3;var Kae="SelectIcon",U3=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return s.jsx(De.span,{"aria-hidden":!0,...i,ref:e,children:n||"▼"})});U3.displayName=Kae;var Yae="SelectPortal",z3=t=>s.jsx(wf,{asChild:!0,...t});z3.displayName=Yae;var Zl="SelectContent",B3=p.forwardRef((t,e)=>{const r=Yo(Zl,t.__scopeSelect),[n,i]=p.useState();if(Lr(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?rd.createPortal(s.jsx(q3,{scope:t.__scopeSelect,children:s.jsx(py.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(W3,{...t,ref:e})});B3.displayName=Zl;var Vs=10,[q3,Qo]=bd(Zl),Qae="SelectContentImpl",W3=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:j,...w}=t,x=Yo(Zl,r),[b,N]=p.useState(null),[C,P]=p.useState(null),T=Je(e,Ne=>N(Ne)),[k,D]=p.useState(null),[E,A]=p.useState(null),R=gy(r),[S,V]=p.useState(!1),U=p.useRef(!1);p.useEffect(()=>{if(b)return ey(b)},[b]),Hx();const H=p.useCallback(Ne=>{const[Ze,...te]=R().map(le=>le.ref.current),[pe]=te.slice(-1),Q=document.activeElement;for(const le of Ne)if(le===Q||(le==null||le.scrollIntoView({block:"nearest"}),le===Ze&&C&&(C.scrollTop=0),le===pe&&C&&(C.scrollTop=C.scrollHeight),le==null||le.focus(),document.activeElement!==Q))return},[R,C]),$=p.useCallback(()=>H([k,b]),[H,k,b]);p.useEffect(()=>{S&&$()},[S,$]);const{onOpenChange:L,triggerPointerDownPosRef:W}=x;p.useEffect(()=>{if(b){let Ne={x:0,y:0};const Ze=pe=>{var Q,le;Ne={x:Math.abs(Math.round(pe.pageX)-(((Q=W.current)==null?void 0:Q.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((le=W.current)==null?void 0:le.y)??0))}},te=pe=>{Ne.x<=10&&Ne.y<=10?pe.preventDefault():b.contains(pe.target)||L(!1),document.removeEventListener("pointermove",Ze),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Ze),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ze),document.removeEventListener("pointerup",te,{capture:!0})}}},[b,L,W]),p.useEffect(()=>{const Ne=()=>L(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[L]);const[z,J]=l5(Ne=>{const Ze=R().filter(Q=>!Q.disabled),te=Ze.find(Q=>Q.ref.current===document.activeElement),pe=c5(Ze,Ne,te);pe&&setTimeout(()=>pe.ref.current.focus())}),oe=p.useCallback((Ne,Ze,te)=>{const pe=!U.current&&!te;(x.value!==void 0&&x.value===Ze||pe)&&(D(Ne),pe&&(U.current=!0))},[x.value]),Ce=p.useCallback(()=>b==null?void 0:b.focus(),[b]),tt=p.useCallback((Ne,Ze,te)=>{const pe=!U.current&&!te;(x.value!==void 0&&x.value===Ze||pe)&&A(Ne)},[x.value]),vt=n==="popper"?cj:H3,ct=vt===cj?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:j}:{};return s.jsx(q3,{scope:r,content:b,viewport:C,onViewportChange:P,itemRefCallback:oe,selectedItem:k,onItemLeave:Ce,itemTextRefCallback:tt,focusSelectedItem:$,selectedItemText:E,position:n,isPositioned:S,searchRef:z,children:s.jsx(bf,{as:_a,allowPinchZoom:!0,children:s.jsx(xf,{asChild:!0,trapped:x.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:ve(i,Ne=>{var Ze;(Ze=x.trigger)==null||Ze.focus({preventScroll:!0}),Ne.preventDefault()}),children:s.jsx(vf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(vt,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Ne=>Ne.preventDefault(),...w,...ct,onPlaced:()=>V(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ve(w.onKeyDown,Ne=>{const Ze=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!Ze&&Ne.key.length===1&&J(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let pe=R().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const Q=Ne.target,le=pe.indexOf(Q);pe=pe.slice(le+1)}setTimeout(()=>H(pe)),Ne.preventDefault()}})})})})})})});W3.displayName=Qae;var Xae="SelectItemAlignedPosition",H3=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,a=Yo(Zl,r),o=Qo(Zl,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Je(e,T=>d(T)),m=gy(r),g=p.useRef(!1),v=p.useRef(!0),{viewport:y,selectedItem:j,selectedItemText:w,focusSelectedItem:x}=o,b=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&y&&j&&w){const T=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),E=w.getBoundingClientRect();if(a.dir!=="rtl"){const Q=E.left-k.left,le=D.left-Q,q=T.left-le,Z=T.width+q,me=Math.max(Z,k.width),Ie=window.innerWidth-Vs,He=km(le,[Vs,Math.max(Vs,Ie-me)]);l.style.minWidth=Z+"px",l.style.left=He+"px"}else{const Q=k.right-E.right,le=window.innerWidth-D.right-Q,q=window.innerWidth-T.right-le,Z=T.width+q,me=Math.max(Z,k.width),Ie=window.innerWidth-Vs,He=km(le,[Vs,Math.max(Vs,Ie-me)]);l.style.minWidth=Z+"px",l.style.right=He+"px"}const A=m(),R=window.innerHeight-Vs*2,S=y.scrollHeight,V=window.getComputedStyle(u),U=parseInt(V.borderTopWidth,10),H=parseInt(V.paddingTop,10),$=parseInt(V.borderBottomWidth,10),L=parseInt(V.paddingBottom,10),W=U+H+S+L+$,z=Math.min(j.offsetHeight*5,W),J=window.getComputedStyle(y),oe=parseInt(J.paddingTop,10),Ce=parseInt(J.paddingBottom,10),tt=T.top+T.height/2-Vs,vt=R-tt,ct=j.offsetHeight/2,Ne=j.offsetTop+ct,Ze=U+H+Ne,te=W-Ze;if(Ze<=tt){const Q=A.length>0&&j===A[A.length-1].ref.current;l.style.bottom="0px";const le=u.clientHeight-y.offsetTop-y.offsetHeight,q=Math.max(vt,ct+(Q?Ce:0)+le+$),Z=Ze+q;l.style.height=Z+"px"}else{const Q=A.length>0&&j===A[0].ref.current;l.style.top="0px";const q=Math.max(tt,U+y.offsetTop+(Q?oe:0)+ct)+te;l.style.height=q+"px",y.scrollTop=Ze-tt+y.offsetTop}l.style.margin=`${Vs}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,l,u,y,j,w,a.dir,n]);Lr(()=>b(),[b]);const[N,C]=p.useState();Lr(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const P=p.useCallback(T=>{T&&v.current===!0&&(b(),x==null||x(),v.current=!1)},[b,x]);return s.jsx(Zae,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:P,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(De.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});H3.displayName=Xae;var Jae="SelectPopperPosition",cj=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Vs,...a}=t,o=vy(r);return s.jsx(X1,{...o,...a,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cj.displayName=Jae;var[Zae,wN]=bd(Zl,{}),uj="SelectViewport",G3=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,a=Qo(uj,r),o=wN(uj,r),l=Je(e,a.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(py.Slot,{scope:r,children:s.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ve(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const v=window.innerHeight-Vs*2,y=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),w=Math.max(y,j);if(w<v){const x=w+g,b=Math.min(v,x),N=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});G3.displayName=uj;var K3="SelectGroup",[eoe,toe]=bd(K3),roe=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=ls();return s.jsx(eoe,{scope:r,id:i,children:s.jsx(De.div,{role:"group","aria-labelledby":i,...n,ref:e})})});roe.displayName=K3;var Y3="SelectLabel",Q3=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=toe(Y3,r);return s.jsx(De.div,{id:i.id,...n,ref:e})});Q3.displayName=Y3;var Cv="SelectItem",[noe,X3]=bd(Cv),J3=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=t,l=Yo(Cv,r),c=Qo(Cv,r),u=l.value===n,[d,h]=p.useState(a??""),[m,g]=p.useState(!1),v=Je(e,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,n,i)}),y=ls(),j=p.useRef("touch"),w=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(noe,{scope:r,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:p.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(py.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:s.jsx(De.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:ve(o.onFocus,()=>g(!0)),onBlur:ve(o.onBlur,()=>g(!1)),onClick:ve(o.onClick,()=>{j.current!=="mouse"&&w()}),onPointerUp:ve(o.onPointerUp,()=>{j.current==="mouse"&&w()}),onPointerDown:ve(o.onPointerDown,x=>{j.current=x.pointerType}),onPointerMove:ve(o.onPointerMove,x=>{var b;j.current=x.pointerType,i?(b=c.onItemLeave)==null||b.call(c):j.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ve(o.onKeyDown,x=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&x.key===" "||(Bae.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});J3.displayName=Cv;var hh="SelectItemText",Z3=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...a}=t,o=Yo(hh,r),l=Qo(hh,r),c=X3(hh,r),u=Gae(hh,r),[d,h]=p.useState(null),m=Je(e,w=>h(w),c.onItemTextChange,w=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,w,c.value,c.disabled)}),g=d==null?void 0:d.textContent,v=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:j}=u;return Lr(()=>(y(v),()=>j(v)),[y,j,v]),s.jsxs(s.Fragment,{children:[s.jsx(De.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?rd.createPortal(a.children,o.valueNode):null]})});Z3.displayName=hh;var e5="SelectItemIndicator",t5=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return X3(e5,r).isSelected?s.jsx(De.span,{"aria-hidden":!0,...n,ref:e}):null});t5.displayName=e5;var dj="SelectScrollUpButton",r5=p.forwardRef((t,e)=>{const r=Qo(dj,t.__scopeSelect),n=wN(dj,t.__scopeSelect),[i,a]=p.useState(!1),o=Je(e,n.onScrollButtonChange);return Lr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(s5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});r5.displayName=dj;var hj="SelectScrollDownButton",n5=p.forwardRef((t,e)=>{const r=Qo(hj,t.__scopeSelect),n=wN(hj,t.__scopeSelect),[i,a]=p.useState(!1),o=Je(e,n.onScrollButtonChange);return Lr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(s5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});n5.displayName=hj;var s5=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,a=Qo("SelectScrollButton",r),o=p.useRef(null),l=gy(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Lr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(De.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ve(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ve(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ve(i.onPointerLeave,()=>{c()})})}),soe="SelectSeparator",i5=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return s.jsx(De.div,{"aria-hidden":!0,...n,ref:e})});i5.displayName=soe;var mj="SelectArrow",ioe=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=vy(r),a=Yo(mj,r),o=Qo(mj,r);return a.open&&o.position==="popper"?s.jsx(J1,{...i,...n,ref:e}):null});ioe.displayName=mj;function a5(t){return t===""||t===void 0}var o5=p.forwardRef((t,e)=>{const{value:r,...n}=t,i=p.useRef(null),a=Je(e,i),o=fy(r);return p.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&d){const h=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(h)}},[o,r]),s.jsx(M3,{asChild:!0,children:s.jsx("select",{...n,ref:a,defaultValue:r})})});o5.displayName="BubbleSelect";function l5(t){const e=Sr(t),r=p.useRef(""),n=p.useRef(0),i=p.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function c5(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=aoe(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function aoe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var ooe=O3,u5=V3,loe=$3,coe=U3,uoe=z3,d5=B3,doe=G3,h5=Q3,m5=J3,hoe=Z3,moe=t5,f5=r5,p5=n5,g5=i5;const dt=ooe,ht=loe,ot=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(u5,{ref:n,className:Oe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,s.jsx(coe,{asChild:!0,children:s.jsx(ete,{className:"h-4 w-4 opacity-50"})})]}));ot.displayName=u5.displayName;const v5=p.forwardRef(({className:t,...e},r)=>s.jsx(f5,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(ote,{})}));v5.displayName=f5.displayName;const x5=p.forwardRef(({className:t,...e},r)=>s.jsx(p5,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(PO,{})}));x5.displayName=p5.displayName;const lt=p.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>s.jsx(uoe,{children:s.jsxs(d5,{ref:i,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[s.jsx(v5,{}),s.jsx(doe,{className:Oe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(x5,{})]})}));lt.displayName=d5.displayName;const foe=p.forwardRef(({className:t,...e},r)=>s.jsx(h5,{ref:r,className:Oe("px-2 py-1.5 text-sm font-semibold",t),...e}));foe.displayName=h5.displayName;const ie=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(m5,{ref:n,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(moe,{children:s.jsx(oN,{className:"h-4 w-4"})})}),s.jsx(hoe,{children:e})]}));ie.displayName=m5.displayName;const poe=p.forwardRef(({className:t,...e},r)=>s.jsx(g5,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",t),...e}));poe.displayName=g5.displayName;var goe="Separator",iT="horizontal",voe=["horizontal","vertical"],y5=p.forwardRef((t,e)=>{const{decorative:r,orientation:n=iT,...i}=t,a=xoe(n)?n:iT,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(De.div,{"data-orientation":a,...l,...i,ref:e})});y5.displayName=goe;function xoe(t){return voe.includes(t)}var w5=y5;const ws=p.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>s.jsx(w5,{ref:i,decorative:r,orientation:e,className:Oe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));ws.displayName=w5.displayName;const sw=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:mc},{value:"vehicles",label:"Véhicules",icon:LD},{value:"real-estate",label:"Immobilier",icon:mi},{value:"fashion",label:"Mode",icon:$1},{value:"gaming",label:"Jeux & Jouets",icon:fQ},{value:"baby",label:"Bébé & Enfant",icon:rQ},{value:"business",label:"Équipement Pro",icon:Rh}],yoe=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],woe=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],boe=()=>{var w;const[t,e]=ux(),{listings:r,loading:n,hasMore:i,fetchListings:a,searchListings:o}=Ef(),[l,c]=p.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=p.useState("grid"),[h,m]=p.useState(!1);p.useEffect(()=>{const x={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(x),o(x)},[t,o]);const g=()=>{const x={...l};o(x);const b=new URLSearchParams;x.query&&b.set("q",x.query),x.category&&b.set("category",x.category),e(b)},v=(x,b)=>{const N={...l,[x]:b};c(N)},y=()=>{a(l,!1)},j=()=>{const x={query:"",sortBy:"date"};c(x),o(x),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:x=>v("query",x.target.value),onKeyPress:x=>x.key==="Enter"&&g(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{onClick:g,className:"whitespace-nowrap",children:[s.jsx(Er,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(F,{variant:"outline",onClick:()=>m(!h),className:"lg:hidden",children:[s.jsx($x,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:sw.slice(1,6).map(x=>{const b=x.icon;return s.jsxs(F,{variant:l.category===x.value?"default":"outline",size:"sm",onClick:()=>v("category",l.category===x.value?"":x.value),className:"flex items-center gap-2",children:[b&&s.jsx(b,{className:"w-4 h-4"}),x.label]},x.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${h?"block":"hidden lg:block"}`,children:s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(F,{variant:"ghost",size:"sm",onClick:j,children:"Effacer"})]})}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(dt,{value:l.category||"all",onValueChange:x=>v("category",x==="all"?"":x),children:[s.jsx(ot,{children:s.jsx(ht,{})}),s.jsx(lt,{children:sw.map(x=>{const b=x.icon;return s.jsx(ie,{value:x.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[b&&s.jsx(b,{className:"w-4 h-4"}),x.label]})},x.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:x=>v("minPrice",x.target.value?parseInt(x.target.value):void 0)}),s.jsx(ye,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:x=>v("maxPrice",x.target.value?parseInt(x.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:yoe.map(x=>{var b;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((b=l.condition)==null?void 0:b.includes(x.value))||!1,onChange:N=>{const C=l.condition||[],P=N.target.checked?[...C,x.value]:C.filter(T=>T!==x.value);v("condition",P.length>0?P:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:x.label})]},x.value)})})]}),s.jsx(F,{onClick:g,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[r.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&s.jsxs(Te,{variant:"secondary",children:['"',l.query,'"']}),l.category&&s.jsx(Te,{variant:"secondary",children:(w=sw.find(x=>x.value===l.category))==null?void 0:w.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(dt,{value:l.sortBy||"date",onValueChange:x=>v("sortBy",x),children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{})}),s.jsx(lt,{children:woe.map(x=>s.jsx(ie,{value:x.value,children:x.label},x.value))})]}),s.jsx(ws,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(F,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(BD,{className:"w-4 h-4"})}),s.jsx(F,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(HD,{className:"w-4 h-4"})})]})]})]}),n&&r.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((x,b)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},b))}):r.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:r.map(x=>s.jsx(Cm,{listing:x},x.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(F,{onClick:y,disabled:n,variant:"outline",size:"lg",children:n?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx(F,{onClick:j,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var bN="Dialog",[b5,Lfe]=ps(bN),[joe,ai]=b5(bN),j5=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=hs({prop:n,defaultProp:i,onChange:a});return s.jsx(joe,{scope:e,triggerRef:l,contentRef:c,contentId:ls(),titleId:ls(),descriptionId:ls(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};j5.displayName=bN;var _5="DialogTrigger",N5=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ai(_5,r),a=Je(e,i.triggerRef);return s.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":NN(i.open),...n,ref:a,onClick:ve(t.onClick,i.onOpenToggle)})});N5.displayName=_5;var jN="DialogPortal",[_oe,S5]=b5(jN,{forceMount:void 0}),E5=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,a=ai(jN,e);return s.jsx(_oe,{scope:e,forceMount:r,children:p.Children.map(n,o=>s.jsx(Zr,{present:r||a.open,children:s.jsx(wf,{asChild:!0,container:i,children:o})}))})};E5.displayName=jN;var kv="DialogOverlay",C5=p.forwardRef((t,e)=>{const r=S5(kv,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=ai(kv,t.__scopeDialog);return a.modal?s.jsx(Zr,{present:n||a.open,children:s.jsx(Noe,{...i,ref:e})}):null});C5.displayName=kv;var Noe=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ai(kv,r);return s.jsx(bf,{as:_a,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(De.div,{"data-state":NN(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),ec="DialogContent",k5=p.forwardRef((t,e)=>{const r=S5(ec,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=ai(ec,t.__scopeDialog);return s.jsx(Zr,{present:n||a.open,children:a.modal?s.jsx(Soe,{...i,ref:e}):s.jsx(Eoe,{...i,ref:e})})});k5.displayName=ec;var Soe=p.forwardRef((t,e)=>{const r=ai(ec,t.__scopeDialog),n=p.useRef(null),i=Je(e,r.contentRef,n);return p.useEffect(()=>{const a=n.current;if(a)return ey(a)},[]),s.jsx(T5,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ve(t.onFocusOutside,a=>a.preventDefault())})}),Eoe=p.forwardRef((t,e)=>{const r=ai(ec,t.__scopeDialog),n=p.useRef(!1),i=p.useRef(!1);return s.jsx(T5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),T5=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=ai(ec,r),c=p.useRef(null),u=Je(e,c);return Hx(),s.jsxs(s.Fragment,{children:[s.jsx(xf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(vf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":NN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Coe,{titleId:l.titleId}),s.jsx(Toe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),_N="DialogTitle",I5=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ai(_N,r);return s.jsx(De.h2,{id:i.titleId,...n,ref:e})});I5.displayName=_N;var A5="DialogDescription",P5=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ai(A5,r);return s.jsx(De.p,{id:i.descriptionId,...n,ref:e})});P5.displayName=A5;var R5="DialogClose",D5=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ai(R5,r);return s.jsx(De.button,{type:"button",...n,ref:e,onClick:ve(t.onClick,()=>i.onOpenChange(!1))})});D5.displayName=R5;function NN(t){return t?"open":"closed"}var M5="DialogTitleWarning",[Vfe,O5]=fX(M5,{contentName:ec,titleName:_N,docsSlug:"dialog"}),Coe=({titleId:t})=>{const e=O5(M5),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},koe="DialogDescriptionWarning",Toe=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${O5(koe).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Ioe=j5,Aoe=N5,Poe=E5,L5=C5,V5=k5,F5=I5,$5=P5,Roe=D5;const ua=Ioe,ju=Aoe,Doe=Poe,U5=p.forwardRef(({className:t,...e},r)=>s.jsx(L5,{ref:r,className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));U5.displayName=L5.displayName;const Ei=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(Doe,{children:[s.jsx(U5,{}),s.jsxs(V5,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,s.jsxs(Roe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(cte,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ei.displayName=V5.displayName;const da=({className:t,...e})=>s.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});da.displayName="DialogHeader";const pg=({className:t,...e})=>s.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});pg.displayName="DialogFooter";const Ci=p.forwardRef(({className:t,...e},r)=>s.jsx(F5,{ref:r,className:Oe("text-lg font-semibold leading-none tracking-tight",t),...e}));Ci.displayName=F5.displayName;const _u=p.forwardRef(({className:t,...e},r)=>s.jsx($5,{ref:r,className:Oe("text-sm text-muted-foreground",t),...e}));_u.displayName=$5.displayName;const Cs=p.forwardRef(({className:t,...e},r)=>s.jsx("textarea",{className:Oe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Cs.displayName="Textarea";var Moe="Label",z5=p.forwardRef((t,e)=>s.jsx(De.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));z5.displayName=Moe;var B5=z5;const Ooe=Wx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ce=p.forwardRef(({className:t,...e},r)=>s.jsx(B5,{ref:r,className:Oe(Ooe(),t),...e}));ce.displayName=B5.displayName;const Loe=Wx("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),It=p.forwardRef(({className:t,variant:e,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Oe(Loe({variant:e}),t),...r}));It.displayName="Alert";const Voe=p.forwardRef(({className:t,...e},r)=>s.jsx("h5",{ref:r,className:Oe("mb-1 font-medium leading-none tracking-tight",t),...e}));Voe.displayName="AlertTitle";const At=p.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:Oe("text-sm [&_p]:leading-relaxed",t),...e}));At.displayName="AlertDescription";var qe=function(){return qe=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qe.apply(this,arguments)};function Foe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function q5(t,e,r){for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function kf(t){return t.mode==="multiple"}function Tf(t){return t.mode==="range"}function xy(t){return t.mode==="single"}var $oe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Uoe(t,e){return Mr(t,"LLLL y",e)}function zoe(t,e){return Mr(t,"d",e)}function Boe(t,e){return Mr(t,"LLLL",e)}function qoe(t){return"".concat(t)}function Woe(t,e){return Mr(t,"cccccc",e)}function Hoe(t,e){return Mr(t,"yyyy",e)}var Goe=Object.freeze({__proto__:null,formatCaption:Uoe,formatDay:zoe,formatMonthCaption:Boe,formatWeekNumber:qoe,formatWeekdayName:Woe,formatYearCaption:Hoe}),Koe=function(t,e,r){return Mr(t,"do MMMM (EEEE)",r)},Yoe=function(){return"Month: "},Qoe=function(){return"Go to next month"},Xoe=function(){return"Go to previous month"},Joe=function(t,e){return Mr(t,"cccc",e)},Zoe=function(t){return"Week n. ".concat(t)},ele=function(){return"Year: "},tle=Object.freeze({__proto__:null,labelDay:Koe,labelMonthDropdown:Yoe,labelNext:Qoe,labelPrevious:Xoe,labelWeekNumber:Zoe,labelWeekday:Joe,labelYearDropdown:ele});function rle(){var t="buttons",e=$oe,r=xN,n={},i={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:Goe,labels:tle,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function nle(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return n?a=Yn(n):e&&(a=new Date(e,0,1)),i?o=my(i):r&&(o=new Date(r,11,31)),{fromDate:a?qu(a):void 0,toDate:o?qu(o):void 0}}var W5=p.createContext(void 0);function sle(t){var e,r=t.initialProps,n=rle(),i=nle(r),a=i.fromDate,o=i.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(xy(r)||kf(r)||Tf(r))&&(c=r.onSelect);var u=qe(qe(qe({},n),r),{captionLayout:l,classNames:qe(qe({},n.classNames),r.classNames),components:qe({},r.components),formatters:qe(qe({},n.formatters),r.formatters),fromDate:a,labels:qe(qe({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:qe(qe({},n.modifiers),r.modifiers),modifiersClassNames:qe(qe({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:qe(qe({},n.styles),r.styles),toDate:o});return s.jsx(W5.Provider,{value:u,children:t.children})}function Yt(){var t=p.useContext(W5);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function H5(t){var e=Yt(),r=e.locale,n=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function ile(t){return s.jsx("svg",qe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function G5(t){var e,r,n=t.onChange,i=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=Yt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:ile;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:n,children:a}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function ale(t){var e,r=Yt(),n=r.fromDate,i=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var h=[];if(Uie(n,i))for(var m=Yn(n),g=n.getMonth();g<=i.getMonth();g++)h.push(nw(m,g));else for(var m=Yn(new Date),g=0;g<=11;g++)h.push(nw(m,g));var v=function(j){var w=Number(j.target.value),x=nw(Yn(t.displayMonth),w);t.onChange(x)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:G5;return s.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(j){return s.jsx("option",{value:j.getMonth(),children:l(j,{locale:o})},j.getMonth())})})}function ole(t){var e,r=t.displayMonth,n=Yt(),i=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var g=i.getFullYear(),v=a.getFullYear(),y=g;y<=v;y++)m.push(rT(S3(new Date),y));var j=function(x){var b=rT(Yn(r),Number(x.target.value));t.onChange(b)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:G5;return s.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:j,value:r.getFullYear(),caption:d(r,{locale:o}),children:m.map(function(x){return s.jsx("option",{value:x.getFullYear(),children:d(x,{locale:o})},x.getFullYear())})})}function lle(t,e){var r=p.useState(t),n=r[0],i=r[1],a=e===void 0?n:e;return[a,i]}function cle(t){var e=t.month,r=t.defaultMonth,n=t.today,i=e||r||n||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Hu(a,i)<0){var u=-1*(c-1);i=ri(a,u)}return o&&Hu(i,o)<0&&(i=o),Yn(i)}function ule(){var t=Yt(),e=cle(t),r=lle(e,t.month),n=r[0],i=r[1],a=function(o){var l;if(!t.disableNavigation){var c=Yn(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,a]}function dle(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,i=Yn(t),a=Yn(ri(i,n)),o=Hu(a,i),l=[],c=0;c<o;c++){var u=ri(i,c);l.push(u)}return r&&(l=l.reverse()),l}function hle(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Yn(t);if(!r)return ri(l,o);var c=Hu(r,t);if(!(c<a))return ri(l,o)}}function mle(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Yn(t);if(!r)return ri(l,-o);var c=Hu(l,r);if(!(c<=0))return ri(l,-o)}}var K5=p.createContext(void 0);function fle(t){var e=Yt(),r=ule(),n=r[0],i=r[1],a=dle(n,e),o=hle(n,e),l=mle(n,e),c=function(h){return a.some(function(m){return yN(h,m)})},u=function(h,m){c(h)||(m&&P3(h,m)?i(ri(h,1+e.numberOfMonths*-1)):i(h))},d={currentMonth:n,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(K5.Provider,{value:d,children:t.children})}function If(){var t=p.useContext(K5);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function aT(t){var e,r=Yt(),n=r.classNames,i=r.styles,a=r.components,o=If().goToMonth,l=function(d){o(ri(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:H5,u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(ale,{onChange:l,displayMonth:t.displayMonth}),s.jsx(ole,{onChange:l,displayMonth:t.displayMonth})]})}function ple(t){return s.jsx("svg",qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function gle(t){return s.jsx("svg",qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Tv=p.forwardRef(function(t,e){var r=Yt(),n=r.classNames,i=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var o=a.join(" "),l=qe(qe({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),s.jsx("button",qe({},t,{ref:e,type:"button",className:o,style:l}))});function vle(t){var e,r,n=Yt(),i=n.dir,a=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var m=u(t.previousMonth,{locale:a}),g=[o.nav_button,o.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),j=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:gle,w=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:ple;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&s.jsx(Tv,{name:"previous-month","aria-label":m,className:g,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(j,{className:o.nav_icon,style:l.nav_icon}):s.jsx(w,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&s.jsx(Tv,{name:"next-month","aria-label":v,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(w,{className:o.nav_icon,style:l.nav_icon}):s.jsx(j,{className:o.nav_icon,style:l.nav_icon})})]})}function oT(t){var e=Yt().numberOfMonths,r=If(),n=r.previousMonth,i=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(v){return yN(t.displayMonth,v)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&a(n)},g=function(){i&&a(i)};return s.jsx(vle,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:i,previousMonth:n,onPreviousClick:m,onNextClick:g})}function xle(t){var e,r=Yt(),n=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:H5,u;return i?u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=s.jsx(aT,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(aT,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(oT,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(oT,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:n.caption,style:a.caption,children:u})}function yle(t){var e=Yt(),r=e.footer,n=e.styles,i=e.classNames.tfoot;return r?s.jsx("tfoot",{className:i,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function wle(t,e,r){for(var n=r?Jl(new Date):Pi(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=bn(n,a);i.push(o)}return i}function ble(){var t=Yt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=wle(i,a,o);return s.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return s.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},h)})]})}function jle(){var t,e=Yt(),r=e.classNames,n=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:ble;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(a,{})})}function _le(t){var e=Yt(),r=e.locale,n=e.formatters.formatDay;return s.jsx(s.Fragment,{children:n(t.date,{locale:r})})}var SN=p.createContext(void 0);function Nle(t){if(!kf(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(SN.Provider,{value:e,children:t.children})}return s.jsx(Sle,{initialProps:t.initialProps,children:t.children})}function Sle(t){var e=t.initialProps,r=t.children,n=e.selected,i=e.min,a=e.max,o=function(u,d,h){var m,g;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var v=!!(d.selected&&i&&(n==null?void 0:n.length)===i);if(!v){var y=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var j=n?q5([],n):[];if(d.selected){var w=j.findIndex(function(x){return zn(u,x)});j.splice(w,1)}else j.push(u);(g=e.onSelect)===null||g===void 0||g.call(e,j,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,h=n.some(function(m){return zn(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(SN.Provider,{value:c,children:r})}function EN(){var t=p.useContext(SN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Ele(t,e){var r=e||{},n=r.from,i=r.to;return n&&i?zn(i,t)&&zn(n,t)?void 0:zn(i,t)?{from:i,to:void 0}:zn(n,t)?void 0:lj(n,t)?{from:t,to:i}:{from:n,to:t}:i?lj(t,i)?{from:i,to:t}:{from:t,to:i}:n?P3(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var CN=p.createContext(void 0);function Cle(t){if(!Tf(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(CN.Provider,{value:e,children:t.children})}return s.jsx(kle,{initialProps:t.initialProps,children:t.children})}function kle(t){var e=t.initialProps,r=t.children,n=e.selected,i=n||{},a=i.from,o=i.to,l=e.min,c=e.max,u=function(g,v,y){var j,w;(j=e.onDayClick)===null||j===void 0||j.call(e,g,v,y);var x=Ele(g,n);(w=e.onSelect)===null||w===void 0||w.call(e,x,g,v,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],zn(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:rw(a,l-1),before:bn(a,l-1)}),a&&o&&d.disabled.push({after:a,before:bn(a,l-1)}),!a&&o&&d.disabled.push({after:rw(o,l-1),before:bn(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:bn(a,-c+1)}),d.disabled.push({after:bn(a,c-1)})),a&&o){var h=xi(o,a)+1,m=c-h;d.disabled.push({before:rw(a,m)}),d.disabled.push({after:bn(o,m)})}!a&&o&&(d.disabled.push({before:bn(o,-c+1)}),d.disabled.push({after:bn(o,c-1)}))}return s.jsx(CN.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function kN(){var t=p.useContext(CN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function gg(t){return Array.isArray(t)?q5([],t):t!==void 0?[t]:[]}function Tle(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],i=r[1];e[n]=gg(i)}),e}var ni;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ni||(ni={}));var Ile=ni.Selected,zi=ni.Disabled,Ale=ni.Hidden,Ple=ni.Today,iw=ni.RangeEnd,aw=ni.RangeMiddle,ow=ni.RangeStart,Rle=ni.Outside;function Dle(t,e,r){var n,i=(n={},n[Ile]=gg(t.selected),n[zi]=gg(t.disabled),n[Ale]=gg(t.hidden),n[Ple]=[t.today],n[iw]=[],n[aw]=[],n[ow]=[],n[Rle]=[],n);return t.fromDate&&i[zi].push({before:t.fromDate}),t.toDate&&i[zi].push({after:t.toDate}),kf(t)?i[zi]=i[zi].concat(e.modifiers[zi]):Tf(t)&&(i[zi]=i[zi].concat(r.modifiers[zi]),i[ow]=r.modifiers[ow],i[aw]=r.modifiers[aw],i[iw]=r.modifiers[iw]),i}var Y5=p.createContext(void 0);function Mle(t){var e=Yt(),r=EN(),n=kN(),i=Dle(e,r,n),a=Tle(e.modifiers),o=qe(qe({},i),a);return s.jsx(Y5.Provider,{value:o,children:t.children})}function Q5(){var t=p.useContext(Y5);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Ole(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Lle(t){return!!(t&&typeof t=="object"&&"from"in t)}function Vle(t){return!!(t&&typeof t=="object"&&"after"in t)}function Fle(t){return!!(t&&typeof t=="object"&&"before"in t)}function $le(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Ule(t,e){var r,n=e.from,i=e.to;if(n&&i){var a=xi(i,n)<0;a&&(r=[i,n],n=r[0],i=r[1]);var o=xi(t,n)>=0&&xi(i,t)>=0;return o}return i?zn(i,t):n?zn(n,t):!1}function zle(t){return gN(t)}function Ble(t){return Array.isArray(t)&&t.every(gN)}function qle(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(zle(r))return zn(t,r);if(Ble(r))return r.includes(t);if(Lle(r))return Ule(t,r);if($le(r))return r.dayOfWeek.includes(t.getDay());if(Ole(r)){var n=xi(r.before,t),i=xi(r.after,t),a=n>0,o=i<0,l=lj(r.before,r.after);return l?o&&a:a||o}return Vle(r)?xi(t,r.after)>0:Fle(r)?xi(r.before,t)>0:typeof r=="function"?r(t):!1})}function TN(t,e,r){var n=Object.keys(e).reduce(function(a,o){var l=e[o];return qle(t,l)&&a.push(o),a},[]),i={};return n.forEach(function(a){return i[a]=!0}),r&&!yN(t,r)&&(i.outside=!0),i}function Wle(t,e){for(var r=Yn(t[0]),n=my(t[t.length-1]),i,a,o=r;o<=n;){var l=TN(o,e),c=!l.disabled&&!l.hidden;if(!c){o=bn(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=bn(o,1)}return a||i}var Hle=365;function X5(t,e){var r=e.moveBy,n=e.direction,i=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,h=i.locale,m={day:bn,week:oj,month:ri,year:Ise,startOfWeek:function(j){return i.ISOWeek?Jl(j):Pi(j,{locale:h,weekStartsOn:c})},endOfWeek:function(j){return i.ISOWeek?E3(j):vN(j,{locale:h,weekStartsOn:c})}},g=m[r](t,n==="after"?1:-1);n==="before"&&u?g=Ase([u,g]):n==="after"&&d&&(g=Pse([d,g]));var v=!0;if(a){var y=TN(g,a);v=!y.disabled&&!y.hidden}return v?g:l.count>Hle?l.lastFocused:X5(g,{moveBy:r,direction:n,context:i,modifiers:a,retry:qe(qe({},l),{count:l.count+1})})}var J5=p.createContext(void 0);function Gle(t){var e=If(),r=Q5(),n=p.useState(),i=n[0],a=n[1],o=p.useState(),l=o[0],c=o[1],u=Wle(e.displayMonths,r),d=i??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(i),a(void 0)},m=function(j){a(j)},g=Yt(),v=function(j,w){if(i){var x=X5(i,{moveBy:j,direction:w,context:g,modifiers:r});zn(i,x)||(e.goToDate(x,i),m(x))}},y={focusedDay:i,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return s.jsx(J5.Provider,{value:y,children:t.children})}function IN(){var t=p.useContext(J5);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Kle(t,e){var r=Q5(),n=TN(t,r,e);return n}var AN=p.createContext(void 0);function Yle(t){if(!xy(t.initialProps)){var e={selected:void 0};return s.jsx(AN.Provider,{value:e,children:t.children})}return s.jsx(Qle,{initialProps:t.initialProps,children:t.children})}function Qle(t){var e=t.initialProps,r=t.children,n=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},i={selected:e.selected,onDayClick:n};return s.jsx(AN.Provider,{value:i,children:r})}function Z5(){var t=p.useContext(AN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Xle(t,e){var r=Yt(),n=Z5(),i=EN(),a=kN(),o=IN(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,m=o.focus,g=o.focusMonthBefore,v=o.focusMonthAfter,y=o.focusYearBefore,j=o.focusYearAfter,w=o.focusStartOfWeek,x=o.focusEndOfWeek,b=function($){var L,W,z,J;xy(r)?(L=n.onDayClick)===null||L===void 0||L.call(n,t,e,$):kf(r)?(W=i.onDayClick)===null||W===void 0||W.call(i,t,e,$):Tf(r)?(z=a.onDayClick)===null||z===void 0||z.call(a,t,e,$):(J=r.onDayClick)===null||J===void 0||J.call(r,t,e,$)},N=function($){var L;m(t),(L=r.onDayFocus)===null||L===void 0||L.call(r,t,e,$)},C=function($){var L;h(),(L=r.onDayBlur)===null||L===void 0||L.call(r,t,e,$)},P=function($){var L;(L=r.onDayMouseEnter)===null||L===void 0||L.call(r,t,e,$)},T=function($){var L;(L=r.onDayMouseLeave)===null||L===void 0||L.call(r,t,e,$)},k=function($){var L;(L=r.onDayPointerEnter)===null||L===void 0||L.call(r,t,e,$)},D=function($){var L;(L=r.onDayPointerLeave)===null||L===void 0||L.call(r,t,e,$)},E=function($){var L;(L=r.onDayTouchCancel)===null||L===void 0||L.call(r,t,e,$)},A=function($){var L;(L=r.onDayTouchEnd)===null||L===void 0||L.call(r,t,e,$)},R=function($){var L;(L=r.onDayTouchMove)===null||L===void 0||L.call(r,t,e,$)},S=function($){var L;(L=r.onDayTouchStart)===null||L===void 0||L.call(r,t,e,$)},V=function($){var L;(L=r.onDayKeyUp)===null||L===void 0||L.call(r,t,e,$)},U=function($){var L;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),u();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),d();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?y():g();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?j():v();break;case"Home":$.preventDefault(),$.stopPropagation(),w();break;case"End":$.preventDefault(),$.stopPropagation(),x();break}(L=r.onDayKeyDown)===null||L===void 0||L.call(r,t,e,$)},H={onClick:b,onFocus:N,onBlur:C,onKeyDown:U,onKeyUp:V,onMouseEnter:P,onMouseLeave:T,onPointerEnter:k,onPointerLeave:D,onTouchCancel:E,onTouchEnd:A,onTouchMove:R,onTouchStart:S};return H}function Jle(){var t=Yt(),e=Z5(),r=EN(),n=kN(),i=xy(t)?e.selected:kf(t)?r.selected:Tf(t)?n.selected:void 0;return i}function Zle(t){return Object.values(ni).includes(t)}function ece(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var i=t.modifiersClassNames[n];if(i)r.push(i);else if(Zle(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function tce(t,e){var r=qe({},t.styles.day);return Object.keys(e).forEach(function(n){var i;r=qe(qe({},r),(i=t.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function rce(t,e,r){var n,i,a,o=Yt(),l=IN(),c=Kle(t,e),u=Xle(t,c),d=Jle(),h=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var P;c.outside||l.focusedDay&&h&&zn(l.focusedDay,t)&&((P=r.current)===null||P===void 0||P.focus())},[l.focusedDay,t,r,h,c.outside]);var m=ece(o,c).join(" "),g=tce(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:_le,j=s.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),w={style:g,className:m,children:j,role:"gridcell"},x=l.focusTarget&&zn(l.focusTarget,t)&&!c.outside,b=l.focusedDay&&zn(l.focusedDay,t),N=qe(qe(qe({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||x?0:-1,n)),u),C={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:N,divProps:w};return C}function nce(t){var e=p.useRef(null),r=rce(t.date,t.displayMonth,e);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Tv,qe({name:"day",ref:e},r.buttonProps)):s.jsx("div",qe({},r.divProps))}function sce(t){var e=t.number,r=t.dates,n=Yt(),i=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(g){i(e,r,g)};return s.jsx(Tv,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function ice(t){var e,r,n=Yt(),i=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:nce,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:sce,d;return o&&(d=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(u,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(h){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:t.displayMonth,date:h})},Vie(h))})]})}function lT(t,e,r){for(var n=r!=null&&r.ISOWeek?E3(e):vN(e,r),i=r!=null&&r.ISOWeek?Jl(t):Pi(t,r),a=xi(n,i),o=[],l=0;l<=a;l++)o.push(bn(i,l));var c=o.reduce(function(u,d){var h=r!=null&&r.ISOWeek?k3(d):I3(d,r),m=u.find(function(g){return g.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function ace(t,e){var r=lT(Yn(t),my(t),e);if(e!=null&&e.useFixedWeeks){var n=$ie(t,e);if(n<6){var i=r[r.length-1],a=i.dates[i.dates.length-1],o=oj(a,6-n),l=lT(oj(a,1),o,e);r.push.apply(r,l)}}return r}function oce(t){var e,r,n,i=Yt(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,h=i.weekStartsOn,m=i.firstWeekContainsDate,g=i.ISOWeek,v=ace(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:g,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),y=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:jle,j=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:ice,w=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:yle;return s.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&s.jsx(y,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(x){return s.jsx(j,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),s.jsx(w,{displayMonth:t.displayMonth})]})}function lce(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var cce=lce()?p.useLayoutEffect:p.useEffect,lw=!1,uce=0;function cT(){return"react-day-picker-".concat(++uce)}function dce(t){var e,r=t??(lw?cT():null),n=p.useState(r),i=n[0],a=n[1];return cce(function(){i===null&&a(cT())},[]),p.useEffect(function(){lw===!1&&(lw=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function hce(t){var e,r,n=Yt(),i=n.dir,a=n.classNames,o=n.styles,l=n.components,c=If().displayMonths,u=dce(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],m=o.month,g=t.displayIndex===0,v=t.displayIndex===c.length-1,y=!g&&!v;i==="rtl"&&(e=[g,v],v=e[0],g=e[1]),g&&(h.push(a.caption_start),m=qe(qe({},m),o.caption_start)),v&&(h.push(a.caption_end),m=qe(qe({},m),o.caption_end)),y&&(h.push(a.caption_between),m=qe(qe({},m),o.caption_between));var j=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:xle;return s.jsxs("div",{className:h.join(" "),style:m,children:[s.jsx(j,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(oce,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function mce(t){var e=Yt(),r=e.classNames,n=e.styles;return s.jsx("div",{className:r.months,style:n.months,children:t.children})}function fce(t){var e,r,n=t.initialProps,i=Yt(),a=IN(),o=If(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var h=qe(qe({},i.styles.root),i.style),m=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,y){var j;return qe(qe({},v),(j={},j[y]=n[y],j))},{}),g=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:mce;return s.jsx("div",qe({className:d.join(" "),style:h,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:s.jsx(g,{children:o.displayMonths.map(function(v,y){return s.jsx(hce,{displayIndex:y,displayMonth:v},y)})})}))}function pce(t){var e=t.children,r=Foe(t,["children"]);return s.jsx(sle,{initialProps:r,children:s.jsx(fle,{children:s.jsx(Yle,{initialProps:r,children:s.jsx(Nle,{initialProps:r,children:s.jsx(Cle,{initialProps:r,children:s.jsx(Mle,{children:s.jsx(Gle,{children:e})})})})})})})}function gce(t){return s.jsx(pce,qe({},t,{children:s.jsx(fce,{initialProps:t})}))}function eL({className:t,classNames:e,showOutsideDays:r=!0,...n}){return s.jsx(gce,{showOutsideDays:r,className:Oe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Oe(Bb({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Oe("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Oe(Bb({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(ste,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(RO,{className:"h-4 w-4"})},...n})}eL.displayName="Calendar";var PN="Popover",[tL,Ffe]=ps(PN,[md]),Af=md(),[vce,Xo]=tL(PN),rL=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=Af(e),c=p.useRef(null),[u,d]=p.useState(!1),[h=!1,m]=hs({prop:n,defaultProp:i,onChange:a});return s.jsx(Q1,{...l,children:s.jsx(vce,{scope:e,contentId:ls(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:r})})};rL.displayName=PN;var nL="PopoverAnchor",xce=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Xo(nL,r),a=Af(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Xx,{...a,...n,ref:e})});xce.displayName=nL;var sL="PopoverTrigger",iL=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Xo(sL,r),a=Af(r),o=Je(e,i.triggerRef),l=s.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":uL(i.open),...n,ref:o,onClick:ve(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Xx,{asChild:!0,...a,children:l})});iL.displayName=sL;var RN="PopoverPortal",[yce,wce]=tL(RN,{forceMount:void 0}),aL=t=>{const{__scopePopover:e,forceMount:r,children:n,container:i}=t,a=Xo(RN,e);return s.jsx(yce,{scope:e,forceMount:r,children:s.jsx(Zr,{present:r||a.open,children:s.jsx(wf,{asChild:!0,container:i,children:n})})})};aL.displayName=RN;var Gu="PopoverContent",oL=p.forwardRef((t,e)=>{const r=wce(Gu,t.__scopePopover),{forceMount:n=r.forceMount,...i}=t,a=Xo(Gu,t.__scopePopover);return s.jsx(Zr,{present:n||a.open,children:a.modal?s.jsx(bce,{...i,ref:e}):s.jsx(jce,{...i,ref:e})})});oL.displayName=Gu;var bce=p.forwardRef((t,e)=>{const r=Xo(Gu,t.__scopePopover),n=p.useRef(null),i=Je(e,n),a=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return ey(o)},[]),s.jsx(bf,{as:_a,allowPinchZoom:!0,children:s.jsx(lL,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),jce=p.forwardRef((t,e)=>{const r=Xo(Gu,t.__scopePopover),n=p.useRef(!1),i=p.useRef(!1);return s.jsx(lL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),lL=p.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=Xo(Gu,r),g=Af(r);return Hx(),s.jsx(xf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(vf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(X1,{"data-state":uL(m.open),role:"dialog",id:m.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),cL="PopoverClose",_ce=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Xo(cL,r);return s.jsx(De.button,{type:"button",...n,ref:e,onClick:ve(t.onClick,()=>i.onOpenChange(!1))})});_ce.displayName=cL;var Nce="PopoverArrow",Sce=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=Af(r);return s.jsx(J1,{...i,...n,ref:e})});Sce.displayName=Nce;function uL(t){return t?"open":"closed"}var Ece=rL,Cce=iL,kce=aL,dL=oL;const Tce=Ece,Ice=Cce,hL=p.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},i)=>s.jsx(kce,{children:s.jsx(dL,{ref:i,align:e,sideOffset:r,className:Oe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));hL.displayName=dL.displayName;const Mc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},yy=fd((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async r=>{try{t({loading:!0});const n=e().generateSecurityCode(),i={...r,securityCode:n,status:"pending",createdAt:dr(),updatedAt:dr()},a=await Bl(Nt(fe,"paymentRequests"),i),o={id:a.id,...r,securityCode:n,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),ne.success("Demande de paiement créée avec succès"),a.id}catch(n){throw console.error("Erreur lors de la création de la demande de paiement:",n),ne.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),n}},updatePaymentStatus:async(r,n,i)=>{try{const a={status:n,updatedAt:dr()};i&&(a.notes=i),await mr(ze(fe,"paymentRequests",r),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===r?{...c,status:n,notes:i||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};ne.success(o[n]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),ne.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async r=>{if(r)try{t({loading:!0});const n=$t(Nt(fe,"paymentRequests"),Bt("buyerId","==",r),Ss(50)),i=$t(Nt(fe,"paymentRequests"),Bt("sellerId","==",r),Ss(50)),[a,o]=await Promise.all([Zt(n),Zt(i)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:Mc(u.createdAt),updatedAt:Mc(u.updatedAt),meetingDateTime:u.meetingDateTime?Mc(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:Mc(u.createdAt),updatedAt:Mc(u.updatedAt),meetingDateTime:u.meetingDateTime?Mc(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(n){console.error("Erreur lors du chargement des demandes de paiement:",n),ne.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(r,n)=>{switch(r){case"cash":return!0;case"transfer":return n.bankDetails&&n.bankDetails.iban&&n.bankDetails.accountName;case"paypal":return n.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.paypalEmail);case"lydia":return n.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(n.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(r,n)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===n);return a?r*a.fees/100:0},getPaymentInstructions:(r,n)=>{var a,o,l;const i=[];switch(r){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${n.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${n.securityCode}`),(a=n.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${n.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${n.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${n.securityCode}`),(o=n.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${n.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${n.securityCode}`),(l=n.paymentDetails)!=null&&l.lydiaPhone&&i.push(`📞 Numéro Lydia : ${n.paymentDetails.lydiaPhone}`);break}return i}}));var mL="https://js.stripe.com/v3",Ace=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,uT="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Pce=function(){for(var e=document.querySelectorAll('script[src^="'.concat(mL,'"]')),r=0;r<e.length;r++){var n=e[r];if(Ace.test(n.src))return n}return null},dT=function(e){var r="",n=document.createElement("script");n.src="".concat(mL).concat(r);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},Rce=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:r})},Xd=null,Mp=null,Op=null,Dce=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Mce=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},Oce=function(e){return Xd!==null?Xd:(Xd=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(uT),window.Stripe){r(window.Stripe);return}try{var i=Pce();if(i&&e)console.warn(uT);else if(!i)i=dT(e);else if(i&&Op!==null&&Mp!==null){var a;i.removeEventListener("load",Op),i.removeEventListener("error",Mp),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=dT(e)}Op=Mce(r,n),Mp=Dce(n),i.addEventListener("load",Op),i.addEventListener("error",Mp)}catch(o){n(o);return}}),Xd.catch(function(r){return Xd=null,Promise.reject(r)}))},Lce=function(e,r,n){if(e===null)return null;var i=e.apply(void 0,r);return Rce(i,n),i},Jd,fL=!1,pL=function(){return Jd||(Jd=Oce(null).catch(function(e){return Jd=null,Promise.reject(e)}),Jd)};Promise.resolve().then(function(){return pL()}).catch(function(t){fL||console.warn(t)});var gL=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];fL=!0;var i=Date.now();return pL().then(function(a){return Lce(a,r,i)})},vL={exports:{}},Vce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Fce=Vce,$ce=Fce;function xL(){}function yL(){}yL.resetWarningCache=xL;var Uce=function(){function t(n,i,a,o,l,c){if(c!==$ce){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yL,resetWarningCache:xL};return r.PropTypes=r,r};vL.exports=Uce();var zce=vL.exports;const sr=Hv(zce);function hT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(r),!0).forEach(function(n){wL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vg=function(e){return typeof e}:vg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function wL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bL(t,e){return Bce(t)||qce(t,e)||Wce(t,e)||Hce()}function Bce(t){if(Array.isArray(t))return t}function qce(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],i=!0,a=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function Wce(t,e){if(t){if(typeof t=="string")return fT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fT(t,e)}}function fT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jn=function(e,r,n){var i=!!n,a=ke.useRef(n);ke.useEffect(function(){a.current=n},[n]),ke.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,o),function(){e.off(r,o)}},[i,r,e,a])},fj=function(e){var r=ke.useRef(e);return ke.useEffect(function(){r.current=e},[e]),r.current},Ku=function(e){return e!==null&&vg(e)==="object"},Gce=function(e){return Ku(e)&&typeof e.then=="function"},Kce=function(e){return Ku(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},pT="[object Object]",Yce=function t(e,r){if(!Ku(e)||!Ku(r))return e===r;var n=Array.isArray(e),i=Array.isArray(r);if(n!==i)return!1;var a=Object.prototype.toString.call(e)===pT,o=Object.prototype.toString.call(r)===pT;if(a!==o)return!1;if(!a&&!n)return e===r;var l=Object.keys(e),c=Object.keys(r);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var h=0;h<c.length;h+=1)u[c[h]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var g=e,v=r,y=function(w){return t(g[w],v[w])};return m.every(y)},jL=function(e,r,n){return Ku(e)?Object.keys(e).reduce(function(i,a){var o=!Ku(r)||!Yce(e[a],r[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?mT(mT({},i||{}),{},wL({},a,e[a])):i},null):null},_L="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",gT=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_L;if(e===null||Kce(e))return e;throw new Error(r)},Qce=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_L;if(Gce(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return gT(i,r)})};var n=gT(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},Xce=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},wy=ke.createContext(null);wy.displayName="ElementsContext";var NL=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},SL=function(e){var r=e.stripe,n=e.options,i=e.children,a=ke.useMemo(function(){return Qce(r)},[r]),o=ke.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),l=bL(o,2),c=l[0],u=l[1];ke.useEffect(function(){var m=!0,g=function(y){u(function(j){return j.stripe?j:{stripe:y,elements:y.elements(n)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(v){v&&m&&g(v)}):a.tag==="sync"&&!c.stripe&&g(a.stripe),function(){m=!1}},[a,c,n]);var d=fj(r);ke.useEffect(function(){d!==null&&d!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,r]);var h=fj(n);return ke.useEffect(function(){if(c.elements){var m=jL(n,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,h,c.elements]),ke.useEffect(function(){Xce(c.stripe)},[c.stripe]),ke.createElement(wy.Provider,{value:c},i)};SL.propTypes={stripe:sr.any,options:sr.object};var Jce=function(e){var r=ke.useContext(wy);return NL(r,e)},Zce=function(){var e=Jce("calls useElements()"),r=e.elements;return r};sr.func.isRequired;var EL=ke.createContext(null);EL.displayName="CustomCheckoutSdkContext";var eue=function(e,r){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CustomCheckoutProvider> provider."));return e},tue=ke.createContext(null);tue.displayName="CustomCheckoutContext";sr.any,sr.shape({clientSecret:sr.string.isRequired,elementsOptions:sr.object}).isRequired;var pj=function(e){var r=ke.useContext(EL),n=ke.useContext(wy);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return r?eue(r,e):NL(n,e)},rue=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Tr=function(e,r){var n="".concat(rue(e),"Element"),i=function(c){var u=c.id,d=c.className,h=c.options,m=h===void 0?{}:h,g=c.onBlur,v=c.onFocus,y=c.onReady,j=c.onChange,w=c.onEscape,x=c.onClick,b=c.onLoadError,N=c.onLoaderStart,C=c.onNetworksChange,P=c.onConfirm,T=c.onCancel,k=c.onShippingAddressChange,D=c.onShippingRateChange,E=pj("mounts <".concat(n,">")),A="elements"in E?E.elements:null,R="customCheckoutSdk"in E?E.customCheckoutSdk:null,S=ke.useState(null),V=bL(S,2),U=V[0],H=V[1],$=ke.useRef(null),L=ke.useRef(null);Jn(U,"blur",g),Jn(U,"focus",v),Jn(U,"escape",w),Jn(U,"click",x),Jn(U,"loaderror",b),Jn(U,"loaderstart",N),Jn(U,"networkschange",C),Jn(U,"confirm",P),Jn(U,"cancel",T),Jn(U,"shippingaddresschange",k),Jn(U,"shippingratechange",D),Jn(U,"change",j);var W;y&&(e==="expressCheckout"?W=y:W=function(){y(U)}),Jn(U,"ready",W),ke.useLayoutEffect(function(){if($.current===null&&L.current!==null&&(A||R)){var J=null;R?J=R.createElement(e,m):A&&(J=A.create(e,m)),$.current=J,H(J),J&&J.mount(L.current)}},[A,R,m]);var z=fj(m);return ke.useEffect(function(){if($.current){var J=jL(m,z,["paymentRequest"]);J&&"update"in $.current&&$.current.update(J)}},[m,z]),ke.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),ke.createElement("div",{id:u,className:d,ref:L})},a=function(c){pj("mounts <".concat(n,">"));var u=c.id,d=c.className;return ke.createElement("div",{id:u,className:d})},o=r?a:i;return o.propTypes={id:sr.string,className:sr.string,onChange:sr.func,onBlur:sr.func,onFocus:sr.func,onReady:sr.func,onEscape:sr.func,onClick:sr.func,onLoadError:sr.func,onLoaderStart:sr.func,onNetworksChange:sr.func,onConfirm:sr.func,onCancel:sr.func,onShippingAddressChange:sr.func,onShippingRateChange:sr.func,options:sr.object},o.displayName=n,o.__elementType=e,o},Ir=typeof window>"u",nue=ke.createContext(null);nue.displayName="EmbeddedCheckoutProviderContext";var sue=function(){var e=pj("calls useStripe()"),r=e.stripe;return r};Tr("auBankAccount",Ir);Tr("card",Ir);Tr("cardNumber",Ir);Tr("cardExpiry",Ir);Tr("cardCvc",Ir);Tr("fpxBank",Ir);Tr("iban",Ir);Tr("idealBank",Ir);Tr("p24Bank",Ir);Tr("epsBank",Ir);Tr("payment",Ir);Tr("expressCheckout",Ir);Tr("currencySelector",Ir);Tr("paymentRequestButton",Ir);Tr("linkAuthentication",Ir);Tr("address",Ir);Tr("shippingAddress",Ir);Tr("paymentMethodMessaging",Ir);Tr("affirmMessage",Ir);Tr("afterpayClearpayMessage",Ir);const iue=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{sue(),Zce();const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(h=>setTimeout(h,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);ne.success("Paiement réussi !"),r(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),n(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(mt,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(It,{className:"border-red-200 bg-red-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-red-600"}),s.jsx(At,{className:"text-red-800",children:o})]}),s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Kl,{className:"h-4 w-4 text-blue-600"}),s.jsx(At,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx(F,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kl,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},vT=gL("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),aue=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return vT?s.jsx(SL,{stripe:vT,options:i,children:s.jsx(iue,{amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})}):s.jsxs(It,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(At,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},CL=({amount:t,currency:e,onMethodSelect:r,selectedMethod:n})=>{const{paymentMethods:i,calculateFees:a}=yy(),[o,l]=p.useState({}),[c,u]=p.useState({}),[d,h]=p.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:yr,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],g=C=>{switch(C){case"card":return yr;case"cash":return DD;case"transfer":return aQ;case"paypal":return yr;case"lydia":return mc;default:return yr}},v=C=>{switch(C){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},y=(C,P)=>{var k,D;const T={};switch(C){case"card":return!0;case"transfer":(k=P.bankDetails)!=null&&k.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(P.bankDetails.iban.replace(/\s/g,""))||(T.iban="Format IBAN invalide"):T.iban="IBAN requis",(D=P.bankDetails)!=null&&D.accountName||(T.accountName="Nom du titulaire requis");break;case"paypal":P.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.paypalEmail)||(T.paypalEmail="Format email invalide"):T.paypalEmail="Email PayPal requis";break;case"lydia":P.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(P.lydiaPhone.replace(/\s/g,""))||(T.lydiaPhone="Format de téléphone invalide"):T.lydiaPhone="Numéro de téléphone requis";break}return u(T),Object.keys(T).length===0},j=C=>{if(C==="card"){r(C,{});return}const P=o[C]||{};(C==="cash"||y(C,P))&&r(C,P)},w=(C,P,T)=>{l(k=>({...k,[C]:{...k[C],[P]:T}}))},x=(C,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(C),b=C=>{h(C),r("card",{stripePaymentId:C})},N=C=>{console.error("Stripe payment error:",C)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:x(t,e)})]})]}),n==="card"?s.jsx(aue,{amount:t,currency:e,onPaymentSuccess:b,onPaymentError:N}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(C=>{var E,A,R,S,V,U,H,$;const P=g(C.type),T=C.type==="card"?t*C.fees/100:a(t,C.type),k=t+T,D=n===C.type;return s.jsxs(K,{className:`cursor-pointer transition-all hover:shadow-md ${D?"ring-2 ring-primary bg-primary/5":""} ${C.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>C.available&&j(C.type),children:[s.jsx(je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(P,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(_e,{className:"text-lg",children:C.name}),s.jsx(mt,{className:"text-sm",children:C.description})]})]}),D&&s.jsx(Ye,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ct,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:C.processingTime})]}),s.jsxs(Te,{className:v(C.securityLevel),children:[s.jsx(et,{className:"w-3 h-3 mr-1"}),C.securityLevel==="high"?"Très sécurisé":C.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),T>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:x(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-blue-600",children:[s.jsxs("span",{children:["Frais (",C.fees,"%) :"]}),s.jsx("span",{children:x(T,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:x(k,e)})]})]}),D&&C.type!=="cash"&&C.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[C.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:`iban-${C.id}`,children:"IBAN *"}),s.jsx(ye,{id:`iban-${C.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((A=(E=o[C.type])==null?void 0:E.bankDetails)==null?void 0:A.iban)||"",onChange:L=>{var W;return w(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,iban:L.target.value})},className:c.iban?"border-red-500":""}),c.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:`account-name-${C.id}`,children:"Nom du titulaire *"}),s.jsx(ye,{id:`account-name-${C.id}`,placeholder:"Jean Dupont",value:((S=(R=o[C.type])==null?void 0:R.bankDetails)==null?void 0:S.accountName)||"",onChange:L=>{var W;return w(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,accountName:L.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:`bic-${C.id}`,children:"BIC (optionnel)"}),s.jsx(ye,{id:`bic-${C.id}`,placeholder:"BNPAFRPP",value:((U=(V=o[C.type])==null?void 0:V.bankDetails)==null?void 0:U.bic)||"",onChange:L=>{var W;return w(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,bic:L.target.value})}})]})]}),C.type==="paypal"&&s.jsxs("div",{children:[s.jsx(ce,{htmlFor:`paypal-email-${C.id}`,children:"Email PayPal *"}),s.jsx(ye,{id:`paypal-email-${C.id}`,type:"email",placeholder:"votre.email@example.com",value:((H=o[C.type])==null?void 0:H.paypalEmail)||"",onChange:L=>w(C.type,"paypalEmail",L.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),C.type==="lydia"&&s.jsxs("div",{children:[s.jsx(ce,{htmlFor:`lydia-phone-${C.id}`,children:"Numéro de téléphone *"}),s.jsx(ye,{id:`lydia-phone-${C.id}`,type:"tel",placeholder:"06 12 34 56 78",value:(($=o[C.type])==null?void 0:$.lydiaPhone)||"",onChange:L=>w(C.type,"lydiaPhone",L.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),D&&C.type!=="card"&&s.jsxs(It,{className:"mt-3",children:[s.jsx(ba,{className:"h-4 w-4"}),s.jsxs(At,{children:[C.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",C.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",C.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",C.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},C.id)})}),s.jsxs(It,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(At,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de BOXETU pour les transactions."]})]})]})},oue=({open:t,onOpenChange:e,listing:r})=>{var N;const{currentUser:n,userProfile:i}=Mt(),{createPaymentRequest:a,loading:o}=yy(),[l,c]=p.useState("method"),[u,d]=p.useState(null),[h,m]=p.useState({}),[g,v]=p.useState({location:"",date:void 0,time:"",notes:""}),y=(C,P)=>{d(C),m(P),c("details")},j=async()=>{if(!(!n||!u))try{const C=g.date&&g.time?new Date(`${Mr(g.date,"yyyy-MM-dd")} ${g.time}`):void 0;await a({listingId:r.id,buyerId:n.uid,sellerId:r.sellerId,amount:r.price,currency:r.currency||"EUR",paymentMethod:u,meetingLocation:g.location,meetingDateTime:C,paymentDetails:h,notes:g.notes}),e(!1),w()}catch(C){console.error("Erreur lors de la création de la demande:",C)}},w=()=>{c("method"),d(null),m({}),v({location:"",date:void 0,time:"",notes:""})},x=(C,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(C),b=C=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[C]||C;return s.jsx(ua,{open:t,onOpenChange:e,children:s.jsxs(Ei,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(da,{children:[s.jsxs(Ci,{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(_u,{children:['Créez une demande de paiement sécurisée pour "',r.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((N=r.images)==null?void 0:N[0])&&s.jsx("img",{src:r.images[0],alt:r.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:r.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",r.sellerName," • ",r.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:x(r.price,r.currency||"EUR")})]})]})}),l==="method"&&s.jsx(CL,{amount:r.price,currency:r.currency||"EUR",onMethodSelect:y,selectedMethod:u}),l==="details"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ye,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",b(u)]})]}),u==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Hr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsx(ye,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:g.location,onChange:C=>v(P=>({...P,location:C.target.value})),className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{children:"Date de rencontre"}),s.jsxs(Tce,{children:[s.jsx(Ice,{asChild:!0,children:s.jsxs(F,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(_s,{className:"mr-2 h-4 w-4"}),g.date?Mr(g.date,"PPP",{locale:un}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(hL,{className:"w-auto p-0",children:s.jsx(eL,{mode:"single",selected:g.date,onSelect:C=>v(P=>({...P,date:C})),disabled:C=>C<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(ye,{id:"meeting-time",type:"time",value:g.time,onChange:C=>v(P=>({...P,time:C.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(Cs,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:g.notes,onChange:C=>v(P=>({...P,notes:C.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(et,{className:"h-4 w-4 text-blue-600"}),s.jsxs(At,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(F,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),s.jsx(F,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!g.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:b(u)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:x(r.price,r.currency||"EUR")})]}),u==="cash"&&g.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:g.location})]}),g.date&&g.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[Mr(g.date,"PPP",{locale:un})," à ",g.time]})]})]})]}),g.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:g.notes})]})]}),s.jsxs(It,{children:[s.jsx(ba,{className:"h-4 w-4"}),s.jsx(At,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(F,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),s.jsx(F,{onClick:j,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},lue=({listing:t,className:e})=>{const{currentUser:r,userProfile:n}=Mt(),{createConversation:i,setCurrentConversation:a,conversations:o}=iy(),l=kr(),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[v,y]=p.useState(""),[j,w]=p.useState(!1);if((r==null?void 0:r.uid)===t.sellerId)return null;const x=o.find(T=>T.listingId===t.id&&T.participants.includes((r==null?void 0:r.uid)||"")&&T.participants.includes(t.sellerId)),b=()=>{if(!r){l("/auth?mode=signin");return}if(x){a(x),l("/messages");return}const T=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(n==null?void 0:n.displayName)||"Un étudiant intéressé"}`;g(T),y((n==null?void 0:n.email)||""),u(!0)},N=()=>{if(!r){l("/auth?mode=signin");return}h(!0)},C=async()=>{var T;if(!m.trim()||!v.trim()||!r||!n){ne.error("Veuillez remplir tous les champs");return}w(!0);try{const k=await i(t.id,t.title,t.price,(T=t.images)==null?void 0:T[0],r.uid,t.sellerId,{displayName:n.displayName,photoURL:n.photoURL,university:n.university,isVerified:n.isVerified,email:n.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),ne.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs(F,{size:"sm",variant:"ghost",onClick:()=>{ne.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(Gl,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(k){console.error("Erreur lors de l'envoi du message:",k),ne.error("Erreur lors de l'envoi du message")}finally{w(!1)}},P=(T,k)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const D=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:D}).format(T)}catch{return`${T} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{onClick:b,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(Gt,{className:"w-4 h-4 mr-2"}),x?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(F,{onClick:N,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(ua,{open:c,onOpenChange:u,children:s.jsxs(Ei,{className:"max-w-md",children:[s.jsx(da,{children:s.jsxs(Ci,{className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(is,{className:"w-8 h-8",children:[s.jsx(Ea,{src:t.sellerAvatar||void 0}),s.jsx(Fn,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:P(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(ye,{id:"contact-email",type:"email",value:v,onChange:T=>y(T.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(Cs,{id:"contact-message",value:m,onChange:T=>g(T.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ba,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie BOXETU ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),s.jsx(F,{onClick:C,disabled:j||!m.trim()||!v.trim(),className:"flex-1",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(oue,{open:d,onOpenChange:h,listing:t})]})},cue=()=>{var P;const{id:t}=N_(),e=kr(),{currentUser:r}=Mt(),{currentListing:n,loading:i,fetchListingById:a}=Ef(),{fetchUserFavorites:o}=b3(),[l,c]=p.useState(0);if(p.useEffect(()=>{t&&a(t)},[t,a]),p.useEffect(()=>{r&&o(r.uid)},[r,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!n)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Kt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx(F,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=n,d=(r==null?void 0:r.uid)===u.sellerId,h=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:T}),m=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:T}),g=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:T}),v=({className:T})=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vente",className:T}),y=(T,k)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"Échange";const D=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:D}).format(T)}catch{return`${T} €`}},j=T=>{switch(T){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return T}},w=T=>{switch(T){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-blue-100 text-blue-800 border-blue-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=()=>{switch(u.transactionType){case"donation":return s.jsx(h,{className:"w-4 h-4"});case"exchange":return s.jsx(m,{className:"w-4 h-4"});case"service":return s.jsx(g,{className:"w-4 h-4"});default:return s.jsx(v,{className:"w-4 h-4"})}},b=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},N=()=>{u.images&&u.images.length>1&&c(T=>T===u.images.length-1?0:T+1)},C=()=>{u.images&&u.images.length>1&&c(T=>T===0?u.images.length-1:T-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ge,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(ge,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:u.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(F,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(oa,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:C,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(cQ,{className:"w-6 h-6"})}),s.jsx("div",{onClick:N,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(vi,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),s.jsxs(ua,{children:[s.jsx(ju,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(Cl,{className:"w-5 h-5"})})}),s.jsxs(Ei,{className:"max-w-4xl",children:[s.jsx(Ci,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Cl,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((T,k)=>s.jsx("button",{onClick:()=>c(k),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${k===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:T,alt:`${u.title} ${k+1}`,className:"w-full h-full object-cover"})},k))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Te,{className:"bg-primary/10 text-primary border-primary/20",children:[x(),s.jsx("span",{className:"ml-1",children:b()})]}),u.sellerVerified&&s.jsxs(Te,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[y(u.price,u.currency),u.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(ja,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min,"€ - ",u.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:d?s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{to:`/edit-listing/${u.id}`,children:s.jsxs(F,{variant:"outline",className:"w-full",children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(lue,{listing:u,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(j3,{listing:u,size:"lg",showText:!1}),s.jsx(_3,{listing:u,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(bl,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsx(_e,{className:"text-lg",children:"Vendeur"})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(is,{className:"w-12 h-12",children:[s.jsx(Ea,{src:u.sellerAvatar||void 0}),s.jsx(Fn,{children:(P=u.sellerName[0])==null?void 0:P.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&s.jsx(et,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ys,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Co,{className:"w-4 h-4"}),s.jsxs("span",{children:[u.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:wd(u.createdAt,{addSuffix:!0,locale:un})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),s.jsx("span",{children:u.location.city})]})]})]}),s.jsx(Te,{className:w(u.condition),children:j(u.condition)})]})}),s.jsx(Y,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsx(_e,{className:"text-lg",children:"Tags"})}),s.jsx(Y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((T,k)=>s.jsx(Te,{variant:"secondary",children:T},k))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"text-lg flex items-center gap-2",children:[s.jsx(Hr,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:u.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"text-lg flex items-center gap-2",children:[s.jsx(et,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ye,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ye,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ye,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ba,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var Pf=t=>t.type==="checkbox",nu=t=>t instanceof Date,jn=t=>t==null;const kL=t=>typeof t=="object";var Cr=t=>!jn(t)&&!Array.isArray(t)&&kL(t)&&!nu(t),uue=t=>Cr(t)&&t.target?Pf(t.target)?t.target.checked:t.target.value:t,due=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,hue=(t,e)=>t.has(due(e)),mue=t=>{const e=t.constructor&&t.constructor.prototype;return Cr(e)&&e.hasOwnProperty("isPrototypeOf")},DN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function vs(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(DN&&(t instanceof Blob||t instanceof FileList))&&(r||Cr(t)))if(e=r?[]:{},!r&&!mue(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=vs(t[n]));else return t;return e}var by=t=>Array.isArray(t)?t.filter(Boolean):[],pr=t=>t===void 0,Pe=(t,e,r)=>{if(!e||!Cr(t))return r;const n=by(e.split(/[,[\].]+?/)).reduce((i,a)=>jn(i)?i:i[a],t);return pr(n)||n===t?pr(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",MN=t=>/^\w*$/.test(t),TL=t=>by(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ot=(t,e,r)=>{let n=-1;const i=MN(e)?[e]:TL(e),a=i.length,o=a-1;for(;++n<a;){const l=i[n];let c=r;if(n!==o){const u=t[l];c=Cr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const xT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ke.createContext(null);var fue=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==qs.all&&(e._proxyFormState[o]=!n||qs.all),t[o]}});return i},Dn=t=>Cr(t)&&!Object.keys(t).length,pue=(t,e,r,n)=>{r(t);const{name:i,...a}=t;return Dn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===qs.all)},xg=t=>Array.isArray(t)?t:[t];function gue(t){const e=ke.useRef(t);e.current=t,ke.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}var yi=t=>typeof t=="string",vue=(t,e,r,n,i)=>yi(t)?(n&&e.watch.add(t),Pe(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Pe(r,a))):(n&&(e.watchAll=!0),r),IL=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},yT=t=>({isOnSubmit:!t||t===qs.onSubmit,isOnBlur:t===qs.onBlur,isOnChange:t===qs.onChange,isOnAll:t===qs.all,isOnTouch:t===qs.onTouched}),wT=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Fh=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const a=Pe(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Fh(l,e))break}else if(Cr(l)&&Fh(l,e))break}}};var xue=(t,e,r)=>{const n=xg(Pe(t,r));return Ot(n,"root",e[r]),Ot(t,r,n),t},ON=t=>t.type==="file",na=t=>typeof t=="function",Iv=t=>{if(!DN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},yg=t=>yi(t),LN=t=>t.type==="radio",Av=t=>t instanceof RegExp;const bT={value:!1,isValid:!1},jT={value:!0,isValid:!0};var AL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!pr(t[0].attributes.value)?pr(t[0].value)||t[0].value===""?jT:{value:t[0].value,isValid:!0}:jT:bT}return bT};const _T={isValid:!1,value:null};var PL=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,_T):_T;function NT(t,e,r="validate"){if(yg(t)||Array.isArray(t)&&t.every(yg)||ui(t)&&!t)return{type:r,message:yg(t)?t:"",ref:e}}var Oc=t=>Cr(t)&&!Av(t)?t:{value:t,message:""},ST=async(t,e,r,n,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:m,validate:g,name:v,valueAsNumber:y,mount:j,disabled:w}=t._f,x=Pe(e,v);if(!j||w)return{};const b=o?o[0]:a,N=R=>{n&&b.reportValidity&&(b.setCustomValidity(ui(R)?"":R||""),b.reportValidity())},C={},P=LN(a),T=Pf(a),k=P||T,D=(y||ON(a))&&pr(a.value)&&pr(x)||Iv(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,E=IL.bind(null,v,r,C),A=(R,S,V,U=Bi.maxLength,H=Bi.minLength)=>{const $=R?S:V;C[v]={type:R?U:H,message:$,ref:a,...E(R?U:H,$)}};if(i?!Array.isArray(x)||!x.length:l&&(!k&&(D||jn(x))||ui(x)&&!x||T&&!AL(o).isValid||P&&!PL(o).isValid)){const{value:R,message:S}=yg(l)?{value:!!l,message:l}:Oc(l);if(R&&(C[v]={type:Bi.required,message:S,ref:b,...E(Bi.required,S)},!r))return N(S),C}if(!D&&(!jn(d)||!jn(h))){let R,S;const V=Oc(h),U=Oc(d);if(!jn(x)&&!isNaN(x)){const H=a.valueAsNumber||x&&+x;jn(V.value)||(R=H>V.value),jn(U.value)||(S=H<U.value)}else{const H=a.valueAsDate||new Date(x),$=z=>new Date(new Date().toDateString()+" "+z),L=a.type=="time",W=a.type=="week";yi(V.value)&&x&&(R=L?$(x)>$(V.value):W?x>V.value:H>new Date(V.value)),yi(U.value)&&x&&(S=L?$(x)<$(U.value):W?x<U.value:H<new Date(U.value))}if((R||S)&&(A(!!R,V.message,U.message,Bi.max,Bi.min),!r))return N(C[v].message),C}if((c||u)&&!D&&(yi(x)||i&&Array.isArray(x))){const R=Oc(c),S=Oc(u),V=!jn(R.value)&&x.length>+R.value,U=!jn(S.value)&&x.length<+S.value;if((V||U)&&(A(V,R.message,S.message),!r))return N(C[v].message),C}if(m&&!D&&yi(x)){const{value:R,message:S}=Oc(m);if(Av(R)&&!x.match(R)&&(C[v]={type:Bi.pattern,message:S,ref:a,...E(Bi.pattern,S)},!r))return N(S),C}if(g){if(na(g)){const R=await g(x,e),S=NT(R,b);if(S&&(C[v]={...S,...E(Bi.validate,S.message)},!r))return N(S.message),C}else if(Cr(g)){let R={};for(const S in g){if(!Dn(R)&&!r)break;const V=NT(await g[S](x,e),b,S);V&&(R={...V,...E(S,V.message)},N(V.message),r&&(C[v]=R))}if(!Dn(R)&&(C[v]={ref:b,...R},!r))return C}}return N(!0),C};function yue(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=pr(t)?n++:t[e[n++]];return t}function wue(t){for(const e in t)if(t.hasOwnProperty(e)&&!pr(t[e]))return!1;return!0}function Ar(t,e){const r=Array.isArray(e)?e:MN(e)?[e]:TL(e),n=r.length===1?t:yue(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(Cr(n)&&Dn(n)||Array.isArray(n)&&wue(n))&&Ar(t,r.slice(0,-1)),t}var cw=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Pv=t=>jn(t)||!kL(t);function eo(t,e){if(Pv(t)||Pv(e))return t===e;if(nu(t)&&nu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=e[i];if(nu(a)&&nu(o)||Cr(a)&&Cr(o)||Array.isArray(a)&&Array.isArray(o)?!eo(a,o):a!==o)return!1}}return!0}var RL=t=>t.type==="select-multiple",bue=t=>LN(t)||Pf(t),uw=t=>Iv(t)&&t.isConnected,DL=t=>{for(const e in t)if(na(t[e]))return!0;return!1};function Rv(t,e={}){const r=Array.isArray(t);if(Cr(t)||r)for(const n in t)Array.isArray(t[n])||Cr(t[n])&&!DL(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Rv(t[n],e[n])):jn(t[n])||(e[n]=!0);return e}function ML(t,e,r){const n=Array.isArray(t);if(Cr(t)||n)for(const i in t)Array.isArray(t[i])||Cr(t[i])&&!DL(t[i])?pr(e)||Pv(r[i])?r[i]=Array.isArray(t[i])?Rv(t[i],[]):{...Rv(t[i])}:ML(t[i],jn(e)?{}:e[i],r[i]):r[i]=!eo(t[i],e[i]);return r}var Lp=(t,e)=>ML(t,e,Rv(e)),OL=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>pr(t)?t:e?t===""?NaN:t&&+t:r&&yi(t)?new Date(t):n?n(t):t;function dw(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return ON(e)?e.files:LN(e)?PL(t.refs).value:RL(e)?[...e.selectedOptions].map(({value:r})=>r):Pf(e)?AL(t.refs).value:OL(pr(e.value)?t.ref.value:e.value,t)}var jue=(t,e,r,n)=>{const i={};for(const a of t){const o=Pe(e,a);o&&Ot(i,a,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Zd=t=>pr(t)?t:Av(t)?t.source:Cr(t)?Av(t.value)?t.value.source:t.value:t;const ET="AsyncFunction";var _ue=t=>(!t||!t.validate)&&!!(na(t.validate)&&t.validate.constructor.name===ET||Cr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ET)),Nue=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function CT(t,e,r){const n=Pe(t,r);if(n||MN(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=Pe(e,a),l=Pe(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:r}}var Sue=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Eue=(t,e)=>!by(Pe(t,e)).length&&Ar(t,e);const Cue={mode:qs.onSubmit,reValidateMode:qs.onChange,shouldFocusError:!0};function kue(t={}){let e={...Cue,...t},r={submitCount:0,isDirty:!1,isLoading:na(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=Cr(e.defaultValues)||Cr(e.values)?vs(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:vs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:cw(),array:cw(),state:cw()},m=yT(e.mode),g=yT(e.reValidateMode),v=e.criteriaMode===qs.all,y=O=>B=>{clearTimeout(u),u=setTimeout(O,B)},j=async O=>{if(d.isValid||O){const B=e.resolver?Dn((await k()).errors):await E(n,!0);B!==r.isValid&&h.state.next({isValid:B})}},w=(O,B)=>{(d.isValidating||d.validatingFields)&&((O||Array.from(l.mount)).forEach(X=>{X&&(B?Ot(r.validatingFields,X,B):Ar(r.validatingFields,X))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Dn(r.validatingFields)}))},x=(O,B=[],X,Se,we=!0,he=!0)=>{if(Se&&X){if(o.action=!0,he&&Array.isArray(Pe(n,O))){const Le=X(Pe(n,O),Se.argA,Se.argB);we&&Ot(n,O,Le)}if(he&&Array.isArray(Pe(r.errors,O))){const Le=X(Pe(r.errors,O),Se.argA,Se.argB);we&&Ot(r.errors,O,Le),Eue(r.errors,O)}if(d.touchedFields&&he&&Array.isArray(Pe(r.touchedFields,O))){const Le=X(Pe(r.touchedFields,O),Se.argA,Se.argB);we&&Ot(r.touchedFields,O,Le)}d.dirtyFields&&(r.dirtyFields=Lp(i,a)),h.state.next({name:O,isDirty:R(O,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ot(a,O,B)},b=(O,B)=>{Ot(r.errors,O,B),h.state.next({errors:r.errors})},N=O=>{r.errors=O,h.state.next({errors:r.errors,isValid:!1})},C=(O,B,X,Se)=>{const we=Pe(n,O);if(we){const he=Pe(a,O,pr(X)?Pe(i,O):X);pr(he)||Se&&Se.defaultChecked||B?Ot(a,O,B?he:dw(we._f)):U(O,he),o.mount&&j()}},P=(O,B,X,Se,we)=>{let he=!1,Le=!1;const St={name:O},xt=!!(Pe(n,O)&&Pe(n,O)._f&&Pe(n,O)._f.disabled);if(!X||Se){d.isDirty&&(Le=r.isDirty,r.isDirty=St.isDirty=R(),he=Le!==St.isDirty);const bt=xt||eo(Pe(i,O),B);Le=!!(!xt&&Pe(r.dirtyFields,O)),bt||xt?Ar(r.dirtyFields,O):Ot(r.dirtyFields,O,!0),St.dirtyFields=r.dirtyFields,he=he||d.dirtyFields&&Le!==!bt}if(X){const bt=Pe(r.touchedFields,O);bt||(Ot(r.touchedFields,O,X),St.touchedFields=r.touchedFields,he=he||d.touchedFields&&bt!==X)}return he&&we&&h.state.next(St),he?St:{}},T=(O,B,X,Se)=>{const we=Pe(r.errors,O),he=d.isValid&&ui(B)&&r.isValid!==B;if(t.delayError&&X?(c=y(()=>b(O,X)),c(t.delayError)):(clearTimeout(u),c=null,X?Ot(r.errors,O,X):Ar(r.errors,O)),(X?!eo(we,X):we)||!Dn(Se)||he){const Le={...Se,...he&&ui(B)?{isValid:B}:{},errors:r.errors,name:O};r={...r,...Le},h.state.next(Le)}},k=async O=>{w(O,!0);const B=await e.resolver(a,e.context,jue(O||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return w(O),B},D=async O=>{const{errors:B}=await k(O);if(O)for(const X of O){const Se=Pe(B,X);Se?Ot(r.errors,X,Se):Ar(r.errors,X)}else r.errors=B;return B},E=async(O,B,X={valid:!0})=>{for(const Se in O){const we=O[Se];if(we){const{_f:he,...Le}=we;if(he){const St=l.array.has(he.name),xt=we._f&&_ue(we._f);xt&&d.validatingFields&&w([Se],!0);const bt=await ST(we,a,v,e.shouldUseNativeValidation&&!B,St);if(xt&&d.validatingFields&&w([Se]),bt[he.name]&&(X.valid=!1,B))break;!B&&(Pe(bt,he.name)?St?xue(r.errors,bt,he.name):Ot(r.errors,he.name,bt[he.name]):Ar(r.errors,he.name))}!Dn(Le)&&await E(Le,B,X)}}return X.valid},A=()=>{for(const O of l.unMount){const B=Pe(n,O);B&&(B._f.refs?B._f.refs.every(X=>!uw(X)):!uw(B._f.ref))&&ct(O)}l.unMount=new Set},R=(O,B)=>(O&&B&&Ot(a,O,B),!eo(J(),i)),S=(O,B,X)=>vue(O,l,{...o.mount?a:pr(B)?i:yi(O)?{[O]:B}:B},X,B),V=O=>by(Pe(o.mount?a:i,O,t.shouldUnregister?Pe(i,O,[]):[])),U=(O,B,X={})=>{const Se=Pe(n,O);let we=B;if(Se){const he=Se._f;he&&(!he.disabled&&Ot(a,O,OL(B,he)),we=Iv(he.ref)&&jn(B)?"":B,RL(he.ref)?[...he.ref.options].forEach(Le=>Le.selected=we.includes(Le.value)):he.refs?Pf(he.ref)?he.refs.length>1?he.refs.forEach(Le=>(!Le.defaultChecked||!Le.disabled)&&(Le.checked=Array.isArray(we)?!!we.find(St=>St===Le.value):we===Le.value)):he.refs[0]&&(he.refs[0].checked=!!we):he.refs.forEach(Le=>Le.checked=Le.value===we):ON(he.ref)?he.ref.value="":(he.ref.value=we,he.ref.type||h.values.next({name:O,values:{...a}})))}(X.shouldDirty||X.shouldTouch)&&P(O,we,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&z(O)},H=(O,B,X)=>{for(const Se in B){const we=B[Se],he=`${O}.${Se}`,Le=Pe(n,he);(l.array.has(O)||!Pv(we)||Le&&!Le._f)&&!nu(we)?H(he,we,X):U(he,we,X)}},$=(O,B,X={})=>{const Se=Pe(n,O),we=l.array.has(O),he=vs(B);Ot(a,O,he),we?(h.array.next({name:O,values:{...a}}),(d.isDirty||d.dirtyFields)&&X.shouldDirty&&h.state.next({name:O,dirtyFields:Lp(i,a),isDirty:R(O,he)})):Se&&!Se._f&&!jn(he)?H(O,he,X):U(O,he,X),wT(O,l)&&h.state.next({...r}),h.values.next({name:o.mount?O:void 0,values:{...a}})},L=async O=>{o.mount=!0;const B=O.target;let X=B.name,Se=!0;const we=Pe(n,X),he=()=>B.type?dw(we._f):uue(O),Le=St=>{Se=Number.isNaN(St)||eo(St,Pe(a,X,St))};if(we){let St,xt;const bt=he(),gs=O.type===xT.BLUR||O.type===xT.FOCUS_OUT,Mf=!Nue(we._f)&&!e.resolver&&!Pe(r.errors,X)&&!we._f.deps||Sue(gs,Pe(r.touchedFields,X),r.isSubmitted,g,m),yc=wT(X,l,gs);Ot(a,X,bt),gs?(we._f.onBlur&&we._f.onBlur(O),c&&c(0)):we._f.onChange&&we._f.onChange(O);const _d=P(X,bt,gs,!1),Zo=!Dn(_d)||yc;if(!gs&&h.values.next({name:X,type:O.type,values:{...a}}),Mf)return d.isValid&&(t.mode==="onBlur"?gs&&j():j()),Zo&&h.state.next({name:X,...yc?{}:_d});if(!gs&&yc&&h.state.next({...r}),e.resolver){const{errors:Nd}=await k([X]);if(Le(bt),Se){const Of=CT(r.errors,n,X),wc=CT(Nd,n,Of.name||X);St=wc.error,X=wc.name,xt=Dn(Nd)}}else w([X],!0),St=(await ST(we,a,v,e.shouldUseNativeValidation))[X],w([X]),Le(bt),Se&&(St?xt=!1:d.isValid&&(xt=await E(n,!0)));Se&&(we._f.deps&&z(we._f.deps),T(X,xt,St,_d))}},W=(O,B)=>{if(Pe(r.errors,B)&&O.focus)return O.focus(),1},z=async(O,B={})=>{let X,Se;const we=xg(O);if(e.resolver){const he=await D(pr(O)?O:we);X=Dn(he),Se=O?!we.some(Le=>Pe(he,Le)):X}else O?(Se=(await Promise.all(we.map(async he=>{const Le=Pe(n,he);return await E(Le&&Le._f?{[he]:Le}:Le)}))).every(Boolean),!(!Se&&!r.isValid)&&j()):Se=X=await E(n);return h.state.next({...!yi(O)||d.isValid&&X!==r.isValid?{}:{name:O},...e.resolver||!O?{isValid:X}:{},errors:r.errors}),B.shouldFocus&&!Se&&Fh(n,W,O?we:l.mount),Se},J=O=>{const B={...o.mount?a:i};return pr(O)?B:yi(O)?Pe(B,O):O.map(X=>Pe(B,X))},oe=(O,B)=>({invalid:!!Pe((B||r).errors,O),isDirty:!!Pe((B||r).dirtyFields,O),error:Pe((B||r).errors,O),isValidating:!!Pe(r.validatingFields,O),isTouched:!!Pe((B||r).touchedFields,O)}),Ce=O=>{O&&xg(O).forEach(B=>Ar(r.errors,B)),h.state.next({errors:O?r.errors:{}})},tt=(O,B,X)=>{const Se=(Pe(n,O,{_f:{}})._f||{}).ref,we=Pe(r.errors,O)||{},{ref:he,message:Le,type:St,...xt}=we;Ot(r.errors,O,{...xt,...B,ref:Se}),h.state.next({name:O,errors:r.errors,isValid:!1}),X&&X.shouldFocus&&Se&&Se.focus&&Se.focus()},vt=(O,B)=>na(O)?h.values.subscribe({next:X=>O(S(void 0,B),X)}):S(O,B,!0),ct=(O,B={})=>{for(const X of O?xg(O):l.mount)l.mount.delete(X),l.array.delete(X),B.keepValue||(Ar(n,X),Ar(a,X)),!B.keepError&&Ar(r.errors,X),!B.keepDirty&&Ar(r.dirtyFields,X),!B.keepTouched&&Ar(r.touchedFields,X),!B.keepIsValidating&&Ar(r.validatingFields,X),!e.shouldUnregister&&!B.keepDefaultValue&&Ar(i,X);h.values.next({values:{...a}}),h.state.next({...r,...B.keepDirty?{isDirty:R()}:{}}),!B.keepIsValid&&j()},Ne=({disabled:O,name:B,field:X,fields:Se,value:we})=>{if(ui(O)&&o.mount||O){const he=O?void 0:pr(we)?dw(X?X._f:Pe(Se,B)._f):we;Ot(a,B,he),P(B,he,!1,!1,!0)}},Ze=(O,B={})=>{let X=Pe(n,O);const Se=ui(B.disabled)||ui(t.disabled);return Ot(n,O,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:O}},name:O,mount:!0,...B}}),l.mount.add(O),X?Ne({field:X,disabled:ui(B.disabled)?B.disabled:t.disabled,name:O,value:B.value}):C(O,!0,B.value),{...Se?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:Zd(B.min),max:Zd(B.max),minLength:Zd(B.minLength),maxLength:Zd(B.maxLength),pattern:Zd(B.pattern)}:{},name:O,onChange:L,onBlur:L,ref:we=>{if(we){Ze(O,B),X=Pe(n,O);const he=pr(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Le=bue(he),St=X._f.refs||[];if(Le?St.find(xt=>xt===he):he===X._f.ref)return;Ot(n,O,{_f:{...X._f,...Le?{refs:[...St.filter(uw),he,...Array.isArray(Pe(i,O))?[{}]:[]],ref:{type:he.type,name:O}}:{ref:he}}}),C(O,!1,void 0,he)}else X=Pe(n,O,{}),X._f&&(X._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(hue(l.array,O)&&o.action)&&l.unMount.add(O)}}},te=()=>e.shouldFocusError&&Fh(n,W,l.mount),pe=O=>{ui(O)&&(h.state.next({disabled:O}),Fh(n,(B,X)=>{const Se=Pe(n,X);Se&&(B.disabled=Se._f.disabled||O,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(we=>{we.disabled=Se._f.disabled||O}))},0,!1))},Q=(O,B)=>async X=>{let Se;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let we=vs(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:he,values:Le}=await k();r.errors=he,we=Le}else await E(n);if(Ar(r.errors,"root"),Dn(r.errors)){h.state.next({errors:{}});try{await O(we,X)}catch(he){Se=he}}else B&&await B({...r.errors},X),te(),setTimeout(te);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Dn(r.errors)&&!Se,submitCount:r.submitCount+1,errors:r.errors}),Se)throw Se},le=(O,B={})=>{Pe(n,O)&&(pr(B.defaultValue)?$(O,vs(Pe(i,O))):($(O,B.defaultValue),Ot(i,O,vs(B.defaultValue))),B.keepTouched||Ar(r.touchedFields,O),B.keepDirty||(Ar(r.dirtyFields,O),r.isDirty=B.defaultValue?R(O,vs(Pe(i,O))):R()),B.keepError||(Ar(r.errors,O),d.isValid&&j()),h.state.next({...r}))},q=(O,B={})=>{const X=O?vs(O):i,Se=vs(X),we=Dn(O),he=we?i:Se;if(B.keepDefaultValues||(i=X),!B.keepValues){if(B.keepDirtyValues)for(const Le of l.mount)Pe(r.dirtyFields,Le)?Ot(he,Le,Pe(a,Le)):$(Le,Pe(he,Le));else{if(DN&&pr(O))for(const Le of l.mount){const St=Pe(n,Le);if(St&&St._f){const xt=Array.isArray(St._f.refs)?St._f.refs[0]:St._f.ref;if(Iv(xt)){const bt=xt.closest("form");if(bt){bt.reset();break}}}}n={}}a=t.shouldUnregister?B.keepDefaultValues?vs(i):{}:vs(he),h.array.next({values:{...he}}),h.values.next({values:{...he}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:we?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!eo(O,i)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:B.keepDirtyValues?B.keepDefaultValues&&a?Lp(i,a):r.dirtyFields:B.keepDefaultValues&&O?Lp(i,O):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Z=(O,B)=>q(na(O)?O(a):O,B);return{control:{register:Ze,unregister:ct,getFieldState:oe,handleSubmit:Q,setError:tt,_executeSchema:k,_getWatch:S,_getDirty:R,_updateValid:j,_removeUnmounted:A,_updateFieldArray:x,_updateDisabledField:Ne,_getFieldArray:V,_reset:q,_resetDefaultValues:()=>na(e.defaultValues)&&e.defaultValues().then(O=>{Z(O,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:O=>{r={...r,...O}},_disableForm:pe,_subjects:h,_proxyFormState:d,_setErrors:N,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(O){o=O},get _defaultValues(){return i},get _names(){return l},set _names(O){l=O},get _formState(){return r},set _formState(O){r=O},get _options(){return e},set _options(O){e={...e,...O}}},trigger:z,register:Ze,handleSubmit:Q,watch:vt,setValue:$,getValues:J,reset:Z,resetField:le,clearErrors:Ce,unregister:ct,setError:tt,setFocus:(O,B={})=>{const X=Pe(n,O),Se=X&&X._f;if(Se){const we=Se.refs?Se.refs[0]:Se.ref;we.focus&&(we.focus(),B.shouldSelect&&we.select())}},getFieldState:oe}}function Tl(t={}){const e=ke.useRef(),r=ke.useRef(),[n,i]=ke.useState({isDirty:!1,isValidating:!1,isLoading:na(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:na(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...kue(t),formState:n});const a=e.current.control;return a._options=t,gue({subject:a._subjects.state,next:o=>{pue(o,a._proxyFormState,a._updateFormState)&&i({...a._formState})}}),ke.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),ke.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),ke.useEffect(()=>{t.values&&!eo(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),ke.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),ke.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),ke.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=fue(n,a),e.current}const kT=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Pe(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},LL=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?kT(n.ref,r,t):n.refs&&n.refs.forEach(i=>kT(i,r,t))}},Tue=(t,e)=>{e.shouldUseNativeValidation&&LL(t,e);const r={};for(const n in t){const i=Pe(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(Iue(e.names||Object.keys(t),n)){const o=Object.assign({},Pe(r,n));Ot(o,"root",a),Ot(r,n,o)}else Ot(r,n,a)}return r},Iue=(t,e)=>t.some(r=>r.startsWith(e+"."));var Aue=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=r[o].types,u=c&&c[n.code];r[o]=IL(o,e,r,i,u?[].concat(u,n.message):n.message)}t.shift()}return r},Il=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&LL({},a),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Tue(Aue(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},_t;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(_t||(_t={}));var gj;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gj||(gj={}));const Ae=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),to=t=>{switch(typeof t){case"undefined":return Ae.undefined;case"string":return Ae.string;case"number":return isNaN(t)?Ae.nan:Ae.number;case"boolean":return Ae.boolean;case"function":return Ae.function;case"bigint":return Ae.bigint;case"symbol":return Ae.symbol;case"object":return Array.isArray(t)?Ae.array:t===null?Ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ae.promise:typeof Map<"u"&&t instanceof Map?Ae.map:typeof Set<"u"&&t instanceof Set?Ae.set:typeof Date<"u"&&t instanceof Date?Ae.date:Ae.object;default:return Ae.unknown}},de=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Pue=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class us extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),n}static assert(e){if(!(e instanceof us))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}us.create=t=>new us(t);const Yu=(t,e)=>{let r;switch(t.code){case de.invalid_type:t.received===Ae.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_t.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(t.keys,", ")}`;break;case de.invalid_union:r="Invalid input";break;case de.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(t.options)}`;break;case de.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:r="Invalid function arguments";break;case de.invalid_return_type:r="Invalid function return type";break;case de.invalid_date:r="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_t.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case de.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case de.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case de.custom:r="Invalid input";break;case de.invalid_intersection_types:r="Intersection results could not be merged";break;case de.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:r="Number must be finite";break;default:r=e.defaultError,_t.assertNever(t)}return{message:r}};let VL=Yu;function Rue(t){VL=t}function Dv(){return VL}const Mv=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}},Due=[];function Ee(t,e){const r=Dv(),n=Mv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Yu?void 0:Yu].filter(i=>!!i)});t.common.issues.push(n)}class pn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return We;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return pn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return We;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const We=Object.freeze({status:"aborted"}),su=t=>({status:"dirty",value:t}),kn=t=>({status:"valid",value:t}),vj=t=>t.status==="aborted",xj=t=>t.status==="dirty",Tm=t=>t.status==="valid",Im=t=>typeof Promise<"u"&&t instanceof Promise;function Ov(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function FL(t,e,r,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ve||(Ve={}));var mh,fh;class Ri{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const TT=(t,e)=>{if(Tm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new us(t.common.issues);return this._error=r,this._error}}};function nt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}class at{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return to(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:to(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pn,ctx:{common:e.parent.common,data:e.data,parsedType:to(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Im(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:to(e)},a=this._parseSync({data:e,path:i.path,parent:i});return TT(i,a)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:to(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Im(i)?i:Promise.resolve(i));return TT(n,a)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:de.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new si({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ki.create(this,this._def)}nullable(){return Oo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qs.create(this,this._def)}promise(){return Xu.create(this,this._def)}or(e){return Dm.create([this,e],this._def)}and(e){return Mm.create(this,e,this._def)}transform(e){return new si({...nt(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new $m({...nt(this._def),innerType:this,defaultValue:r,typeName:Be.ZodDefault})}brand(){return new VN({typeName:Be.ZodBranded,type:this,...nt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Um({...nt(this._def),innerType:this,catchValue:r,typeName:Be.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Rf.create(this,e)}readonly(){return zm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Mue=/^c[^\s-]{8,}$/i,Oue=/^[0-9a-z]+$/,Lue=/^[0-9A-HJKMNP-TV-Z]{26}$/,Vue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Fue=/^[a-z0-9_-]{21}$/i,$ue=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Uue=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hw;const Bue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,que=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Wue=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$L="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hue=new RegExp(`^${$L}$`);function UL(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Gue(t){return new RegExp(`^${UL(t)}$`)}function zL(t){let e=`${$L}T${UL(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Kue(t,e){return!!((e==="v4"||!e)&&Bue.test(t)||(e==="v6"||!e)&&que.test(t))}class Ws extends at{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ae.string){const a=this._getOrReturnCtx(e);return Ee(a,{code:de.invalid_type,expected:Ae.string,received:a.parsedType}),We}const n=new pn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Ee(i,{code:de.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ee(i,{code:de.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Uue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"email",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")hw||(hw=new RegExp(zue,"u")),hw.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"emoji",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Vue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"uuid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Fue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"nanoid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Mue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"cuid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Oue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"cuid2",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Lue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"ulid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ee(i,{validation:"url",code:de.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"regex",code:de.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?zL(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Hue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?Gue(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?$ue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"duration",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?Kue(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"ip",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Wue.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"base64",code:de.invalid_string,message:a.message}),n.dirty()):_t.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:de.invalid_string,...Ve.errToObj(n)})}_addCheck(e){return new Ws({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ve.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ve.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ve.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ve.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ve.errToObj(r)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ws.create=t=>{var e;return new Ws({checks:[],typeName:Be.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};function Yue(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Ro extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ae.number){const a=this._getOrReturnCtx(e);return Ee(a,{code:de.invalid_type,expected:Ae.number,received:a.parsedType}),We}let n;const i=new pn;for(const a of this._def.checks)a.kind==="int"?_t.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Yue(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.not_finite,message:a.message}),i.dirty()):_t.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,i){return new Ro({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(i)}]})}_addCheck(e){return new Ro({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_t.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ro.create=t=>new Ro({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class Do extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ae.bigint){const a=this._getOrReturnCtx(e);return Ee(a,{code:de.invalid_type,expected:Ae.bigint,received:a.parsedType}),We}let n;const i=new pn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ee(n,{code:de.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):_t.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,i){return new Do({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(i)}]})}_addCheck(e){return new Do({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Do.create=t=>{var e;return new Do({checks:[],typeName:Be.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};class Am extends at{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ae.boolean){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.boolean,received:n.parsedType}),We}return kn(e.data)}}Am.create=t=>new Am({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class tc extends at{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ae.date){const a=this._getOrReturnCtx(e);return Ee(a,{code:de.invalid_type,expected:Ae.date,received:a.parsedType}),We}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ee(a,{code:de.invalid_date}),We}const n=new pn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:de.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):_t.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tc({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}tc.create=t=>new tc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...nt(t)});class Lv extends at{_parse(e){if(this._getType(e)!==Ae.symbol){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.symbol,received:n.parsedType}),We}return kn(e.data)}}Lv.create=t=>new Lv({typeName:Be.ZodSymbol,...nt(t)});class Pm extends at{_parse(e){if(this._getType(e)!==Ae.undefined){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.undefined,received:n.parsedType}),We}return kn(e.data)}}Pm.create=t=>new Pm({typeName:Be.ZodUndefined,...nt(t)});class Rm extends at{_parse(e){if(this._getType(e)!==Ae.null){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.null,received:n.parsedType}),We}return kn(e.data)}}Rm.create=t=>new Rm({typeName:Be.ZodNull,...nt(t)});class Qu extends at{constructor(){super(...arguments),this._any=!0}_parse(e){return kn(e.data)}}Qu.create=t=>new Qu({typeName:Be.ZodAny,...nt(t)});class Al extends at{constructor(){super(...arguments),this._unknown=!0}_parse(e){return kn(e.data)}}Al.create=t=>new Al({typeName:Be.ZodUnknown,...nt(t)});class Ca extends at{_parse(e){const r=this._getOrReturnCtx(e);return Ee(r,{code:de.invalid_type,expected:Ae.never,received:r.parsedType}),We}}Ca.create=t=>new Ca({typeName:Be.ZodNever,...nt(t)});class Vv extends at{_parse(e){if(this._getType(e)!==Ae.undefined){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.void,received:n.parsedType}),We}return kn(e.data)}}Vv.create=t=>new Vv({typeName:Be.ZodVoid,...nt(t)});class Qs extends at{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ae.array)return Ee(r,{code:de.invalid_type,expected:Ae.array,received:r.parsedType}),We;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Ee(r,{code:o?de.too_big:de.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ee(r,{code:de.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ee(r,{code:de.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new Ri(r,o,r.path,l)))).then(o=>pn.mergeArray(n,o));const a=[...r.data].map((o,l)=>i.type._parseSync(new Ri(r,o,r.path,l)));return pn.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Qs({...this._def,minLength:{value:e,message:Ve.toString(r)}})}max(e,r){return new Qs({...this._def,maxLength:{value:e,message:Ve.toString(r)}})}length(e,r){return new Qs({...this._def,exactLength:{value:e,message:Ve.toString(r)}})}nonempty(e){return this.min(1,e)}}Qs.create=(t,e)=>new Qs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...nt(e)});function zc(t){if(t instanceof ir){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ki.create(zc(n))}return new ir({...t._def,shape:()=>e})}else return t instanceof Qs?new Qs({...t._def,type:zc(t.element)}):t instanceof ki?ki.create(zc(t.unwrap())):t instanceof Oo?Oo.create(zc(t.unwrap())):t instanceof Di?Di.create(t.items.map(e=>zc(e))):t}class ir extends at{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=_t.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ae.object){const u=this._getOrReturnCtx(e);return Ee(u,{code:de.invalid_type,expected:Ae.object,received:u.parsedType}),We}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ca&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ri(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ca){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Ee(i,{code:de.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ri(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>pn.mergeObjectSync(n,u)):pn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new ir({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Ve.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new ir({...this._def,unknownKeys:"strip"})}passthrough(){return new ir({...this._def,unknownKeys:"passthrough"})}extend(e){return new ir({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ir({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ir({...this._def,catchall:e})}pick(e){const r={};return _t.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new ir({...this._def,shape:()=>r})}omit(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new ir({...this._def,shape:()=>r})}deepPartial(){return zc(this)}partial(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new ir({...this._def,shape:()=>r})}required(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ki;)a=a._def.innerType;r[n]=a}}),new ir({...this._def,shape:()=>r})}keyof(){return BL(_t.objectKeys(this.shape))}}ir.create=(t,e)=>new ir({shape:()=>t,unknownKeys:"strip",catchall:Ca.create(),typeName:Be.ZodObject,...nt(e)});ir.strictCreate=(t,e)=>new ir({shape:()=>t,unknownKeys:"strict",catchall:Ca.create(),typeName:Be.ZodObject,...nt(e)});ir.lazycreate=(t,e)=>new ir({shape:t,unknownKeys:"strip",catchall:Ca.create(),typeName:Be.ZodObject,...nt(e)});class Dm extends at{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new us(l.ctx.common.issues));return Ee(r,{code:de.invalid_union,unionErrors:o}),We}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new us(c));return Ee(r,{code:de.invalid_union,unionErrors:l}),We}}get options(){return this._def.options}}Dm.create=(t,e)=>new Dm({options:t,typeName:Be.ZodUnion,...nt(e)});const Wi=t=>t instanceof Lm?Wi(t.schema):t instanceof si?Wi(t.innerType()):t instanceof Vm?[t.value]:t instanceof Mo?t.options:t instanceof Fm?_t.objectValues(t.enum):t instanceof $m?Wi(t._def.innerType):t instanceof Pm?[void 0]:t instanceof Rm?[null]:t instanceof ki?[void 0,...Wi(t.unwrap())]:t instanceof Oo?[null,...Wi(t.unwrap())]:t instanceof VN||t instanceof zm?Wi(t.unwrap()):t instanceof Um?Wi(t._def.innerType):[];class jy extends at{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.object)return Ee(r,{code:de.invalid_type,expected:Ae.object,received:r.parsedType}),We;const n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(Ee(r,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const a of r){const o=Wi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,a)}}return new jy({typeName:Be.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...nt(n)})}}function yj(t,e){const r=to(t),n=to(e);if(t===e)return{valid:!0,data:t};if(r===Ae.object&&n===Ae.object){const i=_t.objectKeys(e),a=_t.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=yj(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Ae.array&&n===Ae.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=yj(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===Ae.date&&n===Ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Mm extends at{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(vj(a)||vj(o))return We;const l=yj(a.value,o.value);return l.valid?((xj(a)||xj(o))&&r.dirty(),{status:r.value,value:l.data}):(Ee(n,{code:de.invalid_intersection_types}),We)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Mm.create=(t,e,r)=>new Mm({left:t,right:e,typeName:Be.ZodIntersection,...nt(r)});class Di extends at{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.array)return Ee(n,{code:de.invalid_type,expected:Ae.array,received:n.parsedType}),We;if(n.data.length<this._def.items.length)return Ee(n,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&n.data.length>this._def.items.length&&(Ee(n,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ri(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>pn.mergeArray(r,o)):pn.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Di({...this._def,rest:e})}}Di.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Di({items:t,typeName:Be.ZodTuple,rest:null,...nt(e)})};class Om extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.object)return Ee(n,{code:de.invalid_type,expected:Ae.object,received:n.parsedType}),We;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in n.data)i.push({key:a._parse(new Ri(n,l,n.path,l)),value:o._parse(new Ri(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?pn.mergeObjectAsync(r,i):pn.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof at?new Om({keyType:e,valueType:r,typeName:Be.ZodRecord,...nt(n)}):new Om({keyType:Ws.create(),valueType:e,typeName:Be.ZodRecord,...nt(r)})}}class Fv extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.map)return Ee(n,{code:de.invalid_type,expected:Ae.map,received:n.parsedType}),We;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new Ri(n,l,n.path,[u,"key"])),value:a._parse(new Ri(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}Fv.create=(t,e,r)=>new Fv({valueType:e,keyType:t,typeName:Be.ZodMap,...nt(r)});class rc extends at{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.set)return Ee(n,{code:de.invalid_type,expected:Ae.set,received:n.parsedType}),We;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ee(n,{code:de.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ee(n,{code:de.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return We;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>a._parse(new Ri(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new rc({...this._def,minSize:{value:e,message:Ve.toString(r)}})}max(e,r){return new rc({...this._def,maxSize:{value:e,message:Ve.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}rc.create=(t,e)=>new rc({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...nt(e)});class Nu extends at{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.function)return Ee(r,{code:de.invalid_type,expected:Ae.function,received:r.parsedType}),We;function n(l,c){return Mv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dv(),Yu].filter(u=>!!u),issueData:{code:de.invalid_arguments,argumentsError:c}})}function i(l,c){return Mv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dv(),Yu].filter(u=>!!u),issueData:{code:de.invalid_return_type,returnTypeError:c}})}const a={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Xu){const l=this;return kn(async function(...c){const u=new us([]),d=await l._def.args.parseAsync(c,a).catch(g=>{throw u.addIssue(n(c,g)),u}),h=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(h,a).catch(g=>{throw u.addIssue(i(h,g)),u})})}else{const l=this;return kn(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new us([n(c,u.error)]);const d=Reflect.apply(o,this,u.data),h=l._def.returns.safeParse(d,a);if(!h.success)throw new us([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Nu({...this._def,args:Di.create(e).rest(Al.create())})}returns(e){return new Nu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Nu({args:e||Di.create([]).rest(Al.create()),returns:r||Al.create(),typeName:Be.ZodFunction,...nt(n)})}}class Lm extends at{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Lm.create=(t,e)=>new Lm({getter:t,typeName:Be.ZodLazy,...nt(e)});class Vm extends at{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ee(r,{received:r.data,code:de.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}Vm.create=(t,e)=>new Vm({value:t,typeName:Be.ZodLiteral,...nt(e)});function BL(t,e){return new Mo({values:t,typeName:Be.ZodEnum,...nt(e)})}class Mo extends at{constructor(){super(...arguments),mh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ee(r,{expected:_t.joinValues(n),received:r.parsedType,code:de.invalid_type}),We}if(Ov(this,mh)||FL(this,mh,new Set(this._def.values)),!Ov(this,mh).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ee(r,{received:r.data,code:de.invalid_enum_value,options:n}),We}return kn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Mo.create(e,{...this._def,...r})}exclude(e,r=this._def){return Mo.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}mh=new WeakMap;Mo.create=BL;class Fm extends at{constructor(){super(...arguments),fh.set(this,void 0)}_parse(e){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ae.string&&n.parsedType!==Ae.number){const i=_t.objectValues(r);return Ee(n,{expected:_t.joinValues(i),received:n.parsedType,code:de.invalid_type}),We}if(Ov(this,fh)||FL(this,fh,new Set(_t.getValidEnumValues(this._def.values))),!Ov(this,fh).has(e.data)){const i=_t.objectValues(r);return Ee(n,{received:n.data,code:de.invalid_enum_value,options:i}),We}return kn(e.data)}get enum(){return this._def.values}}fh=new WeakMap;Fm.create=(t,e)=>new Fm({values:t,typeName:Be.ZodNativeEnum,...nt(e)});class Xu extends at{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.promise&&r.common.async===!1)return Ee(r,{code:de.invalid_type,expected:Ae.promise,received:r.parsedType}),We;const n=r.parsedType===Ae.promise?r.data:Promise.resolve(r.data);return kn(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Xu.create=(t,e)=>new Xu({type:t,typeName:Be.ZodPromise,...nt(e)});class si extends at{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ee(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return We;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?We:c.status==="dirty"||r.value==="dirty"?su(c.value):c});{if(r.value==="aborted")return We;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?We:l.status==="dirty"||r.value==="dirty"?su(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?We:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?We:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Tm(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Tm(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:r.value,value:l})):o);_t.assertNever(i)}}si.create=(t,e,r)=>new si({schema:t,typeName:Be.ZodEffects,effect:e,...nt(r)});si.createWithPreprocess=(t,e,r)=>new si({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...nt(r)});class ki extends at{_parse(e){return this._getType(e)===Ae.undefined?kn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ki.create=(t,e)=>new ki({innerType:t,typeName:Be.ZodOptional,...nt(e)});class Oo extends at{_parse(e){return this._getType(e)===Ae.null?kn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Oo.create=(t,e)=>new Oo({innerType:t,typeName:Be.ZodNullable,...nt(e)});class $m extends at{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Ae.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}$m.create=(t,e)=>new $m({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});class Um extends at{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Im(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new us(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new us(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Um.create=(t,e)=>new Um({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});class $v extends at{_parse(e){if(this._getType(e)!==Ae.nan){const n=this._getOrReturnCtx(e);return Ee(n,{code:de.invalid_type,expected:Ae.nan,received:n.parsedType}),We}return{status:"valid",value:e.data}}}$v.create=t=>new $v({typeName:Be.ZodNaN,...nt(t)});const Que=Symbol("zod_brand");class VN extends at{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Rf extends at{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?We:a.status==="dirty"?(r.dirty(),su(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?We:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Rf({in:e,out:r,typeName:Be.ZodPipeline})}}class zm extends at{_parse(e){const r=this._def.innerType._parse(e),n=i=>(Tm(i)&&(i.value=Object.freeze(i.value)),i);return Im(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}zm.create=(t,e)=>new zm({innerType:t,typeName:Be.ZodReadonly,...nt(e)});function qL(t,e={},r){return t?Qu.create().superRefine((n,i)=>{var a,o;if(!t(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:r)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:c})}}):Qu.create()}const Xue={object:ir.lazycreate};var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const Jue=(t,e={message:`Input not instance of ${t.name}`})=>qL(r=>r instanceof t,e),WL=Ws.create,HL=Ro.create,Zue=$v.create,ede=Do.create,GL=Am.create,tde=tc.create,rde=Lv.create,nde=Pm.create,sde=Rm.create,ide=Qu.create,ade=Al.create,ode=Ca.create,lde=Vv.create,cde=Qs.create,ude=ir.create,dde=ir.strictCreate,hde=Dm.create,mde=jy.create,fde=Mm.create,pde=Di.create,gde=Om.create,vde=Fv.create,xde=rc.create,yde=Nu.create,wde=Lm.create,bde=Vm.create,jde=Mo.create,_de=Fm.create,Nde=Xu.create,IT=si.create,Sde=ki.create,Ede=Oo.create,Cde=si.createWithPreprocess,kde=Rf.create,Tde=()=>WL().optional(),Ide=()=>HL().optional(),Ade=()=>GL().optional(),Pde={string:t=>Ws.create({...t,coerce:!0}),number:t=>Ro.create({...t,coerce:!0}),boolean:t=>Am.create({...t,coerce:!0}),bigint:t=>Do.create({...t,coerce:!0}),date:t=>tc.create({...t,coerce:!0})},Rde=We;var Fe=Object.freeze({__proto__:null,defaultErrorMap:Yu,setErrorMap:Rue,getErrorMap:Dv,makeIssue:Mv,EMPTY_PATH:Due,addIssueToContext:Ee,ParseStatus:pn,INVALID:We,DIRTY:su,OK:kn,isAborted:vj,isDirty:xj,isValid:Tm,isAsync:Im,get util(){return _t},get objectUtil(){return gj},ZodParsedType:Ae,getParsedType:to,ZodType:at,datetimeRegex:zL,ZodString:Ws,ZodNumber:Ro,ZodBigInt:Do,ZodBoolean:Am,ZodDate:tc,ZodSymbol:Lv,ZodUndefined:Pm,ZodNull:Rm,ZodAny:Qu,ZodUnknown:Al,ZodNever:Ca,ZodVoid:Vv,ZodArray:Qs,ZodObject:ir,ZodUnion:Dm,ZodDiscriminatedUnion:jy,ZodIntersection:Mm,ZodTuple:Di,ZodRecord:Om,ZodMap:Fv,ZodSet:rc,ZodFunction:Nu,ZodLazy:Lm,ZodLiteral:Vm,ZodEnum:Mo,ZodNativeEnum:Fm,ZodPromise:Xu,ZodEffects:si,ZodTransformer:si,ZodOptional:ki,ZodNullable:Oo,ZodDefault:$m,ZodCatch:Um,ZodNaN:$v,BRAND:Que,ZodBranded:VN,ZodPipeline:Rf,ZodReadonly:zm,custom:qL,Schema:at,ZodSchema:at,late:Xue,get ZodFirstPartyTypeKind(){return Be},coerce:Pde,any:ide,array:cde,bigint:ede,boolean:GL,date:tde,discriminatedUnion:mde,effect:IT,enum:jde,function:yde,instanceof:Jue,intersection:fde,lazy:wde,literal:bde,map:vde,nan:Zue,nativeEnum:_de,never:ode,null:sde,nullable:Ede,number:HL,object:ude,oboolean:Ade,onumber:Ide,optional:Sde,ostring:Tde,pipeline:kde,preprocess:Cde,promise:Nde,record:gde,set:xde,strictObject:dde,string:WL,symbol:rde,transformer:IT,tuple:pde,undefined:nde,union:hde,unknown:ade,void:lde,NEVER:Rde,ZodIssueCode:de,quotelessJson:Pue,ZodError:us}),FN="Checkbox",[Dde,$fe]=ps(FN),[Mde,Ode]=Dde(FN),KL=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),v=Je(e,N=>g(N)),y=p.useRef(!1),j=m?d||!!m.closest("form"):!0,[w=!1,x]=hs({prop:i,defaultProp:a,onChange:u}),b=p.useRef(w);return p.useEffect(()=>{const N=m==null?void 0:m.form;if(N){const C=()=>x(b.current);return N.addEventListener("reset",C),()=>N.removeEventListener("reset",C)}},[m,x]),s.jsxs(Mde,{scope:r,state:w,disabled:l,children:[s.jsx(De.button,{type:"button",role:"checkbox","aria-checked":wo(w)?"mixed":w,"aria-required":o,"data-state":XL(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onKeyDown:ve(t.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:ve(t.onClick,N=>{x(C=>wo(C)?!0:!C),j&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),j&&s.jsx(Lde,{control:m,bubbles:!y.current,name:n,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:wo(a)?!1:a})]})});KL.displayName=FN;var YL="CheckboxIndicator",QL=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,a=Ode(YL,r);return s.jsx(Zr,{present:n||wo(a.state)||a.state===!0,children:s.jsx(De.span,{"data-state":XL(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});QL.displayName=YL;var Lde=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:i,...a}=t,o=p.useRef(null),l=fy(r),c=Qx(e);p.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&g){const v=new Event("click",{bubbles:n});d.indeterminate=wo(r),g.call(d,wo(r)?!1:r),d.dispatchEvent(v)}},[l,r,n]);const u=p.useRef(wo(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wo(t){return t==="indeterminate"}function XL(t){return wo(t)?"indeterminate":t?"checked":"unchecked"}var JL=KL,Vde=QL;const Bm=p.forwardRef(({className:t,...e},r)=>s.jsx(JL,{ref:r,className:Oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(Vde,{className:Oe("flex items-center justify-center text-current"),children:s.jsx(oN,{className:"h-4 w-4"})})}));Bm.displayName=JL.displayName;var ZL=["PageUp","PageDown"],e6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},jd="Slider",[wj,Fde,$de]=gf(jd),[r6,Ufe]=ps(jd,[$de]),[Ude,_y]=r6(jd),n6=p.forwardRef((t,e)=>{const{name:r,min:n=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...y}=t,j=p.useRef(new Set),w=p.useRef(0),b=o==="horizontal"?zde:Bde,[N=[],C]=hs({prop:d,defaultProp:u,onChange:A=>{var S;(S=[...j.current][w.current])==null||S.focus(),h(A)}}),P=p.useRef(N);function T(A){const R=Kde(N,A);E(A,R)}function k(A){E(A,w.current)}function D(){const A=P.current[w.current];N[w.current]!==A&&m(N)}function E(A,R,{commit:S}={commit:!1}){const V=Jde(a),U=Zde(Math.round((A-n)/a)*a+n,V),H=km(U,[n,i]);C(($=[])=>{const L=Hde($,H,R);if(Xde(L,c*a)){w.current=L.indexOf(H);const W=String(L)!==String($);return W&&S&&m(L),W?L:$}else return $})}return s.jsx(Ude,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:i,valueIndexToChangeRef:w,thumbs:j.current,values:N,orientation:o,form:v,children:s.jsx(wj.Provider,{scope:t.__scopeSlider,children:s.jsx(wj.Slot,{scope:t.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:e,onPointerDown:ve(y.onPointerDown,()=>{l||(P.current=N)}),min:n,max:i,inverted:g,onSlideStart:l?void 0:T,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:D,onHomeKeyDown:()=>!l&&E(n,0,{commit:!0}),onEndKeyDown:()=>!l&&E(i,N.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:R})=>{if(!l){const U=ZL.includes(A.key)||A.shiftKey&&e6.includes(A.key)?10:1,H=w.current,$=N[H],L=a*U*R;E($+L,H,{commit:!0})}}})})})})});n6.displayName=jd;var[s6,i6]=r6(jd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zde=p.forwardRef((t,e)=>{const{min:r,max:n,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,m]=p.useState(null),g=Je(e,b=>m(b)),v=p.useRef(),y=fc(i),j=y==="ltr",w=j&&!a||!j&&a;function x(b){const N=v.current||h.getBoundingClientRect(),C=[0,N.width],T=$N(C,w?[r,n]:[n,r]);return v.current=N,T(b-N.left)}return s.jsx(s6,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:s.jsx(a6,{dir:y,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const N=x(b.clientX);o==null||o(N)},onSlideMove:b=>{const N=x(b.clientX);l==null||l(N)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:b=>{const C=t6[w?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:C?-1:1})}})})}),Bde=p.forwardRef((t,e)=>{const{min:r,max:n,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),h=Je(e,d),m=p.useRef(),g=!i;function v(y){const j=m.current||d.current.getBoundingClientRect(),w=[0,j.height],b=$N(w,g?[n,r]:[r,n]);return m.current=j,b(y-j.top)}return s.jsx(s6,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:s.jsx(a6,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const j=v(y.clientY);a==null||a(j)},onSlideMove:y=>{const j=v(y.clientY);o==null||o(j)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:y=>{const w=t6[g?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:w?-1:1})}})})}),a6=p.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=_y(jd,r);return s.jsx(De.span,{...u,ref:e,onKeyDown:ve(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):ZL.concat(e6).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ve(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():n(h)}),onPointerMove:ve(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:ve(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),o6="SliderTrack",l6=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=_y(o6,r);return s.jsx(De.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});l6.displayName=o6;var bj="SliderRange",c6=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=_y(bj,r),a=i6(bj,r),o=p.useRef(null),l=Je(e,o),c=i.values.length,u=i.values.map(m=>d6(m,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return s.jsx(De.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});c6.displayName=bj;var jj="SliderThumb",u6=p.forwardRef((t,e)=>{const r=Fde(t.__scopeSlider),[n,i]=p.useState(null),a=Je(e,l=>i(l)),o=p.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(qde,{...t,ref:a,index:o})}),qde=p.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:i,...a}=t,o=_y(jj,r),l=i6(jj,r),[c,u]=p.useState(null),d=Je(e,x=>u(x)),h=c?o.form||!!c.closest("form"):!0,m=Qx(c),g=o.values[n],v=g===void 0?0:d6(g,o.min,o.max),y=Gde(n,o.values.length),j=m==null?void 0:m[l.size],w=j?Yde(j,v,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${w}px)`},children:[s.jsx(wj.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(De.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&s.jsx(Wde,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},n)]})});u6.displayName=jj;var Wde=t=>{const{value:e,...r}=t,n=p.useRef(null),i=fy(e);return p.useEffect(()=>{const a=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[i,e]),s.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:e})};function Hde(t=[],e,r){const n=[...t];return n[r]=e,n.sort((i,a)=>i-a)}function d6(t,e,r){const a=100/(r-e)*(t-e);return km(a,[0,100])}function Gde(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Kde(t,e){if(t.length===1)return 0;const r=t.map(i=>Math.abs(i-e)),n=Math.min(...r);return r.indexOf(n)}function Yde(t,e,r){const n=t/2,a=$N([0,50],[0,n]);return(n-a(e)*r)*r}function Qde(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function Xde(t,e){if(e>0){const r=Qde(t);return Math.min(...r)>=e}return!0}function $N(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function Jde(t){return(String(t).split(".")[1]||"").length}function Zde(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var h6=n6,ehe=l6,the=c6,rhe=u6;const m6=p.forwardRef(({className:t,...e},r)=>s.jsxs(h6,{ref:r,className:Oe("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(ehe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(the,{className:"absolute h-full bg-primary"})}),s.jsx(rhe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));m6.displayName=h6.displayName;const Df=Fe.object({title:Fe.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:Fe.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:Fe.array(Fe.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Fe.string().min(1,"Veuillez spécifier un lieu de rencontre")}),nhe=Df.extend({price:Fe.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:Fe.enum(["new","like-new","good","fair"]),paymentMethods:Fe.array(Fe.string()).min(1,"Sélectionnez au moins un mode de paiement")}),she=Df.extend({donationReason:Fe.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),ihe=Df.extend({desiredItems:Fe.array(Fe.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:Fe.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),ahe=Df.extend({hourlyRate:Fe.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:Fe.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Fe.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:Fe.string().optional()}),ohe=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],AT=[{value:"cash",label:"Espèces",icon:DD},{value:"transfer",label:"Virement bancaire",icon:yr},{value:"lydia",label:"Lydia",icon:mc},{value:"paypal",label:"PayPal",icon:yr}],lhe=()=>{var J,oe,Ce,tt,vt,ct,Ne,Ze;const{currentUser:t,userProfile:e}=Mt(),{createListing:r}=Ef(),n=kr(),[i]=ux(),[a,o]=p.useState(()=>i.get("type")||"sell"),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState([]),[y,j]=p.useState(!1),[w,x]=p.useState([""]),[b,N]=p.useState(""),[C,P]=p.useState([]),[T,k]=p.useState([1]),E=Tl({resolver:Il((()=>{switch(a){case"sell":return nhe;case"gift":return she;case"swap":return ihe;case"service":return ahe;default:return Df}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});p.useEffect(()=>{E.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),v([]),x([""]),P([]),k([1]),c([])},[a,E]);const A=async te=>{if(!t)throw new Error("User not authenticated");const pe=Date.now(),Q=`listings/${t.uid}/${pe}_${te.name}`,le=Ih(Ph,Q),q=await oD(le,te);return await dv(q.ref)},R=async te=>{const pe=te.target.files;if(!(!pe||pe.length===0)){d(!0);try{const le=Array.from(pe).slice(0,10-l.length).filter(Z=>Z.size<=15728640).map(Z=>A(Z)),q=await Promise.all(le);c(Z=>[...Z,...q])}catch(Q){console.error("Error uploading images:",Q)}finally{d(!1)}}},S=te=>{c(pe=>pe.filter((Q,le)=>le!==te))},V=()=>{if(h.trim()&&!g.includes(h.trim())&&g.length<5){const te=[...g,h.trim()];v(te),E.setValue("tags",te),m("")}},U=te=>{const pe=g.filter(Q=>Q!==te);v(pe),E.setValue("tags",pe)},H=()=>{if(b.trim()){const te=[...w.filter(pe=>pe.trim()),b.trim()];x(te),E.setValue("desiredItems",te),N("")}},$=te=>{const pe=w.filter((Q,le)=>le!==te);x(pe),E.setValue("desiredItems",pe)},L=(te,pe)=>{const Q=pe?[...C,te]:C.filter(le=>le!==te);P(Q),E.setValue("paymentMethods",Q)},W=async te=>{if(!(!t||!e)){j(!0);try{const pe={title:te.title,description:te.description,currency:"EUR",category:"electronics",images:l,tags:te.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let Q;switch(a){case"sell":Q={...pe,price:te.price,condition:te.condition,transactionType:"sale",description:`${te.description}

Modes de paiement acceptés: ${C.map(q=>{var Z;return(Z=AT.find(me=>me.value===q))==null?void 0:Z.label}).join(", ")}`};break;case"gift":Q={...pe,price:0,condition:"good",transactionType:"donation",description:`${te.description}

Raison du don: ${te.donationReason}`};break;case"swap":Q={...pe,price:te.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:w.filter(q=>q.trim()).join(", "),description:`${te.description}

Recherche en échange: ${w.filter(q=>q.trim()).join(", ")}
Valeur estimée: ${te.estimatedValue}€`};break;case"service":Q={...pe,price:te.hourlyRate,condition:"new",transactionType:"service",description:`${te.description}

Compétences: ${te.skills}
Tarif: ${te.hourlyRate}€/h
Durée prévue: ${T[0]}h${te.availability?`
Disponibilités: ${te.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",Q);const le=await r(Q);n(`/listing/${le}`)}catch(pe){console.error("Error creating listing:",pe)}finally{j(!1)}}},z=()=>{const te=E.formState.errors,pe=E.watch("title")&&E.watch("description")&&E.watch("meetingLocation")&&g.length>0;switch(a){case"sell":return pe&&E.watch("price")&&C.length>0&&!te.title&&!te.description&&!te.price;case"gift":return pe&&E.watch("donationReason")&&!te.title&&!te.description&&!te.donationReason;case"swap":return pe&&w.some(Q=>Q.trim())&&E.watch("estimatedValue")&&!te.title&&!te.description&&!te.estimatedValue;case"service":return pe&&E.watch("hourlyRate")&&E.watch("skills")&&!te.title&&!te.description&&!te.hourlyRate&&!te.skills;default:return!1}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:E.handleSubmit(W),className:"space-y-8",children:[s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx($b,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(mt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vendre",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Donner",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:"w-8 h-8 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsx(_e,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(ye,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...E.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(J=E.formState.errors.title)==null?void 0:J.message}),s.jsxs("span",{children:[((oe=E.watch("title"))==null?void 0:oe.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(Cs,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...E.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Ce=E.formState.errors.description)==null?void 0:Ce.message}),s.jsxs("span",{children:[((tt=E.watch("description"))==null?void 0:tt.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Vente",className:"w-5 h-5"}),"Informations de vente"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(ye,{id:"price",type:"text",placeholder:"0,00",...E.register("price"),className:"mt-1"}),E.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:E.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(dt,{onValueChange:te=>E.setValue("condition",te),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{placeholder:"Sélectionnez un état"})}),s.jsx(lt,{children:ohe.map(te=>s.jsx(ie,{value:te.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:te.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:te.description})]})},te.value))})]}),E.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:E.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(ce,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:AT.map(te=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bm,{id:te.value,checked:C.includes(te.value),onCheckedChange:pe=>L(te.value,pe)}),s.jsxs(ce,{htmlFor:te.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(te.icon,{className:"w-4 h-4"}),te.label]})]},te.value))}),C.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:"w-5 h-5"}),"Informations du don"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(Cs,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...E.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(vt=E.formState.errors.donationReason)==null?void 0:vt.message}),s.jsxs("span",{children:[((ct=E.watch("donationReason"))==null?void 0:ct.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-5 h-5"}),"Informations d'échange"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[w.filter(te=>te.trim()).map((te,pe)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{value:te,readOnly:!0,className:"flex-1"}),s.jsx(F,{type:"button",variant:"outline",size:"icon",onClick:()=>$(pe),children:s.jsx(GD,{className:"w-4 h-4"})})]},pe)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{placeholder:"Ex: Livre de physique L2",value:b,onChange:te=>N(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),H()),className:"flex-1"}),s.jsx(F,{type:"button",onClick:H,disabled:!b.trim(),children:s.jsx(yo,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(ye,{id:"estimatedValue",type:"text",placeholder:"0,00",...E.register("estimatedValue"),className:"mt-1"}),E.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:E.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Service",className:"w-5 h-5"}),"Informations du service"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(Cs,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...E.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Ne=E.formState.errors.skills)==null?void 0:Ne.message}),s.jsxs("span",{children:[((Ze=E.watch("skills"))==null?void 0:Ze.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(ye,{id:"hourlyRate",type:"text",placeholder:"15,00",...E.register("hourlyRate"),className:"mt-1"}),E.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:E.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(ce,{className:"text-foreground",children:["Durée prévue: ",T[0],"h"]}),s.jsx(m6,{value:T,onValueChange:te=>{k(te),E.setValue("duration",te[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(ye,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...E.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Cl,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(mt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((te,pe)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:te,alt:`Photo ${pe+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(F,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>S(pe),children:s.jsx(Ql,{className:"w-3 h-3"})}),pe===0&&s.jsx(Te,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},pe)),l.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[u?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(pv,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:R,className:"hidden",disabled:u})]})]})})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(wm,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.map(te=>s.jsxs(Te,{variant:"secondary",className:"flex items-center gap-1",children:[te,s.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>U(te),children:s.jsx(Ql,{className:"w-3 h-3"})})]},te))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{placeholder:"Ajouter un tag...",value:h,onChange:te=>m(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),V()),className:"flex-1"}),s.jsx(F,{type:"button",onClick:V,disabled:!h.trim()||g.length>=5,children:"Ajouter"})]}),g.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsx(ye,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...E.register("meetingLocation"),className:"mt-1"}),E.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:E.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(la,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("title")&&E.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("title")&&E.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("description")&&E.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("description")&&E.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${g.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${g.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("price")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Prix (≥ 1€)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${C.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${C.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("donationReason")&&E.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("donationReason")&&E.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Motif du don"})]}),a==="swap"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${w.some(te=>te.trim())?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${w.some(te=>te.trim())?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Objets recherchés"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Valeur estimée"})]})]}),a==="service"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tarif (≥ 5€/h)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${E.watch("skills")&&E.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${E.watch("skills")&&E.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Compétences"})]})]})]})})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(et,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:y||!z()||u,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx($b,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:z()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var UN="Tabs",[che,zfe]=ps(UN,[Zx]),f6=Zx(),[uhe,zN]=che(UN),p6=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=fc(l),[h,m]=hs({prop:n,onChange:i,defaultProp:a});return s.jsx(uhe,{scope:r,baseId:ls(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(De.div,{dir:d,"data-orientation":o,...u,ref:e})})});p6.displayName=UN;var g6="TabsList",v6=p.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,a=zN(g6,r),o=f6(r);return s.jsx(IM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:s.jsx(De.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});v6.displayName=g6;var x6="TabsTrigger",y6=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=t,o=zN(x6,r),l=f6(r),c=j6(o.baseId,n),u=_6(o.baseId,n),d=n===o.value;return s.jsx(AM,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(De.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:ve(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:ve(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:ve(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(n)})})})});y6.displayName=x6;var w6="TabsContent",b6=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...o}=t,l=zN(w6,r),c=j6(l.baseId,n),u=_6(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Zr,{present:i||d,children:({present:m})=>s.jsx(De.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});b6.displayName=w6;function j6(t,e){return`${t}-trigger-${e}`}function _6(t,e){return`${t}-content-${e}`}var dhe=p6,N6=v6,S6=y6,E6=b6;const xc=dhe,Jo=p.forwardRef(({className:t,...e},r)=>s.jsx(N6,{ref:r,className:Oe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Jo.displayName=N6.displayName;const Wt=p.forwardRef(({className:t,...e},r)=>s.jsx(S6,{ref:r,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));Wt.displayName=S6.displayName;const Ht=p.forwardRef(({className:t,...e},r)=>s.jsx(E6,{ref:r,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ht.displayName=E6.displayName;class hhe{static async uploadProfilePhoto(e,r,n){if(!r.type.startsWith("image/"))throw new Error("Le fichier doit être une image");if(r.size>5*1024*1024)throw new Error("L'image ne peut pas dépasser 5MB");const a=`profile_${Date.now()}.${r.name.split(".").pop()}`,o=Ih(Ph,`users/${e}/${a}`);return new Promise((l,c)=>{const u=zC(o,r,{contentType:r.type,cacheControl:"public,max-age=3600",customMetadata:{uploadedAt:new Date().toISOString(),userId:e}});u.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;n==null||n({progress:h,isComplete:!1})},d=>{console.error("Upload error:",d);let h="Erreur lors de l'upload";switch(d.code){case"storage/unauthorized":h="Vous n'êtes pas autorisé à upload ce fichier";break;case"storage/canceled":h="Upload annulé";break;case"storage/quota-exceeded":h="Quota de stockage dépassé";break;case"storage/invalid-format":h="Format de fichier invalide";break}n==null||n({progress:0,isComplete:!1,error:h}),c(new Error(h))},async()=>{try{const d=await dv(u.snapshot.ref);n==null||n({progress:100,isComplete:!0,downloadURL:d}),l(d)}catch(d){c(d)}})})}static async deleteFile(e){try{const r=Ih(Ph,e);await SK(r)}catch(r){console.error("Error deleting file:",r)}}static async uploadListingImages(e,r,n){const i=r.map(async(a,o)=>{const l=Date.now(),c=`image_${o}_${l}.${a.name.split(".").pop()}`,u=Ih(Ph,`listings/${e}/${c}`);return new Promise((d,h)=>{const m=zC(u,a,{contentType:a.type,cacheControl:"public,max-age=3600"});m.on("state_changed",g=>{const v=g.bytesTransferred/g.totalBytes*100;n==null||n(o,{progress:v,isComplete:!1})},g=>{n==null||n(o,{progress:0,isComplete:!1,error:g.message}),h(g)},async()=>{const g=await dv(m.snapshot.ref);n==null||n(o,{progress:100,isComplete:!0,downloadURL:g}),d(g)})})});return Promise.all(i)}static async uploadCompressedImage(e,r=1200,n=1200,i=.8){return new Promise(a=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:d}=c;u>d?u>r&&(d=d*r/u,u=r):d>n&&(u=u*n/d,d=n),o.width=u,o.height=d,l.drawImage(c,0,0,u,d),o.toBlob(h=>{if(h){const m=new File([h],e.name,{type:e.type,lastModified:Date.now()});a(m)}else a(e)},e.type,i)},c.src=URL.createObjectURL(e)})}}const C6=({currentPhotoURL:t,displayName:e,onPhotoUpdate:r})=>{var x,b;const{currentUser:n,updateUserProfile:i}=Mt(),[a,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(null),[h,m]=p.useState(null),g=p.useRef(null),v=N=>{var T;const C=(T=N.target.files)==null?void 0:T[0];if(!C)return;if(!C.type.startsWith("image/")){ne.error("Veuillez sélectionner une image");return}if(C.size>5*1024*1024){ne.error("L'image ne doit pas dépasser 5MB");return}m(C);const P=new FileReader;P.onload=k=>{var D;d((D=k.target)==null?void 0:D.result)},P.readAsDataURL(C)},y=async()=>{if(!(!h||!n)){c(!0);try{const N=await hhe.uploadProfilePhoto(n.uid,h,C=>{C.error&&ne.error(C.error)});await cm(n,{photoURL:N}),await i({photoURL:N}),r&&r(N),ne.success("Photo de profil mise à jour avec succès !"),o(!1),d(null),m(null)}catch(N){console.error("Erreur lors de l'upload:",N);let C="Erreur lors de la mise à jour de la photo";N&&typeof N=="object"&&"message"in N&&typeof N.message=="string"&&(N.message.includes("duplicate")?C="Une photo avec ce nom existe déjà, réessayez":N.message.includes("size")?C="Fichier trop volumineux":N.message.includes("type")&&(C="Type de fichier non supporté")),ne.error(C)}finally{c(!1)}}},j=async()=>{if(n){c(!0);try{await cm(n,{photoURL:void 0}),await i({photoURL:void 0}),r&&r(void 0),ne.success("Photo de profil supprimée"),o(!1)}catch(N){console.error("Erreur lors de la suppression:",N),ne.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},w=()=>{m(null),d(null),g.current&&(g.current.value="")};return s.jsxs(ua,{open:a,onOpenChange:o,children:[s.jsx(ju,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(is,{className:"h-20 w-20",children:[s.jsx(Ea,{src:t||""}),s.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xl font-semibold",children:((x=e[0])==null?void 0:x.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Cl,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(Cl,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Ei,{className:"max-w-md",children:[s.jsx(da,{children:s.jsxs(Ci,{className:"flex items-center gap-2",children:[s.jsx(Cl,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(is,{className:"h-32 w-32",children:[s.jsx(Ea,{src:u||t||""}),s.jsx(Fn,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((b=e[0])==null?void 0:b.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:v,className:"hidden"}),h?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:h.name}),s.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{onClick:y,disabled:l,className:"flex-1",children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(pv,{className:"w-4 h-4 mr-2"}),l?"Upload en cours...":"Uploader"]}),s.jsx(F,{onClick:w,variant:"outline",disabled:l,children:s.jsx(Ql,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(F,{onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},variant:"outline",className:"w-full",children:[s.jsx(pv,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(F,{onClick:j,variant:"outline",disabled:l,className:"w-full text-destructive hover:text-destructive",children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]})]})]})]})},xn=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},mhe=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(null),[d,h]=p.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[m,g]=p.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[v,y]=p.useState({}),[j,w]=p.useState(null),[x,b]=p.useState(""),[N,C]=p.useState((c==null?void 0:c.firstName)||""),[P,T]=p.useState((c==null?void 0:c.lastName)||""),k=async()=>{if(t)try{g(le=>({...le,profile:!0}));const Q=await Gr(ze(fe,"users",t.uid));if(Q.exists()){const le=Q.data();u({...le,createdAt:xn(le.createdAt),updatedAt:xn(le.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),u(null)}catch(Q){console.error("Erreur lors du chargement du profil:",Q),u(null)}finally{g(Q=>({...Q,profile:!1}))}};p.useEffect(()=>{t&&(k(),D(),E(),A())},[t]);const D=async()=>{if(t)try{g(me=>({...me,listings:!0}));const Q=$t(Nt(fe,"listings"),Bt("sellerId","==",t.uid),Ss(20)),le=await Zt(Q),q=[];le.forEach(me=>{const Ie=me.data();q.push({id:me.id,...Ie,createdAt:xn(Ie.createdAt),updatedAt:xn(Ie.updatedAt)})}),q.sort((me,Ie)=>xn(Ie.createdAt).getTime()-xn(me.createdAt).getTime()),n(q);const Z=q.filter(me=>me.status==="active");h(me=>({...me,totalListings:q.length,activeListings:Z.length}))}catch(Q){console.error("Erreur lors du chargement des annonces:",Q)}finally{g(Q=>({...Q,listings:!1}))}},E=async()=>{if(t)try{g(O=>({...O,reviews:!0}));const Q=$t(Nt(fe,"reviews"),Bt("revieweeId","==",t.uid),Ss(10)),le=await Zt(Q),q=[];le.forEach(O=>{const B=O.data();q.push({id:O.id,...B,replies:Array.isArray(B.replies)?B.replies.map(X=>({...X,createdAt:X.createdAt instanceof Date?X.createdAt:X.createdAt&&typeof X.createdAt.toDate=="function"?X.createdAt.toDate():new Date})):[],likes:Array.isArray(B.likes)?B.likes:[],dislikes:Array.isArray(B.dislikes)?B.dislikes:[],createdAt:xn(B.createdAt)})}),q.sort((O,B)=>xn(B.createdAt).getTime()-xn(O.createdAt).getTime()),a(q);const Z=Array.from(new Set(q.map(O=>O.reviewerId))),me={...v};await Promise.all(Z.map(async O=>{if(!me[O]){const B=await Gr(ze(fe,"users",O));if(B.exists()){const X=B.data();me[O]={displayName:X.displayName||"Utilisateur",photoURL:X.photoURL||void 0}}else me[O]={displayName:""}}})),y(me);const Ie=q.reduce((O,B)=>O+B.rating,0),He=q.length>0?Ie/q.length:0;h(O=>({...O,totalReviews:q.length,averageRating:Math.round(He*10)/10}))}catch(Q){console.error("Erreur lors du chargement des avis:",Q)}finally{g(Q=>({...Q,reviews:!1}))}},A=async()=>{if(t)try{g(Z=>({...Z,favorites:!0}));const Q=$t(Nt(fe,"favorites"),Bt("userId","==",t.uid),Ss(20)),le=await Zt(Q),q=[];if(le.forEach(Z=>{const me=Z.data();q.push({id:Z.id,...me,createdAt:xn(me.createdAt)})}),q.sort((Z,me)=>xn(me.createdAt).getTime()-xn(Z.createdAt).getTime()),h(Z=>({...Z,totalFavorites:q.length})),q.length>0){const Z=q.slice(0,6).map(async Ie=>{try{const He=await Gr(ze(fe,"listings",Ie.listingId));if(He.exists()){const O=He.data();return{id:He.id,...O,createdAt:xn(O.createdAt),updatedAt:xn(O.updatedAt)}}return null}catch(He){return console.error("Erreur lors du chargement d'une annonce favorite:",He),null}}),me=await Promise.all(Z);l(me.filter(Ie=>Ie!==null))}}catch(Q){console.error("Erreur lors du chargement des favoris:",Q)}finally{g(Q=>({...Q,favorites:!1}))}},R=Q=>{if(!Q)return"Date inconnue";try{const le=xn(Q);return isNaN(le.getTime())?"Date invalide":wd(le,{addSuffix:!0,locale:un})}catch{return"Date invalide"}},S=Q=>Array.from({length:5},(le,q)=>s.jsx(ra,{className:`h-4 w-4 ${q<Q?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},q)),V=localStorage.getItem("pendingUserData"),U=V?JSON.parse(V):{};let H=(c==null?void 0:c.displayName)||(e==null?void 0:e.displayName)||U.displayName||"";!H&&(t!=null&&t.displayName)&&(H=t.displayName),!H&&(t!=null&&t.email)&&(H=t.email.split("@")[0]),H||(H="Utilisateur");let $=(c==null?void 0:c.university)||(e==null?void 0:e.university)||U.university||"";if((c==null?void 0:c.university)==="Autre université"&&c.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||U.university==="Autre université"&&U.otherUniversity){const Q=c==null?void 0:c.otherUniversity,le=e==null?void 0:e.otherUniversity,q=U.otherUniversity;$=Q||le||q||"Université personnalisée"}$||($="Université spécifiée lors de l'inscription");let L=(c==null?void 0:c.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||U.fieldOfStudy||"";if((c==null?void 0:c.fieldOfStudy)==="Autre"&&c.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||U.fieldOfStudy==="Autre"&&U.otherFieldOfStudy){const Q=c==null?void 0:c.otherFieldOfStudy,le=e==null?void 0:e.otherFieldOfStudy,q=U.otherFieldOfStudy;L=Q||le||q||"Filière personnalisée"}L||(L="Filière non spécifiée");const W=(c==null?void 0:c.graduationYear)||(e==null?void 0:e.graduationYear)||U.graduationYear||"",z=(c==null?void 0:c.email)||(e==null?void 0:e.email)||U.email||(t==null?void 0:t.email)||"",J=(c==null?void 0:c.photoURL)||(e==null?void 0:e.photoURL)||"",oe=(c==null?void 0:c.createdAt)||(e==null?void 0:e.createdAt),Ce=(c==null?void 0:c.isVerified)||(e==null?void 0:e.isVerified),tt=(c==null?void 0:c.location)||(e==null?void 0:e.location)||"",vt=(c==null?void 0:c.co2Saved)||(e==null?void 0:e.co2Saved)||0,ct=t&&e&&t.uid===e.id,Ne=async Q=>{if(t)try{const le=ze(fe,"reviews",Q),q=i.find(Ie=>Ie.id===Q);if(!q)return;const Z=q.likes||[],me=q.dislikes||[];Z.includes(t.uid)?await mr(le,{likes:Z.filter(Ie=>Ie!==t.uid)}):await mr(le,{likes:[...Z,t.uid],dislikes:me.filter(Ie=>Ie!==t.uid)}),a(Ie=>Ie.map(He=>{if(He.id===Q){const O=He.likes||[],B=He.dislikes||[];return O.includes(t.uid)?{...He,likes:O.filter(X=>X!==t.uid)}:{...He,likes:[...O,t.uid],dislikes:B.filter(X=>X!==t.uid)}}return He}))}catch(le){console.error("Error liking review:",le),xr.error("Erreur lors du like")}},Ze=async Q=>{if(t)try{const le=ze(fe,"reviews",Q),q=i.find(Ie=>Ie.id===Q);if(!q)return;const Z=q.likes||[],me=q.dislikes||[];me.includes(t.uid)?await mr(le,{dislikes:me.filter(Ie=>Ie!==t.uid)}):await mr(le,{dislikes:[...me,t.uid],likes:Z.filter(Ie=>Ie!==t.uid)}),a(Ie=>Ie.map(He=>{if(He.id===Q){const O=He.likes||[],B=He.dislikes||[];return B.includes(t.uid)?{...He,dislikes:B.filter(X=>X!==t.uid)}:{...He,dislikes:[...B,t.uid],likes:O.filter(X=>X!==t.uid)}}return He}))}catch(le){console.error("Error disliking review:",le),xr.error("Erreur lors du dislike")}},te=async Q=>{if(!(!t||!x.trim()))try{const le=ze(fe,"reviews",Q),q=i.find(me=>me.id===Q);if(!q)return;const Z={userId:t.uid,comment:x.trim(),createdAt:new Date};await mr(le,{replies:[...q.replies||[],Z]}),a(me=>me.map(Ie=>Ie.id===Q?{...Ie,replies:[...Ie.replies||[],Z]}:Ie)),b(""),w(null),xr.success("Réponse envoyée")}catch(le){console.error("Error replying to review:",le),xr.error("Erreur lors de l'envoi de la réponse")}},pe=async()=>{if(t)try{const Q=`${N} ${P}`.trim();await mr(ze(fe,"users",t.uid),{firstName:N,lastName:P,displayName:Q,updatedAt:new Date}),await t.reload(),xr.success("Nom mis à jour !")}catch{xr.error("Erreur lors de la mise à jour du nom")}};return t?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 space-y-4 sm:space-y-6",children:[s.jsx(K,{children:s.jsx(je,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(C6,{currentPhotoURL:J,displayName:H}),Ce&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(et,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(_e,{className:"text-xl sm:text-2xl lg:text-3xl text-center sm:text-left w-full sm:w-auto",children:H}),Ce?s.jsxs(Te,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[s.jsx(et,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsxs(Te,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[s.jsx(et,{className:"w-3 h-3 mr-1"}),"Non vérifié"]})]}),s.jsx(mt,{className:"text-sm sm:text-base text-center sm:text-left break-all",children:z}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left text-xs sm:text-sm",children:[s.jsxs("div",{children:[s.jsx(Qr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Université : ",s.jsx("span",{className:"text-xs sm:text-sm",children:$})]}),s.jsxs("div",{children:[s.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Filière : ",s.jsx("span",{className:"text-xs sm:text-sm",children:L})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",s.jsx("span",{className:"text-xs sm:text-sm",children:W})]})]}),tt&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Hr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsx("span",{className:"text-xs sm:text-sm",children:tt})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(_s,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsxs("span",{className:"text-xs sm:text-sm",children:["Membre depuis ",R(oe)]})]}),vt&&vt>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(Ys,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[vt," kg CO₂ économisés"]})]}),!Ce&&s.jsx("div",{className:"flex items-center justify-center sm:justify-start mt-3",children:s.jsx(F,{asChild:!0,size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(ge,{to:"/verification",children:[s.jsx(et,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Vérifier mon statut étudiant"]})})})]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalListings}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ja,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.activeListings}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ra,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.reviews?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.averageRating||"—"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(cn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.favorites?s.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalFavorites}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(xc,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-4 sm:grid-cols-4",children:[s.jsxs(Wt,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(rr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!m.listings&&d.totalListings>0&&s.jsx(Te,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalListings})]}),s.jsxs(Wt,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(ra,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!m.reviews&&d.totalReviews>0&&s.jsx(Te,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalReviews})]}),s.jsxs(Wt,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(cn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!m.favorites&&d.totalFavorites>0&&s.jsx(Te,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalFavorites})]}),s.jsxs(Wt,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Qr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),s.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),s.jsx(Ht,{value:"listings",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(rr,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(mt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(Y,{children:m.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Q,le)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},le))}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(rr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx(F,{asChild:!0,children:s.jsx(ge,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(Q=>s.jsx(Cm,{listing:Q},Q.id))})})]})}),s.jsx(Ht,{value:"reviews",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(ra,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(mt,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(Y,{children:m.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((Q,le)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((q,Z)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Z))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},le))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(Q=>{var le,q,Z,me,Ie,He;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:S(Q.rating)}),s.jsxs(Te,{variant:"secondary",className:"text-xs",children:[Q.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:R(Q.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:Q.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((le=v[Q.reviewerId])==null?void 0:le.photoURL)&&s.jsx("img",{src:v[Q.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),Q.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(q=v[Q.reviewerId])!=null&&q.displayName?v[Q.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),s.jsx(Te,{variant:"outline",className:"text-xs",children:Q.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(F,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Z=Q.likes)!=null&&Z.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>Ne(Q.id),children:[s.jsx(NQ,{className:"w-4 h-4"}),s.jsx("span",{children:((me=Q.likes)==null?void 0:me.length)||0})]}),s.jsxs(F,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ie=Q.dislikes)!=null&&Ie.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Ze(Q.id),children:[s.jsx(_Q,{className:"w-4 h-4"}),s.jsx("span",{children:((He=Q.dislikes)==null?void 0:He.length)||0})]}),s.jsxs(F,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>w(j===Q.id?null:Q.id),children:[s.jsx(Gt,{className:"w-4 h-4"}),s.jsx("span",{children:"Répondre"})]})]}),j===Q.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(Cs,{placeholder:"Votre réponse...",value:x,onChange:O=>b(O.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>{w(null),b("")},children:"Annuler"}),s.jsx(F,{size:"sm",onClick:()=>te(Q.id),disabled:!x.trim(),children:"Envoyer"})]})]}),Q.replies&&Q.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:Q.replies.map((O,B)=>{var X;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:ct&&O.userId===(t==null?void 0:t.uid)?"Vous":((X=v[O.userId])==null?void 0:X.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:R(O.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:O.comment})]},B)})})]},Q.id)})})})]})}),s.jsx(Ht,{value:"favorites",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(mt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(Y,{children:m.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Q,le)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},le))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(cn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx(F,{asChild:!0,children:s.jsx(ge,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Q=>s.jsx(Cm,{listing:Q},Q.id))})})]})}),s.jsx(Ht,{value:"settings",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsx(_e,{children:"Paramètres du profil"}),s.jsx(mt,{children:"Modifie tes informations principales."})]}),s.jsxs(Y,{children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ce,{htmlFor:"firstName",children:"Prénom"}),s.jsx(ye,{id:"firstName",value:N,onChange:Q=>C(Q.target.value),autoComplete:"given-name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ce,{htmlFor:"lastName",children:"Nom"}),s.jsx(ye,{id:"lastName",value:P,onChange:Q=>T(Q.target.value),autoComplete:"family-name"})]})]}),s.jsx(F,{onClick:pe,disabled:!N||!P,children:"Enregistrer"})]})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var BN="Switch",[fhe,Bfe]=ps(BN),[phe,ghe]=fhe(BN),k6=p.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),v=Je(e,b=>g(b)),y=p.useRef(!1),j=m?d||!!m.closest("form"):!0,[w=!1,x]=hs({prop:i,defaultProp:a,onChange:u});return s.jsxs(phe,{scope:r,checked:w,disabled:l,children:[s.jsx(De.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":A6(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ve(t.onClick,b=>{x(N=>!N),j&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),j&&s.jsx(vhe,{control:m,bubbles:!y.current,name:n,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});k6.displayName=BN;var T6="SwitchThumb",I6=p.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=ghe(T6,r);return s.jsx(De.span,{"data-state":A6(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});I6.displayName=T6;var vhe=t=>{const{control:e,checked:r,bubbles:n=!0,...i}=t,a=p.useRef(null),o=fy(r),l=Qx(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[o,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function A6(t){return t?"checked":"unchecked"}var P6=k6,xhe=I6;const Pr=p.forwardRef(({className:t,...e},r)=>s.jsx(P6,{className:Oe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:s.jsx(xhe,{className:Oe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Pr.displayName=P6.displayName;const yhe=Fe.object({displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:Fe.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:Fe.string().optional(),university:Fe.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Fe.number().min(2020).max(2035),campus:Fe.string().optional(),location:Fe.string().optional()}),whe=Fe.object({currentPassword:Fe.string().min(6,"Le mot de passe actuel est requis"),newPassword:Fe.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),bhe=Fe.object({newEmail:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Mot de passe requis pour changer l'email")}),jhe=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],_he=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],Nhe=()=>{var V,U,H,$,L,W;const{currentUser:t,userProfile:e,updateUserProfile:r,logout:n}=Mt(),i=kr(),[a,o]=p.useState("profile"),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState(!1),[g,v]=p.useState(!1),[y,j]=p.useState(""),[w,x]=p.useState({email:((V=e==null?void 0:e.notificationPreferences)==null?void 0:V.email)??!0,push:((U=e==null?void 0:e.notificationPreferences)==null?void 0:U.push)??!0,sms:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.sms)??!1,alerts:(($=e==null?void 0:e.notificationPreferences)==null?void 0:$.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[b,N]=p.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),C=Tl({resolver:Il(yhe),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),P=Tl({resolver:Il(whe)}),T=Tl({resolver:Il(bhe)});p.useEffect(()=>{var z,J,oe,Ce;e&&(C.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),x({email:((z=e.notificationPreferences)==null?void 0:z.email)??!0,push:((J=e.notificationPreferences)==null?void 0:J.push)??!0,sms:((oe=e.notificationPreferences)==null?void 0:oe.sms)??!1,alerts:((Ce=e.notificationPreferences)==null?void 0:Ce.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,C]);const k=async z=>{c(!0);try{await r({displayName:z.displayName,bio:z.bio||void 0,phone:z.phone||void 0,university:z.university,fieldOfStudy:z.fieldOfStudy,graduationYear:z.graduationYear,campus:z.campus||void 0,location:z.location||void 0}),ne.success("Profil mis à jour avec succès !")}catch(J){console.error("Erreur lors de la mise à jour du profil:",J),ne.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}},D=async()=>{c(!0);try{await r({notificationPreferences:{email:w.email,push:w.push,sms:w.sms,alerts:w.alerts}}),ne.success("Préférences de notification mises à jour !")}catch(z){console.error("Erreur lors de la mise à jour des notifications:",z),ne.error("Erreur lors de la mise à jour des notifications")}finally{c(!1)}},E=async z=>{if(t){c(!0);try{const J=_o.credential(t.email,z.currentPassword);await L2(t,J),await ZB(t,z.newPassword),ne.success("Mot de passe mis à jour avec succès !"),m(!1),P.reset()}catch(J){console.error("Erreur lors du changement de mot de passe:",J),J.code==="auth/wrong-password"?ne.error("Mot de passe actuel incorrect"):ne.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},A=async z=>{if(t){c(!0);try{const J=_o.credential(t.email,z.password);await L2(t,J),await JB(t,z.newEmail),await r({email:z.newEmail}),ne.success("Email mis à jour avec succès !"),v(!1),T.reset()}catch(J){console.error("Erreur lors du changement d'email:",J),J.code==="auth/wrong-password"?ne.error("Mot de passe incorrect"):J.code==="auth/email-already-in-use"?ne.error("Cet email est déjà utilisé"):ne.error("Erreur lors du changement d'email")}finally{c(!1)}}},R=async()=>{if(!(!t||y!=="SUPPRIMER")){c(!0);try{const z=$4(fe),J=["listings","conversations","reviews","favorites","reports"];for(const oe of J){const Ce=$t(Nt(fe,oe),Bt("userId","==",t.uid));(await Zt(Ce)).forEach(vt=>{z.delete(vt.ref)})}z.delete(ze(fe,"users",t.uid)),await z.commit(),await s7(t),ne.success("Compte supprimé avec succès"),i("/")}catch(z){console.error("Erreur lors de la suppression du compte:",z),ne.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},S=async()=>{if(t){c(!0);try{const z={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},J=$t(Nt(fe,"listings"),Bt("sellerId","==",t.uid)),oe=await Zt(J);z.listings=oe.docs.map(q=>({id:q.id,...q.data()}));const Ce=$t(Nt(fe,"conversations"),Bt("participants","array-contains",t.uid)),tt=await Zt(Ce);z.conversations=tt.docs.map(q=>({id:q.id,...q.data()}));const vt=$t(Nt(fe,"reviews"),Bt("revieweeId","==",t.uid)),ct=await Zt(vt);z.reviews=ct.docs.map(q=>({id:q.id,...q.data()}));const Ne=$t(Nt(fe,"favorites"),Bt("userId","==",t.uid)),Ze=await Zt(Ne);z.favorites=Ze.docs.map(q=>({id:q.id,...q.data()}));const te=JSON.stringify(z,null,2),pe=new Blob([te],{type:"application/json"}),Q=URL.createObjectURL(pe),le=document.createElement("a");le.href=Q,le.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,le.click(),URL.revokeObjectURL(Q),ne.success("Données exportées avec succès !")}catch(z){console.error("Erreur lors de l'export des données:",z),ne.error("Erreur lors de l'export des données")}finally{c(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(zx,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(xc,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-5",children:[s.jsxs(Wt,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(Qr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(Wt,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(Wt,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Co,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(Wt,{value:"security",className:"flex items-center gap-2",children:[s.jsx(et,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(Wt,{value:"data",className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(Ht,{value:"profile",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Qr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(mt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(C6,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(ws,{}),s.jsxs("form",{onSubmit:C.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(ye,{id:"displayName",...C.register("displayName"),placeholder:"Votre nom complet"}),C.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"phone",children:"Téléphone"}),s.jsx(ye,{id:"phone",type:"tel",...C.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"bio",children:"Biographie"}),s.jsx(Cs,{id:"bio",...C.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((L=C.watch("bio"))==null?void 0:L.length)||0,"/500 caractères"]})]}),s.jsx(ws,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"university",children:"Université *"}),s.jsxs(dt,{value:C.watch("university"),onValueChange:z=>C.setValue("university",z),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Sélectionnez votre université"})}),s.jsx(lt,{children:jhe.map(z=>s.jsx(ie,{value:z,children:z},z))})]}),C.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(dt,{value:C.watch("fieldOfStudy"),onValueChange:z=>C.setValue("fieldOfStudy",z),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Sélectionnez votre filière"})}),s.jsx(lt,{children:_he.map(z=>s.jsx(ie,{value:z,children:z},z))})]}),C.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(dt,{value:(W=C.watch("graduationYear"))==null?void 0:W.toString(),onValueChange:z=>C.setValue("graduationYear",parseInt(z)),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Année de diplôme"})}),s.jsx(lt,{children:Array.from({length:16},(z,J)=>2020+J).map(z=>s.jsx(ie,{value:z.toString(),children:z},z))})]}),C.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"campus",children:"Campus"}),s.jsx(ye,{id:"campus",...C.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"location",children:"Localisation"}),s.jsx(ye,{id:"location",...C.register("location"),placeholder:"Paris, France"})]}),s.jsx(F,{type:"submit",disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(O0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(Ht,{value:"notifications",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(mt,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(Pr,{checked:w.email,onCheckedChange:z=>x(J=>({...J,email:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mc,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(Pr,{checked:w.push,onCheckedChange:z=>x(J=>({...J,push:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(cd,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(Pr,{checked:w.sms,onCheckedChange:z=>x(J=>({...J,sms:z})),disabled:!0})]})]})]}),s.jsx(ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gt,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(Pr,{checked:w.messages,onCheckedChange:z=>x(J=>({...J,messages:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(Pr,{checked:w.listings,onCheckedChange:z=>x(J=>({...J,listings:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ra,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(Pr,{checked:w.reviews,onCheckedChange:z=>x(J=>({...J,reviews:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Us,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(Pr,{checked:w.alerts,onCheckedChange:z=>x(J=>({...J,alerts:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yQ,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(Pr,{checked:w.marketing,onCheckedChange:z=>x(J=>({...J,marketing:z}))})]})]})]}),s.jsx(F,{onClick:D,disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(O0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(Ht,{value:"privacy",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Co,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(mt,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(Pr,{checked:b.profileVisibility==="public",onCheckedChange:z=>N(J=>({...J,profileVisibility:z?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(Pr,{checked:b.showEmail,onCheckedChange:z=>N(J=>({...J,showEmail:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(Pr,{checked:b.showPhone,onCheckedChange:z=>N(J=>({...J,showPhone:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(Pr,{checked:b.showUniversity,onCheckedChange:z=>N(J=>({...J,showUniversity:z}))})]})]})]}),s.jsx(ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(Pr,{checked:b.allowMessages,onCheckedChange:z=>N(J=>({...J,allowMessages:z}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(Pr,{checked:b.showOnlineStatus,onCheckedChange:z=>N(J=>({...J,showOnlineStatus:z}))})]})]})]}),s.jsxs(It,{children:[s.jsx(et,{className:"h-4 w-4"}),s.jsx(At,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(Ht,{value:"security",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(et,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(mt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fr,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(ua,{open:g,onOpenChange:v,children:[s.jsx(ju,{asChild:!0,children:s.jsx(F,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Ei,{children:[s.jsxs(da,{children:[s.jsx(Ci,{children:"Changer l'adresse email"}),s.jsx(_u,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:T.handleSubmit(A),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(ye,{id:"newEmail",type:"email",...T.register("newEmail"),placeholder:"nouveau@email.com"}),T.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(ye,{id:"emailPassword",type:"password",...T.register("password"),placeholder:"••••••••"}),T.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.password.message})]}),s.jsxs(pg,{children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",disabled:l,children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(O0,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Kl,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(ua,{open:h,onOpenChange:m,children:[s.jsx(ju,{asChild:!0,children:s.jsx(F,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Ei,{children:[s.jsxs(da,{children:[s.jsx(Ci,{children:"Changer le mot de passe"}),s.jsx(_u,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:P.handleSubmit(E),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(ye,{id:"currentPassword",type:"password",...P.register("currentPassword"),placeholder:"••••••••"}),P.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:P.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(ye,{id:"newPassword",type:"password",...P.register("newPassword"),placeholder:"••••••••"}),P.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:P.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(ye,{id:"confirmPassword",type:"password",...P.register("confirmPassword"),placeholder:"••••••••"}),P.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:P.formState.errors.confirmPassword.message})]}),s.jsxs(pg,{children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",disabled:l,children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(gQ,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(Te,{className:"bg-green-100 text-green-800",children:[s.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(Te,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(It,{children:[s.jsx(et,{className:"h-4 w-4"}),s.jsx(At,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(Ht,{value:"data",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(mt,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs(F,{onClick:S,disabled:l,variant:"outline",children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(It,{className:"border-destructive",children:[s.jsx(Kt,{className:"h-4 w-4"}),s.jsx(At,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(ua,{open:u,onOpenChange:d,children:[s.jsx(ju,{asChild:!0,children:s.jsxs(F,{variant:"destructive",children:[s.jsx(ca,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Ei,{children:[s.jsxs(da,{children:[s.jsx(Ci,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(_u,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(ye,{id:"deleteConfirm",value:y,onChange:z=>j(z.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(pg,{children:[s.jsx(F,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),s.jsxs(F,{variant:"destructive",onClick:R,disabled:y!=="SUPPRIMER"||l,children:[l?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ca,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(fv,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(F,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(F,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx(F,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(F,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function She(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:j,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,Ehe(i,...e)]}function Ehe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var qN="Progress",WN=100,[Che,qfe]=She(qN),[khe,The]=Che(qN),R6=p.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=Ihe,...o}=t;(i||i===0)&&!PT(i)&&console.error(Ahe(`${i}`,"Progress"));const l=PT(i)?i:WN;n!==null&&!RT(n,l)&&console.error(Phe(`${n}`,"Progress"));const c=RT(n,l)?n:null,u=Uv(c)?a(c,l):void 0;return s.jsx(khe,{scope:r,value:c,max:l,children:s.jsx(De.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Uv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":O6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});R6.displayName=qN;var D6="ProgressIndicator",M6=p.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,i=The(D6,r);return s.jsx(De.div,{"data-state":O6(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});M6.displayName=D6;function Ihe(t,e){return`${Math.round(t/e*100)}%`}function O6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Uv(t){return typeof t=="number"}function PT(t){return Uv(t)&&!isNaN(t)&&t>0}function RT(t,e){return Uv(t)&&!isNaN(t)&&t<=e&&t>=0}function Ahe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${WN}\`.`}function Phe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${WN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var L6=R6,Rhe=M6;const V6=p.forwardRef(({className:t,value:e,...r},n)=>s.jsx(L6,{ref:n,className:Oe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:s.jsx(Rhe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));V6.displayName=L6.displayName;const ol={electronics:{category:"Électronique",icon:mc,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:MD,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:mi,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:$1,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},Dhe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Lc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Mhe=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const x=$t(Nt(fe,"listings"),Bt("sellerId","==",t.uid)),b=await Zt(x),N=[];b.forEach(P=>{const T=P.data();N.push({id:P.id,...T,createdAt:Lc(T.createdAt),updatedAt:Lc(T.updatedAt)})}),a(N);const C=h(N,c);n(C),await y(C)}catch(x){console.error("Erreur lors du chargement des données environnementales:",x)}finally{l(!1)}}},h=(x,b)=>{const N=new Date;let C=x;if(b==="month"){const U=new Date(N.getFullYear(),N.getMonth()-1,N.getDate());C=x.filter(H=>Lc(H.createdAt)>=U)}else if(b==="year"){const U=new Date(N.getFullYear()-1,N.getMonth(),N.getDate());C=x.filter(H=>Lc(H.createdAt)>=U)}let P=0,T=0,k=0,D=0;const E={};C.forEach(U=>{const H=ol[U.category]||ol.electronics,$=1;let L=1;U.transactionType==="donation"?L=1.2:U.transactionType==="exchange"&&(L=.8),P+=H.co2PerItem*$*L,T+=H.waterPerItem*$*L,k+=H.energyPerItem*$*L,D+=H.wastePerItem*$*L,E[U.category]=(E[U.category]||0)+1});const A=m(x),R=g(x,P,T),{rank:S,percentile:V}=v(P,x.length);return{totalCo2Saved:Math.round(P*10)/10,totalWaterSaved:Math.round(T),totalEnergySaved:Math.round(k*10)/10,totalWasteAvoided:Math.round(D*10)/10,transactionsByCategory:E,monthlyImpact:A,badges:R,rank:S,percentile:V}},m=x=>{const b={};for(let N=11;N>=0;N--){const C=new Date;C.setMonth(C.getMonth()-N);const P=C.toISOString().slice(0,7);b[P]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return x.forEach(N=>{const P=Lc(N.createdAt).toISOString().slice(0,7);if(b[P]){const T=ol[N.category]||ol.electronics;let k=1;N.transactionType==="donation"?k=1.2:N.transactionType==="exchange"&&(k=.8),b[P].co2Saved+=T.co2PerItem*k,b[P].waterSaved+=T.waterPerItem*k,b[P].energySaved+=T.energyPerItem*k,b[P].transactions+=1}}),Object.entries(b).map(([N,C])=>({month:N,co2Saved:Math.round(C.co2Saved*10)/10,transactions:C.transactions,waterSaved:Math.round(C.waterSaved),energySaved:Math.round(C.energySaved*10)/10}))},g=(x,b,N)=>{const C=[];x.length>=1&&C.push("first_transaction"),b>=10&&C.push("co2_saver_10"),b>=50&&C.push("co2_saver_50"),b>=100&&C.push("co2_saver_100"),N>=1e3&&C.push("water_saver"),x.length>=20&&C.push("recycling_master"),x.filter(D=>D.transactionType==="donation").length>=5&&C.push("donation_hero");const T=new Date().toISOString().slice(0,7);return x.filter(D=>Lc(D.createdAt).toISOString().slice(0,7)===T).length>=10&&C.push("monthly_champion"),C},v=(x,b)=>{let N="Débutant",C=0;return x>=200?(N="Légende Écologique",C=95):x>=100?(N="Maître Environnemental",C=85):x>=50?(N="Expert Vert",C=70):x>=25?(N="Éco-Warrior",C=50):x>=10?(N="Protecteur",C=30):x>=5&&(N="Apprenti Vert",C=15),{rank:N,percentile:C}},y=async x=>{if(t)try{const b=ze(fe,"users",t.uid);await mr(b,{co2Saved:x.totalCo2Saved,environmentalRank:x.rank,environmentalBadges:x.badges,lastEnvironmentalUpdate:new Date})}catch(b){console.error("Erreur lors de la mise à jour des données environnementales:",b)}},j=async()=>{const x=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${r.totalCo2Saved} kg CO₂ économisés
💧 ${r.totalWaterSaved} L d'eau préservés
⚡ ${r.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${r.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:x,url:window.location.origin})}catch{navigator.clipboard.writeText(x)}else navigator.clipboard.writeText(x)},w=()=>{const x={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:r,transactions:i.length,period:c},b=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),N=URL.createObjectURL(b),C=document.createElement("a");C.href=N,C.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(N)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ys,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[s.jsx(F1,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(F,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(x=>s.jsx(F,{variant:c===x.key?"default":"outline",size:"sm",onClick:()=>u(x.key),children:x.label},x.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((x,b)=>s.jsx(K,{className:"animate-pulse",children:s.jsx(Y,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},b))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(K,{className:"border-green-200 bg-green-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ys,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(r.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(K,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:r.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ZC,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(r.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(K,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:r.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Énergie",className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(r.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(K,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:r.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(bQ,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(r.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(RD,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(Y,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:r.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-r.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(V6,{value:r.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(xc,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-4",children:[s.jsx(Wt,{value:"overview",children:"Vue d'ensemble"}),s.jsx(Wt,{value:"categories",children:"Par catégorie"}),s.jsx(Wt,{value:"badges",children:"Badges"}),s.jsx(Wt,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(Ht,{value:"overview",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(VD,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(mt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:r.monthlyImpact.slice(-6).map((x,b)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(x.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[x.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[x.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:x.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},x.month))})})]}),s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(zD,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(mt,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(LD,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(SQ,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(mQ,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(ZC,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(Ht,{value:"categories",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(rr,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(mt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(r.transactionsByCategory).map(([x,b])=>{const N=ol[x]||ol.electronics,C=N.icon,P=b*N.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(C,{className:`w-5 h-5 ${N.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:N.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[b," transaction",b>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(P*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(b*N.waterPerItem)," L eau"]})]})]},x)})})})]})}),s.jsx(Ht,{value:"badges",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx($b,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(mt,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Dhe.map(x=>{const b=r.badges.includes(x.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${b?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:x.icon}),s.jsx("h3",{className:`font-semibold ${b?"text-green-800":"text-gray-600"}`,children:x.name}),s.jsx("p",{className:`text-sm ${b?"text-green-600":"text-gray-500"}`,children:x.description}),b&&s.jsx(Te,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},x.id)})})})]})}),s.jsx(Ht,{value:"methodology",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(ba,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(mt,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs(It,{children:[s.jsx(ba,{className:"h-4 w-4"}),s.jsx(At,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(ol).map(([x,b])=>{const N=b.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(N,{className:`w-4 h-4 ${b.color}`}),s.jsx("span",{className:"font-medium",children:b.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.wastePerItem," kg"]})]})]})]},x)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/don.svg",alt:"Don",className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Troc",className:"w-4 h-4"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Ys,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Vp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},zv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(zv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=zv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},DT=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],MT=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],Ohe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],Lhe=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=p.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,h]=p.useState(!1),[m,g]=p.useState(null),[v,y]=p.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});p.useEffect(()=>{t&&(j(),w())},[t]);const j=async()=>{if(t)try{u(V=>({...V,searches:!0}));const E=$t(Nt(fe,"savedSearches"),Bt("userId","==",t.uid),Ss(50)),A=await Zt(E),R=[];A.forEach(V=>{const U=V.data();R.push({id:V.id,...U,createdAt:Vp(U.createdAt),updatedAt:Vp(U.updatedAt),lastNotified:U.lastNotified?Vp(U.lastNotified):void 0})}),R.sort((V,U)=>U.createdAt.getTime()-V.createdAt.getTime()),n(R);const S=R.filter(V=>V.alertsEnabled).length;l(V=>({...V,totalSearches:R.length,activeAlerts:S}))}catch(E){console.error("Erreur lors du chargement des recherches sauvegardées:",E),ne.error("Erreur lors du chargement des recherches sauvegardées")}finally{u(E=>({...E,searches:!1}))}},w=async()=>{if(t)try{u(V=>({...V,matches:!0}));const E=$t(Nt(fe,"alertMatches"),Bt("userId","==",t.uid),Ss(100)),A=await Zt(E),R=[];A.forEach(V=>{const U=V.data();R.push({id:V.id,...U,matchedAt:Vp(U.matchedAt)})}),R.sort((V,U)=>U.matchedAt.getTime()-V.matchedAt.getTime()),a(R);const S=R.filter(V=>!V.seen).length;l(V=>({...V,totalMatches:R.length,newMatches:S}))}catch(E){console.error("Erreur lors du chargement des correspondances:",E),ne.error("Erreur lors du chargement des correspondances")}finally{u(E=>({...E,matches:!1}))}},x=async()=>{if(!t||!v.name.trim()){ne.error("Veuillez remplir le nom de la recherche");return}u(E=>({...E,creating:!0}));try{const E={};if(v.query&&v.query.trim()&&(E.query=v.query.trim()),v.category&&v.category!=="all"&&(E.category=v.category),v.transactionType&&v.transactionType!=="all"&&(E.transactionType=v.transactionType),v.university&&v.university!=="all"&&(E.university=v.university),v.minPrice&&v.minPrice.trim()){const S=parseFloat(v.minPrice);!isNaN(S)&&S>=0&&(E.minPrice=S)}if(v.maxPrice&&v.maxPrice.trim()){const S=parseFloat(v.maxPrice);!isNaN(S)&&S>=0&&(E.maxPrice=S)}const A={userId:t.uid,name:v.name.trim(),filters:E,alertsEnabled:v.alertsEnabled,notificationFrequency:v.notificationFrequency,notificationMethods:{email:v.notificationMethods.email,push:v.notificationMethods.push,sms:v.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},R=zv(A);await Bl(Nt(fe,"savedSearches"),R),ne.success("Alerte créée avec succès !"),h(!1),T(),j()}catch(E){console.error("Erreur lors de la création de l'alerte:",E),ne.error("Erreur lors de la création de l'alerte")}finally{u(E=>({...E,creating:!1}))}},b=async(E,A)=>{try{u(S=>({...S,updating:!0}));const R=zv({...A,updatedAt:new Date});await mr(ze(fe,"savedSearches",E),R),ne.success("Recherche mise à jour !"),j()}catch(R){console.error("Erreur lors de la mise à jour:",R),ne.error("Erreur lors de la mise à jour")}finally{u(R=>({...R,updating:!1}))}},N=async E=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await $u(ze(fe,"savedSearches",E)),ne.success("Recherche supprimée !"),j()}catch(A){console.error("Erreur lors de la suppression:",A),ne.error("Erreur lors de la suppression")}},C=async(E,A)=>{await b(E,{alertsEnabled:A})},P=async E=>{try{await mr(ze(fe,"alertMatches",E),{seen:!0,seenAt:new Date}),w()}catch(A){console.error("Erreur lors du marquage comme vu:",A)}},T=()=>{y({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),g(null)},k=E=>{try{return wd(E,{addSuffix:!0,locale:un})}catch{return"Date inconnue"}},D=E=>{const A=[];if(E.query&&A.push(`"${E.query}"`),E.category&&E.category!=="all"){const R=DT.find(S=>S.value===E.category);R&&A.push(R.label)}if(E.transactionType&&E.transactionType!=="all"){const R=MT.find(S=>S.value===E.transactionType);R&&A.push(R.label)}return E.minPrice!==void 0&&A.push(`≥ ${E.minPrice}€`),E.maxPrice!==void 0&&A.push(`≤ ${E.maxPrice}€`),A.length>0?A.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Us,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(ua,{open:d,onOpenChange:h,children:[s.jsx(ju,{asChild:!0,children:s.jsxs(F,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(yo,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Ei,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(da,{children:[s.jsxs(Ci,{className:"flex items-center gap-2",children:[s.jsx(sl,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(_u,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(ye,{id:"alert-name",value:v.name,onChange:E=>y(A=>({...A,name:E.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx($x,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(ye,{id:"search-query",value:v.query,onChange:E=>y(A=>({...A,query:E.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(dt,{value:v.category,onValueChange:E=>y(A=>({...A,category:E})),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{})}),s.jsx(lt,{children:DT.map(E=>s.jsx(ie,{value:E.value,children:E.label},E.value))})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(dt,{value:v.transactionType,onValueChange:E=>y(A=>({...A,transactionType:E})),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{})}),s.jsx(lt,{children:MT.map(E=>s.jsx(ie,{value:E.value,children:E.label},E.value))})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"search-university",children:"Université"}),s.jsxs(dt,{value:v.university,onValueChange:E=>y(A=>({...A,university:E})),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{})}),s.jsx(lt,{children:Ohe.map(E=>s.jsx(ie,{value:E.value,children:E.label},E.value))})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(ye,{id:"min-price",type:"number",value:v.minPrice,onChange:E=>y(A=>({...A,minPrice:E.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(ye,{id:"max-price",type:"number",value:v.maxPrice,onChange:E=>y(A=>({...A,maxPrice:E.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Us,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(Pr,{id:"alerts-enabled",checked:v.alertsEnabled,onCheckedChange:E=>y(A=>({...A,alertsEnabled:E}))})]}),v.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ce,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(E=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:E.value,name:"frequency",value:E.value,checked:v.notificationFrequency===E.value,onChange:A=>y(R=>({...R,notificationFrequency:A.target.value})),className:"rounded border-border"}),s.jsx(ce,{htmlFor:E.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:E.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:E.description})]})})]},E.value))})]}),s.jsxs("div",{children:[s.jsx(ce,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4 text-blue-600"}),s.jsx(ce,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(Pr,{id:"email-notifications",checked:v.notificationMethods.email,onCheckedChange:E=>y(A=>({...A,notificationMethods:{...A.notificationMethods,email:E}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-4 h-4 text-green-600"}),s.jsx(ce,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(Pr,{id:"push-notifications",checked:v.notificationMethods.push,onCheckedChange:E=>y(A=>({...A,notificationMethods:{...A.notificationMethods,push:E}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fb,{className:"w-4 h-4 text-purple-600"}),s.jsx(ce,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(Te,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(Pr,{id:"sms-notifications",checked:v.notificationMethods.sms,onCheckedChange:E=>y(A=>({...A,notificationMethods:{...A.notificationMethods,sms:E}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(F,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(F,{onClick:x,disabled:c.creating||!v.name.trim(),children:c.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(Er,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(Us,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(sl,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Nouvelles",className:"w-8 h-8"})]})})})]}),s.jsxs(xc,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-2",children:[s.jsxs(Wt,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(Er,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(Wt,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(sl,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(Te,{className:"ml-1 bg-blue-500",children:o.newMatches})]})]}),s.jsx(Ht,{value:"searches",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(V1,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(mt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(Y,{children:c.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,A)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},A))}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Er,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs(F,{onClick:()=>h(!0),children:[s.jsx(yo,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:r.map(E=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:E.name}),E.alertsEnabled?s.jsxs(Te,{className:"bg-green-100 text-green-800",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(Te,{variant:"secondary",children:[s.jsx(tk,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:D(E.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(_s,{className:"w-3 h-3"}),"Créé ",k(E.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sl,{className:"w-3 h-3"}),E.matchCount," correspondance",E.matchCount!==1?"s":""]}),E.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Us,{className:"w-3 h-3"}),"Dernière alerte ",k(E.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>C(E.id,!E.alertsEnabled),title:E.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:E.alertsEnabled?s.jsx(tk,{className:"w-4 h-4"}):s.jsx(wQ,{className:"w-4 h-4"})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>{var A,R;g(E),y({name:E.name,query:E.filters.query||"",category:E.filters.category||"all",transactionType:E.filters.transactionType||"all",university:E.filters.university||"all",minPrice:((A=E.filters.minPrice)==null?void 0:A.toString())||"",maxPrice:((R=E.filters.maxPrice)==null?void 0:R.toString())||"",alertsEnabled:E.alertsEnabled,notificationFrequency:E.notificationFrequency,notificationMethods:E.notificationMethods}),h(!0)},title:"Modifier",children:s.jsx(jQ,{className:"w-4 h-4"})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>N(E.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(ca,{className:"w-4 h-4"})})]})]}),E.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",E.notificationFrequency==="instant"?"Instantané":E.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[E.notificationMethods.email&&s.jsx(fr,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),E.notificationMethods.push&&s.jsx(Us,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),E.notificationMethods.sms&&s.jsx(Fb,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},E.id))})})]})}),s.jsx(Ht,{value:"matches",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(sl,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(mt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(Y,{children:c.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((E,A)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},A))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(E=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${E.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[E.listingImage?s.jsx("img",{src:E.listingImage,alt:E.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:E.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!E.seen&&s.jsx(Te,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:E.listingPrice===0?"Gratuit":`${E.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),"Trouvé ",k(E.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>P(E.id),disabled:E.seen,children:E.seen?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Co,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(F,{size:"sm",onClick:()=>window.open(`/listing/${E.listingId}`,"_blank"),children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},E.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Er,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},Fp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},OT=[{value:"all",label:"Toutes catégories",icon:rr},{value:"electronics",label:"Électronique",icon:mc},{value:"books",label:"Livres & Cours",icon:MD},{value:"furniture",label:"Mobilier",icon:mi},{value:"clothing",label:"Vêtements",icon:$1},{value:"services",label:"Services",icon:Wo},{value:"housing",label:"Logement",icon:mi},{value:"jobs",label:"Jobs & Stages",icon:Rh}],Vhe=[{value:"all",label:"Tous types",icon:rr},{value:"sale",label:"Vente",icon:uQ},{value:"donation",label:"Don",icon:Vb},{value:"exchange",label:"Échange",icon:Ux},{value:"service",label:"Service",icon:Wo}],Fhe=[{value:"recent",label:"Plus récents",icon:Ct},{value:"oldest",label:"Plus anciens",icon:_s},{value:"price-asc",label:"Prix croissant",icon:JC},{value:"price-desc",label:"Prix décroissant",icon:PD},{value:"title",label:"Titre A-Z",icon:JC},{value:"category",label:"Par catégorie",icon:wm}],$he=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=p.useState({favorites:!0,listings:!0,removing:!1}),[d,h]=p.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,g]=p.useState("recent"),[v,y]=p.useState("grid"),[j,w]=p.useState([]);p.useEffect(()=>{t&&x()},[t]),p.useEffect(()=>{r.length>0&&b()},[r]);const x=async()=>{if(t)try{u(H=>({...H,favorites:!0}));const S=$t(Nt(fe,"favorites"),Bt("userId","==",t.uid),Ss(100)),V=await Zt(S),U=[];V.forEach(H=>{const $=H.data();U.push({id:H.id,...$,createdAt:Fp($.createdAt),updatedAt:Fp($.updatedAt)})}),U.sort((H,$)=>$.createdAt.getTime()-H.createdAt.getTime()),n(U),N(U)}catch(S){console.error("Erreur lors du chargement des favoris:",S),ne.error("Erreur lors du chargement des favoris")}finally{u(S=>({...S,favorites:!1}))}},b=async()=>{try{u(H=>({...H,listings:!0}));const S=r.map(async H=>{try{const $=await Gr(ze(fe,"listings",H.listingId));if($.exists()){const L=$.data();return{id:$.id,...L,createdAt:Fp(L.createdAt),updatedAt:Fp(L.updatedAt)}}return null}catch($){return console.error(`Erreur lors du chargement de l'annonce ${H.listingId}:`,$),null}}),U=(await Promise.all(S)).filter(H=>H!==null);a(U)}catch(S){console.error("Erreur lors du chargement des annonces favorites:",S)}finally{u(S=>({...S,listings:!1}))}},N=S=>{const V={},U={};let H=0,$=0;const L=new Date;L.setDate(L.getDate()-7);let W=0;S.forEach(z=>{V[z.listingCategory]=(V[z.listingCategory]||0)+1,U[z.listingTransactionType]=(U[z.listingTransactionType]||0)+1,z.listingPrice>0&&(H+=z.listingPrice,$++),z.createdAt>=L&&W++}),l({totalFavorites:S.length,byCategory:V,byTransactionType:U,averagePrice:$>0?Math.round(H/$):0,recentlyAdded:W,availableCount:S.length,soldCount:0})},C=async S=>{try{await $u(ze(fe,"favorites",S)),ne.success("Favori supprimé"),x()}catch(V){console.error("Erreur lors de la suppression:",V),ne.error("Erreur lors de la suppression")}},P=async()=>{if(j.length!==0&&window.confirm(`Supprimer ${j.length} favori(s) sélectionné(s) ?`)){u(S=>({...S,removing:!0}));try{const S=j.map(V=>$u(ze(fe,"favorites",V)));await Promise.all(S),ne.success(`${j.length} favori(s) supprimé(s)`),w([]),x()}catch(S){console.error("Erreur lors de la suppression multiple:",S),ne.error("Erreur lors de la suppression")}finally{u(S=>({...S,removing:!1}))}}},T=()=>{const S={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:r.length,favorites:r.map($=>({title:$.listingTitle,price:$.listingPrice,category:$.listingCategory,transactionType:$.listingTransactionType,seller:$.sellerName,university:$.sellerUniversity,addedDate:$.createdAt.toISOString(),notes:$.notes||"",tags:$.tags}))},V=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),U=URL.createObjectURL(V),H=document.createElement("a");H.href=U,H.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,H.click(),URL.revokeObjectURL(U)},k=async()=>{const S=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:S,url:window.location.origin})}catch{navigator.clipboard.writeText(S),ne.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(S),ne.success("Lien copié dans le presse-papiers")},D=()=>{let S=r;if(d.search){const V=d.search.toLowerCase();S=S.filter(U=>U.listingTitle.toLowerCase().includes(V)||U.sellerName.toLowerCase().includes(V)||U.tags.some(H=>H.toLowerCase().includes(V)))}if(d.category!=="all"&&(S=S.filter(V=>V.listingCategory===d.category)),d.transactionType!=="all"&&(S=S.filter(V=>V.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":S=S.filter(V=>V.listingPrice===0);break;case"under-50":S=S.filter(V=>V.listingPrice>0&&V.listingPrice<50);break;case"50-200":S=S.filter(V=>V.listingPrice>=50&&V.listingPrice<=200);break;case"over-200":S=S.filter(V=>V.listingPrice>200);break}switch(m){case"recent":S.sort((V,U)=>U.createdAt.getTime()-V.createdAt.getTime());break;case"oldest":S.sort((V,U)=>V.createdAt.getTime()-U.createdAt.getTime());break;case"price-asc":S.sort((V,U)=>V.listingPrice-U.listingPrice);break;case"price-desc":S.sort((V,U)=>U.listingPrice-V.listingPrice);break;case"title":S.sort((V,U)=>V.listingTitle.localeCompare(U.listingTitle));break;case"category":S.sort((V,U)=>V.listingCategory.localeCompare(U.listingCategory));break}return S},E=S=>{try{return wd(S,{addSuffix:!0,locale:un})}catch{return"Date inconnue"}},A=(S,V)=>V==="donation"?"Gratuit":V==="exchange"?"Échange":S===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(S),R=D();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(cn,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[s.jsx(F1,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(F,{variant:"outline",onClick:T,className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(cn,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(ja,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Récent",className:"w-8 h-8"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(wm,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:S=>h(V=>({...V,search:S.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(dt,{value:m,onValueChange:g,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{})}),s.jsx(lt,{children:Fhe.map(S=>s.jsx(ie,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(F,{variant:v==="grid"?"default":"ghost",size:"icon",onClick:()=>y("grid"),className:"rounded-none",children:s.jsx(BD,{className:"w-4 h-4"})}),s.jsx(F,{variant:v==="list"?"default":"ghost",size:"icon",onClick:()=>y("list"),className:"rounded-none",children:s.jsx(HD,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(dt,{value:d.category,onValueChange:S=>h(V=>({...V,category:S})),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Catégorie"})}),s.jsx(lt,{children:OT.map(S=>s.jsx(ie,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs(dt,{value:d.transactionType,onValueChange:S=>h(V=>({...V,transactionType:S})),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Type"})}),s.jsx(lt,{children:Vhe.map(S=>s.jsx(ie,{value:S.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"w-4 h-4"}),S.label]})},S.value))})]}),s.jsxs(dt,{value:d.priceRange,onValueChange:S=>h(V=>({...V,priceRange:S})),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Prix"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Tous les prix"}),s.jsx(ie,{value:"free",children:"Gratuit"}),s.jsx(ie,{value:"under-50",children:"Moins de 50€"}),s.jsx(ie,{value:"50-200",children:"50€ - 200€"}),s.jsx(ie,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(dt,{value:d.availability,onValueChange:S=>h(V=>({...V,availability:S})),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Disponibilité"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Toutes"}),s.jsx(ie,{value:"available",children:"Disponibles"}),s.jsx(ie,{value:"sold",children:"Vendues"}),s.jsx(ie,{value:"reserved",children:"Réservées"})]})]})]}),j.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[j.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Désélectionner"}),s.jsx(F,{variant:"destructive",size:"sm",onClick:P,disabled:c.removing,children:c.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ca,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:c.favorites?s.jsx("div",{className:`grid gap-6 ${v==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((S,V)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},V))}):R.length===0?s.jsx(K,{children:s.jsx(Y,{className:"pt-12 pb-12 text-center",children:r.length===0?s.jsxs(s.Fragment,{children:[s.jsx(cn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx(F,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(Er,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx($x,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx(F,{variant:"outline",onClick:()=>h({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[R.length," favori(s) trouvé(s)",R.length!==r.length&&` sur ${r.length}`]}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>{j.length===R.length?w([]):w(R.map(S=>S.id))},children:j.length===R.length?"Désélectionner tout":"Sélectionner tout"})]}),v==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(S=>{const V=i.find(U=>U.id===S.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:j.includes(S.id),onChange:U=>{U.target.checked?w(H=>[...H,S.id]):w(H=>H.filter($=>$!==S.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(F,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>C(S.id),children:s.jsx(ca,{className:"w-4 h-4"})})}),V?s.jsx(Cm,{listing:V}):s.jsxs(K,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(la,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(Y,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:S.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A(S.listingPrice,S.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",E(S.createdAt)]})]})]})]},S.id)})}):s.jsx("div",{className:"space-y-4",children:R.map(S=>{var U;const V=i.find(H=>H.id===S.listingId);return s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:j.includes(S.id),onChange:H=>{H.target.checked?w($=>[...$,S.id]):w($=>$.filter(L=>L!==S.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:S.listingImage?s.jsx("img",{src:S.listingImage,alt:S.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(rr,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:S.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:A(S.listingPrice,S.listingTransactionType)}),(V==null?void 0:V.status)&&s.jsx(Te,{variant:V.status==="active"?"default":"secondary",children:V.status==="active"?"Disponible":V.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Qr,{className:"w-3 h-3"}),S.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),S.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wm,{className:"w-3 h-3"}),(U=OT.find(H=>H.value===S.listingCategory))==null?void 0:U.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",E(S.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${S.listingId}`,"_blank"),children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>C(S.id),className:"text-destructive hover:text-destructive",children:s.jsx(ca,{className:"w-3 h-3"})})]})]})]})]})})},S.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(cn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},mw=({request:t,userRole:e,onStatusUpdate:r})=>{const{updatePaymentStatus:n,getPaymentInstructions:i}=yy(),a=v=>{switch(v){case"pending":return Ct;case"confirmed":return Ye;case"completed":return Ye;case"cancelled":return fn;case"disputed":return Kt;default:return Ct}},o=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=v=>{switch(v){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return v}},c=v=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[v]||v,u=(v,y)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:y||"EUR"}).format(v),d=(v,y)=>{navigator.clipboard.writeText(v),ne.success(`${y} copié dans le presse-papiers`)},h=async v=>{try{await n(t.id,v),r==null||r(v)}catch(y){console.error("Erreur lors de la mise à jour du statut:",y)}},m=a(t.status),g=i(t.paymentMethod,t);return s.jsxs(K,{className:"w-full",children:[s.jsx(je,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(yr,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(_e,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),s.jsxs(mt,{children:[u(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(Te,{className:o(t.status),children:[s.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:Mr(t.createdAt,"PPP à HH:mm",{locale:un})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:Mr(t.updatedAt,"PPP à HH:mm",{locale:un})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:Mr(t.meetingDateTime,"PPP à HH:mm",{locale:un})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(et,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de sécurité"),children:s.jsx($D,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&g.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:g.map((v,y)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:v})]},y))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(F,{onClick:()=>h("confirmed"),className:"flex-1",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(F,{variant:"outline",onClick:()=>h("cancelled"),className:"flex-1",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(F,{onClick:()=>h("completed"),className:"flex-1",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(F,{onClick:()=>h("completed"),className:"flex-1",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(F,{variant:"outline",onClick:()=>h("disputed"),className:"text-blue-600 hover:text-blue-700",children:[s.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(It,{children:[s.jsx(Ct,{className:"h-4 w-4"}),s.jsx(At,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(It,{className:"border-green-200 bg-green-50",children:[s.jsx(Ye,{className:"h-4 w-4 text-green-600"}),s.jsx(At,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(It,{className:"border-green-200 bg-green-50",children:[s.jsx(Ye,{className:"h-4 w-4 text-green-600"}),s.jsx(At,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé BOXETU."})]}),t.status==="disputed"&&s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx(At,{className:"text-blue-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},Uhe=()=>{const{currentUser:t,userProfile:e}=Mt(),{paymentRequests:r,loading:n,fetchUserPaymentRequests:i,initializePaymentMethods:a}=yy(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,h]=p.useState("all"),[m,g]=p.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});p.useEffect(()=>{a()},[a]),p.useEffect(()=>{t&&i(t.uid)},[t,i]),p.useEffect(()=>{v()},[r]);const v=()=>{const N={},C={};let P=0;r.forEach(T=>{N[T.paymentMethod]=(N[T.paymentMethod]||0)+1,C[T.status]=(C[T.status]||0)+1,P+=T.amount}),g({totalRequests:r.length,pendingRequests:C.pending||0,completedRequests:C.completed||0,totalAmount:P,averageAmount:r.length>0?P/r.length:0,byMethod:N,byStatus:C})},y=()=>r.filter(N=>{const C=!o||N.listingId.toLowerCase().includes(o.toLowerCase())||N.id.toLowerCase().includes(o.toLowerCase()),P=c==="all"||N.status===c,T=d==="all"||N.paymentMethod===d;return C&&P&&T}),j=()=>y().filter(N=>N.buyerId===(t==null?void 0:t.uid)),w=()=>y().filter(N=>N.sellerId===(t==null?void 0:t.uid)),x=N=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N),b=()=>{const N={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:r.map(k=>({id:k.id,amount:k.amount,currency:k.currency,method:k.paymentMethod,status:k.status,role:k.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:k.createdAt.toISOString(),updatedAt:k.updatedAt.toISOString()}))},C=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),P=URL.createObjectURL(C),T=document.createElement("a");T.href=P,T.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,T.click(),URL.revokeObjectURL(P)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(CQ,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(F,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(yr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(Ct,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Ye,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:x(m.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(ja,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:N=>l(N.target.value),className:"pl-10"})]}),s.jsxs(dt,{value:c,onValueChange:u,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{placeholder:"Statut"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Tous les statuts"}),s.jsx(ie,{value:"pending",children:"En attente"}),s.jsx(ie,{value:"confirmed",children:"Confirmé"}),s.jsx(ie,{value:"completed",children:"Terminé"}),s.jsx(ie,{value:"cancelled",children:"Annulé"}),s.jsx(ie,{value:"disputed",children:"Litige"})]})]}),s.jsxs(dt,{value:d,onValueChange:h,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{placeholder:"Méthode"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Toutes les méthodes"}),s.jsx(ie,{value:"cash",children:"Espèces"}),s.jsx(ie,{value:"transfer",children:"Virement"}),s.jsx(ie,{value:"paypal",children:"PayPal"}),s.jsx(ie,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(xc,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Wt,{value:"all",className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsxs(Wt,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(M0,{className:"w-4 h-4"}),"Mes achats",j().length>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:j().length})]}),s.jsxs(Wt,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(D0,{className:"w-4 h-4"}),"Mes ventes",w().length>0&&s.jsx(Te,{variant:"secondary\\",className:"ml-1",children:w().length})]})]}),s.jsx(Ht,{value:"all",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(VD,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(mt,{children:"Historique complet de vos transactions"})]}),s.jsx(Y,{children:n?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((N,C)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},C))}):y().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(yr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:y().map(N=>s.jsx(mw,{request:N,userRole:N.buyerId===t.uid?"buyer":"seller"},N.id))})})]})}),s.jsx(Ht,{value:"purchases",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(M0,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(mt,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(Y,{children:j().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(M0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:j().map(N=>s.jsx(mw,{request:N,userRole:"buyer"},N.id))})})]})}),s.jsx(Ht,{value:"sales",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(D0,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(mt,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(Y,{children:w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(D0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:w().map(N=>s.jsx(mw,{request:N,userRole:"seller"},N.id))})})]})})]}),s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(et,{className:"h-4 w-4 text-blue-600"}),s.jsxs(At,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(yr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var HN="Collapsible",[zhe,F6]=ps(HN),[Bhe,GN]=zhe(HN),$6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=hs({prop:n,defaultProp:i,onChange:o});return s.jsx(Bhe,{scope:r,disabled:a,contentId:ls(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:s.jsx(De.div,{"data-state":YN(c),"data-disabled":a?"":void 0,...l,ref:e})})});$6.displayName=HN;var U6="CollapsibleTrigger",z6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,i=GN(U6,r);return s.jsx(De.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":YN(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:e,onClick:ve(t.onClick,i.onOpenToggle)})});z6.displayName=U6;var KN="CollapsibleContent",B6=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=GN(KN,t.__scopeCollapsible);return s.jsx(Zr,{present:r||i.open,children:({present:a})=>s.jsx(qhe,{...n,ref:e,present:a})})});B6.displayName=KN;var qhe=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:i,...a}=t,o=GN(KN,r),[l,c]=p.useState(n),u=p.useRef(null),d=Je(e,u),h=p.useRef(0),m=h.current,g=p.useRef(0),v=g.current,y=o.open||l,j=p.useRef(y),w=p.useRef();return p.useEffect(()=>{const x=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(x)},[]),Lr(()=>{const x=u.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();h.current=b.height,g.current=b.width,j.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),c(n)}},[o.open,n]),s.jsx(De.div,{"data-state":YN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:y&&i})});function YN(t){return t?"open":"closed"}var Whe=$6,Hhe=z6,Ghe=B6,Pa="Accordion",Khe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[QN,Yhe,Qhe]=gf(Pa),[Ny,Wfe]=ps(Pa,[Qhe,F6]),XN=F6(),q6=ke.forwardRef((t,e)=>{const{type:r,...n}=t,i=n,a=n;return s.jsx(QN.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?s.jsx(eme,{...a,ref:e}):s.jsx(Zhe,{...i,ref:e})})});q6.displayName=Pa;var[W6,Xhe]=Ny(Pa),[H6,Jhe]=Ny(Pa,{collapsible:!1}),Zhe=ke.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[l,c]=hs({prop:r,defaultProp:n,onChange:i});return s.jsx(W6,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:ke.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(H6,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(G6,{...o,ref:e})})})}),eme=ke.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...a}=t,[o=[],l]=hs({prop:r,defaultProp:n,onChange:i}),c=ke.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=ke.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return s.jsx(W6,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(H6,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(G6,{...a,ref:e})})})}),[tme,Sy]=Ny(Pa),G6=ke.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:i,orientation:a="vertical",...o}=t,l=ke.useRef(null),c=Je(l,e),u=Yhe(r),h=fc(i)==="ltr",m=ve(t.onKeyDown,g=>{var k;if(!Khe.includes(g.key))return;const v=g.target,y=u().filter(D=>{var E;return!((E=D.ref.current)!=null&&E.disabled)}),j=y.findIndex(D=>D.ref.current===v),w=y.length;if(j===-1)return;g.preventDefault();let x=j;const b=0,N=w-1,C=()=>{x=j+1,x>N&&(x=b)},P=()=>{x=j-1,x<b&&(x=N)};switch(g.key){case"Home":x=b;break;case"End":x=N;break;case"ArrowRight":a==="horizontal"&&(h?C():P());break;case"ArrowDown":a==="vertical"&&C();break;case"ArrowLeft":a==="horizontal"&&(h?P():C());break;case"ArrowUp":a==="vertical"&&P();break}const T=x%w;(k=y[T].ref.current)==null||k.focus()});return s.jsx(tme,{scope:r,disabled:n,direction:i,orientation:a,children:s.jsx(QN.Slot,{scope:r,children:s.jsx(De.div,{...o,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),Bv="AccordionItem",[rme,JN]=Ny(Bv),K6=ke.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...i}=t,a=Sy(Bv,r),o=Xhe(Bv,r),l=XN(r),c=ls(),u=n&&o.value.includes(n)||!1,d=a.disabled||t.disabled;return s.jsx(rme,{scope:r,open:u,disabled:d,triggerId:c,children:s.jsx(Whe,{"data-orientation":a.orientation,"data-state":eV(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});K6.displayName=Bv;var Y6="AccordionHeader",Q6=ke.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=Sy(Pa,r),a=JN(Y6,r);return s.jsx(De.h3,{"data-orientation":i.orientation,"data-state":eV(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:e})});Q6.displayName=Y6;var _j="AccordionTrigger",X6=ke.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=Sy(Pa,r),a=JN(_j,r),o=Jhe(_j,r),l=XN(r);return s.jsx(QN.ItemSlot,{scope:r,children:s.jsx(Hhe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...n,ref:e})})});X6.displayName=_j;var J6="AccordionContent",Z6=ke.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=Sy(Pa,r),a=JN(J6,r),o=XN(r);return s.jsx(Ghe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Z6.displayName=J6;function eV(t){return t?"open":"closed"}var nme=q6,sme=K6,ime=Q6,tV=X6,rV=Z6;const ame=nme,nV=p.forwardRef(({className:t,...e},r)=>s.jsx(sme,{ref:r,className:Oe("border-b",t),...e}));nV.displayName="AccordionItem";const sV=p.forwardRef(({className:t,children:e,...r},n)=>s.jsx(ime,{className:"flex",children:s.jsxs(tV,{ref:n,className:Oe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,s.jsx(PO,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));sV.displayName=tV.displayName;const iV=p.forwardRef(({className:t,children:e,...r},n)=>s.jsx(rV,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:s.jsx("div",{className:Oe("pb-4 pt-0",t),children:e})}));iV.displayName=rV.displayName;const LT=[{category:"Compte et Inscription",icon:Wo,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:yr,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:et,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Gt,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:cn,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:zx,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@boxetu.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],ome=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:Gt,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:fr,action:"support@boxetu.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:cd,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:OD,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],lme=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:ra,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:et,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:kQ,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:cn,duration:"4 min",type:"Infographie"}],cme=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState(""),[i,a]=p.useState("all"),[o,l]=p.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=p.useState(!1),d=LT.filter(m=>{if(i!=="all"&&m.category!==i)return!1;if(r){const g=r.toLowerCase();return m.questions.some(v=>v.question.toLowerCase().includes(g)||v.answer.toLowerCase().includes(g))}return!0}),h=async m=>{if(m.preventDefault(),!o.subject||!o.message){ne.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(g=>setTimeout(g,1e3)),ne.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{ne.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{u(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(fv,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide BOXETU"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(Er,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(ye,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:r,onChange:m=>n(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ome.map((m,g)=>s.jsx(K,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(m.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:m.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),s.jsx(F,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},g))}),s.jsxs(xc,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Wt,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(fv,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(Wt,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(OD,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(Wt,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(Ht,{value:"faq",className:"space-y-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(F,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),LT.map(m=>s.jsxs(F,{variant:i===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"pt-12 pb-12 text-center",children:[s.jsx(Er,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx(F,{variant:"outline",onClick:()=>n(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:d.map((m,g)=>s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),s.jsx(Y,{children:s.jsx(ame,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((v,y)=>s.jsxs(nV,{value:`${g}-${y}`,children:[s.jsx(sV,{className:"text-left",children:v.question}),s.jsx(iV,{className:"text-muted-foreground leading-relaxed",children:v.answer})]},y))})})]},g))})]}),s.jsxs(Ht,{value:"guides",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(WD,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(mt,{children:"Apprenez à utiliser BOXETU comme un pro avec nos guides détaillés"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:lme.map((m,g)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:m.title}),s.jsx(Te,{variant:"outline",className:"text-xs",children:m.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),m.duration]}),s.jsxs(F,{size:"sm",variant:"outline",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},g))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(YD,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Cn,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(Cn,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Wo,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(Ht,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Yl,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(mt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"subject",children:"Sujet *"}),s.jsx(ye,{id:"subject",value:o.subject,onChange:m=>l(g=>({...g,subject:m.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"category",children:"Catégorie"}),s.jsxs(dt,{value:o.category,onValueChange:m=>l(g=>({...g,category:m})),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"account",children:"Compte et profil"}),s.jsx(ie,{value:"listing",children:"Annonces"}),s.jsx(ie,{value:"payment",children:"Paiements"}),s.jsx(ie,{value:"security",children:"Sécurité"}),s.jsx(ie,{value:"technical",children:"Problème technique"}),s.jsx(ie,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"priority",children:"Priorité"}),s.jsxs(dt,{value:o.priority,onValueChange:m=>l(g=>({...g,priority:m})),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ht,{})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"low",children:"Basse - Question générale"}),s.jsx(ie,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(ie,{value:"high",children:"Haute - Problème bloquant"}),s.jsx(ie,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"message",children:"Message *"}),s.jsx(Cs,{id:"message",value:o.message,onChange:m=>l(g=>({...g,message:m.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(It,{children:[s.jsx(Ye,{className:"h-4 w-4"}),s.jsxs(At,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Ct,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(Te,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(Te,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(Te,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(zD,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@boxetu.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gt,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/services.svg",alt:"Système",className:"w-5 h-5"}),"État du système"]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(F,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},ume=[{category:"Rencontres et Échanges",icon:Hr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Ye},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:fn},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Ye},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Ye}]},{category:"Vérification d'Identité",icon:KD,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Ye},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Ye},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Kt},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Ye}]},{category:"Paiements Sécurisés",icon:yr,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Ye},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:fn},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Ye},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Kt}]},{category:"Communication",icon:Gt,color:"text-blue-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Ye},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Ye},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Kt},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Ye}]}],dme=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Kt},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:yr},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Hr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:Cl},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:Wo},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:Gt},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Ct},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Kl}],hme=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:cd,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:bl,color:"text-blue-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:Gt,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:et,color:"text-green-600"}],mme=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(et,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs(It,{className:"border-green-200 bg-green-50",children:[s.jsx(et,{className:"h-4 w-4 text-green-600"}),s.jsx(At,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs(F,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(Cn,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(et,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(KD,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Ct,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(ra,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),ume.map((t,e)=>s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((r,n)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${r.type==="do"?"border-green-200 bg-green-50":r.type==="dont"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r.icon,{className:`w-5 h-5 mt-0.5 ${r.type==="do"?"text-green-600":r.type==="dont"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${r.type==="do"?"text-green-800":r.type==="dont"?"text-red-800":"text-blue-800"}`,children:r.title}),s.jsx("p",{className:`text-sm ${r.type==="do"?"text-green-700":r.type==="dont"?"text-red-700":"text-blue-700"}`,children:r.description})]})]})},n))})})]},e))]}),s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(mt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:dme.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-blue-800"}`,children:t.title}),s.jsx(Te,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-blue-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(cd,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(mt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:hme.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-blue-600"||t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(ym,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs(F,{variant:"outline",className:"w-full",children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(fv,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx(F,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(ge,{to:"/help",children:[s.jsx(Un,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Gt,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs(F,{variant:"outline",className:"w-full",children:[s.jsx(bl,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(WD,{className:"h-4 w-4 text-blue-600"}),s.jsxs(At,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function fme(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var ZN="ScrollArea",[aV,Hfe]=ps(ZN),[pme,Ds]=aV(ZN),oV=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),[y,j]=p.useState(null),[w,x]=p.useState(0),[b,N]=p.useState(0),[C,P]=p.useState(!1),[T,k]=p.useState(!1),D=Je(e,A=>c(A)),E=fc(i);return s.jsx(pme,{scope:r,type:n,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:P,scrollbarY:y,onScrollbarYChange:j,scrollbarYEnabled:T,onScrollbarYEnabledChange:k,onCornerWidthChange:x,onCornerHeightChange:N,children:s.jsx(De.div,{dir:E,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});oV.displayName=ZN;var lV="ScrollAreaViewport",cV=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,asChild:i,nonce:a,...o}=t,l=Ds(lV,r),c=p.useRef(null),u=Je(e,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(De.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Sme({asChild:i,children:n},d=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});cV.displayName=lV;var Li="ScrollAreaScrollbar",eS=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ds(Li,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(gme,{...n,ref:e,forceMount:r}):i.type==="scroll"?s.jsx(vme,{...n,ref:e,forceMount:r}):i.type==="auto"?s.jsx(uV,{...n,ref:e,forceMount:r}):i.type==="always"?s.jsx(tS,{...n,ref:e}):null});eS.displayName=Li;var gme=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ds(Li,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Zr,{present:r||a,children:s.jsx(uV,{"data-state":a?"visible":"hidden",...n,ref:e})})}),vme=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ds(Li,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Cy(()=>c("SCROLL_END"),100),[l,c]=fme("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(c("SCROLL"),o()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,a,c,o]),s.jsx(Zr,{present:r||l!=="hidden",children:s.jsx(tS,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ve(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ve(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),uV=p.forwardRef((t,e)=>{const r=Ds(Li,t.__scopeScrollArea),{forceMount:n,...i}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=Cy(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Ju(r.viewport,c),Ju(r.content,c),s.jsx(Zr,{present:n||a,children:s.jsx(tS,{"data-state":a?"visible":"hidden",...i,ref:e})})}),tS=p.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Ds(Li,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=pV(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return _me(m,o.current,l,g)}return r==="horizontal"?s.jsx(xme,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,g=VT(m,l,i.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=h(m,i.dir))}}):r==="vertical"?s.jsx(yme,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,g=VT(m,l);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=h(m))}}):null}),xme=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Ds(Li,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Je(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(hV,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ey(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),vV(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Wv(o.paddingLeft),paddingEnd:Wv(o.paddingRight)}})}})}),yme=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Ds(Li,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Je(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(hV,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ey(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),vV(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Wv(o.paddingTop),paddingEnd:Wv(o.paddingBottom)}})}})}),[wme,dV]=aV(Li),hV=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,g=Ds(Li,r),[v,y]=p.useState(null),j=Je(e,D=>y(D)),w=p.useRef(null),x=p.useRef(""),b=g.viewport,N=n.content-n.viewport,C=Sr(d),P=Sr(c),T=Cy(h,10);function k(D){if(w.current){const E=D.clientX-w.current.left,A=D.clientY-w.current.top;u({x:E,y:A})}}return p.useEffect(()=>{const D=E=>{const A=E.target;(v==null?void 0:v.contains(A))&&C(E,N)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[b,v,N,C]),p.useEffect(P,[n,P]),Ju(v,T),Ju(g.content,T),s.jsx(wme,{scope:r,scrollbar:v,hasThumb:i,onThumbChange:Sr(a),onThumbPointerUp:Sr(o),onThumbPositionChange:P,onThumbPointerDown:Sr(l),children:s.jsx(De.div,{...m,ref:j,style:{position:"absolute",...m.style},onPointerDown:ve(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),w.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),k(D))}),onPointerMove:ve(t.onPointerMove,k),onPointerUp:ve(t.onPointerUp,D=>{const E=D.target;E.hasPointerCapture(D.pointerId)&&E.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),qv="ScrollAreaThumb",mV=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=dV(qv,t.__scopeScrollArea);return s.jsx(Zr,{present:r||i.hasThumb,children:s.jsx(bme,{ref:e,...n})})}),bme=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,a=Ds(qv,r),o=dV(qv,r),{onThumbPositionChange:l}=o,c=Je(e,h=>o.onThumbChange(h)),u=p.useRef(),d=Cy(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(d(),!u.current){const g=Nme(h,l);u.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,d,l]),s.jsx(De.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ve(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,y=h.clientY-g.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:ve(t.onPointerUp,o.onThumbPointerUp)})});mV.displayName=qv;var rS="ScrollAreaCorner",fV=p.forwardRef((t,e)=>{const r=Ds(rS,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(jme,{...t,ref:e}):null});fV.displayName=rS;var jme=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Ds(rS,r),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return Ju(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Ju(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(De.div,{...n,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Wv(t){return t?parseInt(t,10):0}function pV(t,e){const r=t/e;return isNaN(r)?0:r}function Ey(t){const e=pV(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function _me(t,e,r,n="ltr"){const i=Ey(r),a=i/2,o=e||a,l=i-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return gV([c,u],h)(t)}function VT(t,e,r="ltr"){const n=Ey(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=km(t,c);return gV([0,o],[0,l])(u)}function gV(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function vV(t,e){return t>0&&t<e}var Nme=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&e(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function Cy(t,e){const r=Sr(t),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Ju(t,e){const r=Sr(e);Lr(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}function Sme(t,e){const{asChild:r,children:n}=t;if(!r)return typeof e=="function"?e(n):e;const i=p.Children.only(n);return p.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var xV=oV,Eme=cV,Cme=fV;const nS=p.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(xV,{ref:n,className:Oe("relative overflow-hidden",t),...r,children:[s.jsx(Eme,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(yV,{}),s.jsx(Cme,{})]}));nS.displayName=xV.displayName;const yV=p.forwardRef(({className:t,orientation:e="vertical",...r},n)=>s.jsx(eS,{ref:n,orientation:e,className:Oe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:s.jsx(mV,{className:"relative flex-1 rounded-full bg-border"})}));yV.displayName=eS.displayName;const FT=({conversations:t,loading:e,searchQuery:r,setSearchQuery:n,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const h=d.participants.find(g=>g!==(a==null?void 0:a.uid)),m=h?d.participantDetails[h]:null;return(m==null?void 0:m.name.toLowerCase().includes(r.toLowerCase()))||d.listingTitle.toLowerCase().includes(r.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const h=d.participants.find(m=>m!==(a==null?void 0:a.uid));return h?d.participantDetails[h]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx($x,{className:"w-4 h-4"})}),s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(PD,{className:"w-4 h-4"})}),s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(zx,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{placeholder:"Rechercher conversations...",value:r,onChange:d=>n(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(nS,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,h)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Qr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},h))}):l.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(Gt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Er,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',r,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(fr,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:l.map(d=>{var v,y;const h=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,g=(i==null?void 0:i.id)===d.id;return s.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${g?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(is,{className:"w-10 h-10",children:[s.jsx(Ea,{src:h==null?void 0:h.avatar}),s.jsx(Fn,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((y=(v=h==null?void 0:h.name)==null?void 0:v[0])==null?void 0:y.toUpperCase())||s.jsx(Qr,{className:"w-4 h-4"})})]}),(h==null?void 0:h.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(et,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Qr,{className:"w-3 h-3 text-muted-foreground"}),(h==null?void 0:h.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),wd(d.lastMessage.sentAt,{addSuffix:!0,locale:un})]}),m>0&&s.jsx(Te,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?s.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(qD,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?s.jsx(cn,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),c(d.listingPrice)]})]}),d.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Yl,{className:"w-3 h-3"}):s.jsx(Gt,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},$T=({conversation:t,messages:e,loading:r,currentUser:n,onBack:i})=>{var z,J;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=iy(),[d,h]=p.useState(""),[m,g]=p.useState(40),[v,y]=p.useState(!1),[j,w]=p.useState(!1),[x,b]=p.useState(""),[N,C]=p.useState(""),P=p.useRef(null),T=p.useRef(null),k=()=>{var oe;(oe=T.current)==null||oe.scrollIntoView({behavior:"smooth"})},D=p.useCallback(()=>{const oe=P.current;if(!oe)return;oe.style.height="auto";const Ce=Math.max(40,Math.min(oe.scrollHeight,120));g(Ce)},[]),E=p.useCallback(oe=>{const Ce=oe.target.value;h(Ce),y(!!Ce.trim()),setTimeout(D,0)},[D]),A=async()=>{if(!d.trim()||!t||!n)return;const oe=d.trim();h(""),y(!1),g(40),await a(t.id,oe,n.uid,n.displayName||"Utilisateur",n.photoURL)},R=oe=>{oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),A())},S=async()=>{!t||!n||await l(t.id,n.uid)},V=async()=>{if(!t||!n||!x.trim())return;const oe=t.participants.find(Ce=>Ce!==n.uid);oe&&(await c(t.id,n.uid,oe,x,N),w(!1),b(""),C(""))},U=async()=>{!t||!n||(await u(t.id,n.uid),i())};if(p.useEffect(()=>{t&&n&&o(t.id,n.uid)},[t,n,o]),p.useEffect(k,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Gt,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Er,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const H=t.participants.find(oe=>oe!==(n==null?void 0:n.uid)),$=H?t.participantDetails[H]:null,L=oe=>{const Ce=new Date,tt=new Date(oe);return tt.toDateString()===Ce.toDateString()?tt.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((Ce.getTime()-tt.getTime())/(1e3*60*60*24))<7?tt.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):tt.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},W=oe=>oe.senderId!==(n==null?void 0:n.uid)?null:oe.seen?s.jsx(lQ,{className:"w-3 h-3 text-blue-500"}):s.jsx(FD,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(oa,{className:"w-4 h-4"})}),s.jsxs(is,{className:"w-8 h-8",children:[s.jsx(Ea,{src:$==null?void 0:$.avatar}),s.jsx(Fn,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((J=(z=$==null?void 0:$.name)==null?void 0:z[0])==null?void 0:J.toUpperCase())||s.jsx(Qr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(Qr,{className:"w-3 h-3 text-muted-foreground"}),($==null?void 0:$.name)||"Utilisateur"]}),($==null?void 0:$.verified)&&s.jsx(et,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),$==null?void 0:$.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(cd,{className:"w-4 h-4"})}),s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(YD,{className:"w-4 h-4"})}),s.jsxs(Dh,{children:[s.jsx(Mh,{asChild:!0,children:s.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(UD,{className:"w-4 h-4"})})}),s.jsxs(yu,{align:"end",children:[s.jsx(yt,{asChild:!0,children:s.jsxs(ge,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(Un,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(yt,{children:[s.jsx(ra,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(yt,{children:[s.jsx(eQ,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Rn,{}),s.jsxs(yt,{onClick:()=>w(!0),children:[s.jsx(bl,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(yt,{onClick:S,children:[s.jsx(sQ,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(yt,{onClick:U,className:"text-destructive",children:[s.jsx(ca,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(K,{className:"mt-2",children:s.jsx(Y,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(qD,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(V1,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(cn,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(F,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(ge,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(nS,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[r?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((oe,Ce)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${Ce%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},Ce))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Gt,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Yl,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(oe=>{const Ce=oe.senderId===(n==null?void 0:n.uid);return s.jsx("div",{className:`flex ${Ce?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${Ce?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${Ce?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:oe.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${Ce?"justify-end":"justify-start"}`,children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{children:L(oe.sentAt)}),W(oe)]})]})},oe.id)}),s.jsx("div",{ref:T})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(Cs,{ref:P,value:d,placeholder:"Tapez votre message...",onChange:E,onKeyDown:R,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(F,{onClick:A,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Yl,{className:"h-3.5 w-3.5"})})]}),v&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(Gt,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(ua,{open:j,onOpenChange:w,children:s.jsxs(Ei,{children:[s.jsx(da,{children:s.jsxs(Ci,{className:"flex items-center gap-2",children:[s.jsx(bl,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(dt,{value:x,onValueChange:b,children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Sélectionnez un motif"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(ie,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx(ie,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bl,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx(ie,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(ie,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ba,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(Cs,{id:"report-description",value:N,onChange:oe=>C(oe.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsxs(F,{onClick:V,disabled:!x,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(bl,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},kme=()=>{const{currentUser:t,userProfile:e}=Mt(),{conversations:r,currentConversation:n,messages:i,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=iy(),[d,h]=p.useState(""),[m,g]=p.useState(!1);p.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),p.useEffect(()=>{n&&l(n.id)},[n,l]);const v=j=>{c(j),g(!0)},y=()=>{g(!1),c(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:m?s.jsx($T,{conversation:n,messages:i,loading:a,currentUser:t,onBack:y}):s.jsx(FT,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:v})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(FT,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:v}),s.jsx($T,{conversation:n,messages:i,loading:a,currentUser:t,onBack:y})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Gt,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(Qr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx(F,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(ge,{to:"/auth?mode=signin",className:"flex items-center gap-2",children:[s.jsx(Qr,{className:"w-4 h-4"}),"Se connecter"]})})]})},Tme=Fe.object({email:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Ime=Fe.object({firstName:Fe.string().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:Fe.string().optional(),email:Fe.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),"Vous devez utiliser une adresse email universitaire"),university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),Ame=Fe.object({university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),UT=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],zT=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Pme=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),Rme=()=>{var A,R;const{currentUser:t,signIn:e,signInWithGoogle:r}=Mt(),[n]=ux(),[i,a]=p.useState(()=>n.get("mode")==="signup"),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[v,y]=p.useState(""),[j,w]=p.useState(!1),[x,b]=p.useState(null),N=kr(),C=Tl({resolver:Il(Tme),defaultValues:{email:"",password:""}}),P=Tl({resolver:Il(Ime),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),T=Tl({resolver:Il(Ame),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(p.useEffect(()=>{const S=n.get("mode");a(S==="signup")},[n]),p.useEffect(()=>{(async()=>{if(!t){w(!1),b(null);return}try{const V=await Gr(ze(fe,"users",t.uid));if(V.exists()){const U=V.data();try{const $=localStorage.getItem("pendingUserData"),L=localStorage.getItem("pendingUserEmail");if($&&L===t.email&&t.emailVerified){const W=JSON.parse($),z=Object.fromEntries(Object.entries(W).filter(([,J])=>J!==void 0));await Sl(ze(fe,"users",t.uid),{...z,emailVerified:!0,profileCompleted:!0},{merge:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload();return}}catch($){console.error("Error merging pending data into existing profile:",$)}!(t.emailVerified||t.providerData.some($=>$.providerId==="google.com"))&&!U.emailVerified&&(y(t.email||""),h(!0)),w(!1)}else{if(t.providerData.some($=>$.providerId==="google.com")){if(!Pme(t.email||"")){g("Vous devez utiliser une adresse email universitaire"),Lt.signOut();return}b({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),w(!0);return}const U=localStorage.getItem("pendingUserData"),H=localStorage.getItem("pendingUserEmail");if(U&&H===t.email&&t.emailVerified)try{const $=JSON.parse(U),L=Object.fromEntries(Object.entries($).filter(([,W])=>W!==void 0));await Sl(ze(fe,"users",t.uid),{...L,emailVerified:!0,profileCompleted:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}catch($){console.error("Error saving pending user data:",$),g("Erreur lors de la sauvegarde du profil")}else U&&H===t.email&&!t.emailVerified&&(y(t.email||""),h(!0),w(!1))}}catch(V){console.error("Error checking user profile:",V),w(!1)}})()},[t]),p.useEffect(()=>{let S=null;return d&&t&&!t.emailVerified&&(S=setInterval(async()=>{try{await rg(t),t.emailVerified&&(h(!1),y(""),g(""),window.location.reload())}catch(V){console.error("Error checking email verification:",V)}},5e3)),()=>{S&&clearInterval(S)}},[d,t]),p.useEffect(()=>{if(!d||!t)return;const V=setInterval(async()=>{try{await rg(t),t.emailVerified&&(h(!1),y(""),g(""),ne.success("Email vérifié avec succès ! Redirection..."),setTimeout(()=>{window.location.reload()},1500))}catch{console.log("Vérification automatique en cours...")}},5e3);return()=>clearInterval(V)},[d,t]),j&&x)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(K,{className:"w-full max-w-md",children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(rk,{className:"w-6 h-6 text-green-600"})})}),s.jsx(_e,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(mt,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs(It,{children:[s.jsx(rk,{className:"h-4 w-4"}),s.jsxs(At,{children:["Connecté avec ",s.jsx("strong",{children:x.email})]})]}),m&&s.jsxs(It,{variant:"destructive",children:[s.jsx(la,{className:"h-4 w-4"}),s.jsx(At,{children:m})]}),s.jsxs("form",{onSubmit:T.handleSubmit(async S=>{u(!0),g("");try{const V=S.university==="Autre université"?S.otherUniversity:S.university,U=S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:S.fieldOfStudy,H=Object.fromEntries(Object.entries(S).filter(([,$])=>$!==void 0));if(await Sl(ze(fe,"users",x.uid),{email:x.email,displayName:H.displayName,photoURL:x.photoURL,university:V,otherUniversity:S.university==="Autre université"?S.otherUniversity:null,fieldOfStudy:U,otherFieldOfStudy:S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:null,graduationYear:parseInt(S.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&x.displayName)try{await cm(t,{displayName:H.displayName})}catch($){console.error("Error updating profile:",$)}window.location.reload()}catch(V){console.error("Error completing profile:",V),g("Erreur lors de la sauvegarde du profil")}finally{u(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"university",children:"Université"}),s.jsxs(dt,{onValueChange:S=>T.setValue("university",S),value:T.watch("university"),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Sélectionnez votre université"})}),s.jsx(lt,{children:UT.map(S=>s.jsx(ie,{value:S,children:S},S))})]}),T.watch("university")==="Autre université"&&s.jsx(ye,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...T.register("otherUniversity"),className:"mt-2"}),T.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.university.message}),T.watch("university")==="Autre université"&&T.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(dt,{onValueChange:S=>T.setValue("fieldOfStudy",S),value:T.watch("fieldOfStudy"),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Filière"})}),s.jsx(lt,{children:zT.map(S=>s.jsx(ie,{value:S,children:S},S))})]}),T.watch("fieldOfStudy")==="Autre"&&s.jsx(ye,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...T.register("otherFieldOfStudy"),className:"mt-2"}),T.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.fieldOfStudy.message}),T.watch("fieldOfStudy")==="Autre"&&T.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(dt,{onValueChange:S=>T.setValue("graduationYear",S),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Année"})}),s.jsx(lt,{children:Array.from({length:8},(S,V)=>2024+V).map(S=>s.jsx(ie,{value:S.toString(),children:S},S))})]}),T.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.graduationYear.message})]})]}),s.jsxs(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:c,children:[c?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(F,{variant:"outline",onClick:()=>{Lt.signOut(),w(!1),b(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(d)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(K,{className:"w-full max-w-md",children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(fr,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(_e,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsxs(mt,{children:["Un lien d'activation a été envoyé à ",s.jsx("strong",{children:v}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs(F,{onClick:async()=>{if(t){u(!0);try{await V2(t,XC.actionCodeSettings),g(""),alert("Email d'activation renvoyé !")}catch(S){g("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",S)}u(!1)}},variant:"outline",className:"w-full",disabled:c||!t,children:[c?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(fr,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(F,{onClick:async()=>{if(t){u(!0);try{await rg(t),t.emailVerified?(h(!1),y(""),g(""),window.location.reload()):g("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{g("Erreur lors de la vérification de l'état de l'email")}u(!1)}},variant:"secondary",className:"w-full",disabled:c||!t,children:"J'ai déjà validé mon email"}),m&&s.jsxs(It,{variant:"destructive",children:[s.jsx(la,{className:"h-4 w-4"}),s.jsx(At,{children:m})]}),s.jsx(F,{variant:"link",onClick:()=>{h(!1),y(""),g(""),t&&Lt.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const k=async S=>{u(!0),g("");try{await e(S.email,S.password),N("/")}catch(V){const U=V instanceof Error?V.message:"Erreur inconnue",H=V==null?void 0:V.code;g(H==="auth/invalid-credential"?"Email ou mot de passe incorrect":H==="auth/user-not-found"?"Aucun compte trouvé avec cet email":H==="auth/user-disabled"?"Ce compte a été désactivé":H==="auth/too-many-requests"?"Trop de tentatives. Réessayez plus tard.":"Erreur de connexion: "+U),console.error("Sign in error:",V)}finally{u(!1)}},D=async S=>{u(!0),g("");try{const{firstName:V,lastName:U}=S,H=`${V} ${U}`,L=(await nR(Lt,S.email,S.password)).user;await V2(L,XC.actionCodeSettings);const W=S.university==="Autre université"?S.otherUniversity:S.university,z=S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:S.fieldOfStudy,J={firstName:V,lastName:U,displayName:H,university:W,otherUniversity:S.university==="Autre université"?S.otherUniversity:null,fieldOfStudy:z,otherFieldOfStudy:S.fieldOfStudy==="Autre"?S.otherFieldOfStudy:null,graduationYear:parseInt(S.graduationYear),email:S.email,createdAt:new Date().toISOString(),emailVerified:!1,isStudent:!0,provider:"email"};localStorage.setItem("pendingUserData",JSON.stringify(J)),localStorage.setItem("pendingUserEmail",S.email),L&&await cm(L,{displayName:H}),y(S.email),h(!0)}catch(V){const U=V==null?void 0:V.code;g(U==="auth/email-already-in-use"?"Cette adresse email est déjà utilisée":U==="auth/weak-password"?"Le mot de passe est trop faible":U==="auth/invalid-email"?"Adresse email invalide":"Erreur lors de la création du compte"),console.error("Sign up error:",V)}finally{u(!1)}},E=async()=>{u(!0),g("");try{await r()}catch(S){const V=S instanceof Error?S.message:"Erreur inconnue",U=S==null?void 0:S.code;g(U==="auth/popup-closed-by-user"?"Connexion annulée":U==="auth/popup-blocked"?"Popup bloquée par le navigateur":U==="auth/account-exists-with-different-credential"?"Un compte existe déjà avec cet email":"Erreur de connexion avec Google: "+V),console.error("Google sign in error:",S)}finally{u(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-4 py-4 sm:py-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:s.jsxs(K,{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto",children:[s.jsxs(je,{className:"text-center space-y-2 sm:space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(Kn,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),s.jsx(_e,{className:"text-xl sm:text-2xl lg:text-3xl",children:i?"Rejoindre StudyMarket":"Connectez-vous à votre compte étudiant"}),s.jsx(mt,{className:"text-sm sm:text-base",children:i?"Créez votre compte étudiant vérifié et rejoignez la communauté":"Connectez-vous à votre compte étudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 sm:mt-4",children:s.jsxs(Te,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs sm:text-sm",children:[s.jsx(et,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(Y,{className:"space-y-4 sm:space-y-6",children:[m&&s.jsxs(It,{variant:"destructive",children:[s.jsx(la,{className:"h-4 w-4"}),s.jsx(At,{children:m})]}),s.jsxs(F,{variant:"outline",className:"w-full",onClick:E,disabled:c,children:[c?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Continuer avec Google Éducation"}),s.jsx("span",{className:"sm:hidden",children:"Google Éducation"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(ws,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?P.handleSubmit(D):C.handleSubmit(k),className:"space-y-4",children:[i&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ce,{htmlFor:"firstName",className:"text-sm",children:"Prénom"}),s.jsx(ye,{id:"firstName",...P.register("firstName"),autoComplete:"given-name",className:"text-sm"}),P.formState.errors.firstName&&s.jsx("span",{className:"text-red-500 text-xs",children:P.formState.errors.firstName.message})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ce,{htmlFor:"lastName",className:"text-sm",children:"Nom"}),s.jsx(ye,{id:"lastName",...P.register("lastName"),autoComplete:"family-name",className:"text-sm"}),P.formState.errors.lastName&&s.jsx("span",{className:"text-red-500 text-xs",children:P.formState.errors.lastName.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"email",className:"text-sm",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10 text-sm",...i?P.register("email"):C.register("email")})]}),(i?P.formState.errors.email:C.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(A=i?P.formState.errors.email:C.formState.errors.email)==null?void 0:A.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"university",className:"text-sm",children:"Université"}),s.jsxs(dt,{onValueChange:S=>P.setValue("university",S),value:P.watch("university"),children:[s.jsx(ot,{className:"text-sm",children:s.jsx(ht,{placeholder:"Sélectionnez votre université"})}),s.jsx(lt,{children:UT.map(S=>s.jsx(ie,{value:S,children:S},S))})]}),P.watch("university")==="Autre université"&&s.jsx(ye,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...P.register("otherUniversity"),className:"mt-2 text-sm"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre université"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"fieldOfStudy",className:"text-sm",children:"Filière"}),s.jsxs(dt,{onValueChange:S=>P.setValue("fieldOfStudy",S),value:P.watch("fieldOfStudy"),children:[s.jsx(ot,{className:"text-sm",children:s.jsx(ht,{placeholder:"Sélectionnez votre filière"})}),s.jsx(lt,{children:zT.map(S=>s.jsx(ie,{value:S,children:S},S))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(ye,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...P.register("otherFieldOfStudy"),className:"mt-2 text-sm"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"graduationYear",className:"text-sm",children:"Année de diplôme"}),s.jsxs(dt,{onValueChange:S=>P.setValue("graduationYear",S),value:P.watch("graduationYear"),children:[s.jsx(ot,{className:"text-sm",children:s.jsx(ht,{placeholder:"Sélectionnez votre année"})}),s.jsx(lt,{children:Array.from({length:8},(S,V)=>2024+V).map(S=>s.jsx(ie,{value:S.toString(),children:S},S))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"password",className:"text-sm",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...i?P.register("password"):C.register("password")}),s.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(dQ,{className:"w-4 h-4"}):s.jsx(Co,{className:"w-4 h-4"})})]}),(i?P.formState.errors.password:C.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(R=i?P.formState.errors.password:C.formState.errors.password)==null?void 0:R.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...P.register("confirmPassword")})]}),P.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.confirmPassword.message})]}),s.jsxs(F,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-sm sm:text-base",disabled:c,children:[c?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(F,{variant:"link",onClick:()=>a(!i),disabled:c,className:"w-full flex justify-center items-center text-center break-words px-1 text-sm sm:text-base",children:i?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]})})},Zn=({children:t})=>{const{currentUser:e}=Mt(),r=Uo();return e?s.jsx(s.Fragment,{children:t}):s.jsx(hP,{to:"/auth\\",state:{from:r},replace:!0})};class qm{static async getUserVerificationRequest(){try{const e=Lt.currentUser;if(!e)throw new Error("Utilisateur non connecté");const{data:r,error:n}=await it.from("verification_requests").select("*").eq("user_id",e.uid).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(n&&n.code!=="PGRST116")throw n;return r||null}catch(e){throw console.error("Erreur lors de la récupération de la demande:",e),e}}static async createVerificationRequest(e){try{const r=Lt.currentUser;if(!r)throw new Error("Utilisateur non connecté");let n=[];if(e.documents.length>0)try{n=await this.uploadDocuments(e.documents)}catch(o){console.log("Erreur lors de l'upload des documents, continuation sans documents:",o),n=e.documents.map(l=>`Document simulé: ${l.name}`)}const{data:i,error:a}=await it.from("verification_requests").insert({user_id:r.uid,student_email:e.student_email,student_id:e.student_id||null,university:e.university,documents:n,status:"pending"}).select().single();if(a)throw console.error("Erreur Supabase:",a),new Error(`Erreur lors de la création: ${a.message}`);try{await it.from("profiles").update({verification_status:"pending",university:e.university}).eq("id",r.uid)}catch{console.log("Table profiles non trouvée, mise à jour ignorée")}return i}catch(r){throw console.error("Erreur lors de la création de la demande:",r),r}}static async uploadDocuments(e){try{const r=Lt.currentUser;if(!r)throw new Error("Utilisateur non connecté");const n=[];for(const i of e){if(!this.isValidDocumentType(i))throw new Error(`Type de fichier non supporté: ${i.type}`);if(i.size>5*1024*1024)throw new Error(`Fichier trop volumineux: ${i.name} (max 5MB)`);const a=i.name.split(".").pop(),o=`${r.uid}/${Date.now()}-${Math.random().toString(36).substring(2)}.${a}`,{data:l,error:c}=await it.storage.from("verification-documents").upload(o,i,{cacheControl:"3600",upsert:!1});if(c)throw c;const{data:u}=it.storage.from("verification-documents").getPublicUrl(o);n.push(u.publicUrl)}return n}catch(r){throw console.error("Erreur lors de l'upload des documents:",r),r}}static isValidDocumentType(e){return["application/pdf","image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)}static async updateVerificationRequest(e,r){try{const n=Lt.currentUser;if(!n)throw new Error("Utilisateur non connecté");const i={};if(r.student_email&&(i.student_email=r.student_email),r.student_id&&(i.student_id=r.student_id),r.university&&(i.university=r.university),r.documents&&r.documents.length>0){const l=await this.uploadDocuments(r.documents),{data:c}=await it.from("verification_requests").select("documents").eq("id",e).single(),u=(c==null?void 0:c.documents)||[];i.documents=[...u,...l]}const{data:a,error:o}=await it.from("verification_requests").update(i).eq("id",e).eq("user_id",n.uid).select().single();if(o)throw o;if(r.university)try{await it.from("profiles").update({university:r.university}).eq("id",n.uid)}catch{console.log("Table profiles non trouvée, mise à jour ignorée")}return a}catch(n){throw console.error("Erreur lors de la mise à jour de la demande:",n),n}}static async deleteVerificationRequest(e){try{const r=Lt.currentUser;if(!r)throw new Error("Utilisateur non connecté");const{data:n,error:i}=await it.from("verification_requests").select("status, documents").eq("id",e).eq("user_id",r.uid).single();if(i)throw i;if(n.status!=="pending"&&n.status!=="rejected")throw new Error("Seules les demandes en attente ou rejetées peuvent être supprimées");if(n.documents&&n.documents.length>0)try{for(const o of n.documents){const l=o.split("/").pop();l&&await it.storage.from("verification-documents").remove([`${r.uid}/${l}`])}}catch(o){console.log("Erreur lors de la suppression des documents, continuation:",o)}const{error:a}=await it.from("verification_requests").delete().eq("id",e).eq("user_id",r.uid);if(a)throw a;try{await it.from("profiles").update({verification_status:"unverified",university:null}).eq("id",r.uid)}catch{console.log("Table profiles non trouvée, mise à jour ignorée")}}catch(r){throw console.error("Erreur lors de la suppression de la demande:",r),r}}static async resetRejectedRequest(e){try{const r=Lt.currentUser;if(!r)throw new Error("Utilisateur non connecté");const{error:n}=await it.from("verification_requests").update({status:"pending",updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",r.uid);if(n)throw n;try{await it.from("profiles").update({verification_status:"pending"}).eq("id",r.uid)}catch{console.log("Table profiles non trouvée, mise à jour ignorée")}}catch(r){throw console.error("Erreur lors de la réinitialisation de la demande:",r),r}}static getDocumentDownloadUrl(e){return e.startsWith("http")?e:`${it.supabaseUrl}/storage/v1/object/public/verification-documents/${e}`}static async getUserVerificationStatus(){try{const e=Lt.currentUser;if(!e)throw new Error("Utilisateur non connecté");const r=await this.getUserVerificationRequest();if(r)return{status:r.status,request:r};try{const{data:n,error:i}=await it.from("profiles").select("verification_status").eq("id",e.uid).single();if(!i&&(n!=null&&n.verification_status))return{status:n.verification_status,request:void 0}}catch{console.log("Table profiles non trouvée, utilisation du statut par défaut")}return{status:"unverified",request:void 0}}catch(e){throw console.error("Erreur lors de la vérification du statut:",e),e}}}const Dme=Object.freeze(Object.defineProperty({__proto__:null,VerificationService:qm},Symbol.toStringTag,{value:"Module"})),$p={international:[".edu",".ac.",".ac.uk",".ac.za",".ac.be",".ac.jp",".ac.kr",".ac.in",".ac.au",".ac.nz"],french:[".edu.fr",".ac.fr","univ-","etu.","ens.","ecole","polytechnique","hec","sciencespo","dauphine","centrale","mines","arts-et-metiers","inp","insa","utc","utbm","utt"],sorbonne:[".sorbonne",".sn","sorbonne-nouvelle","sorbonne-universite","paris-sorbonne","pantheon-sorbonne","assas"],test:["@gmail.com","@yahoo.com","@hotmail.com","@outlook.com","@live.com","@icloud.com"]};function Mme(t){const e=t.toLowerCase();return[...$p.international,...$p.french,...$p.sorbonne,...$p.test].some(n=>e.includes(n))}class Ome{constructor(){this.cache=new Map,this.CACHE_DURATION=24*60*60*1e3}getCachedUser(e){const r=this.cache.get(e);return r?Date.now()-r.lastSeen.getTime()>this.CACHE_DURATION?(this.cache.delete(e),null):r:null}cacheUser(e){this.cache.set(e.id,{...e,lastSeen:new Date})}generateUserName(e){if(!e)return"Utilisateur inconnu";const[r]=e.split("@");return r?r.split(".").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Utilisateur inconnu"}getOrCreateUser(e,r,n){const i=this.getCachedUser(e);if(i)return i;const a={id:e,email:r,fullName:this.generateUserName(r),university:n,lastSeen:new Date};return this.cacheUser(a),a}cleanupExpiredCache(){const e=Date.now();for(const[r,n]of this.cache.entries())e-n.lastSeen.getTime()>this.CACHE_DURATION&&this.cache.delete(r)}getCacheSize(){return this.cache.size}clearCache(){this.cache.clear()}}const $h=new Ome;setInterval(()=>{$h.cleanupExpiredCache()},60*60*1e3);function Lme({onSuccess:t,onCancel:e}){const{currentUser:r}=Mt(),[n,i]=p.useState({student_email:"",student_id:"",university:"",documents:[]}),[a,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),h=p.useRef(null);ke.useEffect(()=>{if(r){const b=$h.getOrCreateUser(r.uid,r.email||"","");i(N=>({...N,student_email:r.email||"",university:b.university||"Université Paris 3 Sorbonne Nouvelle"}))}},[r]);const m=["Université de Paris","Sorbonne Université","Université Paris-Saclay","Université Paris 1 Panthéon-Sorbonne","Université Paris 2 Panthéon-Assas","Université Paris 3 Sorbonne Nouvelle","Université Paris 4 Sorbonne","Université Paris 5 René Descartes","Université Paris 6 Pierre et Marie Curie","Université Paris 7 Denis Diderot","Université Paris 8 Vincennes-Saint-Denis","Université Paris 9 Dauphine","Université Paris 10 Nanterre","Université Paris 11 Orsay","Université Paris 12 Val-de-Marne","Université Paris 13 Nord","École Normale Supérieure (ENS)","École Polytechnique","HEC Paris","Sciences Po Paris","CentraleSupélec","Mines ParisTech","Arts et Métiers ParisTech","Autre université"],g=(b,N)=>{i(C=>({...C,[b]:N})),c(null)},v=b=>{const N=Array.from(b.target.files||[]);c(null);for(const C of N){if(!qm.isValidDocumentType(C)){c(`Type de fichier non supporté: ${C.name}. Formats acceptés: PDF, JPG, PNG, WebP`);return}if(C.size>5*1024*1024){c(`Fichier trop volumineux: ${C.name} (max 5MB)`);return}}i(C=>({...C,documents:[...C.documents,...N]}))},y=b=>{i(N=>({...N,documents:N.documents.filter((C,P)=>P!==b)}))},j=()=>n.student_email.trim()?n.university.trim()?Mme(n.student_email)?!0:(c("Veuillez utiliser votre email universitaire officiel"),!1):(c("L'université est requise"),!1):(c("L'email universitaire est requis"),!1),w=async b=>{if(b.preventDefault(),!!j()){o(!0),c(null);try{await qm.createVerificationRequest(n),d(!0),t&&t()}catch(N){c(N instanceof Error?N.message:"Une erreur est survenue")}finally{o(!1)}}},x=b=>{if(b===0)return"0 Bytes";const N=1024,C=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(b)/Math.log(N));return parseFloat((b/Math.pow(N,P)).toFixed(2))+" "+C[P]};return u?s.jsx(K,{className:"max-w-2xl mx-auto",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ye,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Demande soumise avec succès !"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Votre demande de vérification a été envoyée. Notre équipe l'examinera dans les 24-48 heures."}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ba,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Prochaines étapes :"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsx("li",{children:"Examen de vos documents par notre équipe"}),s.jsx("li",{children:"Vérification de votre email universitaire"}),s.jsx("li",{children:"Notification du résultat par email"})]})]})]})}),s.jsx(F,{onClick:e,variant:"outline",children:"Retour"})]})})}):s.jsxs(K,{className:"max-w-2xl mx-auto",children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"w-6 h-6"}),"Vérification de votre statut étudiant"]})}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(oQ,{className:"w-5 h-5"}),"Informations universitaires"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"university",children:"Université *"}),s.jsxs(dt,{value:n.university,onValueChange:b=>g("university",b),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Sélectionnez votre université"})}),s.jsx(lt,{children:m.map(b=>s.jsx(ie,{value:b,children:b},b))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"student_id",children:"Numéro étudiant (optionnel)"}),s.jsx(ye,{id:"student_id",type:"text",placeholder:"Ex: 2024001",value:n.student_id,onChange:b=>g("student_id",b.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ce,{htmlFor:"student_email",children:"Email universitaire *"}),s.jsxs("div",{className:"relative",children:[s.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(ye,{id:"student_email",type:"email",placeholder:"votre.nom@etu.univ-paris.fr",value:n.student_email,onChange:b=>g("student_email",b.target.value),className:"pl-10"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Utilisez votre email universitaire officiel pour la vérification"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(ym,{className:"w-5 h-5"}),"Justificatifs requis"]}),s.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pv,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez-déposez vos documents ici ou cliquez pour sélectionner"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Formats acceptés: PDF, JPG, PNG, WebP (max 5MB par fichier)"}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>{var b;return(b=h.current)==null?void 0:b.click()},disabled:a,children:"Sélectionner des fichiers"}),s.jsx("input",{ref:h,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:v,className:"hidden"})]})}),n.documents.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ce,{children:["Documents sélectionnés (",n.documents.length,")"]}),s.jsx("div",{className:"space-y-2",children:n.documents.map((b,N)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ym,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:b.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:x(b.size)})]})]}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(N),disabled:a,children:s.jsx(Ql,{className:"w-4 h-4"})})]},N))})]})]}),s.jsxs(It,{children:[s.jsx(la,{className:"h-4 w-4"}),s.jsxs(At,{children:[s.jsx("strong",{children:"Important :"})," Vos documents seront traités de manière confidentielle. Seuls les administrateurs de la plateforme y auront accès pour la vérification."]})]}),l&&s.jsxs(It,{variant:"destructive",children:[s.jsx(la,{className:"h-4 w-4"}),s.jsx(At,{children:l})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[e&&s.jsx(F,{type:"button",variant:"outline",onClick:e,disabled:a,children:"Annuler"}),s.jsx(F,{type:"submit",disabled:a,children:a?"Soumission...":"Soumettre la demande"})]})]})})]})}function Vme({verificationData:t}){const e=r=>r?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r):"Date inconnue";return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(K,{children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ct,{className:"w-8 h-8 text-yellow-600"})}),s.jsx(_e,{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-200",children:"Vérification en cours"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Votre demande de vérification est en cours d'examen"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ct,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Statut : En attente de validation"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Notre équipe examine votre demande et vos documents"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Détails de votre demande"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Université"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numéro étudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date de soumission"}),s.jsx("p",{className:"font-medium",children:e(t.verificationSubmittedAt)})]})]})]}),t.verificationDocuments&&t.verificationDocuments.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Documents soumis"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.verificationDocuments.map((r,n)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Ye,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{className:"text-sm font-medium",children:["Document ",n+1]})]},n))})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(et,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Prochaines étapes"}),s.jsxs("ol",{className:"space-y-1 text-xs list-decimal list-inside",children:[s.jsx("li",{children:"Notre équipe examine vos documents (24-48h)"}),s.jsx("li",{children:"Vérification de votre email universitaire"}),s.jsx("li",{children:"Validation ou demande de documents supplémentaires"}),s.jsx("li",{children:"Notification par email du résultat"})]}),s.jsxs("p",{className:"mt-2 text-xs",children:[s.jsx("strong",{children:"Délai moyen :"})," 24-48 heures ouvrables"]})]})]})}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vous recevrez une notification par email dès que votre vérification sera terminée."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"En cas de question, contactez notre support à support@boxetu.fr"})]})]})]})})}function Fme(){return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(K,{children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),s.jsx(_e,{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:"Vérification réussie ! 🎉"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Félicitations ! Votre statut étudiant a été vérifié avec succès"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(et,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-800 dark:text-green-200",children:"Statut : Étudiant vérifié"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Vous avez maintenant accès à toutes les fonctionnalités de BOXETU"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Fonctionnalités maintenant disponibles"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(ja,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Publier des annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendez, donnez ou échangez vos biens"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(cn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Accès aux favoris"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sauvegardez vos annonces préférées"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Vb,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Messagerie complète"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Communiquez avec les autres étudiants"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(ra,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Système de notation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez et donnez des avis"})]})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Prochaines étapes recommandées"}),s.jsxs("ol",{className:"space-y-1 text-xs list-decimal list-inside",children:[s.jsx("li",{children:"Complétez votre profil avec vos informations"}),s.jsx("li",{children:"Ajoutez une photo de profil"}),s.jsx("li",{children:"Explorez les annonces disponibles"}),s.jsx("li",{children:"Publiez votre première annonce"})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(F,{asChild:!0,className:"flex-1",children:s.jsxs(ge,{to:"/",children:[s.jsx(ja,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})}),s.jsx(F,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(ge,{to:"/create",children:[s.jsx(Vb,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre badge de vérification est maintenant visible sur votre profil."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Merci de faire confiance à BOXETU pour vos échanges étudiants !"})]})]})]})})}function $me({verificationData:t,onRetry:e}){const[r,n]=p.useState(!1),[i,a]=p.useState(null),o=c=>c?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(c):"Date inconnue",l=async()=>{try{n(!0),a(null),t.requestId&&await qm.resetRejectedRequest(t.requestId),e()}catch(c){console.error("Erreur lors de la nouvelle tentative:",c),a("Erreur lors de la réinitialisation de la demande. Veuillez réessayer.")}finally{n(!1)}};return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(K,{children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(fn,{className:"w-8 h-8 text-red-600"})}),s.jsx(_e,{className:"text-2xl font-bold text-red-800 dark:text-red-200",children:"Vérification rejetée"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Votre demande de vérification n'a pas pu être validée"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Kt,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-800 dark:text-red-200",children:"Statut : Demande rejetée"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Nous avons besoin d'informations supplémentaires pour valider votre statut étudiant"})]})]})}),t.rejectionReason&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Raison du rejet"}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm",children:t.rejectionReason})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Détails de votre demande"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Université"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numéro étudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date de soumission"}),s.jsx("p",{className:"font-medium",children:o(t.verificationSubmittedAt)})]})]})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Solutions recommandées"}),s.jsxs("ul",{className:"space-y-1 text-xs list-disc list-inside",children:[s.jsx("li",{children:"Vérifiez que votre email universitaire est correct et actif"}),s.jsx("li",{children:"Assurez-vous que vos documents sont lisibles et à jour"}),s.jsx("li",{children:"Vérifiez que votre université est bien reconnue"}),s.jsx("li",{children:"Contactez notre support si vous avez des questions"})]})]})}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(F,{onClick:l,disabled:r,className:"flex-1",children:[s.jsx(Ux,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),r?"Traitement...":"Nouvelle tentative"]}),s.jsxs(F,{variant:"outline",className:"flex-1",children:[s.jsx(fr,{className:"w-4 h-4 mr-2"}),"Contacter le support"]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(et,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Besoin d'aide ?"}),s.jsxs("p",{className:"text-xs",children:["Notre équipe support est là pour vous aider. Contactez-nous à",s.jsx("strong",{children:" support@boxetu.fr"})," ou utilisez le chat en ligne."]})]})]})}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vous pouvez soumettre une nouvelle demande de vérification à tout moment."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Assurez-vous de corriger les problèmes identifiés avant de refaire une demande."})]})]})]})})}function Ume({verificationData:t}){const e=r=>r?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r):"Date inconnue";return s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsxs(K,{children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),s.jsx(_e,{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:"Vérification approuvée !"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Félicitations ! Votre statut étudiant a été validé"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(et,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-800 dark:text-green-200",children:"Statut : Vérifié et approuvé"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Vous avez maintenant accès à toutes les fonctionnalités de BOXETU"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:"Détails de votre vérification"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Université"}),s.jsx("p",{className:"font-medium",children:t.university})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email universitaire"}),s.jsx("p",{className:"font-medium",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Numéro étudiant"}),s.jsx("p",{className:"font-medium",children:t.studentId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date d'approbation"}),s.jsx("p",{className:"font-medium",children:e(t.verificationCompletedAt)})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Avantages de votre vérification"}),s.jsxs("ul",{className:"space-y-1 text-xs list-disc list-inside",children:[s.jsx("li",{children:"Accès complet à toutes les fonctionnalités de BOXETU"}),s.jsx("li",{children:"Possibilité de publier des annonces"}),s.jsx("li",{children:"Accès aux messages et contacts"}),s.jsx("li",{children:"Profil vérifié et de confiance"}),s.jsx("li",{children:"Support prioritaire"})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(F,{className:"flex-1 bg-green-600 hover:bg-green-700",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Commencer à utiliser BOXETU"]}),s.jsxs(F,{variant:"outline",className:"flex-1",children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Télécharger le certificat"]})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre vérification est valide indéfiniment."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"En cas de changement d'université, contactez notre support pour une mise à jour."})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-950/20 border border-gray-200 dark:border-gray-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fr,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Besoin d'aide ?"}),s.jsxs("p",{className:"text-xs",children:["Notre équipe support est là pour vous aider. Contactez-nous à",s.jsx("strong",{children:" support@boxetu.fr"}),"."]})]})]})})]})]})})}function zme(){const{currentUser:t}=Mt(),[e,r]=p.useState("unverified"),[n,i]=p.useState(null),[a,o]=p.useState(!0),[l,c]=p.useState(!1);p.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{o(!0);const d=await qm.getUserVerificationStatus();r(d.status),i(d.request||null)}catch(d){console.error("Erreur lors du chargement du statut de vérification:",d)}finally{o(!1)}};if(a)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("span",{className:"ml-2",children:"Chargement..."})]})})})});if(e==="verified")return s.jsx(Fme,{});if(e==="approved"&&n){const d={isVerified:!0,verificationStatus:"approved",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationCompletedAt:new Date(n.updated_at||n.created_at),verificationDocuments:n.documents};return s.jsx(Ume,{verificationData:d})}if(e==="pending"&&n){const d={isVerified:!1,verificationStatus:"pending",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationDocuments:n.documents};return s.jsx(Vme,{verificationData:d})}if(e==="rejected"&&n){const d={isVerified:!1,verificationStatus:"rejected",university:n.university,studentEmail:n.student_email,studentId:n.student_id,verificationSubmittedAt:new Date(n.submitted_at||n.created_at),verificationDocuments:n.documents,requestId:n.id};return s.jsx($me,{verificationData:d,onRetry:()=>c(!0)})}return l?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(Lme,{onSuccess:()=>{c(!1),u()},onCancel:()=>c(!1)})}):s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsx(K,{className:"mb-8",children:s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:s.jsx(et,{className:"w-8 h-8 text-primary"})}),s.jsx(_e,{className:"text-2xl font-bold",children:"Vérification étudiante"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Confirmez votre statut d'étudiant pour accéder à BOXETU"})]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs(F,{onClick:()=>c(!0),size:"lg",className:"px-8 py-3",children:[s.jsx(yo,{className:"w-5 h-5 mr-2"}),"Commencer la vérification"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Cliquez pour soumettre votre demande de vérification"})]}),s.jsxs(K,{className:"mt-8",children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"w-5 h-5"}),"Pourquoi vérifier votre statut étudiant ?"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(et,{className:"w-5 h-5 text-green-600 mt-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Sécurité garantie"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Communauté 100% étudiante vérifiée pour des échanges sûrs"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ye,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Accès complet"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Débloquez toutes les fonctionnalités de BOXETU"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ct,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Processus rapide"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vérification en 24-48h maximum"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fn,{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Confidentialité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vos documents sont sécurisés et confidentiels"})]})]})]})})]})]})}const wV=({cart:t,total:e,showCheckoutButton:r=!0})=>{const n=kr(),i=e,a=0,o=0,l=i+a-o,c=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(ko,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((u,d)=>u+d.quantity,0),")"]}),s.jsx("span",{children:c(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Bx,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(ws,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:c(l)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),r&&s.jsxs(F,{onClick:()=>n("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(yr,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(vi,{className:"ml-2 h-4 w-4"})]})]})})]})},Bme=()=>{const{currentUser:t}=Mt(),{cart:e,updateQuantity:r,removeFromCart:n,clearCart:i,cartTotal:a}=pd(),o=kr(),[l,c]=p.useState(""),[u,d]=p.useState(!1),h=(v,y)=>{if(!(y<1)){if(y>10){ne.error("Maximum 10 articles par produit");return}r(v,y)}},m=v=>{n(v),ne.success("Article retiré du panier")},g=()=>{l.trim()&&(d(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?ne.success("Code promo appliqué : 10% de réduction"):ne.error("Code promo invalide ou expiré"),d(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(F,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(oa,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(ko,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(F,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(ca,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ko,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:"/products",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((v,y)=>v+y.quantity,0),")"]}),s.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:e.map(v=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[v.image?s.jsx("img",{src:v.image,alt:v.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(kl,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:v.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:v.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>h(v.id,v.quantity-1),disabled:v.quantity<=1,children:s.jsx(GD,{className:"h-3 w-3"})}),s.jsx(ye,{type:"number",value:v.quantity,onChange:y=>{const j=parseInt(y.target.value);isNaN(j)||h(v.id,j)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>h(v.id,v.quantity+1),disabled:v.quantity>=10,children:s.jsx(yo,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v.price*v.quantity)}),s.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>m(v.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(ca,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},v.id))})})]}),s.jsx(K,{className:"mt-6",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(wm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{placeholder:"Code promo",value:l,onChange:v=>c(v.target.value),className:"pl-10"})]}),s.jsx(F,{onClick:g,disabled:!l.trim()||u,children:u?s.jsxs(s.Fragment,{children:[s.jsx(Ux,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(wV,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx(At,{className:"text-blue-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Up=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},sS=fd((t,e)=>({orders:[],loading:!1,fetchUserOrders:async r=>{if(r)try{t({loading:!0});const n=$t(Nt(fe,"orders"),Bt("userId","==",r),Ss(100)),i=await Zt(n),a=[];i.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:Up(l.createdAt),updatedAt:Up(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(n){console.error("Error fetching orders:",n),ne.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async r=>{try{const n=await Gr(ze(fe,"orders",r));if(n.exists()){const i=n.data();return{id:n.id,...i,createdAt:Up(i.createdAt),updatedAt:Up(i.updatedAt)}}return null}catch(n){return console.error("Error getting order:",n),ne.error("Erreur lors du chargement de la commande"),null}},createOrder:async r=>{try{const n=Math.random().toString(36).substring(2,8).toUpperCase(),i={...r,securityCode:n,createdAt:dr(),updatedAt:dr()},a=await Bl(Nt(fe,"orders"),i),o={id:a.id,...r,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),ne.success("Commande créée avec succès !"),a.id}catch(n){throw console.error("Error creating order:",n),ne.error("Erreur lors de la création de la commande"),n}},updateOrderStatus:async(r,n,i)=>{try{const a={status:n,updatedAt:dr()};i&&(a.notes=i),await mr(ze(fe,"orders",r),a),t(o=>({orders:o.orders.map(l=>l.id===r?{...l,status:n,notes:i||l.notes,updatedAt:new Date}:l)})),ne.success(`Statut de la commande mis à jour : ${n}`)}catch(a){console.error("Error updating order status:",a),ne.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(r,n)=>{try{await mr(ze(fe,"orders",r),{status:"cancelled",notes:n,updatedAt:dr()}),t(i=>({orders:i.orders.map(a=>a.id===r?{...a,status:"cancelled",notes:n,updatedAt:new Date}:a)})),ne.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),ne.error("Erreur lors de l'annulation de la commande")}}})),qme=()=>{const{currentUser:t,userProfile:e}=Mt(),r=kr(),n=Uo(),{cart:i,cartTotal:a,clearCart:o}=pd(),{createOrder:l}=sS(),[c,u]=p.useState("shipping"),[d,h]=p.useState(!1),[m,g]=p.useState(null),[v,y]=p.useState({}),[j,w]=p.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[x,b]=p.useState({}),[N,C]=p.useState(!1);p.useEffect(()=>{var A;i.length===0&&!((A=n.state)!=null&&A.directCheckout)&&(r("/cart"),ne.error("Votre panier est vide"))},[i,r,n]);const P=()=>{const A={};return j.fullName||(A.fullName="Nom complet requis"),j.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)||(A.email="Format d'email invalide"):A.email="Email requis",j.phone||(A.phone="Téléphone requis"),j.address||(A.address="Adresse requise"),j.city||(A.city="Ville requise"),j.postalCode||(A.postalCode="Code postal requis"),b(A),Object.keys(A).length===0},T=A=>{A.preventDefault(),P()&&(u("payment"),window.scrollTo(0,0))},k=(A,R)=>{g(A),y(R),A==="card"&&R.stripePaymentId&&(u("review"),window.scrollTo(0,0))},D=()=>{if(!m){ne.error("Veuillez sélectionner un mode de paiement");return}u("review"),window.scrollTo(0,0)},E=async()=>{if(!t){r("/auth");return}if(!N){ne.error("Veuillez accepter les conditions générales");return}h(!0);try{const A={userId:t.uid,items:i,total:a,shipping:j,payment:{method:m,details:v,transactionId:v.stripePaymentId},status:m==="card"?"processing":"pending"},R=await l(A);o(),r(`/order-confirmation/${R}`)}catch(A){console.error("Error placing order:",A),ne.error("Erreur lors de la création de la commande")}finally{h(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(F,{variant:"ghost",onClick:()=>r(-1),className:"-ml-4",children:[s.jsx(oa,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${c==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(vi,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="payment"||c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(vi,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c==="shipping"&&s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Bx,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(mt,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(Qr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(ye,{id:"fullName",value:j.fullName,onChange:A=>w({...j,fullName:A.target.value}),className:x.fullName?"border-red-500":""}),x.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.fullName})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(fr,{className:"w-4 h-4"}),"Email *"]}),s.jsx(ye,{id:"email",type:"email",value:j.email,onChange:A=>w({...j,email:A.target.value}),className:x.email?"border-red-500":""}),x.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.email})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(cd,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(ye,{id:"phone",value:j.phone,onChange:A=>w({...j,phone:A.target.value}),className:x.phone?"border-red-500":""}),x.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.phone})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Université"]}),s.jsx(ye,{id:"university",value:j.university,onChange:A=>w({...j,university:A.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(ye,{id:"address",value:j.address,onChange:A=>w({...j,address:A.target.value}),className:x.address?"border-red-500":""}),x.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(ye,{id:"city",value:j.city,onChange:A=>w({...j,city:A.target.value}),className:x.city?"border-red-500":""}),x.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.city})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(ye,{id:"postalCode",value:j.postalCode,onChange:A=>w({...j,postalCode:A.target.value}),className:x.postalCode?"border-red-500":""}),x.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.postalCode})]}),s.jsxs("div",{children:[s.jsxs(ce,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(ye,{id:"country",value:j.country,onChange:A=>w({...j,country:A.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(Bm,{id:"saveInfo",checked:j.saveInfo,onCheckedChange:A=>w({...j,saveInfo:A})}),s.jsx(ce,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(F,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(vi,{className:"ml-2 h-4 w-4"})]})})]})})]}),c==="payment"&&s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(mt,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(CL,{amount:a,currency:"EUR",onMethodSelect:k,selectedMethod:m}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(F,{variant:"outline",onClick:()=>u("shipping"),children:[s.jsx(oa,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(F,{onClick:D,disabled:!m||m==="card"&&!v.stripePaymentId,children:["Vérifier la commande",s.jsx(vi,{className:"ml-2 h-4 w-4"})]})]})]})})]}),c==="review"&&s.jsxs(K,{children:[s.jsxs(je,{children:[s.jsxs(_e,{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(mt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>u("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:j.fullName}),s.jsx("p",{children:j.address}),s.jsxs("p",{children:[j.postalCode," ",j.city,", ",j.country]}),s.jsx("p",{children:j.email}),s.jsx("p",{children:j.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>u("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[m==="card"&&"Carte bancaire",m==="paypal"&&"PayPal",m==="transfer"&&"Virement bancaire",m==="cash"&&"Paiement à la livraison",m==="lydia"&&"Lydia"]}),m==="card"&&v.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Ye,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),m==="paypal"&&v.paypalEmail&&s.jsx("p",{children:v.paypalEmail}),m==="lydia"&&v.lydiaPhone&&s.jsx("p",{children:v.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(A=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[A.image&&s.jsx("img",{src:A.image,alt:A.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:A.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",A.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(A.price*A.quantity)})]},A.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Bm,{id:"terms",checked:N,onCheckedChange:A=>C(A)}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>u("payment"),children:[s.jsx(oa,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(F,{onClick:E,disabled:d||!N,className:"bg-gradient-to-r from-primary to-secondary",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kl,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(wV,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs(It,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(et,{className:"h-4 w-4 text-blue-600"}),s.jsxs(At,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(K,{className:"mt-4",children:s.jsx(Y,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ba,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(F,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(ko,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx(F,{onClick:()=>r("/auth"),children:"Se connecter"})]})})})},Wme=()=>{const{currentUser:t}=Mt(),{orders:e,fetchUserOrders:r,loading:n}=sS(),i=kr(),[a,o]=p.useState(""),[l,c]=p.useState("all"),[u,d]=p.useState("date-desc"),[h,m]=p.useState("all");p.useEffect(()=>{t&&r(t.uid)},[t,r]);const g=()=>e.filter(w=>{const x=!a||w.id.toLowerCase().includes(a.toLowerCase()),b=l==="all"||w.status===l;let N=!0;if(h!=="all"){const C=new Date(w.createdAt),P=new Date;if(h==="last-30-days"){const T=new Date;T.setDate(P.getDate()-30),N=C>=T}else if(h==="last-6-months"){const T=new Date;T.setMonth(P.getMonth()-6),N=C>=T}}return x&&b&&N}).sort((w,x)=>u==="date-desc"?new Date(x.createdAt).getTime()-new Date(w.createdAt).getTime():u==="date-asc"?new Date(w.createdAt).getTime()-new Date(x.createdAt).getTime():u==="total-desc"?x.total-w.total:u==="total-asc"?w.total-x.total:0),v=w=>{switch(w){case"pending":return s.jsxs(Te,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(Te,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(rr,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(Te,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(Bx,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(Te,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(Te,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(fn,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(Te,{children:w})}},y=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(w),j=()=>{const w={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(C=>({id:C.id,date:C.createdAt,status:C.status,total:C.total,items:C.items.length}))},x=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),b=URL.createObjectURL(x),N=document.createElement("a");N.href=b,N.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,N.click(),URL.revokeObjectURL(b)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(rr,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs(F,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ye,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:w=>o(w.target.value),className:"pl-10"})]}),s.jsxs(dt,{value:l,onValueChange:c,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{placeholder:"Statut"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Tous les statuts"}),s.jsx(ie,{value:"pending",children:"En attente"}),s.jsx(ie,{value:"processing",children:"En traitement"}),s.jsx(ie,{value:"shipped",children:"Expédiée"}),s.jsx(ie,{value:"delivered",children:"Livrée"}),s.jsx(ie,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(dt,{value:h,onValueChange:m,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{placeholder:"Période"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Toutes les périodes"}),s.jsx(ie,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(ie,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(dt,{value:u,onValueChange:d,children:[s.jsx(ot,{className:"w-40",children:s.jsx(ht,{placeholder:"Trier par"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx(ie,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx(ie,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx(ie,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(xc,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Jo,{className:"grid w-full grid-cols-4",children:[s.jsx(Wt,{value:"all",children:"Toutes"}),s.jsx(Wt,{value:"active",children:"En cours"}),s.jsx(Wt,{value:"completed",children:"Terminées"}),s.jsx(Wt,{value:"cancelled",children:"Annulées"})]}),s.jsx(Ht,{value:"all",className:"space-y-4",children:n?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((w,x)=>s.jsx(K,{className:"animate-pulse",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},x))}):g().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(rr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:"/listings",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:g().map(w=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),v(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(_s,{className:"w-3 h-3"}),Mr(new Date(w.createdAt),"dd MMMM yyyy",{locale:un})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:y(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:`/order/${w.id}`,children:["Détails",s.jsx(vi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((x,b)=>s.jsx("div",{className:"flex-shrink-0",children:x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(rr,{className:"w-6 h-6 text-muted-foreground"})})},b)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(Ht,{value:"active",className:"space-y-4",children:g().filter(w=>["pending","processing","shipped"].includes(w.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ct,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:g().filter(w=>["pending","processing","shipped"].includes(w.status)).map(w=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),v(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(_s,{className:"w-3 h-3"}),Mr(new Date(w.createdAt),"dd MMMM yyyy",{locale:un})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:y(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:`/order/${w.id}`,children:["Détails",s.jsx(vi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((x,b)=>s.jsx("div",{className:"flex-shrink-0",children:x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(rr,{className:"w-6 h-6 text-muted-foreground"})})},b)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(Ht,{value:"completed",className:"space-y-4",children:g().filter(w=>w.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ye,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:g().filter(w=>w.status==="delivered").map(w=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),v(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(_s,{className:"w-3 h-3"}),Mr(new Date(w.createdAt),"dd MMMM yyyy",{locale:un})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:y(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:`/order/${w.id}`,children:["Détails",s.jsx(vi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((x,b)=>s.jsx("div",{className:"flex-shrink-0",children:x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(rr,{className:"w-6 h-6 text-muted-foreground"})})},b)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(Ht,{value:"cancelled",className:"space-y-4",children:g().filter(w=>w.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(fn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:g().filter(w=>w.status==="cancelled").map(w=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),v(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(_s,{className:"w-3 h-3"}),Mr(new Date(w.createdAt),"dd MMMM yyyy",{locale:un})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:y(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(F,{asChild:!0,children:s.jsxs(ge,{to:`/order/${w.id}`,children:["Détails",s.jsx(vi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((x,b)=>s.jsx("div",{className:"flex-shrink-0",children:x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(rr,{className:"w-6 h-6 text-muted-foreground"})})},b)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(rr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx(F,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},Hme=()=>{var d,h;const{orderId:t}=N_(),{getOrderById:e}=sS(),[r,n]=p.useState(null),[i,a]=p.useState(!0);p.useEffect(()=>{(async()=>{if(t)try{a(!0);const g=await e(t);n(g)}catch(g){console.error("Error loading order:",g)}finally{a(!1)}})()},[t,e]);const o=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),l=m=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[m]||m,c=()=>{const m=new Date,g=new Date(m);return g.setDate(m.getDate()+3),Mr(g,"EEEE d MMMM",{locale:un})},u=()=>{navigator.clipboard.writeText(t||""),ne.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):r?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",r.shipping.email,"."]})]}),s.jsxs(K,{className:"mb-6",children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(rr,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(Te,{className:"bg-green-100 text-green-800 border-green-200",children:r.status==="pending"?"En attente":r.status==="processing"?"En traitement":r.status==="shipped"?"Expédiée":r.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(F,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,children:s.jsx($D,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:Mr(new Date(r.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(ws,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:r.items.map((m,g)=>s.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&s.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:m.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",m.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(m.price*m.quantity)})]},g))})]}),s.jsx(ws,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(r.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(r.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-base",children:[s.jsx(Bx,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:r.shipping.fullName}),s.jsx("p",{children:r.shipping.address}),s.jsxs("p",{children:[r.shipping.postalCode," ",r.shipping.city,", ",r.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(_s,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",c()]})]})})]})})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2 text-base",children:[s.jsx(yr,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:l(r.payment.method)}),r.payment.method==="card"&&((d=r.payment.details)==null?void 0:d.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",r.payment.details.cardNumber.slice(-4)]}),r.payment.method==="paypal"&&((h=r.payment.details)==null?void 0:h.paypalEmail)&&s.jsx("p",{children:r.payment.details.paypalEmail}),r.payment.method==="transfer"&&s.jsxs(It,{className:"mt-2",children:[s.jsx(Kt,{className:"h-4 w-4"}),s.jsx(At,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",r.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(F,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(ge,{to:"/orders",children:[s.jsx(rr,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(F,{variant:"outline",className:"flex-1",children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(ge,{to:"/listings",children:[s.jsx(kl,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(F,{variant:"link",className:"text-primary",children:[s.jsx(fr,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(F,{variant:"link",className:"text-primary",children:[s.jsx(Gl,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(Kt,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx(F,{asChild:!0,children:s.jsx(ge,{to:"/orders",children:"Voir mes commandes"})})]})})})},Gme=({id:t,name:e,description:r,price:n,currency:i,image:a,mode:o})=>{const{currentUser:l}=Mt(),{addToCart:c}=pd(),u=kr(),d=(g,v)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:v}).format(g),h=()=>{if(!l){ne.error("Veuillez vous connecter pour ajouter au panier"),u("/auth");return}c({id:t,name:e,price:n,image:a,seller:"BOXETU",sellerId:"system",listingId:t})},m=()=>{if(!l){ne.error("Veuillez vous connecter pour acheter"),u("/auth");return}c({id:t,name:e,price:n,image:a,seller:"BOXETU",sellerId:"system",listingId:t}),u("/checkout")};return s.jsxs(K,{className:"overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(nQ,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(Te,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(je,{children:[s.jsx(_e,{children:e}),s.jsx(mt,{children:r})]}),s.jsx(Y,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[d(n,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(w3,{className:"flex gap-2",children:[s.jsxs(F,{variant:"outline",className:"flex-1",onClick:h,children:[s.jsx(ko,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:m,children:"Acheter"})]})]})},Nj=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],Kme=t=>Nj.find(e=>e.priceId===t),bV="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";gL(bV);const Yme={isConfigured:!0,key:`${bV.substring(0,8)}...`};async function Qme(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Xme(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Jme=()=>{const{getCartItemCount:t}=pd(),e=kr(),r=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(F,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(oa,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(kl,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),r>0&&s.jsxs(F,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(ko,{className:"w-4 h-4"}),"Panier (",r,")"]})]})]}),!Yme.isConfigured,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Nj.map(n=>s.jsx(Gme,{id:n.id,name:n.name,description:n.description,price:n.price,currency:n.currency,image:n.image,mode:n.mode},n.id))}),Nj.length===0&&s.jsx(K,{className:"text-center py-12",children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(rr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Zme=()=>{const[t]=ux(),e=kr(),{currentUser:r}=Mt(),{clearCart:n}=pd(),[i,a]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState(null),m=t.get("session_id"),g=t.get("type")==="subscription";p.useEffect(()=>{n();async function y(){if(r)try{if(a(!0),g){const w=await Qme();l(w)}else{const x=(await Xme())[0];u(x)}}catch(w){console.error("Error fetching checkout result:",w),h("Impossible de charger les détails de votre achat")}finally{a(!1)}}const j=setTimeout(()=>{y()},2e3);return()=>clearTimeout(j)},[r,g,m,n]);const v=()=>{if(g&&(o!=null&&o.price_id)){const y=Kme(o.price_id);return y?y.name:"Abonnement"}else if(c)return"Commande";return"Achat"};return r?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(_n,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):d?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(It,{className:"border-red-200 bg-red-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-red-600"}),s.jsx(At,{className:"text-red-800",children:d})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(F,{asChild:!0,children:s.jsx(ge,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",g?"abonnement":"commande"," a été confirmé",g?"":"e","."]})]}),s.jsxs(K,{className:"mb-6",children:[s.jsx(je,{children:s.jsxs(_e,{className:"flex items-center gap-2",children:[g?s.jsx(yr,{className:"w-5 h-5"}):s.jsx(rr,{className:"w-5 h-5"}),v()]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:g&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:c.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:c.currency}).format(c.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:c.order_status==="completed"?"Complété":c.order_status==="pending"?"En attente":c.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(It,{className:"bg-blue-50 border-blue-200",children:[s.jsx(_s,{className:"h-4 w-4 text-blue-600"}),s.jsx(At,{className:"text-blue-800",children:g?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(F,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(ge,{to:"/orders",children:[s.jsx(rr,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(ge,{to:"/products",children:[s.jsx(kl,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(Gl,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(It,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx(At,{className:"text-blue-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(F,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})},efe=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],tfe=()=>{const{id:t}=N_(),e=kr(),{currentUser:r}=Mt(),{fetchListingById:n,updateListing:i,currentListing:a,loading:o}=Ef(),[l,c]=p.useState({title:"",description:"",price:"",images:[]}),[u,d]=p.useState([]),[h,m]=p.useState(!1),[g,v]=p.useState(null),[y,j]=p.useState(""),[w,x]=p.useState([]),[b,N]=p.useState("");p.useEffect(()=>{t&&n(t)},[t,n]),p.useEffect(()=>{var R;a&&(c({title:a.title||"",description:a.description||"",price:((R=a.price)==null?void 0:R.toString())||"",images:a.images||[]}),j(a.category||""),x(a.tags||[]))},[a]);const C=R=>{c({...l,[R.target.name]:R.target.value})},P=R=>{if(!R.target.files)return;const S=Array.from(R.target.files);d(V=>[...V,...S])},T=R=>{c({...l,images:l.images.filter((S,V)=>V!==R)})},k=R=>{d(u.filter((S,V)=>V!==R))},D=()=>{b.trim()&&!w.includes(b.trim())&&w.length<5&&(x([...w,b.trim()]),N(""))},E=R=>{x(w.filter(S=>S!==R))},A=async R=>{if(R.preventDefault(),!(!t||!r)){m(!0);try{let S=[];u.length>0&&(S=await Promise.all(u.map(U=>rfe(U,r.uid))));const V=[...l.images,...S];await i(t,{...l,price:parseFloat(l.price),images:V,category:y,tags:w}),e(`/listing/${t}`)}catch{v("Erreur lors de la mise à jour de l'annonce")}finally{m(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?g?s.jsx("div",{className:"text-red-500",children:g}):s.jsx("form",{onSubmit:A,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(ce,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(ye,{id:"title",name:"title",value:l.title,onChange:C,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(ce,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(Cs,{id:"description",name:"description",value:l.description,onChange:C,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(ce,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(ye,{id:"price",name:"price",value:l.price,onChange:C,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(ce,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:y,onChange:R=>j(R.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),efe.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(ce,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(R=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[R,s.jsx(F,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>E(R),children:"×"})]},R))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{placeholder:"Ajouter un tag...",value:b,onChange:R=>N(R.target.value),onKeyDown:R=>R.key==="Enter"&&(R.preventDefault(),D()),className:"flex-1"}),s.jsx(F,{type:"button",onClick:D,disabled:!b.trim()||w.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(ce,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((R,S)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:R,alt:`photo-${S}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(F,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>T(S),children:"×"})]},S)),u.map((R,S)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(R),alt:`new-photo-${S}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(F,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>k(S),children:"×"})]},S)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:P,disabled:h})]})]})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:h,children:h?"Enregistrement...":"Enregistrer les modifications"}),g&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:g})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function rfe(t,e){const r=Date.now(),n=`listings/${e}/${r}_${t.name}`,i=Ih(Ph,n),a=await oD(i,t);return await dv(a.ref)}const nfe=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[i,a]=p.useState(""),[o,l]=p.useState({type:"",contract:"",level:"",city:"",remote:""}),c=[{id:"1",title:"Développeur Frontend React - Stage",company:"TechStart Paris",description:"Rejoins notre équipe pour développer des interfaces modernes avec React et TypeScript. Formation et mentoring assurés.",type:"stage",contract:"stage",salary:{min:600,max:800,period:"month"},location:{city:"Paris",remote:!0,university:"Sorbonne Université"},requirements:{level:"master",experience:"Débutant accepté",skills:["React","TypeScript","CSS"]},schedule:{hours:"35h/semaine",flexible:!0},contact:{email:"stage@techstart.fr",website:"techstart.fr"},postedAt:new Date,deadline:new Date("2025-02-28")},{id:"2",title:"Cours particuliers Mathématiques",company:"Particulier",description:"Recherche étudiant en Master Maths pour donner des cours à domicile niveau lycée.",type:"cours-particuliers",contract:"freelance",salary:{min:20,max:25,period:"hour"},location:{city:"Paris 16e",remote:!1},requirements:{level:"master",experience:"Première expérience souhaitée",skills:["Mathématiques","Pédagogie"]},schedule:{hours:"2h/semaine",flexible:!0},contact:{email:"marie.martin@example.com",phone:"06.12.34.56.78"},postedAt:new Date,deadline:new Date("2025-01-30")},{id:"3",title:"Assistant Marketing Digital",company:"Agence Digital Plus",description:"Job étudiant flexible. Gestion réseaux sociaux et création de contenu pour nos clients.",type:"job-etudiant",contract:"cdd",salary:{min:12,max:15,period:"hour"},location:{city:"Lyon",remote:!0},requirements:{level:"licence",experience:"Débutant accepté",skills:["Réseaux sociaux","Canva","Communication"]},schedule:{hours:"15h/semaine",flexible:!0},contact:{email:"recrutement@digitalplus.fr"},postedAt:new Date}];p.useEffect(()=>{(async()=>{n(!0);try{i||Object.keys(o).length>0,setTimeout(()=>{e(c),n(!1)},1e3)}catch(y){console.error("Erreur recherche emplois:",y),n(!1)}})()},[i,o]);const u=v=>{a(v)},d=(v,y)=>{l(j=>({...j,[v]:y}))},h=v=>{switch(v){case"stage":return s.jsx(Kn,{className:"w-4 h-4"});case"job-etudiant":return s.jsx(Rh,{className:"w-4 h-4"});case"cours-particuliers":return s.jsx(Kn,{className:"w-4 h-4"});case"babysitting":return s.jsx(Rh,{className:"w-4 h-4"});default:return s.jsx(Rh,{className:"w-4 h-4"})}},m=v=>{switch(v){case"stage":return"bg-blue-100 text-blue-800";case"job-etudiant":return"bg-green-100 text-green-800";case"cours-particuliers":return"bg-purple-100 text-purple-800";case"babysitting":return"bg-pink-100 text-pink-800";case"freelance":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=v=>{const{min:y,max:j,period:w}=v,x=w==="hour"?"/h":w==="month"?"/mois":"/an";return y===j?`${y}€${x}`:`${y}-${j}€${x}`};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Jobs & Stages étudiants"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez l'opportunité parfaite compatible avec vos études"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(ye,{type:"text",placeholder:"Rechercher par poste, entreprise, compétences...",value:i,onChange:v=>u(v.target.value),className:"pl-10 py-3 text-lg"})]})}),s.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs(dt,{onValueChange:v=>d("type",v),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Type d'emploi"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"stage",children:"Stages"}),s.jsx(ie,{value:"job-etudiant",children:"Jobs étudiants"}),s.jsx(ie,{value:"cours-particuliers",children:"Cours particuliers"}),s.jsx(ie,{value:"babysitting",children:"Baby-sitting"}),s.jsx(ie,{value:"freelance",children:"Freelance"})]})]}),s.jsxs(dt,{onValueChange:v=>d("level",v),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Niveau d'études"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"tous-niveaux",children:"Tous niveaux"}),s.jsx(ie,{value:"licence",children:"Licence"}),s.jsx(ie,{value:"master",children:"Master"}),s.jsx(ie,{value:"doctorat",children:"Doctorat"})]})]}),s.jsx(ye,{type:"text",placeholder:"Ville",value:o.city,onChange:v=>d("city",v.target.value)}),s.jsxs(dt,{onValueChange:v=>d("remote",v),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Modalité"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"true",children:"Télétravail"}),s.jsx(ie,{value:"false",children:"Présentiel"})]})]}),s.jsxs(dt,{onValueChange:v=>d("contract",v),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Contrat"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"stage",children:"Stage"}),s.jsx(ie,{value:"cdd",children:"CDD"}),s.jsx(ie,{value:"freelance",children:"Freelance"}),s.jsx(ie,{value:"interim",children:"Intérim"})]})]})]}),r?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((v,y)=>s.jsx(K,{className:"animate-pulse",children:s.jsxs(Y,{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},y))}):s.jsx("div",{className:"space-y-4",children:t.map(v=>s.jsx(K,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-semibold",children:v.title}),s.jsxs(Te,{className:m(v.type),children:[h(v.type),s.jsx("span",{className:"ml-1 capitalize",children:v.type.replace("-"," ")})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:v.company}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 line-clamp-2",children:v.description})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:g(v.salary)}),s.jsx("div",{className:"text-sm text-gray-500",children:v.schedule.hours})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Hr,{className:"w-4 h-4 mr-1"}),v.location.city,v.location.remote&&s.jsx(Te,{variant:"secondary",className:"ml-2 text-xs",children:"Télétravail possible"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Kn,{className:"w-4 h-4 mr-1"}),v.requirements.level]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ct,{className:"w-4 h-4 mr-1"}),"Publié il y a ",Math.floor((Date.now()-v.postedAt.getTime())/(1e3*60*60*24))," jours"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[v.requirements.skills.slice(0,4).map((y,j)=>s.jsx(Te,{variant:"outline",className:"text-xs",children:y},j)),v.requirements.skills.length>4&&s.jsxs(Te,{variant:"outline",className:"text-xs",children:["+",v.requirements.skills.length-4," autres"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-gray-500",children:v.deadline&&s.jsxs("span",{children:["Candidature avant le ",v.deadline.toLocaleDateString("fr-FR")]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",children:"Sauvegarder"}),s.jsx(F,{size:"sm",children:"Postuler"})]})]})]})},v.id))})]})})},sfe=[{objectID:"1",title:"Studio moderne près de la Sorbonne",description:"Meublé, chez un propriétaire, dans une maison",price:850,type:"studio",city:"Paris 5ème",address:"RUE DES CAROLUS75005 Paris",surface:25,imageUrl:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400&h=300&fit=crop",detailUrl:"/logement/1",isAvailable:!0,availabilityText:"Disponible du 01/09/2025 au 18/07/2027",rating:4.5,source:"BOXETU"}],ife=t=>!t.title||!t.objectID?null:{objectID:String(t.objectID),source:String(t.sourceNormalized??t.source??t.platform??"unknown"),title:String(t.title),description:String(t.description??""),price:typeof t.price=="number"&&t.price>0?t.price:0,priceTotal:typeof t.priceTotal=="number"?t.priceTotal:0,type:String(t.type??t.category??""),city:String(t.city??""),address:String(t.address??t.quartier??""),surface:typeof t.surface=="number"&&t.surface>0?t.surface:null,imageUrl:String(t.imageUrl??(Array.isArray(t.images)?t.images[0]:"")??""),detailUrl:String(t.detailUrl??t.url??""),isAvailable:t.hasAvailability!==!1,availabilityText:Array.isArray(t.availabilityMonths)?`Disponible: ${t.availabilityMonths.join(", ")}`:String(t.availabilityMonths??""),rating:typeof t.rating=="number"&&t.rating>0?t.rating:null,_geoloc:t._geoloc},afe=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[i,a]=p.useState(""),[o,l]=p.useState(0),[c,u]=p.useState(0),[d,h]=p.useState(0),[m,g]=p.useState({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),[v,y]=p.useState(""),j="Q3E5Y56YF4",w="ff26b6f0fa03bc6384566ea42dfe0ab4",x="student-housing";p.useEffect(()=>{(async()=>{n(!0),y("");try{const D=`https://${j}-dsn.algolia.net/1/indexes/${x}/query`;console.log("🔗 URL Algolia:",D),console.log("📋 Filtres appliqués:",{searchQuery:i,type:m.type,source:m.source,city:m.city,prix:`${m.minPrice||0} - ${m.maxPrice||"∞"}`});const E=[],A=[];if(m.type&&E.push([`type:${m.type}`,`logementTypes:${m.type}`,`category:${m.type}`]),m.source&&E.push([`sourceNormalized:${m.source}`,`source:${m.source}`,`platform:${m.source}`]),m.city&&E.push([`city:${m.city}`]),m.university&&E.push([`university:${m.university}`]),m.furnished){const U=m.furnished==="true";E.push([`_tags:${U?"meuble":"non-meuble"}`,`guarantees:${U?"meuble":"non-meuble"}`])}if(m.minPrice||m.maxPrice){const U=m.minPrice?Number(m.minPrice):0,H=m.maxPrice?Number(m.maxPrice):999999;U>0&&A.push(`price>=${U}`),H<999999&&A.push(`price<=${H}`)}console.log("🔍 Filtres construits:",{facetFilters:E,numericFilters:A});const R=await fetch(D,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":j,"X-Algolia-API-Key":w},body:JSON.stringify({query:i,hitsPerPage:48,page:o,attributesToRetrieve:["*"],attributesToHighlight:[],attributesToSnippet:[],facetFilters:E.length?E:void 0,numericFilters:A.length?A:void 0,getRankingInfo:!0})});if(!R.ok){const U=await R.text();throw console.error("❌ Erreur Algolia:",R.status,U),new Error(`Algolia HTTP ${R.status}: ${U}`)}const S=await R.json();console.log("✅ Réponse Algolia réussie!",{nbHits:S.nbHits,nbPages:S.nbPages,resultats:S.hits.length,page:o+1,total:`${S.nbHits} logements`}),S.hits.length>0&&(console.log("📊 Premier résultat brut:",S.hits[0]),console.log("🏗️ Structure des champs disponibles:",Object.keys(S.hits[0])));const V=S.hits.map(U=>ife(U)).filter(U=>U!==null);console.log("🔄 Données normalisées:",V.length,"logements valides sur",S.hits.length,"résultats bruts"),e(V),u(S.nbPages||0),h(S.nbHits||0)}catch(D){console.error("❌ Erreur lors de la recherche:",D),console.log("🔄 Fallback vers les données de démonstration");const E=[...sfe].map(A=>({objectID:A.objectID,source:A.source,title:A.title,description:A.description,price:A.price,priceTotal:0,type:A.type,city:A.city,address:A.address,surface:A.surface,imageUrl:A.imageUrl,detailUrl:A.detailUrl,isAvailable:A.isAvailable,availabilityText:A.availabilityText,rating:A.rating,_geoloc:void 0}));e(E),y("⚠️ Problème de connexion Algolia. Données de démonstration affichées.")}finally{n(!1)}})()},[i,m,o]);const b=k=>{a(k),l(0)},N=(k,D)=>{g(E=>({...E,[k]:D})),l(0)},C=k=>{k>=0&&k<c&&(l(k),window.scrollTo({top:0,behavior:"smooth"}))},P=k=>{switch(k){case"studio":return s.jsx(mi,{className:"w-4 h-4"});case"appartement":return s.jsx(mi,{className:"w-4 h-4"});case"chambre":return s.jsx(mi,{className:"w-4 h-4"});case"colocation":return s.jsx(Wo,{className:"w-4 h-4"});default:return s.jsx(mi,{className:"w-4 h-4"})}},T=k=>{switch(k){case"studio":return"bg-blue-100 text-blue-800";case"appartement":return"bg-green-100 text-green-800";case"chambre":return"bg-purple-100 text-purple-800";case"colocation":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Logements étudiants"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez le logement parfait près de votre campus"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(ye,{type:"text",placeholder:"Rechercher par ville, université, quartier...",value:i,onChange:k=>b(k.target.value),className:"pl-10 py-3 text-lg"})]})}),s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(dt,{value:m.type,onValueChange:k=>N("type",k==="all"?"":k),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Type de logement"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Tous les types"}),s.jsx(ie,{value:"Résidence étudiante",children:"Résidence étudiante"}),s.jsx(ie,{value:"Chambre",children:"Chambre"}),s.jsx(ie,{value:"Studio",children:"Studio"}),s.jsx(ie,{value:"Appartement",children:"Appartement"}),s.jsx(ie,{value:"Colocation",children:"Colocation"})]})]}),s.jsx(ye,{type:"number",placeholder:"Prix min (€)",value:m.minPrice,onChange:k=>N("minPrice",k.target.value)}),s.jsx(ye,{type:"number",placeholder:"Prix max (€)",value:m.maxPrice,onChange:k=>N("maxPrice",k.target.value)}),s.jsxs(dt,{value:m.source,onValueChange:k=>N("source",k==="all"?"":k),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Source"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Toutes les sources"}),s.jsx(ie,{value:"adele",children:"Adele"}),s.jsx(ie,{value:"lokaviz",children:"Lokaviz"}),s.jsx(ie,{value:"studymarket",children:"BOXETU"})]})]})]}),s.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(ye,{type:"text",placeholder:"Ville (ex: Paris, Poitiers)",value:m.city,onChange:k=>N("city",k.target.value)}),s.jsxs(dt,{value:m.university,onValueChange:k=>N("university",k==="all"?"":k),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Université"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"all",children:"Toutes les universités"}),s.jsx(ie,{value:"sorbonne",children:"Sorbonne"}),s.jsx(ie,{value:"dauphine",children:"Dauphine"}),s.jsx(ie,{value:"assas",children:"Panthéon-Assas"}),s.jsx(ie,{value:"sciences-po",children:"Sciences Po"}),s.jsx(ie,{value:"poitiers",children:"Université de Poitiers"})]})]}),s.jsxs(dt,{value:m.furnished,onValueChange:k=>N("furnished",k==="any"?"":k),children:[s.jsx(ot,{children:s.jsx(ht,{placeholder:"Meublé"})}),s.jsxs(lt,{children:[s.jsx(ie,{value:"any",children:"Indifférent"}),s.jsx(ie,{value:"true",children:"Meublé"}),s.jsx(ie,{value:"false",children:"Non meublé"})]})]})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(F,{variant:"outline",onClick:()=>{g({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),a(""),l(0)},children:"Réinitialiser les filtres"}),!r&&s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-semibold",children:d.toLocaleString()})," logements trouvés",c>1&&s.jsxs("span",{className:"ml-2",children:["• Page ",o+1," sur ",c]})]})]}),c>1&&!r&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Navigation rapide:"}),s.jsx("div",{className:"flex gap-1",children:[0,Math.floor(c/4),Math.floor(c/2),Math.floor(3*c/4),c-1].filter((k,D,E)=>E.indexOf(k)===D&&k>=0).map(k=>s.jsx(F,{variant:o===k?"default":"outline",size:"sm",onClick:()=>C(k),className:"px-2 py-1 text-xs",children:k+1},k))})]})]}),v&&s.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg",children:v}),r?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((k,D)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),s.jsxs(Y,{className:"p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},D))}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>{var oe;const D=k.objectID,E=k.imageUrl||"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop",A=k.title,R=k.description,S=k.price||k.priceTotal||0,V=k.city,U=((oe=k.type)==null?void 0:oe.toLowerCase())||"logement",H=k.surface,$=k.detailUrl||`/logement/${D}`,L=k.isAvailable,W=k.availabilityText,z=k.rating,J=k.source;return s.jsxs(K,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:E,alt:A,className:"w-full h-48 object-cover rounded-t-lg",onError:Ce=>{Ce.target.src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop"}}),s.jsxs(Te,{className:`absolute top-3 left-3 ${T(U)}`,children:[P(U),s.jsx("span",{className:"ml-1 capitalize",children:U})]}),J&&s.jsx(Te,{className:"absolute top-3 right-3 bg-gray-800 text-white text-xs",children:J})]}),s.jsxs(Y,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:A}),R&&s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:R}),s.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 mb-2",children:[s.jsx(Hr,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:V})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S>0?s.jsxs("div",{className:"flex items-center text-blue-600 font-bold text-xl",children:[s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/euro.svg",alt:"Prix",className:"w-5 h-5 mr-1"}),S,s.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}):s.jsx("span",{className:"text-gray-500 text-sm",children:"Prix à négocier"}),H&&s.jsxs("span",{className:"text-sm text-gray-500",children:[H,"m²"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[L!==!1&&s.jsx(Te,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:"Disponible"}),z&&s.jsxs(Te,{variant:"secondary",className:"text-xs",children:["⭐ ",z]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[W&&s.jsx("span",{className:"text-sm text-gray-500 flex-1 mr-2",children:W}),s.jsx(F,{size:"sm",onClick:()=>window.open($,"_blank"),disabled:!$,children:"Voir l'annonce"})]})]})]},D)})}),!r&&t.length===0&&!v&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(mi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Aucun logement trouvé"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez de modifier vos critères de recherche"})]}),!r&&c>1&&s.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(0),disabled:o===0,children:"⏮️ Début"}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(o-1),disabled:o===0,children:"← Précédent"}),s.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,c)},(k,D)=>{const A=Math.max(0,Math.min(o-2,c-5))+D;return s.jsx(F,{variant:o===A?"default":"outline",size:"sm",onClick:()=>C(A),className:"px-3 py-1",children:A+1},A)})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(o+1),disabled:o>=c-1,children:"Suivant →"}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(c-1),disabled:o>=c-1,children:"⏭️ Fin"})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Affichage de ",o*48+1," à ",Math.min((o+1)*48,d)," sur ",d.toLocaleString()," logements"]})]}),!r&&c>10&&s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Aller à la page:"}),s.jsx(ye,{type:"number",min:"1",max:c,placeholder:"Page",className:"w-20 text-center",onKeyPress:k=>{if(k.key==="Enter"){const D=parseInt(k.target.value)-1;D>=0&&D<c&&C(D)}}}),s.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",c]})]}),s.jsx("div",{className:"mt-12 text-center",children:s.jsx(K,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:s.jsxs(Y,{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Vous proposez un logement ?"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Publiez votre annonce gratuitement et touchez des milliers d'étudiants"}),s.jsx(F,{size:"lg",children:"Publier une annonce logement"})]})})})]})})};function ofe({request:t,isSelected:e,onSelect:r,onStatusChange:n}){const[i,a]=p.useState(!1),[o,l]=p.useState(!1),c=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200 border-yellow-200 dark:border-yellow-800";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200 border-green-200 dark:border-green-800";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200 border-red-200 dark:border-red-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200 border-gray-200 dark:border-gray-800"}},u=v=>{switch(v){case"pending":return s.jsx(Ct,{className:"w-4 h-4"});case"approved":return s.jsx(Ye,{className:"w-4 h-4"});case"rejected":return s.jsx(fn,{className:"w-4 h-4"});default:return s.jsx(Ct,{className:"w-4 h-4"})}},d=v=>{switch(v){case"pending":return"En attente";case"approved":return"Approuvée";case"rejected":return"Rejetée";default:return"Inconnu"}},h=v=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v),m=async v=>{try{a(!0),await n(v)}catch(y){console.error("Erreur lors du changement de statut:",y)}finally{a(!1)}},g=v=>{console.log("Téléchargement de:",v)};return s.jsxs(K,{className:`transition-all duration-200 ${e?"ring-2 ring-primary":""}`,children:[s.jsx(je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(Bm,{checked:e,onCheckedChange:v=>r(v),className:"mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(_e,{className:"text-lg font-semibold truncate",children:t.userName}),s.jsx(Te,{className:c(t.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[u(t.status),d(t.status)]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:t.userEmail})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:t.university})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"w-4 h-4"}),s.jsx("span",{children:h(t.submittedAt)})]})]})]})]}),s.jsxs(Dh,{children:[s.jsx(Mh,{asChild:!0,children:s.jsx(F,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(UD,{className:"w-4 h-4"})})}),s.jsxs(yu,{align:"end",children:[s.jsxs(yt,{onClick:()=>l(!o),children:[s.jsx(Co,{className:"w-4 h-4 mr-2"}),o?"Masquer":"Afficher"," les détails"]}),s.jsxs(yt,{onClick:()=>g("tous"),children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Télécharger tous les documents"]}),s.jsxs(yt,{children:[s.jsx(Fb,{className:"w-4 h-4 mr-2"}),"Contacter l'étudiant"]})]})]})]})}),s.jsxs(Y,{className:"space-y-4",children:[o&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Informations étudiant"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Nom complet:"}),s.jsx("span",{children:t.userName})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Email personnel:"}),s.jsx("span",{className:"truncate",children:t.userEmail})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Email étudiant:"}),s.jsx("span",{className:"truncate",children:t.studentEmail})]}),t.studentId&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Numéro étudiant:"}),s.jsx("span",{children:t.studentId})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Documents soumis"}),s.jsx("div",{className:"space-y-2",children:t.documents&&t.documents.length>0?t.documents.map((v,y)=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(ym,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm truncate",children:v.includes("http")?`Document ${y+1}`:v})]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>g(v),className:"h-6 px-2 flex-shrink-0",children:s.jsx(Cn,{className:"w-3 h-3"})})]}),v.includes("http")&&s.jsx("div",{className:"border rounded-lg overflow-hidden",children:v.toLowerCase().includes(".pdf")?s.jsx("iframe",{src:`${v}#toolbar=0&navpanes=0&scrollbar=0`,className:"w-full h-96 border-0",title:`Document ${y+1}`}):s.jsx("img",{src:v,alt:`Document ${y+1}`,className:"w-full h-auto max-h-96 object-contain"})})]},y)):s.jsx("div",{className:"p-3 bg-muted/30 rounded text-sm text-muted-foreground",children:"Aucun document fourni"})})]})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Notes"}),s.jsx("div",{className:"p-3 bg-muted/50 rounded text-sm",children:t.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4 border-t",children:[t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(F,{onClick:()=>m("approved"),disabled:i,className:"flex-1 sm:flex-none bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Approuver"]}),s.jsxs(F,{onClick:()=>m("rejected"),disabled:i,variant:"destructive",className:"flex-1 sm:flex-none",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),"Rejeter"]})]}),t.status==="approved"&&s.jsxs(F,{onClick:()=>m("pending"),disabled:i,variant:"outline",className:"flex-1 sm:flex-none",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Remettre en attente"]}),t.status==="rejected"&&s.jsxs(F,{onClick:()=>m("pending"),disabled:i,variant:"outline",className:"flex-1 sm:flex-none",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Remettre en attente"]}),s.jsxs(F,{variant:"outline",onClick:()=>l(!o),className:"flex-1 sm:flex-none",children:[s.jsx(Co,{className:"w-4 h-4 mr-2"}),o?"Masquer":"Afficher"," les détails"]})]})]})]})}function lfe({selectedCount:t,onApprove:e,onReject:r,onClear:n}){const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async m=>{try{a(!0),l(m),m==="approve"?await e():await r()}catch(g){console.error(`Erreur lors de l'action ${m}:`,g)}finally{a(!1),l(null)}},u=m=>m==="approve"?s.jsx(Ye,{className:"w-4 h-4"}):s.jsx(fn,{className:"w-4 h-4"}),d=m=>m==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",h=m=>m==="approve"?"Approuver":"Rejeter";return s.jsx(K,{className:"mb-6 border-2 border-primary/20 bg-primary/5",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(Wo,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium",children:[t," demande",t>1?"s":""," sélectionnée",t>1?"s":""]}),s.jsx(Te,{variant:"secondary",className:"ml-2",children:t})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prêt pour une action en lot"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(F,{onClick:()=>c("approve"),disabled:i,className:`${d("approve")} text-white min-w-[120px]`,children:[i&&o==="approve"?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):u("approve"),i&&o==="approve"?"Traitement...":h("approve")]}),s.jsxs(F,{onClick:()=>c("reject"),disabled:i,className:`${d("reject")} text-white min-w-[120px]`,children:[i&&o==="reject"?s.jsx(_n,{className:"w-4 h-4 mr-2 animate-spin"}):u("reject"),i&&o==="reject"?"Traitement...":h("reject")]}),s.jsx(F,{variant:"outline",onClick:n,disabled:i,className:"min-w-[100px]",children:"Annuler"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Kt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("p",{className:"font-medium mb-1",children:"Action en lot"}),s.jsx("p",{children:"Cette action sera appliquée à toutes les demandes sélectionnées. Assurez-vous de vérifier chaque demande individuellement avant de procéder."})]})]})}),i&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[s.jsx("span",{children:"Traitement en cours..."}),s.jsxs("span",{children:[o==="approve"?"Approbation":"Rejet"," des demandes"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})]})})}function cfe({stats:t}){const e=[{title:"Total des demandes",value:t.total,icon:s.jsx(Wo,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",description:"Toutes les demandes reçues"},{title:"En attente",value:t.pending,icon:s.jsx(Ct,{className:"w-5 h-5"}),color:"text-yellow-600 bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",description:"Demandes à traiter",priority:t.pending>0},{title:"Approuvées",value:t.approved,icon:s.jsx(Ye,{className:"w-5 h-5"}),color:"text-green-600 bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",description:"Demandes validées"},{title:"Rejetées",value:t.rejected,icon:s.jsx(fn,{className:"w-5 h-5"}),color:"text-red-600 bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",description:"Demandes refusées"},{title:"Aujourd'hui",value:t.todayRequests,icon:s.jsx(Ct,{className:"w-5 h-5"}),color:"text-purple-600 bg-purple-50 dark:bg-purple-950/20 border-purple-200 dark:border-purple-800",description:"Nouvelles demandes"},{title:"Croissance",value:`${t.weeklyGrowth}%`,icon:s.jsx(ja,{className:"w-5 h-5"}),color:t.weeklyGrowth>=0?"text-green-600 bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800":"text-red-600 bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",description:"vs semaine dernière"}],r=t.total>0?Math.round(t.approved/t.total*100):0,n=t.total>0?Math.round(t.pending/t.total*100):0;return s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6",children:e.map((i,a)=>s.jsxs(K,{className:"relative overflow-hidden",children:[s.jsx(je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(_e,{className:"text-sm font-medium text-muted-foreground",children:i.title}),s.jsx("div",{className:`p-2 rounded-lg ${i.color}`,children:i.icon})]})}),s.jsxs(Y,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.value}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.description}),i.priority&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"})})]})]},a))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"text-lg flex items-center gap-2",children:[s.jsx(ja,{className:"w-5 h-5 text-green-600"}),"Taux d'approbation"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Taux global"}),s.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[r,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:`${r}%`}})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.approved," demandes approuvées sur ",t.total," total"]})]})})]}),s.jsxs(K,{children:[s.jsx(je,{children:s.jsxs(_e,{className:"text-lg flex items-center gap-2",children:[s.jsx(Kt,{className:"w-5 h-5 text-yellow-600"}),"Demandes en attente"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"En attente"}),s.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:t.pending})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-yellow-600 h-2 rounded-full transition-all duration-500",style:{width:`${n}%`}})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[n,"% des demandes nécessitent une action"]}),t.pending>0&&s.jsxs("div",{className:"text-xs text-yellow-600 bg-yellow-50 dark:bg-yellow-950/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:["⚠️ ",t.pending," demande",t.pending>1?"s":""," à traiter en priorité"]})]})})]})]})]})}class BT{static async sendEmail(e){try{const{data:r,error:n}=await it.functions.invoke("send-email",{body:{to:e.to,subject:e.template.subject,html:e.template.html,text:e.template.text,type:"verification"}});return n?(console.error("❌ Erreur Edge Function:",n),console.log("📧 Fallback vers email simulé pour:",e.to),console.log("📧 Sujet:",e.template.subject),!0):r!=null&&r.success?(console.log("✅ Email envoyé avec succès via Edge Function:",r.message),r.id&&console.log("📧 ID de l'email:",r.id),!0):(console.error("❌ Échec de l'envoi via Edge Function:",r==null?void 0:r.error),!1)}catch(r){return console.error("❌ Erreur lors de l'envoi de l'email:",r),console.log("📧 Fallback vers email simulé pour:",e.to),!0}}static async sendApprovalEmail(e,r){const n={subject:"🎉 Votre vérification BOXETU a été approuvée !",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;">🎓 BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Vérification approuvée</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #28a745; margin-top: 0;">Félicitations ${r.fullName} !</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Votre demande de vérification étudiante a été <strong>approuvée</strong> ! 
              Vous avez maintenant accès à toutes les fonctionnalités de BOXETU.
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #28a745;">
              <h3 style="margin-top: 0; color: #333;">Détails de votre vérification</h3>
              <p><strong>Université :</strong> ${r.university}</p>
              <p><strong>Email universitaire :</strong> ${r.studentEmail}</p>
              ${r.studentId?`<p><strong>Numéro étudiant :</strong> ${r.studentId}</p>`:""}
              <p><strong>Date d'approbation :</strong> ${r.approvedAt.toLocaleDateString("fr-FR")}</p>
            </div>
            
            <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #155724;">Avantages de votre vérification</h3>
              <ul style="color: #155724; line-height: 1.8;">
                <li>✅ Accès complet à toutes les fonctionnalités de BOXETU</li>
                <li>✅ Possibilité de publier des annonces</li>
                <li>✅ Accès aux messages et contacts</li>
                <li>✅ Profil vérifié et de confiance</li>
                <li>✅ Support prioritaire</li>
              </ul>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                🚀 Commencer à utiliser BOXETU
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Votre vérification est valide indéfiniment.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous à <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;">© 2024 BOXETU - Tous droits réservés</p>
          </div>
        </div>
      `,text:`
        Félicitations ${r.fullName} !
        
        Votre demande de vérification étudiante a été approuvée !
        Vous avez maintenant accès à toutes les fonctionnalités de BOXETU.
        
        Détails de votre vérification :
        - Université : ${r.university}
        - Email universitaire : ${r.studentEmail}
        ${r.studentId?`- Numéro étudiant : ${r.studentId}`:""}
        - Date d'approbation : ${r.approvedAt.toLocaleDateString("fr-FR")}
        
        Avantages de votre vérification :
        ✅ Accès complet à toutes les fonctionnalités de BOXETU
        ✅ Possibilité de publier des annonces
        ✅ Accès aux messages et contacts
        ✅ Profil vérifié et de confiance
        ✅ Support prioritaire
        
        Commencer à utiliser BOXETU : ${window.location.origin}/verification
        
        Votre vérification est valide indéfiniment.
        
        Besoin d'aide ? Contactez-nous à support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}static async sendRejectionEmail(e,r){const n={subject:"❌ Votre vérification BOXETU nécessite des corrections",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;">🎓 BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Vérification nécessite des corrections</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #dc3545; margin-top: 0;">Bonjour ${r.fullName}</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Votre demande de vérification étudiante nécessite des corrections avant d'être approuvée. 
              Ne vous inquiétez pas, c'est une étape normale du processus !
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #dc3545;">
              <h3 style="margin-top: 0; color: #333;">Détails de votre demande</h3>
              <p><strong>Université :</strong> ${r.university}</p>
              <p><strong>Email universitaire :</strong> ${r.studentEmail}</p>
              <p><strong>Date de rejet :</strong> ${r.rejectedAt.toLocaleDateString("fr-FR")}</p>
            </div>
            
            ${r.rejectionReason?`
              <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">
                <h3 style="margin-top: 0; color: #856404;">Raison du rejet</h3>
                <p style="color: #856404; line-height: 1.6;">${r.rejectionReason}</p>
              </div>
            `:""}
            
            <div style="background: #f8d7da; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #721c24;">Prochaines étapes</h3>
              <ol style="color: #721c24; line-height: 1.8;">
                <li>Vérifiez les informations fournies</li>
                <li>Corrigez les erreurs identifiées</li>
                <li>Soumettez une nouvelle demande</li>
                <li>Attendez la validation de notre équipe</li>
              </ol>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #007bff; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                🔄 Soumettre une nouvelle demande
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Vous pouvez soumettre une nouvelle demande à tout moment.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous à <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;">© 2024 BOXETU - Tous droits réservés</p>
          </div>
        </div>
      `,text:`
        Bonjour ${r.fullName},
        
        Votre demande de vérification étudiante nécessite des corrections avant d'être approuvée.
        Ne vous inquiétez pas, c'est une étape normale du processus !
        
        Détails de votre demande :
        - Université : ${r.university}
        - Email universitaire : ${r.studentEmail}
        - Date de rejet : ${r.rejectedAt.toLocaleDateString("fr-FR")}
        
        ${r.rejectionReason?`
        Raison du rejet :
        ${r.rejectionReason}
        `:""}
        
        Prochaines étapes :
        1. Vérifiez les informations fournies
        2. Corrigez les erreurs identifiées
        3. Soumettez une nouvelle demande
        4. Attendez la validation de notre équipe
        
        Soumettre une nouvelle demande : ${window.location.origin}/verification
        
        Vous pouvez soumettre une nouvelle demande à tout moment.
        
        Besoin d'aide ? Contactez-nous à support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}static async sendReminderEmail(e,r){const n={subject:"⏰ Rappel : Votre vérification BOXETU est en cours de traitement",html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="margin: 0; font-size: 28px;">🎓 BOXETU</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9;">Rappel de vérification</p>
          </div>
          
          <div style="padding: 30px; background: #f8f9fa;">
            <h2 style="color: #f39c12; margin-top: 0;">Bonjour ${r.fullName}</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333;">
              Nous vous informons que votre demande de vérification étudiante est toujours en cours de traitement par notre équipe.
            </p>
            
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f39c12;">
              <h3 style="margin-top: 0; color: #333;">Statut de votre demande</h3>
              <p><strong>Université :</strong> ${r.university}</p>
              <p><strong>Date de soumission :</strong> ${r.submittedAt.toLocaleDateString("fr-FR")}</p>
              <p><strong>Temps d'attente :</strong> ${r.daysWaiting} jour(s)</p>
              <p><strong>Statut actuel :</strong> En cours de traitement</p>
            </div>
            
            <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #856404;">Pourquoi ce délai ?</h3>
              <p style="color: #856404; line-height: 1.6;">
                Notre équipe vérifie attentivement chaque demande pour garantir la qualité et la sécurité de notre plateforme. 
                Ce processus prend généralement 2-5 jours ouvrables.
              </p>
            </div>
            
            <div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="margin-top: 0; color: #0c5460;">Que faire en attendant ?</h3>
              <ul style="color: #0c5460; line-height: 1.8;">
                <li>Explorez la plateforme BOXETU</li>
                <li>Consultez les annonces disponibles</li>
                <li>Préparez vos documents pour la publication</li>
                <li>Contactez notre support si vous avez des questions</li>
              </ul>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${window.location.origin}/verification" 
                 style="background: #17a2b8; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">
                📊 Voir le statut de ma demande
              </a>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 14px;">
              Vous recevrez une notification dès que votre demande sera traitée.
            </p>
          </div>
          
          <div style="background: #343a40; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; font-size: 14px;">
            <p style="margin: 0;">Besoin d'aide ? Contactez-nous à <a href="mailto:support@boxetu.fr" style="color: #17a2b8;">support@boxetu.fr</a></p>
            <p style="margin: 10px 0 0 0; opacity: 0.7;">© 2024 BOXETU - Tous droits réservés</p>
          </div>
        </div>
      `,text:`
        Bonjour ${r.fullName},
        
        Nous vous informons que votre demande de vérification étudiante est toujours en cours de traitement par notre équipe.
        
        Statut de votre demande :
        - Université : ${r.university}
        - Date de soumission : ${r.submittedAt.toLocaleDateString("fr-FR")}
        - Temps d'attente : ${r.daysWaiting} jour(s)
        - Statut actuel : En cours de traitement
        
        Pourquoi ce délai ?
        Notre équipe vérifie attentivement chaque demande pour garantir la qualité et la sécurité de notre plateforme. 
        Ce processus prend généralement 2-5 jours ouvrables.
        
        Que faire en attendant ?
        • Explorez la plateforme BOXETU
        • Consultez les annonces disponibles
        • Préparez vos documents pour la publication
        • Contactez notre support si vous avez des questions
        
        Voir le statut de ma demande : ${window.location.origin}/verification
        
        Vous recevrez une notification dès que votre demande sera traitée.
        
        Besoin d'aide ? Contactez-nous à support@boxetu.fr
      `};return this.sendEmail({to:e,template:n})}}class ll{static async getVerificationRequests(){try{const{data:e,error:r}=await it.from("verification_requests").select("*").order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((e==null?void 0:e.map(async i=>{let a="Utilisateur inconnu",o=i.student_email||"Email non disponible";try{const l=ze(fe,"users",i.user_id),c=await Gr(l);if(c.exists()){const u=c.data();a=u.displayName||u.fullName||u.name||"Utilisateur inconnu",o=u.email||i.student_email||"Email non disponible",$h.cacheUser({id:i.user_id,email:o,fullName:a,university:i.university,lastSeen:new Date})}else{const u=$h.getOrCreateUser(i.user_id,i.student_email||"email@inconnu.com",i.university);if(u.fullName!=="Utilisateur inconnu")a=u.fullName;else if(i.student_email){const d=i.student_email.split("@")[0];d.includes(".")?a=d.split(".").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "):a=d.charAt(0).toUpperCase()+d.slice(1)}}}catch(l){console.log("Erreur lors de la récupération des données Firestore, utilisation du cache:",l),a=$h.getOrCreateUser(i.user_id,i.student_email||"email@inconnu.com",i.university).fullName}return{id:i.id,user_id:i.user_id,user_email:o,user_name:a,university:i.university||"Université non spécifiée",student_email:i.student_email,student_id:i.student_id,status:i.status,submitted_at:i.submitted_at,documents:i.documents||[],notes:i.notes,created_at:i.created_at,updated_at:i.updated_at}}))||[])}catch(e){throw console.error("Erreur lors de la récupération des demandes:",e),e}}static async getAdminStats(){try{const{count:e,error:r}=await it.from("verification_requests").select("*",{count:"exact",head:!0});if(r)throw r;const{count:n,error:i}=await it.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","pending");if(i)throw i;const{count:a,error:o}=await it.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","approved");if(o)throw o;const{count:l,error:c}=await it.from("verification_requests").select("*",{count:"exact",head:!0}).eq("status","rejected");if(c)throw c;const u=new Date;u.setHours(0,0,0,0);const{count:d,error:h}=await it.from("verification_requests").select("*",{count:"exact",head:!0}).gte("created_at",u.toISOString());if(h)throw h;const m=new Date;m.setDate(m.getDate()-7);const{count:g,error:v}=await it.from("verification_requests").select("*",{count:"exact",head:!0}).gte("created_at",m.toISOString());if(v)throw v;const y=g>0?(d-g)/g*100:0;return{totalRequests:e||0,pendingRequests:n||0,approvedRequests:a||0,rejectedRequests:l||0,todayRequests:d||0,weeklyGrowth:Math.round(y*100)/100}}catch(e){throw console.error("Erreur lors de la récupération des statistiques:",e),e}}static async approveVerification(e,r){try{const{error:n}=await it.from("verification_requests").update({status:"approved",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await it.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();i&&console.log("📝 Mise à jour du profil temporairement désactivée");try{const a=ze(fe,"users",i.user_id),o=await Gr(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";await BT.sendApprovalEmail(l.email||"email@inconnu.com",{fullName:c,university:i.university||"Université non spécifiée",studentEmail:i.student_email||"Email non disponible",studentId:i.student_id,approvedAt:new Date})}}catch(a){console.log("Erreur lors de l'envoi de l'email d'approbation:",a)}}catch(n){throw console.error("Erreur lors de l'approbation:",n),n}}static async resetToPending(e,r){try{const{error:n}=await it.from("verification_requests").update({status:"pending",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await it.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();if(i)try{const a=ze(fe,"users",i.user_id),o=await Gr(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";console.log(`📧 Notification: ${c} - Demande remise en attente`)}}catch(a){console.log("Erreur lors de la notification email:",a)}}catch(n){throw console.error("Erreur lors de la remise en attente:",n),n}}static async rejectVerification(e,r){try{const{error:n}=await it.from("verification_requests").update({status:"rejected",notes:r,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;const{data:i}=await it.from("verification_requests").select("user_id, university, student_email, student_id").eq("id",e).single();if(i)try{const a=ze(fe,"users",i.user_id),o=await Gr(a);if(o.exists()){const l=o.data(),c=l.displayName||l.fullName||l.name||"Utilisateur";await BT.sendRejectionEmail(l.email||"email@inconnu.com",{fullName:c,university:i.university||"Université non spécifiée",studentEmail:i.student_email||"Email non disponible",rejectionReason:r||"Informations insuffisantes ou incorrectes",rejectedAt:new Date})}}catch(a){console.log("Erreur lors de l'envoi de l'email de rejet:",a)}}catch(n){throw console.error("Erreur lors du rejet:",n),n}}static async batchAction(e,r,n){try{const i=r.map(o=>({id:o,status:e==="reset"?"pending":e,notes:n,updated_at:new Date().toISOString()})),{error:a}=await it.from("verification_requests").upsert(i);if(a)throw a;if(e==="approve"){const{data:o}=await it.from("verification_requests").select("user_id").in("id",r);if(o){const l=o.map(c=>c.user_id);try{await it.from("profiles").update({verification_status:"verified",verified_at:new Date().toISOString()}).in("id",l)}catch{console.log("Table profiles non trouvée, mise à jour ignorée")}}}else if(e==="reset"){const{data:o}=await it.from("verification_requests").select("user_id").in("id",r);if(o){const l=o.map(c=>c.user_id);console.log("📝 Mise à jour des profils temporairement désactivée pour:",l)}}}catch(i){throw console.error("Erreur lors de l'action en lot:",i),i}}static async searchVerificationRequests(e){try{const{data:r,error:n}=await it.from("verification_requests").select("*").or(`student_email.ilike.%${e}%,university.ilike.%${e}%,student_id.ilike.%${e}%`).order("created_at",{ascending:!1});if(n)throw n;return(r==null?void 0:r.map(i=>({id:i.id,user_id:i.user_id,user_email:i.student_email||"Email non disponible",user_name:`Utilisateur ${i.user_id.substring(0,8)}`,university:i.university||"Université non spécifiée",student_email:i.student_email,student_id:i.student_id,status:i.status,submitted_at:i.submitted_at,documents:i.documents||[],notes:i.notes,created_at:i.created_at,updated_at:i.updated_at})))||[]}catch(r){throw console.error("Erreur lors de la recherche:",r),r}}}function ufe(){const{currentUser:t}=Mt(),[e,r]=p.useState([]),[n,i]=p.useState([]),[a,o]=p.useState(!0),[l,c]=p.useState([]),[u,d]=p.useState("all"),[h,m]=p.useState(""),[g,v]=p.useState(null);p.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{o(!0);const[b,N]=await Promise.all([ll.getVerificationRequests(),ll.getAdminStats()]),C=b.map(P=>({id:P.id,userId:P.user_id,userEmail:P.user_email,userName:P.user_name,university:P.university,studentEmail:P.student_email,studentId:P.student_id,status:P.status,submittedAt:new Date(P.submitted_at||P.created_at),documents:P.documents||[],notes:P.notes}));r(C),v(N),i(C)}catch(b){console.error("Erreur lors du chargement des demandes:",b)}finally{o(!1)}},j=async(b,N)=>{try{await ll.batchAction(b,N),r(C=>C.map(P=>N.includes(P.id)?{...P,status:b==="approve"?"approved":"rejected"}:P)),c([]),await y()}catch(C){console.error("Erreur lors de l'action en lot:",C)}};p.useEffect(()=>{let b=e;u!=="all"&&(b=b.filter(N=>N.status===u)),h.trim()&&(b=b.filter(N=>N.user_name.toLowerCase().includes(h.toLowerCase())||N.user_email.toLowerCase().includes(h.toLowerCase())||N.university.toLowerCase().includes(h.toLowerCase()))),i(b)},[e,u,h]);const w=async b=>{if(m(b),b.trim())try{const N=await ll.searchVerificationRequests(b);i(N)}catch(N){console.error("Erreur lors de la recherche:",N)}else i(e)},x=g||{total:e.length,pending:e.filter(b=>b.status==="pending").length,approved:e.filter(b=>b.status==="approved").length,rejected:e.filter(b=>b.status==="rejected").length,todayRequests:e.filter(b=>{const N=new Date;return new Date(b.submitted_at).toDateString()===N.toDateString()}).length,weeklyGrowth:0};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard Administrateur"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des demandes de vérification étudiant"})]}),s.jsx(cfe,{stats:x}),l.length>0&&s.jsx(lfe,{selectedCount:l.length,onApprove:()=>j("approve",l),onReject:()=>j("reject",l),onClear:()=>c([])}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{variant:u==="all"?"default":"outline",size:"sm",onClick:()=>d("all"),children:["Toutes (",e.length,")"]}),s.jsxs(F,{variant:u==="pending"?"default":"outline",size:"sm",onClick:()=>d("pending"),children:["En attente (",e.filter(b=>b.status==="pending").length,")"]}),s.jsxs(F,{variant:u==="approved"?"default":"outline",size:"sm",onClick:()=>d("approved"),children:["Approuvées (",e.filter(b=>b.status==="approved").length,")"]}),s.jsxs(F,{variant:u==="rejected"?"default":"outline",size:"sm",onClick:()=>d("rejected"),children:["Rejetées (",e.filter(b=>b.status==="rejected").length,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom, email, université...",className:"pl-10 pr-4 py-2 border rounded-md bg-background text-foreground",value:h,onChange:b=>w(b.target.value)})]}),s.jsxs(F,{variant:"outline",size:"sm",onClick:y,disabled:a,children:[s.jsx(Ux,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Actualiser"]})]})]}),s.jsx("div",{className:"space-y-4",children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des demandes..."})]}):n.length===0?s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ym,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune demande"}),s.jsx("p",{className:"text-muted-foreground",children:u==="all"?"Aucune demande de vérification pour le moment.":`Aucune demande ${u==="pending"?"en attente":u==="approved"?"approuvée":"rejetée"}.`})]})})}):n.map(b=>s.jsx(ofe,{request:b,isSelected:l.includes(b.id),onSelect:N=>{c(N?C=>[...C,b.id]:C=>C.filter(P=>P!==b.id))},onStatusChange:async(N,C)=>{try{N==="approved"?await ll.approveVerification(b.id,C):N==="rejected"?await ll.rejectVerification(b.id,C):N==="pending"&&await ll.resetToPending(b.id,C),r(P=>P.map(T=>T.id===b.id?{...T,status:N,notes:C}:T)),await y()}catch(P){console.error("Erreur lors du changement de statut:",P)}}},b.id))})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Accès restreint"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous devez être connecté pour accéder à cette page."})]})})})})}function dfe(){const{currentUser:t}=Mt();console.log("AdminPage - currentUser:",t),console.log("AdminPage - currentUser?.email:",t==null?void 0:t.email);const e=(t==null?void 0:t.email)==="barrymohamadou98@gmail.com"||(t==null?void 0:t.role)==="admin";return console.log("AdminPage - isAdmin:",e),t?e?s.jsx(ufe,{}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-md mx-auto text-center",children:s.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-red-800 dark:text-red-200 mb-2",children:"Accès refusé"}),s.jsx("p",{className:"text-red-600 dark:text-red-300",children:"Vous n'avez pas les permissions nécessaires pour accéder à cette page."})]})})}):s.jsx(hP,{to:"/login",replace:!0})}const hfe=[{value:"support",label:"🛠️ Support Technique"},{value:"annonce",label:"📊 Problème avec une annonce"},{value:"compte",label:"👤 Compte et Authentification"},{value:"autre",label:"❓ Autre"}],mfe=()=>{const{currentUser:t,userProfile:e}=Mt(),[r,n]=p.useState(!1),[i,a]=p.useState(!1),[o,l]=p.useState("menu"),[c,u]=p.useState([]),[d,h]=p.useState(""),[m,g]=p.useState(!1),[v,y]=p.useState({name:"",email:"",subject:"",message:"",category:"support"}),[j,w]=p.useState(!1),[x,b]=p.useState(!1),N=p.useRef(null),C=p.useRef(null),[P,T]=p.useState(()=>{try{const q=localStorage.getItem("chatbot_memory");return q?JSON.parse(q):{}}catch(q){return console.warn("Erreur chargement mémoire cache (init):",q),{}}}),k=()=>{var q;(q=N.current)==null||q.scrollIntoView({behavior:"smooth"})};p.useEffect(()=>{k()},[c]),p.useEffect(()=>{r&&o==="chat"&&C.current&&C.current.focus()},[r,o]),p.useEffect(()=>{(async()=>{const Z=await Ze();u(Z)})()},[t]),p.useEffect(()=>{t&&e&&y(q=>({...q,name:q.name||P.name||e.displayName||t.displayName||"",email:q.email||P.email||e.email||t.email||""}))},[t,e,P.name,P.email]);const D=q=>{const Z=q.toLowerCase();if(Z.includes("bonjour")||Z.includes("salut")||Z.includes("hello")){const me=(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"étudiant";return t?`Salut ${me} ! 😊 Comment ça va ? Je peux t'aider avec tes annonces ou répondre à tes questions sur BOXETU.`:"Salut ! 😊 Bienvenue sur BOXETU ! Je peux t'aider à naviguer sur la plateforme. Que cherches-tu ?"}return Z.includes("annonce")||Z.includes("publier")||Z.includes("vendre")?`Pour publier une annonce, va sur "Créer une annonce" ! 📝 Tu peux vendre des livres, de l'électronique, proposer des services ou même faire du troc. Besoin d'aide pour une catégorie spécifique ?`:Z.includes("acheter")||Z.includes("trouver")||Z.includes("rechercher")?"Pour trouver des articles, utilise la barre de recherche ou parcours les catégories ! 🔍 Tu peux filtrer par prix et université. Que cherches-tu exactement ?":Z.includes("sécurité")||Z.includes("sûr")||Z.includes("confiance")?"BOXETU est sécurisé ! 🛡️ Tous les étudiants sont vérifiés avec leur email universitaire. Utilise notre chat intégré et rencontrez-vous dans des lieux publics du campus.":Z.includes("prix")||Z.includes("coût")||Z.includes("gratuit")?"BOXETU est 100% gratuit pour les étudiants ! 🎓 Pas de frais cachés pour publier ou contacter des vendeurs. On veut juste faciliter les échanges !":Z.includes("logement")||Z.includes("chambre")||Z.includes("colocation")?"🏠 Section Logement ! Tu peux chercher des colocations, studios ou chambres près de ton campus. Utilise les filtres par prix et distance. Visite toujours avant de t'engager !":Z.includes("job")||Z.includes("stage")||Z.includes("travail")?"💼 Jobs & Stages ! Parfait pour ton budget étudiant. Tu trouveras des petits boulots, cours particuliers, stages... Postule directement via la plateforme !":Z.includes("problème")||Z.includes("bug")||Z.includes("erreur")?"Oh non ! 😅 Peux-tu me dire quel problème ? Essaie de rafraîchir la page. Si ça persiste, contacte notre support !":Z.includes("merci")||Z.includes("thanks")?"De rien ! 😊 C'est un plaisir d'aider la communauté étudiante. N'hésite pas si tu as d'autres questions !":`Hmm, je ne suis pas sûr de comprendre ! 🤔 Je peux t'aider avec :

• Créer/gérer des annonces
• Questions de sécurité
• Navigation sur le site
• Infos sur les catégories

Pose-moi une question plus spécifique ! 😊`},E=async()=>{if(!d.trim())return;const q={id:Date.now().toString(),text:d,sender:"user",timestamp:new Date},Z=[...c,q];u(Z),h(""),g(!0),z(Z),t&&Ne(Z),vt(q.text),setTimeout(()=>{const me={id:(Date.now()+1).toString(),text:D(d),sender:"bot",timestamp:new Date},Ie=[...Z,me];u(Ie),g(!1),z(Ie),t&&Ne(Ie)},1e3+Math.random()*1e3)},A=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),E())},R=()=>{const q=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return v.name.trim()?v.email.trim()?q.test(v.email)?v.subject.trim()?v.message.trim()?!0:(ne.error("Veuillez écrire votre message"),!1):(ne.error("Veuillez préciser le sujet"),!1):(ne.error("Format d'email invalide"),!1):(ne.error("Veuillez entrer votre email"),!1):(ne.error("Veuillez entrer votre nom complet"),!1)},S=async q=>{if(q.preventDefault(),!!R()){w(!0);try{console.log("Envoi du message via Supabase Functions...",{name:v.name,email:v.email,subject:v.subject,message:v.message.substring(0,50)+"...",category:v.category,user_id:t==null?void 0:t.uid});const Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",me=`${yse.url}/functions/v1/envoi_email`,Ie=await fetch(me,{method:"POST",headers:{"Content-Type":"application/json",...Z?{Authorization:`Bearer ${Z}`,apikey:Z}:{}},body:JSON.stringify({name:v.name.trim(),email:v.email.trim(),subject:v.subject.trim(),message:v.message.trim(),category:v.category,user_id:(t==null?void 0:t.uid)||null})});if(!Ie.ok){const O=await Ie.text();throw console.error("Erreur HTTP:",Ie.status,O),new Error(`Erreur HTTP ${Ie.status}: ${O}`)}const He=await Ie.json();if(He.success)b(!0),ne.success("Message envoyé avec succès ! Nous vous répondrons rapidement."),setTimeout(()=>{b(!1),y({name:"",email:"",subject:"",message:"",category:"support"}),l("menu")},3e3);else throw new Error(He.error||"Échec de l'envoi côté serveur")}catch(Z){console.error("Erreur complète:",Z);let me="Erreur lors de l'envoi du message";const Ie=Z instanceof Error?Z.message:String(Z);Ie.includes("401")?me="Problème d'autorisation. Configuration Supabase à vérifier.":Ie.includes("network")||Ie.includes("fetch")?me="Problème de connexion. Vérifiez votre internet.":Ie.includes("timeout")?me="Délai d'attente dépassé. Réessayez plus tard.":Ie&&(me=Ie),ne.error(me)}finally{w(!1)}}},V=(q,Z)=>{if(y(me=>({...me,[q]:Z})),q==="name"||q==="email"){const me={...P,[q]:Z};T(me),J(me),t&&Ce(me)}},U=()=>{n(!0),a(!1),l(P.lastViewMode||"menu")},H=()=>{n(!1),a(!1),l("menu")},$=()=>{a(!i)},L=q=>{l(q);const Z={...P,lastViewMode:q};T(Z),J(Z),t&&Ce(Z)},W=()=>{L("menu")},z=q=>{try{localStorage.setItem("chatbot_messages",JSON.stringify(q))}catch(Z){console.warn("Erreur sauvegarde cache:",Z)}},J=q=>{try{localStorage.setItem("chatbot_memory",JSON.stringify(q))}catch(Z){console.warn("Erreur sauvegarde mémoire cache:",Z)}},oe=()=>{try{const q=localStorage.getItem("chatbot_memory");return q?JSON.parse(q):{}}catch(q){return console.warn("Erreur chargement mémoire cache:",q),{}}},Ce=async q=>{if(t)try{const Z=ze(fe,"chatMemory",t.uid);await Sl(Z,{...q,lastUpdated:new Date().toISOString()},{merge:!0})}catch(Z){console.warn("Erreur sauvegarde mémoire Firestore:",Z)}},tt=async()=>{if(!t)return oe();try{const q=ze(fe,"chatMemory",t.uid),Z=await Gr(q);if(Z.exists()){const me=Z.data();return J(me),me}}catch(q){console.warn("Erreur chargement mémoire Firestore:",q)}return oe()};p.useEffect(()=>{(async()=>{const q=await tt();T(Z=>({...q,...Z}))})()},[t==null?void 0:t.uid]);const vt=q=>{const Z=q.trim(),me=Z.match(/je m'appelle\s+([A-Za-zÀ-ÖØ-öø-ÿ\s'-]{2,})/i),Ie=Z.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i),He=Z.match(/(électronique|livres?|mobilier|logement|services?|jobs?|dons?|échanges?)/i),O={};if(me&&(O.name=me[1].trim()),Ie&&(O.email=Ie[0]),He&&(O.preferredCategory=He[1].toLowerCase()),Object.keys(O).length){const B={...P,...O};T(B),J(B),t&&Ce(B)}},ct=()=>{try{const q=localStorage.getItem("chatbot_messages");if(q)return JSON.parse(q).map(me=>({id:me.id,text:me.text,sender:me.sender,timestamp:new Date(me.timestamp)}))}catch(q){console.warn("Erreur chargement cache:",q)}return[{id:"1",text:"Salut ! 👋 Je suis l'assistant BOXETU. Comment puis-je t'aider aujourd'hui ?",sender:"bot",timestamp:new Date}]},Ne=async q=>{if(t)try{const Z=ze(fe,"chatHistory",t.uid);await Sl(Z,{messages:q.map(me=>({...me,timestamp:me.timestamp.toISOString()})),lastUpdated:new Date().toISOString()},{merge:!0})}catch(Z){console.warn("Erreur sauvegarde Firestore:",Z)}},Ze=async()=>{if(!t)return ct();try{const q=ze(fe,"chatHistory",t.uid),Z=await Gr(q);if(Z.exists()){const Ie=Z.data().messages.map(He=>({id:He.id,text:He.text,sender:He.sender,timestamp:new Date(He.timestamp)}));return z(Ie),Ie}}catch(q){console.warn("Erreur chargement Firestore:",q)}return ct()},te=()=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-white",children:"T"})}),s.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Salut ",P.name||(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Étudiant"," ! 👋"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comment peut-on t'aider ?"})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded-lg",onClick:()=>L("chat"),children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Message récent"}),c.length>0&&c.some(q=>q.sender==="user")?s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(is,{className:"w-8 h-8",children:s.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:c[c.length-1].sender==="bot"?"T":"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:c[c.length-1].text.length>50?`${c[c.length-1].text.substring(0,50)}...`:c[c.length-1].text}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c[c.length-1].sender==="bot"?"Assistant":"Vous"," • ",new Date(c[c.length-1].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx(Gl,{className:"w-4 h-4 text-gray-400"})]}):s.jsxs("div",{className:"flex items-center justify-between py-4",children:[s.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun message récent"}),s.jsx(Gl,{className:"w-4 h-4 text-gray-400"})]})]})]}),pe=()=>s.jsxs("div",{className:"flex items-center justify-around p-4 bg-white dark:bg-gray-900",children:[s.jsx(F,{variant:"ghost",size:"sm",onClick:W,className:`p-2 focus:outline-none focus-visible:outline-none ${o==="home"?"text-primary":"text-gray-500"}`,children:s.jsx(mi,{className:"w-5 h-5"})}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>L("chat"),className:`p-2 focus:outline-none focus-visible:outline-none ${o==="chat"?"text-primary":"text-gray-500"}`,children:s.jsx(iQ,{className:"w-5 h-5"})}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>L("contact"),className:`p-2 focus:outline-none focus-visible:outline-none ${o==="contact"?"text-primary":"text-gray-500"}`,children:s.jsx(fr,{className:"w-5 h-5"})})]}),Q=()=>s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>L("menu"),className:"p-2",children:s.jsx(oa,{className:"w-4 h-4"})}),s.jsx(is,{className:"w-8 h-8",children:s.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:"SM"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Assistant BOXETU"}),s.jsx("p",{className:"text-xs text-green-600",children:"En ligne"})]})]}),s.jsx(Te,{className:"bg-green-100 text-green-800 text-xs",children:"Actif"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c.map((q,Z)=>{var He,O;const me=q.sender==="user",Ie=Z===0||c[Z-1].sender!==q.sender;return s.jsxs("div",{className:`flex items-end space-x-2 ${me?"flex-row-reverse space-x-reverse":""}`,children:[s.jsx("div",{className:"flex-shrink-0",children:Ie?s.jsx(is,{className:"w-8 h-8",children:me?e!=null&&e.photoURL?s.jsx("img",{src:e.photoURL,alt:"User Avatar",className:"w-full h-full object-cover rounded-full"}):s.jsx(Fn,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white text-sm font-semibold",children:((He=e==null?void 0:e.displayName)==null?void 0:He.charAt(0))||((O=t==null?void 0:t.displayName)==null?void 0:O.charAt(0))||"U"}):s.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})}):s.jsx("div",{className:"w-8 h-8"})}),s.jsxs("div",{className:"flex flex-col max-w-[75%]",children:[s.jsx("div",{className:`px-4 py-2 ${me?"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-2xl rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed text-left",children:q.text})}),s.jsx("p",{className:`text-xs text-gray-500 mt-1 px-1 ${me?"text-right":"text-left"}`,children:q.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},q.id)}),m&&s.jsxs("div",{className:"flex items-end space-x-2",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(is,{className:"w-8 h-8",children:s.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})})}),s.jsx("div",{className:"max-w-[75%]",children:s.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-bl-md",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),s.jsx("div",{ref:N})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ye,{ref:C,value:d,onChange:q=>h(q.target.value),onKeyPress:A,placeholder:"Tape ton message...",className:"flex-1 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700",disabled:m}),s.jsx(F,{onClick:E,disabled:!d.trim()||m,size:"icon",className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:s.jsx(Yl,{className:"w-6 h-6 text-white"})})]})})]}),le=()=>s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>L("menu"),className:"p-2",children:s.jsx(oa,{className:"w-4 h-4"})}),s.jsx(fr,{className:"w-6 h-6 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Nous contacter"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 flex items-center justify-center mx-auto mb-4",children:s.jsx(FD,{className:"w-8 h-8 text-green-600"})}),s.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"Message envoyé !"}),s.jsx("p",{className:"text-gray-600",children:"Nous te répondrons rapidement."})]}):s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nom complet *"}),s.jsx(ye,{type:"text",value:v.name,onChange:q=>V("name",q.target.value),required:!0,placeholder:"Ton nom complet",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),s.jsx(ye,{type:"email",value:v.email,onChange:q=>V("email",q.target.value),required:!0,placeholder:"ton.email@univ.fr",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Catégorie du message *"}),s.jsx("select",{value:v.category,onChange:q=>V("category",q.target.value),required:!0,className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md",children:hfe.map(q=>s.jsx("option",{value:q.value,children:q.label},q.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sujet *"}),s.jsx(ye,{type:"text",value:v.subject,onChange:q=>V("subject",q.target.value),required:!0,placeholder:"Sujet de ton message",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),s.jsx("textarea",{value:v.message,onChange:q=>{const Z=q.target.value;Z.length<=1e3&&V("message",Z)},maxLength:1e3,required:!0,rows:4,placeholder:"Décris ta demande... (max 1000 caractères)",className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none"}),s.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[v.message.length,"/1000"]})]}),s.jsx(F,{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):"Envoyer le message"})]})})]});return s.jsxs(s.Fragment,{children:[s.jsx(F,{onClick:r?H:U,className:"fixed bottom-4 right-4 md:bottom-6 md:right-6 z-50 w-12 h-12 md:w-14 md:h-14 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",children:r?s.jsx("img",{src:"/StudyMarket/assets/arrow.svg",alt:"Arrow",className:"w-5 h-5 md:w-6 md:h-6"}):s.jsx(Gt,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),r&&s.jsx(K,{className:`fixed z-40 shadow-2xl border-0 bg-white dark:bg-gray-900 overflow-hidden transition-all duration-300 ease-in-out
            ${i?"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-10":"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-[500px] max-h-[calc(100vh-8rem)]"}
            md:${i?"bottom-20 md:right-6 md:w-80":"bottom-20 md:right-6 md:w-96 md:h-[550px] md:max-h-[calc(100vh-8rem)]"}
            md:max-w-none
          `,children:s.jsxs(Y,{className:"p-0 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary to-secondary text-white cursor-pointer",onClick:$,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:i?s.jsx(tQ,{className:"w-4 h-4 text-white transform rotate-180"}):s.jsx(Gt,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-sm",children:"BOXETU"}),!i&&s.jsx("p",{className:"text-xs text-white/80",children:"Assistant en ligne"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(F,{onClick:q=>{q.stopPropagation(),H()},variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-1",children:s.jsx(Ql,{className:"w-4 h-4"})})})]}),!i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="menu"&&te(),o==="chat"&&Q(),o==="contact"&&le()]}),pe()]})]})})]})};function ffe({children:t}){const[e,r]=ke.useState(null);return ke.useEffect(()=>{const n=i=>{r(i.error||new Error(i.message))};return window.addEventListener("error",n),()=>window.removeEventListener("error",n)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function pfe(){return s.jsx(wse,{children:s.jsx(QY,{children:s.jsx(NU,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(vU,{children:s.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden bg-background flex flex-col",children:[s.jsxs("div",{className:"max-w-[100vw] overflow-x-hidden",children:[s.jsx(Nse,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(ffe,{children:s.jsxs(cU,{children:[s.jsx(Ft,{path:"/",element:s.jsx($ae,{})}),s.jsx(Ft,{path:"/listings",element:s.jsx(boe,{})}),s.jsx(Ft,{path:"/listing/:id",element:s.jsx(cue,{})}),s.jsx(Ft,{path:"/auth",element:s.jsx(Rme,{})}),s.jsx(Ft,{path:"/verification",element:s.jsx(Zn,{children:s.jsx(zme,{})})}),s.jsx(Ft,{path:"/help",element:s.jsx(cme,{})}),s.jsx(Ft,{path:"/safety",element:s.jsx(mme,{})}),s.jsx(Ft,{path:"/cart",element:s.jsx(Bme,{})}),s.jsx(Ft,{path:"/products",element:s.jsx(Jme,{})}),s.jsx(Ft,{path:"/checkout/success",element:s.jsx(Zme,{})}),s.jsx(Ft,{path:"/checkout",element:s.jsx(Zn,{children:s.jsx(qme,{})})}),s.jsx(Ft,{path:"/orders",element:s.jsx(Zn,{children:s.jsx(Wme,{})})}),s.jsx(Ft,{path:"/order-confirmation/:orderId",element:s.jsx(Zn,{children:s.jsx(Hme,{})})}),s.jsx(Ft,{path:"/create",element:s.jsx(Zn,{children:s.jsx(lhe,{})})}),s.jsx(Ft,{path:"/profile",element:s.jsx(Zn,{children:s.jsx(mhe,{})})}),s.jsx(Ft,{path:"/settings",element:s.jsx(Zn,{children:s.jsx(Nhe,{})})}),s.jsx(Ft,{path:"/impact",element:s.jsx(Zn,{children:s.jsx(Mhe,{})})}),s.jsx(Ft,{path:"/saved-searches",element:s.jsx(Zn,{children:s.jsx(Lhe,{})})}),s.jsx(Ft,{path:"/favorites",element:s.jsx(Zn,{children:s.jsx($he,{})})}),s.jsx(Ft,{path:"/payments",element:s.jsx(Zn,{children:s.jsx(Uhe,{})})}),s.jsx(Ft,{path:"/messages",element:s.jsx(Zn,{children:s.jsx(kme,{})})}),s.jsx(Ft,{path:"/edit-listing/:id",element:s.jsx(tfe,{})}),s.jsx(Ft,{path:"/jobs",element:s.jsx(nfe,{})}),s.jsx(Ft,{path:"/housing",element:s.jsx(afe,{})}),s.jsx(Ft,{path:"/admin",element:s.jsx(Zn,{children:s.jsx(dfe,{})})}),s.jsx(Ft,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),s.jsx(Sse,{}),s.jsx(mfe,{})]}),s.jsx(x9,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})})})}nP(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(pfe,{})}));
