function O8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PI={exports:{}},Yx={},TI={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=Symbol.for("react.element"),M8=Symbol.for("react.portal"),D8=Symbol.for("react.fragment"),L8=Symbol.for("react.strict_mode"),F8=Symbol.for("react.profiler"),V8=Symbol.for("react.provider"),$8=Symbol.for("react.context"),z8=Symbol.for("react.forward_ref"),U8=Symbol.for("react.suspense"),B8=Symbol.for("react.memo"),H8=Symbol.for("react.lazy"),pP=Symbol.iterator;function q8(t){return t===null||typeof t!="object"?null:(t=pP&&t[pP]||t["@@iterator"],typeof t=="function"?t:null)}var kI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RI=Object.assign,II={};function kh(t,e,n){this.props=t,this.context=e,this.refs=II,this.updater=n||kI}kh.prototype.isReactComponent={};kh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AI(){}AI.prototype=kh.prototype;function Xj(t,e,n){this.props=t,this.context=e,this.refs=II,this.updater=n||kI}var Jj=Xj.prototype=new AI;Jj.constructor=Xj;RI(Jj,kh.prototype);Jj.isPureReactComponent=!0;var gP=Array.isArray,OI=Object.prototype.hasOwnProperty,eN={current:null},MI={key:!0,ref:!0,__self:!0,__source:!0};function DI(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)OI.call(e,r)&&!MI.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Cp,type:t,key:a,ref:o,props:s,_owner:eN.current}}function W8(t,e){return{$$typeof:Cp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tN(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cp}function G8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vP=/\/+/g;function B_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G8(""+t.key):e.toString(36)}function Av(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cp:case M8:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+B_(o,0):r,gP(s)?(n="",t!=null&&(n=t.replace(vP,"$&/")+"/"),Av(s,e,n,"",function(d){return d})):s!=null&&(tN(s)&&(s=W8(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",gP(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+B_(a,l);o+=Av(a,e,n,u,s)}else if(u=q8(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+B_(a,l++),o+=Av(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gg(t,e,n){if(t==null)return t;var r=[],s=0;return Av(t,r,"","",function(a){return e.call(n,a,s++)}),r}function K8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Ov={transition:null},Z8={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Ov,ReactCurrentOwner:eN};function LI(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Gg,forEach:function(t,e,n){Gg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gg(t,function(){e++}),e},toArray:function(t){return Gg(t,function(e){return e})||[]},only:function(t){if(!tN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=kh;kt.Fragment=D8;kt.Profiler=F8;kt.PureComponent=Xj;kt.StrictMode=L8;kt.Suspense=U8;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z8;kt.act=LI;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RI({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=eN.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)OI.call(e,u)&&!MI.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Cp,type:t.type,key:s,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:$8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V8,_context:t},t.Consumer=t};kt.createElement=DI;kt.createFactory=function(t){var e=DI.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:z8,render:t}};kt.isValidElement=tN;kt.lazy=function(t){return{$$typeof:H8,_payload:{_status:-1,_result:t},_init:K8}};kt.memo=function(t,e){return{$$typeof:B8,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Ov.transition;Ov.transition={};try{t()}finally{Ov.transition=e}};kt.unstable_act=LI;kt.useCallback=function(t,e){return is.current.useCallback(t,e)};kt.useContext=function(t){return is.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return is.current.useDeferredValue(t)};kt.useEffect=function(t,e){return is.current.useEffect(t,e)};kt.useId=function(){return is.current.useId()};kt.useImperativeHandle=function(t,e,n){return is.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return is.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return is.current.useReducer(t,e,n)};kt.useRef=function(t){return is.current.useRef(t)};kt.useState=function(t){return is.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return is.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return is.current.useTransition()};kt.version="18.3.1";TI.exports=kt;var x=TI.exports;const ue=Pa(x),nN=O8({__proto__:null,default:ue},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q8=x,Y8=Symbol.for("react.element"),X8=Symbol.for("react.fragment"),J8=Object.prototype.hasOwnProperty,e$=Q8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t$={key:!0,ref:!0,__self:!0,__source:!0};function FI(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)J8.call(e,r)&&!t$.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Y8,type:t,key:a,ref:o,props:s,_owner:e$.current}}Yx.Fragment=X8;Yx.jsx=FI;Yx.jsxs=FI;PI.exports=Yx;var i=PI.exports,VI={exports:{}},qs={},$I={exports:{}},zI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var V=z.length;z.push(H);e:for(;0<V;){var q=V-1>>>1,J=z[q];if(0<s(J,H))z[q]=H,z[V]=J,V=q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],V=z.pop();if(V!==H){z[0]=V;e:for(var q=0,J=z.length,me=J>>>1;q<me;){var Pe=2*(q+1)-1,Me=z[Pe],oe=Pe+1,xe=z[oe];if(0>s(Me,V))oe<J&&0>s(xe,Me)?(z[q]=xe,z[oe]=V,q=oe):(z[q]=Me,z[Pe]=V,q=Pe);else if(oe<J&&0>s(xe,V))z[q]=xe,z[oe]=V,q=oe;else break e}}return H}function s(z,H){var V=z.sortIndex-H.sortIndex;return V!==0?V:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,p=3,y=!1,j=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function R(z){if(b=!1,E(z),!j)if(n(u)!==null)j=!0,ae(A);else{var H=n(d);H!==null&&K(R,H.startTime-z)}}function A(z,H){j=!1,b&&(b=!1,_(F),F=-1),y=!0;var V=p;try{for(E(H),m=n(u);m!==null&&(!(m.expirationTime>H)||z&&!M());){var q=m.callback;if(typeof q=="function"){m.callback=null,p=m.priorityLevel;var J=q(m.expirationTime<=H);H=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(u)&&r(u),E(H)}else r(u);m=n(u)}if(m!==null)var me=!0;else{var Pe=n(d);Pe!==null&&K(R,Pe.startTime-H),me=!1}return me}finally{m=null,p=V,y=!1}}var B=!1,I=null,F=-1,$=5,P=-1;function M(){return!(t.unstable_now()-P<$)}function D(){if(I!==null){var z=t.unstable_now();P=z;var H=!0;try{H=I(!0,z)}finally{H?k():(B=!1,I=null)}}else B=!1}var k;if(typeof w=="function")k=function(){w(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,se=G.port2;G.port1.onmessage=D,k=function(){se.postMessage(null)}}else k=function(){N(D,0)};function ae(z){I=z,B||(B=!0,k())}function K(z,H){F=N(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){j||y||(j=!0,ae(A))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var V=p;p=H;try{return z()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=p;p=z;try{return H()}finally{p=V}},t.unstable_scheduleCallback=function(z,H,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,z={id:f++,callback:H,priorityLevel:z,startTime:V,expirationTime:J,sortIndex:-1},V>q?(z.sortIndex=V,e(d,z),n(u)===null&&z===n(d)&&(b?(_(F),F=-1):b=!0,K(R,V-q))):(z.sortIndex=J,e(u,z),j||y||(j=!0,ae(A))),z},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(z){var H=p;return function(){var V=p;p=H;try{return z.apply(this,arguments)}finally{p=V}}}})(zI);$I.exports=zI;var n$=$I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r$=x,Us=n$;function ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UI=new Set,Am={};function au(t,e){Ld(t,e),Ld(t+"Capture",e)}function Ld(t,e){for(Am[t]=e,t=0;t<e.length;t++)UI.add(e[t])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wb=Object.prototype.hasOwnProperty,s$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yP={},xP={};function i$(t){return wb.call(xP,t)?!0:wb.call(yP,t)?!1:s$.test(t)?xP[t]=!0:(yP[t]=!0,!1)}function a$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o$(t,e,n,r){if(e===null||typeof e>"u"||a$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Er[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Er[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Er[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Er[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Er[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Er[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Er[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Er[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Er[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var rN=/[\-:]([a-z])/g;function sN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rN,sN);Er[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rN,sN);Er[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rN,sN);Er[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Er[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});Er.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Er[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function iN(t,e,n,r){var s=Er.hasOwnProperty(e)?Er[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o$(e,n,s,r)&&(n=null),r||s===null?i$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var So=r$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kg=Symbol.for("react.element"),od=Symbol.for("react.portal"),ld=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),bb=Symbol.for("react.profiler"),BI=Symbol.for("react.provider"),HI=Symbol.for("react.context"),oN=Symbol.for("react.forward_ref"),jb=Symbol.for("react.suspense"),Nb=Symbol.for("react.suspense_list"),lN=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),qI=Symbol.for("react.offscreen"),_P=Symbol.iterator;function kf(t){return t===null||typeof t!="object"?null:(t=_P&&t[_P]||t["@@iterator"],typeof t=="function"?t:null)}var Tn=Object.assign,H_;function Qf(t){if(H_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);H_=e&&e[1]||""}return`
`+H_+t}var q_=!1;function W_(t,e){if(!t||q_)return"";q_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{q_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qf(t):""}function l$(t){switch(t.tag){case 5:return Qf(t.type);case 16:return Qf("Lazy");case 13:return Qf("Suspense");case 19:return Qf("SuspenseList");case 0:case 2:case 15:return t=W_(t.type,!1),t;case 11:return t=W_(t.type.render,!1),t;case 1:return t=W_(t.type,!0),t;default:return""}}function Sb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ld:return"Fragment";case od:return"Portal";case bb:return"Profiler";case aN:return"StrictMode";case jb:return"Suspense";case Nb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HI:return(t.displayName||"Context")+".Consumer";case BI:return(t._context.displayName||"Context")+".Provider";case oN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lN:return e=t.displayName||null,e!==null?e:Sb(t.type)||"Memo";case Zo:e=t._payload,t=t._init;try{return Sb(t(e))}catch{}}return null}function c$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sb(e);case 8:return e===aN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u$(t){var e=WI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zg(t){t._valueTracker||(t._valueTracker=u$(t))}function GI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=WI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eb(t,e){var n=e.checked;return Tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KI(t,e){e=e.checked,e!=null&&iN(t,"checked",e,!1)}function Cb(t,e){KI(t,e);var n=Pl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pb(t,e.type,Pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pb(t,e,n){(e!=="number"||hy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yf=Array.isArray;function wd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ke(92));if(Yf(n)){if(1<n.length)throw Error(ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pl(n)}}function ZI(t,e){var n=Pl(e.value),r=Pl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function NP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qg,YI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qg=Qg||document.createElement("div"),Qg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Om(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d$=["Webkit","ms","Moz","O"];Object.keys(dm).forEach(function(t){d$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dm[e]=dm[t]})});function XI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dm.hasOwnProperty(t)&&dm[t]?(""+e).trim():e+"px"}function JI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var h$=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rb(t,e){if(e){if(h$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function Ib(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ab=null;function cN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ob=null,bd=null,jd=null;function SP(t){if(t=kp(t)){if(typeof Ob!="function")throw Error(ke(280));var e=t.stateNode;e&&(e=n0(e),Ob(t.stateNode,t.type,e))}}function eA(t){bd?jd?jd.push(t):jd=[t]:bd=t}function tA(){if(bd){var t=bd,e=jd;if(jd=bd=null,SP(t),e)for(t=0;t<e.length;t++)SP(e[t])}}function nA(t,e){return t(e)}function rA(){}var G_=!1;function sA(t,e,n){if(G_)return t(e,n);G_=!0;try{return nA(t,e,n)}finally{G_=!1,(bd!==null||jd!==null)&&(rA(),tA())}}function Mm(t,e){var n=t.stateNode;if(n===null)return null;var r=n0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ke(231,e,typeof n));return n}var Mb=!1;if(oo)try{var Rf={};Object.defineProperty(Rf,"passive",{get:function(){Mb=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{Mb=!1}function f$(t,e,n,r,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var hm=!1,fy=null,my=!1,Db=null,m$={onError:function(t){hm=!0,fy=t}};function p$(t,e,n,r,s,a,o,l,u){hm=!1,fy=null,f$.apply(m$,arguments)}function g$(t,e,n,r,s,a,o,l,u){if(p$.apply(this,arguments),hm){if(hm){var d=fy;hm=!1,fy=null}else throw Error(ke(198));my||(my=!0,Db=d)}}function ou(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function EP(t){if(ou(t)!==t)throw Error(ke(188))}function v$(t){var e=t.alternate;if(!e){if(e=ou(t),e===null)throw Error(ke(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return EP(s),t;if(a===r)return EP(s),e;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?t:e}function aA(t){return t=v$(t),t!==null?oA(t):null}function oA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oA(t);if(e!==null)return e;t=t.sibling}return null}var lA=Us.unstable_scheduleCallback,CP=Us.unstable_cancelCallback,y$=Us.unstable_shouldYield,x$=Us.unstable_requestPaint,$n=Us.unstable_now,_$=Us.unstable_getCurrentPriorityLevel,uN=Us.unstable_ImmediatePriority,cA=Us.unstable_UserBlockingPriority,py=Us.unstable_NormalPriority,w$=Us.unstable_LowPriority,uA=Us.unstable_IdlePriority,Xx=null,fa=null;function b$(t){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Xx,t,void 0,(t.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:S$,j$=Math.log,N$=Math.LN2;function S$(t){return t>>>=0,t===0?32:31-(j$(t)/N$|0)|0}var Yg=64,Xg=4194304;function Xf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Xf(l):(a&=o,a!==0&&(r=Xf(a)))}else o=n&~s,o!==0?r=Xf(o):a!==0&&(r=Xf(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ri(e),s=1<<n,r|=t[n],e&=~s;return r}function E$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ri(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=E$(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Lb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dA(){var t=Yg;return Yg<<=1,!(Yg&4194240)&&(Yg=64),t}function K_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ri(e),t[e]=n}function P$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ri(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function dN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ri(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Qt=0;function hA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fA,hN,mA,pA,gA,Fb=!1,Jg=[],fl=null,ml=null,pl=null,Dm=new Map,Lm=new Map,Jo=[],T$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PP(t,e){switch(t){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Dm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(e.pointerId)}}function If(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=kp(e),e!==null&&hN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function k$(t,e,n,r,s){switch(e){case"focusin":return fl=If(fl,t,e,n,r,s),!0;case"dragenter":return ml=If(ml,t,e,n,r,s),!0;case"mouseover":return pl=If(pl,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Dm.set(a,If(Dm.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Lm.set(a,If(Lm.get(a)||null,t,e,n,r,s)),!0}return!1}function vA(t){var e=wc(t.target);if(e!==null){var n=ou(e);if(n!==null){if(e=n.tag,e===13){if(e=iA(n),e!==null){t.blockedOn=e,gA(t.priority,function(){mA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ab=r,n.target.dispatchEvent(r),Ab=null}else return e=kp(n),e!==null&&hN(e),t.blockedOn=n,!1;e.shift()}return!0}function TP(t,e,n){Mv(t)&&n.delete(e)}function R$(){Fb=!1,fl!==null&&Mv(fl)&&(fl=null),ml!==null&&Mv(ml)&&(ml=null),pl!==null&&Mv(pl)&&(pl=null),Dm.forEach(TP),Lm.forEach(TP)}function Af(t,e){t.blockedOn===e&&(t.blockedOn=null,Fb||(Fb=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,R$)))}function Fm(t){function e(s){return Af(s,t)}if(0<Jg.length){Af(Jg[0],t);for(var n=1;n<Jg.length;n++){var r=Jg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fl!==null&&Af(fl,t),ml!==null&&Af(ml,t),pl!==null&&Af(pl,t),Dm.forEach(e),Lm.forEach(e),n=0;n<Jo.length;n++)r=Jo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jo.length&&(n=Jo[0],n.blockedOn===null);)vA(n),n.blockedOn===null&&Jo.shift()}var Nd=So.ReactCurrentBatchConfig,vy=!0;function I$(t,e,n,r){var s=Qt,a=Nd.transition;Nd.transition=null;try{Qt=1,fN(t,e,n,r)}finally{Qt=s,Nd.transition=a}}function A$(t,e,n,r){var s=Qt,a=Nd.transition;Nd.transition=null;try{Qt=4,fN(t,e,n,r)}finally{Qt=s,Nd.transition=a}}function fN(t,e,n,r){if(vy){var s=Vb(t,e,n,r);if(s===null)sw(t,e,r,yy,n),PP(t,r);else if(k$(s,t,e,n,r))r.stopPropagation();else if(PP(t,r),e&4&&-1<T$.indexOf(t)){for(;s!==null;){var a=kp(s);if(a!==null&&fA(a),a=Vb(t,e,n,r),a===null&&sw(t,e,r,yy,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else sw(t,e,r,null,n)}}var yy=null;function Vb(t,e,n,r){if(yy=null,t=cN(r),t=wc(t),t!==null)if(e=ou(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yy=t,null}function yA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_$()){case uN:return 1;case cA:return 4;case py:case w$:return 16;case uA:return 536870912;default:return 16}default:return 16}}var ol=null,mN=null,Dv=null;function xA(){if(Dv)return Dv;var t,e=mN,n=e.length,r,s="value"in ol?ol.value:ol.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Dv=s.slice(t,1<r?1-r:void 0)}function Lv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ev(){return!0}function kP(){return!1}function Ws(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ev:kP,this.isPropagationStopped=kP,this}return Tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ev)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ev)},persist:function(){},isPersistent:ev}),e}var Rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pN=Ws(Rh),Tp=Tn({},Rh,{view:0,detail:0}),O$=Ws(Tp),Z_,Q_,Of,Jx=Tn({},Tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Of&&(Of&&t.type==="mousemove"?(Z_=t.screenX-Of.screenX,Q_=t.screenY-Of.screenY):Q_=Z_=0,Of=t),Z_)},movementY:function(t){return"movementY"in t?t.movementY:Q_}}),RP=Ws(Jx),M$=Tn({},Jx,{dataTransfer:0}),D$=Ws(M$),L$=Tn({},Tp,{relatedTarget:0}),Y_=Ws(L$),F$=Tn({},Rh,{animationName:0,elapsedTime:0,pseudoElement:0}),V$=Ws(F$),$$=Tn({},Rh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z$=Ws($$),U$=Tn({},Rh,{data:0}),IP=Ws(U$),B$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q$[t])?!!e[t]:!1}function gN(){return W$}var G$=Tn({},Tp,{key:function(t){if(t.key){var e=B$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gN,charCode:function(t){return t.type==="keypress"?Lv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K$=Ws(G$),Z$=Tn({},Jx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AP=Ws(Z$),Q$=Tn({},Tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gN}),Y$=Ws(Q$),X$=Tn({},Rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),J$=Ws(X$),ez=Tn({},Jx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tz=Ws(ez),nz=[9,13,27,32],vN=oo&&"CompositionEvent"in window,fm=null;oo&&"documentMode"in document&&(fm=document.documentMode);var rz=oo&&"TextEvent"in window&&!fm,_A=oo&&(!vN||fm&&8<fm&&11>=fm),OP=" ",MP=!1;function wA(t,e){switch(t){case"keyup":return nz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cd=!1;function sz(t,e){switch(t){case"compositionend":return bA(e);case"keypress":return e.which!==32?null:(MP=!0,OP);case"textInput":return t=e.data,t===OP&&MP?null:t;default:return null}}function iz(t,e){if(cd)return t==="compositionend"||!vN&&wA(t,e)?(t=xA(),Dv=mN=ol=null,cd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _A&&e.locale!=="ko"?null:e.data;default:return null}}var az={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!az[t.type]:e==="textarea"}function jA(t,e,n,r){eA(r),e=xy(e,"onChange"),0<e.length&&(n=new pN("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mm=null,Vm=null;function oz(t){OA(t,0)}function e0(t){var e=hd(t);if(GI(e))return t}function lz(t,e){if(t==="change")return e}var NA=!1;if(oo){var X_;if(oo){var J_="oninput"in document;if(!J_){var LP=document.createElement("div");LP.setAttribute("oninput","return;"),J_=typeof LP.oninput=="function"}X_=J_}else X_=!1;NA=X_&&(!document.documentMode||9<document.documentMode)}function FP(){mm&&(mm.detachEvent("onpropertychange",SA),Vm=mm=null)}function SA(t){if(t.propertyName==="value"&&e0(Vm)){var e=[];jA(e,Vm,t,cN(t)),sA(oz,e)}}function cz(t,e,n){t==="focusin"?(FP(),mm=e,Vm=n,mm.attachEvent("onpropertychange",SA)):t==="focusout"&&FP()}function uz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return e0(Vm)}function dz(t,e){if(t==="click")return e0(e)}function hz(t,e){if(t==="input"||t==="change")return e0(e)}function fz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fi=typeof Object.is=="function"?Object.is:fz;function $m(t,e){if(Fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wb.call(e,s)||!Fi(t[s],e[s]))return!1}return!0}function VP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $P(t,e){var n=VP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=VP(n)}}function EA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CA(){for(var t=window,e=hy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hy(t.document)}return e}function yN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mz(t){var e=CA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EA(n.ownerDocument.documentElement,n)){if(r!==null&&yN(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=$P(n,a);var o=$P(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pz=oo&&"documentMode"in document&&11>=document.documentMode,ud=null,$b=null,pm=null,zb=!1;function zP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zb||ud==null||ud!==hy(r)||(r=ud,"selectionStart"in r&&yN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pm&&$m(pm,r)||(pm=r,r=xy($b,"onSelect"),0<r.length&&(e=new pN("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ud)))}function tv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dd={animationend:tv("Animation","AnimationEnd"),animationiteration:tv("Animation","AnimationIteration"),animationstart:tv("Animation","AnimationStart"),transitionend:tv("Transition","TransitionEnd")},ew={},PA={};oo&&(PA=document.createElement("div").style,"AnimationEvent"in window||(delete dd.animationend.animation,delete dd.animationiteration.animation,delete dd.animationstart.animation),"TransitionEvent"in window||delete dd.transitionend.transition);function t0(t){if(ew[t])return ew[t];if(!dd[t])return t;var e=dd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PA)return ew[t]=e[n];return t}var TA=t0("animationend"),kA=t0("animationiteration"),RA=t0("animationstart"),IA=t0("transitionend"),AA=new Map,UP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(t,e){AA.set(t,e),au(e,[t])}for(var tw=0;tw<UP.length;tw++){var nw=UP[tw],gz=nw.toLowerCase(),vz=nw[0].toUpperCase()+nw.slice(1);Bl(gz,"on"+vz)}Bl(TA,"onAnimationEnd");Bl(kA,"onAnimationIteration");Bl(RA,"onAnimationStart");Bl("dblclick","onDoubleClick");Bl("focusin","onFocus");Bl("focusout","onBlur");Bl(IA,"onTransitionEnd");Ld("onMouseEnter",["mouseout","mouseover"]);Ld("onMouseLeave",["mouseout","mouseover"]);Ld("onPointerEnter",["pointerout","pointerover"]);Ld("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yz=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jf));function BP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,g$(r,e,void 0,t),t.currentTarget=null}function OA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;BP(s,l,d),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;BP(s,l,d),a=u}}}if(my)throw t=Db,my=!1,Db=null,t}function fn(t,e){var n=e[Wb];n===void 0&&(n=e[Wb]=new Set);var r=t+"__bubble";n.has(r)||(MA(e,t,2,!1),n.add(r))}function rw(t,e,n){var r=0;e&&(r|=4),MA(n,t,r,e)}var nv="_reactListening"+Math.random().toString(36).slice(2);function zm(t){if(!t[nv]){t[nv]=!0,UI.forEach(function(n){n!=="selectionchange"&&(yz.has(n)||rw(n,!1,t),rw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nv]||(e[nv]=!0,rw("selectionchange",!1,e))}}function MA(t,e,n,r){switch(yA(e)){case 1:var s=I$;break;case 4:s=A$;break;default:s=fN}n=s.bind(null,e,n,t),s=void 0,!Mb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sw(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=wc(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}sA(function(){var d=a,f=cN(n),m=[];e:{var p=AA.get(t);if(p!==void 0){var y=pN,j=t;switch(t){case"keypress":if(Lv(n)===0)break e;case"keydown":case"keyup":y=K$;break;case"focusin":j="focus",y=Y_;break;case"focusout":j="blur",y=Y_;break;case"beforeblur":case"afterblur":y=Y_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=RP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=D$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Y$;break;case TA:case kA:case RA:y=V$;break;case IA:y=J$;break;case"scroll":y=O$;break;case"wheel":y=tz;break;case"copy":case"cut":case"paste":y=z$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=AP}var b=(e&4)!==0,N=!b&&t==="scroll",_=b?p!==null?p+"Capture":null:p;b=[];for(var w=d,E;w!==null;){E=w;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,_!==null&&(R=Mm(w,_),R!=null&&b.push(Um(w,R,E)))),N)break;w=w.return}0<b.length&&(p=new y(p,j,null,n,f),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Ab&&(j=n.relatedTarget||n.fromElement)&&(wc(j)||j[lo]))break e;if((y||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=d,j=j?wc(j):null,j!==null&&(N=ou(j),j!==N||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=d),y!==j)){if(b=RP,R="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=AP,R="onPointerLeave",_="onPointerEnter",w="pointer"),N=y==null?p:hd(y),E=j==null?p:hd(j),p=new b(R,w+"leave",y,n,f),p.target=N,p.relatedTarget=E,R=null,wc(f)===d&&(b=new b(_,w+"enter",j,n,f),b.target=E,b.relatedTarget=N,R=b),N=R,y&&j)t:{for(b=y,_=j,w=0,E=b;E;E=Gu(E))w++;for(E=0,R=_;R;R=Gu(R))E++;for(;0<w-E;)b=Gu(b),w--;for(;0<E-w;)_=Gu(_),E--;for(;w--;){if(b===_||_!==null&&b===_.alternate)break t;b=Gu(b),_=Gu(_)}b=null}else b=null;y!==null&&HP(m,p,y,b,!1),j!==null&&N!==null&&HP(m,N,j,b,!0)}}e:{if(p=d?hd(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var A=lz;else if(DP(p))if(NA)A=hz;else{A=uz;var B=cz}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=dz);if(A&&(A=A(t,d))){jA(m,A,n,f);break e}B&&B(t,p,d),t==="focusout"&&(B=p._wrapperState)&&B.controlled&&p.type==="number"&&Pb(p,"number",p.value)}switch(B=d?hd(d):window,t){case"focusin":(DP(B)||B.contentEditable==="true")&&(ud=B,$b=d,pm=null);break;case"focusout":pm=$b=ud=null;break;case"mousedown":zb=!0;break;case"contextmenu":case"mouseup":case"dragend":zb=!1,zP(m,n,f);break;case"selectionchange":if(pz)break;case"keydown":case"keyup":zP(m,n,f)}var I;if(vN)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else cd?wA(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(_A&&n.locale!=="ko"&&(cd||F!=="onCompositionStart"?F==="onCompositionEnd"&&cd&&(I=xA()):(ol=f,mN="value"in ol?ol.value:ol.textContent,cd=!0)),B=xy(d,F),0<B.length&&(F=new IP(F,t,null,n,f),m.push({event:F,listeners:B}),I?F.data=I:(I=bA(n),I!==null&&(F.data=I)))),(I=rz?sz(t,n):iz(t,n))&&(d=xy(d,"onBeforeInput"),0<d.length&&(f=new IP("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=I))}OA(m,e)})}function Um(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xy(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Mm(t,n),a!=null&&r.unshift(Um(t,a,s)),a=Mm(t,e),a!=null&&r.push(Um(t,a,s))),t=t.return}return r}function Gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function HP(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Mm(n,a),u!=null&&o.unshift(Um(n,u,l))):s||(u=Mm(n,a),u!=null&&o.push(Um(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xz=/\r\n?/g,_z=/\u0000|\uFFFD/g;function qP(t){return(typeof t=="string"?t:""+t).replace(xz,`
`).replace(_z,"")}function rv(t,e,n){if(e=qP(e),qP(t)!==e&&n)throw Error(ke(425))}function _y(){}var Ub=null,Bb=null;function Hb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qb=typeof setTimeout=="function"?setTimeout:void 0,wz=typeof clearTimeout=="function"?clearTimeout:void 0,WP=typeof Promise=="function"?Promise:void 0,bz=typeof queueMicrotask=="function"?queueMicrotask:typeof WP<"u"?function(t){return WP.resolve(null).then(t).catch(jz)}:qb;function jz(t){setTimeout(function(){throw t})}function iw(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fm(e)}function gl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ih=Math.random().toString(36).slice(2),sa="__reactFiber$"+Ih,Bm="__reactProps$"+Ih,lo="__reactContainer$"+Ih,Wb="__reactEvents$"+Ih,Nz="__reactListeners$"+Ih,Sz="__reactHandles$"+Ih;function wc(t){var e=t[sa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[lo]||n[sa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=GP(t);t!==null;){if(n=t[sa])return n;t=GP(t)}return e}t=n,n=t.parentNode}return null}function kp(t){return t=t[sa]||t[lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function n0(t){return t[Bm]||null}var Gb=[],fd=-1;function Hl(t){return{current:t}}function vn(t){0>fd||(t.current=Gb[fd],Gb[fd]=null,fd--)}function un(t,e){fd++,Gb[fd]=t.current,t.current=e}var Tl={},zr=Hl(Tl),_s=Hl(!1),$c=Tl;function Fd(t,e){var n=t.type.contextTypes;if(!n)return Tl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ws(t){return t=t.childContextTypes,t!=null}function wy(){vn(_s),vn(zr)}function KP(t,e,n){if(zr.current!==Tl)throw Error(ke(168));un(zr,e),un(_s,n)}function DA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ke(108,c$(t)||"Unknown",s));return Tn({},n,r)}function by(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tl,$c=zr.current,un(zr,t),un(_s,_s.current),!0}function ZP(t,e,n){var r=t.stateNode;if(!r)throw Error(ke(169));n?(t=DA(t,e,$c),r.__reactInternalMemoizedMergedChildContext=t,vn(_s),vn(zr),un(zr,t)):vn(_s),un(_s,n)}var Qa=null,r0=!1,aw=!1;function LA(t){Qa===null?Qa=[t]:Qa.push(t)}function Ez(t){r0=!0,LA(t)}function ql(){if(!aw&&Qa!==null){aw=!0;var t=0,e=Qt;try{var n=Qa;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qa=null,r0=!1}catch(s){throw Qa!==null&&(Qa=Qa.slice(t+1)),lA(uN,ql),s}finally{Qt=e,aw=!1}}return null}var md=[],pd=0,jy=null,Ny=0,ti=[],ni=0,zc=null,Ja=1,eo="";function pc(t,e){md[pd++]=Ny,md[pd++]=jy,jy=t,Ny=e}function FA(t,e,n){ti[ni++]=Ja,ti[ni++]=eo,ti[ni++]=zc,zc=t;var r=Ja;t=eo;var s=32-Ri(r)-1;r&=~(1<<s),n+=1;var a=32-Ri(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ja=1<<32-Ri(e)+s|n<<s|r,eo=a+t}else Ja=1<<a|n<<s|r,eo=t}function xN(t){t.return!==null&&(pc(t,1),FA(t,1,0))}function _N(t){for(;t===jy;)jy=md[--pd],md[pd]=null,Ny=md[--pd],md[pd]=null;for(;t===zc;)zc=ti[--ni],ti[ni]=null,eo=ti[--ni],ti[ni]=null,Ja=ti[--ni],ti[ni]=null}var Fs=null,Ms=null,wn=!1,Ci=null;function VA(t,e){var n=ri(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function QP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fs=t,Ms=gl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fs=t,Ms=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zc!==null?{id:Ja,overflow:eo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ri(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fs=t,Ms=null,!0):!1;default:return!1}}function Kb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zb(t){if(wn){var e=Ms;if(e){var n=e;if(!QP(t,e)){if(Kb(t))throw Error(ke(418));e=gl(n.nextSibling);var r=Fs;e&&QP(t,e)?VA(r,n):(t.flags=t.flags&-4097|2,wn=!1,Fs=t)}}else{if(Kb(t))throw Error(ke(418));t.flags=t.flags&-4097|2,wn=!1,Fs=t}}}function YP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fs=t}function sv(t){if(t!==Fs)return!1;if(!wn)return YP(t),wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hb(t.type,t.memoizedProps)),e&&(e=Ms)){if(Kb(t))throw $A(),Error(ke(418));for(;e;)VA(t,e),e=gl(e.nextSibling)}if(YP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ms=gl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ms=null}}else Ms=Fs?gl(t.stateNode.nextSibling):null;return!0}function $A(){for(var t=Ms;t;)t=gl(t.nextSibling)}function Vd(){Ms=Fs=null,wn=!1}function wN(t){Ci===null?Ci=[t]:Ci.push(t)}var Cz=So.ReactCurrentBatchConfig;function Mf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,t))}return t}function iv(t,e){throw t=Object.prototype.toString.call(e),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XP(t){var e=t._init;return e(t._payload)}function zA(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=_l(_,w),_.index=0,_.sibling=null,_}function a(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,E,R){return w===null||w.tag!==6?(w=fw(E,_.mode,R),w.return=_,w):(w=s(w,E),w.return=_,w)}function u(_,w,E,R){var A=E.type;return A===ld?f(_,w,E.props.children,R,E.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Zo&&XP(A)===w.type)?(R=s(w,E.props),R.ref=Mf(_,w,E),R.return=_,R):(R=Hv(E.type,E.key,E.props,null,_.mode,R),R.ref=Mf(_,w,E),R.return=_,R)}function d(_,w,E,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=mw(E,_.mode,R),w.return=_,w):(w=s(w,E.children||[]),w.return=_,w)}function f(_,w,E,R,A){return w===null||w.tag!==7?(w=kc(E,_.mode,R,A),w.return=_,w):(w=s(w,E),w.return=_,w)}function m(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=fw(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kg:return E=Hv(w.type,w.key,w.props,null,_.mode,E),E.ref=Mf(_,null,w),E.return=_,E;case od:return w=mw(w,_.mode,E),w.return=_,w;case Zo:var R=w._init;return m(_,R(w._payload),E)}if(Yf(w)||kf(w))return w=kc(w,_.mode,E,null),w.return=_,w;iv(_,w)}return null}function p(_,w,E,R){var A=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:l(_,w,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Kg:return E.key===A?u(_,w,E,R):null;case od:return E.key===A?d(_,w,E,R):null;case Zo:return A=E._init,p(_,w,A(E._payload),R)}if(Yf(E)||kf(E))return A!==null?null:f(_,w,E,R,null);iv(_,E)}return null}function y(_,w,E,R,A){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(E)||null,l(w,_,""+R,A);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Kg:return _=_.get(R.key===null?E:R.key)||null,u(w,_,R,A);case od:return _=_.get(R.key===null?E:R.key)||null,d(w,_,R,A);case Zo:var B=R._init;return y(_,w,E,B(R._payload),A)}if(Yf(R)||kf(R))return _=_.get(E)||null,f(w,_,R,A,null);iv(w,R)}return null}function j(_,w,E,R){for(var A=null,B=null,I=w,F=w=0,$=null;I!==null&&F<E.length;F++){I.index>F?($=I,I=null):$=I.sibling;var P=p(_,I,E[F],R);if(P===null){I===null&&(I=$);break}t&&I&&P.alternate===null&&e(_,I),w=a(P,w,F),B===null?A=P:B.sibling=P,B=P,I=$}if(F===E.length)return n(_,I),wn&&pc(_,F),A;if(I===null){for(;F<E.length;F++)I=m(_,E[F],R),I!==null&&(w=a(I,w,F),B===null?A=I:B.sibling=I,B=I);return wn&&pc(_,F),A}for(I=r(_,I);F<E.length;F++)$=y(I,_,F,E[F],R),$!==null&&(t&&$.alternate!==null&&I.delete($.key===null?F:$.key),w=a($,w,F),B===null?A=$:B.sibling=$,B=$);return t&&I.forEach(function(M){return e(_,M)}),wn&&pc(_,F),A}function b(_,w,E,R){var A=kf(E);if(typeof A!="function")throw Error(ke(150));if(E=A.call(E),E==null)throw Error(ke(151));for(var B=A=null,I=w,F=w=0,$=null,P=E.next();I!==null&&!P.done;F++,P=E.next()){I.index>F?($=I,I=null):$=I.sibling;var M=p(_,I,P.value,R);if(M===null){I===null&&(I=$);break}t&&I&&M.alternate===null&&e(_,I),w=a(M,w,F),B===null?A=M:B.sibling=M,B=M,I=$}if(P.done)return n(_,I),wn&&pc(_,F),A;if(I===null){for(;!P.done;F++,P=E.next())P=m(_,P.value,R),P!==null&&(w=a(P,w,F),B===null?A=P:B.sibling=P,B=P);return wn&&pc(_,F),A}for(I=r(_,I);!P.done;F++,P=E.next())P=y(I,_,F,P.value,R),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?F:P.key),w=a(P,w,F),B===null?A=P:B.sibling=P,B=P);return t&&I.forEach(function(D){return e(_,D)}),wn&&pc(_,F),A}function N(_,w,E,R){if(typeof E=="object"&&E!==null&&E.type===ld&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Kg:e:{for(var A=E.key,B=w;B!==null;){if(B.key===A){if(A=E.type,A===ld){if(B.tag===7){n(_,B.sibling),w=s(B,E.props.children),w.return=_,_=w;break e}}else if(B.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Zo&&XP(A)===B.type){n(_,B.sibling),w=s(B,E.props),w.ref=Mf(_,B,E),w.return=_,_=w;break e}n(_,B);break}else e(_,B);B=B.sibling}E.type===ld?(w=kc(E.props.children,_.mode,R,E.key),w.return=_,_=w):(R=Hv(E.type,E.key,E.props,null,_.mode,R),R.ref=Mf(_,w,E),R.return=_,_=R)}return o(_);case od:e:{for(B=E.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=s(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=mw(E,_.mode,R),w.return=_,_=w}return o(_);case Zo:return B=E._init,N(_,w,B(E._payload),R)}if(Yf(E))return j(_,w,E,R);if(kf(E))return b(_,w,E,R);iv(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,E),w.return=_,_=w):(n(_,w),w=fw(E,_.mode,R),w.return=_,_=w),o(_)):n(_,w)}return N}var $d=zA(!0),UA=zA(!1),Sy=Hl(null),Ey=null,gd=null,bN=null;function jN(){bN=gd=Ey=null}function NN(t){var e=Sy.current;vn(Sy),t._currentValue=e}function Qb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sd(t,e){Ey=t,bN=gd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gs=!0),t.firstContext=null)}function di(t){var e=t._currentValue;if(bN!==t)if(t={context:t,memoizedValue:e,next:null},gd===null){if(Ey===null)throw Error(ke(308));gd=t,Ey.dependencies={lanes:0,firstContext:t}}else gd=gd.next=t;return e}var bc=null;function SN(t){bc===null?bc=[t]:bc.push(t)}function BA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,SN(e)):(n.next=s.next,s.next=n),e.interleaved=n,co(t,r)}function co(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qo=!1;function EN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,co(t,n)}return s=r.interleaved,s===null?(e.next=e,SN(r)):(e.next=s.next,s.next=e),r.interleaved=e,co(t,n)}function Fv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dN(t,n)}}function JP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cy(t,e,n,r){var s=t.updateQueue;Qo=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,f=d=u=null,l=a;do{var p=l.lane,y=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,b=l;switch(p=e,y=n,b.tag){case 1:if(j=b.payload,typeof j=="function"){m=j.call(y,m,p);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=b.payload,p=typeof j=="function"?j.call(y,m,p):j,p==null)break e;m=Tn({},m,p);break e;case 2:Qo=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=y,u=m):f=f.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Bc|=o,t.lanes=o,t.memoizedState=m}}function e2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ke(191,s));s.call(r)}}}var Rp={},ma=Hl(Rp),Hm=Hl(Rp),qm=Hl(Rp);function jc(t){if(t===Rp)throw Error(ke(174));return t}function CN(t,e){switch(un(qm,e),un(Hm,t),un(ma,Rp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kb(e,t)}vn(ma),un(ma,e)}function zd(){vn(ma),vn(Hm),vn(qm)}function qA(t){jc(qm.current);var e=jc(ma.current),n=kb(e,t.type);e!==n&&(un(Hm,t),un(ma,n))}function PN(t){Hm.current===t&&(vn(ma),vn(Hm))}var Cn=Hl(0);function Py(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ow=[];function TN(){for(var t=0;t<ow.length;t++)ow[t]._workInProgressVersionPrimary=null;ow.length=0}var Vv=So.ReactCurrentDispatcher,lw=So.ReactCurrentBatchConfig,Uc=0,Pn=null,lr=null,vr=null,Ty=!1,gm=!1,Wm=0,Pz=0;function kr(){throw Error(ke(321))}function kN(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fi(t[n],e[n]))return!1;return!0}function RN(t,e,n,r,s,a){if(Uc=a,Pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vv.current=t===null||t.memoizedState===null?Iz:Az,t=n(r,s),gm){a=0;do{if(gm=!1,Wm=0,25<=a)throw Error(ke(301));a+=1,vr=lr=null,e.updateQueue=null,Vv.current=Oz,t=n(r,s)}while(gm)}if(Vv.current=ky,e=lr!==null&&lr.next!==null,Uc=0,vr=lr=Pn=null,Ty=!1,e)throw Error(ke(300));return t}function IN(){var t=Wm!==0;return Wm=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Pn.memoizedState=vr=t:vr=vr.next=t,vr}function hi(){if(lr===null){var t=Pn.alternate;t=t!==null?t.memoizedState:null}else t=lr.next;var e=vr===null?Pn.memoizedState:vr.next;if(e!==null)vr=e,lr=t;else{if(t===null)throw Error(ke(310));lr=t,t={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},vr===null?Pn.memoizedState=vr=t:vr=vr.next=t}return vr}function Gm(t,e){return typeof e=="function"?e(t):e}function cw(t){var e=hi(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=lr,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,d=a;do{var f=d.lane;if((Uc&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Pn.lanes|=f,Bc|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=l,Fi(r,e.memoizedState)||(gs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Pn.lanes|=a,Bc|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uw(t){var e=hi(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Fi(a,e.memoizedState)||(gs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function WA(){}function GA(t,e){var n=Pn,r=hi(),s=e(),a=!Fi(r.memoizedState,s);if(a&&(r.memoizedState=s,gs=!0),r=r.queue,AN(QA.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||vr!==null&&vr.memoizedState.tag&1){if(n.flags|=2048,Km(9,ZA.bind(null,n,r,s,e),void 0,null),xr===null)throw Error(ke(349));Uc&30||KA(n,e,s)}return s}function KA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZA(t,e,n,r){e.value=n,e.getSnapshot=r,YA(e)&&XA(t)}function QA(t,e,n){return n(function(){YA(e)&&XA(t)})}function YA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fi(t,n)}catch{return!0}}function XA(t){var e=co(t,1);e!==null&&Ii(e,t,1,-1)}function t2(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:t},e.queue=t,t=t.dispatch=Rz.bind(null,Pn,t),[e.memoizedState,t]}function Km(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JA(){return hi().memoizedState}function $v(t,e,n,r){var s=Ji();Pn.flags|=t,s.memoizedState=Km(1|e,n,void 0,r===void 0?null:r)}function s0(t,e,n,r){var s=hi();r=r===void 0?null:r;var a=void 0;if(lr!==null){var o=lr.memoizedState;if(a=o.destroy,r!==null&&kN(r,o.deps)){s.memoizedState=Km(e,n,a,r);return}}Pn.flags|=t,s.memoizedState=Km(1|e,n,a,r)}function n2(t,e){return $v(8390656,8,t,e)}function AN(t,e){return s0(2048,8,t,e)}function eO(t,e){return s0(4,2,t,e)}function tO(t,e){return s0(4,4,t,e)}function nO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rO(t,e,n){return n=n!=null?n.concat([t]):null,s0(4,4,nO.bind(null,e,t),n)}function ON(){}function sO(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kN(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iO(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kN(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aO(t,e,n){return Uc&21?(Fi(n,e)||(n=dA(),Pn.lanes|=n,Bc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gs=!0),t.memoizedState=n)}function Tz(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=lw.transition;lw.transition={};try{t(!1),e()}finally{Qt=n,lw.transition=r}}function oO(){return hi().memoizedState}function kz(t,e,n){var r=xl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lO(t))cO(e,n);else if(n=BA(t,e,n,r),n!==null){var s=ts();Ii(n,t,r,s),uO(n,e,r)}}function Rz(t,e,n){var r=xl(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lO(t))cO(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Fi(l,o)){var u=e.interleaved;u===null?(s.next=s,SN(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=BA(t,e,s,r),n!==null&&(s=ts(),Ii(n,t,r,s),uO(n,e,r))}}function lO(t){var e=t.alternate;return t===Pn||e!==null&&e===Pn}function cO(t,e){gm=Ty=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dN(t,n)}}var ky={readContext:di,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},Iz={readContext:di,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:di,useEffect:n2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$v(4194308,4,nO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $v(4194308,4,t,e)},useInsertionEffect:function(t,e){return $v(4,2,t,e)},useMemo:function(t,e){var n=Ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kz.bind(null,Pn,t),[r.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:t2,useDebugValue:ON,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=t2(!1),e=t[0];return t=Tz.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pn,s=Ji();if(wn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=e(),xr===null)throw Error(ke(349));Uc&30||KA(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,n2(QA.bind(null,r,a,t),[t]),r.flags|=2048,Km(9,ZA.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ji(),e=xr.identifierPrefix;if(wn){var n=eo,r=Ja;n=(r&~(1<<32-Ri(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Az={readContext:di,useCallback:sO,useContext:di,useEffect:AN,useImperativeHandle:rO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:iO,useReducer:cw,useRef:JA,useState:function(){return cw(Gm)},useDebugValue:ON,useDeferredValue:function(t){var e=hi();return aO(e,lr.memoizedState,t)},useTransition:function(){var t=cw(Gm)[0],e=hi().memoizedState;return[t,e]},useMutableSource:WA,useSyncExternalStore:GA,useId:oO,unstable_isNewReconciler:!1},Oz={readContext:di,useCallback:sO,useContext:di,useEffect:AN,useImperativeHandle:rO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:iO,useReducer:uw,useRef:JA,useState:function(){return uw(Gm)},useDebugValue:ON,useDeferredValue:function(t){var e=hi();return lr===null?e.memoizedState=t:aO(e,lr.memoizedState,t)},useTransition:function(){var t=uw(Gm)[0],e=hi().memoizedState;return[t,e]},useMutableSource:WA,useSyncExternalStore:GA,useId:oO,unstable_isNewReconciler:!1};function Ni(t,e){if(t&&t.defaultProps){e=Tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var i0={isMounted:function(t){return(t=t._reactInternals)?ou(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ts(),s=xl(t),a=so(r,s);a.payload=e,n!=null&&(a.callback=n),e=vl(t,a,s),e!==null&&(Ii(e,t,s,r),Fv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ts(),s=xl(t),a=so(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=vl(t,a,s),e!==null&&(Ii(e,t,s,r),Fv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ts(),r=xl(t),s=so(n,r);s.tag=2,e!=null&&(s.callback=e),e=vl(t,s,r),e!==null&&(Ii(e,t,r,n),Fv(e,t,r))}};function r2(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!$m(n,r)||!$m(s,a):!0}function dO(t,e,n){var r=!1,s=Tl,a=e.contextType;return typeof a=="object"&&a!==null?a=di(a):(s=ws(e)?$c:zr.current,r=e.contextTypes,a=(r=r!=null)?Fd(t,s):Tl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=i0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function s2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&i0.enqueueReplaceState(e,e.state,null)}function Xb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},EN(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=di(a):(a=ws(e)?$c:zr.current,s.context=Fd(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Yb(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&i0.enqueueReplaceState(s,s.state,null),Cy(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ud(t,e){try{var n="",r=e;do n+=l$(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function dw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mz=typeof WeakMap=="function"?WeakMap:Map;function hO(t,e,n){n=so(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iy||(Iy=!0,c1=r),Jb(t,e)},n}function fO(t,e,n){n=so(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Jb(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Jb(t,e),typeof r!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function i2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mz;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Zz.bind(null,t,e,n),e.then(t,t))}function a2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function o2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=so(-1,1),e.tag=2,vl(n,e,1))),n.lanes|=1),t)}var Dz=So.ReactCurrentOwner,gs=!1;function Qr(t,e,n,r){e.child=t===null?UA(e,null,n,r):$d(e,t.child,n,r)}function l2(t,e,n,r,s){n=n.render;var a=e.ref;return Sd(e,s),r=RN(t,e,n,r,a,s),n=IN(),t!==null&&!gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,uo(t,e,s)):(wn&&n&&xN(e),e.flags|=1,Qr(t,e,r,s),e.child)}function c2(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!UN(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,mO(t,e,a,r,s)):(t=Hv(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:$m,n(o,r)&&t.ref===e.ref)return uo(t,e,s)}return e.flags|=1,t=_l(a,r),t.ref=e.ref,t.return=e,e.child=t}function mO(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if($m(a,r)&&t.ref===e.ref)if(gs=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(gs=!0);else return e.lanes=t.lanes,uo(t,e,s)}return e1(t,e,n,r,s)}function pO(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(yd,Is),Is|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un(yd,Is),Is|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,un(yd,Is),Is|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,un(yd,Is),Is|=r;return Qr(t,e,s,n),e.child}function gO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function e1(t,e,n,r,s){var a=ws(n)?$c:zr.current;return a=Fd(e,a),Sd(e,s),n=RN(t,e,n,r,a,s),r=IN(),t!==null&&!gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,uo(t,e,s)):(wn&&r&&xN(e),e.flags|=1,Qr(t,e,n,s),e.child)}function u2(t,e,n,r,s){if(ws(n)){var a=!0;by(e)}else a=!1;if(Sd(e,s),e.stateNode===null)zv(t,e),dO(e,n,r),Xb(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=di(d):(d=ws(n)?$c:zr.current,d=Fd(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&s2(e,o,r,d),Qo=!1;var p=e.memoizedState;o.state=p,Cy(e,r,o,s),u=e.memoizedState,l!==r||p!==u||_s.current||Qo?(typeof f=="function"&&(Yb(e,n,f,r),u=e.memoizedState),(l=Qo||r2(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HA(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ni(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=di(u):(u=ws(n)?$c:zr.current,u=Fd(e,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&s2(e,o,r,u),Qo=!1,p=e.memoizedState,o.state=p,Cy(e,r,o,s);var j=e.memoizedState;l!==m||p!==j||_s.current||Qo?(typeof y=="function"&&(Yb(e,n,y,r),j=e.memoizedState),(d=Qo||r2(e,n,d,r,p,j,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return t1(t,e,n,r,a,s)}function t1(t,e,n,r,s,a){gO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ZP(e,n,!1),uo(t,e,a);r=e.stateNode,Dz.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$d(e,t.child,null,a),e.child=$d(e,null,l,a)):Qr(t,e,l,a),e.memoizedState=r.state,s&&ZP(e,n,!0),e.child}function vO(t){var e=t.stateNode;e.pendingContext?KP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&KP(t,e.context,!1),CN(t,e.containerInfo)}function d2(t,e,n,r,s){return Vd(),wN(s),e.flags|=256,Qr(t,e,n,r),e.child}var n1={dehydrated:null,treeContext:null,retryLane:0};function r1(t){return{baseLanes:t,cachePool:null,transitions:null}}function yO(t,e,n){var r=e.pendingProps,s=Cn.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),un(Cn,s&1),t===null)return Zb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=l0(o,r,0,null),t=kc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=r1(n),e.memoizedState=n1,t):MN(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Lz(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=_l(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=_l(l,a):(a=kc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?r1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=n1,r}return a=t.child,t=a.sibling,r=_l(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function MN(t,e){return e=l0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function av(t,e,n,r){return r!==null&&wN(r),$d(e,t.child,null,n),t=MN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lz(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=dw(Error(ke(422))),av(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=l0({mode:"visible",children:r.children},s,0,null),a=kc(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&$d(e,t.child,null,o),e.child.memoizedState=r1(o),e.memoizedState=n1,a);if(!(e.mode&1))return av(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=dw(a,r,void 0),av(t,e,o,r)}if(l=(o&t.childLanes)!==0,gs||l){if(r=xr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,co(t,s),Ii(r,t,s,-1))}return zN(),r=dw(Error(ke(421))),av(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Qz.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ms=gl(s.nextSibling),Fs=e,wn=!0,Ci=null,t!==null&&(ti[ni++]=Ja,ti[ni++]=eo,ti[ni++]=zc,Ja=t.id,eo=t.overflow,zc=e),e=MN(e,r.children),e.flags|=4096,e)}function h2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qb(t.return,e,n)}function hw(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function xO(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Qr(t,e,r.children,n),r=Cn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h2(t,n,e);else if(t.tag===19)h2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(Cn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Py(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hw(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Py(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hw(e,!0,n,null,a);break;case"together":hw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function uo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ke(153));if(e.child!==null){for(t=e.child,n=_l(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_l(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Fz(t,e,n){switch(e.tag){case 3:vO(e),Vd();break;case 5:qA(e);break;case 1:ws(e.type)&&by(e);break;case 4:CN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;un(Sy,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(Cn,Cn.current&1),e.flags|=128,null):n&e.child.childLanes?yO(t,e,n):(un(Cn,Cn.current&1),t=uo(t,e,n),t!==null?t.sibling:null);un(Cn,Cn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xO(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),un(Cn,Cn.current),r)break;return null;case 22:case 23:return e.lanes=0,pO(t,e,n)}return uo(t,e,n)}var _O,s1,wO,bO;_O=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};s1=function(){};wO=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jc(ma.current);var a=null;switch(n){case"input":s=Eb(t,s),r=Eb(t,r),a=[];break;case"select":s=Tn({},s,{value:void 0}),r=Tn({},r,{value:void 0}),a=[];break;case"textarea":s=Tb(t,s),r=Tb(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_y)}Rb(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Am.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Am.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&fn("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};bO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Df(t,e){if(!wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vz(t,e,n){var r=e.pendingProps;switch(_N(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(e),null;case 1:return ws(e.type)&&wy(),Rr(e),null;case 3:return r=e.stateNode,zd(),vn(_s),vn(zr),TN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ci!==null&&(h1(Ci),Ci=null))),s1(t,e),Rr(e),null;case 5:PN(e);var s=jc(qm.current);if(n=e.type,t!==null&&e.stateNode!=null)wO(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return Rr(e),null}if(t=jc(ma.current),sv(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[sa]=e,r[Bm]=a,t=(e.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(s=0;s<Jf.length;s++)fn(Jf[s],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":wP(r,a),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},fn("invalid",r);break;case"textarea":jP(r,a),fn("invalid",r)}Rb(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&rv(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&rv(r.textContent,l,t),s=["children",""+l]):Am.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fn("scroll",r)}switch(n){case"input":Zg(r),bP(r,a,!0);break;case"textarea":Zg(r),NP(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=_y)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sa]=e,t[Bm]=r,_O(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ib(n,r),n){case"dialog":fn("cancel",t),fn("close",t),s=r;break;case"iframe":case"object":case"embed":fn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jf.length;s++)fn(Jf[s],t);s=r;break;case"source":fn("error",t),s=r;break;case"img":case"image":case"link":fn("error",t),fn("load",t),s=r;break;case"details":fn("toggle",t),s=r;break;case"input":wP(t,r),s=Eb(t,r),fn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tn({},r,{value:void 0}),fn("invalid",t);break;case"textarea":jP(t,r),s=Tb(t,r),fn("invalid",t);break;default:s=r}Rb(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?JI(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&YI(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Om(t,u):typeof u=="number"&&Om(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Am.hasOwnProperty(a)?u!=null&&a==="onScroll"&&fn("scroll",t):u!=null&&iN(t,a,u,o))}switch(n){case"input":Zg(t),bP(t,r,!1);break;case"textarea":Zg(t),NP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?wd(t,!!r.multiple,a,!1):r.defaultValue!=null&&wd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_y)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rr(e),null;case 6:if(t&&e.stateNode!=null)bO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(n=jc(qm.current),jc(ma.current),sv(e)){if(r=e.stateNode,n=e.memoizedProps,r[sa]=e,(a=r.nodeValue!==n)&&(t=Fs,t!==null))switch(t.tag){case 3:rv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rv(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sa]=e,e.stateNode=r}return Rr(e),null;case 13:if(vn(Cn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wn&&Ms!==null&&e.mode&1&&!(e.flags&128))$A(),Vd(),e.flags|=98560,a=!1;else if(a=sv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ke(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[sa]=e}else Vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rr(e),a=!1}else Ci!==null&&(h1(Ci),Ci=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Cn.current&1?ur===0&&(ur=3):zN())),e.updateQueue!==null&&(e.flags|=4),Rr(e),null);case 4:return zd(),s1(t,e),t===null&&zm(e.stateNode.containerInfo),Rr(e),null;case 10:return NN(e.type._context),Rr(e),null;case 17:return ws(e.type)&&wy(),Rr(e),null;case 19:if(vn(Cn),a=e.memoizedState,a===null)return Rr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Df(a,!1);else{if(ur!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Py(t),o!==null){for(e.flags|=128,Df(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(Cn,Cn.current&1|2),e.child}t=t.sibling}a.tail!==null&&$n()>Bd&&(e.flags|=128,r=!0,Df(a,!1),e.lanes=4194304)}else{if(!r)if(t=Py(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Df(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!wn)return Rr(e),null}else 2*$n()-a.renderingStartTime>Bd&&n!==1073741824&&(e.flags|=128,r=!0,Df(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$n(),e.sibling=null,n=Cn.current,un(Cn,r?n&1|2:n&1),e):(Rr(e),null);case 22:case 23:return $N(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Is&1073741824&&(Rr(e),e.subtreeFlags&6&&(e.flags|=8192)):Rr(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function $z(t,e){switch(_N(e),e.tag){case 1:return ws(e.type)&&wy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zd(),vn(_s),vn(zr),TN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return PN(e),null;case 13:if(vn(Cn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vn(Cn),null;case 4:return zd(),null;case 10:return NN(e.type._context),null;case 22:case 23:return $N(),null;case 24:return null;default:return null}}var ov=!1,Mr=!1,zz=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function vd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){An(t,e,r)}else n.current=null}function i1(t,e,n){try{n()}catch(r){An(t,e,r)}}var f2=!1;function Uz(t,e){if(Ub=vy,t=CA(),yN(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++d===s&&(l=o),p===a&&++f===r&&(u=o),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bb={focusedElem:t,selectionRange:n},vy=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var b=j.memoizedProps,N=j.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ni(e.type,b),N);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(R){An(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return j=f2,f2=!1,j}function vm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&i1(e,n,a)}s=s.next}while(s!==r)}}function a0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function a1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jO(t){var e=t.alternate;e!==null&&(t.alternate=null,jO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sa],delete e[Bm],delete e[Wb],delete e[Nz],delete e[Sz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NO(t){return t.tag===5||t.tag===3||t.tag===4}function m2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function o1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_y));else if(r!==4&&(t=t.child,t!==null))for(o1(t,e,n),t=t.sibling;t!==null;)o1(t,e,n),t=t.sibling}function l1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(l1(t,e,n),t=t.sibling;t!==null;)l1(t,e,n),t=t.sibling}var wr=null,Si=!1;function $o(t,e,n){for(n=n.child;n!==null;)SO(t,e,n),n=n.sibling}function SO(t,e,n){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Xx,n)}catch{}switch(n.tag){case 5:Mr||vd(n,e);case 6:var r=wr,s=Si;wr=null,$o(t,e,n),wr=r,Si=s,wr!==null&&(Si?(t=wr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wr.removeChild(n.stateNode));break;case 18:wr!==null&&(Si?(t=wr,n=n.stateNode,t.nodeType===8?iw(t.parentNode,n):t.nodeType===1&&iw(t,n),Fm(t)):iw(wr,n.stateNode));break;case 4:r=wr,s=Si,wr=n.stateNode.containerInfo,Si=!0,$o(t,e,n),wr=r,Si=s;break;case 0:case 11:case 14:case 15:if(!Mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&i1(n,e,o),s=s.next}while(s!==r)}$o(t,e,n);break;case 1:if(!Mr&&(vd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){An(n,e,l)}$o(t,e,n);break;case 21:$o(t,e,n);break;case 22:n.mode&1?(Mr=(r=Mr)||n.memoizedState!==null,$o(t,e,n),Mr=r):$o(t,e,n);break;default:$o(t,e,n)}}function p2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zz),e.forEach(function(r){var s=Yz.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:wr=l.stateNode,Si=!1;break e;case 3:wr=l.stateNode.containerInfo,Si=!0;break e;case 4:wr=l.stateNode.containerInfo,Si=!0;break e}l=l.return}if(wr===null)throw Error(ke(160));SO(a,o,s),wr=null,Si=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){An(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EO(e,t),e=e.sibling}function EO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wi(e,t),Xi(t),r&4){try{vm(3,t,t.return),a0(3,t)}catch(b){An(t,t.return,b)}try{vm(5,t,t.return)}catch(b){An(t,t.return,b)}}break;case 1:wi(e,t),Xi(t),r&512&&n!==null&&vd(n,n.return);break;case 5:if(wi(e,t),Xi(t),r&512&&n!==null&&vd(n,n.return),t.flags&32){var s=t.stateNode;try{Om(s,"")}catch(b){An(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&KI(s,a),Ib(l,o);var d=Ib(l,a);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?JI(s,m):f==="dangerouslySetInnerHTML"?YI(s,m):f==="children"?Om(s,m):iN(s,f,m,d)}switch(l){case"input":Cb(s,a);break;case"textarea":ZI(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?wd(s,!!a.multiple,y,!1):p!==!!a.multiple&&(a.defaultValue!=null?wd(s,!!a.multiple,a.defaultValue,!0):wd(s,!!a.multiple,a.multiple?[]:"",!1))}s[Bm]=a}catch(b){An(t,t.return,b)}}break;case 6:if(wi(e,t),Xi(t),r&4){if(t.stateNode===null)throw Error(ke(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(b){An(t,t.return,b)}}break;case 3:if(wi(e,t),Xi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fm(e.containerInfo)}catch(b){An(t,t.return,b)}break;case 4:wi(e,t),Xi(t);break;case 13:wi(e,t),Xi(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(FN=$n())),r&4&&p2(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Mr=(d=Mr)||f,wi(e,t),Mr=d):wi(e,t),Xi(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ze=t,f=t.child;f!==null;){for(m=Ze=f;Ze!==null;){switch(p=Ze,y=p.child,p.tag){case 0:case 11:case 14:case 15:vm(4,p,p.return);break;case 1:vd(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(b){An(r,n,b)}}break;case 5:vd(p,p.return);break;case 22:if(p.memoizedState!==null){v2(m);continue}}y!==null?(y.return=p,Ze=y):v2(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=XI("display",o))}catch(b){An(t,t.return,b)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){An(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:wi(e,t),Xi(t),r&4&&p2(t);break;case 21:break;default:wi(e,t),Xi(t)}}function Xi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NO(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Om(s,""),r.flags&=-33);var a=m2(t);l1(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=m2(t);o1(t,l,o);break;default:throw Error(ke(161))}}catch(u){An(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bz(t,e,n){Ze=t,CO(t)}function CO(t,e,n){for(var r=(t.mode&1)!==0;Ze!==null;){var s=Ze,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ov;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Mr;l=ov;var d=Mr;if(ov=o,(Mr=u)&&!d)for(Ze=s;Ze!==null;)o=Ze,u=o.child,o.tag===22&&o.memoizedState!==null?y2(s):u!==null?(u.return=o,Ze=u):y2(s);for(;a!==null;)Ze=a,CO(a),a=a.sibling;Ze=s,ov=l,Mr=d}g2(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ze=a):g2(t)}}function g2(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||a0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ni(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&e2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e2(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Fm(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Mr||e.flags&512&&a1(e)}catch(p){An(e,e.return,p)}}if(e===t){Ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function v2(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function y2(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{a0(4,e)}catch(u){An(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){An(e,s,u)}}var a=e.return;try{a1(e)}catch(u){An(e,a,u)}break;case 5:var o=e.return;try{a1(e)}catch(u){An(e,o,u)}}}catch(u){An(e,e.return,u)}if(e===t){Ze=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ze=l;break}Ze=e.return}}var Hz=Math.ceil,Ry=So.ReactCurrentDispatcher,DN=So.ReactCurrentOwner,ai=So.ReactCurrentBatchConfig,Vt=0,xr=null,Jn=null,Nr=0,Is=0,yd=Hl(0),ur=0,Zm=null,Bc=0,o0=0,LN=0,ym=null,ms=null,FN=0,Bd=1/0,Za=null,Iy=!1,c1=null,yl=null,lv=!1,ll=null,Ay=0,xm=0,u1=null,Uv=-1,Bv=0;function ts(){return Vt&6?$n():Uv!==-1?Uv:Uv=$n()}function xl(t){return t.mode&1?Vt&2&&Nr!==0?Nr&-Nr:Cz.transition!==null?(Bv===0&&(Bv=dA()),Bv):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:yA(t.type)),t):1}function Ii(t,e,n,r){if(50<xm)throw xm=0,u1=null,Error(ke(185));Pp(t,n,r),(!(Vt&2)||t!==xr)&&(t===xr&&(!(Vt&2)&&(o0|=n),ur===4&&el(t,Nr)),bs(t,r),n===1&&Vt===0&&!(e.mode&1)&&(Bd=$n()+500,r0&&ql()))}function bs(t,e){var n=t.callbackNode;C$(t,e);var r=gy(t,t===xr?Nr:0);if(r===0)n!==null&&CP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&CP(n),e===1)t.tag===0?Ez(x2.bind(null,t)):LA(x2.bind(null,t)),bz(function(){!(Vt&6)&&ql()}),n=null;else{switch(hA(r)){case 1:n=uN;break;case 4:n=cA;break;case 16:n=py;break;case 536870912:n=uA;break;default:n=py}n=MO(n,PO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PO(t,e){if(Uv=-1,Bv=0,Vt&6)throw Error(ke(327));var n=t.callbackNode;if(Ed()&&t.callbackNode!==n)return null;var r=gy(t,t===xr?Nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oy(t,r);else{e=r;var s=Vt;Vt|=2;var a=kO();(xr!==t||Nr!==e)&&(Za=null,Bd=$n()+500,Tc(t,e));do try{Gz();break}catch(l){TO(t,l)}while(!0);jN(),Ry.current=a,Vt=s,Jn!==null?e=0:(xr=null,Nr=0,e=ur)}if(e!==0){if(e===2&&(s=Lb(t),s!==0&&(r=s,e=d1(t,s))),e===1)throw n=Zm,Tc(t,0),el(t,r),bs(t,$n()),n;if(e===6)el(t,r);else{if(s=t.current.alternate,!(r&30)&&!qz(s)&&(e=Oy(t,r),e===2&&(a=Lb(t),a!==0&&(r=a,e=d1(t,a))),e===1))throw n=Zm,Tc(t,0),el(t,r),bs(t,$n()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:gc(t,ms,Za);break;case 3:if(el(t,r),(r&130023424)===r&&(e=FN+500-$n(),10<e)){if(gy(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qb(gc.bind(null,t,ms,Za),e);break}gc(t,ms,Za);break;case 4:if(el(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ri(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hz(r/1960))-r,10<r){t.timeoutHandle=qb(gc.bind(null,t,ms,Za),r);break}gc(t,ms,Za);break;case 5:gc(t,ms,Za);break;default:throw Error(ke(329))}}}return bs(t,$n()),t.callbackNode===n?PO.bind(null,t):null}function d1(t,e){var n=ym;return t.current.memoizedState.isDehydrated&&(Tc(t,e).flags|=256),t=Oy(t,e),t!==2&&(e=ms,ms=n,e!==null&&h1(e)),t}function h1(t){ms===null?ms=t:ms.push.apply(ms,t)}function qz(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Fi(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function el(t,e){for(e&=~LN,e&=~o0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ri(e),r=1<<n;t[n]=-1,e&=~r}}function x2(t){if(Vt&6)throw Error(ke(327));Ed();var e=gy(t,0);if(!(e&1))return bs(t,$n()),null;var n=Oy(t,e);if(t.tag!==0&&n===2){var r=Lb(t);r!==0&&(e=r,n=d1(t,r))}if(n===1)throw n=Zm,Tc(t,0),el(t,e),bs(t,$n()),n;if(n===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gc(t,ms,Za),bs(t,$n()),null}function VN(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(Bd=$n()+500,r0&&ql())}}function Hc(t){ll!==null&&ll.tag===0&&!(Vt&6)&&Ed();var e=Vt;Vt|=1;var n=ai.transition,r=Qt;try{if(ai.transition=null,Qt=1,t)return t()}finally{Qt=r,ai.transition=n,Vt=e,!(Vt&6)&&ql()}}function $N(){Is=yd.current,vn(yd)}function Tc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wz(n)),Jn!==null)for(n=Jn.return;n!==null;){var r=n;switch(_N(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wy();break;case 3:zd(),vn(_s),vn(zr),TN();break;case 5:PN(r);break;case 4:zd();break;case 13:vn(Cn);break;case 19:vn(Cn);break;case 10:NN(r.type._context);break;case 22:case 23:$N()}n=n.return}if(xr=t,Jn=t=_l(t.current,null),Nr=Is=e,ur=0,Zm=null,LN=o0=Bc=0,ms=ym=null,bc!==null){for(e=0;e<bc.length;e++)if(n=bc[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}bc=null}return t}function TO(t,e){do{var n=Jn;try{if(jN(),Vv.current=ky,Ty){for(var r=Pn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ty=!1}if(Uc=0,vr=lr=Pn=null,gm=!1,Wm=0,DN.current=null,n===null||n.return===null){ur=1,Zm=e,Jn=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=Nr,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=a2(o);if(y!==null){y.flags&=-257,o2(y,o,l,a,e),y.mode&1&&i2(a,d,e),e=y,u=d;var j=e.updateQueue;if(j===null){var b=new Set;b.add(u),e.updateQueue=b}else j.add(u);break e}else{if(!(e&1)){i2(a,d,e),zN();break e}u=Error(ke(426))}}else if(wn&&l.mode&1){var N=a2(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),o2(N,o,l,a,e),wN(Ud(u,l));break e}}a=u=Ud(u,l),ur!==4&&(ur=2),ym===null?ym=[a]:ym.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=hO(a,u,e);JP(a,_);break e;case 1:l=u;var w=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(yl===null||!yl.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=fO(a,l,e);JP(a,R);break e}}a=a.return}while(a!==null)}IO(n)}catch(A){e=A,Jn===n&&n!==null&&(Jn=n=n.return);continue}break}while(!0)}function kO(){var t=Ry.current;return Ry.current=ky,t===null?ky:t}function zN(){(ur===0||ur===3||ur===2)&&(ur=4),xr===null||!(Bc&268435455)&&!(o0&268435455)||el(xr,Nr)}function Oy(t,e){var n=Vt;Vt|=2;var r=kO();(xr!==t||Nr!==e)&&(Za=null,Tc(t,e));do try{Wz();break}catch(s){TO(t,s)}while(!0);if(jN(),Vt=n,Ry.current=r,Jn!==null)throw Error(ke(261));return xr=null,Nr=0,ur}function Wz(){for(;Jn!==null;)RO(Jn)}function Gz(){for(;Jn!==null&&!y$();)RO(Jn)}function RO(t){var e=OO(t.alternate,t,Is);t.memoizedProps=t.pendingProps,e===null?IO(t):Jn=e,DN.current=null}function IO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$z(n,e),n!==null){n.flags&=32767,Jn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ur=6,Jn=null;return}}else if(n=Vz(n,e,Is),n!==null){Jn=n;return}if(e=e.sibling,e!==null){Jn=e;return}Jn=e=t}while(e!==null);ur===0&&(ur=5)}function gc(t,e,n){var r=Qt,s=ai.transition;try{ai.transition=null,Qt=1,Kz(t,e,n,r)}finally{ai.transition=s,Qt=r}return null}function Kz(t,e,n,r){do Ed();while(ll!==null);if(Vt&6)throw Error(ke(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(P$(t,a),t===xr&&(Jn=xr=null,Nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lv||(lv=!0,MO(py,function(){return Ed(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ai.transition,ai.transition=null;var o=Qt;Qt=1;var l=Vt;Vt|=4,DN.current=null,Uz(t,n),EO(n,t),mz(Bb),vy=!!Ub,Bb=Ub=null,t.current=n,Bz(n),x$(),Vt=l,Qt=o,ai.transition=a}else t.current=n;if(lv&&(lv=!1,ll=t,Ay=s),a=t.pendingLanes,a===0&&(yl=null),b$(n.stateNode),bs(t,$n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Iy)throw Iy=!1,t=c1,c1=null,t;return Ay&1&&t.tag!==0&&Ed(),a=t.pendingLanes,a&1?t===u1?xm++:(xm=0,u1=t):xm=0,ql(),null}function Ed(){if(ll!==null){var t=hA(Ay),e=ai.transition,n=Qt;try{if(ai.transition=null,Qt=16>t?16:t,ll===null)var r=!1;else{if(t=ll,ll=null,Ay=0,Vt&6)throw Error(ke(331));var s=Vt;for(Vt|=4,Ze=t.current;Ze!==null;){var a=Ze,o=a.child;if(Ze.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Ze=d;Ze!==null;){var f=Ze;switch(f.tag){case 0:case 11:case 15:vm(8,f,a)}var m=f.child;if(m!==null)m.return=f,Ze=m;else for(;Ze!==null;){f=Ze;var p=f.sibling,y=f.return;if(jO(f),f===d){Ze=null;break}if(p!==null){p.return=y,Ze=p;break}Ze=y}}}var j=a.alternate;if(j!==null){var b=j.child;if(b!==null){j.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}Ze=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ze=o;else e:for(;Ze!==null;){if(a=Ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vm(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Ze=_;break e}Ze=a.return}}var w=t.current;for(Ze=w;Ze!==null;){o=Ze;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ze=E;else e:for(o=w;Ze!==null;){if(l=Ze,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:a0(9,l)}}catch(A){An(l,l.return,A)}if(l===o){Ze=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Ze=R;break e}Ze=l.return}}if(Vt=s,ql(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Xx,t)}catch{}r=!0}return r}finally{Qt=n,ai.transition=e}}return!1}function _2(t,e,n){e=Ud(n,e),e=hO(t,e,1),t=vl(t,e,1),e=ts(),t!==null&&(Pp(t,1,e),bs(t,e))}function An(t,e,n){if(t.tag===3)_2(t,t,n);else for(;e!==null;){if(e.tag===3){_2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yl===null||!yl.has(r))){t=Ud(n,t),t=fO(e,t,1),e=vl(e,t,1),t=ts(),e!==null&&(Pp(e,1,t),bs(e,t));break}}e=e.return}}function Zz(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&n,xr===t&&(Nr&n)===n&&(ur===4||ur===3&&(Nr&130023424)===Nr&&500>$n()-FN?Tc(t,0):LN|=n),bs(t,e)}function AO(t,e){e===0&&(t.mode&1?(e=Xg,Xg<<=1,!(Xg&130023424)&&(Xg=4194304)):e=1);var n=ts();t=co(t,e),t!==null&&(Pp(t,e,n),bs(t,n))}function Qz(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AO(t,n)}function Yz(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),AO(t,n)}var OO;OO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_s.current)gs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gs=!1,Fz(t,e,n);gs=!!(t.flags&131072)}else gs=!1,wn&&e.flags&1048576&&FA(e,Ny,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zv(t,e),t=e.pendingProps;var s=Fd(e,zr.current);Sd(e,n),s=RN(null,e,r,t,s,n);var a=IN();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ws(r)?(a=!0,by(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,EN(e),s.updater=i0,e.stateNode=s,s._reactInternals=e,Xb(e,r,t,n),e=t1(null,e,r,!0,a,n)):(e.tag=0,wn&&a&&xN(e),Qr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zv(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Jz(r),t=Ni(r,t),s){case 0:e=e1(null,e,r,t,n);break e;case 1:e=u2(null,e,r,t,n);break e;case 11:e=l2(null,e,r,t,n);break e;case 14:e=c2(null,e,r,Ni(r.type,t),n);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ni(r,s),e1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ni(r,s),u2(t,e,r,s,n);case 3:e:{if(vO(e),t===null)throw Error(ke(387));r=e.pendingProps,a=e.memoizedState,s=a.element,HA(t,e),Cy(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Ud(Error(ke(423)),e),e=d2(t,e,r,n,s);break e}else if(r!==s){s=Ud(Error(ke(424)),e),e=d2(t,e,r,n,s);break e}else for(Ms=gl(e.stateNode.containerInfo.firstChild),Fs=e,wn=!0,Ci=null,n=UA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vd(),r===s){e=uo(t,e,n);break e}Qr(t,e,r,n)}e=e.child}return e;case 5:return qA(e),t===null&&Zb(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Hb(r,s)?o=null:a!==null&&Hb(r,a)&&(e.flags|=32),gO(t,e),Qr(t,e,o,n),e.child;case 6:return t===null&&Zb(e),null;case 13:return yO(t,e,n);case 4:return CN(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$d(e,null,r,n):Qr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ni(r,s),l2(t,e,r,s,n);case 7:return Qr(t,e,e.pendingProps,n),e.child;case 8:return Qr(t,e,e.pendingProps.children,n),e.child;case 12:return Qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,un(Sy,r._currentValue),r._currentValue=o,a!==null)if(Fi(a.value,o)){if(a.children===s.children&&!_s.current){e=uo(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=so(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Qb(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qb(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Qr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Sd(e,n),s=di(s),r=r(s),e.flags|=1,Qr(t,e,r,n),e.child;case 14:return r=e.type,s=Ni(r,e.pendingProps),s=Ni(r.type,s),c2(t,e,r,s,n);case 15:return mO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ni(r,s),zv(t,e),e.tag=1,ws(r)?(t=!0,by(e)):t=!1,Sd(e,n),dO(e,r,s),Xb(e,r,s,n),t1(null,e,r,!0,t,n);case 19:return xO(t,e,n);case 22:return pO(t,e,n)}throw Error(ke(156,e.tag))};function MO(t,e){return lA(t,e)}function Xz(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,e,n,r){return new Xz(t,e,n,r)}function UN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jz(t){if(typeof t=="function")return UN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oN)return 11;if(t===lN)return 14}return 2}function _l(t,e){var n=t.alternate;return n===null?(n=ri(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hv(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")UN(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ld:return kc(n.children,s,a,e);case aN:o=8,s|=8;break;case bb:return t=ri(12,n,e,s|2),t.elementType=bb,t.lanes=a,t;case jb:return t=ri(13,n,e,s),t.elementType=jb,t.lanes=a,t;case Nb:return t=ri(19,n,e,s),t.elementType=Nb,t.lanes=a,t;case qI:return l0(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BI:o=10;break e;case HI:o=9;break e;case oN:o=11;break e;case lN:o=14;break e;case Zo:o=16,r=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return e=ri(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function kc(t,e,n,r){return t=ri(7,t,r,e),t.lanes=n,t}function l0(t,e,n,r){return t=ri(22,t,r,e),t.elementType=qI,t.lanes=n,t.stateNode={isHidden:!1},t}function fw(t,e,n){return t=ri(6,t,null,e),t.lanes=n,t}function mw(t,e,n){return e=ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eU(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K_(0),this.expirationTimes=K_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function BN(t,e,n,r,s,a,o,l,u){return t=new eU(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ri(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},EN(a),t}function tU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:od,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function DO(t){if(!t)return Tl;t=t._reactInternals;e:{if(ou(t)!==t||t.tag!==1)throw Error(ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(t.tag===1){var n=t.type;if(ws(n))return DA(t,n,e)}return e}function LO(t,e,n,r,s,a,o,l,u){return t=BN(n,r,!0,t,s,a,o,l,u),t.context=DO(null),n=t.current,r=ts(),s=xl(n),a=so(r,s),a.callback=e??null,vl(n,a,s),t.current.lanes=s,Pp(t,s,r),bs(t,r),t}function c0(t,e,n,r){var s=e.current,a=ts(),o=xl(s);return n=DO(n),e.context===null?e.context=n:e.pendingContext=n,e=so(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vl(s,e,o),t!==null&&(Ii(t,s,o,a),Fv(t,s,o)),o}function My(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function w2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function HN(t,e){w2(t,e),(t=t.alternate)&&w2(t,e)}function nU(){return null}var FO=typeof reportError=="function"?reportError:function(t){console.error(t)};function qN(t){this._internalRoot=t}u0.prototype.render=qN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ke(409));c0(t,e,null,null)};u0.prototype.unmount=qN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hc(function(){c0(null,t,null,null)}),e[lo]=null}};function u0(t){this._internalRoot=t}u0.prototype.unstable_scheduleHydration=function(t){if(t){var e=pA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jo.length&&e!==0&&e<Jo[n].priority;n++);Jo.splice(n,0,t),n===0&&vA(t)}};function WN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b2(){}function rU(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=My(o);a.call(d)}}var o=LO(e,r,t,0,null,!1,!1,"",b2);return t._reactRootContainer=o,t[lo]=o.current,zm(t.nodeType===8?t.parentNode:t),Hc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=My(u);l.call(d)}}var u=BN(t,0,!1,null,null,!1,!1,"",b2);return t._reactRootContainer=u,t[lo]=u.current,zm(t.nodeType===8?t.parentNode:t),Hc(function(){c0(e,u,n,r)}),u}function h0(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=My(o);l.call(u)}}c0(e,o,t,s)}else o=rU(n,e,t,s,r);return My(o)}fA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xf(e.pendingLanes);n!==0&&(dN(e,n|1),bs(e,$n()),!(Vt&6)&&(Bd=$n()+500,ql()))}break;case 13:Hc(function(){var r=co(t,1);if(r!==null){var s=ts();Ii(r,t,1,s)}}),HN(t,1)}};hN=function(t){if(t.tag===13){var e=co(t,134217728);if(e!==null){var n=ts();Ii(e,t,134217728,n)}HN(t,134217728)}};mA=function(t){if(t.tag===13){var e=xl(t),n=co(t,e);if(n!==null){var r=ts();Ii(n,t,e,r)}HN(t,e)}};pA=function(){return Qt};gA=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};Ob=function(t,e,n){switch(e){case"input":if(Cb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=n0(r);if(!s)throw Error(ke(90));GI(r),Cb(r,s)}}}break;case"textarea":ZI(t,n);break;case"select":e=n.value,e!=null&&wd(t,!!n.multiple,e,!1)}};nA=VN;rA=Hc;var sU={usingClientEntryPoint:!1,Events:[kp,hd,n0,eA,tA,VN]},Lf={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iU={bundleType:Lf.bundleType,version:Lf.version,rendererPackageName:Lf.rendererPackageName,rendererConfig:Lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aA(t),t===null?null:t.stateNode},findFiberByHostInstance:Lf.findFiberByHostInstance||nU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cv.isDisabled&&cv.supportsFiber)try{Xx=cv.inject(iU),fa=cv}catch{}}qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sU;qs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WN(e))throw Error(ke(200));return tU(t,e,null,n)};qs.createRoot=function(t,e){if(!WN(t))throw Error(ke(299));var n=!1,r="",s=FO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=BN(t,1,!1,null,null,n,!1,r,s),t[lo]=e.current,zm(t.nodeType===8?t.parentNode:t),new qN(e)};qs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=aA(e),t=t===null?null:t.stateNode,t};qs.flushSync=function(t){return Hc(t)};qs.hydrate=function(t,e,n){if(!d0(e))throw Error(ke(200));return h0(null,t,e,!0,n)};qs.hydrateRoot=function(t,e,n){if(!WN(t))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=FO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LO(e,null,t,1,n??null,s,!1,a,o),t[lo]=e.current,zm(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new u0(e)};qs.render=function(t,e,n){if(!d0(e))throw Error(ke(200));return h0(null,t,e,!1,n)};qs.unmountComponentAtNode=function(t){if(!d0(t))throw Error(ke(40));return t._reactRootContainer?(Hc(function(){h0(null,null,t,!1,function(){t._reactRootContainer=null,t[lo]=null})}),!0):!1};qs.unstable_batchedUpdates=VN;qs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!d0(n))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return h0(t,e,n,!1,r)};qs.version="18.3.1-next-f1338f8080-20240426";function VO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VO)}catch(t){console.error(t)}}VO(),VI.exports=qs;var Ah=VI.exports;const aU=Pa(Ah);var $O,j2=Ah;$O=j2.createRoot,j2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qm(){return Qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qm.apply(this,arguments)}var cl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cl||(cl={}));const N2="popstate";function oU(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=lu(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),f1("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof a=="string"?a:Dy(a))}function r(s,a){GN(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return cU(e,n,r,t)}function Bn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lU(){return Math.random().toString(36).substr(2,8)}function S2(t,e){return{usr:t.state,key:t.key,idx:e}}function f1(t,e,n,r){return n===void 0&&(n=null),Qm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lu(e):e,{state:n,key:e&&e.key||r||lU()})}function Dy(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cU(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=cl.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Qm({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=cl.Pop;let N=f(),_=N==null?null:N-d;d=N,u&&u({action:l,location:b.location,delta:_})}function p(N,_){l=cl.Push;let w=f1(b.location,N,_);n&&n(w,N),d=f()+1;let E=S2(w,d),R=b.createHref(w);try{o.pushState(E,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(R)}a&&u&&u({action:l,location:b.location,delta:1})}function y(N,_){l=cl.Replace;let w=f1(b.location,N,_);n&&n(w,N),d=f();let E=S2(w,d),R=b.createHref(w);o.replaceState(E,"",R),a&&u&&u({action:l,location:b.location,delta:0})}function j(N){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof N=="string"?N:Dy(N);return w=w.replace(/ $/,"%20"),Bn(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let b={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(N2,m),u=N,()=>{s.removeEventListener(N2,m),u=null}},createHref(N){return e(s,N)},createURL:j,encodeLocation(N){let _=j(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(N){return o.go(N)}};return b}var E2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E2||(E2={}));function uU(t,e,n){return n===void 0&&(n="/"),dU(t,e,n)}function dU(t,e,n,r){let s=typeof e=="string"?lu(e):e,a=KN(s.pathname||"/",n);if(a==null)return null;let o=zO(t);hU(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=NU(a);l=wU(o[u],d)}return l}function zO(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Bn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=wl([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Bn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zO(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:xU(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of UO(a.path))s(a,o,u)}),e}function UO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=UO(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function hU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_U(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fU=/^:[\w-]+$/,mU=3,pU=2,gU=1,vU=10,yU=-2,C2=t=>t==="*";function xU(t,e){let n=t.split("/"),r=n.length;return n.some(C2)&&(r+=yU),e&&(r+=pU),n.filter(s=>!C2(s)).reduce((s,a)=>s+(fU.test(a)?mU:a===""?gU:vU),r)}function _U(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function wU(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=bU({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:wl([a,m.pathname]),pathnameBase:PU(wl([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=wl([a,m.pathnameBase]))}return o}function bU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jU(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:p,isOptional:y}=f;if(p==="*"){let b=l[m]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const j=l[m];return y&&!j?d[p]=void 0:d[p]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function jU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function KN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?lu(t):t;return{pathname:n?n.startsWith("/")?n:EU(n,e):e,search:TU(r),hash:kU(s)}}function EU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ZN(t,e){let n=CU(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function QN(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=lu(t):(s=Qm({},t),Bn(!s.pathname||!s.pathname.includes("?"),pw("?","pathname","search",s)),Bn(!s.pathname||!s.pathname.includes("#"),pw("#","pathname","hash",s)),Bn(!s.search||!s.search.includes("#"),pw("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=SU(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const wl=t=>t.join("/").replace(/\/\/+/g,"/"),PU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const BO=["post","put","patch","delete"];new Set(BO);const IU=["get",...BO];new Set(IU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ym.apply(this,arguments)}const YN=x.createContext(null),AU=x.createContext(null),Wl=x.createContext(null),f0=x.createContext(null),Eo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),HO=x.createContext(null);function OU(t,e){let{relative:n}=e===void 0?{}:e;Oh()||Bn(!1);let{basename:r,navigator:s}=x.useContext(Wl),{hash:a,pathname:o,search:l}=WO(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:wl([r,o])),s.createHref({pathname:u,search:l,hash:a})}function Oh(){return x.useContext(f0)!=null}function Co(){return Oh()||Bn(!1),x.useContext(f0).location}function qO(t){x.useContext(Wl).static||x.useLayoutEffect(t)}function fr(){let{isDataRoute:t}=x.useContext(Eo);return t?GU():MU()}function MU(){Oh()||Bn(!1);let t=x.useContext(YN),{basename:e,future:n,navigator:r}=x.useContext(Wl),{matches:s}=x.useContext(Eo),{pathname:a}=Co(),o=JSON.stringify(ZN(s,n.v7_relativeSplatPath)),l=x.useRef(!1);return qO(()=>{l.current=!0}),x.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=QN(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:wl([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,a,t])}function XN(){let{matches:t}=x.useContext(Eo),e=t[t.length-1];return e?e.params:{}}function WO(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Wl),{matches:s}=x.useContext(Eo),{pathname:a}=Co(),o=JSON.stringify(ZN(s,r.v7_relativeSplatPath));return x.useMemo(()=>QN(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function DU(t,e){return LU(t,e)}function LU(t,e,n,r){Oh()||Bn(!1);let{navigator:s}=x.useContext(Wl),{matches:a}=x.useContext(Eo),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Co(),f;if(e){var m;let N=typeof e=="string"?lu(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||Bn(!1),f=N}else f=d;let p=f.pathname||"/",y=p;if(u!=="/"){let N=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=uU(t,{pathname:y}),b=UU(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:wl([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:wl([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&b?x.createElement(f0.Provider,{value:{location:Ym({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:cl.Pop}},b):b}function FU(){let t=WU(),e=RU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const VU=x.createElement(FU,null);class $U extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Eo.Provider,{value:this.props.routeContext},x.createElement(HO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zU(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(YN);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Eo.Provider,{value:e},r)}function UU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Bn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:p,errors:y}=n,j=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||j){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,p)=>{let y,j=!1,b=null,N=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||VU,u&&(d<0&&p===0?(KU("route-fallback"),j=!0,N=null):d===p&&(j=!0,N=m.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),w=()=>{let E;return y?E=b:j?E=N:m.route.Component?E=x.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=f,x.createElement(zU,{match:m,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:E})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?x.createElement($U,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var GO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GO||{}),KO=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KO||{});function BU(t){let e=x.useContext(YN);return e||Bn(!1),e}function HU(t){let e=x.useContext(AU);return e||Bn(!1),e}function qU(t){let e=x.useContext(Eo);return e||Bn(!1),e}function ZO(t){let e=qU(),n=e.matches[e.matches.length-1];return n.route.id||Bn(!1),n.route.id}function WU(){var t;let e=x.useContext(HO),n=HU(),r=ZO();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function GU(){let{router:t}=BU(GO.UseNavigateStable),e=ZO(KO.UseNavigateStable),n=x.useRef(!1);return qO(()=>{n.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ym({fromRouteId:e},a)))},[t,e])}const P2={};function KU(t,e,n){P2[t]||(P2[t]=!0)}function ZU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function QU(t){let{to:e,replace:n,state:r,relative:s}=t;Oh()||Bn(!1);let{future:a,static:o}=x.useContext(Wl),{matches:l}=x.useContext(Eo),{pathname:u}=Co(),d=fr(),f=QN(e,ZN(l,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return x.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function mn(t){Bn(!1)}function YU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=cl.Pop,navigator:a,static:o=!1,future:l}=t;Oh()&&Bn(!1);let u=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:u,navigator:a,static:o,future:Ym({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=lu(r));let{pathname:f="/",search:m="",hash:p="",state:y=null,key:j="default"}=r,b=x.useMemo(()=>{let N=KN(f,u);return N==null?null:{location:{pathname:N,search:m,hash:p,state:y,key:j},navigationType:s}},[u,f,m,p,y,j,s]);return b==null?null:x.createElement(Wl.Provider,{value:d},x.createElement(f0.Provider,{children:n,value:b}))}function XU(t){let{children:e,location:n}=t;return DU(m1(e),n)}new Promise(()=>{});function m1(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let a=[...e,s];if(r.type===x.Fragment){n.push.apply(n,m1(r.props.children,a));return}r.type!==mn&&Bn(!1),!r.props.index||!r.props.children||Bn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=m1(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p1(){return p1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p1.apply(this,arguments)}function JU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function eB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tB(t,e){return t.button===0&&(!e||e==="_self")&&!eB(t)}function g1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function nB(t,e){let n=g1(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const rB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sB="6";try{window.__reactRouterVersion=sB}catch{}const iB="startTransition",T2=nN[iB];function aB(t){let{basename:e,children:n,future:r,window:s}=t,a=x.useRef();a.current==null&&(a.current=oU({window:s,v5Compat:!0}));let o=a.current,[l,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=x.useCallback(m=>{d&&T2?T2(()=>u(m)):u(m)},[u,d]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>ZU(r),[r]),x.createElement(YU,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const oB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,p=JU(e,rB),{basename:y}=x.useContext(Wl),j,b=!1;if(typeof d=="string"&&lB.test(d)&&(j=d,oB))try{let E=new URL(window.location.href),R=d.startsWith("//")?new URL(E.protocol+d):new URL(d),A=KN(R.pathname,y);R.origin===E.origin&&A!=null?d=A+R.search+R.hash:b=!0}catch{}let N=OU(d,{relative:s}),_=cB(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function w(E){r&&r(E),E.defaultPrevented||_(E)}return x.createElement("a",p1({},p,{href:j||N,onClick:b||a?r:w,ref:n,target:u}))});var k2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(k2||(k2={}));var R2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R2||(R2={}));function cB(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=fr(),d=Co(),f=WO(t,{relative:o});return x.useCallback(m=>{if(tB(m,n)){m.preventDefault();let p=r!==void 0?r:Dy(d)===Dy(f);u(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,a,o,l])}function QO(t){let e=x.useRef(g1(t)),n=x.useRef(!1),r=Co(),s=x.useMemo(()=>nB(r.search,n.current?null:e.current),[r.search]),a=fr(),o=x.useCallback((l,u)=>{const d=g1(typeof l=="function"?l(s):l);n.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var Ly=["light","dark"],JN="(prefers-color-scheme: dark)",uB=typeof window>"u",eS=x.createContext(void 0),dB={setTheme:t=>{},themes:[]},hB=()=>{var t;return(t=x.useContext(eS))!=null?t:dB},fB=t=>x.useContext(eS)?t.children:x.createElement(pB,{...t}),mB=["light","dark"],pB=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:a=mB,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:u,children:d,nonce:f})=>{let[m,p]=x.useState(()=>I2(s,o)),[y,j]=x.useState(()=>I2(s)),b=u?Object.values(u):a,N=x.useCallback(R=>{let A=R;if(!A)return;R==="system"&&n&&(A=A2());let B=u?u[A]:A,I=e?vB():null,F=document.documentElement;if(l==="class"?(F.classList.remove(...b),B&&F.classList.add(B)):B?F.setAttribute(l,B):F.removeAttribute(l),r){let $=Ly.includes(o)?o:null,P=Ly.includes(A)?A:$;F.style.colorScheme=P}I==null||I()},[]),_=x.useCallback(R=>{let A=typeof R=="function"?R(R):R;p(A);try{localStorage.setItem(s,A)}catch{}},[t]),w=x.useCallback(R=>{let A=A2(R);j(A),m==="system"&&n&&!t&&N("system")},[m,t]);x.useEffect(()=>{let R=window.matchMedia(JN);return R.addListener(w),w(R),()=>R.removeListener(w)},[w]),x.useEffect(()=>{let R=A=>{if(A.key!==s)return;let B=A.newValue||o;_(B)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[_]),x.useEffect(()=>{N(t??m)},[t,m]);let E=x.useMemo(()=>({theme:m,setTheme:_,forcedTheme:t,resolvedTheme:m==="system"?y:m,themes:n?[...a,"system"]:a,systemTheme:n?y:void 0}),[m,_,t,y,n,a]);return x.createElement(eS.Provider,{value:E},x.createElement(gB,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:a,defaultTheme:o,attribute:l,value:u,children:d,attrs:b,nonce:f}),d)},gB=x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:u})=>{let d=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(j=>`'${j}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=s?Ly.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(j,b=!1,N=!0)=>{let _=o?o[j]:j,w=b?j+"|| ''":`'${_}'`,E="";return s&&N&&!b&&Ly.includes(j)&&(E+=`d.style.colorScheme = '${j}';`),n==="class"?b||_?E+=`c.add(${w})`:E+="null":_&&(E+=`d[s](n,${w})`),E},y=t?`!function(){${f}${p(t)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${JN}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${m}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:y}})}),I2=(t,e)=>{if(uB)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},vB=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},A2=t=>(t||(t=window.matchMedia(JN)),t.matches?"dark":"light");let yB={data:""},xB=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||yB,_B=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wB=/\/\*[^]*?\*\/|  +/g,O2=/\n+/g,tl=(t,e)=>{let n="",r="",s="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?tl(o,a):a+"{"+tl(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=tl(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=tl.p?tl.p(a,o):a+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},qa={},YO=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+YO(t[n]);return e}return t},bB=(t,e,n,r,s)=>{let a=YO(t),o=qa[a]||(qa[a]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(a));if(!qa[o]){let u=a!==t?t:(d=>{let f,m,p=[{}];for(;f=_B.exec(d.replace(wB,""));)f[4]?p.shift():f[3]?(m=f[3].replace(O2," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][f[1]]=f[2].replace(O2," ").trim();return p[0]})(t);qa[o]=tl(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&qa.g?qa.g:null;return n&&(qa.g=qa[o]),((u,d,f,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(qa[o],e,r,l),o},jB=(t,e,n)=>t.reduce((r,s,a)=>{let o=e[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":tl(l,""):l===!1?"":l}return r+s+(o??"")},"");function m0(t){let e=this||{},n=t.call?t(e.p):t;return bB(n.unshift?n.raw?jB(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,xB(e.target),e.g,e.o,e.k)}let XO,v1,y1;m0.bind({g:1});let ho=m0.bind({k:1});function NB(t,e,n,r){tl.p=e,XO=t,v1=n,y1=r}function Gl(t,e){let n=this||{};return function(){let r=arguments;function s(a,o){let l=Object.assign({},a),u=l.className||s.className;n.p=Object.assign({theme:v1&&v1()},l),n.o=/ *go\d+/.test(u),l.className=m0.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),y1&&d[0]&&y1(l),XO(d,l)}return s}}var SB=t=>typeof t=="function",Fy=(t,e)=>SB(t)?t(e):t,EB=(()=>{let t=0;return()=>(++t).toString()})(),JO=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),CB=20,e4=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,CB)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return e4(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},qv=[],Nc={toasts:[],pausedAt:void 0},cu=t=>{Nc=e4(Nc,t),qv.forEach(e=>{e(Nc)})},PB={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},TB=(t={})=>{let[e,n]=x.useState(Nc),r=x.useRef(Nc);x.useEffect(()=>(r.current!==Nc&&n(Nc),qv.push(n),()=>{let a=qv.indexOf(n);a>-1&&qv.splice(a,1)}),[]);let s=e.toasts.map(a=>{var o,l,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||PB[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:s}},kB=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||EB()}),Ip=t=>(e,n)=>{let r=kB(e,t,n);return cu({type:2,toast:r}),r.id},cr=(t,e)=>Ip("blank")(t,e);cr.error=Ip("error");cr.success=Ip("success");cr.loading=Ip("loading");cr.custom=Ip("custom");cr.dismiss=t=>{cu({type:3,toastId:t})};cr.remove=t=>cu({type:4,toastId:t});cr.promise=(t,e,n)=>{let r=cr.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Fy(e.success,s):void 0;return a?cr.success(a,{id:r,...n,...n==null?void 0:n.success}):cr.dismiss(r),s}).catch(s=>{let a=e.error?Fy(e.error,s):void 0;a?cr.error(a,{id:r,...n,...n==null?void 0:n.error}):cr.dismiss(r)}),t};var RB=(t,e)=>{cu({type:1,toast:{id:t,height:e}})},IB=()=>{cu({type:5,time:Date.now()})},_m=new Map,AB=1e3,OB=(t,e=AB)=>{if(_m.has(t))return;let n=setTimeout(()=>{_m.delete(t),cu({type:4,toastId:t})},e);_m.set(t,n)},MB=t=>{let{toasts:e,pausedAt:n}=TB(t);x.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(u<0){l.visible&&cr.dismiss(l.id);return}return setTimeout(()=>cr.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=x.useCallback(()=>{n&&cu({type:6,time:Date.now()})},[n]),s=x.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:d}=o||{},f=e.filter(y=>(y.position||d)===(a.position||d)&&y.height),m=f.findIndex(y=>y.id===a.id),p=f.filter((y,j)=>j<m&&y.visible).length;return f.filter(y=>y.visible).slice(...l?[p+1]:[0,p]).reduce((y,j)=>y+(j.height||0)+u,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)OB(a.id,a.removeDelay);else{let o=_m.get(a.id);o&&(clearTimeout(o),_m.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:RB,startPause:IB,endPause:r,calculateOffset:s}}},DB=ho`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,LB=ho`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FB=ho`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,VB=Gl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${LB} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FB} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$B=ho`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zB=Gl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${$B} 1s linear infinite;
`,UB=ho`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BB=ho`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,HB=Gl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BB} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qB=Gl("div")`
  position: absolute;
`,WB=Gl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GB=ho`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KB=Gl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZB=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(KB,null,e):e:n==="blank"?null:x.createElement(WB,null,x.createElement(zB,{...r}),n!=="loading"&&x.createElement(qB,null,n==="error"?x.createElement(VB,{...r}):x.createElement(HB,{...r})))},QB=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,YB=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,XB="0%{opacity:0;} 100%{opacity:1;}",JB="0%{opacity:1;} 100%{opacity:0;}",e7=Gl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,t7=Gl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,n7=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=JO()?[XB,JB]:[QB(n),YB(n)];return{animation:e?`${ho(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ho(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},r7=x.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?n7(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(ZB,{toast:t}),o=x.createElement(t7,{...t.ariaProps},Fy(t.message,t));return x.createElement(e7,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):x.createElement(x.Fragment,null,a,o))});NB(x.createElement);var s7=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let a=x.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},s)},i7=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:JO()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},a7=m0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,uv=16,o7=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:u}=MB(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:uv,left:uv,right:uv,bottom:uv,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let f=d.position||e,m=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),p=i7(f,m);return x.createElement(s7,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?a7:"",style:p},d.type==="custom"?Fy(d.message,d):s?s(d):x.createElement(r7,{toast:d,position:f}))}))},be=cr,M2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},l7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},n4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;u||(y=64,o||(p=64)),r.push(n[f],n[m],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||m==null)throw new c7;const p=a<<2|l>>4;if(r.push(p),d!==64){const y=l<<4&240|d>>2;if(r.push(y),m!==64){const j=d<<6&192|m;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u7=function(t){const e=t4(t);return n4.encodeByteArray(e,!0)},Vy=function(t){return u7(t).replace(/\./g,"")},r4=function(t){try{return n4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=()=>d7().__FIREBASE_DEFAULTS__,f7=()=>{if(typeof process>"u"||typeof M2>"u")return;const t=M2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&r4(t[1]);return e&&JSON.parse(e)},p0=()=>{try{return h7()||f7()||m7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s4=t=>{var e,n;return(n=(e=p0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},i4=t=>{const e=s4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a4=()=>{var t;return(t=p0())===null||t===void 0?void 0:t.config},o4=t=>{var e;return(e=p0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vy(JSON.stringify(n)),Vy(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function v7(){var t;const e=(t=p0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w7(){const t=Ur();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b7(){return!v7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j7(){try{return typeof indexedDB=="object"}catch{return!1}}function N7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7="FirebaseError";class Ta extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S7,Object.setPrototypeOf(this,Ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ap.prototype.create)}}class Ap{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?E7(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ta(s,l,r)}}function E7(t,e){return t.replace(C7,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C7=/\{\$([^}]+)}/g;function P7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $y(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(D2(a)&&D2(o)){if(!$y(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function D2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function em(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function tm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T7(t,e){const n=new k7(t,e);return n.subscribe.bind(n)}class k7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");R7(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gw),s.error===void 0&&(s.error=gw),s.complete===void 0&&(s.complete=gw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class kl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new p7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O7(e))try{this.getOrInitializeService({instanceIdentifier:vc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=vc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vc){return this.instances.has(e)}getOptions(e=vc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vc){return this.component?this.component.multipleInstances?e:vc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A7(t){return t===vc?void 0:t}function O7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new I7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dt||(Dt={}));const D7={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},L7=Dt.INFO,F7={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},V7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=F7[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tS{constructor(e){this.name=e,this._logLevel=L7,this._logHandler=V7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const $7=(t,e)=>e.some(n=>t instanceof n);let L2,F2;function z7(){return L2||(L2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U7(){return F2||(F2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c4=new WeakMap,x1=new WeakMap,u4=new WeakMap,vw=new WeakMap,nS=new WeakMap;function B7(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(bl(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&c4.set(n,t)}).catch(()=>{}),nS.set(e,t),e}function H7(t){if(x1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});x1.set(t,e)}let _1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q7(t){_1=t(_1)}function W7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yw(this),e,...n);return u4.set(r,e.sort?e.sort():[e]),bl(r)}:U7().includes(t)?function(...e){return t.apply(yw(this),e),bl(c4.get(this))}:function(...e){return bl(t.apply(yw(this),e))}}function G7(t){return typeof t=="function"?W7(t):(t instanceof IDBTransaction&&H7(t),$7(t,z7())?new Proxy(t,_1):t)}function bl(t){if(t instanceof IDBRequest)return B7(t);if(vw.has(t))return vw.get(t);const e=G7(t);return e!==t&&(vw.set(t,e),nS.set(e,t)),e}const yw=t=>nS.get(t);function K7(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=bl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(bl(o.result),u.oldVersion,u.newVersion,bl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Z7=["get","getKey","getAll","getAllKeys","count"],Q7=["put","add","delete","clear"],xw=new Map;function V2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xw.get(e))return xw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Q7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z7.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return xw.set(e,a),a}q7(t=>({...t,get:(e,n,r)=>V2(e,n)||t.get(e,n,r),has:(e,n)=>!!V2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function X7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const w1="@firebase/app",$2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new tS("@firebase/app"),J7="@firebase/app-compat",eH="@firebase/analytics-compat",tH="@firebase/analytics",nH="@firebase/app-check-compat",rH="@firebase/app-check",sH="@firebase/auth",iH="@firebase/auth-compat",aH="@firebase/database",oH="@firebase/data-connect",lH="@firebase/database-compat",cH="@firebase/functions",uH="@firebase/functions-compat",dH="@firebase/installations",hH="@firebase/installations-compat",fH="@firebase/messaging",mH="@firebase/messaging-compat",pH="@firebase/performance",gH="@firebase/performance-compat",vH="@firebase/remote-config",yH="@firebase/remote-config-compat",xH="@firebase/storage",_H="@firebase/storage-compat",wH="@firebase/firestore",bH="@firebase/vertexai-preview",jH="@firebase/firestore-compat",NH="firebase",SH="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="[DEFAULT]",EH={[w1]:"fire-core",[J7]:"fire-core-compat",[tH]:"fire-analytics",[eH]:"fire-analytics-compat",[rH]:"fire-app-check",[nH]:"fire-app-check-compat",[sH]:"fire-auth",[iH]:"fire-auth-compat",[aH]:"fire-rtdb",[oH]:"fire-data-connect",[lH]:"fire-rtdb-compat",[cH]:"fire-fn",[uH]:"fire-fn-compat",[dH]:"fire-iid",[hH]:"fire-iid-compat",[fH]:"fire-fcm",[mH]:"fire-fcm-compat",[pH]:"fire-perf",[gH]:"fire-perf-compat",[vH]:"fire-rc",[yH]:"fire-rc-compat",[xH]:"fire-gcs",[_H]:"fire-gcs-compat",[wH]:"fire-fst",[jH]:"fire-fst-compat",[bH]:"fire-vertex","fire-js":"fire-js",[NH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Map,CH=new Map,j1=new Map;function z2(t,e){try{t.container.addComponent(e)}catch(n){fo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qc(t){const e=t.name;if(j1.has(e))return fo.debug(`There were multiple attempts to register component ${e}.`),!1;j1.set(e,t);for(const n of zy.values())z2(n,t);for(const n of CH.values())z2(n,t);return!0}function g0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function si(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jl=new Ap("app","Firebase",PH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=SH;function d4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:b1,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw jl.create("bad-app-name",{appName:String(s)});if(n||(n=a4()),!n)throw jl.create("no-options");const a=zy.get(s);if(a){if($y(n,a.options)&&$y(r,a.config))return a;throw jl.create("duplicate-app",{appName:s})}const o=new M7(s);for(const u of j1.values())o.addComponent(u);const l=new TH(n,r,o);return zy.set(s,l),l}function rS(t=b1){const e=zy.get(t);if(!e&&t===b1&&a4())return d4();if(!e)throw jl.create("no-app",{appName:t});return e}function pa(t,e,n){var r;let s=(r=EH[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fo.warn(l.join(" "));return}qc(new kl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="firebase-heartbeat-database",RH=1,Xm="firebase-heartbeat-store";let _w=null;function h4(){return _w||(_w=K7(kH,RH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xm)}catch(n){console.warn(n)}}}}).catch(t=>{throw jl.create("idb-open",{originalErrorMessage:t.message})})),_w}async function IH(t){try{const n=(await h4()).transaction(Xm),r=await n.objectStore(Xm).get(f4(t));return await n.done,r}catch(e){if(e instanceof Ta)fo.warn(e.message);else{const n=jl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fo.warn(n.message)}}}async function U2(t,e){try{const r=(await h4()).transaction(Xm,"readwrite");await r.objectStore(Xm).put(e,f4(t)),await r.done}catch(n){if(n instanceof Ta)fo.warn(n.message);else{const r=jl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fo.warn(r.message)}}}function f4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=1024,OH=30*24*60*60*1e3;class MH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=OH}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B2(),{heartbeatsToSend:r,unsentEntries:s}=DH(this._heartbeatsCache.heartbeats),a=Vy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return fo.warn(n),""}}}function B2(){return new Date().toISOString().substring(0,10)}function DH(t,e=AH){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),H2(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),H2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j7()?N7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return U2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return U2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function H2(t){return Vy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(t){qc(new kl("platform-logger",e=>new Y7(e),"PRIVATE")),qc(new kl("heartbeat",e=>new MH(e),"PRIVATE")),pa(w1,$2,t),pa(w1,$2,"esm2017"),pa("fire-js","")}FH("");var ia=function(){return ia=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ia.apply(this,arguments)};function Mp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function VH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function m4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $H=m4,p4=new Ap("auth","Firebase",m4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new tS("@firebase/auth");function zH(t,...e){Uy.logLevel<=Dt.WARN&&Uy.warn(`Auth (${uu}): ${t}`,...e)}function Wv(t,...e){Uy.logLevel<=Dt.ERROR&&Uy.error(`Auth (${uu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,...e){throw iS(t,...e)}function ga(t,...e){return iS(t,...e)}function sS(t,e,n){const r=Object.assign(Object.assign({},$H()),{[e]:n});return new Ap("auth","Firebase",r).create(e,{appName:t.name})}function Ai(t){return sS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UH(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fi(t,"argument-error"),sS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return p4.create(t,...e)}function ct(t,e,...n){if(!t)throw iS(e,...n)}function to(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wv(e),new Error(e)}function mo(t,e){t||to(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BH(){return q2()==="http:"||q2()==="https:"}function q2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BH()||x7()||"connection"in navigator)?navigator.onLine:!0}function qH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.shortDelay=e,this.longDelay=n,mo(n>e,"Short delay should be less than long delay!"),this.isMobile=g7()||_7()}get(){return HH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t,e){mo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;to("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;to("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;to("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH=new Dp(3e4,6e4);function Po(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hi(t,e,n,r,s={}){return v4(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Op(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return y7()||(d.referrerPolicy="no-referrer"),g4.fetch()(y4(t,t.config.apiHost,n,l),d)})}async function v4(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WH),e);try{const s=new ZH(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw dv(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw dv(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw dv(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw dv(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw sS(t,f,d);fi(t,f)}}catch(s){if(s instanceof Ta)throw s;fi(t,"network-request-failed",{message:String(s)})}}async function Lp(t,e,n,r,s={}){const a=await Hi(t,e,n,r,s);return"mfaPendingCredential"in a&&fi(t,"multi-factor-auth-required",{_serverResponse:a}),a}function y4(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?aS(t.config,s):`${t.config.apiScheme}://${s}`}function KH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ga(this.auth,"network-request-failed")),GH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ga(t,e,r);return s.customData._tokenResponse=n,s}function W2(t){return t!==void 0&&t.enterprise!==void 0}class QH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function YH(t,e){return Hi(t,"GET","/v2/recaptchaConfig",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(t,e){return Hi(t,"POST","/v1/accounts:delete",e)}async function x4(t,e){return Hi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JH(t,e=!1){const n=qt(t),r=await n.getIdToken(e),s=oS(r);ct(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:wm(ww(s.auth_time)),issuedAtTime:wm(ww(s.iat)),expirationTime:wm(ww(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ww(t){return Number(t)*1e3}function oS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wv("JWT malformed, contained fewer than 3 sections"),null;try{const s=r4(n);return s?JSON.parse(s):(Wv("Failed to decode base64 JWT payload"),null)}catch(s){return Wv("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function G2(t){const e=oS(t);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ta&&eq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wm(this.lastLoginAt),this.creationTime=wm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wc(t,x4(n,{idToken:r}));ct(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?_4(a.providerUserInfo):[],l=nq(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new S1(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function nm(t){const e=qt(t);await By(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _4(t){return t.map(e=>{var{providerId:n}=e,r=Mp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rq(t,e){const n=await v4(t,{},async()=>{const r=Op({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=y4(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",g4.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sq(t,e){return Hi(t,"POST","/v2/accounts:revokeToken",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const n=G2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await rq(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Cd;return r&&(ct(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ct(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(ct(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cd,this.toJSON())}_performRefresh(){return to("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t,e){ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class no{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Mp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new S1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JH(this,e)}reload(){return nm(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new no(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await By(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await Wc(this,XH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,j=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:R,isAnonymous:A,providerData:B,stsTokenManager:I}=n;ct(E&&I,e,"internal-error");const F=Cd.fromJSON(this.name,I);ct(typeof E=="string",e,"internal-error"),zo(m,e.name),zo(p,e.name),ct(typeof R=="boolean",e,"internal-error"),ct(typeof A=="boolean",e,"internal-error"),zo(y,e.name),zo(j,e.name),zo(b,e.name),zo(N,e.name),zo(_,e.name),zo(w,e.name);const $=new no({uid:E,auth:e,email:p,emailVerified:R,displayName:m,isAnonymous:A,photoURL:j,phoneNumber:y,tenantId:b,stsTokenManager:F,createdAt:_,lastLoginAt:w});return B&&Array.isArray(B)&&($.providerData=B.map(P=>Object.assign({},P))),N&&($._redirectEventId=N),$}static async _fromIdTokenResponse(e,n,r=!1){const s=new Cd;s.updateFromServerResponse(n);const a=new no({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await By(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ct(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?_4(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Cd;l.updateFromIdToken(r);const u=new no({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new S1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Map;function ro(t){mo(t instanceof Function,"Expected a class definition");let e=K2.get(t);return e?(mo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,K2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w4.type="NONE";const Z2=w4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){return`firebase:${t}:${e}:${n}`}class Pd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Gv(this.userKey,s.apiKey,a),this.fullPersistenceKey=Gv("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?no._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pd(ro(Z2),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||ro(Z2);const o=Gv(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const m=no._fromJSON(e,f);d!==a&&(l=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Pd(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Pd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C4(e))return"Blackberry";if(P4(e))return"Webos";if(j4(e))return"Safari";if((e.includes("chrome/")||N4(e))&&!e.includes("edge/"))return"Chrome";if(E4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b4(t=Ur()){return/firefox\//i.test(t)}function j4(t=Ur()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N4(t=Ur()){return/crios\//i.test(t)}function S4(t=Ur()){return/iemobile/i.test(t)}function E4(t=Ur()){return/android/i.test(t)}function C4(t=Ur()){return/blackberry/i.test(t)}function P4(t=Ur()){return/webos/i.test(t)}function lS(t=Ur()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iq(t=Ur()){var e;return lS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aq(){return w7()&&document.documentMode===10}function T4(t=Ur()){return lS(t)||E4(t)||P4(t)||C4(t)||/windows phone/i.test(t)||S4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t,e=[]){let n;switch(t){case"Browser":n=Q2(Ur());break;case"Worker":n=`${Q2(Ur())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lq(t,e={}){return Hi(t,"GET","/v2/passwordPolicy",Po(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq=6;class uq{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y2(this),this.idTokenSubscription=new Y2(this),this.beforeStateQueue=new oq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ro(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await x4(this,{idToken:e}),r=await no._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(si(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await By(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(Ai(this));const n=e?qt(e):null;return n&&ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lq(this),n=new uq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ap("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ro(e)||this._popupRedirectResolver;ct(n,this,"argument-error"),this.redirectPersistenceManager=await Pd.create(this,[ro(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zH(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function To(t){return qt(t)}class Y2{constructor(e){this.auth=e,this.observer=null,this.addObserver=T7(n=>this.observer=n)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hq(t){v0=t}function R4(t){return v0.loadJS(t)}function fq(){return v0.recaptchaEnterpriseScript}function mq(){return v0.gapiScript}function pq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const gq="recaptcha-enterprise",vq="NO_RECAPTCHA";class yq{constructor(e){this.type=gq,this.auth=To(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{YH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new QH(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;W2(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(vq)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&W2(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fq();u.length!==0&&(u+=l),R4(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function X2(t,e,n,r=!1){const s=new yq(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function E1(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await X2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t,e){const n=g0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if($y(a,e??{}))return s;fi(s,"already-initialized")}return n.initialize({options:e})}function _q(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ro);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wq(t,e,n){const r=To(t);ct(r._canInitEmulator,r,"emulator-config-failed"),ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=I4(e),{host:o,port:l}=bq(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),jq()}function I4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bq(t){const e=I4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:J2(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:J2(o)}}}function J2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return to("not implemented")}_getIdTokenResponse(e){return to("not implemented")}_linkToIdToken(e,n){return to("not implemented")}_getReauthenticationResolver(e){return to("not implemented")}}async function Nq(t,e){return Hi(t,"POST","/v1/accounts:update",e)}async function Sq(t,e){return Hi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e){return Lp(t,"POST","/v1/accounts:signInWithPassword",Po(t,e))}async function Cq(t,e){return Hi(t,"POST","/v1/accounts:sendOobCode",Po(t,e))}async function Pq(t,e){return Cq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(t,e){return Lp(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,e))}async function kq(t,e){return Lp(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends cS{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Jm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(e,n,"signInWithPassword",Eq);case"emailLink":return Tq(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E1(e,r,"signUpPassword",Sq);case"emailLink":return kq(e,{idToken:n,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t,e){return Lp(t,"POST","/v1/accounts:signInWithIdp",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq="http://localhost";class Gc extends cS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Mp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Gc(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Td(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Td(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Td(e,n)}buildRequest(){const e={requestUri:Rq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Op(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aq(t){const e=em(tm(t)).link,n=e?em(tm(e)).deep_link_id:null,r=em(tm(t)).deep_link_id;return(r?em(tm(r)).link:null)||r||n||e||t}class uS{constructor(e){var n,r,s,a,o,l;const u=em(tm(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Iq((s=u.mode)!==null&&s!==void 0?s:null);ct(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Aq(e);try{return new uS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,n){return Jm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uS.parseLink(n);return ct(r,"argument-error"),Jm._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends dS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends Fp{constructor(){super("facebook.com")}static credential(e){return Gc._fromParams({providerId:nl.PROVIDER_ID,signInMethod:nl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nl.credentialFromTaggedObject(e)}static credentialFromError(e){return nl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nl.credential(e.oauthAccessToken)}catch{return null}}}nl.FACEBOOK_SIGN_IN_METHOD="facebook.com";nl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Fp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gc._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xa.credential(n,r)}catch{return null}}}Xa.GOOGLE_SIGN_IN_METHOD="google.com";Xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Fp{constructor(){super("github.com")}static credential(e){return Gc._fromParams({providerId:rl.PROVIDER_ID,signInMethod:rl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rl.credentialFromTaggedObject(e)}static credentialFromError(e){return rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rl.credential(e.oauthAccessToken)}catch{return null}}}rl.GITHUB_SIGN_IN_METHOD="github.com";rl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Fp{constructor(){super("twitter.com")}static credential(e,n){return Gc._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sl.credential(n,r)}catch{return null}}}sl.TWITTER_SIGN_IN_METHOD="twitter.com";sl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oq(t,e){return Lp(t,"POST","/v1/accounts:signUp",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await no._fromIdTokenResponse(e,r,s),o=eT(r);return new Kc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=eT(r);return new Kc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function eT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends Ta{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hy.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hy(e,n,r,s)}}function A4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hy._fromErrorAndOperation(t,a,e,r):a})}async function Mq(t,e,n=!1){const r=await Wc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e,n=!1){const{auth:r}=t;if(si(r.app))return Promise.reject(Ai(r));const s="reauthenticate";try{const a=await Wc(t,A4(r,s,e,t),n);ct(a.idToken,r,"internal-error");const o=oS(a.idToken);ct(o,r,"internal-error");const{sub:l}=o;return ct(t.uid===l,r,"user-mismatch"),Kc._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(t,e,n=!1){if(si(t.app))return Promise.reject(Ai(t));const r="signIn",s=await A4(t,r,e),a=await Kc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Dq(t,e){return M4(To(t),e)}async function tT(t,e){return O4(qt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t,e,n){var r;ct(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ct(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ct(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ct(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t){const e=To(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L4(t,e,n){if(si(t.app))return Promise.reject(Ai(t));const r=To(t),o=await E1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oq).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&D4(t),u}),l=await Kc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Fq(t,e,n){return si(t.app)?Promise.reject(Ai(t)):Dq(qt(t),Rl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D4(t),r})}async function bw(t,e){const n=qt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Lq(n.auth,s,e);const{email:a}=await Pq(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vq(t,e){return Hi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Wc(r,Vq(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function $q(t,e){const n=qt(t);return si(n.auth.app)?Promise.reject(Ai(n.auth)):F4(n,e,null)}function zq(t,e){return F4(qt(t),null,e)}async function F4(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Wc(t,Nq(r,a));await t._updateTokensIfNecessary(o,!0)}function Uq(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function Bq(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function Hq(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}function qq(t){return qt(t).signOut()}async function Wq(t){return qt(t).delete()}const qy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qy,"1"),this.storage.removeItem(qy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=1e3,Kq=10;class $4 extends V4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);aq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kq):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$4.type="LOCAL";const Zq=$4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4 extends V4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z4.type="SESSION";const U4=z4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new y0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await Qq(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}y0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=hS("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(){return window}function Xq(t){va().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){return typeof va().WorkerGlobalScope<"u"&&typeof va().importScripts=="function"}async function Jq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tW(){return B4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="firebaseLocalStorageDb",nW=1,Wy="firebaseLocalStorage",q4="fbase_key";class Vp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function x0(t,e){return t.transaction([Wy],e?"readwrite":"readonly").objectStore(Wy)}function rW(){const t=indexedDB.deleteDatabase(H4);return new Vp(t).toPromise()}function C1(){const t=indexedDB.open(H4,nW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wy,{keyPath:q4})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wy)?e(r):(r.close(),await rW(),e(await C1()))})})}async function nT(t,e,n){const r=x0(t,!0).put({[q4]:e,value:n});return new Vp(r).toPromise()}async function sW(t,e){const n=x0(t,!1).get(e),r=await new Vp(n).toPromise();return r===void 0?null:r.value}function rT(t,e){const n=x0(t,!0).delete(e);return new Vp(n).toPromise()}const iW=800,aW=3;class W4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y0._getInstance(tW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Jq(),!this.activeServiceWorker)return;this.sender=new Yq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C1();return await nT(e,qy,"1"),await rT(e,qy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=x0(s,!1).getAll();return new Vp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W4.type="LOCAL";const oW=W4;new Dp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t,e){return e?ro(e):(ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS extends cS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Td(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Td(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Td(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lW(t){return M4(t.auth,new fS(t),t.bypassAuthState)}function cW(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),O4(n,new fS(t),t.bypassAuthState)}async function uW(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),Mq(n,new fS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lW;case"linkViaPopup":case"linkViaRedirect":return uW;case"reauthViaPopup":case"reauthViaRedirect":return cW;default:fi(this.auth,"internal-error")}}resolve(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=new Dp(2e3,1e4);class xd extends K4{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,xd.currentPopupAction&&xd.currentPopupAction.cancel(),xd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){mo(this.filter.length===1,"Popup operations only handle one event");const e=hS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ga(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ga(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ga(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dW.get())};e()}}xd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW="pendingRedirect",Kv=new Map;class fW extends K4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kv.get(this.auth._key());if(!e){try{const r=await mW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kv.set(this.auth._key(),e)}return this.bypassAuthState||Kv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mW(t,e){const n=Q4(e),r=Z4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function pW(t,e){return Z4(t)._set(Q4(e),"true")}function gW(t,e){Kv.set(t._key(),e)}function Z4(t){return ro(t._redirectPersistence)}function Q4(t){return Gv(hW,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t,e,n){return yW(t,e,n)}async function yW(t,e,n){if(si(t.app))return Promise.reject(Ai(t));const r=To(t);UH(t,e,dS),await r._initializationPromise;const s=G4(r,n);return await pW(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function xW(t,e){return await To(t)._initializationPromise,Y4(t,e,!1)}async function Y4(t,e,n=!1){if(si(t.app))return Promise.reject(Ai(t));const r=To(t),s=G4(r,e),o=await new fW(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=10*60*1e3;class wW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!X4(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ga(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_W&&this.cachedEventUids.clear(),this.cachedEventUids.has(sT(e))}saveEventToCache(e){this.cachedEventUids.add(sT(e)),this.lastProcessedEventTime=Date.now()}}function sT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function X4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jW(t,e={}){return Hi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SW=/^https?/;async function EW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jW(t);for(const n of e)try{if(CW(n))return}catch{}fi(t,"unauthorized-domain")}function CW(t){const e=N1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SW.test(n))return!1;if(NW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=new Dp(3e4,6e4);function iT(){const t=va().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TW(t){return new Promise((e,n)=>{var r,s,a;function o(){iT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iT(),n(ga(t,"network-request-failed"))},timeout:PW.get()})}if(!((s=(r=va().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=va().gapi)===null||a===void 0)&&a.load)o();else{const l=pq("iframefcb");return va()[l]=()=>{gapi.load?o():n(ga(t,"network-request-failed"))},R4(`${mq()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Zv=null,e})}let Zv=null;function kW(t){return Zv=Zv||TW(t),Zv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW=new Dp(5e3,15e3),IW="__/auth/iframe",AW="emulator/auth/iframe",OW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DW(t){const e=t.config;ct(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?aS(e,AW):`https://${t.config.authDomain}/${IW}`,r={apiKey:e.apiKey,appName:t.name,v:uu},s=MW.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Op(r).slice(1)}`}async function LW(t){const e=await kW(t),n=va().gapi;return ct(n,t,"internal-error"),e.open({where:document.body,url:DW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OW,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=ga(t,"network-request-failed"),l=va().setTimeout(()=>{a(o)},RW.get());function u(){va().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VW=500,$W=600,zW="_blank",UW="http://localhost";class aT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BW(t,e,n,r=VW,s=$W){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},FW),{width:r.toString(),height:s.toString(),top:a,left:o}),d=Ur().toLowerCase();n&&(l=N4(d)?zW:n),b4(d)&&(e=e||UW,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[y,j])=>`${p}${y}=${j},`,"");if(iq(d)&&l!=="_self")return HW(e||"",l),new aT(null);const m=window.open(e||"",l,f);ct(m,t,"popup-blocked");try{m.focus()}catch{}return new aT(m)}function HW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW="__/auth/handler",WW="emulator/auth/handler",GW=encodeURIComponent("fac");async function oT(t,e,n,r,s,a){ct(t.config.authDomain,t,"auth-domain-config-required"),ct(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uu,eventId:s};if(e instanceof dS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",P7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Fp){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${GW}=${encodeURIComponent(u)}`:"";return`${KW(t)}?${Op(l).slice(1)}${d}`}function KW({config:t}){return t.emulator?aS(t,WW):`https://${t.authDomain}/${qW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="webStorageSupport";class ZW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U4,this._completeRedirectFn=Y4,this._overrideRedirectResult=gW}async _openPopup(e,n,r,s){var a;mo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await oT(e,n,r,N1(),s);return BW(e,o,hS())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await oT(e,n,r,N1(),s);return Xq(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(mo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LW(e),r=new wW(e);return n.register("authEvent",s=>(ct(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jw,{type:jw},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[jw];o!==void 0&&n(!!o),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T4()||j4()||lS()}}const QW=ZW;var lT="@firebase/auth",cT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JW(t){qc(new kl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k4(t)},d=new dq(r,s,a,u);return _q(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qc(new kl("auth-internal",e=>{const n=To(e.getProvider("auth").getImmediate());return(r=>new YW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pa(lT,cT,XW(t)),pa(lT,cT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=5*60,tG=o4("authIdTokenMaxAge")||eG;let uT=null;const nG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tG)return;const s=n==null?void 0:n.token;uT!==s&&(uT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rG(t=rS()){const e=g0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xq(t,{popupRedirectResolver:QW,persistence:[oW,Zq,U4]}),r=o4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=nG(a.toString());Bq(n,o,()=>o(n.currentUser)),Uq(n,l=>o(l))}}const s=s4("auth");return s&&wq(n,`http://${s}`),n}function sG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hq({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ga("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",sG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JW("Browser");var dT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rc,J4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,F){function $(){}$.prototype=F.prototype,I.D=F.prototype,I.prototype=new $,I.prototype.constructor=I,I.C=function(P,M,D){for(var k=Array(arguments.length-2),G=2;G<arguments.length;G++)k[G-2]=arguments[G];return F.prototype[M].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,F,$){$||($=0);var P=Array(16);if(typeof F=="string")for(var M=0;16>M;++M)P[M]=F.charCodeAt($++)|F.charCodeAt($++)<<8|F.charCodeAt($++)<<16|F.charCodeAt($++)<<24;else for(M=0;16>M;++M)P[M]=F[$++]|F[$++]<<8|F[$++]<<16|F[$++]<<24;F=I.g[0],$=I.g[1],M=I.g[2];var D=I.g[3],k=F+(D^$&(M^D))+P[0]+3614090360&4294967295;F=$+(k<<7&4294967295|k>>>25),k=D+(M^F&($^M))+P[1]+3905402710&4294967295,D=F+(k<<12&4294967295|k>>>20),k=M+($^D&(F^$))+P[2]+606105819&4294967295,M=D+(k<<17&4294967295|k>>>15),k=$+(F^M&(D^F))+P[3]+3250441966&4294967295,$=M+(k<<22&4294967295|k>>>10),k=F+(D^$&(M^D))+P[4]+4118548399&4294967295,F=$+(k<<7&4294967295|k>>>25),k=D+(M^F&($^M))+P[5]+1200080426&4294967295,D=F+(k<<12&4294967295|k>>>20),k=M+($^D&(F^$))+P[6]+2821735955&4294967295,M=D+(k<<17&4294967295|k>>>15),k=$+(F^M&(D^F))+P[7]+4249261313&4294967295,$=M+(k<<22&4294967295|k>>>10),k=F+(D^$&(M^D))+P[8]+1770035416&4294967295,F=$+(k<<7&4294967295|k>>>25),k=D+(M^F&($^M))+P[9]+2336552879&4294967295,D=F+(k<<12&4294967295|k>>>20),k=M+($^D&(F^$))+P[10]+4294925233&4294967295,M=D+(k<<17&4294967295|k>>>15),k=$+(F^M&(D^F))+P[11]+2304563134&4294967295,$=M+(k<<22&4294967295|k>>>10),k=F+(D^$&(M^D))+P[12]+1804603682&4294967295,F=$+(k<<7&4294967295|k>>>25),k=D+(M^F&($^M))+P[13]+4254626195&4294967295,D=F+(k<<12&4294967295|k>>>20),k=M+($^D&(F^$))+P[14]+2792965006&4294967295,M=D+(k<<17&4294967295|k>>>15),k=$+(F^M&(D^F))+P[15]+1236535329&4294967295,$=M+(k<<22&4294967295|k>>>10),k=F+(M^D&($^M))+P[1]+4129170786&4294967295,F=$+(k<<5&4294967295|k>>>27),k=D+($^M&(F^$))+P[6]+3225465664&4294967295,D=F+(k<<9&4294967295|k>>>23),k=M+(F^$&(D^F))+P[11]+643717713&4294967295,M=D+(k<<14&4294967295|k>>>18),k=$+(D^F&(M^D))+P[0]+3921069994&4294967295,$=M+(k<<20&4294967295|k>>>12),k=F+(M^D&($^M))+P[5]+3593408605&4294967295,F=$+(k<<5&4294967295|k>>>27),k=D+($^M&(F^$))+P[10]+38016083&4294967295,D=F+(k<<9&4294967295|k>>>23),k=M+(F^$&(D^F))+P[15]+3634488961&4294967295,M=D+(k<<14&4294967295|k>>>18),k=$+(D^F&(M^D))+P[4]+3889429448&4294967295,$=M+(k<<20&4294967295|k>>>12),k=F+(M^D&($^M))+P[9]+568446438&4294967295,F=$+(k<<5&4294967295|k>>>27),k=D+($^M&(F^$))+P[14]+3275163606&4294967295,D=F+(k<<9&4294967295|k>>>23),k=M+(F^$&(D^F))+P[3]+4107603335&4294967295,M=D+(k<<14&4294967295|k>>>18),k=$+(D^F&(M^D))+P[8]+1163531501&4294967295,$=M+(k<<20&4294967295|k>>>12),k=F+(M^D&($^M))+P[13]+2850285829&4294967295,F=$+(k<<5&4294967295|k>>>27),k=D+($^M&(F^$))+P[2]+4243563512&4294967295,D=F+(k<<9&4294967295|k>>>23),k=M+(F^$&(D^F))+P[7]+1735328473&4294967295,M=D+(k<<14&4294967295|k>>>18),k=$+(D^F&(M^D))+P[12]+2368359562&4294967295,$=M+(k<<20&4294967295|k>>>12),k=F+($^M^D)+P[5]+4294588738&4294967295,F=$+(k<<4&4294967295|k>>>28),k=D+(F^$^M)+P[8]+2272392833&4294967295,D=F+(k<<11&4294967295|k>>>21),k=M+(D^F^$)+P[11]+1839030562&4294967295,M=D+(k<<16&4294967295|k>>>16),k=$+(M^D^F)+P[14]+4259657740&4294967295,$=M+(k<<23&4294967295|k>>>9),k=F+($^M^D)+P[1]+2763975236&4294967295,F=$+(k<<4&4294967295|k>>>28),k=D+(F^$^M)+P[4]+1272893353&4294967295,D=F+(k<<11&4294967295|k>>>21),k=M+(D^F^$)+P[7]+4139469664&4294967295,M=D+(k<<16&4294967295|k>>>16),k=$+(M^D^F)+P[10]+3200236656&4294967295,$=M+(k<<23&4294967295|k>>>9),k=F+($^M^D)+P[13]+681279174&4294967295,F=$+(k<<4&4294967295|k>>>28),k=D+(F^$^M)+P[0]+3936430074&4294967295,D=F+(k<<11&4294967295|k>>>21),k=M+(D^F^$)+P[3]+3572445317&4294967295,M=D+(k<<16&4294967295|k>>>16),k=$+(M^D^F)+P[6]+76029189&4294967295,$=M+(k<<23&4294967295|k>>>9),k=F+($^M^D)+P[9]+3654602809&4294967295,F=$+(k<<4&4294967295|k>>>28),k=D+(F^$^M)+P[12]+3873151461&4294967295,D=F+(k<<11&4294967295|k>>>21),k=M+(D^F^$)+P[15]+530742520&4294967295,M=D+(k<<16&4294967295|k>>>16),k=$+(M^D^F)+P[2]+3299628645&4294967295,$=M+(k<<23&4294967295|k>>>9),k=F+(M^($|~D))+P[0]+4096336452&4294967295,F=$+(k<<6&4294967295|k>>>26),k=D+($^(F|~M))+P[7]+1126891415&4294967295,D=F+(k<<10&4294967295|k>>>22),k=M+(F^(D|~$))+P[14]+2878612391&4294967295,M=D+(k<<15&4294967295|k>>>17),k=$+(D^(M|~F))+P[5]+4237533241&4294967295,$=M+(k<<21&4294967295|k>>>11),k=F+(M^($|~D))+P[12]+1700485571&4294967295,F=$+(k<<6&4294967295|k>>>26),k=D+($^(F|~M))+P[3]+2399980690&4294967295,D=F+(k<<10&4294967295|k>>>22),k=M+(F^(D|~$))+P[10]+4293915773&4294967295,M=D+(k<<15&4294967295|k>>>17),k=$+(D^(M|~F))+P[1]+2240044497&4294967295,$=M+(k<<21&4294967295|k>>>11),k=F+(M^($|~D))+P[8]+1873313359&4294967295,F=$+(k<<6&4294967295|k>>>26),k=D+($^(F|~M))+P[15]+4264355552&4294967295,D=F+(k<<10&4294967295|k>>>22),k=M+(F^(D|~$))+P[6]+2734768916&4294967295,M=D+(k<<15&4294967295|k>>>17),k=$+(D^(M|~F))+P[13]+1309151649&4294967295,$=M+(k<<21&4294967295|k>>>11),k=F+(M^($|~D))+P[4]+4149444226&4294967295,F=$+(k<<6&4294967295|k>>>26),k=D+($^(F|~M))+P[11]+3174756917&4294967295,D=F+(k<<10&4294967295|k>>>22),k=M+(F^(D|~$))+P[2]+718787259&4294967295,M=D+(k<<15&4294967295|k>>>17),k=$+(D^(M|~F))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+F&4294967295,I.g[1]=I.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,F){F===void 0&&(F=I.length);for(var $=F-this.blockSize,P=this.B,M=this.h,D=0;D<F;){if(M==0)for(;D<=$;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<F;)if(P[M++]=I.charCodeAt(D++),M==this.blockSize){s(this,P),M=0;break}}else for(;D<F;)if(P[M++]=I[D++],M==this.blockSize){s(this,P),M=0;break}}this.h=M,this.o+=F},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var F=1;F<I.length-8;++F)I[F]=0;var $=8*this.o;for(F=I.length-8;F<I.length;++F)I[F]=$&255,$/=256;for(this.u(I),I=Array(16),F=$=0;4>F;++F)for(var P=0;32>P;P+=8)I[$++]=this.g[F]>>>P&255;return I};function a(I,F){var $=l;return Object.prototype.hasOwnProperty.call($,I)?$[I]:$[I]=F(I)}function o(I,F){this.h=F;for(var $=[],P=!0,M=I.length-1;0<=M;M--){var D=I[M]|0;P&&D==F||($[M]=D,P=!1)}this.g=$}var l={};function u(I){return-128<=I&&128>I?a(I,function(F){return new o([F|0],0>F?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return N(d(-I));for(var F=[],$=1,P=0;I>=$;P++)F[P]=I/$|0,$*=4294967296;return new o(F,0)}function f(I,F){if(I.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(I.charAt(0)=="-")return N(f(I.substring(1),F));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var $=d(Math.pow(F,8)),P=m,M=0;M<I.length;M+=8){var D=Math.min(8,I.length-M),k=parseInt(I.substring(M,M+D),F);8>D?(D=d(Math.pow(F,D)),P=P.j(D).add(d(k))):(P=P.j($),P=P.add(d(k)))}return P}var m=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();for(var I=0,F=1,$=0;$<this.g.length;$++){var P=this.i($);I+=(0<=P?P:4294967296+P)*F,F*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(j(this))return"0";if(b(this))return"-"+N(this).toString(I);for(var F=d(Math.pow(I,6)),$=this,P="";;){var M=R($,F).g;$=_($,M.j(F));var D=((0<$.g.length?$.g[0]:$.h)>>>0).toString(I);if($=M,j($))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function j(I){if(I.h!=0)return!1;for(var F=0;F<I.g.length;F++)if(I.g[F]!=0)return!1;return!0}function b(I){return I.h==-1}t.l=function(I){return I=_(this,I),b(I)?-1:j(I)?0:1};function N(I){for(var F=I.g.length,$=[],P=0;P<F;P++)$[P]=~I.g[P];return new o($,~I.h).add(p)}t.abs=function(){return b(this)?N(this):this},t.add=function(I){for(var F=Math.max(this.g.length,I.g.length),$=[],P=0,M=0;M<=F;M++){var D=P+(this.i(M)&65535)+(I.i(M)&65535),k=(D>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);P=k>>>16,D&=65535,k&=65535,$[M]=k<<16|D}return new o($,$[$.length-1]&-2147483648?-1:0)};function _(I,F){return I.add(N(F))}t.j=function(I){if(j(this)||j(I))return m;if(b(this))return b(I)?N(this).j(N(I)):N(N(this).j(I));if(b(I))return N(this.j(N(I)));if(0>this.l(y)&&0>I.l(y))return d(this.m()*I.m());for(var F=this.g.length+I.g.length,$=[],P=0;P<2*F;P++)$[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<I.g.length;M++){var D=this.i(P)>>>16,k=this.i(P)&65535,G=I.i(M)>>>16,se=I.i(M)&65535;$[2*P+2*M]+=k*se,w($,2*P+2*M),$[2*P+2*M+1]+=D*se,w($,2*P+2*M+1),$[2*P+2*M+1]+=k*G,w($,2*P+2*M+1),$[2*P+2*M+2]+=D*G,w($,2*P+2*M+2)}for(P=0;P<F;P++)$[P]=$[2*P+1]<<16|$[2*P];for(P=F;P<2*F;P++)$[P]=0;return new o($,0)};function w(I,F){for(;(I[F]&65535)!=I[F];)I[F+1]+=I[F]>>>16,I[F]&=65535,F++}function E(I,F){this.g=I,this.h=F}function R(I,F){if(j(F))throw Error("division by zero");if(j(I))return new E(m,m);if(b(I))return F=R(N(I),F),new E(N(F.g),N(F.h));if(b(F))return F=R(I,N(F)),new E(N(F.g),F.h);if(30<I.g.length){if(b(I)||b(F))throw Error("slowDivide_ only works with positive integers.");for(var $=p,P=F;0>=P.l(I);)$=A($),P=A(P);var M=B($,1),D=B(P,1);for(P=B(P,2),$=B($,2);!j(P);){var k=D.add(P);0>=k.l(I)&&(M=M.add($),D=k),P=B(P,1),$=B($,1)}return F=_(I,M.j(F)),new E(M,F)}for(M=m;0<=I.l(F);){for($=Math.max(1,Math.floor(I.m()/F.m())),P=Math.ceil(Math.log($)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=d($),k=D.j(F);b(k)||0<k.l(I);)$-=P,D=d($),k=D.j(F);j(D)&&(D=p),M=M.add(D),I=_(I,k)}return new E(M,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var F=Math.max(this.g.length,I.g.length),$=[],P=0;P<F;P++)$[P]=this.i(P)&I.i(P);return new o($,this.h&I.h)},t.or=function(I){for(var F=Math.max(this.g.length,I.g.length),$=[],P=0;P<F;P++)$[P]=this.i(P)|I.i(P);return new o($,this.h|I.h)},t.xor=function(I){for(var F=Math.max(this.g.length,I.g.length),$=[],P=0;P<F;P++)$[P]=this.i(P)^I.i(P);return new o($,this.h^I.h)};function A(I){for(var F=I.g.length+1,$=[],P=0;P<F;P++)$[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o($,I.h)}function B(I,F){var $=F>>5;F%=32;for(var P=I.g.length-$,M=[],D=0;D<P;D++)M[D]=0<F?I.i(D+$)>>>F|I.i(D+$+1)<<32-F:I.i(D+$);return new o(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,J4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Rc=o}).apply(typeof dT<"u"?dT:typeof self<"u"?self:typeof window<"u"?window:{});var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eM,rm,tM,Qv,P1,nM,rM,sM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,C,O){return g==Array.prototype||g==Object.prototype||(g[C]=O.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof hv=="object"&&hv];for(var C=0;C<g.length;++C){var O=g[C];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function s(g,C){if(C)e:{var O=r;g=g.split(".");for(var W=0;W<g.length-1;W++){var le=g[W];if(!(le in O))break e;O=O[le]}g=g[g.length-1],W=O[g],C=C(W),C!=W&&C!=null&&e(O,g,{configurable:!0,writable:!0,value:C})}}function a(g,C){g instanceof String&&(g+="");var O=0,W=!1,le={next:function(){if(!W&&O<g.length){var ge=O++;return{value:C(ge,g[ge]),done:!1}}return W=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}s("Array.prototype.values",function(g){return g||function(){return a(this,function(C,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var C=typeof g;return C=C!="object"?C:g?Array.isArray(g)?"array":C:"null",C=="array"||C=="object"&&typeof g.length=="number"}function d(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function f(g,C,O){return g.call.apply(g.bind,arguments)}function m(g,C,O){if(!g)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,W),g.apply(C,le)}}return function(){return g.apply(C,arguments)}}function p(g,C,O){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,p.apply(null,arguments)}function y(g,C){var O=Array.prototype.slice.call(arguments,1);return function(){var W=O.slice();return W.push.apply(W,arguments),g.apply(this,W)}}function j(g,C){function O(){}O.prototype=C.prototype,g.aa=C.prototype,g.prototype=new O,g.prototype.constructor=g,g.Qb=function(W,le,ge){for(var Le=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)Le[Kt-2]=arguments[Kt];return C.prototype[le].apply(W,Le)}}function b(g){const C=g.length;if(0<C){const O=Array(C);for(let W=0;W<C;W++)O[W]=g[W];return O}return[]}function N(g,C){for(let O=1;O<arguments.length;O++){const W=arguments[O];if(u(W)){const le=g.length||0,ge=W.length||0;g.length=le+ge;for(let Le=0;Le<ge;Le++)g[le+Le]=W[Le]}else g.push(W)}}class _{constructor(C,O){this.i=C,this.j=O,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function w(g){return/^[\s\xa0]*$/.test(g)}function E(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function R(g){return R[" "](g),g}R[" "]=function(){};var A=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function B(g,C,O){for(const W in g)C.call(O,g[W],W,g)}function I(g,C){for(const O in g)C.call(void 0,g[O],O,g)}function F(g){const C={};for(const O in g)C[O]=g[O];return C}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(g,C){let O,W;for(let le=1;le<arguments.length;le++){W=arguments[le];for(O in W)g[O]=W[O];for(let ge=0;ge<$.length;ge++)O=$[ge],Object.prototype.hasOwnProperty.call(W,O)&&(g[O]=W[O])}}function M(g){var C=1;g=g.split(":");const O=[];for(;0<C&&g.length;)O.push(g.shift()),C--;return g.length&&O.push(g.join(":")),O}function D(g){l.setTimeout(()=>{throw g},0)}function k(){var g=H;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class G{constructor(){this.h=this.g=null}add(C,O){const W=se.get();W.set(C,O),this.h?this.h.next=W:this.g=W,this.h=W}}var se=new _(()=>new ae,g=>g.reset());class ae{constructor(){this.next=this.g=this.h=null}set(C,O){this.h=C,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,H=new G,V=()=>{const g=l.Promise.resolve(void 0);K=()=>{g.then(q)}};var q=()=>{for(var g;g=k();){try{g.h.call(g.g)}catch(O){D(O)}var C=se;C.j(g),100>C.h&&(C.h++,g.next=C.g,C.g=g)}z=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const O=()=>{};l.addEventListener("test",O,C),l.removeEventListener("test",O,C)}catch{}return g}();function Me(g,C){if(me.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var O=this.type=g.type,W=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget){if(A){e:{try{R(C.nodeName);var le=!0;break e}catch{}le=!1}le||(C=null)}}else O=="mouseover"?C=g.fromElement:O=="mouseout"&&(C=g.toElement);this.relatedTarget=C,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:oe[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Me.aa.h.call(this)}}j(Me,me);var oe={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Y=0;function ne(g,C,O,W,le){this.listener=g,this.proxy=null,this.src=C,this.type=O,this.capture=!!W,this.ha=le,this.key=++Y,this.da=this.fa=!1}function ee(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ie(g){this.src=g,this.g={},this.h=0}ie.prototype.add=function(g,C,O,W,le){var ge=g.toString();g=this.g[ge],g||(g=this.g[ge]=[],this.h++);var Le=_e(g,C,W,le);return-1<Le?(C=g[Le],O||(C.fa=!1)):(C=new ne(C,this.src,ge,!!W,le),C.fa=O,g.push(C)),C};function fe(g,C){var O=C.type;if(O in g.g){var W=g.g[O],le=Array.prototype.indexOf.call(W,C,void 0),ge;(ge=0<=le)&&Array.prototype.splice.call(W,le,1),ge&&(ee(C),g.g[O].length==0&&(delete g.g[O],g.h--))}}function _e(g,C,O,W){for(var le=0;le<g.length;++le){var ge=g[le];if(!ge.da&&ge.listener==C&&ge.capture==!!O&&ge.ha==W)return le}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Ce={};function he(g,C,O,W,le){if(Array.isArray(C)){for(var ge=0;ge<C.length;ge++)he(g,C[ge],O,W,le);return null}return O=Se(O),g&&g[xe]?g.K(C,O,d(W)?!!W.capture:!1,le):De(g,C,O,!1,W,le)}function De(g,C,O,W,le,ge){if(!C)throw Error("Invalid event type");var Le=d(le)?!!le.capture:!!le,Kt=Te(g);if(Kt||(g[Ie]=Kt=new ie(g)),O=Kt.add(C,O,W,Le,ge),O.proxy)return O;if(W=qe(),O.proxy=W,W.src=g,W.listener=O,g.addEventListener)Pe||(le=Le),le===void 0&&(le=!1),g.addEventListener(C.toString(),W,le);else if(g.attachEvent)g.attachEvent(re(C.toString()),W);else if(g.addListener&&g.removeListener)g.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return O}function qe(){function g(O){return C.call(g.src,g.listener,O)}const C=de;return g}function vt(g,C,O,W,le){if(Array.isArray(C))for(var ge=0;ge<C.length;ge++)vt(g,C[ge],O,W,le);else W=d(W)?!!W.capture:!!W,O=Se(O),g&&g[xe]?(g=g.i,C=String(C).toString(),C in g.g&&(ge=g.g[C],O=_e(ge,O,W,le),-1<O&&(ee(ge[O]),Array.prototype.splice.call(ge,O,1),ge.length==0&&(delete g.g[C],g.h--)))):g&&(g=Te(g))&&(C=g.g[C.toString()],g=-1,C&&(g=_e(C,O,W,le)),(O=-1<g?C[g]:null)&&Z(O))}function Z(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[xe])fe(C.i,g);else{var O=g.type,W=g.proxy;C.removeEventListener?C.removeEventListener(O,W,g.capture):C.detachEvent?C.detachEvent(re(O),W):C.addListener&&C.removeListener&&C.removeListener(W),(O=Te(C))?(fe(O,g),O.h==0&&(O.src=null,C[Ie]=null)):ee(g)}}}function re(g){return g in Ce?Ce[g]:Ce[g]="on"+g}function de(g,C){if(g.da)g=!0;else{C=new Me(C,this);var O=g.listener,W=g.ha||g.src;g.fa&&Z(g),g=O.call(W,C)}return g}function Te(g){return g=g[Ie],g instanceof ie?g:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(g){return typeof g=="function"?g:(g[Re]||(g[Re]=function(C){return g.handleEvent(C)}),g[Re])}function Ve(){J.call(this),this.i=new ie(this),this.M=this,this.F=null}j(Ve,J),Ve.prototype[xe]=!0,Ve.prototype.removeEventListener=function(g,C,O,W){vt(this,g,C,O,W)};function We(g,C){var O,W=g.F;if(W)for(O=[];W;W=W.F)O.push(W);if(g=g.M,W=C.type||C,typeof C=="string")C=new me(C,g);else if(C instanceof me)C.target=C.target||g;else{var le=C;C=new me(W,g),P(C,le)}if(le=!0,O)for(var ge=O.length-1;0<=ge;ge--){var Le=C.g=O[ge];le=nt(Le,W,!0,C)&&le}if(Le=C.g=g,le=nt(Le,W,!0,C)&&le,le=nt(Le,W,!1,C)&&le,O)for(ge=0;ge<O.length;ge++)Le=C.g=O[ge],le=nt(Le,W,!1,C)&&le}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var g=this.i,C;for(C in g.g){for(var O=g.g[C],W=0;W<O.length;W++)ee(O[W]);delete g.g[C],g.h--}}this.F=null},Ve.prototype.K=function(g,C,O,W){return this.i.add(String(g),C,!1,O,W)},Ve.prototype.L=function(g,C,O,W){return this.i.add(String(g),C,!0,O,W)};function nt(g,C,O,W){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();for(var le=!0,ge=0;ge<C.length;++ge){var Le=C[ge];if(Le&&!Le.da&&Le.capture==O){var Kt=Le.listener,Kn=Le.ha||Le.src;Le.fa&&fe(g.i,Le),le=Kt.call(Kn,W)!==!1&&le}}return le&&!W.defaultPrevented}function Xt(g,C,O){if(typeof g=="function")O&&(g=p(g,O));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(g,C||0)}function sr(g){g.g=Xt(()=>{g.g=null,g.i&&(g.i=!1,sr(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class Gn extends J{constructor(C,O){super(),this.m=C,this.l=O,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:sr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(g){J.call(this),this.h=g,this.g={}}j(Hr,J);var ls=[];function cs(g){B(g.g,function(C,O){this.g.hasOwnProperty(O)&&Z(C)},g),g.g={}}Hr.prototype.N=function(){Hr.aa.N.call(this),cs(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gi=l.JSON.stringify,bu=l.JSON.parse,Aa=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function ko(){}ko.prototype.h=null;function vg(g){return g.h||(g.h=g.i())}function ef(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ju(){me.call(this,"d")}j(ju,me);function tf(){me.call(this,"c")}j(tf,me);var Oa={},yg=null;function Nu(){return yg=yg||new Ve}Oa.La="serverreachability";function xg(g){me.call(this,Oa.La,g)}j(xg,me);function nc(g){const C=Nu();We(C,new xg(C))}Oa.STAT_EVENT="statevent";function Su(g,C){me.call(this,Oa.STAT_EVENT,g),this.stat=C}j(Su,me);function _r(g){const C=Nu();We(C,new Su(C,g))}Oa.Ma="timingevent";function _g(g,C){me.call(this,Oa.Ma,g),this.size=C}j(_g,me);function rc(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},C)}function sc(){this.g=!0}sc.prototype.xa=function(){this.g=!1};function Gs(g,C,O,W,le,ge){g.info(function(){if(g.g)if(ge)for(var Le="",Kt=ge.split("&"),Kn=0;Kn<Kt.length;Kn++){var Lt=Kt[Kn].split("=");if(1<Lt.length){var en=Lt[0];Lt=Lt[1];var En=en.split("_");Le=2<=En.length&&En[1]=="type"?Le+(en+"="+Lt+"&"):Le+(en+"=redacted&")}}else Le=null;else Le=ge;return"XMLHTTP REQ ("+W+") [attempt "+le+"]: "+C+`
`+O+`
`+Le})}function at(g,C,O,W,le,ge,Le){g.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+le+"]: "+C+`
`+O+`
`+ge+" "+Le})}function Ma(g,C,O,W){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+bg(g,O)+(W?" "+W:"")})}function wg(g,C){g.info(function(){return"TIMEOUT: "+C})}sc.prototype.info=function(){};function bg(g,C){if(!g.g)return C;if(!C)return null;try{var O=JSON.parse(C);if(O){for(g=0;g<O.length;g++)if(Array.isArray(O[g])){var W=O[g];if(!(2>W.length)){var le=W[1];if(Array.isArray(le)&&!(1>le.length)){var ge=le[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Le=1;Le<le.length;Le++)le[Le]=""}}}}return Gi(O)}catch{return C}}var ic={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cu;function gi(){}j(gi,ko),gi.prototype.g=function(){return new XMLHttpRequest},gi.prototype.i=function(){return{}},Cu=new gi;function vi(g,C,O,W){this.j=g,this.i=C,this.l=O,this.R=W||1,this.U=new Hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jg}function jg(){this.i=null,this.g="",this.h=!1}var Ng={},nf={};function rf(g,C,O){g.L=1,g.v=Zs(Rn(C)),g.m=O,g.P=!0,sf(g,null)}function sf(g,C){g.F=Date.now(),Tu(g),g.A=Rn(g.v);var O=g.A,W=g.R;Array.isArray(W)||(W=[String(W)]),Cg(O.i,"t",W),g.C=0,O=g.j.J,g.h=new jg,g.g=Og(g.j,O?C:null,!g.m),0<g.O&&(g.M=new Gn(p(g.Y,g,g.g),g.O)),C=g.U,O=g.g,W=g.ca;var le="readystatechange";Array.isArray(le)||(le&&(ls[0]=le.toString()),le=ls);for(var ge=0;ge<le.length;ge++){var Le=he(O,le[ge],W||C.handleEvent,!1,C.h||C);if(!Le)break;C.g[Le.key]=Le}C=g.H?F(g.H):{},g.m?(g.u||(g.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,C)):(g.u="GET",g.g.ea(g.A,g.u,null,C)),nc(),Gs(g.i,g.u,g.A,g.l,g.R,g.m)}vi.prototype.ca=function(g){g=g.target;const C=this.M;C&&qr(g)==3?C.j():this.Y(g)},vi.prototype.Y=function(g){try{if(g==this.g)e:{const En=qr(this.g);var C=this.g.Ba();const Fo=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||wf(this.g)))){this.J||En!=4||C==7||(C==8||0>=Fo?nc(3):nc(2)),af(this);var O=this.g.Z();this.X=O;t:if(Sg(this)){var W=wf(this.g);g="";var le=W.length,ge=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Da(this),ac(this);var Le="";break t}this.h.i=new l.TextDecoder}for(C=0;C<le;C++)this.h.h=!0,g+=this.h.i.decode(W[C],{stream:!(ge&&C==le-1)});W.length=0,this.h.g+=g,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=O==200,at(this.i,this.u,this.A,this.l,this.R,En,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,Kn=this.g;if((Kt=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Kt)){var Lt=Kt;break t}}Lt=null}if(O=Lt)Ma(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,O);else{this.o=!1,this.s=3,_r(12),Da(this),ac(this);break e}}if(this.P){O=!0;let Fn;for(;!this.J&&this.C<Le.length;)if(Fn=Pu(this,Le),Fn==nf){En==4&&(this.s=4,_r(14),O=!1),Ma(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Ng){this.s=4,_r(15),Ma(this.i,this.l,Le,"[Invalid Chunk]"),O=!1;break}else Ma(this.i,this.l,Fn,null),oc(this,Fn);if(Sg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||Le.length!=0||this.h.h||(this.s=1,_r(16),O=!1),this.o=this.o&&O,!O)Ma(this.i,this.l,Le,"[Invalid Chunked Response]"),Da(this),ac(this);else if(0<Le.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),Fu(en),en.M=!0,_r(11))}}else Ma(this.i,this.l,Le,null),oc(this,Le);En==4&&Da(this),this.o&&!this.J&&(En==4?jf(this.j,this):(this.o=!1,Tu(this)))}else D_(this.g),O==400&&0<Le.indexOf("Unknown SID")?(this.s=3,_r(12)):(this.s=0,_r(13)),Da(this),ac(this)}}}catch{}finally{}};function Sg(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Pu(g,C){var O=g.C,W=C.indexOf(`
`,O);return W==-1?nf:(O=Number(C.substring(O,W)),isNaN(O)?Ng:(W+=1,W+O>C.length?nf:(C=C.slice(W,W+O),g.C=W+O,C)))}vi.prototype.cancel=function(){this.J=!0,Da(this)};function Tu(g){g.S=Date.now()+g.I,Eg(g,g.I)}function Eg(g,C){if(g.B!=null)throw Error("WatchDog timer not null");g.B=rc(p(g.ba,g),C)}function af(g){g.B&&(l.clearTimeout(g.B),g.B=null)}vi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(wg(this.i,this.A),this.L!=2&&(nc(),_r(17)),Da(this),this.s=2,ac(this)):Eg(this,this.S-g)};function ac(g){g.j.G==0||g.J||jf(g.j,g)}function Da(g){af(g);var C=g.M;C&&typeof C.ma=="function"&&C.ma(),g.M=null,cs(g.U),g.g&&(C=g.g,g.g=null,C.abort(),C.ma())}function oc(g,C){try{var O=g.j;if(O.G!=0&&(O.g==g||Rt(O.h,g))){if(!g.K&&Rt(O.h,g)&&O.G==3){try{var W=O.Da.g.parse(C)}catch{W=null}if(Array.isArray(W)&&W.length==3){var le=W;if(le[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<g.F)$u(O),Du(O);else break e;Lu(O),_r(18)}}else O.za=le[1],0<O.za-O.T&&37500>le[2]&&O.F&&O.v==0&&!O.C&&(O.C=rc(p(O.Za,O),6e3));if(1>=Io(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else za(O,11)}else if((g.K||O.g==g)&&$u(O),!w(C))for(le=O.Da.g.parse(C),C=0;C<le.length;C++){let Lt=le[C];if(O.T=Lt[0],Lt=Lt[1],O.G==2)if(Lt[0]=="c"){O.K=Lt[1],O.ia=Lt[2];const en=Lt[3];en!=null&&(O.la=en,O.j.info("VER="+O.la));const En=Lt[4];En!=null&&(O.Aa=En,O.j.info("SVER="+O.Aa));const Fo=Lt[5];Fo!=null&&typeof Fo=="number"&&0<Fo&&(W=1.5*Fo,O.L=W,O.j.info("backChannelRequestTimeoutMs_="+W)),W=O;const Fn=g.g;if(Fn){const Uu=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var ge=W.h;ge.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(rn(ge,ge.h),ge.h=null))}if(W.D){const Qi=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qi&&(W.ya=Qi,mt(W.I,W.D,Qi))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-g.F,O.j.info("Handshake RTT: "+O.R+"ms")),W=O;var Le=g;if(W.qa=zu(W,W.J?W.ia:null,W.W),Le.K){cc(W.h,Le);var Kt=Le,Kn=W.L;Kn&&(Kt.I=Kn),Kt.B&&(af(Kt),Tu(Kt)),W.g=Le}else _i(W);0<O.i.length&&Lo(O)}else Lt[0]!="stop"&&Lt[0]!="close"||za(O,7);else O.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?za(O,7):Mu(O):Lt[0]!="noop"&&O.l&&O.l.ta(Lt),O.v=0)}}nc(4)}catch{}}var lc=class{constructor(g,C){this.g=g,this.map=C}};function of(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lf(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Io(g){return g.h?1:g.g?g.g.size:0}function Rt(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function rn(g,C){g.g?g.g.add(C):g.h=C}function cc(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}of.prototype.cancel=function(){if(this.i=La(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function La(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const O of g.g.values())C=C.concat(O.D);return C}return b(g.i)}function Ao(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var C=[],O=g.length,W=0;W<O;W++)C.push(g[W]);return C}C=[],O=0;for(W in g)C[O++]=g[W];return C}function cf(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var C=[];g=g.length;for(var O=0;O<g;O++)C.push(O);return C}C=[],O=0;for(const W in g)C[O++]=W;return C}}}function bt(g,C){if(g.forEach&&typeof g.forEach=="function")g.forEach(C,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,C,void 0);else for(var O=cf(g),W=Ao(g),le=W.length,ge=0;ge<le;ge++)C.call(void 0,W[ge],O&&O[ge],g)}var yn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(g,C){if(g){g=g.split("&");for(var O=0;O<g.length;O++){var W=g[O].indexOf("="),le=null;if(0<=W){var ge=g[O].substring(0,W);le=g[O].substring(W+1)}else ge=g[O];C(ge,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Ks(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Ks){this.h=g.h,ku(this,g.j),this.o=g.o,this.g=g.g,Fa(this,g.s),this.l=g.l;var C=g.i,O=new Va;O.i=C.i,C.g&&(O.g=new Map(C.g),O.h=C.h),Ki(this,O),this.m=g.m}else g&&(C=String(g).match(yn))?(this.h=!1,ku(this,C[1]||"",!0),this.o=yi(C[2]||""),this.g=yi(C[3]||"",!0),Fa(this,C[4]),this.l=yi(C[5]||"",!0),Ki(this,C[6]||"",!0),this.m=yi(C[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}Ks.prototype.toString=function(){var g=[],C=this.j;C&&g.push(xi(C,Oo,!0),":");var O=this.g;return(O||C=="file")&&(g.push("//"),(C=this.o)&&g.push(xi(C,Oo,!0),"@"),g.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&g.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&g.push("/"),g.push(xi(O,O.charAt(0)=="/"?ff:hf,!0))),(O=this.i.toString())&&g.push("?",O),(O=this.m)&&g.push("#",xi(O,mf)),g.join("")};function Rn(g){return new Ks(g)}function ku(g,C,O){g.j=O?yi(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Fa(g,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);g.s=C}else g.s=null}function Ki(g,C,O){C instanceof Va?(g.i=C,Qs(g.i,g.h)):(O||(C=xi(C,Ru)),g.i=new Va(C,g.h))}function mt(g,C,O){g.i.set(C,O)}function Zs(g){return mt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function yi(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function xi(g,C,O){return typeof g=="string"?(g=encodeURI(g).replace(C,df),O&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function df(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Oo=/[#\/\?@]/g,hf=/[#\?:]/g,ff=/[#\?]/g,Ru=/[#\?@]/g,mf=/#/g;function Va(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function Es(g){g.g||(g.g=new Map,g.h=0,g.i&&uf(g.i,function(C,O){g.add(decodeURIComponent(C.replace(/\+/g," ")),O)}))}t=Va.prototype,t.add=function(g,C){Es(this),this.i=null,g=ut(this,g);var O=this.g.get(g);return O||this.g.set(g,O=[]),O.push(C),this.h+=1,this};function pf(g,C){Es(g),C=ut(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function Iu(g,C){return Es(g),C=ut(g,C),g.g.has(C)}t.forEach=function(g,C){Es(this),this.g.forEach(function(O,W){O.forEach(function(le){g.call(C,le,W,this)},this)},this)},t.na=function(){Es(this);const g=Array.from(this.g.values()),C=Array.from(this.g.keys()),O=[];for(let W=0;W<C.length;W++){const le=g[W];for(let ge=0;ge<le.length;ge++)O.push(C[W])}return O},t.V=function(g){Es(this);let C=[];if(typeof g=="string")Iu(this,g)&&(C=C.concat(this.g.get(ut(this,g))));else{g=Array.from(this.g.values());for(let O=0;O<g.length;O++)C=C.concat(g[O])}return C},t.set=function(g,C){return Es(this),this.i=null,g=ut(this,g),Iu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=this.V(g),0<g.length?String(g[0]):C):C};function Cg(g,C,O){pf(g,C),0<O.length&&(g.i=null,g.g.set(ut(g,C),b(O)),g.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(var O=0;O<C.length;O++){var W=C[O];const ge=encodeURIComponent(String(W)),Le=this.V(W);for(W=0;W<Le.length;W++){var le=ge;Le[W]!==""&&(le+="="+encodeURIComponent(String(Le[W]))),g.push(le)}}return this.i=g.join("&")};function ut(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function Qs(g,C){C&&!g.j&&(Es(g),g.i=null,g.g.forEach(function(O,W){var le=W.toLowerCase();W!=le&&(pf(this,W),Cg(this,le,O))},g)),g.j=C}function Jt(g,C){const O=new sc;if(l.Image){const W=new Image;W.onload=y(Ys,O,"TestLoadImage: loaded",!0,C,W),W.onerror=y(Ys,O,"TestLoadImage: error",!1,C,W),W.onabort=y(Ys,O,"TestLoadImage: abort",!1,C,W),W.ontimeout=y(Ys,O,"TestLoadImage: timeout",!1,C,W),l.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=g}else C(!1)}function Pg(g,C){const O=new sc,W=new AbortController,le=setTimeout(()=>{W.abort(),Ys(O,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:W.signal}).then(ge=>{clearTimeout(le),ge.ok?Ys(O,"TestPingServer: ok",!0,C):Ys(O,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(le),Ys(O,"TestPingServer: error",!1,C)})}function Ys(g,C,O,W,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),W(O)}catch{}}function gf(){this.g=new Aa}function vf(g,C,O){const W=O||"";try{bt(g,function(le,ge){let Le=le;d(le)&&(Le=Gi(le)),C.push(W+ge+"="+encodeURIComponent(Le))})}catch(le){throw C.push(W+"type="+encodeURIComponent("_badmap")),le}}function Xs(g){this.l=g.Ub||null,this.j=g.eb||!1}j(Xs,ko),Xs.prototype.g=function(){return new Mo(this.l,this.j)},Xs.prototype.i=function(g){return function(){return g}}({});function Mo(g,C){Ve.call(this),this.D=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Mo,Ve),t=Mo.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=C,this.readyState=1,Cs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(C.body=g),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Do(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Do(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?Sn(this):Cs(this),this.readyState==3&&Do(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Sn(this))},t.Qa=function(g){this.g&&(this.response=g,Sn(this))},t.ga=function(){this.g&&Sn(this)};function Sn(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Cs(g)}t.setRequestHeader=function(g,C){this.u.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var O=C.next();!O.done;)O=O.value,g.push(O[0]+": "+O[1]),O=C.next();return g.join(`\r
`)};function Cs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function yf(g){let C="";return B(g,function(O,W){C+=W,C+=":",C+=O,C+=`\r
`}),C}function Au(g,C,O){e:{for(W in O){var W=!1;break e}W=!0}W||(O=yf(O),typeof g=="string"?O!=null&&encodeURIComponent(String(O)):mt(g,C,O))}function xn(g){Ve.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(xn,Ve);var Tg=/^https?$/i,xf=["POST","PUT"];t=xn.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,C,O,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cu.g(),this.v=this.o?vg(this.o):vg(Cu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(ge){kg(this,ge);return}if(g=O||"",O=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var le in W)O.set(le,W[le]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const ge of W.keys())O.set(ge,W.get(ge));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(O.keys()).find(ge=>ge.toLowerCase()=="content-type"),le=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xf,C,void 0))||W||le||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Le]of O)this.g.setRequestHeader(ge,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{us(this),this.u=!0,this.g.send(g),this.u=!1}catch(ge){kg(this,ge)}};function kg(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.m=5,_f(g),Ou(g)}function _f(g){g.A||(g.A=!0,We(g,"complete"),We(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,We(this,"complete"),We(this,"abort"),Ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ou(this,!0)),xn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tt(this):this.bb())},t.bb=function(){Tt(this)};function Tt(g){if(g.h&&typeof o<"u"&&(!g.v[1]||qr(g)!=4||g.Z()!=2)){if(g.u&&qr(g)==4)Xt(g.Ea,0,g);else if(We(g,"readystatechange"),qr(g)==4){g.h=!1;try{const Le=g.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var O;if(!(O=C)){var W;if(W=Le===0){var le=String(g.D).match(yn)[1]||null;!le&&l.self&&l.self.location&&(le=l.self.location.protocol.slice(0,-1)),W=!Tg.test(le?le.toLowerCase():"")}O=W}if(O)We(g,"complete"),We(g,"success");else{g.m=6;try{var ge=2<qr(g)?g.g.statusText:""}catch{ge=""}g.l=ge+" ["+g.Z()+"]",_f(g)}}finally{Ou(g)}}}}function Ou(g,C){if(g.g){us(g);const O=g.g,W=g.v[0]?()=>{}:null;g.g=null,g.v=null,C||We(g,"ready");try{O.onreadystatechange=W}catch{}}}function us(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function qr(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),bu(C)}};function wf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function D_(g){const C={};g=(g.g&&2<=qr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<g.length;W++){if(w(g[W]))continue;var O=M(g[W]);const le=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ge=C[le]||[];C[le]=ge,ge.push(O)}I(C,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(g,C,O){return O&&O.internalChannelParams&&O.internalChannelParams[g]||C}function Rg(g){this.Aa=0,this.i=[],this.j=new sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,g),this.cb=$a("retryDelaySeedMs",1e4,g),this.Wa=$a("forwardChannelMaxRetries",2,g),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new of(g&&g.concurrentRequestLimit),this.Da=new gf,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rg.prototype,t.la=8,t.G=1,t.connect=function(g,C,O,W){_r(0),this.W=g,this.H=C||{},O&&W!==void 0&&(this.H.OSID=O,this.H.OAID=W),this.F=this.X,this.I=zu(this,null,this.W),Lo(this)};function Mu(g){if(Ig(g),g.G==3){var C=g.U++,O=Rn(g.I);if(mt(O,"SID",g.K),mt(O,"RID",C),mt(O,"TYPE","terminate"),uc(g,O),C=new vi(g,g.j,C),C.L=2,C.v=Zs(Rn(O)),O=!1,l.navigator&&l.navigator.sendBeacon)try{O=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!O&&l.Image&&(new Image().src=C.v,O=!0),O||(C.g=Og(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Tu(C)}Ag(g)}function Du(g){g.g&&(Fu(g),g.g.cancel(),g.g=null)}function Ig(g){Du(g),g.u&&(l.clearTimeout(g.u),g.u=null),$u(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function Lo(g){if(!lf(g.h)&&!g.s){g.s=!0;var C=g.Ga;K||V(),z||(K(),z=!0),H.add(C,g),g.B=0}}function L_(g,C){return Io(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=C.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=rc(p(g.Ga,g,C),Nf(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const le=new vi(this,this.j,g);let ge=this.o;if(this.S&&(ge?(ge=F(ge),P(ge,this.S)):ge=this.S),this.m!==null||this.O||(le.H=ge,ge=null),this.P)e:{for(var C=0,O=0;O<this.i.length;O++){t:{var W=this.i[O];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(C+=W,4096<C){C=O;break e}if(C===4096||O===this.i.length-1){C=O+1;break e}}C=1e3}else C=1e3;C=bf(this,le,C),O=Rn(this.I),mt(O,"RID",g),mt(O,"CVER",22),this.D&&mt(O,"X-HTTP-Session-Id",this.D),uc(this,O),ge&&(this.O?C="headers="+encodeURIComponent(String(yf(ge)))+"&"+C:this.m&&Au(O,this.m,ge)),rn(this.h,le),this.Ua&&mt(O,"TYPE","init"),this.P?(mt(O,"$req",C),mt(O,"SID","null"),le.T=!0,rf(le,O,null)):rf(le,O,C),this.G=2}}else this.G==3&&(g?Ps(this,g):this.i.length==0||lf(this.h)||Ps(this))};function Ps(g,C){var O;C?O=C.l:O=g.U++;const W=Rn(g.I);mt(W,"SID",g.K),mt(W,"RID",O),mt(W,"AID",g.T),uc(g,W),g.m&&g.o&&Au(W,g.m,g.o),O=new vi(g,g.j,O,g.B+1),g.m===null&&(O.H=g.o),C&&(g.i=C.D.concat(g.i)),C=bf(g,O,1e3),O.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),rn(g.h,O),rf(O,W,C)}function uc(g,C){g.H&&B(g.H,function(O,W){mt(C,W,O)}),g.l&&bt({},function(O,W){mt(C,W,O)})}function bf(g,C,O){O=Math.min(g.i.length,O);var W=g.l?p(g.l.Na,g.l,g):null;e:{var le=g.i;let ge=-1;for(;;){const Le=["count="+O];ge==-1?0<O?(ge=le[0].g,Le.push("ofs="+ge)):ge=0:Le.push("ofs="+ge);let Kt=!0;for(let Kn=0;Kn<O;Kn++){let Lt=le[Kn].g;const en=le[Kn].map;if(Lt-=ge,0>Lt)ge=Math.max(0,le[Kn].g-100),Kt=!1;else try{vf(en,Le,"req"+Lt+"_")}catch{W&&W(en)}}if(Kt){W=Le.join("&");break e}}}return g=g.i.splice(0,O),C.D=g,W}function _i(g){if(!g.g&&!g.u){g.Y=1;var C=g.Fa;K||V(),z||(K(),z=!0),H.add(C,g),g.v=0}}function Lu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=rc(p(g.Fa,g),Nf(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=rc(p(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_r(10),Du(this),Vu(this))};function Fu(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function Vu(g){g.g=new vi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var C=Rn(g.qa);mt(C,"RID","rpc"),mt(C,"SID",g.K),mt(C,"AID",g.T),mt(C,"CI",g.F?"0":"1"),!g.F&&g.ja&&mt(C,"TO",g.ja),mt(C,"TYPE","xmlhttp"),uc(g,C),g.m&&g.o&&Au(C,g.m,g.o),g.L&&(g.g.I=g.L);var O=g.g;g=g.ia,O.L=1,O.v=Zs(Rn(C)),O.m=null,O.P=!0,sf(O,g)}t.Za=function(){this.C!=null&&(this.C=null,Du(this),Lu(this),_r(19))};function $u(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function jf(g,C){var O=null;if(g.g==C){$u(g),Fu(g),g.g=null;var W=2}else if(Rt(g.h,C))O=C.D,cc(g.h,C),W=1;else return;if(g.G!=0){if(C.o)if(W==1){O=C.m?C.m.length:0,C=Date.now()-C.F;var le=g.B;W=Nu(),We(W,new _g(W,O)),Lo(g)}else _i(g);else if(le=C.s,le==3||le==0&&0<C.X||!(W==1&&L_(g,C)||W==2&&Lu(g)))switch(O&&0<O.length&&(C=g.h,C.i=C.i.concat(O)),le){case 1:za(g,5);break;case 4:za(g,10);break;case 3:za(g,6);break;default:za(g,2)}}}function Nf(g,C){let O=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(O*=2),O*C}function za(g,C){if(g.j.info("Error code "+C),C==2){var O=p(g.fb,g),W=g.Xa;const le=!W;W=new Ks(W||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ku(W,"https"),Zs(W),le?Jt(W.toString(),O):Pg(W.toString(),O)}else _r(2);g.G=0,g.l&&g.l.sa(C),Ag(g),Ig(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),_r(2)):(this.j.info("Failed to ping google.com"),_r(1))};function Ag(g){if(g.G=0,g.ka=[],g.l){const C=La(g.h);(C.length!=0||g.i.length!=0)&&(N(g.ka,C),N(g.ka,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.ra()}}function zu(g,C,O){var W=O instanceof Ks?Rn(O):new Ks(O);if(W.g!="")C&&(W.g=C+"."+W.g),Fa(W,W.s);else{var le=l.location;W=le.protocol,C=C?C+"."+le.hostname:le.hostname,le=+le.port;var ge=new Ks(null);W&&ku(ge,W),C&&(ge.g=C),le&&Fa(ge,le),O&&(ge.l=O),W=ge}return O=g.D,C=g.ya,O&&C&&mt(W,O,C),mt(W,"VER",g.la),uc(g,W),W}function Og(g,C,O){if(C&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Ca&&!g.pa?new xn(new Xs({eb:O})):new xn(g.pa),C.Ha(g.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sf(){}t=Sf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dc(){}dc.prototype.g=function(g,C){return new mr(g,C)};function mr(g,C){Ve.call(this),this.g=new Rg(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(g?g["X-WebChannel-Client-Profile"]=C.va:g={"X-WebChannel-Client-Profile":C.va}),this.g.S=g,(g=C&&C.Sb)&&!w(g)&&(this.g.m=g),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!w(C)&&(this.g.D=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new Js(this)}j(mr,Ve),mr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mr.prototype.close=function(){Mu(this.g)},mr.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var O={};O.__data__=g,g=O}else this.u&&(O={},O.__data__=Gi(g),g=O);C.i.push(new lc(C.Ya++,g)),C.G==3&&Lo(C)},mr.prototype.N=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,mr.aa.N.call(this)};function Zi(g){ju.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const O in C){g=O;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}j(Zi,ju);function Mg(){tf.call(this),this.status=1}j(Mg,tf);function Js(g){this.g=g}j(Js,Sf),Js.prototype.ua=function(){We(this.g,"a")},Js.prototype.ta=function(g){We(this.g,new Zi(g))},Js.prototype.sa=function(g){We(this.g,new Mg)},Js.prototype.ra=function(){We(this.g,"b")},dc.prototype.createWebChannel=dc.prototype.g,mr.prototype.send=mr.prototype.o,mr.prototype.open=mr.prototype.m,mr.prototype.close=mr.prototype.close,sM=function(){return new dc},rM=function(){return Nu()},nM=Oa,P1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ic.NO_ERROR=0,ic.TIMEOUT=8,ic.HTTP_ERROR=6,Qv=ic,Eu.COMPLETE="complete",tM=Eu,ef.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,rm=ef,xn.prototype.listenOnce=xn.prototype.L,xn.prototype.getLastError=xn.prototype.Ka,xn.prototype.getLastErrorCode=xn.prototype.Ba,xn.prototype.getStatus=xn.prototype.Z,xn.prototype.getResponseJson=xn.prototype.Oa,xn.prototype.getResponseText=xn.prototype.oa,xn.prototype.send=xn.prototype.ea,xn.prototype.setWithCredentials=xn.prototype.Ha,eM=xn}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});const hT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new tS("@firebase/firestore");function Ff(){return Zc.logLevel}function et(t,...e){if(Zc.logLevel<=Dt.DEBUG){const n=e.map(mS);Zc.debug(`Firestore (${Mh}): ${t}`,...n)}}function po(t,...e){if(Zc.logLevel<=Dt.ERROR){const n=e.map(mS);Zc.error(`Firestore (${Mh}): ${t}`,...n)}}function Hd(t,...e){if(Zc.logLevel<=Dt.WARN){const n=e.map(mS);Zc.warn(`Firestore (${Mh}): ${t}`,...n)}}function mS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t="Unexpected state"){const e=`FIRESTORE (${Mh}) INTERNAL ASSERTION FAILED: `+t;throw po(e),new Error(e)}function Yt(t,e){t||pt()}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Ta{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Or.UNAUTHENTICATED))}shutdown(){}}class aG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oG{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new io;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new io,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new io)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt(typeof r.accessToken=="string"),new iM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string"),new Or(e)}}class lG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new lG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dG{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Yt(this.o===void 0);const r=a=>{a.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string"),this.R=n.token,new uG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=hG(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function zt(t,e){return t<e?-1:t>e?1:0}function qd(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $e(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $e(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $e(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new hr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new hr(0,0))}static max(){return new yt(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r){n===void 0?n=0:n>e.length&&pt(),r===void 0?r=e.length-n:r>e.length-n&&pt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class on extends tp{construct(e,n,r){return new on(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new on(n)}static emptyPath(){return new on([])}}const fG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jr extends tp{construct(e,n,r){return new jr(e,n,r)}static isValidIdentifier(e){return fG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jr(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new $e(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $e(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $e(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new $e(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jr(n)}static emptyPath(){return new jr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.path=e}static fromPath(e){return new lt(on.fromString(e))}static fromName(e){return new lt(on.fromString(e).popFirst(5))}static empty(){return new lt(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&on.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return on.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new on(e.slice()))}}function mG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=yt.fromTimestamp(r===1e9?new hr(n+1,0):new hr(n,r));return new Il(s,lt.empty(),e)}function pG(t){return new Il(t.readTime,t.key,-1)}class Il{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Il(yt.min(),lt.empty(),-1)}static max(){return new Il(yt.max(),lt.empty(),-1)}}function gG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=lt.comparator(t.documentKey,e.documentKey),n!==0?n:zt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $p(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==vG)throw t;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.reject(n)}static resolve(e){return new Ee((n,r)=>{n(e)})}static reject(e){return new Ee((n,r)=>{r(e)})}static waitFor(e){return new Ee((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next(s=>s?Ee.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Ee((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new Ee((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function xG(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pS.oe=-1;function _0(t){return t==null}function Gy(t){return t===0&&1/t==-1/0}function _G(t){return typeof t=="number"&&Number.isInteger(t)&&!Gy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function du(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.comparator=e,this.root=n||br.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fv(this.root,e,this.comparator,!1)}getReverseIterator(){return new fv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fv(this.root,e,this.comparator,!0)}}class fv{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??br.RED,this.left=s??br.EMPTY,this.right=a??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new br(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return br.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1;br.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,n,r,s,a){return this}insert(e,n,r){return new br(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mT(this.data.getIterator())}getIteratorFrom(e){return new mT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Sr(this.comparator);return n.data=e,n}}class mT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.fields=e,e.sort(jr.comparator)}static empty(){return new Ds([])}unionWith(e){let n=new Sr(jr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ds(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new lM("Invalid base64 string: "+a):a}}(e);return new Cr(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Cr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const wG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Al(t){if(Yt(!!t),typeof t=="string"){let e=0;const n=wG.exec(t);if(Yt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(t.seconds),nanos:Vn(t.nanos)}}function Vn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qc(t){return typeof t=="string"?Cr.fromBase64String(t):Cr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gS(t){const e=t.mapValue.fields.__previous_value__;return w0(e)?gS(e):e}function np(t){const e=Al(t.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,n,r,s,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class rp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={mapValue:{}};function Yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?w0(t)?4:NG(t)?9007199254740991:jG(t)?10:11:pt()}function Na(t,e){if(t===e)return!0;const n=Yc(t);if(n!==Yc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return np(t).isEqual(np(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Al(s.timestampValue),l=Al(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Qc(s.bytesValue).isEqual(Qc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Vn(s.geoPointValue.latitude)===Vn(a.geoPointValue.latitude)&&Vn(s.geoPointValue.longitude)===Vn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Vn(s.integerValue)===Vn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Vn(s.doubleValue),l=Vn(a.doubleValue);return o===l?Gy(o)===Gy(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return qd(t.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(fT(o)!==fT(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Na(o[u],l[u])))return!1;return!0}(t,e);default:return pt()}}function sp(t,e){return(t.values||[]).find(n=>Na(n,e))!==void 0}function Wd(t,e){if(t===e)return 0;const n=Yc(t),r=Yc(e);if(n!==r)return zt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Vn(a.integerValue||a.doubleValue),u=Vn(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pT(t.timestampValue,e.timestampValue);case 4:return pT(np(t),np(e));case 5:return zt(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Qc(a),u=Qc(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=zt(l[d],u[d]);if(f!==0)return f}return zt(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=zt(Vn(a.latitude),Vn(o.latitude));return l!==0?l:zt(Vn(a.longitude),Vn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gT(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,f;const m=a.fields||{},p=o.fields||{},y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,j=(u=p.value)===null||u===void 0?void 0:u.arrayValue,b=zt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=j==null?void 0:j.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:gT(y,j)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===mv.mapValue&&o===mv.mapValue)return 0;if(a===mv.mapValue)return 1;if(o===mv.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const p=zt(u[m],f[m]);if(p!==0)return p;const y=Wd(l[u[m]],d[f[m]]);if(y!==0)return y}return zt(u.length,f.length)}(t.mapValue,e.mapValue);default:throw pt()}}function pT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return zt(t,e);const n=Al(t),r=Al(e),s=zt(n.seconds,r.seconds);return s!==0?s:zt(n.nanos,r.nanos)}function gT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Wd(n[s],r[s]);if(a)return a}return zt(n.length,r.length)}function Gd(t){return T1(t)}function T1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Al(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return lt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=T1(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${T1(n.fields[o])}`;return s+"}"}(t.mapValue):pt()}function Ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k1(t){return!!t&&"integerValue"in t}function vS(t){return!!t&&"arrayValue"in t}function vT(t){return!!t&&"nullValue"in t}function yT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yv(t){return!!t&&"mapValue"in t}function jG(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return du(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bm(n)}setAll(e){let n=jr.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=bm(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Yv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){du(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new ps(bm(this.value))}}function cM(t){const e=[];return du(t.fields,(n,r)=>{const s=new jr([n]);if(Yv(r)){const a=cM(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dr(e,0,yt.min(),yt.min(),yt.min(),ps.empty(),0)}static newFoundDocument(e,n,r,s){return new Dr(e,1,n,yt.min(),r,s,0)}static newNoDocument(e,n){return new Dr(e,2,n,yt.min(),yt.min(),ps.empty(),0)}static newUnknownDocument(e,n){return new Dr(e,3,n,yt.min(),yt.min(),ps.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n){this.position=e,this.inclusive=n}}function xT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=lt.comparator(lt.fromName(o.referenceValue),n.key):r=Wd(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function _T(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Na(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function SG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uM=class{};class er extends uM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CG(e,n,r):n==="array-contains"?new kG(e,r):n==="in"?new RG(e,r):n==="not-in"?new IG(e,r):n==="array-contains-any"?new AG(e,r):new er(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PG(e,r):new TG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wd(n,this.value)):n!==null&&Yc(this.value)===Yc(n)&&this.matchesComparison(Wd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends uM{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vi(e,n)}matches(e){return dM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dM(t){return t.op==="and"}function hM(t){return EG(t)&&dM(t)}function EG(t){for(const e of t.filters)if(e instanceof Vi)return!1;return!0}function R1(t){if(t instanceof er)return t.field.canonicalString()+t.op.toString()+Gd(t.value);if(hM(t))return t.filters.map(e=>R1(e)).join(",");{const e=t.filters.map(n=>R1(n)).join(",");return`${t.op}(${e})`}}function fM(t,e){return t instanceof er?function(r,s){return s instanceof er&&r.op===s.op&&r.field.isEqual(s.field)&&Na(r.value,s.value)}(t,e):t instanceof Vi?function(r,s){return s instanceof Vi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&fM(o,s.filters[l]),!0):!1}(t,e):void pt()}function mM(t){return t instanceof er?function(n){return`${n.field.canonicalString()} ${n.op} ${Gd(n.value)}`}(t):t instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(mM).join(" ,")+"}"}(t):"Filter"}class CG extends er{constructor(e,n,r){super(e,n,r),this.key=lt.fromName(r.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class PG extends er{constructor(e,n){super(e,"in",n),this.keys=pM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TG extends er{constructor(e,n){super(e,"not-in",n),this.keys=pM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>lt.fromName(r.referenceValue))}class kG extends er{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vS(n)&&sp(n.arrayValue,this.value)}}class RG extends er{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sp(this.value.arrayValue,n)}}class IG extends er{constructor(e,n){super(e,"not-in",n)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sp(this.value.arrayValue,n)}}class AG extends er{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function wT(t,e=null,n=[],r=[],s=null,a=null,o=null){return new OG(t,e,n,r,s,a,o)}function yS(t){const e=wt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>R1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),_0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gd(r)).join(",")),e.ue=n}return e.ue}function xS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_T(t.startAt,e.startAt)&&_T(t.endAt,e.endAt)}function I1(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MG(t,e,n,r,s,a,o,l){return new hu(t,e,n,r,s,a,o,l)}function b0(t){return new hu(t)}function bT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _S(t){return t.collectionGroup!==null}function kd(t){const e=wt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Sr(jr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new ip(a,r))}),n.has(jr.keyField().canonicalString())||e.ce.push(new ip(jr.keyField(),r))}return e.ce}function ya(t){const e=wt(t);return e.le||(e.le=DG(e,kd(t))),e.le}function DG(t,e){if(t.limitType==="F")return wT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new ip(s.field,a)});const n=t.endAt?new Kd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kd(t.startAt.position,t.startAt.inclusive):null;return wT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function A1(t,e){const n=t.filters.concat([e]);return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zy(t,e,n){return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function j0(t,e){return xS(ya(t),ya(e))&&t.limitType===e.limitType}function gM(t){return`${yS(ya(t))}|lt:${t.limitType}`}function nd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mM(s)).join(", ")}]`),_0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Gd(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Gd(s)).join(",")),`Target(${r})`}(ya(t))}; limitType=${t.limitType})`}function N0(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):lt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of kd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=xT(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,kd(r),s)||r.endAt&&!function(o,l,u){const d=xT(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,kd(r),s))}(t,e)}function LG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vM(t){return(e,n)=>{let r=!1;for(const s of kd(t)){const a=FG(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function FG(t,e,n){const r=t.field.isKeyField()?lt.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Wd(u,d):pt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){du(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return oM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=new kn(lt.comparator);function go(){return VG}const yM=new kn(lt.comparator);function sm(...t){let e=yM;for(const n of t)e=e.insert(n.key,n);return e}function xM(t){let e=yM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sc(){return jm()}function _M(){return jm()}function jm(){return new Dh(t=>t.toString(),(t,e)=>t.isEqual(e))}const $G=new kn(lt.comparator),zG=new Sr(lt.comparator);function Ot(...t){let e=zG;for(const n of t)e=e.add(n);return e}const UG=new Sr(zt);function BG(){return UG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gy(e)?"-0":e}}function wM(t){return{integerValue:""+t}}function HG(t,e){return _G(e)?wM(e):wS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this._=void 0}}function qG(t,e,n){return t instanceof ap?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&w0(a)&&(a=gS(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof op?jM(t,e):t instanceof lp?NM(t,e):function(s,a){const o=bM(s,a),l=jT(o)+jT(s.Pe);return k1(o)&&k1(s.Pe)?wM(l):wS(s.serializer,l)}(t,e)}function WG(t,e,n){return t instanceof op?jM(t,e):t instanceof lp?NM(t,e):n}function bM(t,e){return t instanceof Qy?function(r){return k1(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ap extends S0{}class op extends S0{constructor(e){super(),this.elements=e}}function jM(t,e){const n=SM(e);for(const r of t.elements)n.some(s=>Na(s,r))||n.push(r);return{arrayValue:{values:n}}}class lp extends S0{constructor(e){super(),this.elements=e}}function NM(t,e){let n=SM(e);for(const r of t.elements)n=n.filter(s=>!Na(s,r));return{arrayValue:{values:n}}}class Qy extends S0{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jT(t){return Vn(t.integerValue||t.doubleValue)}function SM(t){return vS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e,n){this.field=e,this.transform=n}}function KG(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof op&&s instanceof op||r instanceof lp&&s instanceof lp?qd(r.elements,s.elements,Na):r instanceof Qy&&s instanceof Qy?Na(r.Pe,s.Pe):r instanceof ap&&s instanceof ap}(t.transform,e.transform)}class ZG{constructor(e,n){this.version=e,this.transformResults=n}}class ns{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class E0{}function EM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C0(t.key,ns.none()):new Up(t.key,t.data,ns.none());{const n=t.data,r=ps.empty();let s=new Sr(jr.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Kl(t.key,r,new Ds(s.toArray()),ns.none())}}function QG(t,e,n){t instanceof Up?function(s,a,o){const l=s.value.clone(),u=ST(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Kl?function(s,a,o){if(!Xv(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=ST(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(CM(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Nm(t,e,n,r){return t instanceof Up?function(a,o,l,u){if(!Xv(a.precondition,o))return l;const d=a.value.clone(),f=ET(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kl?function(a,o,l,u){if(!Xv(a.precondition,o))return l;const d=ET(a.fieldTransforms,u,o),f=o.data;return f.setAll(CM(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return Xv(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function YG(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=bM(r.transform,s||null);a!=null&&(n===null&&(n=ps.empty()),n.set(r.field,a))}return n||null}function NT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qd(r,s,(a,o)=>KG(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Up extends E0{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kl extends E0{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ST(t,e,n){const r=new Map;Yt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,WG(o,l,n[s]))}return r}function ET(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,qG(a,o,e))}return r}class C0 extends E0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XG extends E0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&QG(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_M();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=EM(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ot())}isEqual(e){return this.batchId===e.batchId&&qd(this.mutations,e.mutations,(n,r)=>NT(n,r))&&qd(this.baseMutations,e.baseMutations,(n,r)=>NT(n,r))}}class bS{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Yt(e.mutations.length===r.length);let s=function(){return $G}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new bS(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eK=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn,Ft;function nK(t){switch(t){default:return pt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function PM(t){if(t===void 0)return po("GRPC error has no .code"),we.UNKNOWN;switch(t){case Qn.OK:return we.OK;case Qn.CANCELLED:return we.CANCELLED;case Qn.UNKNOWN:return we.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return we.INTERNAL;case Qn.UNAVAILABLE:return we.UNAVAILABLE;case Qn.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Qn.NOT_FOUND:return we.NOT_FOUND;case Qn.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Qn.ABORTED:return we.ABORTED;case Qn.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Qn.DATA_LOSS:return we.DATA_LOSS;default:return pt()}}(Ft=Qn||(Qn={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=new Rc([4294967295,4294967295],0);function CT(t){const e=rK().encode(t),n=new J4;return n.update(e),new Uint8Array(n.digest())}function PT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rc([n,r],0),new Rc([s,a],0)]}class jS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new im(`Invalid padding: ${n}`);if(r<0)throw new im(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new im(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new im(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rc.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Rc.fromNumber(r)));return s.compare(sK)===1&&(s=new Rc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=CT(e),[r,s]=PT(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new jS(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=CT(e),[r,s]=PT(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class im extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Bp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new P0(yt.min(),s,new kn(zt),go(),Ot())}}class Bp{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bp(r,n,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class TM{constructor(e,n){this.targetId=e,this.me=n}}class kM{constructor(e,n,r=Cr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class TT{constructor(){this.fe=0,this.ge=RT(),this.pe=Cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ot(),n=Ot(),r=Ot();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pt()}}),new Bp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=RT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iK{constructor(e){this.Le=e,this.Be=new Map,this.ke=go(),this.qe=kT(),this.Qe=new kn(zt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(I1(a))if(r===0){const o=new lt(a.path);this.Ue(n,o,Dr.newNoDocument(o,yt.min()))}else Yt(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Qc(r).toUint8Array()}catch(u){if(u instanceof lM)return Hd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new jS(o,s,a)}catch(u){return Hd(u instanceof im?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&I1(l.target)){const u=new lt(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Dr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=Ot();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new P0(e,n,this.Qe,this.ke,r);return this.ke=go(),this.qe=kT(),this.Qe=new kn(zt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new TT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Sr(zt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function kT(){return new kn(lt.comparator)}function RT(){return new kn(lt.comparator)}const aK={asc:"ASCENDING",desc:"DESCENDING"},oK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lK={and:"AND",or:"OR"};class cK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function O1(t,e){return t.useProto3Json||_0(e)?e:{value:e}}function Yy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uK(t,e){return Yy(t,e.toTimestamp())}function xa(t){return Yt(!!t),yt.fromTimestamp(function(n){const r=Al(n);return new hr(r.seconds,r.nanos)}(t))}function NS(t,e){return M1(t,e).canonicalString()}function M1(t,e){const n=function(s){return new on(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IM(t){const e=on.fromString(t);return Yt(LM(e)),e}function D1(t,e){return NS(t.databaseId,e.path)}function Nw(t,e){const n=IM(e);if(n.get(1)!==t.databaseId.projectId)throw new $e(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $e(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(OM(n))}function AM(t,e){return NS(t.databaseId,e)}function dK(t){const e=IM(t);return e.length===4?on.emptyPath():OM(e)}function L1(t){return new on(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OM(t){return Yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function IT(t,e,n){return{name:D1(t,e),fields:n.value.mapValue.fields}}function hK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Yt(f===void 0||typeof f=="string"),Cr.fromBase64String(f||"")):(Yt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Cr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?we.UNKNOWN:PM(d.code);return new $e(f,d.message||"")}(o);n=new kM(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nw(t,r.document.name),a=xa(r.document.updateTime),o=r.document.createTime?xa(r.document.createTime):yt.min(),l=new ps({mapValue:{fields:r.document.fields}}),u=Dr.newFoundDocument(s,a,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Jv(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nw(t,r.document),a=r.readTime?xa(r.readTime):yt.min(),o=Dr.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Jv([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nw(t,r.document),a=r.removedTargetIds||[];n=new Jv([],a,s,null)}else{if(!("filter"in e))return pt();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new tK(s,a),l=r.targetId;n=new TM(l,o)}}return n}function fK(t,e){let n;if(e instanceof Up)n={update:IT(t,e.key,e.value)};else if(e instanceof C0)n={delete:D1(t,e.key)};else if(e instanceof Kl)n={update:IT(t,e.key,e.data),updateMask:bK(e.fieldMask)};else{if(!(e instanceof XG))return pt();n={verify:D1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof ap)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof op)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qy)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw pt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:uK(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pt()}(t,e.precondition)),n}function mK(t,e){return t&&t.length>0?(Yt(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?xa(s.updateTime):xa(a);return o.isEqual(yt.min())&&(o=xa(a)),new ZG(o,s.transformResults||[])}(n,e))):[]}function pK(t,e){return{documents:[AM(t,e.path)]}}function gK(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AM(t,s);const a=function(d){if(d.length!==0)return DM(Vi.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:rd(p.field),direction:xK(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=O1(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function vK(t){let e=dK(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Yt(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const p=MM(m);return p instanceof Vi&&hM(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(j){return new ip(sd(j.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,_0(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,y=m.values||[];return new Kd(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new Kd(y,p)}(n.endAt)),MG(e,s,o,a,l,"F",u,d)}function yK(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sd(n.unaryFilter.field);return er.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=sd(n.unaryFilter.field);return er.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sd(n.unaryFilter.field);return er.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sd(n.unaryFilter.field);return er.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(t):t.fieldFilter!==void 0?function(n){return er.create(sd(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(r=>MM(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pt()}}(n.compositeFilter.op))}(t):pt()}function xK(t){return aK[t]}function _K(t){return oK[t]}function wK(t){return lK[t]}function rd(t){return{fieldPath:t.canonicalString()}}function sd(t){return jr.fromServerFormat(t.fieldPath)}function DM(t){return t instanceof er?function(n){if(n.op==="=="){if(yT(n.value))return{unaryFilter:{field:rd(n.field),op:"IS_NAN"}};if(vT(n.value))return{unaryFilter:{field:rd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yT(n.value))return{unaryFilter:{field:rd(n.field),op:"IS_NOT_NAN"}};if(vT(n.value))return{unaryFilter:{field:rd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rd(n.field),op:_K(n.op),value:n.value}}}(t):t instanceof Vi?function(n){const r=n.getFilters().map(s=>DM(s));return r.length===1?r[0]:{compositeFilter:{op:wK(n.op),filters:r}}}(t):pt()}function bK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,s,a=yt.min(),o=yt.min(),l=Cr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ul(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e){this.ct=e}}function NK(t){const e=vK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.un=new EK}addToCollectionParentIndex(e,n){return this.un.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(Il.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(Il.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class EK{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Sr(on.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Sr(on.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zd(0)}static kn(){return new Zd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(){this.changes=new Dh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Nm(r.mutation,s,Ds.empty(),hr.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ot()){const s=Sc();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=sm();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ot()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=go();const o=jm(),l=function(){return jm()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Kl)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Nm(f.mutation,d,f.mutation.getFieldMask(),hr.now())):o.set(d.key,Ds.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new PK(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=jm();let s=new kn((o,l)=>o-l),a=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ds.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||Ot()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=_M();f.forEach(p=>{if(!a.has(p)){const y=EM(n.get(p),r.get(p));y!==null&&m.set(p,y),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Ee.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_S(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Ee.resolve(Sc());let l=-1,u=a;return o.next(d=>Ee.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(f)?Ee.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ot())).next(f=>({batchId:l,changes:xM(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(r=>{let s=sm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=sm();return this.indexManager.getCollectionParents(e,a).next(l=>Ee.forEach(l,u=>{const d=function(m,p){return new hu(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Dr.newInvalidDocument(f)))});let l=sm();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Nm(f.mutation,d,Ds.empty(),hr.now()),N0(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xa(s.createTime)}}(n)),Ee.resolve()}getNamedQuery(e,n){return Ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:NK(s.bundledQuery),readTime:xa(s.readTime)}}(n)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(){this.overlays=new kn(lt.comparator),this.Ir=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sc();return Ee.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const s=Sc(),a=n.length+1,o=new lt(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Ee.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new kn((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Sc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Sc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return Ee.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eK(n,r));let a=this.Ir.get(n);a===void 0&&(a=Ot(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(){this.sessionToken=Cr.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.Tr=new Sr(gr.Er),this.dr=new Sr(gr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new gr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new gr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new lt(new on([])),r=new gr(n,e),s=new gr(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new lt(new on([])),r=new gr(n,e),s=new gr(n,e+1);let a=Ot();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new gr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return lt.comparator(e.key,n.key)||zt(e.wr,n.wr)}static Ar(e,n){return zt(e.wr,n.wr)||lt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Sr(gr.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JG(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new gr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ee.resolve(o)}lookupMutationBatch(e,n){return Ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gr(n,0),s=new gr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sr(zt);return n.forEach(s=>{const a=new gr(s,0),o=new gr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),Ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;lt.isDocumentKey(a)||(a=a.child(""));const o=new gr(new lt(a),0);let l=new Sr(zt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),Ee.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Yt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ee.forEach(n.mutations,s=>{const a=new gr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new gr(n,0),s=this.br.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e){this.Mr=e,this.docs=function(){return new kn(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(n))}getEntries(e,n){let r=go();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Dr.newInvalidDocument(s))}),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=go();const o=n.path,l=new lt(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||gG(pG(f),r)<=0||(s.has(f.key)||N0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,n,r,s){pt()}Or(e,n){return Ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MK(this)}getSize(e){return Ee.resolve(this.size)}}class MK extends CK{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e){this.persistence=e,this.Nr=new Dh(n=>yS(n),xS),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new SS,this.targetCount=0,this.kr=Zd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.Kn(n),Ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Ee.waitFor(a).next(()=>s)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pS(0),this.Kr=!1,this.Kr=!0,this.$r=new IK,this.referenceDelegate=e(this),this.Ur=new DK(this),this.indexManager=new SK,this.remoteDocumentCache=function(s){return new OK(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jK(n),this.Gr=new kK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new AK(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const s=new FK(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return Ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FK extends yG{constructor(e){super(),this.currentSequenceNumber=e}}class ES{constructor(e){this.persistence=e,this.Jr=new SS,this.Yr=null}static Zr(e){return new ES(e)}get Xr(){if(this.Yr)return this.Yr;throw pt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,r=>{const s=lt.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,yt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ot(),s=Ot();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new CS(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return b7()?8:xG(Ur())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new VK;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ff()<=Dt.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",nd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(Ff()<=Dt.DEBUG&&et("QueryEngine","Query:",nd(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ff()<=Dt.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",nd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ya(n))):Ee.resolve())}Yi(e,n){if(bT(n))return Ee.resolve(null);let r=ya(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zy(n,null,"F"),r=ya(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Ot(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Zy(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return bT(n)||s.isEqual(yt.min())?Ee.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?Ee.resolve(null):(Ff()<=Dt.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nd(n)),this.rs(e,o,n,mG(s,-1)).next(l=>l))})}ts(e,n){let r=new Sr(vM(e));return n.forEach((s,a)=>{N0(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Ff()<=Dt.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",nd(n)),this.Ji.getDocumentsMatchingQuery(e,n,Il.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new kn(zt),this._s=new Dh(a=>yS(a),xS),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TK(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function UK(t,e,n,r){return new zK(t,e,n,r)}async function FM(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=Ot();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function BK(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,p=m.keys();let y=Ee.resolve();return p.forEach(j=>{y=y.next(()=>f.getEntry(u,j)).next(b=>{const N=d.docVersions.get(j);Yt(N!==null),b.version.compareTo(N)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ot();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function VM(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HK(t,e){const n=wt(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const p=s.get(m);if(!p)return;l.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,m)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Cr.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),s=s.insert(m,y),function(b,N,_){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,f)&&l.push(n.Ur.updateTargetData(a,y))});let u=go(),d=Ot();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),l.push(qK(a,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(yt.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(f)}return Ee.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function qK(t,e,n){let r=Ot(),s=Ot();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=go();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(yt.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):et("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function WK(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GK(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,Ee.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ul(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function F1(t,e,n){const r=wt(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zp(o))throw o;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function AT(t,e,n){const r=wt(t);let s=yt.min(),a=Ot();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=wt(u),p=m._s.get(f);return p!==void 0?Ee.resolve(m.os.get(p)):m.Ur.getTargetData(d,f)}(r,o,ya(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:yt.min(),n?a:Ot())).next(l=>(KK(r,LG(e),l),{documents:l,Ts:a})))}function KK(t,e,n){let r=t.us.get(e)||yt.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class OT{constructor(){this.activeTargetIds=BG()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZK{constructor(){this.so=new OT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new OT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pv=null;function Sw(){return pv===null?pv=function(){return 268435456+Math.round(2147483648*Math.random())}():pv++,"0x"+pv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="WebChannelConnection";class JK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=Sw(),u=this.xo(n,r.toUriEncodedString());et("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(f=>(et("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Hd("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=YK[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Sw();return new Promise((o,l)=>{const u=new eM;u.setWithCredentials(!0),u.listenOnce(tM.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qv.NO_ERROR:const f=u.getResponseJson();et(Ir,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Qv.TIMEOUT:et(Ir,`RPC '${e}' ${a} timed out`),l(new $e(we.DEADLINE_EXCEEDED,"Request time out"));break;case Qv.HTTP_ERROR:const m=u.getStatus();if(et(Ir,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const j=function(N){const _=N.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(_)>=0?_:we.UNKNOWN}(y.status);l(new $e(j,y.message))}else l(new $e(we.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $e(we.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{et(Ir,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);et(Ir,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Sw(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sM(),l=rM(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");et(Ir,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let p=!1,y=!1;const j=new XK({Io:N=>{y?et(Ir,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(p||(et(Ir,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),et(Ir,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),b=(N,_,w)=>{N.listen(_,E=>{try{w(E)}catch(R){setTimeout(()=>{throw R},0)}})};return b(m,rm.EventType.OPEN,()=>{y||(et(Ir,`RPC '${e}' stream ${s} transport opened.`),j.yo())}),b(m,rm.EventType.CLOSE,()=>{y||(y=!0,et(Ir,`RPC '${e}' stream ${s} transport closed`),j.So())}),b(m,rm.EventType.ERROR,N=>{y||(y=!0,Hd(Ir,`RPC '${e}' stream ${s} transport errored:`,N),j.So(new $e(we.UNAVAILABLE,"The operation could not be completed")))}),b(m,rm.EventType.MESSAGE,N=>{var _;if(!y){const w=N.data[0];Yt(!!w);const E=w,R=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(R){et(Ir,`RPC '${e}' stream ${s} received error:`,R);const A=R.status;let B=function($){const P=Qn[$];if(P!==void 0)return PM(P)}(A),I=R.message;B===void 0&&(B=we.INTERNAL,I="Unknown error status: "+A+" with message "+R.message),y=!0,j.So(new $e(B,I)),m.close()}else et(Ir,`RPC '${e}' stream ${s} received:`,w),j.bo(w)}}),b(l,nM.STAT_EVENT,N=>{N.stat===P1.PROXY?et(Ir,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===P1.NOPROXY&&et(Ir,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function Ew(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){return new cK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&et("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r,s,a,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $M(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(po(n.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $e(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eZ extends zM{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=hK(this.serializer,e),r=function(a){if(!("targetChange"in a))return yt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?xa(o.readTime):yt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=L1(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=I1(u)?{documents:pK(a,u)}:{query:gK(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=RM(a,o.resumeToken);const d=O1(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(yt.min())>0){l.readTime=Yy(a,o.snapshotVersion.toTimestamp());const d=O1(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=yK(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=L1(this.serializer),n.removeTarget=e,this.a_(n)}}class tZ extends zM{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mK(e.writeResults,e.commitTime),r=xa(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=L1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fK(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $e(we.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,M1(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $e(we.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,M1(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $e(we.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(po(n),this.D_=!1):et("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{fu(this)&&(et("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=wt(u);d.L_.add(4),await Hp(d),d.q_.set("Unknown"),d.L_.delete(4),await k0(d)}(this))})}),this.q_=new rZ(r,s)}}async function k0(t){if(fu(t))for(const e of t.B_)await e(!0)}async function Hp(t){for(const e of t.B_)await e(!1)}function UM(t,e){const n=wt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),RS(n)?kS(n):Lh(n).r_()&&TS(n,e))}function PS(t,e){const n=wt(t),r=Lh(n);n.N_.delete(e),r.r_()&&BM(n,e),n.N_.size===0&&(r.r_()?r.o_():fu(n)&&n.q_.set("Unknown"))}function TS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lh(t).A_(e)}function BM(t,e){t.Q_.xe(e),Lh(t).R_(e)}function kS(t){t.Q_=new iK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Lh(t).start(),t.q_.v_()}function RS(t){return fu(t)&&!Lh(t).n_()&&t.N_.size>0}function fu(t){return wt(t).L_.size===0}function HM(t){t.Q_=void 0}async function iZ(t){t.q_.set("Online")}async function aZ(t){t.N_.forEach((e,n)=>{TS(t,e)})}async function oZ(t,e){HM(t),RS(t)?(t.q_.M_(e),kS(t)):t.q_.set("Unknown")}async function lZ(t,e,n){if(t.q_.set("Online"),e instanceof kM&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xy(t,r)}else if(e instanceof Jv?t.Q_.Ke(e):e instanceof TM?t.Q_.He(e):t.Q_.We(e),!n.isEqual(yt.min()))try{const r=await VM(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(d);f&&a.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(Cr.EMPTY_BYTE_STRING,f.snapshotVersion)),BM(a,u);const m=new ul(f.target,u,d,f.sequenceNumber);TS(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){et("RemoteStore","Failed to raise snapshot:",r),await Xy(t,r)}}async function Xy(t,e,n){if(!zp(e))throw e;t.L_.add(1),await Hp(t),t.q_.set("Offline"),n||(n=()=>VM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{et("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await k0(t)})}function qM(t,e){return e().catch(n=>Xy(t,n,e))}async function R0(t){const e=wt(t),n=Ol(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cZ(e);)try{const s=await WK(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,uZ(e,s)}catch(s){await Xy(e,s)}WM(e)&&GM(e)}function cZ(t){return fu(t)&&t.O_.length<10}function uZ(t,e){t.O_.push(e);const n=Ol(t);n.r_()&&n.V_&&n.m_(e.mutations)}function WM(t){return fu(t)&&!Ol(t).n_()&&t.O_.length>0}function GM(t){Ol(t).start()}async function dZ(t){Ol(t).p_()}async function hZ(t){const e=Ol(t);for(const n of t.O_)e.m_(n.mutations)}async function fZ(t,e,n){const r=t.O_.shift(),s=bS.from(r,e,n);await qM(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await R0(t)}async function mZ(t,e){e&&Ol(t).V_&&await async function(r,s){if(function(o){return nK(o)&&o!==we.ABORTED}(s.code)){const a=r.O_.shift();Ol(r).s_(),await qM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await R0(r)}}(t,e),WM(t)&&GM(t)}async function DT(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=fu(n);n.L_.add(3),await Hp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await k0(n)}async function pZ(t,e){const n=wt(t);e?(n.L_.delete(2),await k0(n)):e||(n.L_.add(2),await Hp(n),n.q_.set("Unknown"))}function Lh(t){return t.K_||(t.K_=function(n,r,s){const a=wt(n);return a.w_(),new eZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iZ.bind(null,t),Ro:aZ.bind(null,t),mo:oZ.bind(null,t),d_:lZ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),RS(t)?kS(t):t.q_.set("Unknown")):(await t.K_.stop(),HM(t))})),t.K_}function Ol(t){return t.U_||(t.U_=function(n,r,s){const a=wt(n);return a.w_(),new tZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dZ.bind(null,t),mo:mZ.bind(null,t),f_:hZ.bind(null,t),g_:fZ.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await R0(t)):(await t.U_.stop(),t.O_.length>0&&(et("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new IS(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function AS(t,e){if(po("AsyncQueue",`${e}: ${t}`),zp(t))return new $e(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||lt.comparator(n.key,r.key):(n,r)=>lt.comparator(n.key,r.key),this.keyedMap=sm(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new Rd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.W_=new kn(lt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qd{constructor(e,n,r,s,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Qd(e,n,Rd.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&j0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vZ{constructor(){this.queries=FT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=wt(n),a=s.queries;s.queries=FT(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new $e(we.ABORTED,"Firestore shutting down"))}}function FT(){return new Dh(t=>gM(t),j0)}async function OS(t,e){const n=wt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new gZ,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=AS(o,`Initialization of query '${nd(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&DS(n)}async function MS(t,e){const n=wt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yZ(t,e){const n=wt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&DS(n)}function xZ(t,e,n){const r=wt(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function DS(t){t.Y_.forEach(e=>{e.next()})}var V1,VT;(VT=V1||(V1={})).ea="default",VT.Cache="cache";class LS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==V1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.key=e}}class ZM{constructor(e){this.key=e}}class _Z{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=vM(e),this.Ra=new Rd(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new LT,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const p=s.get(f),y=N0(this.query,m)?m:null,j=!!p&&this.mutatedKeys.has(p.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;p&&y?p.data.isEqual(y.data)?j!==b&&(r.track({type:3,doc:y}),N=!0):this.ga(p,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(l=!0)):!p&&y?(r.track({type:0,doc:y}),N=!0):p&&!y&&(r.track({type:1,doc:p}),N=!0,(u||d)&&(l=!0)),N&&(y?(o=o.add(y),a=b?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(y,j){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return b(y)-b(j)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Qd(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new LT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ot(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ZM(r))}),this.da.forEach(r=>{e.has(r)||n.push(new KM(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ot();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bZ{constructor(e){this.key=e,this.va=!1}}class jZ{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Dh(l=>gM(l),j0),this.Ma=new Map,this.xa=new Set,this.Oa=new kn(lt.comparator),this.Na=new Map,this.La=new SS,this.Ba={},this.ka=new Map,this.qa=Zd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function NZ(t,e,n=!0){const r=tD(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await QM(r,e,n,!0),s}async function SZ(t,e){const n=tD(t);await QM(n,e,!0,!1)}async function QM(t,e,n,r){const s=await GK(t.localStore,ya(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await EZ(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&UM(t.remoteStore,s),l}async function EZ(t,e,n,r,s){t.Ka=(m,p,y)=>async function(b,N,_,w){let E=N.view.ma(_);E.ns&&(E=await AT(b.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,E)));const R=w&&w.targetChanges.get(N.targetId),A=w&&w.targetMismatches.get(N.targetId)!=null,B=N.view.applyChanges(E,b.isPrimaryClient,R,A);return zT(b,N.targetId,B.wa),B.snapshot}(t,m,p,y);const a=await AT(t.localStore,e,!0),o=new _Z(e,a.Ts),l=o.ma(a.documents),u=Bp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);zT(t,n,d.wa);const f=new wZ(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function CZ(t,e,n){const r=wt(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!j0(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await F1(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&PS(r.remoteStore,s.targetId),$1(r,s.targetId)}).catch($p)):($1(r,s.targetId),await F1(r.localStore,s.targetId,!0))}async function PZ(t,e){const n=wt(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),PS(n.remoteStore,r.targetId))}async function TZ(t,e,n){const r=DZ(t);try{const s=await function(o,l){const u=wt(o),d=hr.now(),f=l.reduce((y,j)=>y.add(j.key),Ot());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let j=go(),b=Ot();return u.cs.getEntries(y,f).next(N=>{j=N,j.forEach((_,w)=>{w.isValidDocument()||(b=b.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,j)).next(N=>{m=N;const _=[];for(const w of l){const E=YG(w,m.get(w.key).overlayedDocument);E!=null&&_.push(new Kl(w.key,E,cM(E.value.mapValue),ns.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,_,l)}).next(N=>{p=N;const _=N.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(y,N.batchId,_)})}).then(()=>({batchId:p.batchId,changes:xM(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new kn(zt)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await qp(r,s.changes),await R0(r.remoteStore)}catch(s){const a=AS(s,"Failed to persist write");n.reject(a)}}async function YM(t,e){const n=wt(t);try{const r=await HK(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(Yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Yt(o.va):s.removedDocuments.size>0&&(Yt(o.va),o.va=!1))}),await qp(n,r,e)}catch(r){await $p(r)}}function $T(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=wt(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const p of m.j_)p.Z_(l)&&(d=!0)}),d&&DS(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kZ(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new kn(lt.comparator);o=o.insert(a,Dr.newNoDocument(a,yt.min()));const l=Ot().add(a),u=new P0(yt.min(),new Map,new kn(zt),o,l);await YM(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),FS(r)}else await F1(r.localStore,e,!1).then(()=>$1(r,e,n)).catch($p)}async function RZ(t,e){const n=wt(t),r=e.batch.batchId;try{const s=await BK(n.localStore,e);JM(n,r,null),XM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qp(n,s)}catch(s){await $p(s)}}async function IZ(t,e,n){const r=wt(t);try{const s=await function(o,l){const u=wt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Yt(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);JM(r,e,n),XM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qp(r,s)}catch(s){await $p(s)}}function XM(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function JM(t,e,n){const r=wt(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||eD(t,r)})}function eD(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(PS(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),FS(t))}function zT(t,e,n){for(const r of n)r instanceof KM?(t.La.addReference(r.key,e),AZ(t,r)):r instanceof ZM?(et("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||eD(t,r.key)):pt()}function AZ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(et("SyncEngine","New document in limbo: "+n),t.xa.add(r),FS(t))}function FS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new lt(on.fromString(e)),r=t.qa.next();t.Na.set(r,new bZ(n)),t.Oa=t.Oa.insert(n,r),UM(t.remoteStore,new ul(ya(b0(n.path)),r,"TargetPurposeLimboResolution",pS.oe))}}async function qp(t,e,n){const r=wt(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=CS.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=wt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Ee.forEach(d,p=>Ee.forEach(p.$i,y=>f.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>Ee.forEach(p.Ui,y=>f.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!zp(m))throw m;et("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=f.os.get(p),j=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(j);f.os=f.os.insert(p,b)}}}(r.localStore,a))}async function OZ(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=await FM(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new $e(we.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qp(n,r.hs)}}function MZ(t,e){const n=wt(t),r=n.Na.get(e);if(r&&r.va)return Ot().add(r.key);{let s=Ot();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function tD(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kZ.bind(null,e),e.Ca.d_=yZ.bind(null,e.eventManager),e.Ca.$a=xZ.bind(null,e.eventManager),e}function DZ(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IZ.bind(null,e),e}class Jy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=T0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return UK(this.persistence,new $K,e.initialUser,this.serializer)}Ga(e){return new LK(ES.Zr,this.serializer)}Wa(e){return new ZK}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jy.provider={build:()=>new Jy};class z1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OZ.bind(null,this.syncEngine),await pZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vZ}()}createDatastore(e){const n=T0(e.databaseInfo.databaseId),r=function(a){return new JK(a)}(e.databaseInfo);return function(a,o,l,u){return new nZ(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new sZ(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>$T(this.syncEngine,n,0),function(){return MT.D()?new MT:new QK}())}createSyncEngine(e,n){return function(s,a,o,l,u,d,f){const m=new jZ(s,a,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=wt(s);et("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Hp(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}z1.provider={build:()=>new z1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Or.UNAUTHENTICATED,this.clientId=aM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{et("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(et("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=AS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cw(t,e){t.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await FM(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FZ(t);et("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>DT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>DT(e.remoteStore,s)),t._onlineComponents=e}async function FZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===we.FAILED_PRECONDITION||s.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hd("Error using user provided cache. Falling back to memory cache: "+n),await Cw(t,new Jy)}}else et("FirestoreClient","Using default OfflineComponentProvider"),await Cw(t,new Jy);return t._offlineComponents}async function nD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),await UT(t,t._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),await UT(t,new z1))),t._onlineComponents}function VZ(t){return nD(t).then(e=>e.syncEngine)}async function ex(t){const e=await nD(t),n=e.eventManager;return n.onListen=NZ.bind(null,e.syncEngine),n.onUnlisten=CZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PZ.bind(null,e.syncEngine),n}function $Z(t,e,n={}){const r=new io;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const f=new VS({next:p=>{f.Za(),o.enqueueAndForget(()=>MS(a,m));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new $e(we.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new $e(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new LS(b0(l.path),f,{includeMetadataChanges:!0,_a:!0});return OS(a,m)}(await ex(t),t.asyncQueue,e,n,r)),r.promise}function zZ(t,e,n={}){const r=new io;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const f=new VS({next:p=>{f.Za(),o.enqueueAndForget(()=>MS(a,m)),p.fromCache&&u.source==="server"?d.reject(new $e(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new LS(l,f,{includeMetadataChanges:!0,_a:!0});return OS(a,m)}(await ex(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e,n){if(!n)throw new $e(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UZ(t,e,n,r){if(e===!0&&r===!0)throw new $e(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HT(t){if(!lt.isDocumentKey(t))throw new $e(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qT(t){if(lt.isDocumentKey(t))throw new $e(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function I0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pt()}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $e(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=I0(t);throw new $e(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BZ(t,e){if(e<=0)throw new $e(we.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $e(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $e(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new $e(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new $e(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new $e(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iG;switch(r.type){case"firstParty":return new cG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $e(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BT.get(n);r&&(et("ComponentProvider","Removing Datastore"),BT.delete(n),r.terminate())}(this),Promise.resolve()}}function HZ(t,e,n,r={}){var s;const a=(t=rs(t,A0))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Hd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Or.MOCK_USER;else{l=l4(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $e(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Or(d)}t._authCredentials=new aG(new iM(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ka(this.firestore,e,this._query)}}class $r{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $r(this.firestore,e,this._key)}}class Nl extends ka{constructor(e,n,r){super(e,n,b0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $r(this.firestore,null,new lt(e))}withConverter(e){return new Nl(this.firestore,e,this._path)}}function Bt(t,e,...n){if(t=qt(t),sD("collection","path",e),t instanceof A0){const r=on.fromString(e,...n);return qT(r),new Nl(t,null,r)}{if(!(t instanceof $r||t instanceof Nl))throw new $e(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return qT(r),new Nl(t.firestore,null,r)}}function jt(t,e,...n){if(t=qt(t),arguments.length===1&&(e=aM.newId()),sD("doc","path",e),t instanceof A0){const r=on.fromString(e,...n);return HT(r),new $r(t,null,new lt(r))}{if(!(t instanceof $r||t instanceof Nl))throw new $e(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return HT(r),new $r(t.firestore,t instanceof Nl?t.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $M(this,"async_queue_retry"),this.Vu=()=>{const r=Ew();r&&et("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ew();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ew();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new io;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zp(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw po("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=IS.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&pt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function KT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Sa extends A0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new GT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GT(e),this._firestoreClient=void 0,await e}}}function iD(t,e){const n=typeof t=="object"?t:rS(),r=typeof t=="string"?t:"(default)",s=g0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=i4("firestore");a&&HZ(s,...a)}return s}function Wp(t){if(t._terminated)throw new $e(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qZ(t),t._firestoreClient}function qZ(t){var e,n,r;const s=t._freezeSettings(),a=function(l,u,d,f){return new bG(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new LZ(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yd(Cr.fromBase64String(e))}catch(n){throw new $e(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yd(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $e(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $e(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $e(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WZ=/^__.*__$/;class GZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Up(e,this.data,n,this.fieldTransforms)}}class aD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class US{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new US(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(oD(this.Cu)&&WZ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||T0(e)}Qu(e,n,r,s=!1){return new US({Cu:e,methodName:n,qu:r,path:jr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fh(t){const e=t._freezeSettings(),n=T0(t._databaseId);return new KZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BS(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);qS("Data must be an object, but it was:",o,r);const l=dD(r,o);let u,d;if(a.merge)u=new Ds(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const p=U1(e,m,n);if(!o.contains(p))throw new $e(we.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fD(f,p)||f.push(p)}u=new Ds(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new GZ(new ps(l),u,d)}class M0 extends O0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof M0}}class HS extends O0{_toFieldTransform(e){return new GG(e.path,new ap)}isEqual(e){return e instanceof HS}}function lD(t,e,n,r){const s=t.Qu(1,e,n);qS("Data must be an object, but it was:",s,r);const a=[],o=ps.empty();du(r,(u,d)=>{const f=WS(e,u,n);d=qt(d);const m=s.Nu(f);if(d instanceof M0)a.push(f);else{const p=Kp(d,m);p!=null&&(a.push(f),o.set(f,p))}});const l=new Ds(a);return new aD(o,l,s.fieldTransforms)}function cD(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[U1(e,r,n)],u=[s];if(a.length%2!=0)throw new $e(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(U1(e,a[p])),u.push(a[p+1]);const d=[],f=ps.empty();for(let p=l.length-1;p>=0;--p)if(!fD(d,l[p])){const y=l[p];let j=u[p];j=qt(j);const b=o.Nu(y);if(j instanceof M0)d.push(y);else{const N=Kp(j,b);N!=null&&(d.push(y),f.set(y,N))}}const m=new Ds(d);return new aD(f,m,o.fieldTransforms)}function uD(t,e,n,r=!1){return Kp(n,t.Qu(r?4:3,e))}function Kp(t,e){if(hD(t=qt(t)))return qS("Unsupported field value:",e,t),dD(t,e);if(t instanceof O0)return function(r,s){if(!oD(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=Kp(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HG(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=hr.fromDate(r);return{timestampValue:Yy(s.serializer,a)}}if(r instanceof hr){const a=new hr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yy(s.serializer,a)}}if(r instanceof $S)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yd)return{bytesValue:RM(s.serializer,r._byteString)};if(r instanceof $r){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:NS(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zS)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return wS(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${I0(r)}`)}(t,e)}function dD(t,e){const n={};return oM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(t,(r,s)=>{const a=Kp(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function hD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hr||t instanceof $S||t instanceof Yd||t instanceof $r||t instanceof O0||t instanceof zS)}function qS(t,e,n){if(!hD(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=I0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function U1(t,e,n){if((e=qt(e))instanceof Gp)return e._internalPath;if(typeof e=="string")return WS(t,e);throw tx("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZZ=new RegExp("[~\\*/\\[\\]]");function WS(t,e,n){if(e.search(ZZ)>=0)throw tx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gp(...e.split("."))._internalPath}catch{throw tx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tx(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $e(we.INVALID_ARGUMENT,l+t+u)}function fD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(D0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QZ extends GS{data(){return super.data()}}function D0(t,e){return typeof e=="string"?WS(t,e):e instanceof Gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $e(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KS{}class L0 extends KS{}function bn(t,e,...n){let r=[];e instanceof KS&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof ZS).length,l=a.filter(u=>u instanceof F0).length;if(o>1||o>0&&l>0)throw new $e(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class F0 extends L0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new F0(e,n,r)}_apply(e){const n=this._parse(e);return pD(e._query,n),new ka(e.firestore,e.converter,A1(e._query,n))}_parse(e){const n=Fh(e.firestore);return function(a,o,l,u,d,f,m){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $e(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){YT(m,f);const y=[];for(const j of m)y.push(QT(u,a,j));p={arrayValue:{values:y}}}else p=QT(u,a,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||YT(m,f),p=uD(l,o,m,f==="in"||f==="not-in");return er.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(t,e,n){const r=e,s=D0("where",t);return F0._create(s,r,n)}class ZS extends KS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ZS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)pD(o,u),o=A1(o,u)}(e._query,n),new ka(e.firestore,e.converter,A1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QS extends L0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QS(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new $e(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $e(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ip(a,o)}(e._query,this._field,this._direction);return new ka(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new hu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ZT(t,e="asc"){const n=e,r=D0("orderBy",t);return QS._create(r,n)}class YS extends L0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new YS(e,n,r)}_apply(e){return new ka(e.firestore,e.converter,Zy(e._query,this._limit,this._limitType))}}function oi(t){return BZ("limit",t),YS._create("limit",t,"F")}class XS extends L0{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new XS(e,n,r)}_apply(e){const n=XZ(e,this.type,this._docOrFields,this._inclusive);return new ka(e.firestore,e.converter,function(s,a){return new hu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,n))}}function YZ(...t){return XS._create("startAfter",t,!1)}function XZ(t,e,n,r){if(n[0]=qt(n[0]),n[0]instanceof GS)return function(a,o,l,u,d){if(!u)throw new $e(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const m of kd(a))if(m.field.isKeyField())f.push(Ky(o,u.key));else{const p=u.data.field(m.field);if(w0(p))throw new $e(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=m.field.canonicalString();throw new $e(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(p)}return new Kd(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Fh(t.firestore);return function(o,l,u,d,f,m){const p=o.explicitOrderBy;if(f.length>p.length)throw new $e(we.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let j=0;j<f.length;j++){const b=f[j];if(p[j].field.isKeyField()){if(typeof b!="string")throw new $e(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!_S(o)&&b.indexOf("/")!==-1)throw new $e(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const N=o.path.child(on.fromString(b));if(!lt.isDocumentKey(N))throw new $e(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const _=new lt(N);y.push(Ky(l,_))}else{const N=uD(u,d,b);y.push(N)}}return new Kd(y,m)}(t._query,t.firestore._databaseId,s,e,n,r)}}function QT(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new $e(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_S(e)&&n.indexOf("/")!==-1)throw new $e(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(on.fromString(n));if(!lt.isDocumentKey(r))throw new $e(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ky(t,new lt(r))}if(n instanceof $r)return Ky(t,n._key);throw new $e(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${I0(n)}.`)}function YT(t,e){if(!Array.isArray(t)||t.length===0)throw new $e(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pD(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $e(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $e(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JZ{convertValue(e,n="none"){switch(Yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return du(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Vn(o.doubleValue));return new zS(a)}convertGeoPoint(e){return new $S(Vn(e.latitude),Vn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const n=Al(e);return new hr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=on.fromString(e);Yt(LM(r));const s=new rp(r.get(1),r.get(3)),a=new lt(r.popFirst(5));return s.isEqual(n)||po(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gD extends GS{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ey(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(D0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ey extends gD{data(e={}){return super.data(e)}}class vD{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new am(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ey(this._firestore,this._userDataWriter,r.key,r,new am(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $e(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ey(s._firestore,s._userDataWriter,l.doc.key,l.doc,new am(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new ey(s._firestore,s._userDataWriter,l.doc.key,l.doc,new am(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:eQ(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function eQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){t=rs(t,$r);const e=rs(t.firestore,Sa);return $Z(Wp(e),t._key).then(n=>yD(e,t,n))}class eE extends JZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,n)}}function zn(t){t=rs(t,ka);const e=rs(t.firestore,Sa),n=Wp(e),r=new eE(e);return mD(t._query),zZ(n,t._query).then(s=>new vD(e,r,t,s))}function Ec(t,e,n){t=rs(t,$r);const r=rs(t.firestore,Sa),s=JS(t.converter,e,n);return Zp(r,[BS(Fh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ns.none())])}function On(t,e,n,...r){t=rs(t,$r);const s=rs(t.firestore,Sa),a=Fh(s);let o;return o=typeof(e=qt(e))=="string"||e instanceof Gp?cD(a,"updateDoc",t._key,e,n,r):lD(a,"updateDoc",t._key,e),Zp(s,[o.toMutation(t._key,ns.exists(!0))])}function Xd(t){return Zp(rs(t.firestore,Sa),[new C0(t._key,ns.none())])}function Ml(t,e){const n=rs(t.firestore,Sa),r=jt(t),s=JS(t.converter,e);return Zp(n,[BS(Fh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ns.exists(!1))]).then(()=>r)}function XT(t,...e){var n,r,s;t=qt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||KT(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(KT(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof $r)d=rs(t.firestore,Sa),f=b0(t._key.path),u={next:m=>{e[o]&&e[o](yD(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=rs(t,ka);d=rs(m.firestore,Sa),f=m._query;const p=new eE(d);u={next:y=>{e[o]&&e[o](new vD(d,p,m,y))},error:e[o+1],complete:e[o+2]},mD(t._query)}return function(p,y,j,b){const N=new VS(b),_=new LS(y,N,j);return p.asyncQueue.enqueueAndForget(async()=>OS(await ex(p),_)),()=>{N.Za(),p.asyncQueue.enqueueAndForget(async()=>MS(await ex(p),_))}}(Wp(d),f,l,u)}function Zp(t,e){return function(r,s){const a=new io;return r.asyncQueue.enqueueAndForget(async()=>TZ(await VZ(r),s,a)),a.promise}(Wp(t),e)}function yD(t,e,n){const r=n.docs.get(e._key),s=new eE(t);return new gD(t,s,e._key,r,new am(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fh(e)}set(e,n,r){this._verifyNotCommitted();const s=Pw(e,this._firestore),a=JS(s.converter,n,r),o=BS(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ns.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Pw(e,this._firestore);let o;return o=typeof(n=qt(n))=="string"||n instanceof Gp?cD(this._dataReader,"WriteBatch.update",a._key,n,r,s):lD(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,ns.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Pw(e,this._firestore);return this._mutations=this._mutations.concat(new C0(n._key,ns.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pw(t,e){if((t=qt(t)).firestore!==e)throw new $e(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function or(){return new HS("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){return Wp(t=rs(t,Sa)),new tQ(t,e=>Zp(t,e))}(function(e,n=!0){(function(s){Mh=s})(uu),qc(new kl("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Sa(new oG(r.getProvider("auth-internal")),new dG(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $e(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rp(d.options.projectId,f)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),pa(hT,"4.7.3",e),pa(hT,"4.7.3","esm2017")})();var nQ="firebase",rQ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pa(nQ,rQ,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="firebasestorage.googleapis.com",wD="storageBucket",sQ=2*60*1e3,iQ=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Ta{constructor(e,n,r=0){super(Tw(e),`Firebase Storage: ${n} (${Tw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dn||(Dn={}));function Tw(t){return"storage/"+t}function tE(){const t="An unknown error occurred, please check the error payload for server response.";return new Ln(Dn.UNKNOWN,t)}function aQ(t){return new Ln(Dn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oQ(t){return new Ln(Dn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ln(Dn.UNAUTHENTICATED,t)}function cQ(){return new Ln(Dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uQ(t){return new Ln(Dn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dQ(){return new Ln(Dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hQ(){return new Ln(Dn.CANCELED,"User canceled the upload/download.")}function fQ(t){return new Ln(Dn.INVALID_URL,"Invalid URL '"+t+"'.")}function mQ(t){return new Ln(Dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pQ(){return new Ln(Dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wD+"' property when initializing the app?")}function gQ(){return new Ln(Dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vQ(){return new Ln(Dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yQ(t){return new Ln(Dn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function B1(t){return new Ln(Dn.INVALID_ARGUMENT,t)}function bD(){return new Ln(Dn.APP_DELETED,"The Firebase app was deleted.")}function xQ(t){return new Ln(Dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sm(t,e){return new Ln(Dn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vf(t){throw new Ln(Dn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ls.makeFromUrl(e,n)}catch{return new Ls(e,"")}if(r.path==="")return r;throw mQ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${f}/b/${s}/o${p}`,"i"),j={bucket:1,path:3},b=n===_D?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",_=new RegExp(`^https?://${b}/${s}/${N}`,"i"),E=[{regex:l,indices:u,postModify:a},{regex:y,indices:j,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<E.length;R++){const A=E[R],B=A.regex.exec(e);if(B){const I=B[A.indices.bucket];let F=B[A.indices.path];F||(F=""),r=new Ls(I,F),A.postModify(r);break}}if(r==null)throw fQ(e);return r}}class _Q{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...N){d||(d=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(y,u())},N)}function p(){a&&clearTimeout(a)}function y(N,..._){if(d){p();return}if(N){p(),f.call(null,N,..._);return}if(u()||o){p(),f.call(null,N,..._);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,m(E)}let j=!1;function b(N){j||(j=!0,p(),!d&&(s!==null?(N||(l=2),clearTimeout(s),m(0)):N||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,b(!0)},n),b}function bQ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jQ(t){return t!==void 0}function NQ(t){return typeof t=="object"&&!Array.isArray(t)}function nE(t){return typeof t=="string"||t instanceof String}function JT(t){return rE()&&t instanceof Blob}function rE(){return typeof Blob<"u"}function ek(t,e,n,r){if(r<e)throw B1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw B1(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ic;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ic||(Ic={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQ{constructor(e,n,r,s,a,o,l,u,d,f,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,j)=>{this.resolve_=y,this.reject_=j,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new gv(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Ic.NO_ERROR,u=a.getStatus();if(!l||SQ(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===Ic.ABORT;r(!1,new gv(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new gv(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());jQ(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=tE();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?bD():hQ();o(u)}else{const u=dQ();o(u)}};this.canceled_?n(!1,new gv(!1,null,!0)):this.backoffId_=wQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gv{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RQ(t,e,n,r,s,a,o=!0){const l=jD(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return TQ(d,e),CQ(d,n),PQ(d,a),kQ(d,r),new EQ(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AQ(...t){const e=IQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rE())return new Blob(t);throw new Ln(Dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function OQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MQ(t){if(typeof atob>"u")throw yQ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kw{constructor(e,n){this.data=e,this.contentType=n||null}}function DQ(t,e){switch(t){case la.RAW:return new kw(ND(e));case la.BASE64:case la.BASE64URL:return new kw(SD(t,e));case la.DATA_URL:return new kw(FQ(e),VQ(e))}throw tE()}function ND(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LQ(t){let e;try{e=decodeURIComponent(t)}catch{throw Sm(la.DATA_URL,"Malformed data URL.")}return ND(e)}function SD(t,e){switch(t){case la.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Sm(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Sm(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MQ(e)}catch(s){throw s.message.includes("polyfill")?s:Sm(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class ED{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Sm(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$Q(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function FQ(t){const e=new ED(t);return e.base64?SD(la.BASE64,e.rest):LQ(e.rest)}function VQ(t){return new ED(t).contentType}function $Q(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){let r=0,s="";JT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(JT(this.data_)){const r=this.data_,s=OQ(r,e,n);return s===null?null:new il(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new il(r,!0)}}static getBlob(...e){if(rE()){const n=e.map(r=>r instanceof il?r.data_:r);return new il(AQ.apply(null,n))}else{const n=e.map(o=>nE(o)?DQ(la.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new il(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){let e;try{e=JSON.parse(t)}catch{return null}return NQ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(t,e){return e}class Gr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BQ}}let vv=null;function HQ(t){return!nE(t)||t.length<2?t:PD(t)}function TD(){if(vv)return vv;const t=[];t.push(new Gr("bucket")),t.push(new Gr("generation")),t.push(new Gr("metageneration")),t.push(new Gr("name","fullPath",!0));function e(a,o){return HQ(o)}const n=new Gr("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new Gr("size");return s.xform=r,t.push(s),t.push(new Gr("timeCreated")),t.push(new Gr("updated")),t.push(new Gr("md5Hash",null,!0)),t.push(new Gr("cacheControl",null,!0)),t.push(new Gr("contentDisposition",null,!0)),t.push(new Gr("contentEncoding",null,!0)),t.push(new Gr("contentLanguage",null,!0)),t.push(new Gr("contentType",null,!0)),t.push(new Gr("metadata","customMetadata",!0)),vv=t,vv}function qQ(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Ls(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function WQ(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return qQ(r,t),r}function kD(t,e,n){const r=CD(e);return r===null?null:WQ(t,r,n)}function GQ(t,e,n,r){const s=CD(e);if(s===null||!nE(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const f=t.bucket,m=t.fullPath,p="/b/"+o(f)+"/o/"+o(m),y=sE(p,n,r),j=jD({alt:"media",token:d});return y+j})[0]}function KQ(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class RD{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){if(!t)throw tE()}function ZQ(t,e){function n(r,s){const a=kD(t,s,e);return ID(a!==null),a}return n}function QQ(t,e){function n(r,s){const a=kD(t,s,e);return ID(a!==null),GQ(a,s,t.host,t._protocol)}return n}function AD(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=cQ():s=lQ():n.getStatus()===402?s=oQ(t.bucket):n.getStatus()===403?s=uQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YQ(t){const e=AD(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=aQ(t.path)),a.serverResponse=s.serverResponse,a}return n}function XQ(t,e,n){const r=e.fullServerUrl(),s=sE(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new RD(s,a,QQ(t,n),o);return l.errorHandler=YQ(e),l}function JQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eY(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=JQ(null,e)),r}function tY(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let E="";for(let R=0;R<2;R++)E=E+Math.random().toString().slice(2);return E}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=eY(e,r,s),f=KQ(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",y=il.getBlob(m,r,p);if(y===null)throw gQ();const j={name:d.fullPath},b=sE(a,t.host,t._protocol),N="POST",_=t.maxUploadRetryTime,w=new RD(b,N,ZQ(t,n),_);return w.urlParams=j,w.headers=o,w.body=y.uploadData(),w.errorHandler=AD(e),w}class nY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ic.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ic.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ic.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Vf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rY extends nY{initXhr(){this.xhr_.responseType="text"}}function OD(){return new rY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this._service=e,n instanceof Ls?this._location=n:this._location=Ls.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xc(e,n)}get root(){const e=new Ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PD(this._location.path)}get storage(){return this._service}get parent(){const e=zQ(this._location.path);if(e===null)return null;const n=new Ls(this._location.bucket,e);return new Xc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xQ(e)}}function sY(t,e,n){t._throwIfRoot("uploadBytes");const r=tY(t.storage,t._location,TD(),new il(e,!0),n);return t.storage.makeRequestWithTokens(r,OD).then(s=>({metadata:s,ref:t}))}function iY(t){t._throwIfRoot("getDownloadURL");const e=XQ(t.storage,t._location,TD());return t.storage.makeRequestWithTokens(e,OD).then(n=>{if(n===null)throw vQ();return n})}function aY(t,e){const n=UQ(t._location.path,e),r=new Ls(t._location.bucket,n);return new Xc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t){return/^[A-Za-z]+:\/\//.test(t)}function lY(t,e){return new Xc(t,e)}function MD(t,e){if(t instanceof iE){const n=t;if(n._bucket==null)throw pQ();const r=new Xc(n,n._bucket);return e!=null?MD(r,e):r}else return e!==void 0?aY(t,e):t}function cY(t,e){if(e&&oY(e)){if(t instanceof iE)return lY(t,e);throw B1("To use ref(service, url), the first argument must be a Storage instance.")}else return MD(t,e)}function tk(t,e){const n=e==null?void 0:e[wD];return n==null?null:Ls.makeFromBucketSpec(n,t)}function uY(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:l4(s,t.app.options.projectId))}class iE{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=_D,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sQ,this._maxUploadRetryTime=iQ,this._requests=new Set,s!=null?this._bucket=Ls.makeFromBucketSpec(s,this._host):this._bucket=tk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ls.makeFromBucketSpec(this._url,e):this._bucket=tk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ek("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ek("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xc(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new _Q(bD());{const o=RQ(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const nk="@firebase/storage",rk="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="storage";function aE(t,e,n){return t=qt(t),sY(t,e,n)}function oE(t){return t=qt(t),iY(t)}function lE(t,e){return t=qt(t),cY(t,e)}function dY(t=rS(),e){t=qt(t);const r=g0(t,DD).getImmediate({identifier:e}),s=i4("storage");return s&&hY(r,...s),r}function hY(t,e,n,r={}){uY(t,e,n,r)}function fY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new iE(n,r,s,e,uu)}function mY(){qc(new kl(DD,fY,"PUBLIC").setMultipleInstances(!0)),pa(nk,rk,""),pa(nk,rk,"esm2017")}mY();const pY={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},cE=d4(pY),ra=rG(cE),Ue=iD(cE),uE=dY(cE),LD=x.createContext(null),Rw=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},Nn=()=>{const t=x.useContext(LD);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},gY=({children:t})=>{const[e,n]=x.useState(null),[r,s]=x.useState(null),[a,o]=x.useState(!0),l=async b=>{try{const N=localStorage.getItem("pendingUserData");if(N){const _=JSON.parse(N);console.log("🚨 Données récupérées depuis localStorage:",_);const w=jt(Ue,"users",b.uid),E=await Vs(w);if(E.exists()){const R=E.data();console.log("📊 Données actuelles dans Firestore:",R);const A={...R,..._,id:b.uid,email:b.email,createdAt:R.createdAt||new Date,lastSeen:new Date},B=Rw(A);return await On(w,B),console.log("✅ Données récupérées et mises à jour !"),s(A),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),be.success("Données de profil récupérées !"),!0}}return!1}catch(N){return console.error("❌ Erreur récupération:",N),!1}},u=async(b,N)=>{const _=jt(Ue,"users",b.uid),w=await Vs(_);if(w.exists()){const E=w.data();if(console.log("📊 Données existantes trouvées:",E),!await l(b)){const A={id:b.uid,email:b.email,lastSeen:new Date};E.displayName||(A.displayName=b.displayName||"Utilisateur"),E.university||(A.university="Université non spécifiée"),E.fieldOfStudy||(A.fieldOfStudy="Non spécifié");const B=Rw(A);await On(_,B);const I={...E,...B};s(I),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const E={id:b.uid,email:b.email,displayName:b.displayName||(N==null?void 0:N.displayName)||"Utilisateur",photoURL:b.photoURL||(N==null?void 0:N.photoURL)||void 0,phone:(N==null?void 0:N.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(N==null?void 0:N.university)||"Université non spécifiée",otherUniversity:(N==null?void 0:N.otherUniversity)||void 0,studentId:(N==null?void 0:N.studentId)||void 0,graduationYear:(N==null?void 0:N.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(N==null?void 0:N.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(N==null?void 0:N.otherFieldOfStudy)||void 0,campus:(N==null?void 0:N.campus)||"Campus principal",bio:(N==null?void 0:N.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},R=Rw(E);await Ec(_,R),s(E)}},d=async(b,N)=>{try{await Fq(ra,b,N),be.success("Connexion réussie !")}catch(_){const w=_ instanceof Error?_.message:"Erreur inconnue";throw be.error("Erreur de connexion : "+w),_}},f=async(b,N,_,w)=>{try{const{user:E}=await L4(ra,b,N);await ep(E,{displayName:_}),await u(E,w),be.success("Compte créé avec succès !")}catch(E){const R=E instanceof Error?E.message:"Erreur inconnue";throw be.error("Erreur lors de la création du compte : "+R),E}},m=async()=>{try{const b=new Xa;b.setCustomParameters({prompt:"select_account"}),b.addScope("email"),b.addScope("profile"),await vW(ra,b)}catch(b){console.error("Google sign in error:",b);const N=b instanceof Error?b.message:"Erreur inconnue";throw be.error("Erreur de connexion Google : "+N),b}},p=async()=>{try{await qq(ra),s(null),be.success("Déconnexion réussie !")}catch(b){throw be.error("Erreur lors de la déconnexion"),b}},y=async b=>{if(!(!e||!r))try{const N=jt(Ue,"users",e.uid),_=Object.fromEntries(Object.entries(b).filter(([,w])=>w!==void 0));if(_.updatedAt=new Date,Object.keys(_).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await On(N,_),s({...r,..._}),console.log("Profil mis à jour avec:",_),be.success("Profil mis à jour !")}catch(N){throw console.error("Erreur mise à jour profil:",N),be.error("Erreur lors de la mise à jour du profil"),N}};x.useEffect(()=>{const b=Hq(ra,async _=>{n(_),_?await u(_):s(null),o(!1)});return(async()=>{try{const _=await xW(ra);_!=null&&_.user&&(await u(_.user),be.success("Connexion Google réussie !"))}catch(_){if(console.error("Redirect result error:",_),_&&typeof _=="object"&&"code"in _&&_.code!=="auth/null-user"){const w=_ instanceof Error?_.message:"Erreur inconnue";be.error("Erreur de connexion Google : "+w)}}})(),b},[]);const j={currentUser:e,userProfile:r,loading:a,signIn:d,signUp:f,signInWithGoogle:m,logout:p,updateUserProfile:y};return i.jsx(LD.Provider,{value:j,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FD=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},u)=>x.createElement("svg",{ref:u,...yY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:FD("lucide",s),...l},[...o.map(([d,f])=>x.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const n=x.forwardRef(({className:r,...s},a)=>x.createElement(xY,{ref:a,iconNode:e,className:FD(`lucide-${vY(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=je("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=je("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=je("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=je("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=je("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=je("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=je("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=je("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=je("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=je("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=je("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=je("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=je("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=je("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=je("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=je("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=je("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=je("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=je("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=je("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=je("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=je("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=je("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=je("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=je("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=je("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=je("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=je("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=je("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=je("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=je("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=je("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=je("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=je("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=je("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=je("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=je("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=je("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=je("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=je("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=je("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=je("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=je("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=je("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=je("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=je("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=je("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=je("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function lk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function U0(...t){return e=>{let n=!1;const r=t.map(s=>{const a=lk(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():lk(t[s],null)}}}}function ft(...t){return x.useCallback(U0(...t),t)}function Fl(t){const e=eX(t),n=x.forwardRef((r,s)=>{const{children:a,...o}=r,l=x.Children.toArray(a),u=l.find(nX);if(u){const d=u.props.children,f=l.map(m=>m===u?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:m);return i.jsx(e,{...o,ref:s,children:x.isValidElement(d)?x.cloneElement(d,void 0,f):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var JY=Fl("Slot");function eX(t){const e=x.forwardRef((n,r)=>{const{children:s,...a}=n;if(x.isValidElement(s)){const o=sX(s),l=rX(a,s.props);return s.type!==x.Fragment&&(l.ref=r?U0(r,o):o),x.cloneElement(s,l)}return x.Children.count(s)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tX=Symbol("radix.slottable");function nX(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tX}function rX(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const u=a(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function sX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function eL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=eL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function tL(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=eL(t))&&(r&&(r+=" "),r+=e);return r}const ck=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,uk=tL,B0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return uk(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(d=>{const f=n==null?void 0:n[d],m=a==null?void 0:a[d];if(f===null)return null;const p=ck(f)||ck(m);return s[d][p]}),l=n&&Object.entries(n).reduce((d,f)=>{let[m,p]=f;return p===void 0||(d[m]=p),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:m,className:p,...y}=f;return Object.entries(y).every(j=>{let[b,N]=j;return Array.isArray(N)?N.includes({...a,...l}[b]):{...a,...l}[b]===N})?[...d,m,p]:d},[]);return uk(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},fE="-",iX=t=>{const e=oX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(fE);return l[0]===""&&l.length!==1&&l.shift(),nL(l,e)||aX(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},nL=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?nL(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(fE);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},dk=/^\[(.+)\]$/,aX=t=>{if(dk.test(t)){const e=dk.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},oX=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return cX(Object.entries(t.classGroups),n).forEach(([a,o])=>{K1(o,r,a,e)}),r},K1=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:hk(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(lX(s)){K1(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{K1(o,hk(e,a),n,r)})})},hk=(t,e)=>{let n=t;return e.split(fE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},lX=t=>t.isThemeGetter,cX=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,uX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},rL="!",dX=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const u=[];let d=0,f=0,m;for(let N=0;N<l.length;N++){let _=l[N];if(d===0){if(_===s&&(r||l.slice(N,N+a)===e)){u.push(l.slice(f,N)),f=N+a;continue}if(_==="/"){m=N;continue}}_==="["?d++:_==="]"&&d--}const p=u.length===0?l:l.substring(f),y=p.startsWith(rL),j=y?p.substring(1):p,b=m&&m>f?m-f:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:b}};return n?l=>n({className:l,parseClassName:o}):o},hX=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},fX=t=>({cache:uX(t.cacheSize),parseClassName:dX(t),...iX(t)}),mX=/\s+/,pX=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(mX);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:y}=n(d);let j=!!y,b=r(j?p.substring(0,y):p);if(!b){if(!j){l=d+(l.length>0?" "+l:l);continue}if(b=r(p),!b){l=d+(l.length>0?" "+l:l);continue}j=!1}const N=hX(f).join(":"),_=m?N+rL:N,w=_+b;if(a.includes(w))continue;a.push(w);const E=s(b,j);for(let R=0;R<E.length;++R){const A=E[R];a.push(_+A)}l=d+(l.length>0?" "+l:l)}return l};function gX(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=sL(e))&&(r&&(r+=" "),r+=n);return r}const sL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=sL(t[r]))&&(n&&(n+=" "),n+=e);return n};function vX(t,...e){let n,r,s,a=o;function o(u){const d=e.reduce((f,m)=>m(f),t());return n=fX(d),r=n.cache.get,s=n.cache.set,a=l,l(u)}function l(u){const d=r(u);if(d)return d;const f=pX(u,n);return s(u,f),f}return function(){return a(gX.apply(null,arguments))}}const hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},iL=/^\[(?:([a-z-]+):)?(.+)\]$/i,yX=/^\d+\/\d+$/,xX=new Set(["px","full","screen"]),_X=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wX=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bX=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jX=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wa=t=>Id(t)||xX.has(t)||yX.test(t),Uo=t=>Bh(t,"length",IX),Id=t=>!!t&&!Number.isNaN(Number(t)),Mw=t=>Bh(t,"number",Id),$f=t=>!!t&&Number.isInteger(Number(t)),SX=t=>t.endsWith("%")&&Id(t.slice(0,-1)),Nt=t=>iL.test(t),Bo=t=>_X.test(t),EX=new Set(["length","size","percentage"]),CX=t=>Bh(t,EX,aL),PX=t=>Bh(t,"position",aL),TX=new Set(["image","url"]),kX=t=>Bh(t,TX,OX),RX=t=>Bh(t,"",AX),zf=()=>!0,Bh=(t,e,n)=>{const r=iL.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},IX=t=>wX.test(t)&&!bX.test(t),aL=()=>!1,AX=t=>jX.test(t),OX=t=>NX.test(t),MX=()=>{const t=hn("colors"),e=hn("spacing"),n=hn("blur"),r=hn("brightness"),s=hn("borderColor"),a=hn("borderRadius"),o=hn("borderSpacing"),l=hn("borderWidth"),u=hn("contrast"),d=hn("grayscale"),f=hn("hueRotate"),m=hn("invert"),p=hn("gap"),y=hn("gradientColorStops"),j=hn("gradientColorStopPositions"),b=hn("inset"),N=hn("margin"),_=hn("opacity"),w=hn("padding"),E=hn("saturate"),R=hn("scale"),A=hn("sepia"),B=hn("skew"),I=hn("space"),F=hn("translate"),$=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Nt,e],D=()=>[Nt,e],k=()=>["",Wa,Uo],G=()=>["auto",Id,Nt],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Nt],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Id,Nt];return{cacheSize:500,separator:":",theme:{colors:[zf],spacing:[Wa,Uo],blur:["none","",Bo,Nt],brightness:q(),borderColor:[t],borderRadius:["none","","full",Bo,Nt],borderSpacing:D(),borderWidth:k(),contrast:q(),grayscale:H(),hueRotate:q(),invert:H(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[SX,Uo],inset:M(),margin:M(),opacity:q(),padding:D(),saturate:q(),scale:q(),sepia:H(),skew:q(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Nt]}],container:["container"],columns:[{columns:[Bo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Nt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$f,Nt]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Nt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",$f,Nt]}],"grid-cols":[{"grid-cols":[zf]}],"col-start-end":[{col:["auto",{span:["full",$f,Nt]},Nt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[zf]}],"row-start-end":[{row:["auto",{span:[$f,Nt]},Nt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Nt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Nt,e]}],"min-w":[{"min-w":[Nt,e,"min","max","fit"]}],"max-w":[{"max-w":[Nt,e,"none","full","min","max","fit","prose",{screen:[Bo]},Bo]}],h:[{h:[Nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bo,Uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mw]}],"font-family":[{font:[zf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Nt]}],"line-clamp":[{"line-clamp":["none",Id,Mw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wa,Nt]}],"list-image":[{"list-image":["none",Nt]}],"list-style-type":[{list:["none","disc","decimal",Nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wa,Uo]}],"underline-offset":[{"underline-offset":["auto",Wa,Nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),PX]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kX]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ae()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[Wa,Nt]}],"outline-w":[{outline:[Wa,Uo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Wa,Uo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Bo,RX]}],"shadow-color":[{shadow:[zf]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Bo,Nt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[E]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Nt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Nt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[$f,Nt]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Wa,Uo,Mw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},DX=vX(MX);function it(...t){return DX(tL(t))}const Z1=B0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?JY:"button";return i.jsx(o,{className:it(Z1({variant:e,size:n,className:t})),ref:a,...s})});te.displayName="Button";const rt=x.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:it("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));rt.displayName="Input";function Fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function LX(t,e){const n=x.createContext(e),r=a=>{const{children:o,...l}=a,u=x.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(a){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function Pr(t,e=[]){let n=[];function r(a,o){const l=x.createContext(o),u=n.length;n=[...n,o];const d=m=>{var _;const{scope:p,children:y,...j}=m,b=((_=p==null?void 0:p[t])==null?void 0:_[u])||l,N=x.useMemo(()=>j,Object.values(j));return i.jsx(b.Provider,{value:N,children:y})};d.displayName=a+"Provider";function f(m,p){var b;const y=((b=p==null?void 0:p[t])==null?void 0:b[u])||l,j=x.useContext(y);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[d,f]}const s=()=>{const a=n.map(o=>x.createContext(o));return function(l){const u=(l==null?void 0:l[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,FX(s,...e)]}function FX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const m=u(a)[`__scope${d}`];return{...l,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Wn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},VX=nN[" useInsertionEffect ".trim().toString()]||Wn;function Bs({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=$X({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const d=x.useCallback(f=>{var m;if(l){const p=zX(f)?f(t):f;p!==t&&((m=o.current)==null||m.call(o,p))}else a(f)},[l,t,a,o]);return[u,d]}function $X({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),s=x.useRef(n),a=x.useRef(e);return VX(()=>{a.current=e},[e]),x.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function zX(t){return typeof t=="function"}var UX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=UX.reduce((t,e)=>{const n=Fl(`Primitive.${e}`),r=x.forwardRef((s,a)=>{const{asChild:o,...l}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function oL(t,e){t&&Ah.flushSync(()=>t.dispatchEvent(e))}function Xp(t){const e=t+"CollectionProvider",[n,r]=Pr(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:N,children:_}=b,w=ue.useRef(null),E=ue.useRef(new Map).current;return i.jsx(s,{scope:N,itemMap:E,collectionRef:w,children:_})};o.displayName=e;const l=t+"CollectionSlot",u=Fl(l),d=ue.forwardRef((b,N)=>{const{scope:_,children:w}=b,E=a(l,_),R=ft(N,E.collectionRef);return i.jsx(u,{ref:R,children:w})});d.displayName=l;const f=t+"CollectionItemSlot",m="data-radix-collection-item",p=Fl(f),y=ue.forwardRef((b,N)=>{const{scope:_,children:w,...E}=b,R=ue.useRef(null),A=ft(N,R),B=a(f,_);return ue.useEffect(()=>(B.itemMap.set(R,{ref:R,...E}),()=>void B.itemMap.delete(R))),i.jsx(p,{[m]:"",ref:A,children:w})});y.displayName=f;function j(b){const N=a(t+"CollectionConsumer",b);return ue.useCallback(()=>{const w=N.collectionRef.current;if(!w)return[];const E=Array.from(w.querySelectorAll(`[${m}]`));return Array.from(N.itemMap.values()).sort((B,I)=>E.indexOf(B.ref.current)-E.indexOf(I.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},j,r]}var BX=x.createContext(void 0);function mu(t){const e=x.useContext(BX);return t||e||"ltr"}function yr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function HX(t,e=globalThis==null?void 0:globalThis.document){const n=yr(t);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var qX="DismissableLayer",Q1="dismissableLayer.update",WX="dismissableLayer.pointerDownOutside",GX="dismissableLayer.focusOutside",fk,lL=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=t,d=x.useContext(lL),[f,m]=x.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=x.useState({}),j=ft(e,I=>m(I)),b=Array.from(d.layers),[N]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(N),w=f?b.indexOf(f):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,R=w>=_,A=QX(I=>{const F=I.target,$=[...d.branches].some(P=>P.contains(F));!R||$||(s==null||s(I),o==null||o(I),I.defaultPrevented||l==null||l())},p),B=YX(I=>{const F=I.target;[...d.branches].some(P=>P.contains(F))||(a==null||a(I),o==null||o(I),I.defaultPrevented||l==null||l())},p);return HX(I=>{w===d.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},p),x.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(fk=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),mk(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=fk)}},[f,p,n,d]),x.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),mk())},[f,d]),x.useEffect(()=>{const I=()=>y({});return document.addEventListener(Q1,I),()=>document.removeEventListener(Q1,I)},[]),i.jsx(Ge.div,{...u,ref:j,style:{pointerEvents:E?R?"auto":"none":void 0,...t.style},onFocusCapture:Fe(t.onFocusCapture,B.onFocusCapture),onBlurCapture:Fe(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Fe(t.onPointerDownCapture,A.onPointerDownCapture)})});Jp.displayName=qX;var KX="DismissableLayerBranch",ZX=x.forwardRef((t,e)=>{const n=x.useContext(lL),r=x.useRef(null),s=ft(e,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(Ge.div,{...t,ref:s})});ZX.displayName=KX;function QX(t,e=globalThis==null?void 0:globalThis.document){const n=yr(t),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){cL(WX,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function YX(t,e=globalThis==null?void 0:globalThis.document){const n=yr(t),r=x.useRef(!1);return x.useEffect(()=>{const s=a=>{a.target&&!r.current&&cL(GX,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mk(){const t=new CustomEvent(Q1);document.dispatchEvent(t)}function cL(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?oL(s,a):s.dispatchEvent(a)}var Dw=0;function H0(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??pk()),document.body.insertAdjacentElement("beforeend",t[1]??pk()),Dw++,()=>{Dw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dw--}},[])}function pk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lw="focusScope.autoFocusOnMount",Fw="focusScope.autoFocusOnUnmount",gk={bubbles:!1,cancelable:!0},XX="FocusScope",eg=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,u]=x.useState(null),d=yr(s),f=yr(a),m=x.useRef(null),p=ft(e,b=>u(b)),y=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let b=function(E){if(y.paused||!l)return;const R=E.target;l.contains(R)?m.current=R:qo(m.current,{select:!0})},N=function(E){if(y.paused||!l)return;const R=E.relatedTarget;R!==null&&(l.contains(R)||qo(m.current,{select:!0}))},_=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&qo(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",N);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",N),w.disconnect()}}},[r,l,y.paused]),x.useEffect(()=>{if(l){yk.add(y);const b=document.activeElement;if(!l.contains(b)){const _=new CustomEvent(Lw,gk);l.addEventListener(Lw,d),l.dispatchEvent(_),_.defaultPrevented||(JX(sJ(uL(l)),{select:!0}),document.activeElement===b&&qo(l))}return()=>{l.removeEventListener(Lw,d),setTimeout(()=>{const _=new CustomEvent(Fw,gk);l.addEventListener(Fw,f),l.dispatchEvent(_),_.defaultPrevented||qo(b??document.body,{select:!0}),l.removeEventListener(Fw,f),yk.remove(y)},0)}}},[l,d,f,y]);const j=x.useCallback(b=>{if(!n&&!r||y.paused)return;const N=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(N&&_){const w=b.currentTarget,[E,R]=eJ(w);E&&R?!b.shiftKey&&_===R?(b.preventDefault(),n&&qo(E,{select:!0})):b.shiftKey&&_===E&&(b.preventDefault(),n&&qo(R,{select:!0})):_===w&&b.preventDefault()}},[n,r,y.paused]);return i.jsx(Ge.div,{tabIndex:-1,...o,ref:p,onKeyDown:j})});eg.displayName=XX;function JX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(qo(r,{select:e}),document.activeElement!==n)return}function eJ(t){const e=uL(t),n=vk(e,t),r=vk(e.reverse(),t);return[n,r]}function uL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vk(t,e){for(const n of t)if(!tJ(n,{upTo:e}))return n}function tJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function nJ(t){return t instanceof HTMLInputElement&&"select"in t}function qo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&nJ(t)&&e&&t.select()}}var yk=rJ();function rJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xk(t,e),t.unshift(e)},remove(e){var n;t=xk(t,e),(n=t[0])==null||n.resume()}}}function xk(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function sJ(t){return t.filter(e=>e.tagName!=="A")}var iJ=nN[" useId ".trim().toString()]||(()=>{}),aJ=0;function $s(t){const[e,n]=x.useState(iJ());return Wn(()=>{n(r=>r??String(aJ++))},[t]),e?`radix-${e}`:""}const oJ=["top","right","bottom","left"],Vl=Math.min,As=Math.max,sx=Math.round,yv=Math.floor,_a=t=>({x:t,y:t}),lJ={left:"right",right:"left",bottom:"top",top:"bottom"},cJ={start:"end",end:"start"};function Y1(t,e,n){return As(t,Vl(e,n))}function yo(t,e){return typeof t=="function"?t(e):t}function xo(t){return t.split("-")[0]}function Hh(t){return t.split("-")[1]}function mE(t){return t==="x"?"y":"x"}function pE(t){return t==="y"?"height":"width"}function ua(t){return["top","bottom"].includes(xo(t))?"y":"x"}function gE(t){return mE(ua(t))}function uJ(t,e,n){n===void 0&&(n=!1);const r=Hh(t),s=gE(t),a=pE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=ix(o)),[o,ix(o)]}function dJ(t){const e=ix(t);return[X1(t),e,X1(e)]}function X1(t){return t.replace(/start|end/g,e=>cJ[e])}function hJ(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function fJ(t,e,n,r){const s=Hh(t);let a=hJ(xo(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(X1)))),a}function ix(t){return t.replace(/left|right|bottom|top/g,e=>lJ[e])}function mJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function dL(t){return typeof t!="number"?mJ(t):{top:t,right:t,bottom:t,left:t}}function ax(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function _k(t,e,n){let{reference:r,floating:s}=t;const a=ua(e),o=gE(e),l=pE(o),u=xo(e),d=a==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let y;switch(u){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Hh(e)){case"start":y[o]-=p*(n&&d?-1:1);break;case"end":y[o]+=p*(n&&d?-1:1);break}return y}const pJ=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:m}=_k(d,r,u),p=r,y={},j=0;for(let b=0;b<l.length;b++){const{name:N,fn:_}=l[b],{x:w,y:E,data:R,reset:A}=await _({x:f,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});f=w??f,m=E??m,y={...y,[N]:{...y[N],...R}},A&&j<=50&&(j++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(d=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:f,y:m}=_k(d,p,u)),b=-1)}return{x:f,y:m,placement:p,strategy:s,middlewareData:y}};async function dp(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:p=!1,padding:y=0}=yo(e,t),j=dL(y),N=l[p?m==="floating"?"reference":"floating":m],_=ax(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(N)))==null||n?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:u})),w=m==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),R=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},A=ax(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:E,strategy:u}):w);return{top:(_.top-A.top+j.top)/R.y,bottom:(A.bottom-_.bottom+j.bottom)/R.y,left:(_.left-A.left+j.left)/R.x,right:(A.right-_.right+j.right)/R.x}}const gJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:u}=e,{element:d,padding:f=0}=yo(t,e)||{};if(d==null)return{};const m=dL(f),p={x:n,y:r},y=gE(s),j=pE(y),b=await o.getDimensions(d),N=y==="y",_=N?"top":"left",w=N?"bottom":"right",E=N?"clientHeight":"clientWidth",R=a.reference[j]+a.reference[y]-p[y]-a.floating[j],A=p[y]-a.reference[y],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let I=B?B[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(B)))&&(I=l.floating[E]||a.floating[j]);const F=R/2-A/2,$=I/2-b[j]/2-1,P=Vl(m[_],$),M=Vl(m[w],$),D=P,k=I-b[j]-M,G=I/2-b[j]/2+F,se=Y1(D,G,k),ae=!u.arrow&&Hh(s)!=null&&G!==se&&a.reference[j]/2-(G<D?P:M)-b[j]/2<0,K=ae?G<D?G-D:G-k:0;return{[y]:p[y]+K,data:{[y]:se,centerOffset:G-se-K,...ae&&{alignmentOffset:K}},reset:ae}}}),vJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:b=!0,...N}=yo(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const _=xo(s),w=ua(l),E=xo(l)===l,R=await(u.isRTL==null?void 0:u.isRTL(d.floating)),A=p||(E||!b?[ix(l)]:dJ(l)),B=j!=="none";!p&&B&&A.push(...fJ(l,b,j,R));const I=[l,...A],F=await dp(e,N),$=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&$.push(F[_]),m){const G=uJ(s,o,R);$.push(F[G[0]],F[G[1]])}if(P=[...P,{placement:s,overflows:$}],!$.every(G=>G<=0)){var M,D;const G=(((M=a.flip)==null?void 0:M.index)||0)+1,se=I[G];if(se&&(!(m==="alignment"?w!==ua(se):!1)||P.every(z=>z.overflows[0]>0&&ua(z.placement)===w)))return{data:{index:G,overflows:P},reset:{placement:se}};let ae=(D=P.filter(K=>K.overflows[0]<=0).sort((K,z)=>K.overflows[1]-z.overflows[1])[0])==null?void 0:D.placement;if(!ae)switch(y){case"bestFit":{var k;const K=(k=P.filter(z=>{if(B){const H=ua(z.placement);return H===w||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,V)=>H+V,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:k[0];K&&(ae=K);break}case"initialPlacement":ae=l;break}if(s!==ae)return{reset:{placement:ae}}}return{}}}};function wk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bk(t){return oJ.some(e=>t[e]>=0)}const yJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=yo(t,e);switch(r){case"referenceHidden":{const a=await dp(e,{...s,elementContext:"reference"}),o=wk(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:bk(o)}}}case"escaped":{const a=await dp(e,{...s,altBoundary:!0}),o=wk(a,n.floating);return{data:{escapedOffsets:o,escaped:bk(o)}}}default:return{}}}}};async function xJ(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=xo(n),l=Hh(n),u=ua(n)==="y",d=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,m=yo(e,t);let{mainAxis:p,crossAxis:y,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof j=="number"&&(y=l==="end"?j*-1:j),u?{x:y*f,y:p*d}:{x:p*d,y:y*f}}const _J=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,u=await xJ(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:o}}}}},wJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:N=>{let{x:_,y:w}=N;return{x:_,y:w}}},...u}=yo(t,e),d={x:n,y:r},f=await dp(e,u),m=ua(xo(s)),p=mE(m);let y=d[p],j=d[m];if(a){const N=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=y+f[N],E=y-f[_];y=Y1(w,y,E)}if(o){const N=m==="y"?"top":"left",_=m==="y"?"bottom":"right",w=j+f[N],E=j-f[_];j=Y1(w,j,E)}const b=l.fn({...e,[p]:y,[m]:j});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:a,[m]:o}}}}}},bJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=yo(t,e),f={x:n,y:r},m=ua(s),p=mE(m);let y=f[p],j=f[m];const b=yo(l,e),N=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=p==="y"?"height":"width",R=a.reference[p]-a.floating[E]+N.mainAxis,A=a.reference[p]+a.reference[E]-N.mainAxis;y<R?y=R:y>A&&(y=A)}if(d){var _,w;const E=p==="y"?"width":"height",R=["top","left"].includes(xo(s)),A=a.reference[m]-a.floating[E]+(R&&((_=o.offset)==null?void 0:_[m])||0)+(R?0:N.crossAxis),B=a.reference[m]+a.reference[E]+(R?0:((w=o.offset)==null?void 0:w[m])||0)-(R?N.crossAxis:0);j<A?j=A:j>B&&(j=B)}return{[p]:y,[m]:j}}}},jJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:u=()=>{},...d}=yo(t,e),f=await dp(e,d),m=xo(s),p=Hh(s),y=ua(s)==="y",{width:j,height:b}=a.floating;let N,_;m==="top"||m==="bottom"?(N=m,_=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=m,N=p==="end"?"top":"bottom");const w=b-f.top-f.bottom,E=j-f.left-f.right,R=Vl(b-f[N],w),A=Vl(j-f[_],E),B=!e.middlewareData.shift;let I=R,F=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(F=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=w),B&&!p){const P=As(f.left,0),M=As(f.right,0),D=As(f.top,0),k=As(f.bottom,0);y?F=j-2*(P!==0||M!==0?P+M:As(f.left,f.right)):I=b-2*(D!==0||k!==0?D+k:As(f.top,f.bottom))}await u({...e,availableWidth:F,availableHeight:I});const $=await o.getDimensions(l.floating);return j!==$.width||b!==$.height?{reset:{rects:!0}}:{}}}};function q0(){return typeof window<"u"}function qh(t){return hL(t)?(t.nodeName||"").toLowerCase():"#document"}function zs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ra(t){var e;return(e=(hL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hL(t){return q0()?t instanceof Node||t instanceof zs(t).Node:!1}function $i(t){return q0()?t instanceof Element||t instanceof zs(t).Element:!1}function Ea(t){return q0()?t instanceof HTMLElement||t instanceof zs(t).HTMLElement:!1}function jk(t){return!q0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zs(t).ShadowRoot}function tg(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=zi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function NJ(t){return["table","td","th"].includes(qh(t))}function W0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function vE(t){const e=yE(),n=$i(t)?zi(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function SJ(t){let e=$l(t);for(;Ea(e)&&!rh(e);){if(vE(e))return e;if(W0(e))return null;e=$l(e)}return null}function yE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rh(t){return["html","body","#document"].includes(qh(t))}function zi(t){return zs(t).getComputedStyle(t)}function G0(t){return $i(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $l(t){if(qh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||jk(t)&&t.host||Ra(t);return jk(e)?e.host:e}function fL(t){const e=$l(t);return rh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ea(e)&&tg(e)?e:fL(e)}function hp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=fL(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=zs(s);if(a){const l=J1(o);return e.concat(o,o.visualViewport||[],tg(s)?s:[],l&&n?hp(l):[])}return e.concat(s,hp(s,[],n))}function J1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mL(t){const e=zi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ea(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=sx(n)!==a||sx(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function xE(t){return $i(t)?t:t.contextElement}function Ad(t){const e=xE(t);if(!Ea(e))return _a(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=mL(e);let o=(a?sx(n.width):n.width)/r,l=(a?sx(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const EJ=_a(0);function pL(t){const e=zs(t);return!yE()||!e.visualViewport?EJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==zs(t)?!1:e}function eu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=xE(t);let o=_a(1);e&&(r?$i(r)&&(o=Ad(r)):o=Ad(t));const l=CJ(a,n,r)?pL(a):_a(0);let u=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,f=s.width/o.x,m=s.height/o.y;if(a){const p=zs(a),y=r&&$i(r)?zs(r):r;let j=p,b=J1(j);for(;b&&r&&y!==j;){const N=Ad(b),_=b.getBoundingClientRect(),w=zi(b),E=_.left+(b.clientLeft+parseFloat(w.paddingLeft))*N.x,R=_.top+(b.clientTop+parseFloat(w.paddingTop))*N.y;u*=N.x,d*=N.y,f*=N.x,m*=N.y,u+=E,d+=R,j=zs(b),b=J1(j)}}return ax({width:f,height:m,x:u,y:d})}function _E(t,e){const n=G0(t).scrollLeft;return e?e.left+n:eu(Ra(t)).left+n}function gL(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:_E(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function PJ(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=Ra(r),l=e?W0(e.floating):!1;if(r===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},d=_a(1);const f=_a(0),m=Ea(r);if((m||!m&&!a)&&((qh(r)!=="body"||tg(o))&&(u=G0(r)),Ea(r))){const y=eu(r);d=Ad(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const p=o&&!m&&!a?gL(o,u,!0):_a(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+p.x,y:n.y*d.y-u.scrollTop*d.y+f.y+p.y}}function TJ(t){return Array.from(t.getClientRects())}function kJ(t){const e=Ra(t),n=G0(t),r=t.ownerDocument.body,s=As(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=As(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_E(t);const l=-n.scrollTop;return zi(r).direction==="rtl"&&(o+=As(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function RJ(t,e){const n=zs(t),r=Ra(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;const d=yE();(!d||d&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:a,height:o,x:l,y:u}}function IJ(t,e){const n=eu(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Ea(t)?Ad(t):_a(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,u=s*a.x,d=r*a.y;return{width:o,height:l,x:u,y:d}}function Nk(t,e,n){let r;if(e==="viewport")r=RJ(t,n);else if(e==="document")r=kJ(Ra(t));else if($i(e))r=IJ(e,n);else{const s=pL(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ax(r)}function vL(t,e){const n=$l(t);return n===e||!$i(n)||rh(n)?!1:zi(n).position==="fixed"||vL(n,e)}function AJ(t,e){const n=e.get(t);if(n)return n;let r=hp(t,[],!1).filter(l=>$i(l)&&qh(l)!=="body"),s=null;const a=zi(t).position==="fixed";let o=a?$l(t):t;for(;$i(o)&&!rh(o);){const l=zi(o),u=vE(o);!u&&l.position==="fixed"&&(s=null),(a?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||tg(o)&&!u&&vL(t,o))?r=r.filter(f=>f!==o):s=l,o=$l(o)}return e.set(t,r),r}function OJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?W0(e)?[]:AJ(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,f)=>{const m=Nk(e,f,s);return d.top=As(m.top,d.top),d.right=Vl(m.right,d.right),d.bottom=Vl(m.bottom,d.bottom),d.left=As(m.left,d.left),d},Nk(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function MJ(t){const{width:e,height:n}=mL(t);return{width:e,height:n}}function DJ(t,e,n){const r=Ea(e),s=Ra(e),a=n==="fixed",o=eu(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const u=_a(0);function d(){u.x=_E(s)}if(r||!r&&!a)if((qh(e)!=="body"||tg(s))&&(l=G0(e)),r){const y=eu(e,!0,a,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else s&&d();a&&!r&&s&&d();const f=s&&!r&&!a?gL(s,l):_a(0),m=o.left+l.scrollLeft-u.x-f.x,p=o.top+l.scrollTop-u.y-f.y;return{x:m,y:p,width:o.width,height:o.height}}function Vw(t){return zi(t).position==="static"}function Sk(t,e){if(!Ea(t)||zi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ra(t)===n&&(n=n.ownerDocument.body),n}function yL(t,e){const n=zs(t);if(W0(t))return n;if(!Ea(t)){let s=$l(t);for(;s&&!rh(s);){if($i(s)&&!Vw(s))return s;s=$l(s)}return n}let r=Sk(t,e);for(;r&&NJ(r)&&Vw(r);)r=Sk(r,e);return r&&rh(r)&&Vw(r)&&!vE(r)?n:r||SJ(t)||n}const LJ=async function(t){const e=this.getOffsetParent||yL,n=this.getDimensions,r=await n(t.floating);return{reference:DJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function FJ(t){return zi(t).direction==="rtl"}const VJ={convertOffsetParentRelativeRectToViewportRelativeRect:PJ,getDocumentElement:Ra,getClippingRect:OJ,getOffsetParent:yL,getElementRects:LJ,getClientRects:TJ,getDimensions:MJ,getScale:Ad,isElement:$i,isRTL:FJ};function xL(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $J(t,e){let n=null,r;const s=Ra(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const d=t.getBoundingClientRect(),{left:f,top:m,width:p,height:y}=d;if(l||e(),!p||!y)return;const j=yv(m),b=yv(s.clientWidth-(f+p)),N=yv(s.clientHeight-(m+y)),_=yv(f),E={rootMargin:-j+"px "+-b+"px "+-N+"px "+-_+"px",threshold:As(0,Vl(1,u))||1};let R=!0;function A(B){const I=B[0].intersectionRatio;if(I!==u){if(!R)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!xL(d,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(A,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(t)}return o(!0),a}function zJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=xE(t),f=s||a?[...d?hp(d):[],...hp(e)]:[];f.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),a&&_.addEventListener("resize",n)});const m=d&&l?$J(d,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(_=>{let[w]=_;w&&w.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(e)})),n()}),d&&!u&&y.observe(d),y.observe(e));let j,b=u?eu(t):null;u&&N();function N(){const _=eu(t);b&&!xL(b,_)&&n(),b=_,j=requestAnimationFrame(N)}return n(),()=>{var _;f.forEach(w=>{s&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),m==null||m(),(_=y)==null||_.disconnect(),y=null,u&&cancelAnimationFrame(j)}}const UJ=_J,BJ=wJ,HJ=vJ,qJ=jJ,WJ=yJ,Ek=gJ,GJ=bJ,KJ=(t,e,n)=>{const r=new Map,s={platform:VJ,...n},a={...s.platform,_c:r};return pJ(t,e,{...s,platform:a})};var ZJ=typeof document<"u",QJ=function(){},ty=ZJ?x.useLayoutEffect:QJ;function ox(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ox(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!ox(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function _L(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ck(t,e){const n=_L(t);return Math.round(e*n)/n}function $w(t){const e=x.useRef(t);return ty(()=>{e.current=t}),e}function YJ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[f,m]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,y]=x.useState(r);ox(p,r)||y(r);const[j,b]=x.useState(null),[N,_]=x.useState(null),w=x.useCallback(z=>{z!==B.current&&(B.current=z,b(z))},[]),E=x.useCallback(z=>{z!==I.current&&(I.current=z,_(z))},[]),R=a||j,A=o||N,B=x.useRef(null),I=x.useRef(null),F=x.useRef(f),$=u!=null,P=$w(u),M=$w(s),D=$w(d),k=x.useCallback(()=>{if(!B.current||!I.current)return;const z={placement:e,strategy:n,middleware:p};M.current&&(z.platform=M.current),KJ(B.current,I.current,z).then(H=>{const V={...H,isPositioned:D.current!==!1};G.current&&!ox(F.current,V)&&(F.current=V,Ah.flushSync(()=>{m(V)}))})},[p,e,n,M,D]);ty(()=>{d===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,m(z=>({...z,isPositioned:!1})))},[d]);const G=x.useRef(!1);ty(()=>(G.current=!0,()=>{G.current=!1}),[]),ty(()=>{if(R&&(B.current=R),A&&(I.current=A),R&&A){if(P.current)return P.current(R,A,k);k()}},[R,A,k,P,$]);const se=x.useMemo(()=>({reference:B,floating:I,setReference:w,setFloating:E}),[w,E]),ae=x.useMemo(()=>({reference:R,floating:A}),[R,A]),K=x.useMemo(()=>{const z={position:n,left:0,top:0};if(!ae.floating)return z;const H=Ck(ae.floating,f.x),V=Ck(ae.floating,f.y);return l?{...z,transform:"translate("+H+"px, "+V+"px)",..._L(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:V}},[n,l,ae.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:k,refs:se,elements:ae,floatingStyles:K}),[f,k,se,ae,K])}const XJ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ek({element:r.current,padding:s}).fn(n):{}:r?Ek({element:r,padding:s}).fn(n):{}}}},JJ=(t,e)=>({...UJ(t),options:[t,e]}),eee=(t,e)=>({...BJ(t),options:[t,e]}),tee=(t,e)=>({...GJ(t),options:[t,e]}),nee=(t,e)=>({...HJ(t),options:[t,e]}),ree=(t,e)=>({...qJ(t),options:[t,e]}),see=(t,e)=>({...WJ(t),options:[t,e]}),iee=(t,e)=>({...XJ(t),options:[t,e]});var aee="Arrow",wL=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(Ge.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});wL.displayName=aee;var oee=wL;function K0(t){const[e,n]=x.useState(void 0);return Wn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var wE="Popper",[bL,Wh]=Pr(wE),[lee,jL]=bL(wE),NL=t=>{const{__scopePopper:e,children:n}=t,[r,s]=x.useState(null);return i.jsx(lee,{scope:e,anchor:r,onAnchorChange:s,children:n})};NL.displayName=wE;var SL="PopperAnchor",EL=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=jL(SL,n),o=x.useRef(null),l=ft(e,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Ge.div,{...s,ref:l})});EL.displayName=SL;var bE="PopperContent",[cee,uee]=bL(bE),CL=x.forwardRef((t,e)=>{var xe,Y,ne,ee,ie,fe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:j,...b}=t,N=jL(bE,n),[_,w]=x.useState(null),E=ft(e,_e=>w(_e)),[R,A]=x.useState(null),B=K0(R),I=(B==null?void 0:B.width)??0,F=(B==null?void 0:B.height)??0,$=r+(a!=="center"?"-"+a:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},M=Array.isArray(d)?d:[d],D=M.length>0,k={padding:P,boundary:M.filter(hee),altBoundary:D},{refs:G,floatingStyles:se,placement:ae,isPositioned:K,middlewareData:z}=YJ({strategy:"fixed",placement:$,whileElementsMounted:(..._e)=>zJ(..._e,{animationFrame:y==="always"}),elements:{reference:N.anchor},middleware:[JJ({mainAxis:s+F,alignmentAxis:o}),u&&eee({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?tee():void 0,...k}),u&&nee({...k}),ree({...k,apply:({elements:_e,rects:Ie,availableWidth:Ce,availableHeight:he})=>{const{width:De,height:qe}=Ie.reference,vt=_e.floating.style;vt.setProperty("--radix-popper-available-width",`${Ce}px`),vt.setProperty("--radix-popper-available-height",`${he}px`),vt.setProperty("--radix-popper-anchor-width",`${De}px`),vt.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),R&&iee({element:R,padding:l}),fee({arrowWidth:I,arrowHeight:F}),p&&see({strategy:"referenceHidden",...k})]}),[H,V]=kL(ae),q=yr(j);Wn(()=>{K&&(q==null||q())},[K,q]);const J=(xe=z.arrow)==null?void 0:xe.x,me=(Y=z.arrow)==null?void 0:Y.y,Pe=((ne=z.arrow)==null?void 0:ne.centerOffset)!==0,[Me,oe]=x.useState();return Wn(()=>{_&&oe(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:K?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(ee=z.transformOrigin)==null?void 0:ee.x,(ie=z.transformOrigin)==null?void 0:ie.y].join(" "),...((fe=z.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(cee,{scope:n,placedSide:H,onArrowChange:A,arrowX:J,arrowY:me,shouldHideArrow:Pe,children:i.jsx(Ge.div,{"data-side":H,"data-align":V,...b,ref:E,style:{...b.style,animation:K?void 0:"none"}})})})});CL.displayName=bE;var PL="PopperArrow",dee={top:"bottom",right:"left",bottom:"top",left:"right"},TL=x.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=uee(PL,r),o=dee[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(oee,{...s,ref:n,style:{...s.style,display:"block"}})})});TL.displayName=PL;function hee(t){return t!==null}var fee=t=>({name:"transformOrigin",options:t,fn(e){var N,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((N=s.arrow)==null?void 0:N.centerOffset)!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,f]=kL(n),m={start:"0%",center:"50%",end:"100%"}[f],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,y=(((w=s.arrow)==null?void 0:w.y)??0)+u/2;let j="",b="";return d==="bottom"?(j=o?m:`${p}px`,b=`${-u}px`):d==="top"?(j=o?m:`${p}px`,b=`${r.floating.height+u}px`):d==="right"?(j=`${-u}px`,b=o?m:`${y}px`):d==="left"&&(j=`${r.floating.width+u}px`,b=o?m:`${y}px`),{data:{x:j,y:b}}}});function kL(t){const[e,n="center"]=t.split("-");return[e,n]}var jE=NL,Z0=EL,NE=CL,SE=TL,mee="Portal",ng=x.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=x.useState(!1);Wn(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?aU.createPortal(i.jsx(Ge.div,{...r,ref:e}),o):null});ng.displayName=mee;function pee(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Tr=t=>{const{present:e,children:n}=t,r=gee(e),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=ft(r.ref,vee(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:a}):null};Tr.displayName="Presence";function gee(t){const[e,n]=x.useState(),r=x.useRef(null),s=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[l,u]=pee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=xv(r.current);a.current=l==="mounted"?d:"none"},[l]),Wn(()=>{const d=r.current,f=s.current;if(f!==t){const p=a.current,y=xv(d);t?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),Wn(()=>{if(e){let d;const f=e.ownerDocument.defaultView??window,m=y=>{const b=xv(r.current).includes(y.animationName);if(y.target===e&&b&&(u("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},p=y=>{y.target===e&&(a.current=xv(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function xv(t){return(t==null?void 0:t.animationName)||"none"}function vee(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zw="rovingFocusGroup.onEntryFocus",yee={bubbles:!1,cancelable:!0},rg="RovingFocusGroup",[ej,RL,xee]=Xp(rg),[_ee,Q0]=Pr(rg,[xee]),[wee,bee]=_ee(rg),IL=x.forwardRef((t,e)=>i.jsx(ej.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(ej.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(jee,{...t,ref:e})})}));IL.displayName=rg;var jee=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=t,p=x.useRef(null),y=ft(e,p),j=mu(a),[b,N]=Bs({prop:o,defaultProp:l??null,onChange:u,caller:rg}),[_,w]=x.useState(!1),E=yr(d),R=RL(n),A=x.useRef(!1),[B,I]=x.useState(0);return x.useEffect(()=>{const F=p.current;if(F)return F.addEventListener(zw,E),()=>F.removeEventListener(zw,E)},[E]),i.jsx(wee,{scope:n,orientation:r,dir:j,loop:s,currentTabStopId:b,onItemFocus:x.useCallback(F=>N(F),[N]),onItemShiftTab:x.useCallback(()=>w(!0),[]),onFocusableItemAdd:x.useCallback(()=>I(F=>F+1),[]),onFocusableItemRemove:x.useCallback(()=>I(F=>F-1),[]),children:i.jsx(Ge.div,{tabIndex:_||B===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...t.style},onMouseDown:Fe(t.onMouseDown,()=>{A.current=!0}),onFocus:Fe(t.onFocus,F=>{const $=!A.current;if(F.target===F.currentTarget&&$&&!_){const P=new CustomEvent(zw,yee);if(F.currentTarget.dispatchEvent(P),!P.defaultPrevented){const M=R().filter(ae=>ae.focusable),D=M.find(ae=>ae.active),k=M.find(ae=>ae.id===b),se=[D,k,...M].filter(Boolean).map(ae=>ae.ref.current);ML(se,f)}}A.current=!1}),onBlur:Fe(t.onBlur,()=>w(!1))})})}),AL="RovingFocusGroupItem",OL=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,u=$s(),d=a||u,f=bee(AL,n),m=f.currentTabStopId===d,p=RL(n),{onFocusableItemAdd:y,onFocusableItemRemove:j,currentTabStopId:b}=f;return x.useEffect(()=>{if(r)return y(),()=>j()},[r,y,j]),i.jsx(ej.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:i.jsx(Ge.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Fe(t.onMouseDown,N=>{r?f.onItemFocus(d):N.preventDefault()}),onFocus:Fe(t.onFocus,()=>f.onItemFocus(d)),onKeyDown:Fe(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){f.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const _=Eee(N,f.orientation,f.dir);if(_!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let E=p().filter(R=>R.focusable).map(R=>R.ref.current);if(_==="last")E.reverse();else if(_==="prev"||_==="next"){_==="prev"&&E.reverse();const R=E.indexOf(N.currentTarget);E=f.loop?Cee(E,R+1):E.slice(R+1)}setTimeout(()=>ML(E))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:b!=null}):o})})});OL.displayName=AL;var Nee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function See(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Eee(t,e,n){const r=See(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Nee[r]}function ML(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Cee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var DL=IL,LL=OL,Pee=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ku=new WeakMap,_v=new WeakMap,wv={},Uw=0,FL=function(t){return t&&(t.host||FL(t.parentNode))},Tee=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=FL(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},kee=function(t,e,n,r){var s=Tee(e,Array.isArray(t)?t:[t]);wv[n]||(wv[n]=new WeakMap);var a=wv[n],o=[],l=new Set,u=new Set(s),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};s.forEach(d);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))f(p);else try{var y=p.getAttribute(r),j=y!==null&&y!=="false",b=(Ku.get(p)||0)+1,N=(a.get(p)||0)+1;Ku.set(p,b),a.set(p,N),o.push(p),b===1&&j&&_v.set(p,!0),N===1&&p.setAttribute(n,"true"),j||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return f(e),l.clear(),Uw++,function(){o.forEach(function(m){var p=Ku.get(m)-1,y=a.get(m)-1;Ku.set(m,p),a.set(m,y),p||(_v.has(m)||m.removeAttribute(r),_v.delete(m)),y||m.removeAttribute(n)}),Uw--,Uw||(Ku=new WeakMap,Ku=new WeakMap,_v=new WeakMap,wv={})}},Y0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Pee(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),kee(r,s,n,"aria-hidden")):function(){return null}},ny="right-scroll-bar-position",ry="width-before-scroll-bar",Ree="with-scroll-bars-hidden",Iee="--removed-body-scroll-bar-size";function Bw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Aee(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Oee=typeof window<"u"?x.useLayoutEffect:x.useEffect,Pk=new WeakMap;function Mee(t,e){var n=Aee(null,function(r){return t.forEach(function(s){return Bw(s,r)})});return Oee(function(){var r=Pk.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||Bw(l,null)}),a.forEach(function(l){s.has(l)||Bw(l,o)})}Pk.set(n,t)},[t]),n}function Dee(t){return t}function Lee(t,e){e===void 0&&(e=Dee);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return s}function Fee(t){t===void 0&&(t={});var e=Lee(null);return e.options=ia({async:!0,ssr:!1},t),e}var VL=function(t){var e=t.sideCar,n=Mp(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,ia({},n))};VL.isSideCarExport=!0;function Vee(t,e){return t.useMedium(e),VL}var $L=Fee(),Hw=function(){},X0=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:Hw,onWheelCapture:Hw,onTouchMoveCapture:Hw}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,m=t.shards,p=t.sideCar,y=t.noRelative,j=t.noIsolation,b=t.inert,N=t.allowPinchZoom,_=t.as,w=_===void 0?"div":_,E=t.gapMode,R=Mp(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,B=Mee([n,e]),I=ia(ia({},R),s);return x.createElement(x.Fragment,null,f&&x.createElement(A,{sideCar:$L,removeScrollBar:d,shards:m,noRelative:y,noIsolation:j,inert:b,setCallbacks:a,allowPinchZoom:!!N,lockRef:n,gapMode:E}),o?x.cloneElement(x.Children.only(l),ia(ia({},I),{ref:B})):x.createElement(w,ia({},I,{className:u,ref:B}),l))});X0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};X0.classNames={fullWidth:ry,zeroRight:ny};var $ee=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zee(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$ee();return e&&t.setAttribute("nonce",e),t}function Uee(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Bee(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Hee=function(){var t=0,e=null;return{add:function(n){t==0&&(e=zee())&&(Uee(e,n),Bee(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qee=function(){var t=Hee();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},zL=function(){var t=qee(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Wee={left:0,top:0,right:0,gap:0},qw=function(t){return parseInt(t||"",10)||0},Gee=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[qw(n),qw(r),qw(s)]},Kee=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Wee;var e=Gee(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Zee=zL(),Od="data-scroll-locked",Qee=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ree,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Od,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ny,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ry,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ny," .").concat(ny,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ry," .").concat(ry,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Od,`] {
    `).concat(Iee,": ").concat(l,`px;
  }
`)},Tk=function(){var t=parseInt(document.body.getAttribute(Od)||"0",10);return isFinite(t)?t:0},Yee=function(){x.useEffect(function(){return document.body.setAttribute(Od,(Tk()+1).toString()),function(){var t=Tk()-1;t<=0?document.body.removeAttribute(Od):document.body.setAttribute(Od,t.toString())}},[])},Xee=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Yee();var a=x.useMemo(function(){return Kee(s)},[s]);return x.createElement(Zee,{styles:Qee(a,!e,s,n?"":"!important")})},tj=!1;if(typeof window<"u")try{var bv=Object.defineProperty({},"passive",{get:function(){return tj=!0,!0}});window.addEventListener("test",bv,bv),window.removeEventListener("test",bv,bv)}catch{tj=!1}var Zu=tj?{passive:!1}:!1,Jee=function(t){return t.tagName==="TEXTAREA"},UL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Jee(t)&&n[e]==="visible")},ete=function(t){return UL(t,"overflowY")},tte=function(t){return UL(t,"overflowX")},kk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=BL(t,r);if(s){var a=HL(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nte=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rte=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},BL=function(t,e){return t==="v"?ete(e):tte(e)},HL=function(t,e){return t==="v"?nte(e):rte(e)},ste=function(t,e){return t==="h"&&e==="rtl"?-1:1},ite=function(t,e,n,r,s){var a=ste(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,u=e.contains(l),d=!1,f=o>0,m=0,p=0;do{if(!l)break;var y=HL(t,l),j=y[0],b=y[1],N=y[2],_=b-N-a*j;(j||_)&&BL(t,l)&&(m+=_,p+=j);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(d=!0),d},jv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Rk=function(t){return[t.deltaX,t.deltaY]},Ik=function(t){return t&&"current"in t?t.current:t},ate=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ote=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lte=0,Qu=[];function cte(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),s=x.useState(lte++)[0],a=x.useState(zL)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=VH([t.lockRef.current],(t.shards||[]).map(Ik),!0).filter(Boolean);return b.forEach(function(N){return N.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=x.useCallback(function(b,N){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var _=jv(b),w=n.current,E="deltaX"in b?b.deltaX:w[0]-_[0],R="deltaY"in b?b.deltaY:w[1]-_[1],A,B=b.target,I=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in b&&I==="h"&&B.type==="range")return!1;var F=kk(I,B);if(!F)return!0;if(F?A=I:(A=I==="v"?"h":"v",F=kk(I,B)),!F)return!1;if(!r.current&&"changedTouches"in b&&(E||R)&&(r.current=A),!A)return!0;var $=r.current||A;return ite($,N,b,$==="h"?E:R)},[]),u=x.useCallback(function(b){var N=b;if(!(!Qu.length||Qu[Qu.length-1]!==a)){var _="deltaY"in N?Rk(N):jv(N),w=e.current.filter(function(A){return A.name===N.type&&(A.target===N.target||N.target===A.shadowParent)&&ate(A.delta,_)})[0];if(w&&w.should){N.cancelable&&N.preventDefault();return}if(!w){var E=(o.current.shards||[]).map(Ik).filter(Boolean).filter(function(A){return A.contains(N.target)}),R=E.length>0?l(N,E[0]):!o.current.noIsolation;R&&N.cancelable&&N.preventDefault()}}},[]),d=x.useCallback(function(b,N,_,w){var E={name:b,delta:N,target:_,should:w,shadowParent:ute(_)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(R){return R!==E})},1)},[]),f=x.useCallback(function(b){n.current=jv(b),r.current=void 0},[]),m=x.useCallback(function(b){d(b.type,Rk(b),b.target,l(b,t.lockRef.current))},[]),p=x.useCallback(function(b){d(b.type,jv(b),b.target,l(b,t.lockRef.current))},[]);x.useEffect(function(){return Qu.push(a),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",u,Zu),document.addEventListener("touchmove",u,Zu),document.addEventListener("touchstart",f,Zu),function(){Qu=Qu.filter(function(b){return b!==a}),document.removeEventListener("wheel",u,Zu),document.removeEventListener("touchmove",u,Zu),document.removeEventListener("touchstart",f,Zu)}},[]);var y=t.removeScrollBar,j=t.inert;return x.createElement(x.Fragment,null,j?x.createElement(a,{styles:ote(s)}):null,y?x.createElement(Xee,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ute(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dte=Vee($L,cte);var sg=x.forwardRef(function(t,e){return x.createElement(X0,ia({},t,{ref:e,sideCar:dte}))});sg.classNames=X0.classNames;var nj=["Enter"," "],hte=["ArrowDown","PageUp","Home"],qL=["ArrowUp","PageDown","End"],fte=[...hte,...qL],mte={ltr:[...nj,"ArrowRight"],rtl:[...nj,"ArrowLeft"]},pte={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ig="Menu",[fp,gte,vte]=Xp(ig),[pu,WL]=Pr(ig,[vte,Wh,Q0]),J0=Wh(),GL=Q0(),[yte,gu]=pu(ig),[xte,ag]=pu(ig),KL=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=J0(e),[u,d]=x.useState(null),f=x.useRef(!1),m=yr(a),p=mu(s);return x.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),i.jsx(jE,{...l,children:i.jsx(yte,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:d,children:i.jsx(xte,{scope:e,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:p,modal:o,children:r})})})};KL.displayName=ig;var _te="MenuAnchor",EE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=J0(n);return i.jsx(Z0,{...s,...r,ref:e})});EE.displayName=_te;var CE="MenuPortal",[wte,ZL]=pu(CE,{forceMount:void 0}),QL=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=gu(CE,e);return i.jsx(wte,{scope:e,forceMount:n,children:i.jsx(Tr,{present:n||a.open,children:i.jsx(ng,{asChild:!0,container:s,children:r})})})};QL.displayName=CE;var ci="MenuContent",[bte,PE]=pu(ci),YL=x.forwardRef((t,e)=>{const n=ZL(ci,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=gu(ci,t.__scopeMenu),o=ag(ci,t.__scopeMenu);return i.jsx(fp.Provider,{scope:t.__scopeMenu,children:i.jsx(Tr,{present:r||a.open,children:i.jsx(fp.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(jte,{...s,ref:e}):i.jsx(Nte,{...s,ref:e})})})})}),jte=x.forwardRef((t,e)=>{const n=gu(ci,t.__scopeMenu),r=x.useRef(null),s=ft(e,r);return x.useEffect(()=>{const a=r.current;if(a)return Y0(a)},[]),i.jsx(TE,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Fe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Nte=x.forwardRef((t,e)=>{const n=gu(ci,t.__scopeMenu);return i.jsx(TE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ste=Fl("MenuContent.ScrollLock"),TE=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:y,disableOutsideScroll:j,...b}=t,N=gu(ci,n),_=ag(ci,n),w=J0(n),E=GL(n),R=gte(n),[A,B]=x.useState(null),I=x.useRef(null),F=ft(e,I,N.onContentChange),$=x.useRef(0),P=x.useRef(""),M=x.useRef(0),D=x.useRef(null),k=x.useRef("right"),G=x.useRef(0),se=j?sg:x.Fragment,ae=j?{as:Ste,allowPinchZoom:!0}:void 0,K=H=>{var xe,Y;const V=P.current+H,q=R().filter(ne=>!ne.disabled),J=document.activeElement,me=(xe=q.find(ne=>ne.ref.current===J))==null?void 0:xe.textValue,Pe=q.map(ne=>ne.textValue),Me=Lte(Pe,V,me),oe=(Y=q.find(ne=>ne.textValue===Me))==null?void 0:Y.ref.current;(function ne(ee){P.current=ee,window.clearTimeout($.current),ee!==""&&($.current=window.setTimeout(()=>ne(""),1e3))})(V),oe&&setTimeout(()=>oe.focus())};x.useEffect(()=>()=>window.clearTimeout($.current),[]),H0();const z=x.useCallback(H=>{var q,J;return k.current===((q=D.current)==null?void 0:q.side)&&Vte(H,(J=D.current)==null?void 0:J.area)},[]);return i.jsx(bte,{scope:n,searchRef:P,onItemEnter:x.useCallback(H=>{z(H)&&H.preventDefault()},[z]),onItemLeave:x.useCallback(H=>{var V;z(H)||((V=I.current)==null||V.focus(),B(null))},[z]),onTriggerLeave:x.useCallback(H=>{z(H)&&H.preventDefault()},[z]),pointerGraceTimerRef:M,onPointerGraceIntentChange:x.useCallback(H=>{D.current=H},[]),children:i.jsx(se,{...ae,children:i.jsx(eg,{asChild:!0,trapped:s,onMountAutoFocus:Fe(a,H=>{var V;H.preventDefault(),(V=I.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Jp,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:y,children:i.jsx(DL,{asChild:!0,...E,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:B,onEntryFocus:Fe(u,H=>{_.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(NE,{role:"menu","aria-orientation":"vertical","data-state":f3(N.open),"data-radix-menu-content":"",dir:_.dir,...w,...b,ref:F,style:{outline:"none",...b.style},onKeyDown:Fe(b.onKeyDown,H=>{const q=H.target.closest("[data-radix-menu-content]")===H.currentTarget,J=H.ctrlKey||H.altKey||H.metaKey,me=H.key.length===1;q&&(H.key==="Tab"&&H.preventDefault(),!J&&me&&K(H.key));const Pe=I.current;if(H.target!==Pe||!fte.includes(H.key))return;H.preventDefault();const oe=R().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);qL.includes(H.key)&&oe.reverse(),Mte(oe)}),onBlur:Fe(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout($.current),P.current="")}),onPointerMove:Fe(t.onPointerMove,mp(H=>{const V=H.target,q=G.current!==H.clientX;if(H.currentTarget.contains(V)&&q){const J=H.clientX>G.current?"right":"left";k.current=J,G.current=H.clientX}}))})})})})})})});YL.displayName=ci;var Ete="MenuGroup",kE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ge.div,{role:"group",...r,ref:e})});kE.displayName=Ete;var Cte="MenuLabel",XL=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ge.div,{...r,ref:e})});XL.displayName=Cte;var lx="MenuItem",Ak="menu.itemSelect",e_=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=x.useRef(null),o=ag(lx,t.__scopeMenu),l=PE(lx,t.__scopeMenu),u=ft(e,a),d=x.useRef(!1),f=()=>{const m=a.current;if(!n&&m){const p=new CustomEvent(Ak,{bubbles:!0,cancelable:!0});m.addEventListener(Ak,y=>r==null?void 0:r(y),{once:!0}),oL(m,p),p.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(JL,{...s,ref:u,disabled:n,onClick:Fe(t.onClick,f),onPointerDown:m=>{var p;(p=t.onPointerDown)==null||p.call(t,m),d.current=!0},onPointerUp:Fe(t.onPointerUp,m=>{var p;d.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:Fe(t.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||nj.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});e_.displayName=lx;var JL=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=PE(lx,n),l=GL(n),u=x.useRef(null),d=ft(e,u),[f,m]=x.useState(!1),[p,y]=x.useState("");return x.useEffect(()=>{const j=u.current;j&&y((j.textContent??"").trim())},[a.children]),i.jsx(fp.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:i.jsx(LL,{asChild:!0,...l,focusable:!r,children:i.jsx(Ge.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Fe(t.onPointerMove,mp(j=>{r?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(t.onPointerLeave,mp(j=>o.onItemLeave(j))),onFocus:Fe(t.onFocus,()=>m(!0)),onBlur:Fe(t.onBlur,()=>m(!1))})})})}),Pte="MenuCheckboxItem",e3=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(i3,{scope:t.__scopeMenu,checked:n,children:i.jsx(e_,{role:"menuitemcheckbox","aria-checked":cx(n)?"mixed":n,...s,ref:e,"data-state":IE(n),onSelect:Fe(s.onSelect,()=>r==null?void 0:r(cx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});e3.displayName=Pte;var t3="MenuRadioGroup",[Tte,kte]=pu(t3,{value:void 0,onValueChange:()=>{}}),n3=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=yr(r);return i.jsx(Tte,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(kE,{...s,ref:e})})});n3.displayName=t3;var r3="MenuRadioItem",s3=x.forwardRef((t,e)=>{const{value:n,...r}=t,s=kte(r3,t.__scopeMenu),a=n===s.value;return i.jsx(i3,{scope:t.__scopeMenu,checked:a,children:i.jsx(e_,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":IE(a),onSelect:Fe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});s3.displayName=r3;var RE="MenuItemIndicator",[i3,Rte]=pu(RE,{checked:!1}),a3=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=Rte(RE,n);return i.jsx(Tr,{present:r||cx(a.checked)||a.checked===!0,children:i.jsx(Ge.span,{...s,ref:e,"data-state":IE(a.checked)})})});a3.displayName=RE;var Ite="MenuSeparator",o3=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});o3.displayName=Ite;var Ate="MenuArrow",l3=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=J0(n);return i.jsx(SE,{...s,...r,ref:e})});l3.displayName=Ate;var Ote="MenuSub",[Xye,c3]=pu(Ote),om="MenuSubTrigger",u3=x.forwardRef((t,e)=>{const n=gu(om,t.__scopeMenu),r=ag(om,t.__scopeMenu),s=c3(om,t.__scopeMenu),a=PE(om,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=a,d={__scopeMenu:t.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),i.jsx(EE,{asChild:!0,...d,children:i.jsx(JL,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":f3(n.open),...t,ref:U0(e,s.onTriggerChange),onClick:m=>{var p;(p=t.onClick)==null||p.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Fe(t.onPointerMove,mp(m=>{a.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Fe(t.onPointerLeave,mp(m=>{var y,j;f();const p=(y=n.content)==null?void 0:y.getBoundingClientRect();if(p){const b=(j=n.content)==null?void 0:j.dataset.side,N=b==="right",_=N?-5:5,w=p[N?"left":"right"],E=p[N?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x:w,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:w,y:p.bottom}],side:b}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(t.onKeyDown,m=>{var y;const p=a.searchRef.current!=="";t.disabled||p&&m.key===" "||mte[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});u3.displayName=om;var d3="MenuSubContent",h3=x.forwardRef((t,e)=>{const n=ZL(ci,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=gu(ci,t.__scopeMenu),o=ag(ci,t.__scopeMenu),l=c3(d3,t.__scopeMenu),u=x.useRef(null),d=ft(e,u);return i.jsx(fp.Provider,{scope:t.__scopeMenu,children:i.jsx(Tr,{present:r||a.open,children:i.jsx(fp.Slot,{scope:t.__scopeMenu,children:i.jsx(TE,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Fe(t.onFocusOutside,f=>{f.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Fe(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Fe(t.onKeyDown,f=>{var y;const m=f.currentTarget.contains(f.target),p=pte[o.dir].includes(f.key);m&&p&&(a.onOpenChange(!1),(y=l.trigger)==null||y.focus(),f.preventDefault())})})})})})});h3.displayName=d3;function f3(t){return t?"open":"closed"}function cx(t){return t==="indeterminate"}function IE(t){return cx(t)?"indeterminate":t?"checked":"unchecked"}function Mte(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Dte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Lte(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Dte(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Fte(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],u=e[o],d=l.x,f=l.y,m=u.x,p=u.y;f>r!=p>r&&n<(m-d)*(r-f)/(p-f)+d&&(s=!s)}return s}function Vte(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Fte(n,e)}function mp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $te=KL,zte=EE,Ute=QL,Bte=YL,Hte=kE,qte=XL,Wte=e_,Gte=e3,Kte=n3,Zte=s3,Qte=a3,Yte=o3,Xte=l3,Jte=u3,ene=h3,t_="DropdownMenu",[tne,Jye]=Pr(t_,[WL]),os=WL(),[nne,m3]=tne(t_),p3=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,u=os(e),d=x.useRef(null),[f,m]=Bs({prop:s,defaultProp:a??!1,onChange:o,caller:t_});return i.jsx(nne,{scope:e,triggerId:$s(),triggerRef:d,contentId:$s(),open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(p=>!p),[m]),modal:l,children:i.jsx($te,{...u,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};p3.displayName=t_;var g3="DropdownMenuTrigger",v3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=m3(g3,n),o=os(n);return i.jsx(zte,{asChild:!0,...o,children:i.jsx(Ge.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:U0(e,a.triggerRef),onPointerDown:Fe(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Fe(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});v3.displayName=g3;var rne="DropdownMenuPortal",y3=t=>{const{__scopeDropdownMenu:e,...n}=t,r=os(e);return i.jsx(Ute,{...r,...n})};y3.displayName=rne;var x3="DropdownMenuContent",_3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=m3(x3,n),a=os(n),o=x.useRef(!1);return i.jsx(Bte,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:Fe(t.onCloseAutoFocus,l=>{var u;o.current||(u=s.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Fe(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!s.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_3.displayName=x3;var sne="DropdownMenuGroup",ine=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Hte,{...s,...r,ref:e})});ine.displayName=sne;var ane="DropdownMenuLabel",w3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(qte,{...s,...r,ref:e})});w3.displayName=ane;var one="DropdownMenuItem",b3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Wte,{...s,...r,ref:e})});b3.displayName=one;var lne="DropdownMenuCheckboxItem",j3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Gte,{...s,...r,ref:e})});j3.displayName=lne;var cne="DropdownMenuRadioGroup",une=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Kte,{...s,...r,ref:e})});une.displayName=cne;var dne="DropdownMenuRadioItem",N3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Zte,{...s,...r,ref:e})});N3.displayName=dne;var hne="DropdownMenuItemIndicator",S3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Qte,{...s,...r,ref:e})});S3.displayName=hne;var fne="DropdownMenuSeparator",E3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Yte,{...s,...r,ref:e})});E3.displayName=fne;var mne="DropdownMenuArrow",pne=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Xte,{...s,...r,ref:e})});pne.displayName=mne;var gne="DropdownMenuSubTrigger",C3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(Jte,{...s,...r,ref:e})});C3.displayName=gne;var vne="DropdownMenuSubContent",P3=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=os(n);return i.jsx(ene,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});P3.displayName=vne;var yne=p3,xne=v3,_ne=y3,T3=_3,k3=w3,R3=b3,I3=j3,A3=N3,O3=S3,M3=E3,D3=C3,L3=P3;function Zl(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var wne=["color"],bne=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,wne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),jne=["color"],AE=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,jne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Nne=["color"],F3=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,Nne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Sne=["color"],Ene=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,Sne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Cne=["color"],V3=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,Cne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Pne=["color"],Tne=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,Pne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kne=["color"],Rne=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,kne);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ine=["color"],Ane=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=Zl(t,Ine);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const rj=yne,sj=xne,One=x.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(D3,{ref:s,className:it("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(V3,{className:"ml-auto h-4 w-4"})]}));One.displayName=D3.displayName;const Mne=x.forwardRef(({className:t,...e},n)=>i.jsx(L3,{ref:n,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Mne.displayName=L3.displayName;const ux=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(_ne,{children:i.jsx(T3,{ref:r,sideOffset:e,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ux.displayName=T3.displayName;const nn=x.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(R3,{ref:r,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));nn.displayName=R3.displayName;const Dne=x.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(I3,{ref:s,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(O3,{children:i.jsx(AE,{className:"h-4 w-4"})})}),e]}));Dne.displayName=I3.displayName;const Lne=x.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(A3,{ref:r,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(O3,{children:i.jsx(Ane,{className:"h-4 w-4 fill-current"})})}),e]}));Lne.displayName=A3.displayName;const Fne=x.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(k3,{ref:r,className:it("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Fne.displayName=k3.displayName;const ea=x.forwardRef(({className:t,...e},n)=>i.jsx(M3,{ref:n,className:it("-mx-1 my-1 h-px bg-muted",t),...e}));ea.displayName=M3.displayName;var $3={exports:{}},z3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=x;function Vne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $ne=typeof Object.is=="function"?Object.is:Vne,zne=sh.useState,Une=sh.useEffect,Bne=sh.useLayoutEffect,Hne=sh.useDebugValue;function qne(t,e){var n=e(),r=zne({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return Bne(function(){s.value=n,s.getSnapshot=e,Ww(s)&&a({inst:s})},[t,n,e]),Une(function(){return Ww(s)&&a({inst:s}),t(function(){Ww(s)&&a({inst:s})})},[t]),Hne(n),n}function Ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$ne(t,n)}catch{return!0}}function Wne(t,e){return e()}var Gne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wne:qne;z3.useSyncExternalStore=sh.useSyncExternalStore!==void 0?sh.useSyncExternalStore:Gne;$3.exports=z3;var U3=$3.exports;function Kne(){return U3.useSyncExternalStore(Zne,()=>!0,()=>!1)}function Zne(){return()=>{}}var OE="Avatar",[Qne,exe]=Pr(OE),[Yne,B3]=Qne(OE),H3=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=x.useState("idle");return i.jsx(Yne,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Ge.span,{...r,ref:e})})});H3.displayName=OE;var q3="AvatarImage",W3=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=B3(q3,n),l=Xne(r,a),u=yr(d=>{s(d),o.onImageLoadingStatusChange(d)});return Wn(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?i.jsx(Ge.img,{...a,ref:e,src:r}):null});W3.displayName=q3;var G3="AvatarFallback",K3=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=B3(G3,n),[o,l]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Ge.span,{...s,ref:e}):null});K3.displayName=G3;function Ok(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Xne(t,{referrerPolicy:e,crossOrigin:n}){const r=Kne(),s=x.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=x.useState(()=>Ok(a,t));return Wn(()=>{l(Ok(a,t))},[a,t]),Wn(()=>{const u=m=>()=>{l(m)};if(!a)return;const d=u("loaded"),f=u("error");return a.addEventListener("load",d),a.addEventListener("error",f),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)}},[a,n,e]),o}var Z3=H3,Q3=W3,Y3=K3;const _o=x.forwardRef(({className:t,...e},n)=>i.jsx(Z3,{ref:n,className:it("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));_o.displayName=Z3.displayName;const wo=x.forwardRef(({className:t,...e},n)=>i.jsx(Q3,{ref:n,className:it("aspect-square h-full w-full",t),...e}));wo.displayName=Q3.displayName;const bo=x.forwardRef(({className:t,...e},n)=>i.jsx(Y3,{ref:n,className:it("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));bo.displayName=Y3.displayName;const Jne=B0("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ot({className:t,variant:e,...n}){return i.jsx("div",{className:it(Jne({variant:e}),t),...n})}const ere={},Mk=t=>{let e;const n=new Set,r=(f,m)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const y=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(j=>j(e,y))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(ere?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,u);return u},tre=t=>t?Mk(t):Mk;var X3={exports:{}},J3={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_=x,nre=U3;function rre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sre=typeof Object.is=="function"?Object.is:rre,ire=nre.useSyncExternalStore,are=n_.useRef,ore=n_.useEffect,lre=n_.useMemo,cre=n_.useDebugValue;J3.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=are(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=lre(function(){function u(y){if(!d){if(d=!0,f=y,y=r(y),s!==void 0&&o.hasValue){var j=o.value;if(s(j,y))return m=j}return m=y}if(j=m,sre(f,y))return j;var b=r(y);return s!==void 0&&s(j,b)?(f=y,j):(f=y,m=b)}var d=!1,f,m,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,s]);var l=ire(t,a[0],a[1]);return ore(function(){o.hasValue=!0,o.value=l},[l]),cre(l),l};X3.exports=J3;var ure=X3.exports;const dre=Pa(ure),eF={},{useDebugValue:hre}=ue,{useSyncExternalStoreWithSelector:fre}=dre;let Dk=!1;const mre=t=>t;function pre(t,e=mre,n){(eF?"production":void 0)!=="production"&&n&&!Dk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Dk=!0);const r=fre(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return hre(r),r}const Lk=t=>{(eF?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?tre(t):t,n=(r,s)=>pre(e,r,s);return Object.assign(n,e),n},Gh=t=>t?Lk(t):Lk,fc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},gre=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},vre=async(t,e,n,r,s,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:s,messagePreview:a,conversationUrl:l})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(l){console.error("Error sending email notification:",l)}},r_=Gh((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const s=bn(Bt(Ue,"conversations"),tr("participants","array-contains",n)),a=XT(s,o=>{const l=[];o.docs.forEach(u=>{const d=u.data();d.deletedFor&&d.deletedFor.includes(n)||d.blockedBy&&d.blockedBy.includes(n)||l.push({id:u.id,participants:d.participants||[],listingId:d.listingId||"",listingTitle:d.listingTitle||"",listingImage:d.listingImage,listingPrice:d.listingPrice||0,participantDetails:d.participantDetails||{},lastMessage:d.lastMessage?{...d.lastMessage,sentAt:fc(d.lastMessage.sentAt)}:void 0,unreadCount:d.unreadCount||{},blockedBy:d.blockedBy||[],deletedFor:d.deletedFor||[],status:d.status||"active",createdAt:fc(d.createdAt),updatedAt:fc(d.updatedAt)})}),l.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),be.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(s){console.error("Error setting up conversations listener:",s),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const s=bn(Bt(Ue,"conversations",n,"messages")),a=XT(s,o=>{const l=o.docs.map(u=>{const d=u.data();return{id:u.id,conversationId:n,senderId:d.senderId,senderName:d.senderName,senderAvatar:d.senderAvatar,text:d.text,type:d.type||"text",attachments:d.attachments||[],seen:d.seen||!1,sentAt:fc(d.sentAt)}});l.sort((u,d)=>u.sentAt.getTime()-d.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),be.error("Erreur lors du chargement des messages")})}catch(s){console.error("Error setting up messages listener:",s)}},sendMessage:async(n,r,s,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:s,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(s)){be.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:s,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:or()};console.log("Adding message to Firestore:",u);const d=await Ml(Bt(Ue,"conversations",n,"messages"),u);console.log("Message added with ID:",d.id);const f=l.participants.filter(y=>y!==s),m={};f.forEach(y=>{m[`unreadCount.${y}`]=(l.unreadCount[y]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:or(),senderId:s,senderName:a},updatedAt:or(),...m});const p=Object.fromEntries(Object.entries(m).filter(([,y])=>y!==void 0));await On(jt(Ue,"conversations",n),{lastMessage:{text:r,sentAt:or(),senderId:s,senderName:a},updatedAt:or(),...p}),f.forEach(async y=>{const j=l.participantDetails[y];if(j&&j.email){const b=l.participantDetails[s];await vre(j.email,j.name,a,(b==null?void 0:b.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),be.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,s,a,o,l,u,d,f)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const m=gre(o,l,n);console.log("Generated conversation ID:",m);const p=await Vs(jt(Ue,"conversations",m));if(p.exists()){console.log("Conversation already exists, sending message");const N=p.data(),_={id:m,participants:N.participants||[],listingId:N.listingId||"",listingTitle:N.listingTitle||"",listingImage:N.listingImage,listingPrice:N.listingPrice||0,participantDetails:N.participantDetails||{},lastMessage:N.lastMessage?{...N.lastMessage,sentAt:fc(N.lastMessage.sentAt)}:void 0,unreadCount:N.unreadCount||{},blockedBy:N.blockedBy||[],deletedFor:N.deletedFor||[],status:N.status||"active",createdAt:fc(N.createdAt),updatedAt:fc(N.updatedAt)};return t({currentConversation:_}),await e().sendMessage(m,f,o,u.displayName,u.photoURL),m}console.log("Creating new conversation");const y={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:s,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[l]:{name:d.sellerName,avatar:d.sellerAvatar||null,university:d.sellerUniversity,verified:d.sellerVerified||!1,email:d.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:or(),updatedAt:or()};console.log("Setting conversation document:",y);const j=Object.fromEntries(Object.entries(y).filter(([,N])=>N!==void 0));await Ec(jt(Ue,"conversations",m),j);const b={id:m,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:s,participantDetails:y.participantDetails,unreadCount:y.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:b}),console.log("Sending initial message"),await e().sendMessage(m,f,o,u.displayName,u.photoURL),m}catch(m){throw console.error("Error creating conversation:",m),be.error("Erreur lors de la création de la conversation"),m}},markMessagesAsSeen:async(n,r)=>{try{const s=jt(Ue,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await On(s,a)}catch(s){console.error("Error marking messages as seen:",s)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const s=jt(Ue,"conversations",n),a=await Vs(s);if(a.exists()){const l=a.data().blockedBy||[];if(!l.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...l,r],status:"blocked",updatedAt:or()}).filter(([,d])=>d!==void 0));await On(s,u),be.success("Utilisateur bloqué")}}}catch(s){console.error("Error blocking user:",s),be.error("Erreur lors du blocage")}},reportUser:async(n,r,s,a,o)=>{try{const l={reporterId:r,reportedUserId:s,conversationId:n,reason:a,description:o,status:"pending",createdAt:or()},u=Object.fromEntries(Object.entries(l).filter(([,d])=>d!==void 0));await Ml(Bt(Ue,"reports"),u),be.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),be.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const s=jt(Ue,"conversations",n),a=await Vs(s);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const u=[...l,r];if(u.length===o.participants.length)await Xd(s);else{const d=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:or()}).filter(([,f])=>f!==void 0));await On(s,d)}be.success("Conversation supprimée")}}}catch(s){console.error("Error deleting conversation:",s),be.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:s}=e();return s.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),yre={};function xre(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const pp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return pp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return pp(r)(n)}}}},_re=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,_)=>({..._,...N}),...e},o=!1;const l=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,s);const f=pp(a.serialize),m=()=>{const N=a.partialize({...r()});let _;const w=f({state:N,version:a.version}).then(E=>d.setItem(a.name,E)).catch(E=>{_=E});if(_)throw _;return w},p=s.setState;s.setState=(N,_)=>{p(N,_),m()};const y=t((...N)=>{n(...N),m()},r,s);let j;const b=()=>{var N;if(!d)return;o=!1,l.forEach(w=>w(r()));const _=((N=a.onRehydrateStorage)==null?void 0:N.call(a,r()))||void 0;return pp(d.getItem.bind(d))(a.name).then(w=>{if(w)return a.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return a.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var E;return j=a.merge(w,(E=r())!=null?E:y),n(j,!0),m()}).then(()=>{_==null||_(j,void 0),o=!0,u.forEach(w=>w(j))}).catch(w=>{_==null||_(void 0,w)})};return s.persist={setOptions:N=>{a={...a,...N},N.getStorage&&(d=N.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:N=>(l.add(N),()=>{l.delete(N)}),onFinishHydration:N=>(u.add(N),()=>{u.delete(N)})},b(),j||y},wre=(t,e)=>(n,r,s)=>{let a={storage:xre(()=>localStorage),partialize:b=>b,version:0,merge:(b,N)=>({...N,...b}),...e},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,s);const f=()=>{const b=a.partialize({...r()});return d.setItem(a.name,{state:b,version:a.version})},m=s.setState;s.setState=(b,N)=>{m(b,N),f()};const p=t((...b)=>{n(...b),f()},r,s);s.getInitialState=()=>p;let y;const j=()=>{var b,N;if(!d)return;o=!1,l.forEach(w=>{var E;return w((E=r())!=null?E:p)});const _=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(b=r())!=null?b:p))||void 0;return pp(d.getItem.bind(d))(a.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return[!0,a.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var E;const[R,A]=w;if(y=a.merge(A,(E=r())!=null?E:p),n(y,!0),R)return f()}).then(()=>{_==null||_(y,void 0),y=r(),o=!0,u.forEach(w=>w(y))}).catch(w=>{_==null||_(void 0,w)})};return s.persist={setOptions:b=>{a={...a,...b},b.storage&&(d=b.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||j(),y||p},bre=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((yre?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),_re(t,e)):wre(t,e),jre=bre,Kh=Gh()(jre((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n.id);t(s?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),be.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n);s&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-s.price*s.quantity})},updateQuantity:(n,r)=>{const{cart:s}=e(),a=s.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:s.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),Nre=()=>{var w,E;const{currentUser:t,userProfile:e,logout:n}=Nn(),{conversations:r,fetchConversations:s}=r_(),{getCartItemCount:a}=Kh(),{theme:o,setTheme:l}=hB(),u=fr(),[d,f]=x.useState(""),m=ue.useMemo(()=>!t||!r.length?0:r.reduce((R,A)=>{const B=A.unreadCount[t.uid]||0;return R+B},0),[r,t]);x.useEffect(()=>{t&&s(t.uid)},[t,s]);const p=R=>{R.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},y=async()=>{try{await n(),u("/")}catch(R){console.error("Logout error:",R)}},j=a(),b=localStorage.getItem("pendingUserData"),N=b?JSON.parse(b):{};let _=(e==null?void 0:e.displayName)||N.displayName||"";return!_&&(t!=null&&t.displayName)&&(_=t.displayName),!_&&(t!=null&&t.email)&&(_=t.email.split("@")[0]),_||(_="Utilisateur"),e!=null&&e.university||N.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||N.university==="Autre université"&&N.otherUniversity)&&(e&&e.otherUniversity||N.otherUniversity),x.useEffect(()=>{b&&(t!=null&&t.emailVerified)},[t,b]),i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:i.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[i.jsxs(ze,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(Vh,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("form",{onSubmit:p,className:"flex-1 max-w-lg mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{type:"text",placeholder:"Rechercher entre étudiants...",value:d,onChange:R=>f(R.target.value),className:"pl-10 w-full"})]})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[i.jsx(GY,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx($Y,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?i.jsxs(i.Fragment,{children:[i.jsx(te,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:i.jsxs(ze,{to:"/create",children:[i.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Publier"]})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/cart",children:i.jsx(Ll,{className:"w-4 h-4"})})}),j>0&&i.jsx(ot,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:j>99?"99+":j})]}),i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/saved-searches",children:i.jsx(Ei,{className:"w-4 h-4"})})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(ze,{to:"/messages",children:i.jsx(jn,{className:"w-4 h-4"})})}),m>0&&i.jsx(ot,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:m>99?"99+":m})]}),i.jsxs(rj,{children:[i.jsx(sj,{asChild:!0,children:i.jsxs(te,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[i.jsxs(_o,{className:"h-8 w-8",children:[i.jsx(wo,{src:e==null?void 0:e.photoURL}),i.jsx(bo,{children:((E=(w=e==null?void 0:e.displayName)==null?void 0:w[0])==null?void 0:E.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Ht,{className:"w-2 h-2 text-white"})})]})}),i.jsxs(ux,{className:"w-64",align:"end",children:[i.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:i.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium",children:_}),(e==null?void 0:e.isVerified)&&i.jsxs(ot,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[i.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&i.jsx("div",{children:i.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Oi,{className:"w-3 h-3 text-green-600"}),i.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/profile",className:"cursor-pointer",children:[i.jsx(ss,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/settings",className:"cursor-pointer",children:[i.jsx(V0,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/orders",className:"cursor-pointer",children:[i.jsx(_n,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/payments",className:"cursor-pointer",children:[i.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/saved-searches",className:"cursor-pointer",children:[i.jsx(dE,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(jn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(ot,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/impact",className:"cursor-pointer",children:[i.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/help",className:"cursor-pointer",children:[i.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/safety",className:"cursor-pointer",children:[i.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),i.jsx(ea,{}),i.jsxs(nn,{onClick:y,className:"cursor-pointer text-destructive",children:[i.jsx(LY,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),i.jsx(te,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:i.jsx(ze,{to:"/create",children:i.jsx(Mc,{className:"w-4 h-4"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx(te,{variant:"ghost",asChild:!0,children:i.jsx(ze,{to:"/auth",children:"Se connecter"})}),i.jsx(te,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:i.jsx(ze,{to:"/auth",children:"Rejoindre"})})]}),i.jsxs(rj,{children:[i.jsx(sj,{asChild:!0,className:"sm:hidden",children:i.jsx(te,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:i.jsx(VY,{className:"w-5 h-5"})})}),i.jsxs(ux,{className:"w-56",align:"end",children:[i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),i.jsx(nn,{asChild:!0,children:i.jsx(ze,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(ea,{}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/create",className:"cursor-pointer",children:[i.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/cart",className:"cursor-pointer relative",children:[i.jsx(Ll,{className:"w-4 h-4 mr-2 "}),"Panier",j>0&&i.jsx(ot,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:j})]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(jn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(ot,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function Sre({icon:t,size:e=32,gradientId:n}){return i.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),i.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),i.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const Ere=()=>i.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:i.jsxs("div",{className:"container mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Sre,{icon:Vh,gradientId:"gradient-footer",size:32}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(kY,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(YY,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(OY,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Navigation"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(ze,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),i.jsx("li",{children:i.jsx(ze,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),i.jsx("li",{children:i.jsx(ze,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),i.jsx("li",{children:i.jsx(ze,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Ht,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Étudiants 100% vérifiés"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Oi,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Impact écologique mesuré"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(js,{className:"w-4 h-4"}),i.jsx("span",{children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),i.jsx(ze,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),i.jsx(ze,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),i.jsx(ze,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),i.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),i.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[i.jsx(ze,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),i.jsx(ze,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),i.jsx(ze,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),i.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[i.jsx(vs,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),ve=x.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:it("rounded-xl border bg-card text-card-foreground shadow",t),...e}));ve.displayName="Card";const Xe=x.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:it("flex flex-col space-y-1.5 p-6",t),...e}));Xe.displayName="CardHeader";const Je=x.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:it("font-semibold leading-none tracking-tight",t),...e}));Je.displayName="CardTitle";const Mt=x.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:it("text-sm text-muted-foreground",t),...e}));Mt.displayName="CardDescription";const ye=x.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:it("p-6 pt-0",t),...e}));ye.displayName="CardContent";const tF=x.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:it("flex items-center p-6 pt-0",t),...e}));tF.displayName="CardFooter";const dx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(dx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=dx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},Fk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Gw=t=>{var n,r,s,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:Fk(e.createdAt),updatedAt:Fk(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((s=e.location)==null?void 0:s.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},s_=Gh((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:s,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=bn(Bt(Ue,"listings"),ZT("createdAt","desc"),oi(20));!r&&a&&(o=bn(o,YZ(a)));const l=await zn(o);let u=l.docs.map(Gw);if(n.category&&n.category!=="all"&&(u=u.filter(f=>f.category===n.category)),n.minPrice!==void 0&&(u=u.filter(f=>f.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(f=>f.price<=n.maxPrice)),n.query){const f=n.query.toLowerCase();u=u.filter(m=>{var p;return m.title.toLowerCase().includes(f)||m.description.toLowerCase().includes(f)||((p=m.tags)==null?void 0:p.some(y=>y.toLowerCase().includes(f)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(f=>n.condition.includes(f.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((f,m)=>f.price-m.price);break;case"price-desc":u.sort((f,m)=>m.price-f.price);break;case"date":default:u.sort((f,m)=>new Date(m.createdAt).getTime()-new Date(f.createdAt).getTime());break}const d=l.docs[l.docs.length-1];t({listings:r?u:[...s,...u],lastDoc:d,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),be.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=bn(Bt(Ue,"listings"),ZT("createdAt","desc"),oi(6)),r=await zn(n);console.log(`📊 Found ${r.docs.length} documents`);const s=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=Gw(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${s.length} featured listings`),t({featuredListings:s})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=jt(Ue,"listings",n),s=await Vs(r);if(s.exists()){const a=Gw(s);await On(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),be.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),be.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,s,a,o,l,u;try{const d=dx({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((s=n.location)==null?void 0:s.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",d);const f=await Ml(Bt(Ue,"listings"),d);return be.success("Annonce créée avec succès !"),f.id}catch(d){throw console.error("Error creating listing:",d),be.error("Erreur lors de la création de l'annonce"),d}},updateListing:async(n,r)=>{try{const s=jt(Ue,"listings",n),a=dx({...r,updatedAt:new Date});await On(s,a);const{listings:o,currentListing:l}=e(),u=o.map(d=>d.id===n?{...d,...r}:d);t({listings:u,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),be.success("Annonce mise à jour !")}catch(s){throw console.error("Error updating listing:",s),be.error("Erreur lors de la mise à jour"),s}},deleteListing:async n=>{try{await Xd(jt(Ue,"listings",n));const{listings:r}=e(),s=r.filter(a=>a.id!==n);t({listings:s}),be.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),be.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),Vk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},nF=Gh((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=bn(Bt(Ue,"favorites"),tr("userId","==",n),oi(100)),s=await zn(r),a=[],o=new Set;s.forEach(l=>{const u=l.data(),d={id:l.id,...u,createdAt:Vk(u.createdAt),updatedAt:Vk(u.updatedAt)};a.push(d),o.add(d.listingId)}),a.sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),be.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var s;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){be.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((s=r.images)==null?void 0:s[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:or(),updatedAt:or()},l={id:(await Ml(Bt(Ue,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:d}=e(),f=new Set(d);f.add(r.id),t({favorites:[l,...u],userFavoriteIds:f});try{await On(jt(Ue,"listings",r.id),{likes:(r.likes||0)+1})}catch(m){console.error("Erreur lors de la mise à jour du compteur de likes:",m)}be.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),be.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const s=bn(Bt(Ue,"favorites"),tr("userId","==",n),tr("listingId","==",r)),a=await zn(s);if(a.empty){be.info("Pas dans vos favoris");return}const o=a.docs[0];await Xd(jt(Ue,"favorites",o.id));const{favorites:l,userFavoriteIds:u}=e(),d=new Set(u);d.delete(r),t({favorites:l.filter(f=>f.listingId!==r),userFavoriteIds:d});try{const f=jt(Ue,"listings",r),m=await zn(bn(Bt(Ue,"listings"),tr("__name__","==",r)));if(!m.empty){const p=m.docs[0].data().likes||0;await On(f,{likes:Math.max(0,p-1)})}}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}be.success("Retiré des favoris")}catch(s){console.error("Erreur lors de la suppression des favoris:",s),be.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:s,addToFavorites:a,removeFromFavorites:o}=e();s(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),rF=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=Nn(),{isFavorite:s,toggleFavorite:a}=nF(),o=fr(),l=s(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!r){be.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(te,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${l?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":l?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(Fr,{className:`w-4 h-4 ${l?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:l?"currentColor":"none"})})},sF=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const s=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),be.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:`${a()} ${r}`,"aria-label":"Partager",children:i.jsx($0,{className:"w-4 h-4"})})};function gt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ss(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Yr(t,e){const n=gt(t);return isNaN(e)?Ss(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ui(t,e){const n=gt(t);if(isNaN(e))return Ss(t,NaN);if(!e)return n;const r=n.getDate(),s=Ss(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const ME=6048e5,Cre=864e5,Nv=43200,$k=1440;let Pre={};function Zh(){return Pre}function Ca(t,e){var l,u,d,f;const n=Zh(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=gt(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function tu(t){return Ca(t,{weekStartsOn:1})}function iF(t){const e=gt(t),n=e.getFullYear(),r=Ss(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=tu(r),a=Ss(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=tu(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function ih(t){const e=gt(t);return e.setHours(0,0,0,0),e}function ah(t){const e=gt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function da(t,e){const n=ih(t),r=ih(e),s=+n-ah(n),a=+r-ah(r);return Math.round((s-a)/Cre)}function Tre(t){const e=iF(t),n=Ss(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),tu(n)}function ij(t,e){const n=e*7;return Yr(t,n)}function kre(t,e){return Ui(t,e*12)}function Rre(t){let e;return t.forEach(function(n){const r=gt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Ire(t){let e;return t.forEach(n=>{const r=gt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function sy(t,e){const n=gt(t),r=gt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Are(t){return Ss(t,Date.now())}function ys(t,e){const n=ih(t),r=ih(e);return+n==+r}function DE(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ore(t){if(!DE(t)&&typeof t!="number")return!1;const e=gt(t);return!isNaN(Number(e))}function oh(t,e){const n=gt(t),r=gt(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function Mre(t,e,n){const r=Ca(t,n),s=Ca(e,n),a=+r-ah(r),o=+s-ah(s);return Math.round((a-o)/ME)}function Dre(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Lre(t,e){return+gt(t)-+gt(e)}function Fre(t){const e=gt(t);return e.setHours(23,59,59,999),e}function i_(t){const e=gt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Vre(t){const e=gt(t);return+Fre(e)==+i_(e)}function $re(t,e){const n=gt(t),r=gt(e),s=sy(n,r),a=Math.abs(oh(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=sy(n,r)===-s;Vre(gt(t))&&a===1&&sy(t,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function zre(t,e,n){const r=Lre(t,e)/1e3;return Dre(n==null?void 0:n.roundingMethod)(r)}function Ns(t){const e=gt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function aF(t){const e=gt(t),n=Ss(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function LE(t,e){var l,u,d,f;const n=Zh(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=gt(t),a=s.getDay(),o=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function oF(t){return LE(t,{weekStartsOn:1})}const Ure={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bre=(t,e,n)=>{let r;const s=Ure[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Md(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Hre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gre={date:Md({formats:Hre,defaultWidth:"full"}),time:Md({formats:qre,defaultWidth:"full"}),dateTime:Md({formats:Wre,defaultWidth:"full"})},Kre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zre=(t,e,n,r)=>Kre[t];function aa(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const Qre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ese={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nse=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rse={ordinalNumber:nse,era:aa({values:Qre,defaultWidth:"wide"}),quarter:aa({values:Yre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:aa({values:Xre,defaultWidth:"wide"}),day:aa({values:Jre,defaultWidth:"wide"}),dayPeriod:aa({values:ese,defaultWidth:"wide",formattingValues:tse,defaultFormattingWidth:"wide"})};function oa(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?ise(l,m=>m.test(o)):sse(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function sse(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ise(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function lF(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const ase=/^(\d+)(th|st|nd|rd)?/i,ose=/\d+/i,lse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cse={any:[/^b/i,/^(a|c)/i]},use={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dse={any:[/1/i,/2/i,/3/i,/4/i]},hse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mse={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pse={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gse={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vse={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yse={ordinalNumber:lF({matchPattern:ase,parsePattern:ose,valueCallback:t=>parseInt(t,10)}),era:oa({matchPatterns:lse,defaultMatchWidth:"wide",parsePatterns:cse,defaultParseWidth:"any"}),quarter:oa({matchPatterns:use,defaultMatchWidth:"wide",parsePatterns:dse,defaultParseWidth:"any",valueCallback:t=>t+1}),month:oa({matchPatterns:hse,defaultMatchWidth:"wide",parsePatterns:fse,defaultParseWidth:"any"}),day:oa({matchPatterns:mse,defaultMatchWidth:"wide",parsePatterns:pse,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:gse,defaultMatchWidth:"any",parsePatterns:vse,defaultParseWidth:"any"})},FE={code:"en-US",formatDistance:Bre,formatLong:Gre,formatRelative:Zre,localize:rse,match:yse,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xse(t){const e=gt(t);return da(e,aF(e))+1}function cF(t){const e=gt(t),n=+tu(e)-+Tre(e);return Math.round(n/ME)+1}function uF(t,e){var f,m,p,y;const n=gt(t),r=n.getFullYear(),s=Zh(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(p=s.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,o=Ss(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Ca(o,e),u=Ss(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=Ca(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function _se(t,e){var l,u,d,f;const n=Zh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,s=uF(t,e),a=Ss(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ca(a,e)}function dF(t,e){const n=gt(t),r=+Ca(n,e)-+_se(n,e);return Math.round(r/ME)+1}function Zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ho={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Zt(n+1,2)},d(t,e){return Zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Zt(t.getHours()%12||12,e.length)},H(t,e){return Zt(t.getHours(),e.length)},m(t,e){return Zt(t.getMinutes(),e.length)},s(t,e){return Zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Zt(s,e.length)}},Yu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ho.y(t,e)},Y:function(t,e,n,r){const s=uF(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Zt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Zt(a,e.length)},R:function(t,e){const n=iF(t);return Zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ho.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=dF(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Zt(s,e.length)},I:function(t,e,n){const r=cF(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ho.d(t,e)},D:function(t,e,n){const r=xse(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Zt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Zt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Zt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Yu.noon:r===0?s=Yu.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Yu.evening:r>=12?s=Yu.afternoon:r>=4?s=Yu.morning:s=Yu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ho.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ho.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ho.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ho.s(t,e)},S:function(t,e){return Ho.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Bk(r);case"XXXX":case"XX":return yc(r);case"XXXXX":case"XXX":default:return yc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Bk(r);case"xxxx":case"xx":return yc(r);case"xxxxx":case"xxx":default:return yc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Uk(r,":");case"OOOO":default:return"GMT"+yc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Uk(r,":");case"zzzz":default:return"GMT"+yc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Zt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Zt(r,e.length)}};function Uk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+Zt(a,2)}function Bk(t,e){return t%60===0?(t>0?"-":"+")+Zt(Math.abs(t)/60,2):yc(t,e)}function yc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Zt(Math.trunc(r/60),2),a=Zt(r%60,2);return n+s+e+a}const Hk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},hF=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wse=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Hk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Hk(r,e)).replace("{{time}}",hF(s,e))},bse={p:hF,P:wse},jse=/^D+$/,Nse=/^Y+$/,Sse=["D","DD","YY","YYYY"];function Ese(t){return jse.test(t)}function Cse(t){return Nse.test(t)}function Pse(t,e,n){const r=Tse(t,e,n);if(console.warn(r),Sse.includes(t))throw new RangeError(r)}function Tse(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ise=/^'([^]*?)'?$/,Ase=/''/g,Ose=/[a-zA-Z]/;function dr(t,e,n){var f,m,p,y,j,b,N,_;const r=Zh(),s=(n==null?void 0:n.locale)??r.locale??FE,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(j=n==null?void 0:n.locale)==null?void 0:j.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((_=(N=r.locale)==null?void 0:N.options)==null?void 0:_.weekStartsOn)??0,l=gt(t);if(!Ore(l))throw new RangeError("Invalid time value");let u=e.match(Rse).map(w=>{const E=w[0];if(E==="p"||E==="P"){const R=bse[E];return R(w,s.formatLong)}return w}).join("").match(kse).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const E=w[0];if(E==="'")return{isToken:!1,value:Mse(w)};if(zk[E])return{isToken:!0,value:w};if(E.match(Ose))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return u.map(w=>{if(!w.isToken)return w.value;const E=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Cse(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Ese(E))&&Pse(E,e,String(t));const R=zk[E[0]];return R(l,E,s.localize,d)}).join("")}function Mse(t){const e=t.match(Ise);return e?e[1].replace(Ase,"'"):t}function Dse(t,e,n){const r=Zh(),s=(n==null?void 0:n.locale)??r.locale??FE,a=2520,o=sy(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,d;o>0?(u=gt(e),d=gt(t)):(u=gt(t),d=gt(e));const f=zre(d,u),m=(ah(d)-ah(u))/1e3,p=Math.round((f-m)/60);let y;if(p<2)return n!=null&&n.includeSeconds?f<5?s.formatDistance("lessThanXSeconds",5,l):f<10?s.formatDistance("lessThanXSeconds",10,l):f<20?s.formatDistance("lessThanXSeconds",20,l):f<40?s.formatDistance("halfAMinute",0,l):f<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<$k){const j=Math.round(p/60);return s.formatDistance("aboutXHours",j,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<Nv){const j=Math.round(p/$k);return s.formatDistance("xDays",j,l)}else if(p<Nv*2)return y=Math.round(p/Nv),s.formatDistance("aboutXMonths",y,l)}if(y=$re(d,u),y<12){const j=Math.round(p/Nv);return s.formatDistance("xMonths",j,l)}else{const j=y%12,b=Math.trunc(y/12);return j<3?s.formatDistance("aboutXYears",b,l):j<9?s.formatDistance("overXYears",b,l):s.formatDistance("almostXYears",b+1,l)}}function Qh(t,e){return Dse(t,Are(t),e)}function Lse(t){const e=gt(t),n=e.getFullYear(),r=e.getMonth(),s=Ss(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Fse(t){return Math.trunc(+gt(t)/1e3)}function Vse(t){const e=gt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function $se(t,e){return Mre(Vse(t),Ns(t),e)+1}function aj(t,e){const n=gt(t),r=gt(e);return n.getTime()>r.getTime()}function fF(t,e){const n=gt(t),r=gt(e);return+n<+r}function VE(t,e){const n=gt(t),r=gt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function zse(t,e){const n=gt(t),r=gt(e);return n.getFullYear()===r.getFullYear()}function Kw(t,e){return Yr(t,-e)}function Zw(t,e){const n=gt(t),r=n.getFullYear(),s=n.getDate(),a=Ss(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Lse(a);return n.setMonth(e,Math.min(s,o)),n}function qk(t,e){const n=gt(t);return isNaN(+n)?Ss(t,NaN):(n.setFullYear(e),n)}const Use={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Bse=(t,e,n)=>{let r;const s=Use[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Hse={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},qse={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Wse={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gse={date:Md({formats:Hse,defaultWidth:"full"}),time:Md({formats:qse,defaultWidth:"full"}),dateTime:Md({formats:Wse,defaultWidth:"full"})},Kse={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Zse=(t,e,n,r)=>Kse[t],Qse={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Yse={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Xse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Jse={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eie={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},tie=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},nie=["MMM","MMMM"],rie={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&nie.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:tie,era:aa({values:Qse,defaultWidth:"wide"}),quarter:aa({values:Yse,defaultWidth:"wide",argumentCallback:t=>t-1}),month:aa({values:Xse,defaultWidth:"wide"}),day:aa({values:Jse,defaultWidth:"wide"}),dayPeriod:aa({values:eie,defaultWidth:"wide"})},sie=/^(\d+)(ième|ère|ème|er|e)?/i,iie=/\d+/i,aie={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},oie={any:[/^av/i,/^ap/i]},lie={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},cie={any:[/1/i,/2/i,/3/i,/4/i]},uie={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},die={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},hie={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},fie={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},mie={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},pie={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},gie={ordinalNumber:lF({matchPattern:sie,parsePattern:iie,valueCallback:t=>parseInt(t)}),era:oa({matchPatterns:aie,defaultMatchWidth:"wide",parsePatterns:oie,defaultParseWidth:"any"}),quarter:oa({matchPatterns:lie,defaultMatchWidth:"wide",parsePatterns:cie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:oa({matchPatterns:uie,defaultMatchWidth:"wide",parsePatterns:die,defaultParseWidth:"any"}),day:oa({matchPatterns:hie,defaultMatchWidth:"wide",parsePatterns:fie,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:mie,defaultMatchWidth:"any",parsePatterns:pie,defaultParseWidth:"any"})},Vr={code:"fr",formatDistance:Bse,formatLong:Gse,formatRelative:Zse,localize:rie,match:gie,options:{weekStartsOn:1,firstWeekContainsDate:4}},hx=({listing:t})=>{var m,p,y,j,b,N;const e=(_,w)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const E=w;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:E}).format(_)}catch{return`${_} €`}},n=_=>{switch(_){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=_=>{switch(_){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return _}},s=()=>{switch(t.transactionType){case"donation":return i.jsx(th,{className:"w-3 h-3"});case"exchange":return i.jsx(vo,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=_=>{try{let w;if(!_)return"Date inconnue";if(_ instanceof Date)w=_;else if(typeof _=="string"||typeof _=="number")w=new Date(_);else if(_&&typeof _.toDate=="function")w=_.toDate();else if(_&&typeof _=="object"&&"seconds"in _)w=new Date(_.seconds*1e3);else return"Date inconnue";return isNaN(w.getTime())?"Date inconnue":Qh(w,{addSuffix:!0,locale:Vr})}catch{return"Date inconnue"}},l=t.price||0,u=t.currency||"EUR",d=t.condition||"good",f=t.transactionType||"sale";return i.jsxs(ve,{className:"group relative bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[i.jsx(ze,{to:`/listing/${t.id}`,className:"block",children:i.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[i.jsx("img",{src:((m=t.images)==null?void 0:m[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[i.jsx(rF,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),i.jsx(sF,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),f!=="sale"&&i.jsxs(ot,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[s(),i.jsx("span",{className:"ml-1.5 text-sm",children:f==="donation"?"Don":"Troc"})]}),f==="sale"&&i.jsx(ot,{className:`absolute top-3 left-3 ${n(d)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(d)}),t.environmentalImpact&&i.jsxs(ot,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[i.jsx(Oi,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&i.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),i.jsxs(ye,{className:"p-6 space-y-4",children:[i.jsxs(ze,{to:`/listing/${t.id}`,className:"block",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`text-2xl font-bold ${f==="donation"?"text-green-600":f==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(l,u)}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[i.jsx(eh,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:t.views||0})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),f==="exchange"&&t.exchangeFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[i.jsx(vo,{className:"w-4 h-4 text-purple-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[i.jsx(Lr,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((p=t.location)==null?void 0:p.campus)||((y=t.location)!=null&&y.city&&((j=t.location)!=null&&j.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[i.jsx(Hn,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs(_o,{className:"w-9 h-9 border-2 border-gray-100",children:[i.jsx(wo,{src:t.sellerAvatar}),i.jsx(bo,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((N=(b=t.sellerName)==null?void 0:b[0])==null?void 0:N.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&i.jsx(Ht,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),i.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Université non spécifiée"})})]})]}),t.aiPriceEstimate&&f==="sale"&&i.jsx(ot,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var mF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wk=ue.createContext&&ue.createContext(mF),vie=["attr","size","title"];function yie(t,e){if(t==null)return{};var n=xie(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(this,arguments)}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(n),!0).forEach(function(r){_ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ie(t,e,n){return e=wie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wie(t){var e=bie(t,"string");return typeof e=="symbol"?e:e+""}function bie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pF(t){return t&&t.map((e,n)=>ue.createElement(e.tag,mx({key:n},e.attr),pF(e.child)))}function Ql(t){return e=>ue.createElement(jie,fx({attr:mx({},t.attr)},e),pF(t.child))}function jie(t){var e=n=>{var{attr:r,size:s,title:a}=t,o=yie(t,vie),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ue.createElement("svg",fx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:mx(mx({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&ue.createElement("title",null,a),t.children)};return Wk!==void 0?ue.createElement(Wk.Consumer,null,n=>e(n)):e(mF)}function Nie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Sie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Eie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Cie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function Pie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Tie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function kie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Rie(t){return Ql({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Iie=()=>{const[t,e]=x.useState(""),n=fr(),r=s=>{s.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return i.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[i.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:i.jsx(es,{className:"w-5 h-5"})}),i.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:s=>e(s.target.value),"aria-label":"Rechercher"}),i.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},Kk={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},Aie=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),Oie=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),Mie=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),Die=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),Lie=[{id:"electronics",name:"Électronique",icon:Cie,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Sie,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:Nie,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:Eie,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:Pie,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Tie,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Rie,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:kie,color:"text-blue-600",description:"Échanges de services et objets"}],Fie=[{icon:Ht,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:Die,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:Oi,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:$D,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],Vie=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:Aie,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:Oie,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:Mie,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],$ie=()=>{const{featuredListings:t,fetchFeaturedListings:e}=s_();return x.useEffect(()=>{e()},[e]),i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Bienvenue sur StudyMarket"}),i.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:i.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[i.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:i.jsxs(ot,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[i.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),i.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),i.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),i.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:i.jsx(Iie,{})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Vie.map((n,r)=>i.jsx(ze,{to:n.link,className:"group",children:i.jsx(ve,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:i.jsx(n.icon,{})}),i.jsx("h3",{className:"font-semibold mb-1",children:n.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(te,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:i.jsxs(ze,{to:"/listings",children:["Parcourir les annonces",i.jsx(cp,{className:"w-4 h-4 ml-2"})]})}),i.jsx(te,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:i.jsx(ze,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),i.jsx("section",{className:"py-10 sm:py-16 px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),i.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Lie.map(n=>n.id==="jobs"?i.jsx(ze,{to:"/jobs",className:"group",children:i.jsx(ve,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx("img",{src:Kk[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id):i.jsx(ze,{to:`/listings?category=${n.id}`,className:"group",children:i.jsx(ve,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx("img",{src:Kk[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))})]})}),t.length>0&&i.jsx("section",{className:"py-16 px-4 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),i.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs(ze,{to:"/listings",children:["Voir tout",i.jsx(cp,{className:"w-4 h-4 ml-2"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>i.jsx(hx,{listing:n},n.id))})]})}),i.jsx("section",{className:"py-16 px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),i.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Fie.map((n,r)=>i.jsx(ve,{className:"border-0 shadow-none",children:i.jsx(ye,{className:"p-4 sm:p-6",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),i.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),i.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:i.jsx("div",{className:"container mx-auto text-center",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx(Oi,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),i.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),i.jsx(te,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:i.jsx(ze,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),i.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx(Vh,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),i.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(te,{size:"lg",variant:"secondary",asChild:!0,children:i.jsxs(ze,{to:"/auth",children:[i.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),i.jsx(te,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:i.jsx(ze,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};var gF={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(t,e){(function(n,r){t.exports=r()})(ad,function(){function n(Y,ne,ee){return ne in Y?Object.defineProperty(Y,ne,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Y[ne]=ee,Y}function r(Y,ne){var ee=Object.keys(Y);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(Y);ne&&(ie=ie.filter(function(fe){return Object.getOwnPropertyDescriptor(Y,fe).enumerable})),ee.push.apply(ee,ie)}return ee}function s(Y){for(var ne=1;ne<arguments.length;ne++){var ee=arguments[ne]!=null?arguments[ne]:{};ne%2?r(Object(ee),!0).forEach(function(ie){n(Y,ie,ee[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ee)):r(Object(ee)).forEach(function(ie){Object.defineProperty(Y,ie,Object.getOwnPropertyDescriptor(ee,ie))})}return Y}function a(Y,ne){if(Y==null)return{};var ee,ie,fe=function(Ie,Ce){if(Ie==null)return{};var he,De,qe={},vt=Object.keys(Ie);for(De=0;De<vt.length;De++)he=vt[De],Ce.indexOf(he)>=0||(qe[he]=Ie[he]);return qe}(Y,ne);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);for(ie=0;ie<_e.length;ie++)ee=_e[ie],ne.indexOf(ee)>=0||Object.prototype.propertyIsEnumerable.call(Y,ee)&&(fe[ee]=Y[ee])}return fe}function o(Y,ne){return function(ee){if(Array.isArray(ee))return ee}(Y)||function(ee,ie){if(Symbol.iterator in Object(ee)||Object.prototype.toString.call(ee)==="[object Arguments]"){var fe=[],_e=!0,Ie=!1,Ce=void 0;try{for(var he,De=ee[Symbol.iterator]();!(_e=(he=De.next()).done)&&(fe.push(he.value),!ie||fe.length!==ie);_e=!0);}catch(qe){Ie=!0,Ce=qe}finally{try{_e||De.return==null||De.return()}finally{if(Ie)throw Ce}}return fe}}(Y,ne)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(Y){return function(ne){if(Array.isArray(ne)){for(var ee=0,ie=new Array(ne.length);ee<ne.length;ee++)ie[ee]=ne[ee];return ie}}(Y)||function(ne){if(Symbol.iterator in Object(ne)||Object.prototype.toString.call(ne)==="[object Arguments]")return Array.from(ne)}(Y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(Y){var ne,ee="algoliasearch-client-js-".concat(Y.key),ie=function(){return ne===void 0&&(ne=Y.localStorage||window.localStorage),ne},fe=function(){return JSON.parse(ie().getItem(ee)||"{}")},_e=function(Ce){ie().setItem(ee,JSON.stringify(Ce))},Ie=function(){var Ce=Y.timeToLive?1e3*Y.timeToLive:null,he=fe(),De=Object.fromEntries(Object.entries(he).filter(function(vt){return o(vt,2)[1].timestamp!==void 0}));if(_e(De),Ce){var qe=Object.fromEntries(Object.entries(De).filter(function(vt){var Z=o(vt,2)[1],re=new Date().getTime();return!(Z.timestamp+Ce<re)}));_e(qe)}};return{get:function(Ce,he){var De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){Ie();var qe=JSON.stringify(Ce);return fe()[qe]}).then(function(qe){return Promise.all([qe?qe.value:he(),qe!==void 0])}).then(function(qe){var vt=o(qe,2),Z=vt[0],re=vt[1];return Promise.all([Z,re||De.miss(Z)])}).then(function(qe){return o(qe,1)[0]})},set:function(Ce,he){return Promise.resolve().then(function(){var De=fe();return De[JSON.stringify(Ce)]={timestamp:new Date().getTime(),value:he},ie().setItem(ee,JSON.stringify(De)),he})},delete:function(Ce){return Promise.resolve().then(function(){var he=fe();delete he[JSON.stringify(Ce)],ie().setItem(ee,JSON.stringify(he))})},clear:function(){return Promise.resolve().then(function(){ie().removeItem(ee)})}}}function d(Y){var ne=l(Y.caches),ee=ne.shift();return ee===void 0?{get:function(ie,fe){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},Ie=fe();return Ie.then(function(Ce){return Promise.all([Ce,_e.miss(Ce)])}).then(function(Ce){return o(Ce,1)[0]})},set:function(ie,fe){return Promise.resolve(fe)},delete:function(ie){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(ie,fe){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return ee.get(ie,fe,_e).catch(function(){return d({caches:ne}).get(ie,fe,_e)})},set:function(ie,fe){return ee.set(ie,fe).catch(function(){return d({caches:ne}).set(ie,fe)})},delete:function(ie){return ee.delete(ie).catch(function(){return d({caches:ne}).delete(ie)})},clear:function(){return ee.clear().catch(function(){return d({caches:ne}).clear()})}}}function f(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},ne={};return{get:function(ee,ie){var fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},_e=JSON.stringify(ee);if(_e in ne)return Promise.resolve(Y.serializable?JSON.parse(ne[_e]):ne[_e]);var Ie=ie(),Ce=fe&&fe.miss||function(){return Promise.resolve()};return Ie.then(function(he){return Ce(he)}).then(function(){return Ie})},set:function(ee,ie){return ne[JSON.stringify(ee)]=Y.serializable?JSON.stringify(ie):ie,Promise.resolve(ie)},delete:function(ee){return delete ne[JSON.stringify(ee)],Promise.resolve()},clear:function(){return ne={},Promise.resolve()}}}function m(Y){for(var ne=Y.length-1;ne>0;ne--){var ee=Math.floor(Math.random()*(ne+1)),ie=Y[ne];Y[ne]=Y[ee],Y[ee]=ie}return Y}function p(Y,ne){return ne&&Object.keys(ne).forEach(function(ee){Y[ee]=ne[ee](Y)}),Y}function y(Y){for(var ne=arguments.length,ee=new Array(ne>1?ne-1:0),ie=1;ie<ne;ie++)ee[ie-1]=arguments[ie];var fe=0;return Y.replace(/%s/g,function(){return encodeURIComponent(ee[fe++])})}var j={WithinQueryParameters:0,WithinHeaders:1};function b(Y,ne){var ee=Y||{},ie=ee.data||{};return Object.keys(ee).forEach(function(fe){["timeout","headers","queryParameters","data","cacheable"].indexOf(fe)===-1&&(ie[fe]=ee[fe])}),{data:Object.entries(ie).length>0?ie:void 0,timeout:ee.timeout||ne,headers:ee.headers||{},queryParameters:ee.queryParameters||{},cacheable:ee.cacheable}}var N={Read:1,Write:2,Any:3},_=1,w=2,E=3;function R(Y){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return s(s({},Y),{},{status:ne,lastUpdate:Date.now()})}function A(Y){return typeof Y=="string"?{protocol:"https",url:Y,accept:N.Any}:{protocol:Y.protocol||"https",url:Y.url,accept:Y.accept||N.Any}}var B="GET",I="POST";function F(Y,ne){return Promise.all(ne.map(function(ee){return Y.get(ee,function(){return Promise.resolve(R(ee))})})).then(function(ee){var ie=ee.filter(function(Ie){return function(Ce){return Ce.status===_||Date.now()-Ce.lastUpdate>12e4}(Ie)}),fe=ee.filter(function(Ie){return function(Ce){return Ce.status===E&&Date.now()-Ce.lastUpdate<=12e4}(Ie)}),_e=[].concat(l(ie),l(fe));return{getTimeout:function(Ie,Ce){return(fe.length===0&&Ie===0?1:fe.length+3+Ie)*Ce},statelessHosts:_e.length>0?_e.map(function(Ie){return A(Ie)}):ne}})}function $(Y,ne,ee,ie){var fe=[],_e=function(Z,re){if(!(Z.method===B||Z.data===void 0&&re.data===void 0)){var de=Array.isArray(Z.data)?Z.data:s(s({},Z.data),re.data);return JSON.stringify(de)}}(ee,ie),Ie=function(Z,re){var de=s(s({},Z.headers),re.headers),Te={};return Object.keys(de).forEach(function(Re){var Se=de[Re];Te[Re.toLowerCase()]=Se}),Te}(Y,ie),Ce=ee.method,he=ee.method!==B?{}:s(s({},ee.data),ie.data),De=s(s(s({"x-algolia-agent":Y.userAgent.value},Y.queryParameters),he),ie.queryParameters),qe=0,vt=function Z(re,de){var Te=re.pop();if(Te===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:k(fe)};var Re={data:_e,headers:Ie,method:Ce,url:M(Te,ee.path,De),connectTimeout:de(qe,Y.timeouts.connect),responseTimeout:de(qe,ie.timeout)},Se=function(We){var nt={request:Re,response:We,host:Te,triesLeft:re.length};return fe.push(nt),nt},Ve={onSuccess:function(We){return function(nt){try{return JSON.parse(nt.content)}catch(Xt){throw function(sr,Gn){return{name:"DeserializationError",message:sr,response:Gn}}(Xt.message,nt)}}(We)},onRetry:function(We){var nt=Se(We);return We.isTimedOut&&qe++,Promise.all([Y.logger.info("Retryable failure",G(nt)),Y.hostsCache.set(Te,R(Te,We.isTimedOut?E:w))]).then(function(){return Z(re,de)})},onFail:function(We){throw Se(We),function(nt,Xt){var sr=nt.content,Gn=nt.status,Hr=sr;try{Hr=JSON.parse(sr).message}catch{}return function(ls,cs,Gi){return{name:"ApiError",message:ls,status:cs,transporterStackTrace:Gi}}(Hr,Gn,Xt)}(We,k(fe))}};return Y.requester.send(Re).then(function(We){return function(nt,Xt){return function(sr){var Gn=sr.status;return sr.isTimedOut||function(Hr){var ls=Hr.isTimedOut,cs=Hr.status;return!ls&&~~cs==0}(sr)||~~(Gn/100)!=2&&~~(Gn/100)!=4}(nt)?Xt.onRetry(nt):~~(nt.status/100)==2?Xt.onSuccess(nt):Xt.onFail(nt)}(We,Ve)})};return F(Y.hostsCache,ne).then(function(Z){return vt(l(Z.statelessHosts).reverse(),Z.getTimeout)})}function P(Y){var ne={value:"Algolia for JavaScript (".concat(Y,")"),add:function(ee){var ie="; ".concat(ee.segment).concat(ee.version!==void 0?" (".concat(ee.version,")"):"");return ne.value.indexOf(ie)===-1&&(ne.value="".concat(ne.value).concat(ie)),ne}};return ne}function M(Y,ne,ee){var ie=D(ee),fe="".concat(Y.protocol,"://").concat(Y.url,"/").concat(ne.charAt(0)==="/"?ne.substr(1):ne);return ie.length&&(fe+="?".concat(ie)),fe}function D(Y){return Object.keys(Y).map(function(ne){return y("%s=%s",ne,(ee=Y[ne],Object.prototype.toString.call(ee)==="[object Object]"||Object.prototype.toString.call(ee)==="[object Array]"?JSON.stringify(Y[ne]):Y[ne]));var ee}).join("&")}function k(Y){return Y.map(function(ne){return G(ne)})}function G(Y){var ne=Y.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return s(s({},Y),{},{request:s(s({},Y.request),{},{headers:s(s({},Y.request.headers),ne)})})}var se=function(Y){var ne=Y.appId,ee=function(fe,_e,Ie){var Ce={"x-algolia-api-key":Ie,"x-algolia-application-id":_e};return{headers:function(){return fe===j.WithinHeaders?Ce:{}},queryParameters:function(){return fe===j.WithinQueryParameters?Ce:{}}}}(Y.authMode!==void 0?Y.authMode:j.WithinHeaders,ne,Y.apiKey),ie=function(fe){var _e=fe.hostsCache,Ie=fe.logger,Ce=fe.requester,he=fe.requestsCache,De=fe.responsesCache,qe=fe.timeouts,vt=fe.userAgent,Z=fe.hosts,re=fe.queryParameters,de={hostsCache:_e,logger:Ie,requester:Ce,requestsCache:he,responsesCache:De,timeouts:qe,userAgent:vt,headers:fe.headers,queryParameters:re,hosts:Z.map(function(Te){return A(Te)}),read:function(Te,Re){var Se=b(Re,de.timeouts.read),Ve=function(){return $(de,de.hosts.filter(function(nt){return(nt.accept&N.Read)!=0}),Te,Se)};if((Se.cacheable!==void 0?Se.cacheable:Te.cacheable)!==!0)return Ve();var We={request:Te,mappedRequestOptions:Se,transporter:{queryParameters:de.queryParameters,headers:de.headers}};return de.responsesCache.get(We,function(){return de.requestsCache.get(We,function(){return de.requestsCache.set(We,Ve()).then(function(nt){return Promise.all([de.requestsCache.delete(We),nt])},function(nt){return Promise.all([de.requestsCache.delete(We),Promise.reject(nt)])}).then(function(nt){var Xt=o(nt,2);return Xt[0],Xt[1]})})},{miss:function(nt){return de.responsesCache.set(We,nt)}})},write:function(Te,Re){return $(de,de.hosts.filter(function(Se){return(Se.accept&N.Write)!=0}),Te,b(Re,de.timeouts.write))}};return de}(s(s({hosts:[{url:"".concat(ne,"-dsn.algolia.net"),accept:N.Read},{url:"".concat(ne,".algolia.net"),accept:N.Write}].concat(m([{url:"".concat(ne,"-1.algolianet.com")},{url:"".concat(ne,"-2.algolianet.com")},{url:"".concat(ne,"-3.algolianet.com")}]))},Y),{},{headers:s(s(s({},ee.headers()),{"content-type":"application/x-www-form-urlencoded"}),Y.headers),queryParameters:s(s({},ee.queryParameters()),Y.queryParameters)}));return p({transporter:ie,appId:ne,addAlgoliaAgent:function(fe,_e){ie.userAgent.add({segment:fe,version:_e})},clearCache:function(){return Promise.all([ie.requestsCache.clear(),ie.responsesCache.clear()]).then(function(){})}},Y.methods)},ae=function(Y){return function(ne,ee){return ne.method===B?Y.transporter.read(ne,ee):Y.transporter.write(ne,ee)}},K=function(Y){return function(ne){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={transporter:Y.transporter,appId:Y.appId,indexName:ne};return p(ie,ee.methods)}},z=function(Y){return function(ne,ee){var ie=ne.map(function(fe){return s(s({},fe),{},{params:D(fe.params||{})})});return Y.transporter.read({method:I,path:"1/indexes/*/queries",data:{requests:ie},cacheable:!0},ee)}},H=function(Y){return function(ne,ee){return Promise.all(ne.map(function(ie){var fe=ie.params,_e=fe.facetName,Ie=fe.facetQuery,Ce=a(fe,["facetName","facetQuery"]);return K(Y)(ie.indexName,{methods:{searchForFacetValues:J}}).searchForFacetValues(_e,Ie,s(s({},ee),Ce))}))}},V=function(Y){return function(ne,ee,ie){return Y.transporter.read({method:I,path:y("1/answers/%s/prediction",Y.indexName),data:{query:ne,queryLanguages:ee},cacheable:!0},ie)}},q=function(Y){return function(ne,ee){return Y.transporter.read({method:I,path:y("1/indexes/%s/query",Y.indexName),data:{query:ne},cacheable:!0},ee)}},J=function(Y){return function(ne,ee,ie){return Y.transporter.read({method:I,path:y("1/indexes/%s/facets/%s/query",Y.indexName,ne),data:{facetQuery:ee},cacheable:!0},ie)}},me=1,Pe=2,Me=3,oe=function(Y){return function(ne,ee){var ie=ne.map(function(fe){return s(s({},fe),{},{threshold:fe.threshold||0})});return Y.transporter.read({method:I,path:"1/indexes/*/recommendations",data:{requests:ie},cacheable:!0},ee)}};function xe(Y,ne,ee){var ie,fe={appId:Y,apiKey:ne,timeouts:{connect:1,read:2,write:30},requester:{send:function(_e){return new Promise(function(Ie){var Ce=new XMLHttpRequest;Ce.open(_e.method,_e.url,!0),Object.keys(_e.headers).forEach(function(vt){return Ce.setRequestHeader(vt,_e.headers[vt])});var he,De=function(vt,Z){return setTimeout(function(){Ce.abort(),Ie({status:0,content:Z,isTimedOut:!0})},1e3*vt)},qe=De(_e.connectTimeout,"Connection timeout");Ce.onreadystatechange=function(){Ce.readyState>Ce.OPENED&&he===void 0&&(clearTimeout(qe),he=De(_e.responseTimeout,"Socket timeout"))},Ce.onerror=function(){Ce.status===0&&(clearTimeout(qe),clearTimeout(he),Ie({content:Ce.responseText||"Network request failed",status:Ce.status,isTimedOut:!1}))},Ce.onload=function(){clearTimeout(qe),clearTimeout(he),Ie({content:Ce.responseText,status:Ce.status,isTimedOut:!1})},Ce.send(_e.data)})}},logger:(ie=Me,{debug:function(_e,Ie){return me>=ie&&console.debug(_e,Ie),Promise.resolve()},info:function(_e,Ie){return Pe>=ie&&console.info(_e,Ie),Promise.resolve()},error:function(_e,Ie){return console.error(_e,Ie),Promise.resolve()}}),responsesCache:f(),requestsCache:f({serializable:!1}),hostsCache:d({caches:[u({key:"".concat("4.25.2","-").concat(Y)}),f()]}),userAgent:P("4.25.2").add({segment:"Browser",version:"lite"}),authMode:j.WithinQueryParameters};return se(s(s(s({},fe),ee),{},{methods:{search:z,searchForFacetValues:H,multipleQueries:z,multipleSearchForFacetValues:H,customRequest:ae,initIndex:function(_e){return function(Ie){return K(_e)(Ie,{methods:{search:q,searchForFacetValues:J,findAnswers:V}})}},getRecommendations:oe}}))}return xe.version="4.25.2",xe})})(gF);var zie=gF.exports;const vF=Pa(zie);var Uie="Expected a function",Zk=NaN,Bie="[object Symbol]",Hie=/^\s+|\s+$/g,qie=/^[-+]0x[0-9a-f]+$/i,Wie=/^0b[01]+$/i,Gie=/^0o[0-7]+$/i,Kie=parseInt,Zie=typeof ad=="object"&&ad&&ad.Object===Object&&ad,Qie=typeof self=="object"&&self&&self.Object===Object&&self,Yie=Zie||Qie||Function("return this")(),Xie=Object.prototype,Jie=Xie.toString,eae=Math.max,tae=Math.min,Qw=function(){return Yie.Date.now()};function nae(t,e,n){var r,s,a,o,l,u,d=0,f=!1,m=!1,p=!0;if(typeof t!="function")throw new TypeError(Uie);e=Qk(e)||0,oj(n)&&(f=!!n.leading,m="maxWait"in n,a=m?eae(Qk(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function y(B){var I=r,F=s;return r=s=void 0,d=B,o=t.apply(F,I),o}function j(B){return d=B,l=setTimeout(_,e),f?y(B):o}function b(B){var I=B-u,F=B-d,$=e-I;return m?tae($,a-F):$}function N(B){var I=B-u,F=B-d;return u===void 0||I>=e||I<0||m&&F>=a}function _(){var B=Qw();if(N(B))return w(B);l=setTimeout(_,b(B))}function w(B){return l=void 0,p&&r?y(B):(r=s=void 0,o)}function E(){l!==void 0&&clearTimeout(l),d=0,r=u=s=l=void 0}function R(){return l===void 0?o:w(Qw())}function A(){var B=Qw(),I=N(B);if(r=arguments,s=this,u=B,I){if(l===void 0)return j(u);if(m)return l=setTimeout(_,e),y(u)}return l===void 0&&(l=setTimeout(_,e)),o}return A.cancel=E,A.flush=R,A}function oj(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function rae(t){return!!t&&typeof t=="object"}function sae(t){return typeof t=="symbol"||rae(t)&&Jie.call(t)==Bie}function Qk(t){if(typeof t=="number")return t;if(sae(t))return Zk;if(oj(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=oj(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Hie,"");var n=Wie.test(t);return n||Gie.test(t)?Kie(t.slice(2),n?2:8):qie.test(t)?Zk:+t}var iae=nae;const aae=Pa(iae),oae="Q3E5Y56YF4",lae="5f0e550b9ede2710482ad296ad3b3cae",cae="student-housing",uae=vF(oae,lae),dae=uae.initIndex(cae),Yw={lokaviz:"Lokaviz",abele:"Abélé","location-etudiant":"Location Étudiant"},hae={lokaviz:"bg-green-500 text-white border-green-500",abele:"bg-blue-500 text-white border-blue-500","location-etudiant":"bg-red-500 text-white border-red-500"},fae={lokaviz:"bg-green-600",abele:"bg-blue-600","location-etudiant":"bg-red-600"},mae=["Résidence","Appartement","Studio","Chambre"],Yk=[{key:"internet",label:"Internet",icon:"🌐"},{key:"laverie",label:"Laverie",icon:"🧺"},{key:"salle-sport",label:"Salle de sport",icon:"🏃"},{key:"parking",label:"Parking",icon:"🅿️"},{key:"securite",label:"Sécurité",icon:"🛡️"}],pae={internet:"internet",laverie:"laverie","salle-sport":"salle de sport",parking:"parking",securite:"sécurité"},gae={internet:"🌐",laverie:"🧺","salle de sport":"🏃",parking:"🅿️",sécurité:"🛡️",fitness:"💪",cour:"🌳"};function vae(t){if(!t)return"";const[e,n]=t.split("-");return`${{"01":"Janvier","02":"Février","03":"Mars","04":"Avril","05":"Mai","06":"Juin","07":"Juillet","08":"Août","09":"Septembre",10:"Octobre",11:"Novembre",12:"Décembre"}[n]} ${e}`}function yae({onQuickFilter:t}){const n=[new Date().getHours()>18?"Proche transports":"Proche université","Internet inclus","Laverie","PMR","Coup de cœur"];return i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[i.jsx("span",{className:"font-semibold text-blue-700",children:"Suggestions pour toi :"}),n.map(r=>i.jsx("button",{onClick:()=>t(r),className:`
              px-3 py-1 rounded-full font-semibold text-xs
              bg-blue-100 dark:bg-blue-900 dark:text-blue-200
              ring-1 ring-inset ring-blue-300 dark:ring-blue-800
              transition-all duration-150
              hover:bg-blue-200 dark:hover:bg-blue-800
              shadow
            `,children:r},r))]})})}const xae=function(){var K,z,H;const[e,n]=x.useState(""),[r,s]=x.useState([]),[a,o]=x.useState(!1),[l,u]=x.useState(1),[d,f]=x.useState({}),[m,p]=x.useState({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),[y,j]=x.useState([]),[b,N]=x.useState(!1),[_,w]=x.useState(()=>localStorage.getItem("theme")==="dark"||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);x.useEffect(()=>{_?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[_]);const E=x.useCallback(aae((V,q,J)=>R(V,q,J),300),[]);x.useEffect(()=>{E(e,m,l)},[e,m,l]);const R=async(V,q,J)=>{o(!0);try{const me=[];if(q.sources.length>0){const oe=q.sources.map(xe=>`source:"${Yw[xe]}"`).join(" OR ");me.push(`(${oe})`)}if(q.types.length>0){const oe=q.types.map(xe=>`types:"${xe.toUpperCase()}"`).join(" OR ");me.push(`(${oe})`)}if(q.services.length>0){const oe=q.services.map(xe=>`services:"${pae[xe]}"`);me.push(...oe)}(q.priceRange.min>0||q.priceRange.max<1500)&&me.push(`prix:${q.priceRange.min} TO ${q.priceRange.max}`),q.location&&me.push(`(adresse:${q.location} OR ville:${q.location} OR code_postal:${q.location})`),q.situation&&me.push(`situation:"${q.situation}"`),q.label&&me.push(`label:"${q.label}"`),q.availability&&me.push(`date_de_disponibilite >= ${q.availability}`),q.hasPhoto&&me.push("has_photo:true"),q.pmr&&me.push("pmr_accessible:true"),q.reference&&me.push(`reference:"${q.reference}"`);const Pe=me.join(" AND "),Me=await dae.search(V,{filters:Pe,facets:["source","types","services","adresse"],maxValuesPerFacet:50,hitsPerPage:20,page:J-1});s(Me.hits),f(Me.facets),M(q)}catch{s([])}finally{o(!1)}},A=V=>{p(q=>({...q,sources:q.sources.includes(V)?q.sources.filter(J=>J!==V):[...q.sources,V]})),u(1)},B=V=>{p(q=>({...q,types:q.types.includes(V)?q.types.filter(J=>J!==V):[...q.types,V]})),u(1)},I=V=>{p(q=>({...q,services:q.services.includes(V)?q.services.filter(J=>J!==V):[...q.services,V]})),u(1)},F=(V,q)=>{p(J=>({...J,priceRange:{...J.priceRange,[V]:q}})),u(1)},$=()=>{p({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),u(1)},P=(V,q)=>{p(J=>{const me=J[V];return Array.isArray(me)?{...J,[V]:me.filter(Pe=>Pe!==q)}:J}),u(1)},M=V=>{const q=[];V.sources.forEach(J=>q.push({type:"sources",value:J,label:Yw[J]})),V.types.forEach(J=>q.push({type:"types",value:J,label:J})),V.services.forEach(J=>{var me;return q.push({type:"services",value:J,label:((me=Yk.find(Pe=>Pe.key===J))==null?void 0:me.label)||J})}),(V.priceRange.min>0||V.priceRange.max<1500)&&q.push({type:"priceRange",value:"",label:`Prix: ${V.priceRange.min}€ - ${V.priceRange.max}€`}),j(q)},D=()=>{$()},k=()=>u(V=>Math.max(1,V-1)),G=()=>u(V=>V+1),se={lokaviz:((K=d==null?void 0:d.source)==null?void 0:K.Lokaviz)||0,abele:((z=d==null?void 0:d.source)==null?void 0:z.Abélé)||0,"location-etudiant":((H=d==null?void 0:d.source)==null?void 0:H["Location Étudiant"])||0},ae=V=>{V==="Proche campus"||V==="Proche université"?p(q=>({...q,location:"campus"})):V==="Internet inclus"?p(q=>({...q,services:q.services.includes("internet")?q.services:[...q.services,"internet"]})):V==="Laverie"?p(q=>({...q,services:q.services.includes("laverie")?q.services:[...q.services,"laverie"]})):V==="PMR"&&p(q=>({...q,pmr:!0})),u(1)};return i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen pb-16",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8 px-2 md:px-6",children:[i.jsxs("aside",{className:`
          w-full md:w-72 md:sticky md:top-8 z-20
          bg-white dark:bg-gray-900
          border border-gray-200 dark:border-gray-700
          rounded-2xl shadow-lg
          p-6 mb-4 md:mb-0
          h-fit
          transition-colors
        `,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[i.jsx("span",{className:"font-bold text-lg",children:"Filtres"}),i.jsx("button",{onClick:()=>N(!b),className:"text-blue-600 font-semibold",children:b?"Fermer":"Ouvrir"})]}),i.jsxs("div",{className:`space-y-6 ${b?"":"hidden md:block"}`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Ville / Code postal"}),i.jsx("input",{type:"text",value:m.location,onChange:V=>p(q=>({...q,location:V.target.value})),placeholder:"Ex: Paris ou 75000",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Situation"}),i.jsxs("select",{value:m.situation,onChange:V=>p(q=>({...q,situation:V.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[i.jsx("option",{value:"",children:"Toutes"}),i.jsx("option",{value:"etudiant",children:"Étudiant"}),i.jsx("option",{value:"alternant",children:"Alternant"}),i.jsx("option",{value:"stagiaire",children:"Stagiaire"}),i.jsx("option",{value:"autre",children:"Autre"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Label"}),i.jsxs("select",{value:m.label,onChange:V=>p(q=>({...q,label:V.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[i.jsx("option",{value:"",children:"Tous"}),i.jsx("option",{value:"lokaviz",children:"Lokaviz"}),i.jsx("option",{value:"crous",children:"Crous"}),i.jsx("option",{value:"autre",children:"Autre"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Source"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["lokaviz","abele","location-etudiant"].map(V=>i.jsxs("button",{onClick:()=>A(V),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-2 text-xs transition-all ${m.sources.includes(V)?hae[V]:"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-500"}`,children:[i.jsx("span",{children:Yw[V]}),i.jsx("span",{className:`${fae[V]} text-white px-2 py-1 rounded-full text-xs font-bold`,children:se[V]})]},V))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Type"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:mae.map(V=>i.jsx("button",{onClick:()=>B(V),className:`px-3 py-1 rounded-full border-2 text-xs transition-all ${m.types.includes(V)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600 hover:text-blue-600"}`,children:V},V))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Équipements / Services"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Yk.map(V=>i.jsxs("button",{onClick:()=>I(V.key),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-1 text-xs transition-all ${m.services.includes(V.key)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600"}`,children:[i.jsx("span",{children:V.icon}),i.jsx("span",{children:V.label})]},V.key))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Loyer (€)"}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("span",{className:"text-xs",children:[m.priceRange.min,"€"]}),i.jsx("input",{type:"range",min:0,max:1500,step:50,value:m.priceRange.min,onChange:V=>F("min",Number(V.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),i.jsx("input",{type:"range",min:0,max:1500,step:50,value:m.priceRange.max,onChange:V=>F("max",Number(V.target.value)),className:"w-full h-2 bg-blue-600 rounded-lg appearance-none cursor-pointer"}),i.jsxs("span",{className:"text-xs",children:[m.priceRange.max,"€"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Disponibilité"}),i.jsx("input",{type:"date",value:m.availability,onChange:V=>p(q=>({...q,availability:V.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[i.jsx("input",{type:"checkbox",checked:m.hasPhoto,onChange:V=>p(q=>({...q,hasPhoto:V.target.checked})),className:"accent-blue-600"}),"Photo"]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[i.jsx("input",{type:"checkbox",checked:m.pmr,onChange:V=>p(q=>({...q,pmr:V.target.checked})),className:"accent-blue-600"}),"PMR"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Référence"}),i.jsx("input",{type:"text",value:m.reference,onChange:V=>p(q=>({...q,reference:V.target.value})),placeholder:"Référence annonce",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),i.jsx("button",{onClick:$,className:"w-full mt-2 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition",children:"Effacer tous les filtres"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-center py-8",children:i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Toutes les annonces"})}),i.jsx(yae,{onQuickFilter:ae}),i.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:[i.jsx("button",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium hover:bg-green-200",children:"Proche campus"}),i.jsx("button",{className:"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium hover:bg-purple-200",children:"Internet inclus"}),i.jsx("button",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium hover:bg-yellow-200",children:"Laverie"}),i.jsx("button",{className:"px-3 py-1 rounded-full bg-pink-100 text-pink-700 text-xs font-medium hover:bg-pink-200",children:"PMR"}),i.jsx("button",{className:"px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium hover:bg-red-200",children:"Coup de cœur"})]}),i.jsx("div",{className:"max-w-2xl mx-auto mb-8 px-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Rechercher un logement...",value:e,onChange:V=>n(V.target.value),className:"w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-full shadow-sm focus:border-blue-500 focus:outline-none pr-16"}),i.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-gray-100 rounded-full hover:bg-gray-200",children:"🔍"})]})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-8",children:y.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[y.map((V,q)=>i.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded-full flex items-center space-x-2 shadow-sm",children:[i.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:V.label}),i.jsx("button",{onClick:()=>{V.type==="priceRange"?$():P(V.type,V.value)},className:"w-6 h-6 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-full flex items-center justify-center text-base font-bold hover:bg-red-500 hover:text-white transition-colors border border-gray-400 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":`Retirer le filtre ${V.label}`,children:"×"})]},q)),i.jsx("button",{onClick:$,className:"px-4 py-2 bg-red-500 text-white rounded-full text-sm font-semibold hover:bg-red-600 transition shadow focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Effacer tout"})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[a&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Recherche en cours..."})]}),!a&&r.length===0&&i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Essayez de modifier vos filtres ou votre recherche"}),i.jsx("button",{onClick:D,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Réinitialiser les filtres"})]}),!a&&r.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-6",children:i.jsxs("h2",{className:"text-xl font-semibold",children:[r.length," logement(s) trouvé(s)"]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(V=>{const q=String(V.source_normalized||"").toLowerCase(),J=q==="abele"||String(V.source).toLowerCase().includes("adele"),me=q==="lokaviz",Pe=q==="location-etudiant",Me=[];return J&&Me.push({label:"Adele",color:"bg-blue-500 text-white"}),me&&Me.push({label:"Lokaviz",color:"bg-green-500 text-white"}),Pe&&Me.push({label:"Location-Étudiant",color:"bg-red-500 text-white"}),(V.coup_de_coeur||V.recommande||V.note&&Number(V.note)>=4.5)&&Me.push({label:"Coup de cœur",color:"bg-pink-500 text-white"}),me&&(V.label_lokaviz||V.label_crous)&&Me.push({label:"Label Lokaviz",color:"bg-green-700 text-white"}),V.pmr_accessible&&Me.push({label:"PMR",color:"bg-yellow-500 text-white"}),Array.isArray(V.services)&&V.services.includes("internet")&&Me.push({label:"Internet inclus",color:"bg-blue-200 text-blue-800"}),Array.isArray(V.services)&&V.services.includes("laverie")&&Me.push({label:"Laverie",color:"bg-yellow-200 text-yellow-800"}),(String(V.adresse).toLowerCase().includes("université")||String(V.adresse).toLowerCase().includes("campus"))&&Me.push({label:"Proche campus",color:"bg-green-200 text-green-800"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border dark:border-gray-700 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1 hover:scale-[1.02] group",children:[i.jsxs("div",{className:"h-48 bg-gradient-to-br from-blue-100 to-blue-200 rounded-t-xl flex items-center justify-center overflow-hidden relative",children:[V.image?i.jsxs("picture",{children:[i.jsx("source",{srcSet:V.image.replace(/\.(jpg|png)$/i,".webp"),type:"image/webp"}),i.jsx("source",{srcSet:V.image.replace(/\.(jpg|png)$/i,".avif"),type:"image/avif"}),i.jsx("img",{src:V.image,alt:V.types||"Logement étudiant",className:"object-cover w-full h-full transition-transform duration-300 group-hover:scale-105",loading:"lazy"})]}):i.jsx("span",{className:"text-blue-600 text-4xl transition-transform duration-300 group-hover:scale-110",children:"🏠"}),i.jsx("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-2 shadow hover:bg-pink-100 transition-colors group-hover:scale-110",children:i.jsx("svg",{className:"w-5 h-5 text-pink-500 animate-pulse group-hover:animate-heartbeat",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"})})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex flex-wrap gap-2 mb-2 transition-all duration-200",children:Me.map(oe=>i.jsx("span",{className:`
                                  px-3 py-1 rounded-full font-semibold text-xs
                                  ${oe.color}
                                  ring-1 ring-inset
                                  ring-black/10 dark:ring-white/20
                                  transition-all duration-150
                                  hover:scale-105 hover:shadow-md
                                  dark:bg-opacity-80
                                `,children:oe.label},oe.label))}),i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${String(V.source_normalized)==="lokaviz"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":String(V.source_normalized)==="abele"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":String(V.source_normalized)==="locationetudiant"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:V.source}),i.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:J?V.note?`Note: ${V.note}/5`:"-":V.prix?`${V.prix}€`:"-"})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-sm font-medium",children:V.types}),V.surface&&i.jsxs("span",{className:"text-gray-600 dark:text-gray-200 text-sm",children:[V.surface,"m²"]})]}),V.adresse&&i.jsxs("p",{className:"text-gray-700 dark:text-white text-sm mb-3 line-clamp-2",children:["📍 ",V.adresse]}),V.services&&Array.isArray(V.services)&&V.services.length>0&&i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"flex flex-wrap gap-1",children:[V.services.slice(0,5).map(oe=>i.jsxs("span",{className:`
                                      bg-gray-100 dark:bg-gray-700 dark:text-gray-100
                                      px-2 py-1 rounded-full text-xs flex items-center gap-1
                                      font-medium
                                      ring-1 ring-inset ring-black/5 dark:ring-white/10
                                      transition-all duration-150
                                      hover:bg-blue-100 dark:hover:bg-blue-800
                                    `,children:[gae[oe]||"🔹"," ",oe]},oe)),V.services.length>5&&i.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:["+",V.services.length-5]})]})}),V.date_de_disponibilite&&i.jsx("div",{className:"mb-4",children:i.jsxs("span",{className:"text-green-600 text-sm font-medium",children:["📅 Disponible: ",vae(String(V.date_de_disponibilite))]})}),J&&V.note&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:["Note: ",String(V.note),"/5"]}),i.jsx("a",{href:String(V.lien),target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 text-white text-center py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Voir le logement"})]})]},V.objectID)})}),i.jsxs("div",{className:"flex flex-col items-center space-y-2 mt-12",children:[i.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[i.jsx("button",{onClick:k,disabled:l===1,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Précédent"}),i.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Page ",l]}),i.jsx("button",{onClick:G,disabled:r.length<20,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Suivant"})]}),(()=>{let V=0;typeof d=="object"&&d!==null&&"nbHits"in d&&typeof d.nbHits=="number"?V=d.nbHits:Array.isArray(r)&&r.length>0&&typeof r[0]=="object"&&(V=r.length);const J=Math.ceil(V/20);if(J<=1)return null;let me=Math.max(1,l-3),Pe=Math.min(J,l+3);l<=4&&(me=1,Pe=Math.min(7,J)),l>J-4&&(Pe=J,me=Math.max(1,J-6));const Me=[];for(let oe=me;oe<=Pe;oe++)Me.push(oe);return i.jsxs("div",{className:"flex gap-1 mt-2",children:[me>1&&i.jsx("span",{className:"px-2",children:"..."}),Me.map(oe=>i.jsx("button",{onClick:()=>u(oe),className:`px-3 py-1 rounded-full text-sm font-semibold transition border-2 ${oe===l?"bg-blue-600 text-white border-blue-600 shadow":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-blue-100 dark:hover:bg-blue-900 hover:border-blue-400"}`,children:oe},oe)),Pe<J&&i.jsx("span",{className:"px-2",children:"..."})]})})()]})]})]})]})]})})};var a_="Dialog",[yF,txe]=Pr(a_),[_ae,qi]=yF(a_),xF=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=x.useRef(null),u=x.useRef(null),[d,f]=Bs({prop:r,defaultProp:s??!1,onChange:a,caller:a_});return i.jsx(_ae,{scope:e,triggerRef:l,contentRef:u,contentId:$s(),titleId:$s(),descriptionId:$s(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(m=>!m),[f]),modal:o,children:n})};xF.displayName=a_;var _F="DialogTrigger",wF=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qi(_F,n),a=ft(e,s.triggerRef);return i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":UE(s.open),...r,ref:a,onClick:Fe(t.onClick,s.onOpenToggle)})});wF.displayName=_F;var $E="DialogPortal",[wae,bF]=yF($E,{forceMount:void 0}),jF=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=qi($E,e);return i.jsx(wae,{scope:e,forceMount:n,children:x.Children.map(r,o=>i.jsx(Tr,{present:n||a.open,children:i.jsx(ng,{asChild:!0,container:s,children:o})}))})};jF.displayName=$E;var px="DialogOverlay",NF=x.forwardRef((t,e)=>{const n=bF(px,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=qi(px,t.__scopeDialog);return a.modal?i.jsx(Tr,{present:r||a.open,children:i.jsx(jae,{...s,ref:e})}):null});NF.displayName=px;var bae=Fl("DialogOverlay.RemoveScroll"),jae=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qi(px,n);return i.jsx(sg,{as:bae,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ge.div,{"data-state":UE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),nu="DialogContent",SF=x.forwardRef((t,e)=>{const n=bF(nu,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=qi(nu,t.__scopeDialog);return i.jsx(Tr,{present:r||a.open,children:a.modal?i.jsx(Nae,{...s,ref:e}):i.jsx(Sae,{...s,ref:e})})});SF.displayName=nu;var Nae=x.forwardRef((t,e)=>{const n=qi(nu,t.__scopeDialog),r=x.useRef(null),s=ft(e,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return Y0(a)},[]),i.jsx(EF,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Fe(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Fe(t.onFocusOutside,a=>a.preventDefault())})}),Sae=x.forwardRef((t,e)=>{const n=qi(nu,t.__scopeDialog),r=x.useRef(!1),s=x.useRef(!1);return i.jsx(EF,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),EF=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=qi(nu,n),u=x.useRef(null),d=ft(e,u);return H0(),i.jsxs(i.Fragment,{children:[i.jsx(eg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Jp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":UE(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Eae,{titleId:l.titleId}),i.jsx(Pae,{contentRef:u,descriptionId:l.descriptionId})]})]})}),zE="DialogTitle",CF=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qi(zE,n);return i.jsx(Ge.h2,{id:s.titleId,...r,ref:e})});CF.displayName=zE;var PF="DialogDescription",TF=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qi(PF,n);return i.jsx(Ge.p,{id:s.descriptionId,...r,ref:e})});TF.displayName=PF;var kF="DialogClose",RF=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qi(kF,n);return i.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Fe(t.onClick,()=>s.onOpenChange(!1))})});RF.displayName=kF;function UE(t){return t?"open":"closed"}var IF="DialogTitleWarning",[nxe,AF]=LX(IF,{contentName:nu,titleName:zE,docsSlug:"dialog"}),Eae=({titleId:t})=>{const e=AF(IF),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Cae="DialogDescriptionWarning",Pae=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AF(Cae).contentName}}.`;return x.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Tae=xF,kae=wF,Rae=jF,OF=NF,MF=SF,DF=CF,LF=TF,Iae=RF;const wa=Tae,Dd=kae,Aae=Rae,FF=x.forwardRef(({className:t,...e},n)=>i.jsx(OF,{ref:n,className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));FF.displayName=OF.displayName;const Mi=x.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(Aae,{children:[i.jsx(FF,{}),i.jsxs(MF,{ref:r,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Iae,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Rne,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mi.displayName=MF.displayName;const ba=({className:t,...e})=>i.jsx("div",{className:it("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ba.displayName="DialogHeader";const iy=({className:t,...e})=>i.jsx("div",{className:it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});iy.displayName="DialogFooter";const Di=x.forwardRef(({className:t,...e},n)=>i.jsx(DF,{ref:n,className:it("text-lg font-semibold leading-none tracking-tight",t),...e}));Di.displayName=DF.displayName;const Lc=x.forwardRef(({className:t,...e},n)=>i.jsx(LF,{ref:n,className:it("text-sm text-muted-foreground",t),...e}));Lc.displayName=LF.displayName;const ui=x.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:it("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ui.displayName="Textarea";var Oae="Label",VF=x.forwardRef((t,e)=>i.jsx(Ge.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));VF.displayName=Oae;var $F=VF;const Mae=B0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Oe=x.forwardRef(({className:t,...e},n)=>i.jsx($F,{ref:n,className:it(Mae(),t),...e}));Oe.displayName=$F.displayName;const Dae=B0("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Wt=x.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:it(Dae({variant:e}),t),...n}));Wt.displayName="Alert";const Lae=x.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:it("mb-1 font-medium leading-none tracking-tight",t),...e}));Lae.displayName="AlertTitle";const Gt=x.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:it("text-sm [&_p]:leading-relaxed",t),...e}));Gt.displayName="AlertDescription";var ht=function(){return ht=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ht.apply(this,arguments)};function Fae(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function zF(t,e,n){for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function og(t){return t.mode==="multiple"}function lg(t){return t.mode==="range"}function o_(t){return t.mode==="single"}var Vae={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function $ae(t,e){return dr(t,"LLLL y",e)}function zae(t,e){return dr(t,"d",e)}function Uae(t,e){return dr(t,"LLLL",e)}function Bae(t){return"".concat(t)}function Hae(t,e){return dr(t,"cccccc",e)}function qae(t,e){return dr(t,"yyyy",e)}var Wae=Object.freeze({__proto__:null,formatCaption:$ae,formatDay:zae,formatMonthCaption:Uae,formatWeekNumber:Bae,formatWeekdayName:Hae,formatYearCaption:qae}),Gae=function(t,e,n){return dr(t,"do MMMM (EEEE)",n)},Kae=function(){return"Month: "},Zae=function(){return"Go to next month"},Qae=function(){return"Go to previous month"},Yae=function(t,e){return dr(t,"cccc",e)},Xae=function(t){return"Week n. ".concat(t)},Jae=function(){return"Year: "},eoe=Object.freeze({__proto__:null,labelDay:Gae,labelMonthDropdown:Kae,labelNext:Zae,labelPrevious:Qae,labelWeekNumber:Xae,labelWeekday:Yae,labelYearDropdown:Jae});function toe(){var t="buttons",e=Vae,n=FE,r={},s={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:Wae,labels:eoe,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function noe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Ns(r):e&&(a=new Date(e,0,1)),s?o=i_(s):n&&(o=new Date(n,11,31)),{fromDate:a?ih(a):void 0,toDate:o?ih(o):void 0}}var UF=x.createContext(void 0);function roe(t){var e,n=t.initialProps,r=toe(),s=noe(n),a=s.fromDate,o=s.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var u;(o_(n)||og(n)||lg(n))&&(u=n.onSelect);var d=ht(ht(ht({},r),n),{captionLayout:l,classNames:ht(ht({},r.classNames),n.classNames),components:ht({},n.components),formatters:ht(ht({},r.formatters),n.formatters),fromDate:a,labels:ht(ht({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:ht(ht({},r.modifiers),n.modifiers),modifiersClassNames:ht(ht({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:ht(ht({},r.styles),n.styles),toDate:o});return i.jsx(UF.Provider,{value:d,children:t.children})}function dn(){var t=x.useContext(UF);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function BF(t){var e=dn(),n=e.locale,r=e.classNames,s=e.styles,a=e.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function soe(t){return i.jsx("svg",ht({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function HF(t){var e,n,r=t.onChange,s=t.value,a=t.children,o=t.caption,l=t.className,u=t.style,d=dn(),f=(n=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:soe;return i.jsxs("div",{className:l,style:u,children:[i.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:r,children:a}),i.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(f,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function ioe(t){var e,n=dn(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,u=n.classNames,d=n.components,f=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var m=[];if(zse(r,s))for(var p=Ns(r),y=r.getMonth();y<=s.getMonth();y++)m.push(Zw(p,y));else for(var p=Ns(new Date),y=0;y<=11;y++)m.push(Zw(p,y));var j=function(N){var _=Number(N.target.value),w=Zw(Ns(t.displayMonth),_);t.onChange(w)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:HF;return i.jsx(b,{name:"months","aria-label":f(),className:u.dropdown_month,style:a.dropdown_month,onChange:j,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:m.map(function(N){return i.jsx("option",{value:N.getMonth(),children:l(N,{locale:o})},N.getMonth())})})}function aoe(t){var e,n=t.displayMonth,r=dn(),s=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,u=r.classNames,d=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var y=s.getFullYear(),j=a.getFullYear(),b=y;b<=j;b++)p.push(qk(aF(new Date),b));var N=function(w){var E=qk(Ns(n),Number(w.target.value));t.onChange(E)},_=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:HF;return i.jsx(_,{name:"years","aria-label":m(),className:u.dropdown_year,style:l.dropdown_year,onChange:N,value:n.getFullYear(),caption:f(n,{locale:o}),children:p.map(function(w){return i.jsx("option",{value:w.getFullYear(),children:f(w,{locale:o})},w.getFullYear())})})}function ooe(t,e){var n=x.useState(t),r=n[0],s=n[1],a=e===void 0?r:e;return[a,s]}function loe(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,u=l===void 0?1:l;if(a&&oh(a,s)<0){var d=-1*(u-1);s=Ui(a,d)}return o&&oh(s,o)<0&&(s=o),Ns(s)}function coe(){var t=dn(),e=loe(t),n=ooe(e,t.month),r=n[0],s=n[1],a=function(o){var l;if(!t.disableNavigation){var u=Ns(o);s(u),(l=t.onMonthChange)===null||l===void 0||l.call(t,u)}};return[r,a]}function uoe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Ns(t),a=Ns(Ui(s,r)),o=oh(a,s),l=[],u=0;u<o;u++){var d=Ui(s,u);l.push(d)}return n&&(l=l.reverse()),l}function doe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ns(t);if(!n)return Ui(l,o);var u=oh(n,t);if(!(u<a))return Ui(l,o)}}function hoe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ns(t);if(!n)return Ui(l,-o);var u=oh(l,n);if(!(u<=0))return Ui(l,-o)}}var qF=x.createContext(void 0);function foe(t){var e=dn(),n=coe(),r=n[0],s=n[1],a=uoe(r,e),o=doe(r,e),l=hoe(r,e),u=function(m){return a.some(function(p){return VE(m,p)})},d=function(m,p){u(m)||(p&&fF(m,p)?s(Ui(m,1+e.numberOfMonths*-1)):s(m))},f={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:u};return i.jsx(qF.Provider,{value:f,children:t.children})}function cg(){var t=x.useContext(qF);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Xk(t){var e,n=dn(),r=n.classNames,s=n.styles,a=n.components,o=cg().goToMonth,l=function(f){o(Ui(f,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:BF,d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:d}),i.jsx(ioe,{onChange:l,displayMonth:t.displayMonth}),i.jsx(aoe,{onChange:l,displayMonth:t.displayMonth})]})}function moe(t){return i.jsx("svg",ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function poe(t){return i.jsx("svg",ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var gx=x.forwardRef(function(t,e){var n=dn(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=ht(ht({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),i.jsx("button",ht({},t,{ref:e,type:"button",className:o,style:l}))});function goe(t){var e,n,r=dn(),s=r.dir,a=r.locale,o=r.classNames,l=r.styles,u=r.labels,d=u.labelPrevious,f=u.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var p=d(t.previousMonth,{locale:a}),y=[o.nav_button,o.nav_button_previous].join(" "),j=f(t.nextMonth,{locale:a}),b=[o.nav_button,o.nav_button_next].join(" "),N=(e=m==null?void 0:m.IconRight)!==null&&e!==void 0?e:poe,_=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:moe;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(gx,{name:"previous-month","aria-label":p,className:y,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?i.jsx(N,{className:o.nav_icon,style:l.nav_icon}):i.jsx(_,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(gx,{name:"next-month","aria-label":j,className:b,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?i.jsx(_,{className:o.nav_icon,style:l.nav_icon}):i.jsx(N,{className:o.nav_icon,style:l.nav_icon})})]})}function Jk(t){var e=dn().numberOfMonths,n=cg(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(j){return VE(t.displayMonth,j)}),u=l===0,d=l===o.length-1,f=e>1&&(u||!d),m=e>1&&(d||!u),p=function(){r&&a(r)},y=function(){s&&a(s)};return i.jsx(goe,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:y})}function voe(t){var e,n=dn(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,u=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:BF,d;return s?d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=i.jsx(Xk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=i.jsxs(i.Fragment,{children:[i.jsx(Xk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(Jk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=i.jsxs(i.Fragment,{children:[i.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(Jk,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:r.caption,style:a.caption,children:d})}function yoe(t){var e=dn(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?i.jsx("tfoot",{className:s,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function xoe(t,e,n){for(var r=n?tu(new Date):Ca(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=Yr(r,a);s.push(o)}return s}function _oe(){var t=dn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,d=xoe(s,a,o);return i.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:e.head_cell}),d.map(function(f,m){return i.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(f,{locale:s}),children:l(f,{locale:s})},m)})]})}function woe(){var t,e=dn(),n=e.classNames,r=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:_oe;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(a,{})})}function boe(t){var e=dn(),n=e.locale,r=e.formatters.formatDay;return i.jsx(i.Fragment,{children:r(t.date,{locale:n})})}var BE=x.createContext(void 0);function joe(t){if(!og(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(BE.Provider,{value:e,children:t.children})}return i.jsx(Noe,{initialProps:t.initialProps,children:t.children})}function Noe(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,a=e.max,o=function(d,f,m){var p,y;(p=e.onDayClick)===null||p===void 0||p.call(e,d,f,m);var j=!!(f.selected&&s&&(r==null?void 0:r.length)===s);if(!j){var b=!!(!f.selected&&a&&(r==null?void 0:r.length)===a);if(!b){var N=r?zF([],r):[];if(f.selected){var _=N.findIndex(function(w){return ys(d,w)});N.splice(_,1)}else N.push(d);(y=e.onSelect)===null||y===void 0||y.call(e,N,d,f,m)}}},l={disabled:[]};r&&l.disabled.push(function(d){var f=a&&r.length>a-1,m=r.some(function(p){return ys(p,d)});return!!(f&&!m)});var u={selected:r,onDayClick:o,modifiers:l};return i.jsx(BE.Provider,{value:u,children:n})}function HE(){var t=x.useContext(BE);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Soe(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?ys(s,t)&&ys(r,t)?void 0:ys(s,t)?{from:s,to:void 0}:ys(r,t)?void 0:aj(r,t)?{from:t,to:s}:{from:r,to:t}:s?aj(t,s)?{from:s,to:t}:{from:t,to:s}:r?fF(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var qE=x.createContext(void 0);function Eoe(t){if(!lg(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(qE.Provider,{value:e,children:t.children})}return i.jsx(Coe,{initialProps:t.initialProps,children:t.children})}function Coe(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},a=s.from,o=s.to,l=e.min,u=e.max,d=function(y,j,b){var N,_;(N=e.onDayClick)===null||N===void 0||N.call(e,y,j,b);var w=Soe(y,r);(_=e.onSelect)===null||_===void 0||_.call(e,w,y,j,b)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(f.range_start=[a],o?(f.range_end=[o],ys(a,o)||(f.range_middle=[{after:a,before:o}])):f.range_end=[a]):o&&(f.range_start=[o],f.range_end=[o]),l&&(a&&!o&&f.disabled.push({after:Kw(a,l-1),before:Yr(a,l-1)}),a&&o&&f.disabled.push({after:a,before:Yr(a,l-1)}),!a&&o&&f.disabled.push({after:Kw(o,l-1),before:Yr(o,l-1)})),u){if(a&&!o&&(f.disabled.push({before:Yr(a,-u+1)}),f.disabled.push({after:Yr(a,u-1)})),a&&o){var m=da(o,a)+1,p=u-m;f.disabled.push({before:Kw(a,p)}),f.disabled.push({after:Yr(o,p)})}!a&&o&&(f.disabled.push({before:Yr(o,-u+1)}),f.disabled.push({after:Yr(o,u-1)}))}return i.jsx(qE.Provider,{value:{selected:r,onDayClick:d,modifiers:f},children:n})}function WE(){var t=x.useContext(qE);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function ay(t){return Array.isArray(t)?zF([],t):t!==void 0?[t]:[]}function Poe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=ay(s)}),e}var Bi;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Bi||(Bi={}));var Toe=Bi.Selected,Ga=Bi.Disabled,koe=Bi.Hidden,Roe=Bi.Today,Xw=Bi.RangeEnd,Jw=Bi.RangeMiddle,eb=Bi.RangeStart,Ioe=Bi.Outside;function Aoe(t,e,n){var r,s=(r={},r[Toe]=ay(t.selected),r[Ga]=ay(t.disabled),r[koe]=ay(t.hidden),r[Roe]=[t.today],r[Xw]=[],r[Jw]=[],r[eb]=[],r[Ioe]=[],r);return t.fromDate&&s[Ga].push({before:t.fromDate}),t.toDate&&s[Ga].push({after:t.toDate}),og(t)?s[Ga]=s[Ga].concat(e.modifiers[Ga]):lg(t)&&(s[Ga]=s[Ga].concat(n.modifiers[Ga]),s[eb]=n.modifiers[eb],s[Jw]=n.modifiers[Jw],s[Xw]=n.modifiers[Xw]),s}var WF=x.createContext(void 0);function Ooe(t){var e=dn(),n=HE(),r=WE(),s=Aoe(e,n,r),a=Poe(e.modifiers),o=ht(ht({},s),a);return i.jsx(WF.Provider,{value:o,children:t.children})}function GF(){var t=x.useContext(WF);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Moe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Doe(t){return!!(t&&typeof t=="object"&&"from"in t)}function Loe(t){return!!(t&&typeof t=="object"&&"after"in t)}function Foe(t){return!!(t&&typeof t=="object"&&"before"in t)}function Voe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function $oe(t,e){var n,r=e.from,s=e.to;if(r&&s){var a=da(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=da(t,r)>=0&&da(s,t)>=0;return o}return s?ys(s,t):r?ys(r,t):!1}function zoe(t){return DE(t)}function Uoe(t){return Array.isArray(t)&&t.every(DE)}function Boe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(zoe(n))return ys(t,n);if(Uoe(n))return n.includes(t);if(Doe(n))return $oe(t,n);if(Voe(n))return n.dayOfWeek.includes(t.getDay());if(Moe(n)){var r=da(n.before,t),s=da(n.after,t),a=r>0,o=s<0,l=aj(n.before,n.after);return l?o&&a:a||o}return Loe(n)?da(t,n.after)>0:Foe(n)?da(n.before,t)>0:typeof n=="function"?n(t):!1})}function GE(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return Boe(t,l)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!VE(t,n)&&(s.outside=!0),s}function Hoe(t,e){for(var n=Ns(t[0]),r=i_(t[t.length-1]),s,a,o=n;o<=r;){var l=GE(o,e),u=!l.disabled&&!l.hidden;if(!u){o=Yr(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=Yr(o,1)}return a||s}var qoe=365;function KF(t,e){var n=e.moveBy,r=e.direction,s=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,u=s.weekStartsOn,d=s.fromDate,f=s.toDate,m=s.locale,p={day:Yr,week:ij,month:Ui,year:kre,startOfWeek:function(N){return s.ISOWeek?tu(N):Ca(N,{locale:m,weekStartsOn:u})},endOfWeek:function(N){return s.ISOWeek?oF(N):LE(N,{locale:m,weekStartsOn:u})}},y=p[n](t,r==="after"?1:-1);r==="before"&&d?y=Rre([d,y]):r==="after"&&f&&(y=Ire([f,y]));var j=!0;if(a){var b=GE(y,a);j=!b.disabled&&!b.hidden}return j?y:l.count>qoe?l.lastFocused:KF(y,{moveBy:n,direction:r,context:s,modifiers:a,retry:ht(ht({},l),{count:l.count+1})})}var ZF=x.createContext(void 0);function Woe(t){var e=cg(),n=GF(),r=x.useState(),s=r[0],a=r[1],o=x.useState(),l=o[0],u=o[1],d=Hoe(e.displayMonths,n),f=s??(l&&e.isDateDisplayed(l))?l:d,m=function(){u(s),a(void 0)},p=function(N){a(N)},y=dn(),j=function(N,_){if(s){var w=KF(s,{moveBy:N,direction:_,context:y,modifiers:n});ys(s,w)||(e.goToDate(w,s),p(w))}},b={focusedDay:s,focusTarget:f,blur:m,focus:p,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return i.jsx(ZF.Provider,{value:b,children:t.children})}function KE(){var t=x.useContext(ZF);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Goe(t,e){var n=GF(),r=GE(t,n,e);return r}var ZE=x.createContext(void 0);function Koe(t){if(!o_(t.initialProps)){var e={selected:void 0};return i.jsx(ZE.Provider,{value:e,children:t.children})}return i.jsx(Zoe,{initialProps:t.initialProps,children:t.children})}function Zoe(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var u,d,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,l);return}(f=e.onSelect)===null||f===void 0||f.call(e,a,a,o,l)},s={selected:e.selected,onDayClick:r};return i.jsx(ZE.Provider,{value:s,children:n})}function QF(){var t=x.useContext(ZE);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Qoe(t,e){var n=dn(),r=QF(),s=HE(),a=WE(),o=KE(),l=o.focusDayAfter,u=o.focusDayBefore,d=o.focusWeekAfter,f=o.focusWeekBefore,m=o.blur,p=o.focus,y=o.focusMonthBefore,j=o.focusMonthAfter,b=o.focusYearBefore,N=o.focusYearAfter,_=o.focusStartOfWeek,w=o.focusEndOfWeek,E=function(K){var z,H,V,q;o_(n)?(z=r.onDayClick)===null||z===void 0||z.call(r,t,e,K):og(n)?(H=s.onDayClick)===null||H===void 0||H.call(s,t,e,K):lg(n)?(V=a.onDayClick)===null||V===void 0||V.call(a,t,e,K):(q=n.onDayClick)===null||q===void 0||q.call(n,t,e,K)},R=function(K){var z;p(t),(z=n.onDayFocus)===null||z===void 0||z.call(n,t,e,K)},A=function(K){var z;m(),(z=n.onDayBlur)===null||z===void 0||z.call(n,t,e,K)},B=function(K){var z;(z=n.onDayMouseEnter)===null||z===void 0||z.call(n,t,e,K)},I=function(K){var z;(z=n.onDayMouseLeave)===null||z===void 0||z.call(n,t,e,K)},F=function(K){var z;(z=n.onDayPointerEnter)===null||z===void 0||z.call(n,t,e,K)},$=function(K){var z;(z=n.onDayPointerLeave)===null||z===void 0||z.call(n,t,e,K)},P=function(K){var z;(z=n.onDayTouchCancel)===null||z===void 0||z.call(n,t,e,K)},M=function(K){var z;(z=n.onDayTouchEnd)===null||z===void 0||z.call(n,t,e,K)},D=function(K){var z;(z=n.onDayTouchMove)===null||z===void 0||z.call(n,t,e,K)},k=function(K){var z;(z=n.onDayTouchStart)===null||z===void 0||z.call(n,t,e,K)},G=function(K){var z;(z=n.onDayKeyUp)===null||z===void 0||z.call(n,t,e,K)},se=function(K){var z;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?l():u();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?u():l();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),d();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),f();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?b():y();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?N():j();break;case"Home":K.preventDefault(),K.stopPropagation(),_();break;case"End":K.preventDefault(),K.stopPropagation(),w();break}(z=n.onDayKeyDown)===null||z===void 0||z.call(n,t,e,K)},ae={onClick:E,onFocus:R,onBlur:A,onKeyDown:se,onKeyUp:G,onMouseEnter:B,onMouseLeave:I,onPointerEnter:F,onPointerLeave:$,onTouchCancel:P,onTouchEnd:M,onTouchMove:D,onTouchStart:k};return ae}function Yoe(){var t=dn(),e=QF(),n=HE(),r=WE(),s=o_(t)?e.selected:og(t)?n.selected:lg(t)?r.selected:void 0;return s}function Xoe(t){return Object.values(Bi).includes(t)}function Joe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(Xoe(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function ele(t,e){var n=ht({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=ht(ht({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function tle(t,e,n){var r,s,a,o=dn(),l=KE(),u=Goe(t,e),d=Qoe(t,u),f=Yoe(),m=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var B;u.outside||l.focusedDay&&m&&ys(l.focusedDay,t)&&((B=n.current)===null||B===void 0||B.focus())},[l.focusedDay,t,n,m,u.outside]);var p=Joe(o,u).join(" "),y=ele(o,u),j=!!(u.outside&&!o.showOutsideDays||u.hidden),b=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:boe,N=i.jsx(b,{date:t,displayMonth:e,activeModifiers:u}),_={style:y,className:p,children:N,role:"gridcell"},w=l.focusTarget&&ys(l.focusTarget,t)&&!u.outside,E=l.focusedDay&&ys(l.focusedDay,t),R=ht(ht(ht({},_),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=E||w?0:-1,r)),d),A={isButton:m,isHidden:j,activeModifiers:u,selectedDays:f,buttonProps:R,divProps:_};return A}function nle(t){var e=x.useRef(null),n=tle(t.date,t.displayMonth,e);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(gx,ht({name:"day",ref:e},n.buttonProps)):i.jsx("div",ht({},n.divProps))}function rle(t){var e=t.number,n=t.dates,r=dn(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,u=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,f=d(Number(e),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:f});var m=u(Number(e),{locale:l}),p=function(y){s(e,n,y)};return i.jsx(gx,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:p,children:f})}function sle(t){var e,n,r=dn(),s=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,u=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:nle,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:rle,f;return o&&(f=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(d,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[f,t.dates.map(function(m){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(u,{displayMonth:t.displayMonth,date:m})},Fse(m))})]})}function eR(t,e,n){for(var r=n!=null&&n.ISOWeek?oF(e):LE(e,n),s=n!=null&&n.ISOWeek?tu(t):Ca(t,n),a=da(r,s),o=[],l=0;l<=a;l++)o.push(Yr(s,l));var u=o.reduce(function(d,f){var m=n!=null&&n.ISOWeek?cF(f):dF(f,n),p=d.find(function(y){return y.weekNumber===m});return p?(p.dates.push(f),d):(d.push({weekNumber:m,dates:[f]}),d)},[]);return u}function ile(t,e){var n=eR(Ns(t),i_(t),e);if(e!=null&&e.useFixedWeeks){var r=$se(t,e);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=ij(a,6-r),l=eR(ij(a,1),o,e);n.push.apply(n,l)}}return n}function ale(t){var e,n,r,s=dn(),a=s.locale,o=s.classNames,l=s.styles,u=s.hideHead,d=s.fixedWeeks,f=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,y=s.ISOWeek,j=ile(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:y,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),b=(e=f==null?void 0:f.Head)!==null&&e!==void 0?e:woe,N=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:sle,_=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:yoe;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&i.jsx(b,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:j.map(function(w){return i.jsx(N,{displayMonth:t.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),i.jsx(_,{displayMonth:t.displayMonth})]})}function ole(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var lle=ole()?x.useLayoutEffect:x.useEffect,tb=!1,cle=0;function tR(){return"react-day-picker-".concat(++cle)}function ule(t){var e,n=t??(tb?tR():null),r=x.useState(n),s=r[0],a=r[1];return lle(function(){s===null&&a(tR())},[]),x.useEffect(function(){tb===!1&&(tb=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function dle(t){var e,n,r=dn(),s=r.dir,a=r.classNames,o=r.styles,l=r.components,u=cg().displayMonths,d=ule(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[a.month],p=o.month,y=t.displayIndex===0,j=t.displayIndex===u.length-1,b=!y&&!j;s==="rtl"&&(e=[y,j],j=e[0],y=e[1]),y&&(m.push(a.caption_start),p=ht(ht({},p),o.caption_start)),j&&(m.push(a.caption_end),p=ht(ht({},p),o.caption_end)),b&&(m.push(a.caption_between),p=ht(ht({},p),o.caption_between));var N=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:voe;return i.jsxs("div",{className:m.join(" "),style:p,children:[i.jsx(N,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(ale,{id:f,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function hle(t){var e=dn(),n=e.classNames,r=e.styles;return i.jsx("div",{className:n.months,style:r.months,children:t.children})}function fle(t){var e,n,r=t.initialProps,s=dn(),a=KE(),o=cg(),l=x.useState(!1),u=l[0],d=l[1];x.useEffect(function(){s.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),d(!0)))},[s.initialFocus,u,a.focus,a.focusTarget,a]);var f=[s.classNames.root,s.className];s.numberOfMonths>1&&f.push(s.classNames.multiple_months),s.showWeekNumber&&f.push(s.classNames.with_weeknumber);var m=ht(ht({},s.styles.root),s.style),p=Object.keys(r).filter(function(j){return j.startsWith("data-")}).reduce(function(j,b){var N;return ht(ht({},j),(N={},N[b]=r[b],N))},{}),y=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:hle;return i.jsx("div",ht({className:f.join(" "),style:m,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:i.jsx(y,{children:o.displayMonths.map(function(j,b){return i.jsx(dle,{displayIndex:b,displayMonth:j},b)})})}))}function mle(t){var e=t.children,n=Fae(t,["children"]);return i.jsx(roe,{initialProps:n,children:i.jsx(foe,{children:i.jsx(Koe,{initialProps:n,children:i.jsx(joe,{initialProps:n,children:i.jsx(Eoe,{initialProps:n,children:i.jsx(Ooe,{children:i.jsx(Woe,{children:e})})})})})})})}function ple(t){return i.jsx(mle,ht({},t,{children:i.jsx(fle,{initialProps:t})}))}function YF({className:t,classNames:e,showOutsideDays:n=!0,...r}){return i.jsx(ple,{showOutsideDays:n,className:it("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:it(Z1({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:it("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:it(Z1({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>i.jsx(Ene,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(V3,{className:"h-4 w-4"})},...r})}YF.displayName="Calendar";var l_="Popover",[XF,rxe]=Pr(l_,[Wh]),ug=Wh(),[gle,Yl]=XF(l_),JF=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=ug(e),u=x.useRef(null),[d,f]=x.useState(!1),[m,p]=Bs({prop:r,defaultProp:s??!1,onChange:a,caller:l_});return i.jsx(jE,{...l,children:i.jsx(gle,{scope:e,contentId:$s(),triggerRef:u,open:m,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(y=>!y),[p]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:o,children:n})})};JF.displayName=l_;var e5="PopoverAnchor",vle=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yl(e5,n),a=ug(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return x.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Z0,{...a,...r,ref:e})});vle.displayName=e5;var t5="PopoverTrigger",n5=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yl(t5,n),a=ug(n),o=ft(e,s.triggerRef),l=i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":o5(s.open),...r,ref:o,onClick:Fe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Z0,{asChild:!0,...a,children:l})});n5.displayName=t5;var QE="PopoverPortal",[yle,xle]=XF(QE,{forceMount:void 0}),r5=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,a=Yl(QE,e);return i.jsx(yle,{scope:e,forceMount:n,children:i.jsx(Tr,{present:n||a.open,children:i.jsx(ng,{asChild:!0,container:s,children:r})})})};r5.displayName=QE;var lh="PopoverContent",s5=x.forwardRef((t,e)=>{const n=xle(lh,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,a=Yl(lh,t.__scopePopover);return i.jsx(Tr,{present:r||a.open,children:a.modal?i.jsx(wle,{...s,ref:e}):i.jsx(ble,{...s,ref:e})})});s5.displayName=lh;var _le=Fl("PopoverContent.RemoveScroll"),wle=x.forwardRef((t,e)=>{const n=Yl(lh,t.__scopePopover),r=x.useRef(null),s=ft(e,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return Y0(o)},[]),i.jsx(sg,{as:_le,allowPinchZoom:!0,children:i.jsx(i5,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Fe(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Fe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ble=x.forwardRef((t,e)=>{const n=Yl(lh,t.__scopePopover),r=x.useRef(!1),s=x.useRef(!1);return i.jsx(i5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),i5=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...m}=t,p=Yl(lh,n),y=ug(n);return H0(),i.jsx(eg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Jp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(NE,{"data-state":o5(p.open),role:"dialog",id:p.contentId,...y,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),a5="PopoverClose",jle=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yl(a5,n);return i.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Fe(t.onClick,()=>s.onOpenChange(!1))})});jle.displayName=a5;var Nle="PopoverArrow",Sle=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ug(n);return i.jsx(SE,{...s,...r,ref:e})});Sle.displayName=Nle;function o5(t){return t?"open":"closed"}var Ele=JF,Cle=n5,Ple=r5,l5=s5;const Tle=Ele,kle=Cle,c5=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>i.jsx(Ple,{children:i.jsx(l5,{ref:s,align:e,sideOffset:n,className:it("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));c5.displayName=l5.displayName;const Xu=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},c_=Gh((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),s={...n,securityCode:r,status:"pending",createdAt:or(),updatedAt:or()},a=await Ml(Bt(Ue,"paymentRequests"),s),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),be.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),be.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:or()};s&&(a.notes=s),await On(jt(Ue,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:s||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};be.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),be.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=bn(Bt(Ue,"paymentRequests"),tr("buyerId","==",n),oi(50)),s=bn(Bt(Ue,"paymentRequests"),tr("sellerId","==",n),oi(50)),[a,o]=await Promise.all([zn(r),zn(s)]),l=[];a.forEach(u=>{const d=u.data();l.push({id:u.id,...d,createdAt:Xu(d.createdAt),updatedAt:Xu(d.updatedAt),meetingDateTime:d.meetingDateTime?Xu(d.meetingDateTime):void 0})}),o.forEach(u=>{const d=u.data();l.find(f=>f.id===u.id)||l.push({id:u.id,...d,createdAt:Xu(d.createdAt),updatedAt:Xu(d.updatedAt),meetingDateTime:d.meetingDateTime?Xu(d.meetingDateTime):void 0})}),l.sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),be.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:s}=e(),a=s.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const s=[];switch(n){case"cash":s.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":s.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&s.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":s.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&s.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":s.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&s.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return s}}));var u5="https://js.stripe.com/v3",Rle=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Ile=function(){for(var e=document.querySelectorAll('script[src^="'.concat(u5,'"]')),n=0;n<e.length;n++){var r=e[n];if(Rle.test(r.src))return r}return null},nR=function(e){var n="",r=document.createElement("script");r.src="".concat(u5).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Ale=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},Uf=null,Sv=null,Ev=null,Ole=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Mle=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Dle=function(e){return Uf!==null?Uf:(Uf=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Ile();if(!(s&&e)){if(!s)s=nR(e);else if(s&&Ev!==null&&Sv!==null){var a;s.removeEventListener("load",Ev),s.removeEventListener("error",Sv),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=nR(e)}}Ev=Mle(n,r),Sv=Ole(r),s.addEventListener("load",Ev),s.addEventListener("error",Sv)}catch(o){r(o);return}}),Uf.catch(function(n){return Uf=null,Promise.reject(n)}))},Lle=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return Ale(s,r),s},Bf,d5=!1,h5=function(){return Bf||(Bf=Dle(null).catch(function(e){return Bf=null,Promise.reject(e)}),Bf)};Promise.resolve().then(function(){return h5()}).catch(function(t){d5||console.warn(t)});var f5=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];d5=!0;var s=Date.now();return h5().then(function(a){return Lle(a,n,s)})},m5={exports:{}},Fle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vle=Fle,$le=Vle;function p5(){}function g5(){}g5.resetWarningCache=p5;var zle=function(){function t(r,s,a,o,l,u){if(u!==$le){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g5,resetWarningCache:p5};return n.PropTypes=n,n};m5.exports=zle();var Ule=m5.exports;const X=Pa(Ule);function rR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(n),!0).forEach(function(r){v5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oy(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oy=function(e){return typeof e}:oy=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(t)}function v5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y5(t,e){return Ble(t)||Hle(t,e)||qle(t,e)||Wle()}function Ble(t){if(Array.isArray(t))return t}function Hle(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(u){a=!0,l=u}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function qle(t,e){if(t){if(typeof t=="string")return iR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(t,e)}}function iR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ts=function(e,n,r){var s=!!r,a=ue.useRef(r);ue.useEffect(function(){a.current=r},[r]),ue.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[s,n,e,a])},lj=function(e){var n=ue.useRef(e);return ue.useEffect(function(){n.current=e},[e]),n.current},ch=function(e){return e!==null&&oy(e)==="object"},Gle=function(e){return ch(e)&&typeof e.then=="function"},Kle=function(e){return ch(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},aR="[object Object]",Zle=function t(e,n){if(!ch(e)||!ch(n))return e===n;var r=Array.isArray(e),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(e)===aR,o=Object.prototype.toString.call(n)===aR;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d={},f=0;f<l.length;f+=1)d[l[f]]=!0;for(var m=0;m<u.length;m+=1)d[u[m]]=!0;var p=Object.keys(d);if(p.length!==l.length)return!1;var y=e,j=n,b=function(_){return t(y[_],j[_])};return p.every(b)},x5=function(e,n,r){return ch(e)?Object.keys(e).reduce(function(s,a){var o=!ch(n)||!Zle(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?sR(sR({},s||{}),{},v5({},a,e[a])):s},null):null},_5="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",oR=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_5;if(e===null||Kle(e))return e;throw new Error(n)},Qle=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_5;if(Gle(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return oR(s,n)})};var r=oR(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Yle=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},u_=ue.createContext(null);u_.displayName="ElementsContext";var w5=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},b5=function(e){var n=e.stripe,r=e.options,s=e.children,a=ue.useMemo(function(){return Qle(n)},[n]),o=ue.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=y5(o,2),u=l[0],d=l[1];ue.useEffect(function(){var p=!0,y=function(b){d(function(N){return N.stripe?N:{stripe:b,elements:b.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(j){j&&p&&y(j)}):a.tag==="sync"&&!u.stripe&&y(a.stripe),function(){p=!1}},[a,u,r]);var f=lj(n);ue.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var m=lj(r);return ue.useEffect(function(){if(u.elements){var p=x5(r,m,["clientSecret","fonts"]);p&&u.elements.update(p)}},[r,m,u.elements]),ue.useEffect(function(){Yle(u.stripe)},[u.stripe]),ue.createElement(u_.Provider,{value:u},s)};b5.propTypes={stripe:X.any,options:X.object};var Xle=function(e){var n=ue.useContext(u_);return w5(n,e)},Jle=function(){var e=Xle("calls useElements()"),n=e.elements;return n};X.func.isRequired;var j5=ue.createContext(null);j5.displayName="CustomCheckoutSdkContext";var ece=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},tce=ue.createContext(null);tce.displayName="CustomCheckoutContext";X.any,X.shape({clientSecret:X.string.isRequired,elementsOptions:X.object}).isRequired;var cj=function(e){var n=ue.useContext(j5),r=ue.useContext(u_);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?ece(n,e):w5(r,e)},nce=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},nr=function(e,n){var r="".concat(nce(e),"Element"),s=function(u){var d=u.id,f=u.className,m=u.options,p=m===void 0?{}:m,y=u.onBlur,j=u.onFocus,b=u.onReady,N=u.onChange,_=u.onEscape,w=u.onClick,E=u.onLoadError,R=u.onLoaderStart,A=u.onNetworksChange,B=u.onConfirm,I=u.onCancel,F=u.onShippingAddressChange,$=u.onShippingRateChange,P=cj("mounts <".concat(r,">")),M="elements"in P?P.elements:null,D="customCheckoutSdk"in P?P.customCheckoutSdk:null,k=ue.useState(null),G=y5(k,2),se=G[0],ae=G[1],K=ue.useRef(null),z=ue.useRef(null);Ts(se,"blur",y),Ts(se,"focus",j),Ts(se,"escape",_),Ts(se,"click",w),Ts(se,"loaderror",E),Ts(se,"loaderstart",R),Ts(se,"networkschange",A),Ts(se,"confirm",B),Ts(se,"cancel",I),Ts(se,"shippingaddresschange",F),Ts(se,"shippingratechange",$),Ts(se,"change",N);var H;b&&(e==="expressCheckout"?H=b:H=function(){b(se)}),Ts(se,"ready",H),ue.useLayoutEffect(function(){if(K.current===null&&z.current!==null&&(M||D)){var q=null;D?q=D.createElement(e,p):M&&(q=M.create(e,p)),K.current=q,ae(q),q&&q.mount(z.current)}},[M,D,p]);var V=lj(p);return ue.useEffect(function(){if(K.current){var q=x5(p,V,["paymentRequest"]);q&&"update"in K.current&&K.current.update(q)}},[p,V]),ue.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),ue.createElement("div",{id:d,className:f,ref:z})},a=function(u){cj("mounts <".concat(r,">"));var d=u.id,f=u.className;return ue.createElement("div",{id:d,className:f})},o=n?a:s;return o.propTypes={id:X.string,className:X.string,onChange:X.func,onBlur:X.func,onFocus:X.func,onReady:X.func,onEscape:X.func,onClick:X.func,onLoadError:X.func,onLoaderStart:X.func,onNetworksChange:X.func,onConfirm:X.func,onCancel:X.func,onShippingAddressChange:X.func,onShippingRateChange:X.func,options:X.object},o.displayName=r,o.__elementType=e,o},rr=typeof window>"u",rce=ue.createContext(null);rce.displayName="EmbeddedCheckoutProviderContext";var sce=function(){var e=cj("calls useStripe()"),n=e.stripe;return n};nr("auBankAccount",rr);nr("card",rr);nr("cardNumber",rr);nr("cardExpiry",rr);nr("cardCvc",rr);nr("fpxBank",rr);nr("iban",rr);nr("idealBank",rr);nr("p24Bank",rr);nr("epsBank",rr);nr("payment",rr);nr("expressCheckout",rr);nr("currencySelector",rr);nr("paymentRequestButton",rr);nr("linkAuthentication",rr);nr("address",rr);nr("shippingAddress",rr);nr("paymentMethodMessaging",rr);nr("affirmMessage",rr);nr("afterpayClearpayMessage",rr);const ice=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{sce(),Jle();const[s,a]=x.useState(!1),[o,l]=x.useState(null),u=async d=>{d.preventDefault(),a(!0),l(null);try{await new Promise(m=>setTimeout(m,2e3));const f="pi_"+Math.random().toString(36).substring(2,15);be.success("Paiement réussi !"),n(f)}catch(f){console.error("Payment error:",f),l(f.message||"Une erreur est survenue lors du paiement"),r(f.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),i.jsx(Mt,{children:"Paiement sécurisé via Stripe"})]}),i.jsx(ye,{children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("div",{className:"p-4 border rounded-md",children:i.jsx("div",{className:"h-10 flex items-center",children:i.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&i.jsxs(Wt,{className:"border-red-200 bg-red-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-red-600"}),i.jsx(Gt,{className:"text-red-800",children:o})]}),i.jsxs(Wt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Jc,{className:"h-4 w-4 text-blue-600"}),i.jsx(Gt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),i.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),i.jsx("li",{children:"Date : n'importe quelle date future"}),i.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),i.jsx(te,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-secondary",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},lR=f5("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),ace=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const s={appearance:{theme:"stripe"},locale:"fr"};return lR?i.jsx(b5,{stripe:lR,options:s,children:i.jsx(ice,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):i.jsxs(Wt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Gt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},N5=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:s,calculateFees:a}=c_(),[o,l]=x.useState({}),[u,d]=x.useState({}),[f,m]=x.useState(null),p=[{id:"card",type:"card",name:"Carte bancaire",icon:Un,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...s],y=A=>{switch(A){case"card":return Un;case"cash":return zD;case"transfer":return HD;case"paypal":return Un;case"lydia":return zh;default:return Un}},j=A=>{switch(A){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=(A,B)=>{var F,$;const I={};switch(A){case"card":return!0;case"transfer":(F=B.bankDetails)!=null&&F.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(B.bankDetails.iban.replace(/\s/g,""))||(I.iban="Format IBAN invalide"):I.iban="IBAN requis",($=B.bankDetails)!=null&&$.accountName||(I.accountName="Nom du titulaire requis");break;case"paypal":B.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.paypalEmail)||(I.paypalEmail="Format email invalide"):I.paypalEmail="Email PayPal requis";break;case"lydia":B.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(B.lydiaPhone.replace(/\s/g,""))||(I.lydiaPhone="Format de téléphone invalide"):I.lydiaPhone="Numéro de téléphone requis";break}return d(I),Object.keys(I).length===0},N=A=>{if(A==="card"){n(A,{});return}const B=o[A]||{};(A==="cash"||b(A,B))&&n(A,B)},_=(A,B,I)=>{l(F=>({...F,[A]:{...F[A],[B]:I}}))},w=(A,B)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:B||"EUR"}).format(A),E=A=>{m(A),n("card",{stripePaymentId:A})},R=A=>{console.error("Stripe payment error:",A)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),i.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",i.jsx("span",{className:"font-semibold text-primary",children:w(t,e)})]})]}),r==="card"?i.jsx(ace,{amount:t,currency:e,onPaymentSuccess:E,onPaymentError:R}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(A=>{var P,M,D,k,G,se,ae,K;const B=y(A.type),I=A.type==="card"?t*A.fees/100:a(t,A.type),F=t+I,$=r===A.type;return i.jsxs(ve,{className:`cursor-pointer transition-all hover:shadow-md ${$?"ring-2 ring-primary bg-primary/5":""} ${A.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>A.available&&N(A.type),children:[i.jsx(Xe,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(B,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx(Je,{className:"text-lg",children:A.name}),i.jsx(Mt,{className:"text-sm",children:A.description})]})]}),$&&i.jsx(At,{className:"w-6 h-6 text-green-600"})]})}),i.jsxs(ye,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:A.processingTime})]}),i.jsxs(ot,{className:j(A.securityLevel),children:[i.jsx(Ht,{className:"w-3 h-3 mr-1"}),A.securityLevel==="high"?"Très sécurisé":A.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),I>0&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Montant :"}),i.jsx("span",{children:w(t,e)})]}),i.jsxs("div",{className:"flex justify-between text-orange-600",children:[i.jsxs("span",{children:["Frais (",A.fees,"%) :"]}),i.jsx("span",{children:w(I,e)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total :"}),i.jsx("span",{children:w(F,e)})]})]}),$&&A.type!=="cash"&&A.type!=="card"&&i.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[A.type==="transfer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`iban-${A.id}`,children:"IBAN *"}),i.jsx(rt,{id:`iban-${A.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((M=(P=o[A.type])==null?void 0:P.bankDetails)==null?void 0:M.iban)||"",onChange:z=>{var H;return _(A.type,"bankDetails",{...(H=o[A.type])==null?void 0:H.bankDetails,iban:z.target.value})},className:u.iban?"border-red-500":""}),u.iban&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`account-name-${A.id}`,children:"Nom du titulaire *"}),i.jsx(rt,{id:`account-name-${A.id}`,placeholder:"Jean Dupont",value:((k=(D=o[A.type])==null?void 0:D.bankDetails)==null?void 0:k.accountName)||"",onChange:z=>{var H;return _(A.type,"bankDetails",{...(H=o[A.type])==null?void 0:H.bankDetails,accountName:z.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`bic-${A.id}`,children:"BIC (optionnel)"}),i.jsx(rt,{id:`bic-${A.id}`,placeholder:"BNPAFRPP",value:((se=(G=o[A.type])==null?void 0:G.bankDetails)==null?void 0:se.bic)||"",onChange:z=>{var H;return _(A.type,"bankDetails",{...(H=o[A.type])==null?void 0:H.bankDetails,bic:z.target.value})}})]})]}),A.type==="paypal"&&i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`paypal-email-${A.id}`,children:"Email PayPal *"}),i.jsx(rt,{id:`paypal-email-${A.id}`,type:"email",placeholder:"votre.email@example.com",value:((ae=o[A.type])==null?void 0:ae.paypalEmail)||"",onChange:z=>_(A.type,"paypalEmail",z.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),A.type==="lydia"&&i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`lydia-phone-${A.id}`,children:"Numéro de téléphone *"}),i.jsx(rt,{id:`lydia-phone-${A.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((K=o[A.type])==null?void 0:K.lydiaPhone)||"",onChange:z=>_(A.type,"lydiaPhone",z.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),$&&A.type!=="card"&&i.jsxs(Wt,{className:"mt-3",children:[i.jsx(Dl,{className:"h-4 w-4"}),i.jsxs(Gt,{children:[A.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",A.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",A.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",A.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},A.id)})}),i.jsxs(Wt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Gt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function oce(t,e){const n=x.useRef(e);x.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const lce=1;function cce(t){return Object.freeze({__version:lce,map:t})}function uce(t,e){return Object.freeze({...t,...e})}const S5=x.createContext(null),E5=S5.Provider;function C5(){const t=x.useContext(S5);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function dce(t){function e(n,r){const{instance:s,context:a}=t(n).current;return x.useImperativeHandle(r,()=>s),n.children==null?null:ue.createElement(E5,{value:a},n.children)}return x.forwardRef(e)}function hce(t){function e(n,r){const{instance:s}=t(n).current;return x.useImperativeHandle(r,()=>s),null}return x.forwardRef(e)}function fce(t,e){const n=x.useRef();x.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function P5(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var uj={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(ad,function(n){var r="1.9.4";function s(c){var h,v,S,T;for(v=1,S=arguments.length;v<S;v++){T=arguments[v];for(h in T)c[h]=T[h]}return c}var a=Object.create||function(){function c(){}return function(h){return c.prototype=h,new c}}();function o(c,h){var v=Array.prototype.slice;if(c.bind)return c.bind.apply(c,v.call(arguments,1));var S=v.call(arguments,2);return function(){return c.apply(h,S.length?S.concat(v.call(arguments)):arguments)}}var l=0;function u(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function d(c,h,v){var S,T,U,Q;return Q=function(){S=!1,T&&(U.apply(v,T),T=!1)},U=function(){S?T=arguments:(c.apply(v,arguments),setTimeout(Q,h),S=!0)},U}function f(c,h,v){var S=h[1],T=h[0],U=S-T;return c===S&&v?c:((c-T)%U+U)%U+T}function m(){return!1}function p(c,h){if(h===!1)return c;var v=Math.pow(10,h===void 0?6:h);return Math.round(c*v)/v}function y(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function j(c){return y(c).split(/\s+/)}function b(c,h){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var v in h)c.options[v]=h[v];return c.options}function N(c,h,v){var S=[];for(var T in c)S.push(encodeURIComponent(v?T.toUpperCase():T)+"="+encodeURIComponent(c[T]));return(!h||h.indexOf("?")===-1?"?":"&")+S.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function w(c,h){return c.replace(_,function(v,S){var T=h[S];if(T===void 0)throw new Error("No value provided for variable "+v);return typeof T=="function"&&(T=T(h)),T})}var E=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function R(c,h){for(var v=0;v<c.length;v++)if(c[v]===h)return v;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var I=0;function F(c){var h=+new Date,v=Math.max(0,16-(h-I));return I=h+v,window.setTimeout(c,v)}var $=window.requestAnimationFrame||B("RequestAnimationFrame")||F,P=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function M(c,h,v){if(v&&$===F)c.call(h);else return $.call(window,o(c,h))}function D(c){c&&P.call(window,c)}var k={__proto__:null,extend:s,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:f,falseFn:m,formatNum:p,trim:y,splitWords:j,setOptions:b,getParamString:N,template:w,isArray:E,indexOf:R,emptyImageUrl:A,requestFn:$,cancelFn:P,requestAnimFrame:M,cancelAnimFrame:D};function G(){}G.extend=function(c){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,S=a(v);S.constructor=h,h.prototype=S;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(h[T]=this[T]);return c.statics&&s(h,c.statics),c.includes&&(se(c.includes),s.apply(null,[S].concat(c.includes))),s(S,c),delete S.statics,delete S.includes,S.options&&(S.options=v.options?a(v.options):{},s(S.options,c.options)),S._initHooks=[],S.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,Q=S._initHooks.length;U<Q;U++)S._initHooks[U].call(this)}},h},G.include=function(c){var h=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=h,this.mergeOptions(c.options)),this},G.mergeOptions=function(c){return s(this.prototype.options,c),this},G.addInitHook=function(c){var h=Array.prototype.slice.call(arguments,1),v=typeof c=="function"?c:function(){this[c].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function se(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=E(c)?c:[c];for(var h=0;h<c.length;h++)c[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(c,h,v){if(typeof c=="object")for(var S in c)this._on(S,c[S],h);else{c=j(c);for(var T=0,U=c.length;T<U;T++)this._on(c[T],h,v)}return this},off:function(c,h,v){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var S in c)this._off(S,c[S],h);else{c=j(c);for(var T=arguments.length===1,U=0,Q=c.length;U<Q;U++)T?this._off(c[U]):this._off(c[U],h,v)}return this},_on:function(c,h,v,S){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(c,h,v)===!1){v===this&&(v=void 0);var T={fn:h,ctx:v};S&&(T.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(T)}},_off:function(c,h,v){var S,T,U;if(this._events&&(S=this._events[c],!!S)){if(arguments.length===1){if(this._firingCount)for(T=0,U=S.length;T<U;T++)S[T].fn=m;delete this._events[c];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(c,h,v);if(Q!==!1){var ce=S[Q];this._firingCount&&(ce.fn=m,this._events[c]=S=S.slice()),S.splice(Q,1)}}},fire:function(c,h,v){if(!this.listens(c,v))return this;var S=s({},h,{type:c,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var T=this._events[c];if(T){this._firingCount=this._firingCount+1||1;for(var U=0,Q=T.length;U<Q;U++){var ce=T[U],pe=ce.fn;ce.once&&this.off(c,pe,ce.ctx),pe.call(ce.ctx||this,S)}this._firingCount--}}return v&&this._propagateEvent(S),this},listens:function(c,h,v,S){typeof c!="string"&&console.warn('"string" type argument expected');var T=h;typeof h!="function"&&(S=!!h,T=void 0,v=void 0);var U=this._events&&this._events[c];if(U&&U.length&&this._listens(c,T,v)!==!1)return!0;if(S){for(var Q in this._eventParents)if(this._eventParents[Q].listens(c,h,v,S))return!0}return!1},_listens:function(c,h,v){if(!this._events)return!1;var S=this._events[c]||[];if(!h)return!!S.length;v===this&&(v=void 0);for(var T=0,U=S.length;T<U;T++)if(S[T].fn===h&&S[T].ctx===v)return T;return!1},once:function(c,h,v){if(typeof c=="object")for(var S in c)this._on(S,c[S],h,!0);else{c=j(c);for(var T=0,U=c.length;T<U;T++)this._on(c[T],h,v,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[u(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[u(c)],this},_propagateEvent:function(c){for(var h in this._eventParents)this._eventParents[h].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var K=G.extend(ae);function z(c,h,v){this.x=v?Math.round(c):c,this.y=v?Math.round(h):h}var H=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(c){return this.clone()._add(V(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(V(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new z(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new z(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=H(this.x),this.y=H(this.y),this},distanceTo:function(c){c=V(c);var h=c.x-this.x,v=c.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(c){return c=V(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=V(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function V(c,h,v){return c instanceof z?c:E(c)?new z(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new z(c.x,c.y):new z(c,h,v)}function q(c,h){if(c)for(var v=h?[c,h]:c,S=0,T=v.length;S<T;S++)this.extend(v[S])}q.prototype={extend:function(c){var h,v;if(!c)return this;if(c instanceof z||typeof c[0]=="number"||"x"in c)h=v=V(c);else if(c=J(c),h=c.min,v=c.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(c){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var h,v;return typeof c[0]=="number"||c instanceof z?c=V(c):c=J(c),c instanceof q?(h=c.min,v=c.max):h=v=c,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(c){c=J(c);var h=this.min,v=this.max,S=c.min,T=c.max,U=T.x>=h.x&&S.x<=v.x,Q=T.y>=h.y&&S.y<=v.y;return U&&Q},overlaps:function(c){c=J(c);var h=this.min,v=this.max,S=c.min,T=c.max,U=T.x>h.x&&S.x<v.x,Q=T.y>h.y&&S.y<v.y;return U&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var h=this.min,v=this.max,S=Math.abs(h.x-v.x)*c,T=Math.abs(h.y-v.y)*c;return J(V(h.x-S,h.y-T),V(v.x+S,v.y+T))},equals:function(c){return c?(c=J(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function J(c,h){return!c||c instanceof q?c:new q(c,h)}function me(c,h){if(c)for(var v=h?[c,h]:c,S=0,T=v.length;S<T;S++)this.extend(v[S])}me.prototype={extend:function(c){var h=this._southWest,v=this._northEast,S,T;if(c instanceof Me)S=c,T=c;else if(c instanceof me){if(S=c._southWest,T=c._northEast,!S||!T)return this}else return c?this.extend(oe(c)||Pe(c)):this;return!h&&!v?(this._southWest=new Me(S.lat,S.lng),this._northEast=new Me(T.lat,T.lng)):(h.lat=Math.min(S.lat,h.lat),h.lng=Math.min(S.lng,h.lng),v.lat=Math.max(T.lat,v.lat),v.lng=Math.max(T.lng,v.lng)),this},pad:function(c){var h=this._southWest,v=this._northEast,S=Math.abs(h.lat-v.lat)*c,T=Math.abs(h.lng-v.lng)*c;return new me(new Me(h.lat-S,h.lng-T),new Me(v.lat+S,v.lng+T))},getCenter:function(){return new Me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Me(this.getNorth(),this.getWest())},getSouthEast:function(){return new Me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Me||"lat"in c?c=oe(c):c=Pe(c);var h=this._southWest,v=this._northEast,S,T;return c instanceof me?(S=c.getSouthWest(),T=c.getNorthEast()):S=T=c,S.lat>=h.lat&&T.lat<=v.lat&&S.lng>=h.lng&&T.lng<=v.lng},intersects:function(c){c=Pe(c);var h=this._southWest,v=this._northEast,S=c.getSouthWest(),T=c.getNorthEast(),U=T.lat>=h.lat&&S.lat<=v.lat,Q=T.lng>=h.lng&&S.lng<=v.lng;return U&&Q},overlaps:function(c){c=Pe(c);var h=this._southWest,v=this._northEast,S=c.getSouthWest(),T=c.getNorthEast(),U=T.lat>h.lat&&S.lat<v.lat,Q=T.lng>h.lng&&S.lng<v.lng;return U&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,h){return c?(c=Pe(c),this._southWest.equals(c.getSouthWest(),h)&&this._northEast.equals(c.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Pe(c,h){return c instanceof me?c:new me(c,h)}function Me(c,h,v){if(isNaN(c)||isNaN(h))throw new Error("Invalid LatLng object: ("+c+", "+h+")");this.lat=+c,this.lng=+h,v!==void 0&&(this.alt=+v)}Me.prototype={equals:function(c,h){if(!c)return!1;c=oe(c);var v=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return v<=(h===void 0?1e-9:h)},toString:function(c){return"LatLng("+p(this.lat,c)+", "+p(this.lng,c)+")"},distanceTo:function(c){return Y.distance(this,oe(c))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(c){var h=180*c/40075017,v=h/Math.cos(Math.PI/180*this.lat);return Pe([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new Me(this.lat,this.lng,this.alt)}};function oe(c,h,v){return c instanceof Me?c:E(c)&&typeof c[0]!="object"?c.length===3?new Me(c[0],c[1],c[2]):c.length===2?new Me(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Me(c.lat,"lng"in c?c.lng:c.lon,c.alt):h===void 0?null:new Me(c,h,v)}var xe={latLngToPoint:function(c,h){var v=this.projection.project(c),S=this.scale(h);return this.transformation._transform(v,S)},pointToLatLng:function(c,h){var v=this.scale(h),S=this.transformation.untransform(c,v);return this.projection.unproject(S)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(c),S=this.transformation.transform(h.min,v),T=this.transformation.transform(h.max,v);return new q(S,T)},infinite:!1,wrapLatLng:function(c){var h=this.wrapLng?f(c.lng,this.wrapLng,!0):c.lng,v=this.wrapLat?f(c.lat,this.wrapLat,!0):c.lat,S=c.alt;return new Me(v,h,S)},wrapLatLngBounds:function(c){var h=c.getCenter(),v=this.wrapLatLng(h),S=h.lat-v.lat,T=h.lng-v.lng;if(S===0&&T===0)return c;var U=c.getSouthWest(),Q=c.getNorthEast(),ce=new Me(U.lat-S,U.lng-T),pe=new Me(Q.lat-S,Q.lng-T);return new me(ce,pe)}},Y=s({},xe,{wrapLng:[-180,180],R:6371e3,distance:function(c,h){var v=Math.PI/180,S=c.lat*v,T=h.lat*v,U=Math.sin((h.lat-c.lat)*v/2),Q=Math.sin((h.lng-c.lng)*v/2),ce=U*U+Math.cos(S)*Math.cos(T)*Q*Q,pe=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*pe}}),ne=6378137,ee={R:ne,MAX_LATITUDE:85.0511287798,project:function(c){var h=Math.PI/180,v=this.MAX_LATITUDE,S=Math.max(Math.min(v,c.lat),-v),T=Math.sin(S*h);return new z(this.R*c.lng*h,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(c){var h=180/Math.PI;return new Me((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*h,c.x*h/this.R)},bounds:function(){var c=ne*Math.PI;return new q([-c,-c],[c,c])}()};function ie(c,h,v,S){if(E(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=h,this._c=v,this._d=S}ie.prototype={transform:function(c,h){return this._transform(c.clone(),h)},_transform:function(c,h){return h=h||1,c.x=h*(this._a*c.x+this._b),c.y=h*(this._c*c.y+this._d),c},untransform:function(c,h){return h=h||1,new z((c.x/h-this._b)/this._a,(c.y/h-this._d)/this._c)}};function fe(c,h,v,S){return new ie(c,h,v,S)}var _e=s({},Y,{code:"EPSG:3857",projection:ee,transformation:function(){var c=.5/(Math.PI*ee.R);return fe(c,.5,-c,.5)}()}),Ie=s({},_e,{code:"EPSG:900913"});function Ce(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function he(c,h){var v="",S,T,U,Q,ce,pe;for(S=0,U=c.length;S<U;S++){for(ce=c[S],T=0,Q=ce.length;T<Q;T++)pe=ce[T],v+=(T?"L":"M")+pe.x+" "+pe.y;v+=h?at.svg?"z":"x":""}return v||"M0 0"}var De=document.documentElement.style,qe="ActiveXObject"in window,vt=qe&&!document.addEventListener,Z="msLaunchUri"in navigator&&!("documentMode"in document),re=Gs("webkit"),de=Gs("android"),Te=Gs("android 2")||Gs("android 3"),Re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Se=de&&Gs("Google")&&Re<537&&!("AudioNode"in window),Ve=!!window.opera,We=!Z&&Gs("chrome"),nt=Gs("gecko")&&!re&&!Ve&&!qe,Xt=!We&&Gs("safari"),sr=Gs("phantom"),Gn="OTransition"in De,Hr=navigator.platform.indexOf("Win")===0,ls=qe&&"transition"in De,cs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Te,Gi="MozPerspective"in De,bu=!window.L_DISABLE_3D&&(ls||cs||Gi)&&!Gn&&!sr,Aa=typeof orientation<"u"||Gs("mobile"),ko=Aa&&re,vg=Aa&&cs,ef=!window.PointerEvent&&window.MSPointerEvent,Ro=!!(window.PointerEvent||ef),ju="ontouchstart"in window||!!window.TouchEvent,tf=!window.L_NO_TOUCH&&(ju||Ro),Oa=Aa&&Ve,yg=Aa&&nt,Nu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xg=function(){var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",m,h),window.removeEventListener("testPassiveEventSupport",m,h)}catch{}return c}(),nc=function(){return!!document.createElement("canvas").getContext}(),Su=!!(document.createElementNS&&Ce("svg").createSVGRect),_r=!!Su&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_g=!Su&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var h=c.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),rc=navigator.platform.indexOf("Mac")===0,sc=navigator.platform.indexOf("Linux")===0;function Gs(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var at={ie:qe,ielt9:vt,edge:Z,webkit:re,android:de,android23:Te,androidStock:Se,opera:Ve,chrome:We,gecko:nt,safari:Xt,phantom:sr,opera12:Gn,win:Hr,ie3d:ls,webkit3d:cs,gecko3d:Gi,any3d:bu,mobile:Aa,mobileWebkit:ko,mobileWebkit3d:vg,msPointer:ef,pointer:Ro,touch:tf,touchNative:ju,mobileOpera:Oa,mobileGecko:yg,retina:Nu,passiveEvents:xg,canvas:nc,svg:Su,vml:_g,inlineSvg:_r,mac:rc,linux:sc},Ma=at.msPointer?"MSPointerDown":"pointerdown",wg=at.msPointer?"MSPointerMove":"pointermove",bg=at.msPointer?"MSPointerUp":"pointerup",ic=at.msPointer?"MSPointerCancel":"pointercancel",Eu={touchstart:Ma,touchmove:wg,touchend:bg,touchcancel:ic},Cu={touchstart:Tu,touchmove:Pu,touchend:Pu,touchcancel:Pu},gi={},vi=!1;function jg(c,h,v){return h==="touchstart"&&Sg(),Cu[h]?(v=Cu[h].bind(this,v),c.addEventListener(Eu[h],v,!1),v):(console.warn("wrong event specified:",h),m)}function Ng(c,h,v){if(!Eu[h]){console.warn("wrong event specified:",h);return}c.removeEventListener(Eu[h],v,!1)}function nf(c){gi[c.pointerId]=c}function rf(c){gi[c.pointerId]&&(gi[c.pointerId]=c)}function sf(c){delete gi[c.pointerId]}function Sg(){vi||(document.addEventListener(Ma,nf,!0),document.addEventListener(wg,rf,!0),document.addEventListener(bg,sf,!0),document.addEventListener(ic,sf,!0),vi=!0)}function Pu(c,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in gi)h.touches.push(gi[v]);h.changedTouches=[h],c(h)}}function Tu(c,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Sn(h),Pu(c,h)}function Eg(c){var h={},v,S;for(S in c)v=c[S],h[S]=v&&v.bind?v.bind(c):v;return c=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var af=200;function ac(c,h){c.addEventListener("dblclick",h);var v=0,S;function T(U){if(U.detail!==1){S=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var Q=yf(U);if(!(Q.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!Q.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var ce=Date.now();ce-v<=af?(S++,S===2&&h(Eg(U))):S=1,v=ce}}}return c.addEventListener("click",T),{dblclick:h,simDblclick:T}}function Da(c,h){c.removeEventListener("dblclick",h.dblclick),c.removeEventListener("click",h.simDblclick)}var oc=Fa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),lc=Fa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),of=lc==="webkitTransition"||lc==="OTransition"?lc+"End":"transitionend";function lf(c){return typeof c=="string"?document.getElementById(c):c}function Io(c,h){var v=c.style[h]||c.currentStyle&&c.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var S=document.defaultView.getComputedStyle(c,null);v=S?S[h]:null}return v==="auto"?null:v}function Rt(c,h,v){var S=document.createElement(c);return S.className=h||"",v&&v.appendChild(S),S}function rn(c){var h=c.parentNode;h&&h.removeChild(c)}function cc(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function La(c){var h=c.parentNode;h&&h.lastChild!==c&&h.appendChild(c)}function Ao(c){var h=c.parentNode;h&&h.firstChild!==c&&h.insertBefore(c,h.firstChild)}function cf(c,h){if(c.classList!==void 0)return c.classList.contains(h);var v=Ks(c);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function bt(c,h){if(c.classList!==void 0)for(var v=j(h),S=0,T=v.length;S<T;S++)c.classList.add(v[S]);else if(!cf(c,h)){var U=Ks(c);uf(c,(U?U+" ":"")+h)}}function yn(c,h){c.classList!==void 0?c.classList.remove(h):uf(c,y((" "+Ks(c)+" ").replace(" "+h+" "," ")))}function uf(c,h){c.className.baseVal===void 0?c.className=h:c.className.baseVal=h}function Ks(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Rn(c,h){"opacity"in c.style?c.style.opacity=h:"filter"in c.style&&ku(c,h)}function ku(c,h){var v=!1,S="DXImageTransform.Microsoft.Alpha";try{v=c.filters.item(S)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):c.style.filter+=" progid:"+S+"(opacity="+h+")"}function Fa(c){for(var h=document.documentElement.style,v=0;v<c.length;v++)if(c[v]in h)return c[v];return!1}function Ki(c,h,v){var S=h||new z(0,0);c.style[oc]=(at.ie3d?"translate("+S.x+"px,"+S.y+"px)":"translate3d("+S.x+"px,"+S.y+"px,0)")+(v?" scale("+v+")":"")}function mt(c,h){c._leaflet_pos=h,at.any3d?Ki(c,h):(c.style.left=h.x+"px",c.style.top=h.y+"px")}function Zs(c){return c._leaflet_pos||new z(0,0)}var yi,xi,df;if("onselectstart"in document)yi=function(){ut(window,"selectstart",Sn)},xi=function(){Jt(window,"selectstart",Sn)};else{var Oo=Fa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);yi=function(){if(Oo){var c=document.documentElement.style;df=c[Oo],c[Oo]="none"}},xi=function(){Oo&&(document.documentElement.style[Oo]=df,df=void 0)}}function hf(){ut(window,"dragstart",Sn)}function ff(){Jt(window,"dragstart",Sn)}var Ru,mf;function Va(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Es(),Ru=c,mf=c.style.outlineStyle,c.style.outlineStyle="none",ut(window,"keydown",Es))}function Es(){Ru&&(Ru.style.outlineStyle=mf,Ru=void 0,mf=void 0,Jt(window,"keydown",Es))}function pf(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Iu(c){var h=c.getBoundingClientRect();return{x:h.width/c.offsetWidth||1,y:h.height/c.offsetHeight||1,boundingClientRect:h}}var Cg={__proto__:null,TRANSFORM:oc,TRANSITION:lc,TRANSITION_END:of,get:lf,getStyle:Io,create:Rt,remove:rn,empty:cc,toFront:La,toBack:Ao,hasClass:cf,addClass:bt,removeClass:yn,setClass:uf,getClass:Ks,setOpacity:Rn,testProp:Fa,setTransform:Ki,setPosition:mt,getPosition:Zs,get disableTextSelection(){return yi},get enableTextSelection(){return xi},disableImageDrag:hf,enableImageDrag:ff,preventOutline:Va,restoreOutline:Es,getSizedParentNode:pf,getScale:Iu};function ut(c,h,v,S){if(h&&typeof h=="object")for(var T in h)gf(c,T,h[T],v);else{h=j(h);for(var U=0,Q=h.length;U<Q;U++)gf(c,h[U],v,S)}return this}var Qs="_leaflet_events";function Jt(c,h,v,S){if(arguments.length===1)Pg(c),delete c[Qs];else if(h&&typeof h=="object")for(var T in h)vf(c,T,h[T],v);else if(h=j(h),arguments.length===2)Pg(c,function(ce){return R(h,ce)!==-1});else for(var U=0,Q=h.length;U<Q;U++)vf(c,h[U],v,S);return this}function Pg(c,h){for(var v in c[Qs]){var S=v.split(/\d/)[0];(!h||h(S))&&vf(c,S,null,null,v)}}var Ys={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function gf(c,h,v,S){var T=h+u(v)+(S?"_"+u(S):"");if(c[Qs]&&c[Qs][T])return this;var U=function(ce){return v.call(S||c,ce||window.event)},Q=U;!at.touchNative&&at.pointer&&h.indexOf("touch")===0?U=jg(c,h,U):at.touch&&h==="dblclick"?U=ac(c,U):"addEventListener"in c?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?c.addEventListener(Ys[h]||h,U,at.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(U=function(ce){ce=ce||window.event,xf(c,ce)&&Q(ce)},c.addEventListener(Ys[h],U,!1)):c.addEventListener(h,Q,!1):c.attachEvent("on"+h,U),c[Qs]=c[Qs]||{},c[Qs][T]=U}function vf(c,h,v,S,T){T=T||h+u(v)+(S?"_"+u(S):"");var U=c[Qs]&&c[Qs][T];if(!U)return this;!at.touchNative&&at.pointer&&h.indexOf("touch")===0?Ng(c,h,U):at.touch&&h==="dblclick"?Da(c,U):"removeEventListener"in c?c.removeEventListener(Ys[h]||h,U,!1):c.detachEvent("on"+h,U),c[Qs][T]=null}function Xs(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Mo(c){return gf(c,"wheel",Xs),this}function Do(c){return ut(c,"mousedown touchstart dblclick contextmenu",Xs),c._leaflet_disable_click=!0,this}function Sn(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Cs(c){return Sn(c),Xs(c),this}function yf(c){if(c.composedPath)return c.composedPath();for(var h=[],v=c.target;v;)h.push(v),v=v.parentNode;return h}function Au(c,h){if(!h)return new z(c.clientX,c.clientY);var v=Iu(h),S=v.boundingClientRect;return new z((c.clientX-S.left)/v.x-h.clientLeft,(c.clientY-S.top)/v.y-h.clientTop)}var xn=at.linux&&at.chrome?window.devicePixelRatio:at.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tg(c){return at.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/xn:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function xf(c,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==c;)v=v.parentNode}catch{return!1}return v!==c}var kg={__proto__:null,on:ut,off:Jt,stopPropagation:Xs,disableScrollPropagation:Mo,disableClickPropagation:Do,preventDefault:Sn,stop:Cs,getPropagationPath:yf,getMousePosition:Au,getWheelDelta:Tg,isExternalTarget:xf,addListener:ut,removeListener:Jt},_f=K.extend({run:function(c,h,v,S){this.stop(),this._el=c,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(S||.5,.2),this._startPos=Zs(c),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(c){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),c):(this._runFrame(1),this._complete())},_runFrame:function(c,h){var v=this._startPos.add(this._offset.multiplyBy(c));h&&v._round(),mt(this._el,v),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Tt=K.extend({options:{crs:_e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(oe(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=lc&&at.any3d&&!at.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ut(this._proxy,of,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),c=this._limitCenter(oe(c),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=s({animate:v.animate},v.zoom),v.pan=s({animate:v.animate,duration:v.duration},v.pan));var S=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,h,v.zoom):this._tryAnimatedPan(c,v.pan);if(S)return clearTimeout(this._sizeTimer),this}return this._resetView(c,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(c,h){return this._loaded?this.setView(this.getCenter(),c,{zoom:h}):(this._zoom=c,this)},zoomIn:function(c,h){return c=c||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,h)},zoomOut:function(c,h){return c=c||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,h)},setZoomAround:function(c,h,v){var S=this.getZoomScale(h),T=this.getSize().divideBy(2),U=c instanceof z?c:this.latLngToContainerPoint(c),Q=U.subtract(T).multiplyBy(1-1/S),ce=this.containerPointToLatLng(T.add(Q));return this.setView(ce,h,{zoom:v})},_getBoundsCenterZoom:function(c,h){h=h||{},c=c.getBounds?c.getBounds():Pe(c);var v=V(h.paddingTopLeft||h.padding||[0,0]),S=V(h.paddingBottomRight||h.padding||[0,0]),T=this.getBoundsZoom(c,!1,v.add(S));if(T=typeof h.maxZoom=="number"?Math.min(h.maxZoom,T):T,T===1/0)return{center:c.getCenter(),zoom:T};var U=S.subtract(v).divideBy(2),Q=this.project(c.getSouthWest(),T),ce=this.project(c.getNorthEast(),T),pe=this.unproject(Q.add(ce).divideBy(2).add(U),T);return{center:pe,zoom:T}},fitBounds:function(c,h){if(c=Pe(c),!c.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(c,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,h){return this.setView(c,this._zoom,{pan:h})},panBy:function(c,h){if(c=V(c).round(),h=h||{},!c.x&&!c.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _f,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,h,v){if(v=v||{},v.animate===!1||!at.any3d)return this.setView(c,h,v);this._stop();var S=this.project(this.getCenter()),T=this.project(c),U=this.getSize(),Q=this._zoom;c=oe(c),h=h===void 0?Q:h;var ce=Math.max(U.x,U.y),pe=ce*this.getZoomScale(Q,h),Ne=T.distanceTo(S)||1,Be=1.42,dt=Be*Be;function Ct(Zn){var Wg=Zn?-1:1,k8=Zn?pe:ce,R8=pe*pe-ce*ce+Wg*dt*dt*Ne*Ne,I8=2*k8*dt*Ne,U_=R8/I8,mP=Math.sqrt(U_*U_+1)-U_,A8=mP<1e-9?-18:Math.log(mP);return A8}function Wr(Zn){return(Math.exp(Zn)-Math.exp(-Zn))/2}function pr(Zn){return(Math.exp(Zn)+Math.exp(-Zn))/2}function ei(Zn){return Wr(Zn)/pr(Zn)}var ds=Ct(0);function Wu(Zn){return ce*(pr(ds)/pr(ds+Be*Zn))}function E8(Zn){return ce*(pr(ds)*ei(ds+Be*Zn)-Wr(ds))/dt}function C8(Zn){return 1-Math.pow(1-Zn,1.5)}var P8=Date.now(),hP=(Ct(1)-ds)/Be,T8=v.duration?1e3*v.duration:1e3*hP*.8;function fP(){var Zn=(Date.now()-P8)/T8,Wg=C8(Zn)*hP;Zn<=1?(this._flyToFrame=M(fP,this),this._move(this.unproject(S.add(T.subtract(S).multiplyBy(E8(Wg)/Ne)),Q),this.getScaleZoom(ce/Wu(Wg),Q),{flyTo:!0})):this._move(c,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),fP.call(this),this},flyToBounds:function(c,h){var v=this._getBoundsCenterZoom(c,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(c){return c=Pe(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var h=this.options.minZoom;return this.options.minZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var h=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,h){this._enforcingBounds=!0;var v=this.getCenter(),S=this._limitCenter(v,this._zoom,Pe(c));return v.equals(S)||this.panTo(S,h),this._enforcingBounds=!1,this},panInside:function(c,h){h=h||{};var v=V(h.paddingTopLeft||h.padding||[0,0]),S=V(h.paddingBottomRight||h.padding||[0,0]),T=this.project(this.getCenter()),U=this.project(c),Q=this.getPixelBounds(),ce=J([Q.min.add(v),Q.max.subtract(S)]),pe=ce.getSize();if(!ce.contains(U)){this._enforcingBounds=!0;var Ne=U.subtract(ce.getCenter()),Be=ce.extend(U).getSize().subtract(pe);T.x+=Ne.x<0?-Be.x:Be.x,T.y+=Ne.y<0?-Be.y:Be.y,this.panTo(this.unproject(T),h),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),S=h.divideBy(2).round(),T=v.divideBy(2).round(),U=S.subtract(T);return!U.x&&!U.y?this:(c.animate&&c.pan?this.panBy(U):(c.pan&&this._rawPanBy(U),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,c):navigator.geolocation.getCurrentPosition(h,v,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var h=c.code,v=c.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var h=c.coords.latitude,v=c.coords.longitude,S=new Me(h,v),T=S.toBounds(c.coords.accuracy*2),U=this._locateOptions;if(U.setView){var Q=this.getBoundsZoom(T);this.setView(S,U.maxZoom?Math.min(Q,U.maxZoom):Q)}var ce={latlng:S,bounds:T,timestamp:c.timestamp};for(var pe in c.coords)typeof c.coords[pe]=="number"&&(ce[pe]=c.coords[pe]);this.fire("locationfound",ce)}},addHandler:function(c,h){if(!h)return this;var v=this[c]=new h(this);return this._handlers.push(v),this.options[c]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)rn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,h){var v="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),S=Rt("div",v,h||this._mapPane);return c&&(this._panes[c]=S),S},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),h=this.unproject(c.getBottomLeft()),v=this.unproject(c.getTopRight());return new me(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,h,v){c=Pe(c),v=V(v||[0,0]);var S=this.getZoom()||0,T=this.getMinZoom(),U=this.getMaxZoom(),Q=c.getNorthWest(),ce=c.getSouthEast(),pe=this.getSize().subtract(v),Ne=J(this.project(ce,S),this.project(Q,S)).getSize(),Be=at.any3d?this.options.zoomSnap:1,dt=pe.x/Ne.x,Ct=pe.y/Ne.y,Wr=h?Math.max(dt,Ct):Math.min(dt,Ct);return S=this.getScaleZoom(Wr,S),Be&&(S=Math.round(S/(Be/100))*(Be/100),S=h?Math.ceil(S/Be)*Be:Math.floor(S/Be)*Be),Math.max(T,Math.min(U,S))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,h){var v=this._getTopLeftPoint(c,h);return new q(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(c)/v.scale(h)},getScaleZoom:function(c,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var S=v.zoom(c*v.scale(h));return isNaN(S)?1/0:S},project:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(oe(c),h)},unproject:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(V(c),h)},layerPointToLatLng:function(c){var h=V(c).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(c){var h=this.project(oe(c))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(oe(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Pe(c))},distance:function(c,h){return this.options.crs.distance(oe(c),oe(h))},containerPointToLayerPoint:function(c){return V(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return V(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var h=this.containerPointToLayerPoint(V(c));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(oe(c)))},mouseEventToContainerPoint:function(c){return Au(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var h=this._container=lf(c);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ut(h,"scroll",this._onScroll,this),this._containerId=u(h)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&at.any3d,bt(c,"leaflet-container"+(at.touch?" leaflet-touch":"")+(at.retina?" leaflet-retina":"")+(at.ielt9?" leaflet-oldie":"")+(at.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Io(c,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(c.markerPane,"leaflet-zoom-hide"),bt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,h,v){mt(this._mapPane,new z(0,0));var S=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var T=this._zoom!==h;this._moveStart(T,v)._move(c,h)._moveEnd(T),this.fire("viewreset"),S&&this.fire("load")},_moveStart:function(c,h){return c&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(c,h,v,S){h===void 0&&(h=this._zoom);var T=this._zoom!==h;return this._zoom=h,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),S?v&&v.pinch&&this.fire("zoom",v):((T||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){mt(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[u(this._container)]=this;var h=c?Jt:ut;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),at.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,h){for(var v=[],S,T=h==="mouseout"||h==="mouseover",U=c.target||c.srcElement,Q=!1;U;){if(S=this._targets[u(U)],S&&(h==="click"||h==="preclick")&&this._draggableMoved(S)){Q=!0;break}if(S&&S.listens(h,!0)&&(T&&!xf(U,c)||(v.push(S),T))||U===this._container)break;U=U.parentNode}return!v.length&&!Q&&!T&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var h=c.target||c.srcElement;if(!(!this._loaded||h._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(h))){var v=c.type;v==="mousedown"&&Va(h),this._fireDOMEvent(c,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,h,v){if(c.type==="click"){var S=s({},c);S.type="preclick",this._fireDOMEvent(S,S.type,v)}var T=this._findEventTargets(c,h);if(v){for(var U=[],Q=0;Q<v.length;Q++)v[Q].listens(h,!0)&&U.push(v[Q]);T=U.concat(T)}if(T.length){h==="contextmenu"&&Sn(c);var ce=T[0],pe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Ne=ce.getLatLng&&(!ce._radius||ce._radius<=10);pe.containerPoint=Ne?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(c),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ne?ce.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(Q=0;Q<T.length;Q++)if(T[Q].fire(h,pe,!0),pe.originalEvent._stopped||T[Q].options.bubblingMouseEvents===!1&&R(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,h=this._handlers.length;c<h;c++)this._handlers[c].disable()},whenReady:function(c,h){return this._loaded?c.call(h||this,{target:this}):this.on("load",c,h),this},_getMapPanePos:function(){return Zs(this._mapPane)||new z(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,h){var v=c&&h!==void 0?this._getNewPixelOrigin(c,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,h){var v=this.getSize()._divideBy(2);return this.project(c,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,h,v){var S=this._getNewPixelOrigin(v,h);return this.project(c,h)._subtract(S)},_latLngBoundsToNewLayerBounds:function(c,h,v){var S=this._getNewPixelOrigin(v,h);return J([this.project(c.getSouthWest(),h)._subtract(S),this.project(c.getNorthWest(),h)._subtract(S),this.project(c.getSouthEast(),h)._subtract(S),this.project(c.getNorthEast(),h)._subtract(S)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,h,v){if(!v)return c;var S=this.project(c,h),T=this.getSize().divideBy(2),U=new q(S.subtract(T),S.add(T)),Q=this._getBoundsOffset(U,v,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?c:this.unproject(S.add(Q),h)},_limitOffset:function(c,h){if(!h)return c;var v=this.getPixelBounds(),S=new q(v.min.add(c),v.max.add(c));return c.add(this._getBoundsOffset(S,h))},_getBoundsOffset:function(c,h,v){var S=J(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),T=S.min.subtract(c.min),U=S.max.subtract(c.max),Q=this._rebound(T.x,-U.x),ce=this._rebound(T.y,-U.y);return new z(Q,ce)},_rebound:function(c,h){return c+h>0?Math.round(c-h)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(h))},_limitZoom:function(c){var h=this.getMinZoom(),v=this.getMaxZoom(),S=at.any3d?this.options.zoomSnap:1;return S&&(c=Math.round(c/S)*S),Math.max(h,Math.min(v,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,h){var v=this._getCenterOffset(c)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var c=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(h){var v=oc,S=this._proxy.style[v];Ki(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),S===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),h=this.getZoom();Ki(this._proxy,this.project(c,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var S=this.getZoomScale(h),T=this._getCenterOffset(c)._divideBy(1-1/S);return v.animate!==!0&&!this.getSize().contains(T)?!1:(M(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(c,h,!0)},this),!0)},_animateZoom:function(c,h,v,S){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=h,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:h,noUpdate:S}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ou(c,h){return new Tt(c,h)}var us=G.extend({options:{position:"topright"},initialize:function(c){b(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var h=this._map;return h&&h.removeControl(this),this.options.position=c,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var h=this._container=this.onAdd(c),v=this.getPosition(),S=c._controlCorners[v];return bt(h,"leaflet-control"),v.indexOf("bottom")!==-1?S.insertBefore(h,S.firstChild):S.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),qr=function(c){return new us(c)};Tt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},h="leaflet-",v=this._controlContainer=Rt("div",h+"control-container",this._container);function S(T,U){var Q=h+T+" "+h+U;c[T+U]=Rt("div",Q,v)}S("top","left"),S("top","right"),S("bottom","left"),S("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)rn(this._controlCorners[c]);rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wf=us.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,h,v,S){return v<S?-1:S<v?1:0}},initialize:function(c,h,v){b(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var S in c)this._addLayer(c[S],S);for(S in h)this._addLayer(h[S],S,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return us.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,h){return this._addLayer(c,h),this._map?this._update():this},addOverlay:function(c,h){return this._addLayer(c,h,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var h=this._getLayer(u(c));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):yn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",h=this._container=Rt("div",c),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Do(h),Mo(h);var S=this._section=Rt("section",c+"-list");v&&(this._map.on("click",this.collapse,this),ut(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Rt("a",c+"-toggle",h);T.href="#",T.title="Layers",T.setAttribute("role","button"),ut(T,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){Sn(U),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Rt("div",c+"-base",S),this._separator=Rt("div",c+"-separator",S),this._overlaysList=Rt("div",c+"-overlays",S),h.appendChild(S)},_getLayer:function(c){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&u(this._layers[h].layer)===c)return this._layers[h]},_addLayer:function(c,h,v){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(S,T){return this.options.sortFunction(S.layer,T.layer,S.name,T.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cc(this._baseLayersList),cc(this._overlaysList),this._layerControlInputs=[];var c,h,v,S,T=0;for(v=0;v<this._layers.length;v++)S=this._layers[v],this._addItem(S),h=h||S.overlay,c=c||!S.overlay,T+=S.overlay?0:1;return this.options.hideSingleBase&&(c=c&&T>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=h&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var h=this._getLayer(u(c.target)),v=h.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(c,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(h?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=v,S.firstChild},_addItem:function(c){var h=document.createElement("label"),v=this._map.hasLayer(c.layer),S;c.overlay?(S=document.createElement("input"),S.type="checkbox",S.className="leaflet-control-layers-selector",S.defaultChecked=v):S=this._createRadioElement("leaflet-base-layers_"+u(this),v),this._layerControlInputs.push(S),S.layerId=u(c.layer),ut(S,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+c.name;var U=document.createElement("span");h.appendChild(U),U.appendChild(S),U.appendChild(T);var Q=c.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,h,v,S=[],T=[];this._handlingClick=!0;for(var U=c.length-1;U>=0;U--)h=c[U],v=this._getLayer(h.layerId).layer,h.checked?S.push(v):h.checked||T.push(v);for(U=0;U<T.length;U++)this._map.hasLayer(T[U])&&this._map.removeLayer(T[U]);for(U=0;U<S.length;U++)this._map.hasLayer(S[U])||this._map.addLayer(S[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,h,v,S=this._map.getZoom(),T=c.length-1;T>=0;T--)h=c[T],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&S<v.options.minZoom||v.options.maxZoom!==void 0&&S>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ut(c,"click",Sn),this.expand();var h=this;setTimeout(function(){Jt(c,"click",Sn),h._preventClick=!1})}}),D_=function(c,h,v){return new wf(c,h,v)},$a=us.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var h="leaflet-control-zoom",v=Rt("div",h+" leaflet-bar"),S=this.options;return this._zoomInButton=this._createButton(S.zoomInText,S.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(S.zoomOutText,S.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,h,v,S,T){var U=Rt("a",v,S);return U.innerHTML=c,U.href="#",U.title=h,U.setAttribute("role","button"),U.setAttribute("aria-label",h),Do(U),ut(U,"click",Cs),ut(U,"click",T,this),ut(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var c=this._map,h="leaflet-disabled";yn(this._zoomInButton,h),yn(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(bt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(bt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $a,this.addControl(this.zoomControl))});var Rg=function(c){return new $a(c)},Mu=us.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var h="leaflet-control-scale",v=Rt("div",h),S=this.options;return this._addScales(S,h+"-line",v),c.on(S.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),v},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,h,v){c.metric&&(this._mScale=Rt("div",h,v)),c.imperial&&(this._iScale=Rt("div",h,v))},_update:function(){var c=this._map,h=c.getSize().y/2,v=c.distance(c.containerPointToLatLng([0,h]),c.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var h=this._getRoundNum(c),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/c)},_updateImperial:function(c){var h=c*3.2808399,v,S,T;h>5280?(v=h/5280,S=this._getRoundNum(v),this._updateScale(this._iScale,S+" mi",S/v)):(T=this._getRoundNum(h),this._updateScale(this._iScale,T+" ft",T/h))},_updateScale:function(c,h,v){c.style.width=Math.round(this.options.maxWidth*v)+"px",c.innerHTML=h},_getRoundNum:function(c){var h=Math.pow(10,(Math.floor(c)+"").length-1),v=c/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),Du=function(c){return new Mu(c)},Ig='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Lo=us.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(at.inlineSvg?Ig+" ":"")+"Leaflet</a>"},initialize:function(c){b(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),Do(this._container);for(var h in c._layers)c._layers[h].getAttribution&&this.addAttribution(c._layers[h].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var h in this._attributions)this._attributions[h]&&c.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),c.length&&v.push(c.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new Lo().addTo(this)});var L_=function(c){return new Lo(c)};us.Layers=wf,us.Zoom=$a,us.Scale=Mu,us.Attribution=Lo,qr.layers=D_,qr.zoom=Rg,qr.scale=Du,qr.attribution=L_;var Ps=G.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ps.addTo=function(c,h){return c.addHandler(h,this),this};var uc={Events:ae},bf=at.touch?"touchstart mousedown":"mousedown",_i=K.extend({options:{clickTolerance:3},initialize:function(c,h,v,S){b(this,S),this._element=c,this._dragStartTarget=h||c,this._preventOutline=v},enable:function(){this._enabled||(ut(this._dragStartTarget,bf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_i._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,bf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!cf(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){_i._dragging===this&&this.finishDrag();return}if(!(_i._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(_i._dragging=this,this._preventOutline&&Va(this._element),hf(),yi(),!this._moving)){this.fire("down");var h=c.touches?c.touches[0]:c,v=pf(this._element);this._startPoint=new z(h.clientX,h.clientY),this._startPos=Zs(this._element),this._parentScale=Iu(v);var S=c.type==="mousedown";ut(document,S?"mousemove":"touchmove",this._onMove,this),ut(document,S?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var h=c.touches&&c.touches.length===1?c.touches[0]:c,v=new z(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,Sn(c),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),mt(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){yn(document.body,"leaflet-dragging"),this._lastTarget&&(yn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),ff(),xi();var h=this._moved&&this._moving;this._moving=!1,_i._dragging=!1,h&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Lu(c,h,v){var S,T=[1,4,2,8],U,Q,ce,pe,Ne,Be,dt,Ct;for(U=0,Be=c.length;U<Be;U++)c[U]._code=Zi(c[U],h);for(ce=0;ce<4;ce++){for(dt=T[ce],S=[],U=0,Be=c.length,Q=Be-1;U<Be;Q=U++)pe=c[U],Ne=c[Q],pe._code&dt?Ne._code&dt||(Ct=mr(Ne,pe,dt,h,v),Ct._code=Zi(Ct,h),S.push(Ct)):(Ne._code&dt&&(Ct=mr(Ne,pe,dt,h,v),Ct._code=Zi(Ct,h),S.push(Ct)),S.push(pe));c=S}return c}function Fu(c,h){var v,S,T,U,Q,ce,pe,Ne,Be;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var dt=oe([0,0]),Ct=Pe(c),Wr=Ct.getNorthWest().distanceTo(Ct.getSouthWest())*Ct.getNorthEast().distanceTo(Ct.getNorthWest());Wr<1700&&(dt=Vu(c));var pr=c.length,ei=[];for(v=0;v<pr;v++){var ds=oe(c[v]);ei.push(h.project(oe([ds.lat-dt.lat,ds.lng-dt.lng])))}for(ce=pe=Ne=0,v=0,S=pr-1;v<pr;S=v++)T=ei[v],U=ei[S],Q=T.y*U.x-U.y*T.x,pe+=(T.x+U.x)*Q,Ne+=(T.y+U.y)*Q,ce+=Q*3;ce===0?Be=ei[0]:Be=[pe/ce,Ne/ce];var Wu=h.unproject(V(Be));return oe([Wu.lat+dt.lat,Wu.lng+dt.lng])}function Vu(c){for(var h=0,v=0,S=0,T=0;T<c.length;T++){var U=oe(c[T]);h+=U.lat,v+=U.lng,S++}return oe([h/S,v/S])}var $u={__proto__:null,clipPolygon:Lu,polygonCenter:Fu,centroid:Vu};function jf(c,h){if(!h||!c.length)return c.slice();var v=h*h;return c=Og(c,v),c=Ag(c,v),c}function Nf(c,h,v){return Math.sqrt(Js(c,h,v,!0))}function za(c,h,v){return Js(c,h,v)}function Ag(c,h){var v=c.length,S=typeof Uint8Array<"u"?Uint8Array:Array,T=new S(v);T[0]=T[v-1]=1,zu(c,T,h,0,v-1);var U,Q=[];for(U=0;U<v;U++)T[U]&&Q.push(c[U]);return Q}function zu(c,h,v,S,T){var U=0,Q,ce,pe;for(ce=S+1;ce<=T-1;ce++)pe=Js(c[ce],c[S],c[T],!0),pe>U&&(Q=ce,U=pe);U>v&&(h[Q]=1,zu(c,h,v,S,Q),zu(c,h,v,Q,T))}function Og(c,h){for(var v=[c[0]],S=1,T=0,U=c.length;S<U;S++)Mg(c[S],c[T])>h&&(v.push(c[S]),T=S);return T<U-1&&v.push(c[U-1]),v}var Sf;function dc(c,h,v,S,T){var U=S?Sf:Zi(c,v),Q=Zi(h,v),ce,pe,Ne;for(Sf=Q;;){if(!(U|Q))return[c,h];if(U&Q)return!1;ce=U||Q,pe=mr(c,h,ce,v,T),Ne=Zi(pe,v),ce===U?(c=pe,U=Ne):(h=pe,Q=Ne)}}function mr(c,h,v,S,T){var U=h.x-c.x,Q=h.y-c.y,ce=S.min,pe=S.max,Ne,Be;return v&8?(Ne=c.x+U*(pe.y-c.y)/Q,Be=pe.y):v&4?(Ne=c.x+U*(ce.y-c.y)/Q,Be=ce.y):v&2?(Ne=pe.x,Be=c.y+Q*(pe.x-c.x)/U):v&1&&(Ne=ce.x,Be=c.y+Q*(ce.x-c.x)/U),new z(Ne,Be,T)}function Zi(c,h){var v=0;return c.x<h.min.x?v|=1:c.x>h.max.x&&(v|=2),c.y<h.min.y?v|=4:c.y>h.max.y&&(v|=8),v}function Mg(c,h){var v=h.x-c.x,S=h.y-c.y;return v*v+S*S}function Js(c,h,v,S){var T=h.x,U=h.y,Q=v.x-T,ce=v.y-U,pe=Q*Q+ce*ce,Ne;return pe>0&&(Ne=((c.x-T)*Q+(c.y-U)*ce)/pe,Ne>1?(T=v.x,U=v.y):Ne>0&&(T+=Q*Ne,U+=ce*Ne)),Q=c.x-T,ce=c.y-U,S?Q*Q+ce*ce:new z(T,U)}function g(c){return!E(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function C(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(c)}function O(c,h){var v,S,T,U,Q,ce,pe,Ne;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Be=oe([0,0]),dt=Pe(c),Ct=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());Ct<1700&&(Be=Vu(c));var Wr=c.length,pr=[];for(v=0;v<Wr;v++){var ei=oe(c[v]);pr.push(h.project(oe([ei.lat-Be.lat,ei.lng-Be.lng])))}for(v=0,S=0;v<Wr-1;v++)S+=pr[v].distanceTo(pr[v+1])/2;if(S===0)Ne=pr[0];else for(v=0,U=0;v<Wr-1;v++)if(Q=pr[v],ce=pr[v+1],T=Q.distanceTo(ce),U+=T,U>S){pe=(U-S)/T,Ne=[ce.x-pe*(ce.x-Q.x),ce.y-pe*(ce.y-Q.y)];break}var ds=h.unproject(V(Ne));return oe([ds.lat+Be.lat,ds.lng+Be.lng])}var W={__proto__:null,simplify:jf,pointToSegmentDistance:Nf,closestPointOnSegment:za,clipSegment:dc,_getEdgeIntersection:mr,_getBitCode:Zi,_sqClosestPointOnSegment:Js,isFlat:g,_flat:C,polylineCenter:O},le={project:function(c){return new z(c.lng,c.lat)},unproject:function(c){return new Me(c.y,c.x)},bounds:new q([-180,-90],[180,90])},ge={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var h=Math.PI/180,v=this.R,S=c.lat*h,T=this.R_MINOR/v,U=Math.sqrt(1-T*T),Q=U*Math.sin(S),ce=Math.tan(Math.PI/4-S/2)/Math.pow((1-Q)/(1+Q),U/2);return S=-v*Math.log(Math.max(ce,1e-10)),new z(c.lng*h*v,S)},unproject:function(c){for(var h=180/Math.PI,v=this.R,S=this.R_MINOR/v,T=Math.sqrt(1-S*S),U=Math.exp(-c.y/v),Q=Math.PI/2-2*Math.atan(U),ce=0,pe=.1,Ne;ce<15&&Math.abs(pe)>1e-7;ce++)Ne=T*Math.sin(Q),Ne=Math.pow((1-Ne)/(1+Ne),T/2),pe=Math.PI/2-2*Math.atan(U*Ne)-Q,Q+=pe;return new Me(Q*h,c.x*h/v)}},Le={__proto__:null,LonLat:le,Mercator:ge,SphericalMercator:ee},Kt=s({},Y,{code:"EPSG:3395",projection:ge,transformation:function(){var c=.5/(Math.PI*ge.R);return fe(c,.5,-c,.5)}()}),Kn=s({},Y,{code:"EPSG:4326",projection:le,transformation:fe(1/180,1,-1/180,.5)}),Lt=s({},xe,{projection:le,transformation:fe(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,h){var v=h.lng-c.lng,S=h.lat-c.lat;return Math.sqrt(v*v+S*S)},infinite:!0});xe.Earth=Y,xe.EPSG3395=Kt,xe.EPSG3857=_e,xe.EPSG900913=Ie,xe.EPSG4326=Kn,xe.Simple=Lt;var en=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[u(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[u(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var h=c.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var h=u(c);return this._layers[h]?this:(this._layers[h]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var h=u(c);return this._layers[h]?(this._loaded&&c.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return u(c)in this._layers},eachLayer:function(c,h){for(var v in this._layers)c.call(h,this._layers[v]);return this},_addLayers:function(c){c=c?E(c)?c:[c]:[];for(var h=0,v=c.length;h<v;h++)this.addLayer(c[h])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[u(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var h=u(c);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,h=-1/0,v=this._getZoomSpan();for(var S in this._zoomBoundLayers){var T=this._zoomBoundLayers[S].options;c=T.minZoom===void 0?c:Math.min(c,T.minZoom),h=T.maxZoom===void 0?h:Math.max(h,T.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=c===1/0?void 0:c,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var En=en.extend({initialize:function(c,h){b(this,h),this._layers={};var v,S;if(c)for(v=0,S=c.length;v<S;v++)this.addLayer(c[v])},addLayer:function(c){var h=this.getLayerId(c);return this._layers[h]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var h=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(c){var h=typeof c=="number"?c:this.getLayerId(c);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var h=Array.prototype.slice.call(arguments,1),v,S;for(v in this._layers)S=this._layers[v],S[c]&&S[c].apply(S,h);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,h){for(var v in this._layers)c.call(h,this._layers[v]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return u(c)}}),Fo=function(c,h){return new En(c,h)},Fn=En.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),En.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),En.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new me;for(var h in this._layers){var v=this._layers[h];c.extend(v.getBounds?v.getBounds():v.getLatLng())}return c}}),Uu=function(c,h){return new Fn(c,h)},Qi=G.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){b(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,h){var v=this._getIconUrl(c);if(!v){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var S=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(S,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),S},_setIconStyles:function(c,h){var v=this.options,S=v[h+"Size"];typeof S=="number"&&(S=[S,S]);var T=V(S),U=V(h==="shadow"&&v.shadowAnchor||v.iconAnchor||T&&T.divideBy(2,!0));c.className="leaflet-marker-"+h+" "+(v.className||""),U&&(c.style.marginLeft=-U.x+"px",c.style.marginTop=-U.y+"px"),T&&(c.style.width=T.x+"px",c.style.height=T.y+"px")},_createImg:function(c,h){return h=h||document.createElement("img"),h.src=c,h},_getIconUrl:function(c){return at.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function o8(c){return new Qi(c)}var Ef=Qi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Ef.imagePath!="string"&&(Ef.imagePath=this._detectIconPath()),(this.options.imagePath||Ef.imagePath)+Qi.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var h=function(v,S,T){var U=S.exec(v);return U&&U[T]};return c=h(c,/^url\((['"])?(.+)\1\)$/,2),c&&h(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Rt("div","leaflet-default-icon-path",document.body),h=Io(c,"background-image")||Io(c,"backgroundImage");if(document.body.removeChild(c),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),GC=Ps.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new _i(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var h=this._marker,v=h._map,S=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,U=Zs(h._icon),Q=v.getPixelBounds(),ce=v.getPixelOrigin(),pe=J(Q.min._subtract(ce).add(T),Q.max._subtract(ce).subtract(T));if(!pe.contains(U)){var Ne=V((Math.max(pe.max.x,U.x)-pe.max.x)/(Q.max.x-pe.max.x)-(Math.min(pe.min.x,U.x)-pe.min.x)/(Q.min.x-pe.min.x),(Math.max(pe.max.y,U.y)-pe.max.y)/(Q.max.y-pe.max.y)-(Math.min(pe.min.y,U.y)-pe.min.y)/(Q.min.y-pe.min.y)).multiplyBy(S);v.panBy(Ne,{animate:!1}),this._draggable._newPos._add(Ne),this._draggable._startPos._add(Ne),mt(h._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=M(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,c)))},_onDrag:function(c){var h=this._marker,v=h._shadow,S=Zs(h._icon),T=h._map.layerPointToLatLng(S);v&&mt(v,S),h._latlng=T,c.latlng=T,c.oldLatLng=this._oldLatLng,h.fire("move",c).fire("drag",c)},_onDragEnd:function(c){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Dg=en.extend({options:{icon:new Ef,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,h){b(this,h),this._latlng=oe(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var h=this._latlng;return this._latlng=oe(c),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=c.icon.createIcon(this._icon),S=!1;v!==this._icon&&(this._icon&&this._removeIcon(),S=!0,c.title&&(v.title=c.title),v.tagName==="IMG"&&(v.alt=c.alt||"")),bt(v,h),c.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(v,"focus",this._panOnFocus,this);var T=c.icon.createShadow(this._shadow),U=!1;T!==this._shadow&&(this._removeShadow(),U=!0),T&&(bt(T,h),T.alt=""),this._shadow=T,c.opacity<1&&this._updateOpacity(),S&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&U&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&mt(this._icon,c),this._shadow&&mt(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),GC)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new GC(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Rn(this._icon,c),this._shadow&&Rn(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var h=this.options.icon.options,v=h.iconSize?V(h.iconSize):V(0,0),S=h.iconAnchor?V(h.iconAnchor):V(0,0);c.panInside(this._latlng,{paddingTopLeft:S,paddingBottomRight:v.subtract(S)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function l8(c,h){return new Dg(c,h)}var Vo=en.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return b(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Lg=Vo.extend({options:{fill:!0,radius:10},initialize:function(c,h){b(this,h),this._latlng=oe(c),this._radius=this.options.radius},setLatLng:function(c){var h=this._latlng;return this._latlng=oe(c),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var h=c&&c.radius||this._radius;return Vo.prototype.setStyle.call(this,c),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,h=this._radiusY||c,v=this._clickTolerance(),S=[c+v,h+v];this._pxBounds=new q(this._point.subtract(S),this._point.add(S))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function c8(c,h){return new Lg(c,h)}var F_=Lg.extend({initialize:function(c,h,v){if(typeof h=="number"&&(h=s({},v,{radius:h})),b(this,h),this._latlng=oe(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Vo.prototype.setStyle,_project:function(){var c=this._latlng.lng,h=this._latlng.lat,v=this._map,S=v.options.crs;if(S.distance===Y.distance){var T=Math.PI/180,U=this._mRadius/Y.R/T,Q=v.project([h+U,c]),ce=v.project([h-U,c]),pe=Q.add(ce).divideBy(2),Ne=v.unproject(pe).lat,Be=Math.acos((Math.cos(U*T)-Math.sin(h*T)*Math.sin(Ne*T))/(Math.cos(h*T)*Math.cos(Ne*T)))/T;(isNaN(Be)||Be===0)&&(Be=U/Math.cos(Math.PI/180*h)),this._point=pe.subtract(v.getPixelOrigin()),this._radius=isNaN(Be)?0:pe.x-v.project([Ne,c-Be]).x,this._radiusY=pe.y-Q.y}else{var dt=S.unproject(S.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(dt).x}this._updateBounds()}});function u8(c,h,v){return new F_(c,h,v)}var Ua=Vo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,h){b(this,h),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var h=1/0,v=null,S=Js,T,U,Q=0,ce=this._parts.length;Q<ce;Q++)for(var pe=this._parts[Q],Ne=1,Be=pe.length;Ne<Be;Ne++){T=pe[Ne-1],U=pe[Ne];var dt=S(c,T,U,!0);dt<h&&(h=dt,v=S(c,T,U))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return O(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,h){return h=h||this._defaultShape(),c=oe(c),h.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new me,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var h=[],v=g(c),S=0,T=c.length;S<T;S++)v?(h[S]=oe(c[S]),this._bounds.extend(h[S])):h[S]=this._convertLatLngs(c[S]);return h},_project:function(){var c=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),h=new z(c,c);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(c,h,v){var S=c[0]instanceof Me,T=c.length,U,Q;if(S){for(Q=[],U=0;U<T;U++)Q[U]=this._map.latLngToLayerPoint(c[U]),v.extend(Q[U]);h.push(Q)}else for(U=0;U<T;U++)this._projectLatlngs(c[U],h,v)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,S,T,U,Q,ce,pe;for(v=0,T=0,U=this._rings.length;v<U;v++)for(pe=this._rings[v],S=0,Q=pe.length;S<Q-1;S++)ce=dc(pe[S],pe[S+1],c,S,!0),ce&&(h[T]=h[T]||[],h[T].push(ce[0]),(ce[1]!==pe[S+1]||S===Q-2)&&(h[T].push(ce[1]),T++))}},_simplifyPoints:function(){for(var c=this._parts,h=this.options.smoothFactor,v=0,S=c.length;v<S;v++)c[v]=jf(c[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,h){var v,S,T,U,Q,ce,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(v=0,U=this._parts.length;v<U;v++)for(ce=this._parts[v],S=0,Q=ce.length,T=Q-1;S<Q;T=S++)if(!(!h&&S===0)&&Nf(c,ce[T],ce[S])<=pe)return!0;return!1}});function d8(c,h){return new Ua(c,h)}Ua._flat=C;var Bu=Ua.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var h=Ua.prototype._convertLatLngs.call(this,c),v=h.length;return v>=2&&h[0]instanceof Me&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(c){Ua.prototype._setLatLngs.call(this,c),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,h=this.options.weight,v=new z(h,h);if(c=new q(c.min.subtract(v),c.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var S=0,T=this._rings.length,U;S<T;S++)U=Lu(this._rings[S],c,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var h=!1,v,S,T,U,Q,ce,pe,Ne;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(U=0,pe=this._parts.length;U<pe;U++)for(v=this._parts[U],Q=0,Ne=v.length,ce=Ne-1;Q<Ne;ce=Q++)S=v[Q],T=v[ce],S.y>c.y!=T.y>c.y&&c.x<(T.x-S.x)*(c.y-S.y)/(T.y-S.y)+S.x&&(h=!h);return h||Ua.prototype._containsPoint.call(this,c,!0)}});function h8(c,h){return new Bu(c,h)}var Ba=Fn.extend({initialize:function(c,h){b(this,h),this._layers={},c&&this.addData(c)},addData:function(c){var h=E(c)?c:c.features,v,S,T;if(h){for(v=0,S=h.length;v<S;v++)T=h[v],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var U=this.options;if(U.filter&&!U.filter(c))return this;var Q=Fg(c,U);return Q?(Q.feature=zg(c),Q.defaultOptions=Q.options,this.resetStyle(Q),U.onEachFeature&&U.onEachFeature(c,Q),this.addLayer(Q)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(h){this._setLayerStyle(h,c)},this)},_setLayerStyle:function(c,h){c.setStyle&&(typeof h=="function"&&(h=h(c.feature)),c.setStyle(h))}});function Fg(c,h){var v=c.type==="Feature"?c.geometry:c,S=v?v.coordinates:null,T=[],U=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||V_,ce,pe,Ne,Be;if(!S&&!v)return null;switch(v.type){case"Point":return ce=Q(S),KC(U,c,ce,h);case"MultiPoint":for(Ne=0,Be=S.length;Ne<Be;Ne++)ce=Q(S[Ne]),T.push(KC(U,c,ce,h));return new Fn(T);case"LineString":case"MultiLineString":return pe=Vg(S,v.type==="LineString"?0:1,Q),new Ua(pe,h);case"Polygon":case"MultiPolygon":return pe=Vg(S,v.type==="Polygon"?1:2,Q),new Bu(pe,h);case"GeometryCollection":for(Ne=0,Be=v.geometries.length;Ne<Be;Ne++){var dt=Fg({geometry:v.geometries[Ne],type:"Feature",properties:c.properties},h);dt&&T.push(dt)}return new Fn(T);case"FeatureCollection":for(Ne=0,Be=v.features.length;Ne<Be;Ne++){var Ct=Fg(v.features[Ne],h);Ct&&T.push(Ct)}return new Fn(T);default:throw new Error("Invalid GeoJSON object.")}}function KC(c,h,v,S){return c?c(h,v):new Dg(v,S&&S.markersInheritOptions&&S)}function V_(c){return new Me(c[1],c[0],c[2])}function Vg(c,h,v){for(var S=[],T=0,U=c.length,Q;T<U;T++)Q=h?Vg(c[T],h-1,v):(v||V_)(c[T]),S.push(Q);return S}function $_(c,h){return c=oe(c),c.alt!==void 0?[p(c.lng,h),p(c.lat,h),p(c.alt,h)]:[p(c.lng,h),p(c.lat,h)]}function $g(c,h,v,S){for(var T=[],U=0,Q=c.length;U<Q;U++)T.push(h?$g(c[U],g(c[U])?0:h-1,v,S):$_(c[U],S));return!h&&v&&T.length>0&&T.push(T[0].slice()),T}function Hu(c,h){return c.feature?s({},c.feature,{geometry:h}):zg(h)}function zg(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var z_={toGeoJSON:function(c){return Hu(this,{type:"Point",coordinates:$_(this.getLatLng(),c)})}};Dg.include(z_),F_.include(z_),Lg.include(z_),Ua.include({toGeoJSON:function(c){var h=!g(this._latlngs),v=$g(this._latlngs,h?1:0,!1,c);return Hu(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),Bu.include({toGeoJSON:function(c){var h=!g(this._latlngs),v=h&&!g(this._latlngs[0]),S=$g(this._latlngs,v?2:h?1:0,!0,c);return h||(S=[S]),Hu(this,{type:(v?"Multi":"")+"Polygon",coordinates:S})}}),En.include({toMultiPoint:function(c){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(c).geometry.coordinates)}),Hu(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(c){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(c);var v=h==="GeometryCollection",S=[];return this.eachLayer(function(T){if(T.toGeoJSON){var U=T.toGeoJSON(c);if(v)S.push(U.geometry);else{var Q=zg(U);Q.type==="FeatureCollection"?S.push.apply(S,Q.features):S.push(Q)}}}),v?Hu(this,{geometries:S,type:"GeometryCollection"}):{type:"FeatureCollection",features:S}}});function ZC(c,h){return new Ba(c,h)}var f8=ZC,Ug=en.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,h,v){this._url=c,this._bounds=Pe(h),b(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&La(this._image),this},bringToBack:function(){return this._map&&Ao(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Pe(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",h=this._image=c?this._url:Rt("img");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(c){var h=this._map.getZoomScale(c.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Ki(this._image,v,h)},_reset:function(){var c=this._image,h=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();mt(c,h.min),c.style.width=v.x+"px",c.style.height=v.y+"px"},_updateOpacity:function(){Rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),m8=function(c,h,v){return new Ug(c,h,v)},QC=Ug.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",h=this._image=c?this._url:Rt("video");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onloadeddata=o(this.fire,this,"load"),c){for(var v=h.getElementsByTagName("source"),S=[],T=0;T<v.length;T++)S.push(v[T].src);this._url=v.length>0?S:[h.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var Q=Rt("source");Q.src=this._url[U],h.appendChild(Q)}}});function p8(c,h,v){return new QC(c,h,v)}var YC=Ug.extend({_initImage:function(){var c=this._image=this._url;bt(c,"leaflet-image-layer"),this._zoomAnimated&&bt(c,"leaflet-zoom-animated"),this.options.className&&bt(c,this.options.className),c.onselectstart=m,c.onmousemove=m}});function g8(c,h,v){return new YC(c,h,v)}var Yi=en.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,h){c&&(c instanceof Me||E(c))?(this._latlng=oe(c),b(this,h)):(b(this,c),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Rn(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Rn(this._container,0),this._removeTimeout=setTimeout(o(rn,void 0,this._container),200)):rn(this._container),this.options.interactive&&(yn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=oe(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&La(this._container),this},bringToBack:function(){return this._map&&Ao(this._container),this},_prepareOpen:function(c){var h=this._source;if(!h._map)return!1;if(h instanceof Fn){h=null;var v=this._source._layers;for(var S in v)if(v[S]._map){h=v[S];break}if(!h)return!1;this._source=h}if(!c)if(h.getCenter)c=h.getCenter();else if(h.getLatLng)c=h.getLatLng();else if(h.getBounds)c=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")c.innerHTML=h;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),h=V(this.options.offset),v=this._getAnchor();this._zoomAnimated?mt(this._container,c.add(v)):h=h.add(c).add(v);var S=this._containerBottom=-h.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=S+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Tt.include({_initOverlay:function(c,h,v,S){var T=h;return T instanceof c||(T=new c(S).setContent(h)),v&&T.setLatLng(v),T}}),en.include({_initOverlay:function(c,h,v,S){var T=v;return T instanceof c?(b(T,S),T._source=this):(T=h&&!S?h:new c(S,this),T.setContent(v)),T}});var Bg=Yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Yi.prototype.openOn.call(this,c)},onAdd:function(c){Yi.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vo||this._source.on("preclick",Xs))},onRemove:function(c){Yi.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vo||this._source.off("preclick",Xs))},getEvents:function(){var c=Yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",h=this._container=Rt("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Rt("div",c+"-content-wrapper",h);if(this._contentNode=Rt("div",c+"-content",v),Do(h),Mo(this._contentNode),ut(h,"contextmenu",Xs),this._tipContainer=Rt("div",c+"-tip-container",h),this._tip=Rt("div",c+"-tip",this._tipContainer),this.options.closeButton){var S=this._closeButton=Rt("a",c+"-close-button",h);S.setAttribute("role","button"),S.setAttribute("aria-label","Close popup"),S.href="#close",S.innerHTML='<span aria-hidden="true">&#215;</span>',ut(S,"click",function(T){Sn(T),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,h=c.style;h.width="",h.whiteSpace="nowrap";var v=c.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var S=c.offsetHeight,T=this.options.maxHeight,U="leaflet-popup-scrolled";T&&S>T?(h.height=T+"px",bt(c,U)):yn(c,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),v=this._getAnchor();mt(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,h=parseInt(Io(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,S=this._containerWidth,T=new z(this._containerLeft,-v-this._containerBottom);T._add(Zs(this._container));var U=c.layerPointToContainerPoint(T),Q=V(this.options.autoPanPadding),ce=V(this.options.autoPanPaddingTopLeft||Q),pe=V(this.options.autoPanPaddingBottomRight||Q),Ne=c.getSize(),Be=0,dt=0;U.x+S+pe.x>Ne.x&&(Be=U.x+S-Ne.x+pe.x),U.x-Be-ce.x<0&&(Be=U.x-ce.x),U.y+v+pe.y>Ne.y&&(dt=U.y+v-Ne.y+pe.y),U.y-dt-ce.y<0&&(dt=U.y-ce.y),(Be||dt)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Be,dt]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),v8=function(c,h){return new Bg(c,h)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(c,h,v){return this._initOverlay(Bg,c,h,v).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),en.include({bindPopup:function(c,h){return this._popup=this._initOverlay(Bg,this._popup,c,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Fn||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Cs(c);var h=c.layer||c.target;if(this._popup._source===h&&!(h instanceof Vo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=h,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var Hg=Yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Yi.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Yi.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Yi.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",h=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var h,v,S=this._map,T=this._container,U=S.latLngToContainerPoint(S.getCenter()),Q=S.layerPointToContainerPoint(c),ce=this.options.direction,pe=T.offsetWidth,Ne=T.offsetHeight,Be=V(this.options.offset),dt=this._getAnchor();ce==="top"?(h=pe/2,v=Ne):ce==="bottom"?(h=pe/2,v=0):ce==="center"?(h=pe/2,v=Ne/2):ce==="right"?(h=0,v=Ne/2):ce==="left"?(h=pe,v=Ne/2):Q.x<U.x?(ce="right",h=0,v=Ne/2):(ce="left",h=pe+(Be.x+dt.x)*2,v=Ne/2),c=c.subtract(V(h,v,!0)).add(Be).add(dt),yn(T,"leaflet-tooltip-right"),yn(T,"leaflet-tooltip-left"),yn(T,"leaflet-tooltip-top"),yn(T,"leaflet-tooltip-bottom"),bt(T,"leaflet-tooltip-"+ce),mt(T,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Rn(this._container,c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(h)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),y8=function(c,h){return new Hg(c,h)};Tt.include({openTooltip:function(c,h,v){return this._initOverlay(Hg,c,h,v).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),en.include({bindTooltip:function(c,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hg,this._tooltip,c,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var h=c?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Fn||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&(ut(h,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ut(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var h=c.latlng,v,S;this._tooltip.options.sticky&&c.originalEvent&&(v=this._map.mouseEventToContainerPoint(c.originalEvent),S=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(S)),this._tooltip.setLatLng(h)}});var XC=Qi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var h=c&&c.tagName==="DIV"?c:document.createElement("div"),v=this.options;if(v.html instanceof Element?(cc(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var S=V(v.bgPos);h.style.backgroundPosition=-S.x+"px "+-S.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function x8(c){return new XC(c)}Qi.Default=Ef;var Cf=en.extend({options:{tileSize:256,opacity:1,updateWhenIdle:at.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){b(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),rn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(La(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ao(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof z?c:new z(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var h=this.getPane().children,v=-c(-1/0,1/0),S=0,T=h.length,U;S<T;S++)U=h[S].style.zIndex,h[S]!==this._container&&U&&(v=c(v,+U));isFinite(v)&&(this.options.zIndex=v+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!at.ielt9){Rn(this._container,this.options.opacity);var c=+new Date,h=!1,v=!1;for(var S in this._tiles){var T=this._tiles[S];if(!(!T.current||!T.loaded)){var U=Math.min(1,(c-T.loaded)/200);Rn(T.el,U),U<1?h=!0:(T.active?v=!0:this._onOpaqueTile(T),T.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,h=this.options.maxZoom;if(c!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===c?(this._levels[v].el.style.zIndex=h-Math.abs(c-v),this._onUpdateLevel(v)):(rn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var S=this._levels[c],T=this._map;return S||(S=this._levels[c]={},S.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),S.el.style.zIndex=h,S.origin=T.project(T.unproject(T.getPixelOrigin()),c).round(),S.zoom=c,this._setZoomTransform(S,T.getCenter(),T.getZoom()),m(S.el.offsetWidth),this._onCreateLevel(S)),this._level=S,S}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var c,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)h=this._tiles[c],h.retain=h.current;for(c in this._tiles)if(h=this._tiles[c],h.current&&!h.active){var S=h.coords;this._retainParent(S.x,S.y,S.z,S.z-5)||this._retainChildren(S.x,S.y,S.z,S.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var h in this._tiles)this._tiles[h].coords.z===c&&this._removeTile(h)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)rn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,h,v,S){var T=Math.floor(c/2),U=Math.floor(h/2),Q=v-1,ce=new z(+T,+U);ce.z=+Q;var pe=this._tileCoordsToKey(ce),Ne=this._tiles[pe];return Ne&&Ne.active?(Ne.retain=!0,!0):(Ne&&Ne.loaded&&(Ne.retain=!0),Q>S?this._retainParent(T,U,Q,S):!1)},_retainChildren:function(c,h,v,S){for(var T=2*c;T<2*c+2;T++)for(var U=2*h;U<2*h+2;U++){var Q=new z(T,U);Q.z=v+1;var ce=this._tileCoordsToKey(Q),pe=this._tiles[ce];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);v+1<S&&this._retainChildren(T,U,v+1,S)}},_resetView:function(c){var h=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var h=this.options;return h.minNativeZoom!==void 0&&c<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<c?h.maxNativeZoom:c},_setView:function(c,h,v,S){var T=Math.round(h);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var U=this.options.updateWhenZooming&&T!==this._tileZoom;(!S||U)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(c),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(c,h)},_setZoomTransforms:function(c,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],c,h)},_setZoomTransform:function(c,h,v){var S=this._map.getZoomScale(v,c.zoom),T=c.origin.multiplyBy(S).subtract(this._map._getNewPixelOrigin(h,v)).round();at.any3d?Ki(c.el,T,S):mt(c.el,T)},_resetGrid:function(){var c=this._map,h=c.options.crs,v=this._tileSize=this.getTileSize(),S=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,h.wrapLng[0]],S).x/v.x),Math.ceil(c.project([0,h.wrapLng[1]],S).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([h.wrapLat[0],0],S).y/v.x),Math.ceil(c.project([h.wrapLat[1],0],S).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),S=h.getZoomScale(v,this._tileZoom),T=h.project(c,this._tileZoom).floor(),U=h.getSize().divideBy(S*2);return new q(T.subtract(U),T.add(U))},_update:function(c){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(c===void 0&&(c=h.getCenter()),this._tileZoom!==void 0){var S=this._getTiledPixelBounds(c),T=this._pxBoundsToTileRange(S),U=T.getCenter(),Q=[],ce=this.options.keepBuffer,pe=new q(T.getBottomLeft().subtract([ce,-ce]),T.getTopRight().add([ce,-ce]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ne in this._tiles){var Be=this._tiles[Ne].coords;(Be.z!==this._tileZoom||!pe.contains(new z(Be.x,Be.y)))&&(this._tiles[Ne].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(c,v);return}for(var dt=T.min.y;dt<=T.max.y;dt++)for(var Ct=T.min.x;Ct<=T.max.x;Ct++){var Wr=new z(Ct,dt);if(Wr.z=this._tileZoom,!!this._isValidTile(Wr)){var pr=this._tiles[this._tileCoordsToKey(Wr)];pr?pr.current=!0:Q.push(Wr)}}if(Q.sort(function(ds,Wu){return ds.distanceTo(U)-Wu.distanceTo(U)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ei=document.createDocumentFragment();for(Ct=0;Ct<Q.length;Ct++)this._addTile(Q[Ct],ei);this._level.el.appendChild(ei)}}}},_isValidTile:function(c){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(c.x<v.min.x||c.x>v.max.x)||!h.wrapLat&&(c.y<v.min.y||c.y>v.max.y))return!1}if(!this.options.bounds)return!0;var S=this._tileCoordsToBounds(c);return Pe(this.options.bounds).overlaps(S)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var h=this._map,v=this.getTileSize(),S=c.scaleBy(v),T=S.add(v),U=h.unproject(S,c.z),Q=h.unproject(T,c.z);return[U,Q]},_tileCoordsToBounds:function(c){var h=this._tileCoordsToNwSe(c),v=new me(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var h=c.split(":"),v=new z(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(c){var h=this._tiles[c];h&&(rn(h.el),delete this._tiles[c],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){bt(c,"leaflet-tile");var h=this.getTileSize();c.style.width=h.x+"px",c.style.height=h.y+"px",c.onselectstart=m,c.onmousemove=m,at.ielt9&&this.options.opacity<1&&Rn(c,this.options.opacity)},_addTile:function(c,h){var v=this._getTilePos(c),S=this._tileCoordsToKey(c),T=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(T),this.createTile.length<2&&M(o(this._tileReady,this,c,null,T)),mt(T,v),this._tiles[S]={el:T,coords:c,current:!0},h.appendChild(T),this.fire("tileloadstart",{tile:T,coords:c})},_tileReady:function(c,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:c});var S=this._tileCoordsToKey(c);v=this._tiles[S],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Rn(v.el,0),D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(bt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),at.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var h=new z(this._wrapX?f(c.x,this._wrapX):c.x,this._wrapY?f(c.y,this._wrapY):c.y);return h.z=c.z,h},_pxBoundsToTileRange:function(c){var h=this.getTileSize();return new q(c.min.unscaleBy(h).floor(),c.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function _8(c){return new Cf(c)}var qu=Cf.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,h){this._url=c,h=b(this,h),h.detectRetina&&at.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,h){return this._url===c&&h===void 0&&(h=!0),this._url=c,h||this.redraw(),this},createTile:function(c,h){var v=document.createElement("img");return ut(v,"load",o(this._tileOnLoad,this,h,v)),ut(v,"error",o(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(c),v},getTileUrl:function(c){var h={r:at.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-c.y;this.options.tms&&(h.y=v),h["-y"]=v}return w(this._url,s(h,this.options))},_tileOnLoad:function(c,h){at.ielt9?setTimeout(o(c,this,null,h),0):c(null,h)},_tileOnError:function(c,h,v){var S=this.options.errorTileUrl;S&&h.getAttribute("src")!==S&&(h.src=S),c(v,h)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,S=this.options.zoomOffset;return v&&(c=h-c),c+S},_getSubdomain:function(c){var h=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var c,h;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(h=this._tiles[c].el,h.onload=m,h.onerror=m,!h.complete)){h.src=A;var v=this._tiles[c].coords;rn(h),delete this._tiles[c],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(c){var h=this._tiles[c];if(h)return h.el.setAttribute("src",A),Cf.prototype._removeTile.call(this,c)},_tileReady:function(c,h,v){if(!(!this._map||v&&v.getAttribute("src")===A))return Cf.prototype._tileReady.call(this,c,h,v)}});function JC(c,h){return new qu(c,h)}var eP=qu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,h){this._url=c;var v=s({},this.defaultWmsParams);for(var S in h)S in this.options||(v[S]=h[S]);h=b(this,h);var T=h.detectRetina&&at.retina?2:1,U=this.getTileSize();v.width=U.x*T,v.height=U.y*T,this.wmsParams=v},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,qu.prototype.onAdd.call(this,c)},getTileUrl:function(c){var h=this._tileCoordsToNwSe(c),v=this._crs,S=J(v.project(h[0]),v.project(h[1])),T=S.min,U=S.max,Q=(this._wmsVersion>=1.3&&this._crs===Kn?[T.y,T.x,U.y,U.x]:[T.x,T.y,U.x,U.y]).join(","),ce=qu.prototype.getTileUrl.call(this,c);return ce+N(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(c,h){return s(this.wmsParams,c),h||this.redraw(),this}});function w8(c,h){return new eP(c,h)}qu.WMS=eP,JC.wms=w8;var Ha=en.extend({options:{padding:.1},initialize:function(c){b(this,c),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,h){var v=this._map.getZoomScale(h,this._zoom),S=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,h),U=S.multiplyBy(-v).add(T).subtract(this._map._getNewPixelOrigin(c,h));at.any3d?Ki(this._container,U,v):mt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-c)).round();this._bounds=new q(v,v.add(h.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),tP=Ha.extend({options:{tolerance:0},getEvents:function(){var c=Ha.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ha.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ut(c,"mousemove",this._onMouseMove,this),ut(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ut(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,rn(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var h in this._layers)c=this._layers[h],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ha.prototype._update.call(this);var c=this._bounds,h=this._container,v=c.getSize(),S=at.retina?2:1;mt(h,c.min),h.width=S*v.x,h.height=S*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",at.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Ha.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[u(c)]=c;var h=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var h=c._order,v=h.next,S=h.prev;v?v.prev=S:this._drawLast=S,S?S.next=v:this._drawFirst=v,delete c._order,delete this._layers[u(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var h=c.options.dashArray.split(/[, ]+/),v=[],S,T;for(T=0;T<h.length;T++){if(S=Number(h[T]),isNaN(S))return;v.push(S)}c.options._dashArray=v}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var h=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(c._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(c._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var h=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var S=this._drawFirst;S;S=S.next)c=S.layer,(!h||c._pxBounds&&c._pxBounds.intersects(h))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,h){if(this._drawing){var v,S,T,U,Q=c._parts,ce=Q.length,pe=this._ctx;if(ce){for(pe.beginPath(),v=0;v<ce;v++){for(S=0,T=Q[v].length;S<T;S++)U=Q[v][S],pe[S?"lineTo":"moveTo"](U.x,U.y);h&&pe.closePath()}this._fillStroke(pe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var h=c._point,v=this._ctx,S=Math.max(Math.round(c._radius),1),T=(Math.max(Math.round(c._radiusY),1)||S)/S;T!==1&&(v.save(),v.scale(1,T)),v.beginPath(),v.arc(h.x,h.y/T,S,0,Math.PI*2,!1),T!==1&&v.restore(),this._fillStroke(v,c)}},_fillStroke:function(c,h){var v=h.options;v.fill&&(c.globalAlpha=v.fillOpacity,c.fillStyle=v.fillColor||v.color,c.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(c.setLineDash&&c.setLineDash(h.options&&h.options._dashArray||[]),c.globalAlpha=v.opacity,c.lineWidth=v.weight,c.strokeStyle=v.color,c.lineCap=v.lineCap,c.lineJoin=v.lineJoin,c.stroke())},_onClick:function(c){for(var h=this._map.mouseEventToLayerPoint(c),v,S,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(v))&&(S=v);this._fireEvent(S?[S]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,h)}},_handleMouseOut:function(c){var h=this._hoveredLayer;h&&(yn(this._container,"leaflet-interactive"),this._fireEvent([h],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,h){if(!this._mouseHoverThrottled){for(var v,S,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(S=v);S!==this._hoveredLayer&&(this._handleMouseOut(c),S&&(bt(this._container,"leaflet-interactive"),this._fireEvent([S],c,"mouseover"),this._hoveredLayer=S)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,h,v){this._map._fireDOMEvent(h,v||h.type,c)},_bringToFront:function(c){var h=c._order;if(h){var v=h.next,S=h.prev;if(v)v.prev=S;else return;S?S.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(c)}},_bringToBack:function(c){var h=c._order;if(h){var v=h.next,S=h.prev;if(S)S.next=v;else return;v?v.prev=S:S&&(this._drawLast=S),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(c)}}});function nP(c){return at.canvas?new tP(c):null}var Pf=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),b8={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ha.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var h=c._container=Pf("shape");bt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",c._path=Pf("path"),h.appendChild(c._path),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){var h=c._container;this._container.appendChild(h),c.options.interactive&&c.addInteractiveTarget(h)},_removePath:function(c){var h=c._container;rn(h),c.removeInteractiveTarget(h),delete this._layers[u(c)]},_updateStyle:function(c){var h=c._stroke,v=c._fill,S=c.options,T=c._container;T.stroked=!!S.stroke,T.filled=!!S.fill,S.stroke?(h||(h=c._stroke=Pf("stroke")),T.appendChild(h),h.weight=S.weight+"px",h.color=S.color,h.opacity=S.opacity,S.dashArray?h.dashStyle=E(S.dashArray)?S.dashArray.join(" "):S.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=S.lineCap.replace("butt","flat"),h.joinstyle=S.lineJoin):h&&(T.removeChild(h),c._stroke=null),S.fill?(v||(v=c._fill=Pf("fill")),T.appendChild(v),v.color=S.fillColor||S.color,v.opacity=S.fillOpacity):v&&(T.removeChild(v),c._fill=null)},_updateCircle:function(c){var h=c._point.round(),v=Math.round(c._radius),S=Math.round(c._radiusY||v);this._setPath(c,c._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+S+" 0,"+65535*360)},_setPath:function(c,h){c._path.v=h},_bringToFront:function(c){La(c._container)},_bringToBack:function(c){Ao(c._container)}},qg=at.vml?Pf:Ce,Tf=Ha.extend({_initContainer:function(){this._container=qg("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qg("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rn(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ha.prototype._update.call(this);var c=this._bounds,h=c.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),mt(v,c.min),v.setAttribute("viewBox",[c.min.x,c.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(c){var h=c._path=qg("path");c.options.className&&bt(h,c.options.className),c.options.interactive&&bt(h,"leaflet-interactive"),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){rn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[u(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var h=c._path,v=c.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(c,h){this._setPath(c,he(c._parts,h))},_updateCircle:function(c){var h=c._point,v=Math.max(Math.round(c._radius),1),S=Math.max(Math.round(c._radiusY),1)||v,T="a"+v+","+S+" 0 1,0 ",U=c._empty()?"M0 0":"M"+(h.x-v)+","+h.y+T+v*2+",0 "+T+-v*2+",0 ";this._setPath(c,U)},_setPath:function(c,h){c._path.setAttribute("d",h)},_bringToFront:function(c){La(c._path)},_bringToBack:function(c){Ao(c._path)}});at.vml&&Tf.include(b8);function rP(c){return at.svg||at.vml?new Tf(c):null}Tt.include({getRenderer:function(c){var h=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var h=this._paneRenderers[c];return h===void 0&&(h=this._createRenderer({pane:c}),this._paneRenderers[c]=h),h},_createRenderer:function(c){return this.options.preferCanvas&&nP(c)||rP(c)}});var sP=Bu.extend({initialize:function(c,h){Bu.prototype.initialize.call(this,this._boundsToLatLngs(c),h)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Pe(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function j8(c,h){return new sP(c,h)}Tf.create=qg,Tf.pointsToPath=he,Ba.geometryToLayer=Fg,Ba.coordsToLatLng=V_,Ba.coordsToLatLngs=Vg,Ba.latLngToCoords=$_,Ba.latLngsToCoords=$g,Ba.getFeature=Hu,Ba.asFeature=zg,Tt.mergeOptions({boxZoom:!0});var iP=Ps.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),yi(),hf(),this._startPoint=this._map.mouseEventToContainerPoint(c),ut(document,{contextmenu:Cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var h=new q(this._point,this._startPoint),v=h.getSize();mt(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(rn(this._box),yn(this._container,"leaflet-crosshair")),xi(),ff(),Jt(document,{contextmenu:Cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tt.addInitHook("addHandler","boxZoom",iP),Tt.mergeOptions({doubleClickZoom:!0});var aP=Ps.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var h=this._map,v=h.getZoom(),S=h.options.zoomDelta,T=c.originalEvent.shiftKey?v-S:v+S;h.options.doubleClickZoom==="center"?h.setZoom(T):h.setZoomAround(c.containerPoint,T)}});Tt.addInitHook("addHandler","doubleClickZoom",aP),Tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oP=Ps.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new _i(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yn(this._map._container,"leaflet-grab"),yn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Pe(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,h){return c-(c-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;c.x<h.min.x&&(c.x=this._viscousLimit(c.x,h.min.x)),c.y<h.min.y&&(c.y=this._viscousLimit(c.y,h.min.y)),c.x>h.max.x&&(c.x=this._viscousLimit(c.x,h.max.x)),c.y>h.max.y&&(c.y=this._viscousLimit(c.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,h=Math.round(c/2),v=this._initialWorldOffset,S=this._draggable._newPos.x,T=(S-h+v)%c+h-v,U=(S+h+v)%c-h-v,Q=Math.abs(T+v)<Math.abs(U+v)?T:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(c){var h=this._map,v=h.options,S=!v.inertia||c.noInertia||this._times.length<2;if(h.fire("dragend",c),S)h.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,Q=v.easeLinearity,ce=T.multiplyBy(Q/U),pe=ce.distanceTo([0,0]),Ne=Math.min(v.inertiaMaxSpeed,pe),Be=ce.multiplyBy(Ne/pe),dt=Ne/(v.inertiaDeceleration*Q),Ct=Be.multiplyBy(-dt/2).round();!Ct.x&&!Ct.y?h.fire("moveend"):(Ct=h._limitOffset(Ct,h.options.maxBounds),M(function(){h.panBy(Ct,{duration:dt,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",oP),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var lP=Ps.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ut(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,h=document.documentElement,v=c.scrollTop||h.scrollTop,S=c.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(S,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var h=this._panKeys={},v=this.keyCodes,S,T;for(S=0,T=v.left.length;S<T;S++)h[v.left[S]]=[-1*c,0];for(S=0,T=v.right.length;S<T;S++)h[v.right[S]]=[c,0];for(S=0,T=v.down.length;S<T;S++)h[v.down[S]]=[0,c];for(S=0,T=v.up.length;S<T;S++)h[v.up[S]]=[0,-1*c]},_setZoomDelta:function(c){var h=this._zoomKeys={},v=this.keyCodes,S,T;for(S=0,T=v.zoomIn.length;S<T;S++)h[v.zoomIn[S]]=c;for(S=0,T=v.zoomOut.length;S<T;S++)h[v.zoomOut[S]]=-c},_addHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var h=c.keyCode,v=this._map,S;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(S=this._panKeys[h],c.shiftKey&&(S=V(S).multiplyBy(3)),v.options.maxBounds&&(S=v._limitOffset(V(S),v.options.maxBounds)),v.options.worldCopyJump){var T=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(S)));v.panTo(T)}else v.panBy(S)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Cs(c)}}});Tt.addInitHook("addHandler","keyboard",lP),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cP=Ps.extend({addHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var h=Tg(c),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var S=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),S),Cs(c)},_performZoom:function(){var c=this._map,h=c.getZoom(),v=this._map.options.zoomSnap||0;c._stop();var S=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(S))))/Math.LN2,U=v?Math.ceil(T/v)*v:T,Q=c._limitZoom(h+(this._delta>0?U:-U))-h;this._delta=0,this._startTime=null,Q&&(c.options.scrollWheelZoom==="center"?c.setZoom(h+Q):c.setZoomAround(this._lastMousePos,h+Q))}});Tt.addInitHook("addHandler","scrollWheelZoom",cP);var N8=600;Tt.mergeOptions({tapHold:at.touchNative&&at.safari&&at.mobile,tapTolerance:15});var uP=Ps.extend({addHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var h=c.touches[0];this._startPos=this._newPos=new z(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ut(document,"touchend",Sn),ut(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),N8),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Jt(document,"touchend",Sn),Jt(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(c){var h=c.touches[0];this._newPos=new z(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,h){var v=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});Tt.addInitHook("addHandler","tapHold",uP),Tt.mergeOptions({touchZoom:at.touch,bounceAtZoomLimits:!0});var dP=Ps.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yn(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var h=this._map;if(!(!c.touches||c.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(c.touches[0]),S=h.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(S)._divideBy(2))),this._startDist=v.distanceTo(S),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),Sn(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(c.touches[0]),S=h.mouseEventToContainerPoint(c.touches[1]),T=v.distanceTo(S)/this._startDist;if(this._zoom=h.getScaleZoom(T,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&T<1||this._zoom>h.getMaxZoom()&&T>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var U=v._add(S)._divideBy(2)._subtract(this._centerPoint);if(T===1&&U.x===0&&U.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var Q=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(Q,this,!0),Sn(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",dP),Tt.BoxZoom=iP,Tt.DoubleClickZoom=aP,Tt.Drag=oP,Tt.Keyboard=lP,Tt.ScrollWheelZoom=cP,Tt.TapHold=uP,Tt.TouchZoom=dP,n.Bounds=q,n.Browser=at,n.CRS=xe,n.Canvas=tP,n.Circle=F_,n.CircleMarker=Lg,n.Class=G,n.Control=us,n.DivIcon=XC,n.DivOverlay=Yi,n.DomEvent=kg,n.DomUtil=Cg,n.Draggable=_i,n.Evented=K,n.FeatureGroup=Fn,n.GeoJSON=Ba,n.GridLayer=Cf,n.Handler=Ps,n.Icon=Qi,n.ImageOverlay=Ug,n.LatLng=Me,n.LatLngBounds=me,n.Layer=en,n.LayerGroup=En,n.LineUtil=W,n.Map=Tt,n.Marker=Dg,n.Mixin=uc,n.Path=Vo,n.Point=z,n.PolyUtil=$u,n.Polygon=Bu,n.Polyline=Ua,n.Popup=Bg,n.PosAnimation=_f,n.Projection=Le,n.Rectangle=sP,n.Renderer=Ha,n.SVG=Tf,n.SVGOverlay=YC,n.TileLayer=qu,n.Tooltip=Hg,n.Transformation=ie,n.Util=k,n.VideoOverlay=QC,n.bind=o,n.bounds=J,n.canvas=nP,n.circle=u8,n.circleMarker=c8,n.control=qr,n.divIcon=x8,n.extend=s,n.featureGroup=Uu,n.geoJSON=ZC,n.geoJson=f8,n.gridLayer=_8,n.icon=o8,n.imageOverlay=m8,n.latLng=oe,n.latLngBounds=Pe,n.layerGroup=Fo,n.map=Ou,n.marker=l8,n.point=V,n.polygon=h8,n.polyline=d8,n.popup=v8,n.rectangle=j8,n.setOptions=b,n.stamp=u,n.svg=rP,n.svgOverlay=g8,n.tileLayer=JC,n.tooltip=y8,n.transformation=fe,n.version=r,n.videoOverlay=p8;var S8=window.L;n.noConflict=function(){return window.L=S8,this},window.L=n})})(uj,uj.exports);var d_=uj.exports;const Yh=Pa(d_);function T5(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function k5(t,e){return e==null?function(r,s){const a=x.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=x.useRef();a.current||(a.current=t(r,s));const o=x.useRef(r),{instance:l}=a.current;return x.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),a}}function mce(t,e){x.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function R5(t){return function(n){const r=C5(),s=t(P5(n,r),r);return oce(r.map,n.attribution),fce(s.current,n.eventHandlers),mce(s.current,r),s}}function pce(t,e){const n=k5(t,e),r=R5(n);return dce(r)}function gce(t,e){const n=k5(t,e),r=R5(n);return hce(r)}function vce(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function yce(){return C5().map}function YE(t){const e=yce();return x.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function dj(){return dj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dj.apply(this,arguments)}function xce({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:o,style:l,whenReady:u,zoom:d,...f},m){const[p]=x.useState({className:s,id:a,style:l}),[y,j]=x.useState(null);x.useImperativeHandle(m,()=>(y==null?void 0:y.map)??null,[y]);const b=x.useCallback(_=>{if(_!==null&&y===null){const w=new d_.Map(_,f);n!=null&&d!=null?w.setView(n,d):t!=null&&w.fitBounds(t,e),u!=null&&w.whenReady(u),j(cce(w))}},[]);x.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const N=y?ue.createElement(E5,{value:y},r):o??null;return ue.createElement("div",dj({},p,{ref:b}),N)}const XE=x.forwardRef(xce),JE=pce(function({position:e,...n},r){const s=new d_.Marker(e,n);return T5(s,uce(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),eC=gce(function({url:e,...n},r){const s=new d_.TileLayer(e,P5(n,r));return T5(s,r)},function(e,n,r){vce(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete Yh.Icon.Default.prototype._getIconUrl;Yh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const _ce=({open:t,onOpenChange:e,listing:n})=>{var M;const{currentUser:r,userProfile:s}=Nn(),{createPaymentRequest:a,loading:o}=c_(),[l,u]=x.useState("method"),[d,f]=x.useState(null),[m,p]=x.useState({}),[y,j]=x.useState({location:"",date:void 0,time:"",notes:""}),[b,N]=x.useState(!1),[_,w]=x.useState(null),E=(D,k)=>{f(D),p(k),u("details")},R=async()=>{if(!(!r||!d))try{const D=y.date&&y.time?new Date(`${dr(y.date,"yyyy-MM-dd")} ${y.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:d,meetingLocation:y.location,meetingDateTime:D,paymentDetails:m,notes:y.notes}),e(!1),A()}catch(D){console.error("Erreur lors de la création de la demande:",D)}},A=()=>{u("method"),f(null),p({}),j({location:"",date:void 0,time:"",notes:""})},B=(D,k)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:k||"EUR"}).format(D),I=D=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[D]||D;async function F(D,k){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${D}&lon=${k}`)).json()).display_name||""}function $(){return YE({click:async D=>{w([D.latlng.lat,D.latlng.lng]),N(!0);const k=await F(D.latlng.lat,D.latlng.lng);j(G=>({...G,location:k})),N(!1),be.success("Adresse détectée automatiquement !")}}),_?i.jsx(JE,{position:_}):null}const P=()=>{if(!navigator.geolocation){be.error("La géolocalisation n'est pas supportée par ce navigateur.");return}N(!0),navigator.geolocation.getCurrentPosition(async D=>{const{latitude:k,longitude:G}=D.coords;w([k,G]);const se=await F(k,G);se&&j(ae=>({...ae,location:se})),N(!1)},()=>{be.error("Impossible d'accéder à la position."),N(!1)})};return i.jsx(wa,{open:t,onOpenChange:e,children:i.jsxs(Mi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ba,{children:[i.jsxs(Di,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-5 h-5"}),"Demande de paiement"]}),i.jsxs(Lc,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[i.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),i.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[((M=n.images)==null?void 0:M[0])&&i.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:n.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),i.jsx("p",{className:"text-lg font-bold text-primary",children:B(n.price,n.currency||"EUR")})]})]})}),l==="method"&&i.jsx(N5,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:E,selectedMethod:d}),l==="details"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(At,{className:"w-5 h-5 text-green-600"}),i.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",I(d)]})]}),d==="cash"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(Lr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(rt,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:y.location,onChange:D=>j(k=>({...k,location:D.target.value})),className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:P,disabled:b,title:"Détecter ma position",children:b?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]})]}),i.jsx("div",{className:"mt-3",children:i.jsxs(XE,{center:_||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(eC,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx($,{})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{children:"Date de rencontre"}),i.jsxs(Tle,{children:[i.jsx(kle,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[i.jsx(ii,{className:"mr-2 h-4 w-4"}),y.date?dr(y.date,"PPP",{locale:Vr}):i.jsx("span",{children:"Choisir une date"})]})}),i.jsx(c5,{className:"w-auto p-0",children:i.jsx(YF,{mode:"single",selected:y.date,onSelect:D=>j(k=>({...k,date:D})),disabled:D=>D<new Date,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meeting-time",children:"Heure de rencontre"}),i.jsx(rt,{id:"meeting-time",type:"time",value:y.time,onChange:D=>j(k=>({...k,time:D.target.value})),className:"mt-1"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),i.jsx(ui,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:y.notes,onChange:D=>j(k=>({...k,notes:D.target.value})),rows:3,className:"mt-1"})]}),i.jsxs(Wt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Ht,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(te,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),i.jsx(te,{onClick:()=>u("confirmation"),className:"flex-1",disabled:d==="cash"&&!y.location,children:"Continuer"})]})]}),l==="confirmation"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),i.jsx("p",{className:"font-medium",children:I(d)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),i.jsx("p",{className:"font-medium",children:B(n.price,n.currency||"EUR")})]}),d==="cash"&&y.location&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),i.jsx("p",{className:"font-medium",children:y.location})]}),y.date&&y.time&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),i.jsxs("p",{className:"font-medium",children:[dr(y.date,"PPP",{locale:Vr})," à ",y.time]})]})]})]}),y.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),i.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:y.notes})]})]}),i.jsxs(Wt,{children:[i.jsx(Dl,{className:"h-4 w-4"}),i.jsx(Gt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(te,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),i.jsx(te,{onClick:R,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},wce=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=Nn(),{createConversation:s,setCurrentConversation:a,conversations:o}=r_(),l=fr(),[u,d]=x.useState(!1),[f,m]=x.useState(!1),[p,y]=x.useState(""),[j,b]=x.useState(""),[N,_]=x.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const w=o.find(I=>I.listingId===t.id&&I.participants.includes((n==null?void 0:n.uid)||"")&&I.participants.includes(t.sellerId)),E=()=>{if(!n){l("/auth");return}if(w){a(w),l("/messages");return}const I=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;y(I),b((r==null?void 0:r.email)||""),d(!0)},R=()=>{if(!n){l("/auth");return}m(!0)},A=async()=>{var I;if(!p.trim()||!j.trim()||!n||!r){be.error("Veuillez remplir tous les champs");return}_(!0);try{const F=await s(t.id,t.title,t.price,(I=t.images)==null?void 0:I[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},p.trim());d(!1),be.success(i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Message envoyé !"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),i.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>{be.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",i.jsx(cp,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(F){console.error("Erreur lors de l'envoi du message:",F),be.error("Erreur lors de l'envoi du message")}finally{_(!1)}},B=(I,F)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const $=F||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:$}).format(I)}catch{return`${I} €`}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{onClick:E,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[i.jsx(jn,{className:"w-4 h-4 mr-2"}),w?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&i.jsxs(te,{onClick:R,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Payer"]})]}),i.jsx(wa,{open:u,onOpenChange:d,children:i.jsxs(Mi,{className:"max-w-md",children:[i.jsx(ba,{children:i.jsxs(Di,{className:"flex items-center gap-2",children:[i.jsx(jn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs(_o,{className:"w-8 h-8",children:[i.jsx(wo,{src:t.sellerAvatar||void 0}),i.jsx(bo,{children:t.sellerName[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),i.jsx("p",{className:"text-sm font-medium",children:t.title}),i.jsx("p",{className:"text-sm text-primary font-semibold",children:B(t.price,t.currency)})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"contact-email",children:"Votre email"}),i.jsx(rt,{id:"contact-email",type:"email",value:j,onChange:I=>b(I.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"contact-message",children:"Votre message"}),i.jsx(ui,{id:"contact-message",value:p,onChange:I=>y(I.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),i.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Dl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),i.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Annuler"}),i.jsx(te,{onClick:A,disabled:N||!p.trim()||!j.trim(),className:"flex-1",children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(nh,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),i.jsx(_ce,{open:f,onOpenChange:m,listing:t})]})},bce=()=>{var w;const{id:t}=XN(),e=fr(),{currentUser:n}=Nn(),{currentListing:r,loading:s,fetchListingById:a}=s_(),{fetchUserFavorites:o}=nF(),[l,u]=x.useState(0);if(x.useEffect(()=>{t&&a(t)},[t,a]),x.useEffect(()=>{n&&o(n.uid)},[n,o]),s)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(Mn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),i.jsx(te,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const d=r,f=(n==null?void 0:n.uid)===d.sellerId,m=(E,R)=>{if(d.transactionType==="donation")return"Gratuit";if(d.transactionType==="exchange")return"Échange";const A=R||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:A}).format(E)}catch{return`${E} €`}},p=E=>{switch(E){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return E}},y=E=>{switch(E){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=()=>{switch(d.transactionType){case"donation":return i.jsx(th,{className:"w-4 h-4"});case"exchange":return i.jsx(vo,{className:"w-4 h-4"});case"service":return i.jsx(Uh,{className:"w-4 h-4"});default:return i.jsx(rx,{className:"w-4 h-4"})}},b=()=>{switch(d.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},N=()=>{d.images&&d.images.length>1&&u(E=>E===d.images.length-1?0:E+1)},_=()=>{d.images&&d.images.length>1&&u(E=>E===0?d.images.length-1:E-1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"border-b border-border bg-muted/30",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(ze,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),i.jsx("span",{children:"/"}),i.jsx(ze,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-foreground",children:d.title})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[i.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:d.images&&d.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:_,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:i.jsx(CY,{className:"w-6 h-6"})}),i.jsx("div",{onClick:N,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:i.jsx(ca,{className:"w-6 h-6"})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",d.images.length]})]}),i.jsxs(wa,{children:[i.jsx(Dd,{asChild:!0,children:i.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:i.jsx(Oc,{className:"w-5 h-5"})})}),i.jsxs(Mi,{className:"max-w-4xl",children:[i.jsx(Di,{children:"Image en plein écran de l'annonce"}),i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Oc,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Aucune image disponible"})]})})}),d.images&&d.images.length>1&&i.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.images.map((E,R)=>i.jsx("button",{onClick:()=>u(R),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${R===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:i.jsx("img",{src:E,alt:`${d.title} ${R+1}`,className:"w-full h-full object-cover"})},R))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ve,{children:i.jsx(ye,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ot,{className:"bg-primary/10 text-primary border-primary/20",children:[j(),i.jsx("span",{className:"ml-1",children:b()})]}),d.sellerVerified&&i.jsxs(ot,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsxs("div",{className:"text-3xl font-bold text-primary",children:[m(d.price,d.currency),d.transactionType==="service"&&i.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),d.transactionType==="exchange"&&d.exchangeFor&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[i.jsx(vo,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),i.jsx("p",{className:"text-purple-700 mt-1",children:d.exchangeFor})]}),d.aiPriceEstimate&&d.transactionType==="sale"&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[i.jsx(Qp,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),i.jsxs("p",{className:"text-green-700 text-sm",children:[d.aiPriceEstimate.min,"€ - ",d.aiPriceEstimate.max,"€",i.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(d.aiPriceEstimate.confidence*100),"%)"]})]})]}),i.jsx("div",{className:"space-y-3",children:f?i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{to:`/edit-listing/${d.id}`,children:i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(ss,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):i.jsxs(i.Fragment,{children:[i.jsx(wce,{listing:d,className:"w-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(rF,{listing:d,size:"lg",showText:!1}),i.jsx(sF,{listing:d,size:"lg",showText:!1})]}),i.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:i.jsx(Cc,{className:"w-5 h-5"})})]})]})})]})})}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsx(Je,{className:"text-lg",children:"Vendeur"})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(_o,{className:"w-12 h-12",children:[i.jsx(wo,{src:d.sellerAvatar||void 0}),i.jsx(bo,{children:(w=d.sellerName[0])==null?void 0:w.toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:d.sellerName}),d.sellerVerified&&i.jsx(Ht,{className:"w-4 h-4 text-green-600"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d.sellerUniversity})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"23"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"98%"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),d.environmentalImpact&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[i.jsx(Oi,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",d.environmentalImpact.co2Saved," kg CO₂"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(eh,{className:"w-4 h-4"}),i.jsxs("span",{children:[d.views," vues"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Hn,{className:"w-4 h-4"}),i.jsx("span",{children:Qh(d.createdAt,{addSuffix:!0,locale:Vr})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),i.jsx("span",{children:d.location.city})]})]})]}),i.jsx(ot,{className:y(d.condition),children:p(d.condition)})]})}),i.jsx(ye,{children:i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx("p",{className:"whitespace-pre-wrap",children:d.description})})})]}),d.tags&&d.tags.length>0&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsx(Je,{className:"text-lg",children:"Tags"})}),i.jsx(ye,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((E,R)=>i.jsx(ot,{variant:"secondary",children:E},R))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[i.jsx(Lr,{className:"w-5 h-5"}),"Localisation"]})}),i.jsxs(ye,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:d.location.city}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.location.state,", ",d.location.country]})]}),d.location.campus&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Campus"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.campus})]}),d.location.university&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Université"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.university})]})]})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[i.jsx(Ht,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(At,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Dl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var dg=t=>t.type==="checkbox",Pc=t=>t instanceof Date,Xr=t=>t==null;const I5=t=>typeof t=="object";var qn=t=>!Xr(t)&&!Array.isArray(t)&&I5(t)&&!Pc(t),jce=t=>qn(t)&&t.target?dg(t.target)?t.target.checked:t.target.value:t,Nce=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Sce=(t,e)=>t.has(Nce(e)),Ece=t=>{const e=t.constructor&&t.constructor.prototype;return qn(e)&&e.hasOwnProperty("isPrototypeOf")},tC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ar(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(tC&&(t instanceof Blob||r))&&(n||qn(t)))if(e=n?[]:{},!n&&!Ece(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Ar(t[s]));else return t;return e}var h_=t=>/^\w*$/.test(t),Xn=t=>t===void 0,nC=t=>Array.isArray(t)?t.filter(Boolean):[],rC=t=>nC(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ye=(t,e,n)=>{if(!e||!qn(t))return n;const r=(h_(e)?[e]:rC(e)).reduce((s,a)=>Xr(s)?s:s[a],t);return Xn(r)||r===t?Xn(t[e])?n:t[e]:r},ta=t=>typeof t=="boolean",tn=(t,e,n)=>{let r=-1;const s=h_(e)?[e]:rC(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let u=n;if(r!==o){const d=t[l];u=qn(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}};const cR={BLUR:"blur",FOCUS_OUT:"focusout"},Ti={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ka={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cce=ue.createContext(null);Cce.displayName="HookFormContext";var Pce=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ti.all&&(e._proxyFormState[o]=!r||Ti.all),t[o]}});return s};const Tce=typeof window<"u"?x.useLayoutEffect:x.useEffect;var ha=t=>typeof t=="string",kce=(t,e,n,r,s)=>ha(t)?(r&&e.watch.add(t),Ye(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ye(n,a))):(r&&(e.watchAll=!0),n),A5=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Cm=t=>Array.isArray(t)?t:[t],uR=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},hj=t=>Xr(t)||!I5(t);function al(t,e){if(hj(t)||hj(e))return t===e;if(Pc(t)&&Pc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Pc(a)&&Pc(o)||qn(a)&&qn(o)||Array.isArray(a)&&Array.isArray(o)?!al(a,o):a!==o)return!1}}return!0}var fs=t=>qn(t)&&!Object.keys(t).length,sC=t=>t.type==="file",ki=t=>typeof t=="function",vx=t=>{if(!tC)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},O5=t=>t.type==="select-multiple",iC=t=>t.type==="radio",Rce=t=>iC(t)||dg(t),nb=t=>vx(t)&&t.isConnected;function Ice(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Xn(t)?r++:t[e[r++]];return t}function Ace(t){for(const e in t)if(t.hasOwnProperty(e)&&!Xn(t[e]))return!1;return!0}function ir(t,e){const n=Array.isArray(e)?e:h_(e)?[e]:rC(e),r=n.length===1?t:Ice(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(qn(r)&&fs(r)||Array.isArray(r)&&Ace(r))&&ir(t,n.slice(0,-1)),t}var M5=t=>{for(const e in t)if(ki(t[e]))return!0;return!1};function yx(t,e={}){const n=Array.isArray(t);if(qn(t)||n)for(const r in t)Array.isArray(t[r])||qn(t[r])&&!M5(t[r])?(e[r]=Array.isArray(t[r])?[]:{},yx(t[r],e[r])):Xr(t[r])||(e[r]=!0);return e}function D5(t,e,n){const r=Array.isArray(t);if(qn(t)||r)for(const s in t)Array.isArray(t[s])||qn(t[s])&&!M5(t[s])?Xn(e)||hj(n[s])?n[s]=Array.isArray(t[s])?yx(t[s],[]):{...yx(t[s])}:D5(t[s],Xr(e)?{}:e[s],n[s]):n[s]=!al(t[s],e[s]);return n}var Hf=(t,e)=>D5(t,e,yx(e));const dR={value:!1,isValid:!1},hR={value:!0,isValid:!0};var L5=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Xn(t[0].attributes.value)?Xn(t[0].value)||t[0].value===""?hR:{value:t[0].value,isValid:!0}:hR:dR}return dR},F5=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Xn(t)?t:e?t===""?NaN:t&&+t:n&&ha(t)?new Date(t):r?r(t):t;const fR={isValid:!1,value:null};var V5=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,fR):fR;function mR(t){const e=t.ref;return sC(e)?e.files:iC(e)?V5(t.refs).value:O5(e)?[...e.selectedOptions].map(({value:n})=>n):dg(e)?L5(t.refs).value:F5(Xn(e.value)?t.ref.value:e.value,t)}var Oce=(t,e,n,r)=>{const s={};for(const a of t){const o=Ye(e,a);o&&tn(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},xx=t=>t instanceof RegExp,qf=t=>Xn(t)?t:xx(t)?t.source:qn(t)?xx(t.value)?t.value.source:t.value:t,pR=t=>({isOnSubmit:!t||t===Ti.onSubmit,isOnBlur:t===Ti.onBlur,isOnChange:t===Ti.onChange,isOnAll:t===Ti.all,isOnTouch:t===Ti.onTouched});const gR="AsyncFunction";var Mce=t=>!!t&&!!t.validate&&!!(ki(t.validate)&&t.validate.constructor.name===gR||qn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===gR)),Dce=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),vR=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Pm=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=Ye(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Pm(l,e))break}else if(qn(l)&&Pm(l,e))break}}};function yR(t,e,n){const r=Ye(t,n);if(r||h_(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ye(e,a),l=Ye(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var Lce=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return fs(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ti.all))},Fce=(t,e,n)=>!t||!e||t===e||Cm(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Vce=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,$ce=(t,e)=>!nC(Ye(t,e)).length&&ir(t,e),zce=(t,e,n)=>{const r=Cm(Ye(t,n));return tn(r,"root",e[n]),tn(t,n,r),t},ly=t=>ha(t);function xR(t,e,n="validate"){if(ly(t)||Array.isArray(t)&&t.every(ly)||ta(t)&&!t)return{type:n,message:ly(t)?t:"",ref:e}}var Ju=t=>qn(t)&&!xx(t)?t:{value:t,message:""},_R=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:u,maxLength:d,minLength:f,min:m,max:p,pattern:y,validate:j,name:b,valueAsNumber:N,mount:_}=t._f,w=Ye(n,b);if(!_||e.has(b))return{};const E=l?l[0]:o,R=D=>{s&&E.reportValidity&&(E.setCustomValidity(ta(D)?"":D||""),E.reportValidity())},A={},B=iC(o),I=dg(o),F=B||I,$=(N||sC(o))&&Xn(o.value)&&Xn(w)||vx(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,P=A5.bind(null,b,r,A),M=(D,k,G,se=Ka.maxLength,ae=Ka.minLength)=>{const K=D?k:G;A[b]={type:D?se:ae,message:K,ref:o,...P(D?se:ae,K)}};if(a?!Array.isArray(w)||!w.length:u&&(!F&&($||Xr(w))||ta(w)&&!w||I&&!L5(l).isValid||B&&!V5(l).isValid)){const{value:D,message:k}=ly(u)?{value:!!u,message:u}:Ju(u);if(D&&(A[b]={type:Ka.required,message:k,ref:E,...P(Ka.required,k)},!r))return R(k),A}if(!$&&(!Xr(m)||!Xr(p))){let D,k;const G=Ju(p),se=Ju(m);if(!Xr(w)&&!isNaN(w)){const ae=o.valueAsNumber||w&&+w;Xr(G.value)||(D=ae>G.value),Xr(se.value)||(k=ae<se.value)}else{const ae=o.valueAsDate||new Date(w),K=V=>new Date(new Date().toDateString()+" "+V),z=o.type=="time",H=o.type=="week";ha(G.value)&&w&&(D=z?K(w)>K(G.value):H?w>G.value:ae>new Date(G.value)),ha(se.value)&&w&&(k=z?K(w)<K(se.value):H?w<se.value:ae<new Date(se.value))}if((D||k)&&(M(!!D,G.message,se.message,Ka.max,Ka.min),!r))return R(A[b].message),A}if((d||f)&&!$&&(ha(w)||a&&Array.isArray(w))){const D=Ju(d),k=Ju(f),G=!Xr(D.value)&&w.length>+D.value,se=!Xr(k.value)&&w.length<+k.value;if((G||se)&&(M(G,D.message,k.message),!r))return R(A[b].message),A}if(y&&!$&&ha(w)){const{value:D,message:k}=Ju(y);if(xx(D)&&!w.match(D)&&(A[b]={type:Ka.pattern,message:k,ref:o,...P(Ka.pattern,k)},!r))return R(k),A}if(j){if(ki(j)){const D=await j(w,n),k=xR(D,E);if(k&&(A[b]={...k,...P(Ka.validate,k.message)},!r))return R(k.message),A}else if(qn(j)){let D={};for(const k in j){if(!fs(D)&&!r)break;const G=xR(await j[k](w,n),E,k);G&&(D={...G,...P(k,G.message)},R(G.message),r&&(A[b]=D))}if(!fs(D)&&(A[b]={ref:E,...D},!r))return A}}return R(!0),A};const Uce={mode:Ti.onSubmit,reValidateMode:Ti.onChange,shouldFocusError:!0};function Bce(t={}){let e={...Uce,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ki(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=qn(e.defaultValues)||qn(e.values)?Ar(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Ar(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...f};const p={array:uR(),state:uR()},y=e.criteriaMode===Ti.all,j=Z=>re=>{clearTimeout(d),d=setTimeout(Z,re)},b=async Z=>{if(!e.disabled&&(f.isValid||m.isValid||Z)){const re=e.resolver?fs((await I()).errors):await $(r,!0);re!==n.isValid&&p.state.next({isValid:re})}},N=(Z,re)=>{!e.disabled&&(f.isValidating||f.validatingFields||m.isValidating||m.validatingFields)&&((Z||Array.from(l.mount)).forEach(de=>{de&&(re?tn(n.validatingFields,de,re):ir(n.validatingFields,de))}),p.state.next({validatingFields:n.validatingFields,isValidating:!fs(n.validatingFields)}))},_=(Z,re=[],de,Te,Re=!0,Se=!0)=>{if(Te&&de&&!e.disabled){if(o.action=!0,Se&&Array.isArray(Ye(r,Z))){const Ve=de(Ye(r,Z),Te.argA,Te.argB);Re&&tn(r,Z,Ve)}if(Se&&Array.isArray(Ye(n.errors,Z))){const Ve=de(Ye(n.errors,Z),Te.argA,Te.argB);Re&&tn(n.errors,Z,Ve),$ce(n.errors,Z)}if((f.touchedFields||m.touchedFields)&&Se&&Array.isArray(Ye(n.touchedFields,Z))){const Ve=de(Ye(n.touchedFields,Z),Te.argA,Te.argB);Re&&tn(n.touchedFields,Z,Ve)}(f.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Hf(s,a)),p.state.next({name:Z,isDirty:M(Z,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else tn(a,Z,re)},w=(Z,re)=>{tn(n.errors,Z,re),p.state.next({errors:n.errors})},E=Z=>{n.errors=Z,p.state.next({errors:n.errors,isValid:!1})},R=(Z,re,de,Te)=>{const Re=Ye(r,Z);if(Re){const Se=Ye(a,Z,Xn(de)?Ye(s,Z):de);Xn(Se)||Te&&Te.defaultChecked||re?tn(a,Z,re?Se:mR(Re._f)):G(Z,Se),o.mount&&b()}},A=(Z,re,de,Te,Re)=>{let Se=!1,Ve=!1;const We={name:Z};if(!e.disabled){if(!de||Te){(f.isDirty||m.isDirty)&&(Ve=n.isDirty,n.isDirty=We.isDirty=M(),Se=Ve!==We.isDirty);const nt=al(Ye(s,Z),re);Ve=!!Ye(n.dirtyFields,Z),nt?ir(n.dirtyFields,Z):tn(n.dirtyFields,Z,!0),We.dirtyFields=n.dirtyFields,Se=Se||(f.dirtyFields||m.dirtyFields)&&Ve!==!nt}if(de){const nt=Ye(n.touchedFields,Z);nt||(tn(n.touchedFields,Z,de),We.touchedFields=n.touchedFields,Se=Se||(f.touchedFields||m.touchedFields)&&nt!==de)}Se&&Re&&p.state.next(We)}return Se?We:{}},B=(Z,re,de,Te)=>{const Re=Ye(n.errors,Z),Se=(f.isValid||m.isValid)&&ta(re)&&n.isValid!==re;if(e.delayError&&de?(u=j(()=>w(Z,de)),u(e.delayError)):(clearTimeout(d),u=null,de?tn(n.errors,Z,de):ir(n.errors,Z)),(de?!al(Re,de):Re)||!fs(Te)||Se){const Ve={...Te,...Se&&ta(re)?{isValid:re}:{},errors:n.errors,name:Z};n={...n,...Ve},p.state.next(Ve)}},I=async Z=>{N(Z,!0);const re=await e.resolver(a,e.context,Oce(Z||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return N(Z),re},F=async Z=>{const{errors:re}=await I(Z);if(Z)for(const de of Z){const Te=Ye(re,de);Te?tn(n.errors,de,Te):ir(n.errors,de)}else n.errors=re;return re},$=async(Z,re,de={valid:!0})=>{for(const Te in Z){const Re=Z[Te];if(Re){const{_f:Se,...Ve}=Re;if(Se){const We=l.array.has(Se.name),nt=Re._f&&Mce(Re._f);nt&&f.validatingFields&&N([Te],!0);const Xt=await _R(Re,l.disabled,a,y,e.shouldUseNativeValidation&&!re,We);if(nt&&f.validatingFields&&N([Te]),Xt[Se.name]&&(de.valid=!1,re))break;!re&&(Ye(Xt,Se.name)?We?zce(n.errors,Xt,Se.name):tn(n.errors,Se.name,Xt[Se.name]):ir(n.errors,Se.name))}!fs(Ve)&&await $(Ve,re,de)}}return de.valid},P=()=>{for(const Z of l.unMount){const re=Ye(r,Z);re&&(re._f.refs?re._f.refs.every(de=>!nb(de)):!nb(re._f.ref))&&xe(Z)}l.unMount=new Set},M=(Z,re)=>!e.disabled&&(Z&&re&&tn(a,Z,re),!al(V(),s)),D=(Z,re,de)=>kce(Z,l,{...o.mount?a:Xn(re)?s:ha(Z)?{[Z]:re}:re},de,re),k=Z=>nC(Ye(o.mount?a:s,Z,e.shouldUnregister?Ye(s,Z,[]):[])),G=(Z,re,de={})=>{const Te=Ye(r,Z);let Re=re;if(Te){const Se=Te._f;Se&&(!Se.disabled&&tn(a,Z,F5(re,Se)),Re=vx(Se.ref)&&Xr(re)?"":re,O5(Se.ref)?[...Se.ref.options].forEach(Ve=>Ve.selected=Re.includes(Ve.value)):Se.refs?dg(Se.ref)?Se.refs.forEach(Ve=>{(!Ve.defaultChecked||!Ve.disabled)&&(Array.isArray(Re)?Ve.checked=!!Re.find(We=>We===Ve.value):Ve.checked=Re===Ve.value||!!Re)}):Se.refs.forEach(Ve=>Ve.checked=Ve.value===Re):sC(Se.ref)?Se.ref.value="":(Se.ref.value=Re,Se.ref.type||p.state.next({name:Z,values:Ar(a)})))}(de.shouldDirty||de.shouldTouch)&&A(Z,Re,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&H(Z)},se=(Z,re,de)=>{for(const Te in re){if(!re.hasOwnProperty(Te))return;const Re=re[Te],Se=Z+"."+Te,Ve=Ye(r,Se);(l.array.has(Z)||qn(Re)||Ve&&!Ve._f)&&!Pc(Re)?se(Se,Re,de):G(Se,Re,de)}},ae=(Z,re,de={})=>{const Te=Ye(r,Z),Re=l.array.has(Z),Se=Ar(re);tn(a,Z,Se),Re?(p.array.next({name:Z,values:Ar(a)}),(f.isDirty||f.dirtyFields||m.isDirty||m.dirtyFields)&&de.shouldDirty&&p.state.next({name:Z,dirtyFields:Hf(s,a),isDirty:M(Z,Se)})):Te&&!Te._f&&!Xr(Se)?se(Z,Se,de):G(Z,Se,de),vR(Z,l)&&p.state.next({...n}),p.state.next({name:o.mount?Z:void 0,values:Ar(a)})},K=async Z=>{o.mount=!0;const re=Z.target;let de=re.name,Te=!0;const Re=Ye(r,de),Se=nt=>{Te=Number.isNaN(nt)||Pc(nt)&&isNaN(nt.getTime())||al(nt,Ye(a,de,nt))},Ve=pR(e.mode),We=pR(e.reValidateMode);if(Re){let nt,Xt;const sr=re.type?mR(Re._f):jce(Z),Gn=Z.type===cR.BLUR||Z.type===cR.FOCUS_OUT,Hr=!Dce(Re._f)&&!e.resolver&&!Ye(n.errors,de)&&!Re._f.deps||Vce(Gn,Ye(n.touchedFields,de),n.isSubmitted,We,Ve),ls=vR(de,l,Gn);tn(a,de,sr),Gn?(Re._f.onBlur&&Re._f.onBlur(Z),u&&u(0)):Re._f.onChange&&Re._f.onChange(Z);const cs=A(de,sr,Gn),Gi=!fs(cs)||ls;if(!Gn&&p.state.next({name:de,type:Z.type,values:Ar(a)}),Hr)return(f.isValid||m.isValid)&&(e.mode==="onBlur"?Gn&&b():Gn||b()),Gi&&p.state.next({name:de,...ls?{}:cs});if(!Gn&&ls&&p.state.next({...n}),e.resolver){const{errors:bu}=await I([de]);if(Se(sr),Te){const Aa=yR(n.errors,r,de),ko=yR(bu,r,Aa.name||de);nt=ko.error,de=ko.name,Xt=fs(bu)}}else N([de],!0),nt=(await _R(Re,l.disabled,a,y,e.shouldUseNativeValidation))[de],N([de]),Se(sr),Te&&(nt?Xt=!1:(f.isValid||m.isValid)&&(Xt=await $(r,!0)));Te&&(Re._f.deps&&H(Re._f.deps),B(de,Xt,nt,cs))}},z=(Z,re)=>{if(Ye(n.errors,re)&&Z.focus)return Z.focus(),1},H=async(Z,re={})=>{let de,Te;const Re=Cm(Z);if(e.resolver){const Se=await F(Xn(Z)?Z:Re);de=fs(Se),Te=Z?!Re.some(Ve=>Ye(Se,Ve)):de}else Z?(Te=(await Promise.all(Re.map(async Se=>{const Ve=Ye(r,Se);return await $(Ve&&Ve._f?{[Se]:Ve}:Ve)}))).every(Boolean),!(!Te&&!n.isValid)&&b()):Te=de=await $(r);return p.state.next({...!ha(Z)||(f.isValid||m.isValid)&&de!==n.isValid?{}:{name:Z},...e.resolver||!Z?{isValid:de}:{},errors:n.errors}),re.shouldFocus&&!Te&&Pm(r,z,Z?Re:l.mount),Te},V=Z=>{const re={...o.mount?a:s};return Xn(Z)?re:ha(Z)?Ye(re,Z):Z.map(de=>Ye(re,de))},q=(Z,re)=>({invalid:!!Ye((re||n).errors,Z),isDirty:!!Ye((re||n).dirtyFields,Z),error:Ye((re||n).errors,Z),isValidating:!!Ye(n.validatingFields,Z),isTouched:!!Ye((re||n).touchedFields,Z)}),J=Z=>{Z&&Cm(Z).forEach(re=>ir(n.errors,re)),p.state.next({errors:Z?n.errors:{}})},me=(Z,re,de)=>{const Te=(Ye(r,Z,{_f:{}})._f||{}).ref,Re=Ye(n.errors,Z)||{},{ref:Se,message:Ve,type:We,...nt}=Re;tn(n.errors,Z,{...nt,...re,ref:Te}),p.state.next({name:Z,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Te&&Te.focus&&Te.focus()},Pe=(Z,re)=>ki(Z)?p.state.subscribe({next:de=>Z(D(void 0,re),de)}):D(Z,re,!0),Me=Z=>p.state.subscribe({next:re=>{Fce(Z.name,re.name,Z.exact)&&Lce(re,Z.formState||f,De,Z.reRenderRoot)&&Z.callback({values:{...a},...n,...re})}}).unsubscribe,oe=Z=>(o.mount=!0,m={...m,...Z.formState},Me({...Z,formState:m})),xe=(Z,re={})=>{for(const de of Z?Cm(Z):l.mount)l.mount.delete(de),l.array.delete(de),re.keepValue||(ir(r,de),ir(a,de)),!re.keepError&&ir(n.errors,de),!re.keepDirty&&ir(n.dirtyFields,de),!re.keepTouched&&ir(n.touchedFields,de),!re.keepIsValidating&&ir(n.validatingFields,de),!e.shouldUnregister&&!re.keepDefaultValue&&ir(s,de);p.state.next({values:Ar(a)}),p.state.next({...n,...re.keepDirty?{isDirty:M()}:{}}),!re.keepIsValid&&b()},Y=({disabled:Z,name:re})=>{(ta(Z)&&o.mount||Z||l.disabled.has(re))&&(Z?l.disabled.add(re):l.disabled.delete(re))},ne=(Z,re={})=>{let de=Ye(r,Z);const Te=ta(re.disabled)||ta(e.disabled);return tn(r,Z,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:Z}},name:Z,mount:!0,...re}}),l.mount.add(Z),de?Y({disabled:ta(re.disabled)?re.disabled:e.disabled,name:Z}):R(Z,!0,re.value),{...Te?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:qf(re.min),max:qf(re.max),minLength:qf(re.minLength),maxLength:qf(re.maxLength),pattern:qf(re.pattern)}:{},name:Z,onChange:K,onBlur:K,ref:Re=>{if(Re){ne(Z,re),de=Ye(r,Z);const Se=Xn(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,Ve=Rce(Se),We=de._f.refs||[];if(Ve?We.find(nt=>nt===Se):Se===de._f.ref)return;tn(r,Z,{_f:{...de._f,...Ve?{refs:[...We.filter(nb),Se,...Array.isArray(Ye(s,Z))?[{}]:[]],ref:{type:Se.type,name:Z}}:{ref:Se}}}),R(Z,!1,void 0,Se)}else de=Ye(r,Z,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(Sce(l.array,Z)&&o.action)&&l.unMount.add(Z)}}},ee=()=>e.shouldFocusError&&Pm(r,z,l.mount),ie=Z=>{ta(Z)&&(p.state.next({disabled:Z}),Pm(r,(re,de)=>{const Te=Ye(r,de);Te&&(re.disabled=Te._f.disabled||Z,Array.isArray(Te._f.refs)&&Te._f.refs.forEach(Re=>{Re.disabled=Te._f.disabled||Z}))},0,!1))},fe=(Z,re)=>async de=>{let Te;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let Re=Ar(a);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:Ve}=await I();n.errors=Se,Re=Ve}else await $(r);if(l.disabled.size)for(const Se of l.disabled)tn(Re,Se,void 0);if(ir(n.errors,"root"),fs(n.errors)){p.state.next({errors:{}});try{await Z(Re,de)}catch(Se){Te=Se}}else re&&await re({...n.errors},de),ee(),setTimeout(ee);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fs(n.errors)&&!Te,submitCount:n.submitCount+1,errors:n.errors}),Te)throw Te},_e=(Z,re={})=>{Ye(r,Z)&&(Xn(re.defaultValue)?ae(Z,Ar(Ye(s,Z))):(ae(Z,re.defaultValue),tn(s,Z,Ar(re.defaultValue))),re.keepTouched||ir(n.touchedFields,Z),re.keepDirty||(ir(n.dirtyFields,Z),n.isDirty=re.defaultValue?M(Z,Ar(Ye(s,Z))):M()),re.keepError||(ir(n.errors,Z),f.isValid&&b()),p.state.next({...n}))},Ie=(Z,re={})=>{const de=Z?Ar(Z):s,Te=Ar(de),Re=fs(Z),Se=Re?s:Te;if(re.keepDefaultValues||(s=de),!re.keepValues){if(re.keepDirtyValues){const Ve=new Set([...l.mount,...Object.keys(Hf(s,a))]);for(const We of Array.from(Ve))Ye(n.dirtyFields,We)?tn(Se,We,Ye(a,We)):ae(We,Ye(Se,We))}else{if(tC&&Xn(Z))for(const Ve of l.mount){const We=Ye(r,Ve);if(We&&We._f){const nt=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(vx(nt)){const Xt=nt.closest("form");if(Xt){Xt.reset();break}}}}for(const Ve of l.mount)ae(Ve,Ye(Se,Ve))}a=Ar(Se),p.array.next({values:{...Se}}),p.state.next({values:{...Se}})}l={mount:re.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:Re?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!al(Z,s)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Re?{}:re.keepDirtyValues?re.keepDefaultValues&&a?Hf(s,a):n.dirtyFields:re.keepDefaultValues&&Z?Hf(s,Z):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ce=(Z,re)=>Ie(ki(Z)?Z(a):Z,re),he=(Z,re={})=>{const de=Ye(r,Z),Te=de&&de._f;if(Te){const Re=Te.refs?Te.refs[0]:Te.ref;Re.focus&&(Re.focus(),re.shouldSelect&&ki(Re.select)&&Re.select())}},De=Z=>{n={...n,...Z}},vt={control:{register:ne,unregister:xe,getFieldState:q,handleSubmit:fe,setError:me,_subscribe:Me,_runSchema:I,_focusError:ee,_getWatch:D,_getDirty:M,_setValid:b,_setFieldArray:_,_setDisabledField:Y,_setErrors:E,_getFieldArray:k,_reset:Ie,_resetDefaultValues:()=>ki(e.defaultValues)&&e.defaultValues().then(Z=>{Ce(Z,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:ie,_subjects:p,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(Z){o=Z},get _defaultValues(){return s},get _names(){return l},set _names(Z){l=Z},get _formState(){return n},get _options(){return e},set _options(Z){e={...e,...Z}}},subscribe:oe,trigger:H,register:ne,handleSubmit:fe,watch:Pe,setValue:ae,getValues:V,reset:Ce,resetField:_e,clearErrors:J,unregister:xe,setError:me,setFocus:he,getFieldState:q};return{...vt,formControl:vt}}function Fc(t={}){const e=ue.useRef(void 0),n=ue.useRef(void 0),[r,s]=ue.useState({isDirty:!1,isValidating:!1,isLoading:ki(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ki(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!ki(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Bce(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,Tce(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),ue.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),ue.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),ue.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),ue.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),ue.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),ue.useEffect(()=>{t.values&&!al(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),ue.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=Pce(r,a),e.current}const wR=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ye(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},$5=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?wR(r.ref,n,t):r.refs&&r.refs.forEach(s=>wR(s,n,t))}},Hce=(t,e)=>{e.shouldUseNativeValidation&&$5(t,e);const n={};for(const r in t){const s=Ye(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(qce(e.names||Object.keys(t),r)){const o=Object.assign({},Ye(n,r));tn(o,"root",a),tn(n,r,o)}else tn(n,r,a)}return n},qce=(t,e)=>t.some(n=>n.startsWith(e+"."));var Wce=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(m){return t.push(m)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=A5(o,e,n,s,d?[].concat(d,r.message):r.message)}t.shift()}return n},Vc=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&$5({},a),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Hce(Wce(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Ut;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Ut||(Ut={}));var bR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bR||(bR={}));const tt=Ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yo=t=>{switch(typeof t){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return Number.isNaN(t)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(t)?tt.array:t===null?tt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?tt.promise:typeof Map<"u"&&t instanceof Map?tt.map:typeof Set<"u"&&t instanceof Set?tt.set:typeof Date<"u"&&t instanceof Date?tt.date:tt.object;default:return tt.unknown}},Ae=Ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class jo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return s(this),r}static assert(e){if(!(e instanceof jo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}jo.create=t=>new jo(t);const fj=(t,e)=>{let n;switch(t.code){case Ae.invalid_type:t.received===tt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ut.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ut.joinValues(t.keys,", ")}`;break;case Ae.invalid_union:n="Invalid input";break;case Ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ut.joinValues(t.options)}`;break;case Ae.invalid_enum_value:n=`Invalid enum value. Expected ${Ut.joinValues(t.options)}, received '${t.received}'`;break;case Ae.invalid_arguments:n="Invalid function arguments";break;case Ae.invalid_return_type:n="Invalid function return type";break;case Ae.invalid_date:n="Invalid date";break;case Ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ut.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ae.custom:n="Invalid input";break;case Ae.invalid_intersection_types:n="Intersection results could not be merged";break;case Ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ut.assertNever(t)}return{message:n}};let Gce=fj;function Kce(){return Gce}const Zce=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function He(t,e){const n=Kce(),r=Zce({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===fj?void 0:fj].filter(s=>!!s)});t.common.issues.push(r)}class Hs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return xt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return Hs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return xt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),lm=t=>({status:"dirty",value:t}),mi=t=>({status:"valid",value:t}),jR=t=>t.status==="aborted",NR=t=>t.status==="dirty",uh=t=>t.status==="valid",_x=t=>typeof Promise<"u"&&t instanceof Promise;var st;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(st||(st={}));class zl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const SR=(t,e)=>{if(uh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new jo(t.common.issues);return this._error=n,this._error}}};function Pt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??n??l.defaultError}},description:s}}class $t{get description(){return this._def.description}_getType(e){return Yo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Yo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hs,ctx:{common:e.parent.common,data:e.data,parsedType:Yo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_x(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yo(e)},s=this._parseSync({data:e,path:r.path,parent:r});return SR(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yo(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return uh(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>uh(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yo(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(_x(s)?s:Promise.resolve(s));return SR(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new fh({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Sl.create(this,this._def)}nullable(){return mh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ja.create(this)}promise(){return Nx.create(this,this._def)}or(e){return bx.create([this,e],this._def)}and(e){return jx.create(this,e,this._def)}transform(e){return new fh({...Pt(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new pj({...Pt(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new yue({typeName:_t.ZodBranded,type:this,...Pt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new gj({...Pt(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return aC.create(this,e)}readonly(){return vj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Qce=/^c[^\s-]{8,}$/i,Yce=/^[0-9a-z]+$/,Xce=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jce=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eue=/^[a-z0-9_-]{21}$/i,tue=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nue=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rue=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rb;const iue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cue=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uue=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,z5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",due=new RegExp(`^${z5}$`);function U5(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function hue(t){return new RegExp(`^${U5(t)}$`)}function fue(t){let e=`${z5}T${U5(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function mue(t,e){return!!((e==="v4"||!e)&&iue.test(t)||(e==="v6"||!e)&&oue.test(t))}function pue(t,e){if(!tue.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function gue(t,e){return!!((e==="v4"||!e)&&aue.test(t)||(e==="v6"||!e)&&lue.test(t))}class hl extends $t{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tt.string){const a=this._getOrReturnCtx(e);return He(a,{code:Ae.invalid_type,expected:tt.string,received:a.parsedType}),xt}const r=new Hs;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?He(s,{code:Ae.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&He(s,{code:Ae.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")rue.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"email",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")rb||(rb=new RegExp(sue,"u")),rb.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"emoji",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Jce.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"uuid",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")eue.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"nanoid",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Qce.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Yce.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid2",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Xce.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ulid",code:Ae.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),He(s,{validation:"url",code:Ae.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"regex",code:Ae.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?fue(a).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?due.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?hue(a).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?nue.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"duration",code:Ae.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?mue(e.data,a.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ip",code:Ae.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?pue(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"jwt",code:Ae.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?gue(e.data,a.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cidr",code:Ae.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?cue.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"base64",code:Ae.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?uue.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"base64url",code:Ae.invalid_string,message:a.message}),r.dirty()):Ut.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ae.invalid_string,...st.errToObj(r)})}_addCheck(e){return new hl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...st.errToObj(e)})}url(e){return this._addCheck({kind:"url",...st.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...st.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...st.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...st.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...st.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...st.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...st.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...st.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...st.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...st.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...st.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...st.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...st.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...st.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...st.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...st.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...st.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...st.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...st.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...st.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...st.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...st.errToObj(n)})}nonempty(e){return this.min(1,st.errToObj(e))}trim(){return new hl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hl.create=t=>new hl({checks:[],typeName:_t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Pt(t)});function vue(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class dh extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tt.number){const a=this._getOrReturnCtx(e);return He(a,{code:Ae.invalid_type,expected:tt.number,received:a.parsedType}),xt}let r;const s=new Hs;for(const a of this._def.checks)a.kind==="int"?Ut.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?vue(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.not_finite,message:a.message}),s.dirty()):Ut.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,st.toString(n))}gt(e,n){return this.setLimit("min",e,!1,st.toString(n))}lte(e,n){return this.setLimit("max",e,!0,st.toString(n))}lt(e,n){return this.setLimit("max",e,!1,st.toString(n))}setLimit(e,n,r,s){return new dh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:st.toString(s)}]})}_addCheck(e){return new dh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:st.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:st.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:st.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:st.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:st.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:st.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:st.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:st.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:st.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ut.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}dh.create=t=>new dh({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Pt(t)});class gp extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==tt.bigint)return this._getInvalidInput(e);let r;const s=new Hs;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Ae.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Ut.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return He(n,{code:Ae.invalid_type,expected:tt.bigint,received:n.parsedType}),xt}gte(e,n){return this.setLimit("min",e,!0,st.toString(n))}gt(e,n){return this.setLimit("min",e,!1,st.toString(n))}lte(e,n){return this.setLimit("max",e,!0,st.toString(n))}lt(e,n){return this.setLimit("max",e,!1,st.toString(n))}setLimit(e,n,r,s){return new gp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:st.toString(s)}]})}_addCheck(e){return new gp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:st.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:st.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:st.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:st.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:st.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gp.create=t=>new gp({checks:[],typeName:_t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Pt(t)});class ER extends $t{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tt.boolean){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.boolean,received:r.parsedType}),xt}return mi(e.data)}}ER.create=t=>new ER({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Pt(t)});class wx extends $t{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tt.date){const a=this._getOrReturnCtx(e);return He(a,{code:Ae.invalid_type,expected:tt.date,received:a.parsedType}),xt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return He(a,{code:Ae.invalid_date}),xt}const r=new Hs;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Ae.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Ut.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wx({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:st.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:st.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}wx.create=t=>new wx({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...Pt(t)});class CR extends $t{_parse(e){if(this._getType(e)!==tt.symbol){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.symbol,received:r.parsedType}),xt}return mi(e.data)}}CR.create=t=>new CR({typeName:_t.ZodSymbol,...Pt(t)});class PR extends $t{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.undefined,received:r.parsedType}),xt}return mi(e.data)}}PR.create=t=>new PR({typeName:_t.ZodUndefined,...Pt(t)});class TR extends $t{_parse(e){if(this._getType(e)!==tt.null){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.null,received:r.parsedType}),xt}return mi(e.data)}}TR.create=t=>new TR({typeName:_t.ZodNull,...Pt(t)});class kR extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return mi(e.data)}}kR.create=t=>new kR({typeName:_t.ZodAny,...Pt(t)});class RR extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mi(e.data)}}RR.create=t=>new RR({typeName:_t.ZodUnknown,...Pt(t)});class Ul extends $t{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:Ae.invalid_type,expected:tt.never,received:n.parsedType}),xt}}Ul.create=t=>new Ul({typeName:_t.ZodNever,...Pt(t)});class IR extends $t{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.void,received:r.parsedType}),xt}return mi(e.data)}}IR.create=t=>new IR({typeName:_t.ZodVoid,...Pt(t)});class ja extends $t{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==tt.array)return He(n,{code:Ae.invalid_type,expected:tt.array,received:n.parsedType}),xt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(He(n,{code:o?Ae.too_big:Ae.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(He(n,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(He(n,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new zl(n,o,n.path,l)))).then(o=>Hs.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new zl(n,o,n.path,l)));return Hs.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new ja({...this._def,minLength:{value:e,message:st.toString(n)}})}max(e,n){return new ja({...this._def,maxLength:{value:e,message:st.toString(n)}})}length(e,n){return new ja({...this._def,exactLength:{value:e,message:st.toString(n)}})}nonempty(e){return this.min(1,e)}}ja.create=(t,e)=>new ja({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...Pt(e)});function id(t){if(t instanceof Yn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Sl.create(id(r))}return new Yn({...t._def,shape:()=>e})}else return t instanceof ja?new ja({...t._def,type:id(t.element)}):t instanceof Sl?Sl.create(id(t.unwrap())):t instanceof mh?mh.create(id(t.unwrap())):t instanceof ru?ru.create(t.items.map(e=>id(e))):t}class Yn extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ut.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==tt.object){const d=this._getOrReturnCtx(e);return He(d,{code:Ae.invalid_type,expected:tt.object,received:d.parsedType}),xt}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ul&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const f=a[d],m=s.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new zl(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ul){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")l.length>0&&(He(s,{code:Ae.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const m=s.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new zl(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const m=await f.key,p=await f.value;d.push({key:m,value:p,alwaysSet:f.alwaysSet})}return d}).then(d=>Hs.mergeObjectSync(r,d)):Hs.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return st.errToObj,new Yn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:st.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Yn({...this._def,unknownKeys:"strip"})}passthrough(){return new Yn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Yn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Yn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Yn({...this._def,catchall:e})}pick(e){const n={};for(const r of Ut.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Yn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ut.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Yn({...this._def,shape:()=>n})}deepPartial(){return id(this)}partial(e){const n={};for(const r of Ut.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Yn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ut.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Sl;)a=a._def.innerType;n[r]=a}return new Yn({...this._def,shape:()=>n})}keyof(){return B5(Ut.objectKeys(this.shape))}}Yn.create=(t,e)=>new Yn({shape:()=>t,unknownKeys:"strip",catchall:Ul.create(),typeName:_t.ZodObject,...Pt(e)});Yn.strictCreate=(t,e)=>new Yn({shape:()=>t,unknownKeys:"strict",catchall:Ul.create(),typeName:_t.ZodObject,...Pt(e)});Yn.lazycreate=(t,e)=>new Yn({shape:t,unknownKeys:"strip",catchall:Ul.create(),typeName:_t.ZodObject,...Pt(e)});class bx extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new jo(l.ctx.common.issues));return He(n,{code:Ae.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(u=>new jo(u));return He(n,{code:Ae.invalid_union,unionErrors:l}),xt}}get options(){return this._def.options}}bx.create=(t,e)=>new bx({options:t,typeName:_t.ZodUnion,...Pt(e)});function mj(t,e){const n=Yo(t),r=Yo(e);if(t===e)return{valid:!0,data:t};if(n===tt.object&&r===tt.object){const s=Ut.objectKeys(e),a=Ut.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const u=mj(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===tt.array&&r===tt.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],u=mj(o,l);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===tt.date&&r===tt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jx extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(jR(a)||jR(o))return xt;const l=mj(a.value,o.value);return l.valid?((NR(a)||NR(o))&&n.dirty(),{status:n.value,value:l.data}):(He(r,{code:Ae.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}jx.create=(t,e,n)=>new jx({left:t,right:e,typeName:_t.ZodIntersection,...Pt(n)});class ru extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.array)return He(r,{code:Ae.invalid_type,expected:tt.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return He(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new zl(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Hs.mergeArray(n,o)):Hs.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new ru({...this._def,rest:e})}}ru.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ru({items:t,typeName:_t.ZodTuple,rest:null,...Pt(e)})};class AR extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.map)return He(r,{code:Ae.invalid_type,expected:tt.map,received:r.parsedType}),xt;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,u],d)=>({key:s._parse(new zl(r,l,r.path,[d,"key"])),value:a._parse(new zl(r,u,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}}}}AR.create=(t,e,n)=>new AR({valueType:e,keyType:t,typeName:_t.ZodMap,...Pt(n)});class vp extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.set)return He(r,{code:Ae.invalid_type,expected:tt.set,received:r.parsedType}),xt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(He(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(He(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return xt;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((u,d)=>a._parse(new zl(r,u,r.path,d)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new vp({...this._def,minSize:{value:e,message:st.toString(n)}})}max(e,n){return new vp({...this._def,maxSize:{value:e,message:st.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}vp.create=(t,e)=>new vp({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...Pt(e)});class OR extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}OR.create=(t,e)=>new OR({getter:t,typeName:_t.ZodLazy,...Pt(e)});class MR extends $t{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:Ae.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}MR.create=(t,e)=>new MR({value:t,typeName:_t.ZodLiteral,...Pt(e)});function B5(t,e){return new hh({values:t,typeName:_t.ZodEnum,...Pt(e)})}class hh extends $t{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{expected:Ut.joinValues(r),received:n.parsedType,code:Ae.invalid_type}),xt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{received:n.data,code:Ae.invalid_enum_value,options:r}),xt}return mi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return hh.create(e,{...this._def,...n})}exclude(e,n=this._def){return hh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}hh.create=B5;class DR extends $t{_parse(e){const n=Ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tt.string&&r.parsedType!==tt.number){const s=Ut.objectValues(n);return He(r,{expected:Ut.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),xt}if(this._cache||(this._cache=new Set(Ut.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ut.objectValues(n);return He(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),xt}return mi(e.data)}get enum(){return this._def.values}}DR.create=(t,e)=>new DR({values:t,typeName:_t.ZodNativeEnum,...Pt(e)});class Nx extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==tt.promise&&n.common.async===!1)return He(n,{code:Ae.invalid_type,expected:tt.promise,received:n.parsedType}),xt;const r=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return mi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Nx.create=(t,e)=>new Nx({type:t,typeName:_t.ZodPromise,...Pt(e)});class fh extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{He(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return xt;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?xt:u.status==="dirty"||n.value==="dirty"?lm(u.value):u});{if(n.value==="aborted")return xt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?xt:l.status==="dirty"||n.value==="dirty"?lm(l.value):l}}if(s.type==="refinement"){const o=l=>{const u=s.refinement(l,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?xt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?xt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!uh(o))return xt;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>uh(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):xt);Ut.assertNever(s)}}fh.create=(t,e,n)=>new fh({schema:t,typeName:_t.ZodEffects,effect:e,...Pt(n)});fh.createWithPreprocess=(t,e,n)=>new fh({schema:e,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...Pt(n)});class Sl extends $t{_parse(e){return this._getType(e)===tt.undefined?mi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sl.create=(t,e)=>new Sl({innerType:t,typeName:_t.ZodOptional,...Pt(e)});class mh extends $t{_parse(e){return this._getType(e)===tt.null?mi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mh.create=(t,e)=>new mh({innerType:t,typeName:_t.ZodNullable,...Pt(e)});class pj extends $t{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===tt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}pj.create=(t,e)=>new pj({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pt(e)});class gj extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _x(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}gj.create=(t,e)=>new gj({innerType:t,typeName:_t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pt(e)});class LR extends $t{_parse(e){if(this._getType(e)!==tt.nan){const r=this._getOrReturnCtx(e);return He(r,{code:Ae.invalid_type,expected:tt.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}LR.create=t=>new LR({typeName:_t.ZodNaN,...Pt(t)});class yue extends $t{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class aC extends $t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:a.status==="dirty"?(n.dirty(),lm(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?xt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new aC({in:e,out:n,typeName:_t.ZodPipeline})}}class vj extends $t{_parse(e){const n=this._def.innerType._parse(e),r=s=>(uh(s)&&(s.value=Object.freeze(s.value)),s);return _x(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}vj.create=(t,e)=>new vj({innerType:t,typeName:_t.ZodReadonly,...Pt(e)});var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const Et=hl.create,H5=dh.create;Ul.create;const oC=ja.create,vu=Yn.create;bx.create;jx.create;ru.create;const xue=hh.create;Nx.create;Sl.create;mh.create;function yp(t,[e,n]){return Math.min(n,Math.max(e,t))}function f_(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var q5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_ue="VisuallyHidden",wue=x.forwardRef((t,e)=>i.jsx(Ge.span,{...t,ref:e,style:{...q5,...t.style}}));wue.displayName=_ue;var bue=[" ","Enter","ArrowUp","ArrowDown"],jue=[" ","Enter"],su="Select",[m_,p_,Nue]=Xp(su),[Xh,sxe]=Pr(su,[Nue,Wh]),g_=Wh(),[Sue,Xl]=Xh(su),[Eue,Cue]=Xh(su),W5=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:u,dir:d,name:f,autoComplete:m,disabled:p,required:y,form:j}=t,b=g_(e),[N,_]=x.useState(null),[w,E]=x.useState(null),[R,A]=x.useState(!1),B=mu(d),[I,F]=Bs({prop:r,defaultProp:s??!1,onChange:a,caller:su}),[$,P]=Bs({prop:o,defaultProp:l,onChange:u,caller:su}),M=x.useRef(null),D=N?j||!!N.closest("form"):!0,[k,G]=x.useState(new Set),se=Array.from(k).map(ae=>ae.props.value).join(";");return i.jsx(jE,{...b,children:i.jsxs(Sue,{required:y,scope:e,trigger:N,onTriggerChange:_,valueNode:w,onValueNodeChange:E,valueNodeHasChildren:R,onValueNodeHasChildrenChange:A,contentId:$s(),value:$,onValueChange:P,open:I,onOpenChange:F,dir:B,triggerPointerDownPosRef:M,disabled:p,children:[i.jsx(m_.Provider,{scope:e,children:i.jsx(Eue,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(ae=>{G(K=>new Set(K).add(ae))},[]),onNativeOptionRemove:x.useCallback(ae=>{G(K=>{const z=new Set(K);return z.delete(ae),z})},[]),children:n})}),D?i.jsxs(g6,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:$,onChange:ae=>P(ae.target.value),disabled:p,form:j,children:[$===void 0?i.jsx("option",{value:""}):null,Array.from(k)]},se):null]})})};W5.displayName=su;var G5="SelectTrigger",K5=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=g_(n),o=Xl(G5,n),l=o.disabled||r,u=ft(e,o.onTriggerChange),d=p_(n),f=x.useRef("touch"),[m,p,y]=y6(b=>{const N=d().filter(E=>!E.disabled),_=N.find(E=>E.value===o.value),w=x6(N,b,_);w!==void 0&&o.onValueChange(w.value)}),j=b=>{l||(o.onOpenChange(!0),y()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return i.jsx(Z0,{asChild:!0,...a,children:i.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":v6(o.value)?"":void 0,...s,ref:u,onClick:Fe(s.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&j(b)}),onPointerDown:Fe(s.onPointerDown,b=>{f.current=b.pointerType;const N=b.target;N.hasPointerCapture(b.pointerId)&&N.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(j(b),b.preventDefault())}),onKeyDown:Fe(s.onKeyDown,b=>{const N=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(N&&b.key===" ")&&bue.includes(b.key)&&(j(),b.preventDefault())})})})});K5.displayName=G5;var Z5="SelectValue",Q5=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,u=Xl(Z5,n),{onValueNodeHasChildrenChange:d}=u,f=a!==void 0,m=ft(e,u.onValueNodeChange);return Wn(()=>{d(f)},[d,f]),i.jsx(Ge.span,{...l,ref:m,style:{pointerEvents:"none"},children:v6(u.value)?i.jsx(i.Fragment,{children:o}):a})});Q5.displayName=Z5;var Pue="SelectIcon",Y5=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Ge.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});Y5.displayName=Pue;var Tue="SelectPortal",X5=t=>i.jsx(ng,{asChild:!0,...t});X5.displayName=Tue;var iu="SelectContent",J5=x.forwardRef((t,e)=>{const n=Xl(iu,t.__scopeSelect),[r,s]=x.useState();if(Wn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Ah.createPortal(i.jsx(e6,{scope:t.__scopeSelect,children:i.jsx(m_.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(t6,{...t,ref:e})});J5.displayName=iu;var ji=10,[e6,Jl]=Xh(iu),kue="SelectContentImpl",Rue=Fl("SelectContent.RemoveScroll"),t6=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:y,sticky:j,hideWhenDetached:b,avoidCollisions:N,..._}=t,w=Xl(iu,n),[E,R]=x.useState(null),[A,B]=x.useState(null),I=ft(e,xe=>R(xe)),[F,$]=x.useState(null),[P,M]=x.useState(null),D=p_(n),[k,G]=x.useState(!1),se=x.useRef(!1);x.useEffect(()=>{if(E)return Y0(E)},[E]),H0();const ae=x.useCallback(xe=>{const[Y,...ne]=D().map(fe=>fe.ref.current),[ee]=ne.slice(-1),ie=document.activeElement;for(const fe of xe)if(fe===ie||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===Y&&A&&(A.scrollTop=0),fe===ee&&A&&(A.scrollTop=A.scrollHeight),fe==null||fe.focus(),document.activeElement!==ie))return},[D,A]),K=x.useCallback(()=>ae([F,E]),[ae,F,E]);x.useEffect(()=>{k&&K()},[k,K]);const{onOpenChange:z,triggerPointerDownPosRef:H}=w;x.useEffect(()=>{if(E){let xe={x:0,y:0};const Y=ee=>{var ie,fe;xe={x:Math.abs(Math.round(ee.pageX)-(((ie=H.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(ee.pageY)-(((fe=H.current)==null?void 0:fe.y)??0))}},ne=ee=>{xe.x<=10&&xe.y<=10?ee.preventDefault():E.contains(ee.target)||z(!1),document.removeEventListener("pointermove",Y),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",ne,{capture:!0})}}},[E,z,H]),x.useEffect(()=>{const xe=()=>z(!1);return window.addEventListener("blur",xe),window.addEventListener("resize",xe),()=>{window.removeEventListener("blur",xe),window.removeEventListener("resize",xe)}},[z]);const[V,q]=y6(xe=>{const Y=D().filter(ie=>!ie.disabled),ne=Y.find(ie=>ie.ref.current===document.activeElement),ee=x6(Y,xe,ne);ee&&setTimeout(()=>ee.ref.current.focus())}),J=x.useCallback((xe,Y,ne)=>{const ee=!se.current&&!ne;(w.value!==void 0&&w.value===Y||ee)&&($(xe),ee&&(se.current=!0))},[w.value]),me=x.useCallback(()=>E==null?void 0:E.focus(),[E]),Pe=x.useCallback((xe,Y,ne)=>{const ee=!se.current&&!ne;(w.value!==void 0&&w.value===Y||ee)&&M(xe)},[w.value]),Me=r==="popper"?yj:n6,oe=Me===yj?{side:l,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:y,sticky:j,hideWhenDetached:b,avoidCollisions:N}:{};return i.jsx(e6,{scope:n,content:E,viewport:A,onViewportChange:B,itemRefCallback:J,selectedItem:F,onItemLeave:me,itemTextRefCallback:Pe,focusSelectedItem:K,selectedItemText:P,position:r,isPositioned:k,searchRef:V,children:i.jsx(sg,{as:Rue,allowPinchZoom:!0,children:i.jsx(eg,{asChild:!0,trapped:w.open,onMountAutoFocus:xe=>{xe.preventDefault()},onUnmountAutoFocus:Fe(s,xe=>{var Y;(Y=w.trigger)==null||Y.focus({preventScroll:!0}),xe.preventDefault()}),children:i.jsx(Jp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:xe=>xe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(Me,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:xe=>xe.preventDefault(),..._,...oe,onPlaced:()=>G(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Fe(_.onKeyDown,xe=>{const Y=xe.ctrlKey||xe.altKey||xe.metaKey;if(xe.key==="Tab"&&xe.preventDefault(),!Y&&xe.key.length===1&&q(xe.key),["ArrowUp","ArrowDown","Home","End"].includes(xe.key)){let ee=D().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(xe.key)&&(ee=ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(xe.key)){const ie=xe.target,fe=ee.indexOf(ie);ee=ee.slice(fe+1)}setTimeout(()=>ae(ee)),xe.preventDefault()}})})})})})})});t6.displayName=kue;var Iue="SelectItemAlignedPosition",n6=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=Xl(iu,n),o=Jl(iu,n),[l,u]=x.useState(null),[d,f]=x.useState(null),m=ft(e,I=>f(I)),p=p_(n),y=x.useRef(!1),j=x.useRef(!0),{viewport:b,selectedItem:N,selectedItemText:_,focusSelectedItem:w}=o,E=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&b&&N&&_){const I=a.trigger.getBoundingClientRect(),F=d.getBoundingClientRect(),$=a.valueNode.getBoundingClientRect(),P=_.getBoundingClientRect();if(a.dir!=="rtl"){const ie=P.left-F.left,fe=$.left-ie,_e=I.left-fe,Ie=I.width+_e,Ce=Math.max(Ie,F.width),he=window.innerWidth-ji,De=yp(fe,[ji,Math.max(ji,he-Ce)]);l.style.minWidth=Ie+"px",l.style.left=De+"px"}else{const ie=F.right-P.right,fe=window.innerWidth-$.right-ie,_e=window.innerWidth-I.right-fe,Ie=I.width+_e,Ce=Math.max(Ie,F.width),he=window.innerWidth-ji,De=yp(fe,[ji,Math.max(ji,he-Ce)]);l.style.minWidth=Ie+"px",l.style.right=De+"px"}const M=p(),D=window.innerHeight-ji*2,k=b.scrollHeight,G=window.getComputedStyle(d),se=parseInt(G.borderTopWidth,10),ae=parseInt(G.paddingTop,10),K=parseInt(G.borderBottomWidth,10),z=parseInt(G.paddingBottom,10),H=se+ae+k+z+K,V=Math.min(N.offsetHeight*5,H),q=window.getComputedStyle(b),J=parseInt(q.paddingTop,10),me=parseInt(q.paddingBottom,10),Pe=I.top+I.height/2-ji,Me=D-Pe,oe=N.offsetHeight/2,xe=N.offsetTop+oe,Y=se+ae+xe,ne=H-Y;if(Y<=Pe){const ie=M.length>0&&N===M[M.length-1].ref.current;l.style.bottom="0px";const fe=d.clientHeight-b.offsetTop-b.offsetHeight,_e=Math.max(Me,oe+(ie?me:0)+fe+K),Ie=Y+_e;l.style.height=Ie+"px"}else{const ie=M.length>0&&N===M[0].ref.current;l.style.top="0px";const _e=Math.max(Pe,se+b.offsetTop+(ie?J:0)+oe)+ne;l.style.height=_e+"px",b.scrollTop=Y-Pe+b.offsetTop}l.style.margin=`${ji}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[p,a.trigger,a.valueNode,l,d,b,N,_,a.dir,r]);Wn(()=>E(),[E]);const[R,A]=x.useState();Wn(()=>{d&&A(window.getComputedStyle(d).zIndex)},[d]);const B=x.useCallback(I=>{I&&j.current===!0&&(E(),w==null||w(),j.current=!1)},[E,w]);return i.jsx(Oue,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:B,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:i.jsx(Ge.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});n6.displayName=Iue;var Aue="SelectPopperPosition",yj=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ji,...a}=t,o=g_(n);return i.jsx(NE,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});yj.displayName=Aue;var[Oue,lC]=Xh(iu,{}),xj="SelectViewport",r6=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=Jl(xj,n),o=lC(xj,n),l=ft(e,a.onViewportChange),u=x.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(m_.Slot,{scope:n,children:i.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Fe(s.onScroll,d=>{const f=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&m){const y=Math.abs(u.current-f.scrollTop);if(y>0){const j=window.innerHeight-ji*2,b=parseFloat(m.style.minHeight),N=parseFloat(m.style.height),_=Math.max(b,N);if(_<j){const w=_+y,E=Math.min(j,w),R=w-E;m.style.height=E+"px",m.style.bottom==="0px"&&(f.scrollTop=R>0?R:0,m.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});r6.displayName=xj;var s6="SelectGroup",[Mue,Due]=Xh(s6),Lue=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$s();return i.jsx(Mue,{scope:n,id:s,children:i.jsx(Ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Lue.displayName=s6;var i6="SelectLabel",a6=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Due(i6,n);return i.jsx(Ge.div,{id:s.id,...r,ref:e})});a6.displayName=i6;var Sx="SelectItem",[Fue,o6]=Xh(Sx),l6=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=Xl(Sx,n),u=Jl(Sx,n),d=l.value===r,[f,m]=x.useState(a??""),[p,y]=x.useState(!1),j=ft(e,w=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,w,r,s)}),b=$s(),N=x.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Fue,{scope:n,value:r,disabled:s,textId:b,isSelected:d,onItemTextChange:x.useCallback(w=>{m(E=>E||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(m_.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(Ge.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:j,onFocus:Fe(o.onFocus,()=>y(!0)),onBlur:Fe(o.onBlur,()=>y(!1)),onClick:Fe(o.onClick,()=>{N.current!=="mouse"&&_()}),onPointerUp:Fe(o.onPointerUp,()=>{N.current==="mouse"&&_()}),onPointerDown:Fe(o.onPointerDown,w=>{N.current=w.pointerType}),onPointerMove:Fe(o.onPointerMove,w=>{var E;N.current=w.pointerType,s?(E=u.onItemLeave)==null||E.call(u):N.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(o.onPointerLeave,w=>{var E;w.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Fe(o.onKeyDown,w=>{var R;((R=u.searchRef)==null?void 0:R.current)!==""&&w.key===" "||(jue.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});l6.displayName=Sx;var cm="SelectItemText",c6=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=Xl(cm,n),l=Jl(cm,n),u=o6(cm,n),d=Cue(cm,n),[f,m]=x.useState(null),p=ft(e,_=>m(_),u.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,u.value,u.disabled)}),y=f==null?void 0:f.textContent,j=x.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:N}=d;return Wn(()=>(b(j),()=>N(j)),[b,N,j]),i.jsxs(i.Fragment,{children:[i.jsx(Ge.span,{id:u.textId,...a,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ah.createPortal(a.children,o.valueNode):null]})});c6.displayName=cm;var u6="SelectItemIndicator",d6=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o6(u6,n).isSelected?i.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});d6.displayName=u6;var _j="SelectScrollUpButton",h6=x.forwardRef((t,e)=>{const n=Jl(_j,t.__scopeSelect),r=lC(_j,t.__scopeSelect),[s,a]=x.useState(!1),o=ft(e,r.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollTop>0;a(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(m6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});h6.displayName=_j;var wj="SelectScrollDownButton",f6=x.forwardRef((t,e)=>{const n=Jl(wj,t.__scopeSelect),r=lC(wj,t.__scopeSelect),[s,a]=x.useState(!1),o=ft(e,r.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;a(f)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(m6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});f6.displayName=wj;var m6=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=Jl("SelectScrollButton",n),o=x.useRef(null),l=p_(n),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),Wn(()=>{var f;const d=l().find(m=>m.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Fe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Fe(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Fe(s.onPointerLeave,()=>{u()})})}),Vue="SelectSeparator",p6=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});p6.displayName=Vue;var bj="SelectArrow",$ue=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=g_(n),a=Xl(bj,n),o=Jl(bj,n);return a.open&&o.position==="popper"?i.jsx(SE,{...s,...r,ref:e}):null});$ue.displayName=bj;var zue="SelectBubbleInput",g6=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=x.useRef(null),a=ft(r,s),o=f_(e);return x.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const m=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Ge.select,{...n,style:{...q5,...n.style},ref:a,defaultValue:e})});g6.displayName=zue;function v6(t){return t===""||t===void 0}function y6(t){const e=yr(t),n=x.useRef(""),r=x.useRef(0),s=x.useCallback(o=>{const l=n.current+o;e(l),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function x6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Uue(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Uue(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Bue=W5,_6=K5,Hue=Q5,que=Y5,Wue=X5,w6=J5,Gue=r6,b6=a6,j6=l6,Kue=c6,Zue=d6,N6=h6,S6=f6,E6=p6;const ln=Bue,cn=Hue,sn=x.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(_6,{ref:r,className:it("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(que,{asChild:!0,children:i.jsx(bne,{className:"h-4 w-4 opacity-50"})})]}));sn.displayName=_6.displayName;const C6=x.forwardRef(({className:t,...e},n)=>i.jsx(N6,{ref:n,className:it("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Tne,{})}));C6.displayName=N6.displayName;const P6=x.forwardRef(({className:t,...e},n)=>i.jsx(S6,{ref:n,className:it("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(F3,{})}));P6.displayName=S6.displayName;const an=x.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(Wue,{children:i.jsxs(w6,{ref:s,className:it("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(C6,{}),i.jsx(Gue,{className:it("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(P6,{})]})}));an.displayName=w6.displayName;const Que=x.forwardRef(({className:t,...e},n)=>i.jsx(b6,{ref:n,className:it("px-2 py-1.5 text-sm font-semibold",t),...e}));Que.displayName=b6.displayName;const Qe=x.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(j6,{ref:r,className:it("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Zue,{children:i.jsx(AE,{className:"h-4 w-4"})})}),i.jsx(Kue,{children:e})]}));Qe.displayName=j6.displayName;const Yue=x.forwardRef(({className:t,...e},n)=>i.jsx(E6,{ref:n,className:it("-mx-1 my-1 h-px bg-muted",t),...e}));Yue.displayName=E6.displayName;var v_="Checkbox",[Xue,ixe]=Pr(v_),[Jue,cC]=Xue(v_);function ede(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:u,required:d,value:f="on",internal_do_not_use_render:m}=t,[p,y]=Bs({prop:n,defaultProp:s??!1,onChange:u,caller:v_}),[j,b]=x.useState(null),[N,_]=x.useState(null),w=x.useRef(!1),E=j?!!o||!!j.closest("form"):!0,R={checked:p,disabled:a,setChecked:y,control:j,setControl:b,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:El(s)?!1:s,isFormControl:E,bubbleInput:N,setBubbleInput:_};return i.jsx(Jue,{scope:e,...R,children:tde(m)?m(R):r})}var T6="CheckboxTrigger",k6=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:u,required:d,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:y,bubbleInput:j}=cC(T6,t),b=ft(s,f),N=x.useRef(u);return x.useEffect(()=>{const _=a==null?void 0:a.form;if(_){const w=()=>m(N.current);return _.addEventListener("reset",w),()=>_.removeEventListener("reset",w)}},[a,m]),i.jsx(Ge.button,{type:"button",role:"checkbox","aria-checked":El(u)?"mixed":u,"aria-required":d,"data-state":M6(u),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:b,onKeyDown:Fe(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Fe(n,_=>{m(w=>El(w)?!0:!w),j&&y&&(p.current=_.isPropagationStopped(),p.current||_.stopPropagation())})})});k6.displayName=T6;var uC=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u,onCheckedChange:d,form:f,...m}=t;return i.jsx(ede,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(k6,{...m,ref:e,__scopeCheckbox:n}),p&&i.jsx(O6,{__scopeCheckbox:n})]})})});uC.displayName=v_;var R6="CheckboxIndicator",I6=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=cC(R6,n);return i.jsx(Tr,{present:r||El(a.checked)||a.checked===!0,children:i.jsx(Ge.span,{"data-state":M6(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});I6.displayName=R6;var A6="CheckboxBubbleInput",O6=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:u,name:d,value:f,form:m,bubbleInput:p,setBubbleInput:y}=cC(A6,t),j=ft(n,y),b=f_(a),N=K0(r);x.useEffect(()=>{const w=p;if(!w)return;const E=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(E,"checked").set,B=!s.current;if(b!==a&&A){const I=new Event("click",{bubbles:B});w.indeterminate=El(a),A.call(w,El(a)?!1:a),w.dispatchEvent(I)}},[p,b,a,s]);const _=x.useRef(El(a)?!1:a);return i.jsx(Ge.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:l,disabled:u,name:d,value:f,form:m,...e,tabIndex:-1,ref:j,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O6.displayName=A6;function tde(t){return typeof t=="function"}function El(t){return t==="indeterminate"}function M6(t){return El(t)?"indeterminate":t?"checked":"unchecked"}const Ex=x.forwardRef(({className:t,...e},n)=>i.jsx(uC,{ref:n,className:it("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(I6,{className:it("flex items-center justify-center text-current"),children:i.jsx(AE,{className:"h-4 w-4"})})}));Ex.displayName=uC.displayName;var D6=["PageUp","PageDown"],L6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Jh="Slider",[jj,nde,rde]=Xp(Jh),[V6,axe]=Pr(Jh,[rde]),[sde,y_]=V6(Jh),$6=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:f,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:y=!1,form:j,...b}=t,N=x.useRef(new Set),_=x.useRef(0),E=o==="horizontal"?ide:ade,[R=[],A]=Bs({prop:f,defaultProp:d,onChange:M=>{var k;(k=[...N.current][_.current])==null||k.focus(),m(M)}}),B=x.useRef(R);function I(M){const D=dde(R,M);P(M,D)}function F(M){P(M,_.current)}function $(){const M=B.current[_.current];R[_.current]!==M&&p(R)}function P(M,D,{commit:k}={commit:!1}){const G=pde(a),se=gde(Math.round((M-r)/a)*a+r,G),ae=yp(se,[r,s]);A((K=[])=>{const z=cde(K,ae,D);if(mde(z,u*a)){_.current=z.indexOf(ae);const H=String(z)!==String(K);return H&&k&&p(z),H?z:K}else return K})}return i.jsx(sde,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:_,thumbs:N.current,values:R,orientation:o,form:j,children:i.jsx(jj.Provider,{scope:t.__scopeSlider,children:i.jsx(jj.Slot,{scope:t.__scopeSlider,children:i.jsx(E,{"aria-disabled":l,"data-disabled":l?"":void 0,...b,ref:e,onPointerDown:Fe(b.onPointerDown,()=>{l||(B.current=R)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:I,onSlideMove:l?void 0:F,onSlideEnd:l?void 0:$,onHomeKeyDown:()=>!l&&P(r,0,{commit:!0}),onEndKeyDown:()=>!l&&P(s,R.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:D})=>{if(!l){const se=D6.includes(M.key)||M.shiftKey&&L6.includes(M.key)?10:1,ae=_.current,K=R[ae],z=a*se*D;P(K+z,ae,{commit:!0})}}})})})})});$6.displayName=Jh;var[z6,U6]=V6(Jh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ide=x.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d,...f}=t,[m,p]=x.useState(null),y=ft(e,E=>p(E)),j=x.useRef(void 0),b=mu(s),N=b==="ltr",_=N&&!a||!N&&a;function w(E){const R=j.current||m.getBoundingClientRect(),A=[0,R.width],I=dC(A,_?[n,r]:[r,n]);return j.current=R,I(E-R.left)}return i.jsx(z6,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:i.jsx(B6,{dir:b,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const R=w(E.clientX);o==null||o(R)},onSlideMove:E=>{const R=w(E.clientX);l==null||l(R)},onSlideEnd:()=>{j.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=F6[_?"from-left":"from-right"].includes(E.key);d==null||d({event:E,direction:A?-1:1})}})})}),ade=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=t,f=x.useRef(null),m=ft(e,f),p=x.useRef(void 0),y=!s;function j(b){const N=p.current||f.current.getBoundingClientRect(),_=[0,N.height],E=dC(_,y?[r,n]:[n,r]);return p.current=N,E(b-N.top)}return i.jsx(z6,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:i.jsx(B6,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const N=j(b.clientY);a==null||a(N)},onSlideMove:b=>{const N=j(b.clientY);o==null||o(N)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:b=>{const _=F6[y?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:_?-1:1})}})})}),B6=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:u,...d}=t,f=y_(Jh,n);return i.jsx(Ge.span,{...d,ref:e,onKeyDown:Fe(t.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):D6.concat(L6).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:Fe(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(p)?p.focus():r(m)}),onPointerMove:Fe(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:Fe(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})})}),H6="SliderTrack",q6=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=y_(H6,n);return i.jsx(Ge.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});q6.displayName=H6;var Nj="SliderRange",W6=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=y_(Nj,n),a=U6(Nj,n),o=x.useRef(null),l=ft(e,o),u=s.values.length,d=s.values.map(p=>Z6(p,s.min,s.max)),f=u>1?Math.min(...d):0,m=100-Math.max(...d);return i.jsx(Ge.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:f+"%",[a.endEdge]:m+"%"}})});W6.displayName=Nj;var Sj="SliderThumb",G6=x.forwardRef((t,e)=>{const n=nde(t.__scopeSlider),[r,s]=x.useState(null),a=ft(e,l=>s(l)),o=x.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(ode,{...t,ref:a,index:o})}),ode=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...a}=t,o=y_(Sj,n),l=U6(Sj,n),[u,d]=x.useState(null),f=ft(e,w=>d(w)),m=u?o.form||!!u.closest("form"):!0,p=K0(u),y=o.values[r],j=y===void 0?0:Z6(y,o.min,o.max),b=ude(r,o.values.length),N=p==null?void 0:p[l.size],_=N?hde(N,j,l.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${_}px)`},children:[i.jsx(jj.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(Ge.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:f,style:y===void 0?{display:"none"}:t.style,onFocus:Fe(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),m&&i.jsx(K6,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},r)]})});G6.displayName=Sj;var lde="RadioBubbleInput",K6=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=x.useRef(null),a=ft(s,r),o=f_(e);return x.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const m=new Event("input",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Ge.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});K6.displayName=lde;function cde(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,a)=>s-a)}function Z6(t,e,n){const a=100/(n-e)*(t-e);return yp(a,[0,100])}function ude(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function dde(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function hde(t,e,n){const r=t/2,a=dC([0,50],[0,r]);return(r-a(e)*n)*n}function fde(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function mde(t,e){if(e>0){const n=fde(t);return Math.min(...n)>=e}return!0}function dC(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function pde(t){return(String(t).split(".")[1]||"").length}function gde(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var Q6=$6,vde=q6,yde=W6,xde=G6;const Y6=x.forwardRef(({className:t,...e},n)=>i.jsxs(Q6,{ref:n,className:it("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(vde,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(yde,{className:"absolute h-full bg-primary"})}),i.jsx(xde,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Y6.displayName=Q6.displayName;const hg=vu({title:Et().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:Et().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:oC(Et()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Et().min(1,"Veuillez spécifier un lieu de rencontre")}),_de=hg.extend({price:Et().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:xue(["new","like-new","good","fair"]),paymentMethods:oC(Et()).min(1,"Sélectionnez au moins un mode de paiement")}),wde=hg.extend({donationReason:Et().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),bde=hg.extend({desiredItems:oC(Et()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:Et().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),jde=hg.extend({hourlyRate:Et().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:H5().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Et().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:Et().optional()}),Nde=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],FR=[{value:"cash",label:"Espèces",icon:zD},{value:"transfer",label:"Virement bancaire",icon:Un},{value:"lydia",label:"Lydia",icon:zh},{value:"paypal",label:"PayPal",icon:Un}];delete Yh.Icon.Default.prototype._getIconUrl;Yh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Sde=()=>{var Y,ne,ee,ie,fe,_e,Ie,Ce;const{currentUser:t,userProfile:e}=Nn(),{createListing:n}=s_(),r=fr(),[s]=QO(),[a,o]=x.useState(()=>s.get("type")||"sell"),[l,u]=x.useState([]),[d,f]=x.useState(!1),[m,p]=x.useState(""),[y,j]=x.useState([]),[b,N]=x.useState(!1),[_,w]=x.useState([""]),[E,R]=x.useState(""),[A,B]=x.useState([]),[I,F]=x.useState([1]),[$,P]=x.useState(null),[M,D]=x.useState(!1),G=Fc({resolver:Vc((()=>{switch(a){case"sell":return _de;case"gift":return wde;case"swap":return bde;case"service":return jde;default:return hg}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});x.useEffect(()=>{G.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),j([]),w([""]),B([]),F([1]),u([])},[a,G]);const se=async he=>{if(!t)throw new Error("User not authenticated");const De=Date.now(),qe=`listings/${t.uid}/${De}_${he.name}`,vt=lE(uE,qe),Z=await aE(vt,he);return await oE(Z.ref)},ae=async he=>{const De=he.target.files;if(!(!De||De.length===0)){f(!0);try{const vt=Array.from(De).slice(0,10-l.length).filter(re=>re.size<=15728640).map(re=>se(re)),Z=await Promise.all(vt);u(re=>[...re,...Z])}catch(qe){console.error("Error uploading images:",qe)}finally{f(!1)}}},K=he=>{u(De=>De.filter((qe,vt)=>vt!==he))},z=()=>{if(m.trim()&&!y.includes(m.trim())&&y.length<5){const he=[...y,m.trim()];j(he),G.setValue("tags",he),p("")}},H=he=>{const De=y.filter(qe=>qe!==he);j(De),G.setValue("tags",De)},V=()=>{if(E.trim()){const he=[..._.filter(De=>De.trim()),E.trim()];w(he),G.setValue("desiredItems",he),R("")}},q=he=>{const De=_.filter((qe,vt)=>vt!==he);w(De),G.setValue("desiredItems",De)},J=(he,De)=>{const qe=De?[...A,he]:A.filter(vt=>vt!==he);B(qe),G.setValue("paymentMethods",qe)};async function me(he){const qe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(he)}`)).json();return qe&&qe[0]?[parseFloat(qe[0].lat),parseFloat(qe[0].lon)]:null}x.useEffect(()=>{const he=G.watch("meetingLocation");he&&he.length>5&&me(he).then(De=>{De&&P(De)})},[G.watch("meetingLocation")]);const Pe=async he=>{if(!(!t||!e)){N(!0);try{const De={title:he.title,description:he.description,currency:"EUR",category:"electronics",images:l,tags:he.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let qe;switch(a){case"sell":qe={...De,price:he.price,condition:he.condition,transactionType:"sale",description:`${he.description}

Modes de paiement acceptés: ${A.map(Z=>{var re;return(re=FR.find(de=>de.value===Z))==null?void 0:re.label}).join(", ")}`};break;case"gift":qe={...De,price:0,condition:"good",transactionType:"donation",description:`${he.description}

Raison du don: ${he.donationReason}`};break;case"swap":qe={...De,price:he.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:_.filter(Z=>Z.trim()).join(", "),description:`${he.description}

Recherche en échange: ${_.filter(Z=>Z.trim()).join(", ")}
Valeur estimée: ${he.estimatedValue}€`};break;case"service":qe={...De,price:he.hourlyRate,condition:"new",transactionType:"service",description:`${he.description}

Compétences: ${he.skills}
Tarif: ${he.hourlyRate}€/h
Durée prévue: ${I[0]}h${he.availability?`
Disponibilités: ${he.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",qe);const vt=await n(qe);r(`/listing/${vt}`)}catch(De){console.error("Error creating listing:",De)}finally{N(!1)}}},Me=()=>{const he=G.formState.errors,De=G.watch("title")&&G.watch("description")&&G.watch("meetingLocation")&&y.length>0;switch(a){case"sell":return De&&G.watch("price")&&A.length>0&&!he.title&&!he.description&&!he.price;case"gift":return De&&G.watch("donationReason")&&!he.title&&!he.description&&!he.donationReason;case"swap":return De&&_.some(qe=>qe.trim())&&G.watch("estimatedValue")&&!he.title&&!he.description&&!he.estimatedValue;case"service":return De&&G.watch("hourlyRate")&&G.watch("skills")&&!he.title&&!he.description&&!he.hourlyRate&&!he.skills;default:return!1}},oe=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}D(!0),navigator.geolocation.getCurrentPosition(async he=>{const{latitude:De,longitude:qe}=he.coords;P([De,qe]);const Z=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${De}&lon=${qe}`)).json();Z&&Z.display_name&&G.setValue("meetingLocation",Z.display_name,{shouldValidate:!0}),D(!1)},()=>{alert("Impossible d'accéder à la position."),D(!1)})};function xe(){return YE({click:async he=>{P([he.latlng.lat,he.latlng.lng]),D(!0);const qe=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${he.latlng.lat}&lon=${he.latlng.lng}`)).json();qe&&qe.display_name&&G.setValue("meetingLocation",qe.display_name,{shouldValidate:!0}),D(!1)}}),$?i.jsx(JE,{position:$}):null}return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),i.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),i.jsxs("form",{onSubmit:G.handleSubmit(Pe),className:"space-y-8",children:[i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(q1,{className:"w-5 h-5"}),"Type d'annonce"]}),i.jsx(Mt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),i.jsx(ye,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ve,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx(rx,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),i.jsx(ve,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx(th,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),i.jsx(ve,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx(vo,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),i.jsx(ve,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:i.jsxs(ye,{className:"p-4 text-center",children:[i.jsx(Hn,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsx(Je,{className:"text-foreground",children:"Informations principales"})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),i.jsx(rt,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...G.register("title"),className:"mt-1",maxLength:80}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(Y=G.formState.errors.title)==null?void 0:Y.message}),i.jsxs("span",{children:[((ne=G.watch("title"))==null?void 0:ne.length)||0,"/80"]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),i.jsx(ui,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...G.register("description"),className:"mt-1",maxLength:1e3}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ee=G.formState.errors.description)==null?void 0:ee.message}),i.jsxs("span",{children:[((ie=G.watch("description"))==null?void 0:ie.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(rx,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),i.jsx(rt,{id:"price",type:"text",placeholder:"0,00",...G.register("price"),className:"mt-1"}),G.formState.errors.price&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:G.formState.errors.price.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),i.jsxs(ln,{onValueChange:he=>G.setValue("condition",he),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{placeholder:"Sélectionnez un état"})}),i.jsx(an,{children:Nde.map(he=>i.jsx(Qe,{value:he.value,children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:he.label}),i.jsx("div",{className:"text-xs text-muted-foreground",children:he.description})]})},he.value))})]}),G.formState.errors.condition&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:G.formState.errors.condition.message})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{className:"text-foreground",children:"Modes de paiement acceptés *"}),i.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:FR.map(he=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ex,{id:he.value,checked:A.includes(he.value),onCheckedChange:De=>J(he.value,De)}),i.jsxs(Oe,{htmlFor:he.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[i.jsx(he.icon,{className:"w-4 h-4"}),he.label]})]},he.value))}),A.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(th,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),i.jsx(ye,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),i.jsx(ui,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...G.register("donationReason"),className:"mt-1",maxLength:140}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(fe=G.formState.errors.donationReason)==null?void 0:fe.message}),i.jsxs("span",{children:[((_e=G.watch("donationReason"))==null?void 0:_e.length)||0,"/140"]})]})]})})]}),a==="swap"&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(vo,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),i.jsxs("div",{className:"space-y-2 mt-2",children:[_.filter(he=>he.trim()).map((he,De)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rt,{value:he,readOnly:!0,className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>q(De),children:i.jsx(QD,{className:"w-4 h-4"})})]},De)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{placeholder:"Ex: Livre de physique L2",value:E,onChange:he=>R(he.target.value),onKeyPress:he=>he.key==="Enter"&&(he.preventDefault(),V()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:V,disabled:!E.trim(),children:i.jsx(Mc,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),i.jsx(rt,{id:"estimatedValue",type:"text",placeholder:"0,00",...G.register("estimatedValue"),className:"mt-1"}),G.formState.errors.estimatedValue&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:G.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Hn,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),i.jsx(ui,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...G.register("skills"),className:"mt-1",maxLength:500}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(Ie=G.formState.errors.skills)==null?void 0:Ie.message}),i.jsxs("span",{children:[((Ce=G.watch("skills"))==null?void 0:Ce.length)||0,"/500"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),i.jsx(rt,{id:"hourlyRate",type:"text",placeholder:"15,00",...G.register("hourlyRate"),className:"mt-1"}),G.formState.errors.hourlyRate&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:G.formState.errors.hourlyRate.message})]}),i.jsxs("div",{children:[i.jsxs(Oe,{className:"text-foreground",children:["Durée prévue: ",I[0],"h"]}),i.jsx(Y6,{value:I,onValueChange:he=>{F(he),G.setValue("duration",he[0])},max:720,min:1,step:1,className:"mt-2"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:"1h"}),i.jsx("span",{children:"720h"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),i.jsx(rt,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...G.register("availability"),className:"mt-1"})]})]})]}),i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Oc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),i.jsx(Mt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),i.jsx(ye,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((he,De)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:he,alt:`Photo ${De+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx(te,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>K(De),children:i.jsx(G1,{className:"w-3 h-3"})}),De===0&&i.jsx(ot,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},De)),l.length<10&&i.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[i.jsxs("div",{className:"text-center",children:[d?i.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):i.jsx(W1,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:d?"Upload...":"Ajouter"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ae,className:"hidden",disabled:d})]})]})})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(up,{className:"w-5 h-5"}),"Tags et localisation"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{className:"text-foreground",children:"Tags * (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:y.map(he=>i.jsxs(ot,{variant:"secondary",className:"flex items-center gap-1",children:[he,i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>H(he),children:i.jsx(G1,{className:"w-3 h-3"})})]},he))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{placeholder:"Ajouter un tag...",value:m,onChange:he=>p(he.target.value),onKeyPress:he=>he.key==="Enter"&&(he.preventDefault(),z()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:z,disabled:!m.trim()||y.length>=5,children:"Ajouter"})]}),y.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(rt,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...G.register("meetingLocation"),className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:oe,disabled:M,title:"Détecter ma position",children:M?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]}),G.formState.errors.meetingLocation&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:G.formState.errors.meetingLocation.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),i.jsx("div",{className:"mt-3",children:i.jsxs(XE,{center:$||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(eC,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(xe,{})]})})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Em,{className:"w-4 h-4"}),"Validation"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-2 ${G.watch("title")&&G.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${G.watch("title")&&G.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Titre (5-80 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${G.watch("description")&&G.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${G.watch("description")&&G.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Description (20-1000 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${y.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${y.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tags (1-5)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${G.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${G.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Point de rencontre"})]})]})})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Ht,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6",children:[i.jsx(te,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:b||!Me()||d,children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):i.jsxs(i.Fragment,{children:[i.jsx(q1,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:Me()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var x_="Tabs",[Ede,oxe]=Pr(x_,[Q0]),X6=Q0(),[Cde,hC]=Ede(x_),J6=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:u="automatic",...d}=t,f=mu(l),[m,p]=Bs({prop:r,onChange:s,defaultProp:a??"",caller:x_});return i.jsx(Cde,{scope:n,baseId:$s(),value:m,onValueChange:p,orientation:o,dir:f,activationMode:u,children:i.jsx(Ge.div,{dir:f,"data-orientation":o,...d,ref:e})})});J6.displayName=x_;var eV="TabsList",tV=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=hC(eV,n),o=X6(n);return i.jsx(DL,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Ge.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});tV.displayName=eV;var nV="TabsTrigger",rV=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=hC(nV,n),l=X6(n),u=aV(o.baseId,r),d=oV(o.baseId,r),f=r===o.value;return i.jsx(LL,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Ge.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...a,ref:e,onMouseDown:Fe(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?o.onValueChange(r):m.preventDefault()}),onKeyDown:Fe(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(r)}),onFocus:Fe(t.onFocus,()=>{const m=o.activationMode!=="manual";!f&&!s&&m&&o.onValueChange(r)})})})});rV.displayName=nV;var sV="TabsContent",iV=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=hC(sV,n),u=aV(l.baseId,r),d=oV(l.baseId,r),f=r===l.value,m=x.useRef(f);return x.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Tr,{present:s||f,children:({present:p})=>i.jsx(Ge.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&a})})});iV.displayName=sV;function aV(t,e){return`${t}-trigger-${e}`}function oV(t,e){return`${t}-content-${e}`}var Pde=J6,lV=tV,cV=rV,uV=iV;const yu=Pde,ec=x.forwardRef(({className:t,...e},n)=>i.jsx(lV,{ref:n,className:it("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));ec.displayName=lV.displayName;const pn=x.forwardRef(({className:t,...e},n)=>i.jsx(cV,{ref:n,className:it("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));pn.displayName=cV.displayName;const gn=x.forwardRef(({className:t,...e},n)=>i.jsx(uV,{ref:n,className:it("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));gn.displayName=uV.displayName;const dV=({currentPhotoURL:t,displayName:e})=>{var _,w;const{currentUser:n,updateUserProfile:r}=Nn(),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[u,d]=x.useState(null),[f,m]=x.useState(null),p=x.useRef(null),y=E=>{var B;const R=(B=E.target.files)==null?void 0:B[0];if(!R)return;if(!R.type.startsWith("image/")){be.error("Veuillez sélectionner une image");return}if(R.size>5*1024*1024){be.error("L'image ne doit pas dépasser 5MB");return}m(R);const A=new FileReader;A.onload=I=>{var F;d((F=I.target)==null?void 0:F.result)},A.readAsDataURL(R)},j=async()=>{if(!(!f||!n)){l(!0);try{const E=`profile-photos/${n.uid}-${Date.now()}.${f.name.split(".").pop()}`,R=lE(uE,E),A=await aE(R,f),B=await oE(A.ref);await ep(n,{photoURL:B}),await r({photoURL:B}),be.success("Photo de profil mise à jour !"),a(!1),d(null),m(null)}catch(E){console.error("Erreur lors de l'upload:",E),be.error("Erreur lors de la mise à jour de la photo")}finally{l(!1)}}},b=async()=>{if(n){l(!0);try{await ep(n,{photoURL:null}),await r({photoURL:null}),be.success("Photo de profil supprimée"),a(!1)}catch(E){console.error("Erreur lors de la suppression:",E),be.error("Erreur lors de la suppression de la photo")}finally{l(!1)}}},N=()=>{m(null),d(null),p.current&&(p.current.value="")};return i.jsxs(wa,{open:s,onOpenChange:a,children:[i.jsx(Dd,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsxs(_o,{className:"h-20 w-20",children:[i.jsx(wo,{src:t||""}),i.jsx(bo,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((_=e[0])==null?void 0:_.toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Oc,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Oc,{className:"w-3 h-3 text-white"})})]})}),i.jsxs(Mi,{className:"max-w-md",children:[i.jsx(ba,{children:i.jsxs(Di,{className:"flex items-center gap-2",children:[i.jsx(Oc,{className:"w-5 h-5"}),"Photo de profil"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs(_o,{className:"h-32 w-32",children:[i.jsx(wo,{src:u||t||""}),i.jsx(bo,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:y,className:"hidden"}),f?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[i.jsx("p",{className:"font-medium",children:f.name}),i.jsxs("p",{children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{onClick:N,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),i.jsx(te,{onClick:j,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):i.jsxs(i.Fragment,{children:[i.jsx(W1,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs(te,{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[i.jsx(W1,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&i.jsxs(te,{onClick:b,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(G1,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),i.jsx("p",{children:"• Taille maximale : 5MB"}),i.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},Kr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Tde=()=>{const{currentUser:t,userProfile:e}=Nn(),[n,r]=x.useState([]),[s,a]=x.useState([]),[o,l]=x.useState([]),[u,d]=x.useState(null),[f,m]=x.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[p,y]=x.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[j,b]=x.useState({}),[N,_]=x.useState(null),[w,E]=x.useState(""),R=async()=>{if(t)try{y(xe=>({...xe,profile:!0}));const oe=await Vs(jt(Ue,"users",t.uid));if(oe.exists()){const xe=oe.data();d({...xe,createdAt:Kr(xe.createdAt),updatedAt:Kr(xe.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),d(null)}catch(oe){console.error("Erreur lors du chargement du profil:",oe),d(null)}finally{y(oe=>({...oe,profile:!1}))}};x.useEffect(()=>{t&&(R(),A(),B(),I())},[t]);const A=async()=>{if(t)try{y(ee=>({...ee,listings:!0}));const oe=bn(Bt(Ue,"listings"),tr("sellerId","==",t.uid),oi(20)),xe=await zn(oe),Y=[];xe.forEach(ee=>{const ie=ee.data();Y.push({id:ee.id,...ie,createdAt:Kr(ie.createdAt),updatedAt:Kr(ie.updatedAt)})}),Y.sort((ee,ie)=>Kr(ie.createdAt).getTime()-Kr(ee.createdAt).getTime()),r(Y);const ne=Y.filter(ee=>ee.status==="active");m(ee=>({...ee,totalListings:Y.length,activeListings:ne.length}))}catch(oe){console.error("Erreur lors du chargement des annonces:",oe)}finally{y(oe=>({...oe,listings:!1}))}},B=async()=>{if(t)try{y(_e=>({..._e,reviews:!0}));const oe=bn(Bt(Ue,"reviews"),tr("revieweeId","==",t.uid),oi(10)),xe=await zn(oe),Y=[];xe.forEach(_e=>{const Ie=_e.data();Y.push({id:_e.id,...Ie,replies:Array.isArray(Ie.replies)?Ie.replies.map(Ce=>({...Ce,createdAt:Ce.createdAt instanceof Date?Ce.createdAt:Ce.createdAt&&typeof Ce.createdAt.toDate=="function"?Ce.createdAt.toDate():new Date})):[],likes:Array.isArray(Ie.likes)?Ie.likes:[],dislikes:Array.isArray(Ie.dislikes)?Ie.dislikes:[],createdAt:Kr(Ie.createdAt)})}),Y.sort((_e,Ie)=>Kr(Ie.createdAt).getTime()-Kr(_e.createdAt).getTime()),a(Y);const ne=Array.from(new Set(Y.map(_e=>_e.reviewerId))),ee={...j};await Promise.all(ne.map(async _e=>{if(!ee[_e]){const Ie=await Vs(jt(Ue,"users",_e));if(Ie.exists()){const Ce=Ie.data();ee[_e]={displayName:Ce.displayName||"Utilisateur",photoURL:Ce.photoURL||void 0}}else ee[_e]={displayName:""}}})),b(ee);const ie=Y.reduce((_e,Ie)=>_e+Ie.rating,0),fe=Y.length>0?ie/Y.length:0;m(_e=>({..._e,totalReviews:Y.length,averageRating:Math.round(fe*10)/10}))}catch(oe){console.error("Erreur lors du chargement des avis:",oe)}finally{y(oe=>({...oe,reviews:!1}))}},I=async()=>{if(t)try{y(ne=>({...ne,favorites:!0}));const oe=bn(Bt(Ue,"favorites"),tr("userId","==",t.uid),oi(20)),xe=await zn(oe),Y=[];if(xe.forEach(ne=>{const ee=ne.data();Y.push({id:ne.id,...ee,createdAt:Kr(ee.createdAt)})}),Y.sort((ne,ee)=>Kr(ee.createdAt).getTime()-Kr(ne.createdAt).getTime()),m(ne=>({...ne,totalFavorites:Y.length})),Y.length>0){const ne=Y.slice(0,6).map(async ie=>{try{const fe=await Vs(jt(Ue,"listings",ie.listingId));if(fe.exists()){const _e=fe.data();return{id:fe.id,..._e,createdAt:Kr(_e.createdAt),updatedAt:Kr(_e.updatedAt)}}return null}catch(fe){return console.error("Erreur lors du chargement d'une annonce favorite:",fe),null}}),ee=await Promise.all(ne);l(ee.filter(ie=>ie!==null))}}catch(oe){console.error("Erreur lors du chargement des favoris:",oe)}finally{y(oe=>({...oe,favorites:!1}))}},F=oe=>{if(!oe)return"Date inconnue";try{const xe=Kr(oe);return isNaN(xe.getTime())?"Date invalide":Qh(xe,{addSuffix:!0,locale:Vr})}catch{return"Date invalide"}},$=oe=>Array.from({length:5},(xe,Y)=>i.jsx(dl,{className:`h-4 w-4 ${Y<oe?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Y)),P=localStorage.getItem("pendingUserData"),M=P?JSON.parse(P):{};let D=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||M.displayName||"";!D&&(t!=null&&t.displayName)&&(D=t.displayName),!D&&(t!=null&&t.email)&&(D=t.email.split("@")[0]),D||(D="Utilisateur");let k=(u==null?void 0:u.university)||(e==null?void 0:e.university)||M.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||M.university==="Autre université"&&M.otherUniversity){const oe=u==null?void 0:u.otherUniversity,xe=e==null?void 0:e.otherUniversity,Y=M.otherUniversity;k=oe||xe||Y||"Université personnalisée"}k||(k="Université spécifiée lors de l'inscription");let G=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||M.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||M.fieldOfStudy==="Autre"&&M.otherFieldOfStudy){const oe=u==null?void 0:u.otherFieldOfStudy,xe=e==null?void 0:e.otherFieldOfStudy,Y=M.otherFieldOfStudy;G=oe||xe||Y||"Filière personnalisée"}G||(G="Filière non spécifiée");const se=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||M.graduationYear||"",ae=(u==null?void 0:u.email)||(e==null?void 0:e.email)||M.email||(t==null?void 0:t.email)||"",K=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",z=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),H=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),V=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",q=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,J=t&&e&&t.uid===e.id,me=async oe=>{if(t)try{const xe=jt(Ue,"reviews",oe),Y=s.find(ie=>ie.id===oe);if(!Y)return;const ne=Y.likes||[],ee=Y.dislikes||[];ne.includes(t.uid)?await On(xe,{likes:ne.filter(ie=>ie!==t.uid)}):await On(xe,{likes:[...ne,t.uid],dislikes:ee.filter(ie=>ie!==t.uid)}),a(ie=>ie.map(fe=>{if(fe.id===oe){const _e=fe.likes||[],Ie=fe.dislikes||[];return _e.includes(t.uid)?{...fe,likes:_e.filter(Ce=>Ce!==t.uid)}:{...fe,likes:[..._e,t.uid],dislikes:Ie.filter(Ce=>Ce!==t.uid)}}return fe}))}catch(xe){console.error("Error liking review:",xe),cr.error("Erreur lors du like")}},Pe=async oe=>{if(t)try{const xe=jt(Ue,"reviews",oe),Y=s.find(ie=>ie.id===oe);if(!Y)return;const ne=Y.likes||[],ee=Y.dislikes||[];ee.includes(t.uid)?await On(xe,{dislikes:ee.filter(ie=>ie!==t.uid)}):await On(xe,{dislikes:[...ee,t.uid],likes:ne.filter(ie=>ie!==t.uid)}),a(ie=>ie.map(fe=>{if(fe.id===oe){const _e=fe.likes||[],Ie=fe.dislikes||[];return Ie.includes(t.uid)?{...fe,dislikes:Ie.filter(Ce=>Ce!==t.uid)}:{...fe,dislikes:[...Ie,t.uid],likes:_e.filter(Ce=>Ce!==t.uid)}}return fe}))}catch(xe){console.error("Error disliking review:",xe),cr.error("Erreur lors du dislike")}},Me=async oe=>{if(!(!t||!w.trim()))try{const xe=jt(Ue,"reviews",oe),Y=s.find(ee=>ee.id===oe);if(!Y)return;const ne={userId:t.uid,comment:w.trim(),createdAt:new Date};await On(xe,{replies:[...Y.replies||[],ne]}),a(ee=>ee.map(ie=>ie.id===oe?{...ie,replies:[...ie.replies||[],ne]}:ie)),E(""),_(null),cr.success("Réponse envoyée")}catch(xe){console.error("Error replying to review:",xe),cr.error("Erreur lors de l'envoi de la réponse")}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsx(ve,{children:i.jsx(Xe,{className:"text-left",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[i.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[i.jsx(dV,{currentPhotoURL:K,displayName:D}),H&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Ht,{className:"w-3 h-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[i.jsx(Je,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:D}),H&&i.jsxs(ot,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[i.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx(Mt,{className:"text-base text-center sm:text-left break-all",children:ae}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[i.jsxs("div",{children:[i.jsx(ss,{className:"h-4 w-4 mr-1 inline"})," Université : ",i.jsx("span",{className:"text-sm",children:k})]}),i.jsxs("div",{children:[i.jsx(Vh,{className:"h-4 w-4 mr-1 inline"})," Filière : ",i.jsx("span",{className:"text-sm",children:G})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",i.jsx("span",{className:"text-sm",children:se})]})]}),V&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Lr,{className:"h-4 w-4 mr-1"}),i.jsx("span",{className:"text-sm",children:V})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(ii,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"text-sm",children:["Membre depuis ",F(z)]})]}),q&&q>0&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[i.jsx(Oi,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"text-sm font-medium",children:[q," kg CO₂ économisés"]})]})]})]})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_n,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalListings}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qp,{className:"h-5 w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.activeListings}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(dl,{className:"h-5 w-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.reviews?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.averageRating||"—"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Fr,{className:"h-5 w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.favorites?i.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),i.jsxs(yu,{defaultValue:"listings",className:"space-y-4",children:[i.jsxs(ec,{className:"grid w-full grid-cols-3",children:[i.jsxs(pn,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(_n,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),i.jsx("span",{className:"sm:hidden",children:"Annonces"}),!p.listings&&f.totalListings>0&&i.jsx(ot,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalListings})]}),i.jsxs(pn,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(dl,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),i.jsx("span",{className:"sm:hidden",children:"Avis"}),!p.reviews&&f.totalReviews>0&&i.jsx(ot,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalReviews})]}),i.jsxs(pn,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Fr,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),i.jsx("span",{className:"sm:hidden",children:"Favoris"}),!p.favorites&&f.totalFavorites>0&&i.jsx(ot,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalFavorites})]})]}),i.jsx(gn,{value:"listings",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(_n,{className:"w-5 h-5"}),"Mes Annonces"]}),i.jsx(Mt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),i.jsx(ye,{children:p.listings?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((oe,xe)=>i.jsxs(ve,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ye,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},xe))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_n,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),i.jsx(te,{asChild:!0,children:i.jsx(ze,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(oe=>i.jsx(hx,{listing:oe},oe.id))})})]})}),i.jsx(gn,{value:"reviews",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(dl,{className:"w-5 h-5"}),"Avis Reçus"]}),i.jsx(Mt,{children:"Les avis laissés par d'autres étudiants"})]}),i.jsx(ye,{children:p.reviews?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((oe,xe)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((Y,ne)=>i.jsx("div",{className:"w-4 h-4 bg-muted rounded"},ne))}),i.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},xe))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(jn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):i.jsx("div",{className:"space-y-4",children:s.map(oe=>{var xe,Y,ne,ee,ie,fe;return i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex",children:$(oe.rating)}),i.jsxs(ot,{variant:"secondary",className:"text-xs",children:[oe.rating,"/5"]})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:F(oe.createdAt)})]}),i.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:oe.comment}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((xe=j[oe.reviewerId])==null?void 0:xe.photoURL)&&i.jsx("img",{src:j[oe.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),oe.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(Y=j[oe.reviewerId])!=null&&Y.displayName?j[oe.reviewerId].displayName:i.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),i.jsx(ot,{variant:"outline",className:"text-xs",children:oe.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[i.jsxs(te,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ne=oe.likes)!=null&&ne.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>me(oe.id),children:[i.jsx(ZY,{className:"w-4 h-4"}),i.jsx("span",{children:((ee=oe.likes)==null?void 0:ee.length)||0})]}),i.jsxs(te,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ie=oe.dislikes)!=null&&ie.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Pe(oe.id),children:[i.jsx(KY,{className:"w-4 h-4"}),i.jsx("span",{children:((fe=oe.dislikes)==null?void 0:fe.length)||0})]}),i.jsxs(te,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>_(N===oe.id?null:oe.id),children:[i.jsx(jn,{className:"w-4 h-4"}),i.jsx("span",{children:"Répondre"})]})]}),N===oe.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(ui,{placeholder:"Votre réponse...",value:w,onChange:_e=>E(_e.target.value),className:"min-h-[80px]"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{_(null),E("")},children:"Annuler"}),i.jsx(te,{size:"sm",onClick:()=>Me(oe.id),disabled:!w.trim(),children:"Envoyer"})]})]}),oe.replies&&oe.replies.length>0&&i.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:oe.replies.map((_e,Ie)=>{var Ce;return i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:J&&_e.userId===(t==null?void 0:t.uid)?"Vous":((Ce=j[_e.userId])==null?void 0:Ce.displayName)||"Utilisateur"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:F(_e.createdAt)})]}),i.jsx("p",{className:"text-muted-foreground text-left",children:_e.comment})]},Ie)})})]},oe.id)})})})]})}),i.jsx(gn,{value:"favorites",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Fr,{className:"w-5 h-5"}),"Mes Favoris"]}),i.jsx(Mt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),i.jsx(ye,{children:p.favorites?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((oe,xe)=>i.jsxs(ve,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ye,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},xe))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Fr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),i.jsx(te,{asChild:!0,children:i.jsx(ze,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(oe=>i.jsx(hx,{listing:oe},oe.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var __="Switch",[kde,lxe]=Pr(__),[Rde,Ide]=kde(__),hV=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u="on",onCheckedChange:d,form:f,...m}=t,[p,y]=x.useState(null),j=ft(e,E=>y(E)),b=x.useRef(!1),N=p?f||!!p.closest("form"):!0,[_,w]=Bs({prop:s,defaultProp:a??!1,onChange:d,caller:__});return i.jsxs(Rde,{scope:n,checked:_,disabled:l,children:[i.jsx(Ge.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":gV(_),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:j,onClick:Fe(t.onClick,E=>{w(R=>!R),N&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),N&&i.jsx(pV,{control:p,bubbles:!b.current,name:r,value:u,checked:_,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});hV.displayName=__;var fV="SwitchThumb",mV=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Ide(fV,n);return i.jsx(Ge.span,{"data-state":gV(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});mV.displayName=fV;var Ade="SwitchBubbleInput",pV=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=x.useRef(null),l=ft(o,a),u=f_(n),d=K0(e);return x.useEffect(()=>{const f=o.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&y){const j=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(j)}},[u,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pV.displayName=Ade;function gV(t){return t?"checked":"unchecked"}var vV=hV,Ode=mV;const ar=x.forwardRef(({className:t,...e},n)=>i.jsx(vV,{className:it("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Ode,{className:it("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ar.displayName=vV.displayName;var Mde="Separator",VR="horizontal",Dde=["horizontal","vertical"],yV=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=VR,...s}=t,a=Lde(r)?r:VR,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Ge.div,{"data-orientation":a,...l,...s,ref:e})});yV.displayName=Mde;function Lde(t){return Dde.includes(t)}var xV=yV;const Pi=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(xV,{ref:s,decorative:n,orientation:e,className:it("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Pi.displayName=xV.displayName;const Fde=vu({displayName:Et().min(2,"Le nom doit contenir au moins 2 caractères"),bio:Et().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:Et().optional(),university:Et().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Et().min(1,"Veuillez indiquer votre filière"),graduationYear:H5().min(2020).max(2035),campus:Et().optional(),location:Et().optional()}),Vde=vu({currentPassword:Et().min(6,"Le mot de passe actuel est requis"),newPassword:Et().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:Et()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),$de=vu({newEmail:Et().email("Email invalide"),password:Et().min(6,"Mot de passe requis pour changer l'email")}),zde=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],Ude=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],Bde=()=>{var G,se,ae,K,z,H;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=Nn(),s=fr(),[a,o]=x.useState("profile"),[l,u]=x.useState(!1),[d,f]=x.useState(!1),[m,p]=x.useState(!1),[y,j]=x.useState(!1),[b,N]=x.useState(""),[_,w]=x.useState({email:((G=e==null?void 0:e.notificationPreferences)==null?void 0:G.email)??!0,push:((se=e==null?void 0:e.notificationPreferences)==null?void 0:se.push)??!0,sms:((ae=e==null?void 0:e.notificationPreferences)==null?void 0:ae.sms)??!1,alerts:((K=e==null?void 0:e.notificationPreferences)==null?void 0:K.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[E,R]=x.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),A=Fc({resolver:Vc(Fde),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),B=Fc({resolver:Vc(Vde)}),I=Fc({resolver:Vc($de)});x.useEffect(()=>{var V,q,J,me;e&&(A.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),w({email:((V=e.notificationPreferences)==null?void 0:V.email)??!0,push:((q=e.notificationPreferences)==null?void 0:q.push)??!0,sms:((J=e.notificationPreferences)==null?void 0:J.sms)??!1,alerts:((me=e.notificationPreferences)==null?void 0:me.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,A]);const F=async V=>{u(!0);try{await n({displayName:V.displayName,bio:V.bio||null,phone:V.phone||null,university:V.university,fieldOfStudy:V.fieldOfStudy,graduationYear:V.graduationYear,campus:V.campus||null,location:V.location||null}),be.success("Profil mis à jour avec succès !")}catch(q){console.error("Erreur lors de la mise à jour du profil:",q),be.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},$=async()=>{u(!0);try{await n({notificationPreferences:{email:_.email,push:_.push,sms:_.sms,alerts:_.alerts}}),be.success("Préférences de notification mises à jour !")}catch(V){console.error("Erreur lors de la mise à jour des notifications:",V),be.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},P=async V=>{if(t){u(!0);try{const q=Rl.credential(t.email,V.currentPassword);await tT(t,q),await zq(t,V.newPassword),be.success("Mot de passe mis à jour avec succès !"),p(!1),B.reset()}catch(q){console.error("Erreur lors du changement de mot de passe:",q),q.code==="auth/wrong-password"?be.error("Mot de passe actuel incorrect"):be.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},M=async V=>{if(t){u(!0);try{const q=Rl.credential(t.email,V.password);await tT(t,q),await $q(t,V.newEmail),await n({email:V.newEmail}),be.success("Email mis à jour avec succès !"),j(!1),I.reset()}catch(q){console.error("Erreur lors du changement d'email:",q),q.code==="auth/wrong-password"?be.error("Mot de passe incorrect"):q.code==="auth/email-already-in-use"?be.error("Cet email est déjà utilisé"):be.error("Erreur lors du changement d'email")}finally{u(!1)}}},D=async()=>{if(!(!t||b!=="SUPPRIMER")){u(!0);try{const V=xD(Ue),q=["listings","conversations","reviews","favorites","reports"];for(const J of q){const me=bn(Bt(Ue,J),tr("userId","==",t.uid));(await zn(me)).forEach(Me=>{V.delete(Me.ref)})}V.delete(jt(Ue,"users",t.uid)),await V.commit(),await Wq(t),be.success("Compte supprimé avec succès"),s("/")}catch(V){console.error("Erreur lors de la suppression du compte:",V),be.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},k=async()=>{if(t){u(!0);try{const V={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},q=bn(Bt(Ue,"listings"),tr("sellerId","==",t.uid)),J=await zn(q);V.listings=J.docs.map(_e=>({id:_e.id,..._e.data()}));const me=bn(Bt(Ue,"conversations"),tr("participants","array-contains",t.uid)),Pe=await zn(me);V.conversations=Pe.docs.map(_e=>({id:_e.id,..._e.data()}));const Me=bn(Bt(Ue,"reviews"),tr("revieweeId","==",t.uid)),oe=await zn(Me);V.reviews=oe.docs.map(_e=>({id:_e.id,..._e.data()}));const xe=bn(Bt(Ue,"favorites"),tr("userId","==",t.uid)),Y=await zn(xe);V.favorites=Y.docs.map(_e=>({id:_e.id,..._e.data()}));const ne=JSON.stringify(V,null,2),ee=new Blob([ne],{type:"application/json"}),ie=URL.createObjectURL(ee),fe=document.createElement("a");fe.href=ie,fe.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,fe.click(),URL.revokeObjectURL(ie),be.success("Données exportées avec succès !")}catch(V){console.error("Erreur lors de l'export des données:",V),be.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[i.jsx(V0,{className:"w-8 h-8"}),"Paramètres"]}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),i.jsxs(yu,{value:a,onValueChange:o,className:"space-y-6",children:[i.jsxs(ec,{className:"grid w-full grid-cols-5",children:[i.jsxs(pn,{value:"profile",className:"flex items-center gap-2",children:[i.jsx(ss,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),i.jsxs(pn,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),i.jsxs(pn,{value:"privacy",className:"flex items-center gap-2",children:[i.jsx(eh,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),i.jsxs(pn,{value:"security",className:"flex items-center gap-2",children:[i.jsx(Ht,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),i.jsxs(pn,{value:"data",className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),i.jsx(gn,{value:"profile",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(ss,{className:"w-5 h-5"}),"Informations personnelles"]}),i.jsx(Mt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(dV,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Photo de profil"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),i.jsx(Pi,{}),i.jsxs("form",{onSubmit:A.handleSubmit(F),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"displayName",children:"Nom complet *"}),i.jsx(rt,{id:"displayName",...A.register("displayName"),placeholder:"Votre nom complet"}),A.formState.errors.displayName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:A.formState.errors.displayName.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"phone",children:"Téléphone"}),i.jsx(rt,{id:"phone",type:"tel",...A.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"bio",children:"Biographie"}),i.jsx(ui,{id:"bio",...A.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((z=A.watch("bio"))==null?void 0:z.length)||0,"/500 caractères"]})]}),i.jsx(Pi,{}),i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Vh,{className:"w-4 h-4"}),"Informations académiques"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"university",children:"Université *"}),i.jsxs(ln,{value:A.watch("university"),onValueChange:V=>A.setValue("university",V),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Sélectionnez votre université"})}),i.jsx(an,{children:zde.map(V=>i.jsx(Qe,{value:V,children:V},V))})]}),A.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:A.formState.errors.university.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),i.jsxs(ln,{value:A.watch("fieldOfStudy"),onValueChange:V=>A.setValue("fieldOfStudy",V),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Sélectionnez votre filière"})}),i.jsx(an,{children:Ude.map(V=>i.jsx(Qe,{value:V,children:V},V))})]}),A.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:A.formState.errors.fieldOfStudy.message})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"graduationYear",children:"Année de diplôme *"}),i.jsxs(ln,{value:(H=A.watch("graduationYear"))==null?void 0:H.toString(),onValueChange:V=>A.setValue("graduationYear",parseInt(V)),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Année de diplôme"})}),i.jsx(an,{children:Array.from({length:16},(V,q)=>2020+q).map(V=>i.jsx(Qe,{value:V.toString(),children:V},V))})]}),A.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:A.formState.errors.graduationYear.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"campus",children:"Campus"}),i.jsx(rt,{id:"campus",...A.register("campus"),placeholder:"Campus principal"})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"location",children:"Localisation"}),i.jsx(rt,{id:"location",...A.register("location"),placeholder:"Paris, France"})]}),i.jsx(te,{type:"submit",disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ow,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),i.jsx(gn,{value:"notifications",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"w-5 h-5"}),"Préférences de notification"]}),i.jsx(Mt,{children:"Choisissez comment vous souhaitez être notifié"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(js,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),i.jsx(ar,{checked:_.email,onCheckedChange:V=>w(q=>({...q,email:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zh,{className:"w-4 h-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Notifications push"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),i.jsx(ar,{checked:_.push,onCheckedChange:V=>w(q=>({...q,push:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx($h,{className:"w-4 h-4 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),i.jsx(ar,{checked:_.sms,onCheckedChange:V=>w(q=>({...q,sms:V})),disabled:!0})]})]})]}),i.jsx(Pi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Types de notifications"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(jn,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),i.jsx(ar,{checked:_.messages,onCheckedChange:V=>w(q=>({...q,messages:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_n,{className:"w-4 h-4 text-orange-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Annonces"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),i.jsx(ar,{checked:_.listings,onCheckedChange:V=>w(q=>({...q,listings:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(dl,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),i.jsx(ar,{checked:_.reviews,onCheckedChange:V=>w(q=>({...q,reviews:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ei,{className:"w-4 h-4 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),i.jsx(ar,{checked:_.alerts,onCheckedChange:V=>w(q=>({...q,alerts:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zY,{className:"w-4 h-4 text-pink-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),i.jsx(ar,{checked:_.marketing,onCheckedChange:V=>w(q=>({...q,marketing:V}))})]})]})]}),i.jsx(te,{onClick:$,disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ow,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),i.jsx(gn,{value:"privacy",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(eh,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),i.jsx(Mt,{children:"Contrôlez qui peut voir vos informations"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Profil public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),i.jsx(ar,{checked:E.profileVisibility==="public",onCheckedChange:V=>R(q=>({...q,profileVisibility:V?"public":"private"}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),i.jsx(ar,{checked:E.showEmail,onCheckedChange:V=>R(q=>({...q,showEmail:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),i.jsx(ar,{checked:E.showPhone,onCheckedChange:V=>R(q=>({...q,showPhone:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'université"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),i.jsx(ar,{checked:E.showUniversity,onCheckedChange:V=>R(q=>({...q,showUniversity:V}))})]})]})]}),i.jsx(Pi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Interactions"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),i.jsx(ar,{checked:E.allowMessages,onCheckedChange:V=>R(q=>({...q,allowMessages:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Statut en ligne"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),i.jsx(ar,{checked:E.showOnlineStatus,onCheckedChange:V=>R(q=>({...q,showOnlineStatus:V}))})]})]})]}),i.jsxs(Wt,{children:[i.jsx(Ht,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),i.jsx(gn,{value:"security",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Ht,{className:"w-5 h-5"}),"Sécurité du compte"]}),i.jsx(Mt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Informations du compte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(js,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Email"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),i.jsxs(wa,{open:y,onOpenChange:j,children:[i.jsx(Dd,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",children:"Changer l'email"})}),i.jsxs(Mi,{children:[i.jsxs(ba,{children:[i.jsx(Di,{children:"Changer l'adresse email"}),i.jsx(Lc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),i.jsxs("form",{onSubmit:I.handleSubmit(M),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"newEmail",children:"Nouvel email"}),i.jsx(rt,{id:"newEmail",type:"email",...I.register("newEmail"),placeholder:"nouveau@email.com"}),I.formState.errors.newEmail&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.newEmail.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),i.jsx(rt,{id:"emailPassword",type:"password",...I.register("password"),placeholder:"••••••••"}),I.formState.errors.password&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.password.message})]}),i.jsxs(iy,{children:[i.jsx(te,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Annuler"}),i.jsxs(te,{type:"submit",disabled:l,children:[l?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(Ow,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Jc,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),i.jsxs(wa,{open:m,onOpenChange:p,children:[i.jsx(Dd,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),i.jsxs(Mi,{children:[i.jsxs(ba,{children:[i.jsx(Di,{children:"Changer le mot de passe"}),i.jsx(Lc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),i.jsxs("form",{onSubmit:B.handleSubmit(P),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),i.jsx(rt,{id:"currentPassword",type:"password",...B.register("currentPassword"),placeholder:"••••••••"}),B.formState.errors.currentPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),i.jsx(rt,{id:"newPassword",type:"password",...B.register("newPassword"),placeholder:"••••••••"}),B.formState.errors.newPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.newPassword.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),i.jsx(rt,{id:"confirmPassword",type:"password",...B.register("confirmPassword"),placeholder:"••••••••"}),B.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.confirmPassword.message})]}),i.jsxs(iy,{children:[i.jsx(te,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),i.jsxs(te,{type:"submit",disabled:l,children:[l?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(MY,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),i.jsx(Pi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),i.jsx("div",{className:"p-4 border rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?i.jsxs(ot,{className:"bg-green-100 text-green-800",children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):i.jsx(ot,{variant:"outline",children:"En attente"})]})})]}),i.jsxs(Wt,{children:[i.jsx(Ht,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),i.jsxs(gn,{value:"data",className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-5 h-5"}),"Gestion des données"]}),i.jsx(Mt,{children:"Exportez ou supprimez vos données personnelles"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),i.jsxs(te,{onClick:k,disabled:l,variant:"outline",children:[l?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(li,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),i.jsx(Pi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),i.jsxs(Wt,{className:"border-destructive",children:[i.jsx(Mn,{className:"h-4 w-4"}),i.jsx(Gt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),i.jsxs(wa,{open:d,onOpenChange:f,children:[i.jsx(Dd,{asChild:!0,children:i.jsxs(te,{variant:"destructive",children:[i.jsx(ao,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),i.jsxs(Mi,{children:[i.jsxs(ba,{children:[i.jsx(Di,{className:"text-destructive",children:"Supprimer définitivement le compte"}),i.jsxs(Lc,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Profil utilisateur"}),i.jsx("li",{children:"Toutes vos annonces"}),i.jsx("li",{children:"Conversations et messages"}),i.jsx("li",{children:"Avis et évaluations"}),i.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),i.jsx(rt,{id:"deleteConfirm",value:b,onChange:V=>N(V.target.value),placeholder:"SUPPRIMER"})]})}),i.jsxs(iy,{children:[i.jsx(te,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),i.jsxs(te,{variant:"destructive",onClick:D,disabled:b!=="SUPPRIMER"||l,children:[l?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ao,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(nx,{className:"w-5 h-5"}),"Informations légales"]})}),i.jsx(ye,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Politique des cookies"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};var fC="Progress",mC=100,[Hde,cxe]=Pr(fC),[qde,Wde]=Hde(fC),_V=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Gde,...o}=t;(s||s===0)&&!$R(s)&&console.error(Kde(`${s}`,"Progress"));const l=$R(s)?s:mC;r!==null&&!zR(r,l)&&console.error(Zde(`${r}`,"Progress"));const u=zR(r,l)?r:null,d=Cx(u)?a(u,l):void 0;return i.jsx(qde,{scope:n,value:u,max:l,children:i.jsx(Ge.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Cx(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":jV(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});_V.displayName=fC;var wV="ProgressIndicator",bV=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Wde(wV,n);return i.jsx(Ge.div,{"data-state":jV(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});bV.displayName=wV;function Gde(t,e){return`${Math.round(t/e*100)}%`}function jV(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Cx(t){return typeof t=="number"}function $R(t){return Cx(t)&&!isNaN(t)&&t>0}function zR(t,e){return Cx(t)&&!isNaN(t)&&t<=e&&t>=0}function Kde(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${mC}\`.`}function Zde(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${mC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var NV=_V,Qde=bV;const SV=x.forwardRef(({className:t,value:e,...n},r)=>i.jsx(NV,{ref:r,className:it("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:i.jsx(Qde,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));SV.displayName=NV.displayName;const mc={electronics:{category:"Électronique",icon:zh,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:UD,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:H1,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:YD,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},Yde=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],ed=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Xde=()=>{const{currentUser:t,userProfile:e}=Nn(),[n,r]=x.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[s,a]=x.useState([]),[o,l]=x.useState(!0),[u,d]=x.useState("all");x.useEffect(()=>{t&&f()},[t,u]);const f=async()=>{if(t){l(!0);try{const w=bn(Bt(Ue,"listings"),tr("sellerId","==",t.uid)),E=await zn(w),R=[];E.forEach(B=>{const I=B.data();R.push({id:B.id,...I,createdAt:ed(I.createdAt),updatedAt:ed(I.updatedAt)})}),a(R);const A=m(R,u);r(A),await b(A)}catch(w){console.error("Erreur lors du chargement des données environnementales:",w)}finally{l(!1)}}},m=(w,E)=>{const R=new Date;let A=w;if(E==="month"){const se=new Date(R.getFullYear(),R.getMonth()-1,R.getDate());A=w.filter(ae=>ed(ae.createdAt)>=se)}else if(E==="year"){const se=new Date(R.getFullYear()-1,R.getMonth(),R.getDate());A=w.filter(ae=>ed(ae.createdAt)>=se)}let B=0,I=0,F=0,$=0;const P={};A.forEach(se=>{const ae=mc[se.category]||mc.electronics,K=1;let z=1;se.transactionType==="donation"?z=1.2:se.transactionType==="exchange"&&(z=.8),B+=ae.co2PerItem*K*z,I+=ae.waterPerItem*K*z,F+=ae.energyPerItem*K*z,$+=ae.wastePerItem*K*z,P[se.category]=(P[se.category]||0)+1});const M=p(w),D=y(w,B,I),{rank:k,percentile:G}=j(B,w.length);return{totalCo2Saved:Math.round(B*10)/10,totalWaterSaved:Math.round(I),totalEnergySaved:Math.round(F*10)/10,totalWasteAvoided:Math.round($*10)/10,transactionsByCategory:P,monthlyImpact:M,badges:D,rank:k,percentile:G}},p=w=>{const E={};for(let R=11;R>=0;R--){const A=new Date;A.setMonth(A.getMonth()-R);const B=A.toISOString().slice(0,7);E[B]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return w.forEach(R=>{const B=ed(R.createdAt).toISOString().slice(0,7);if(E[B]){const I=mc[R.category]||mc.electronics;let F=1;R.transactionType==="donation"?F=1.2:R.transactionType==="exchange"&&(F=.8),E[B].co2Saved+=I.co2PerItem*F,E[B].waterSaved+=I.waterPerItem*F,E[B].energySaved+=I.energyPerItem*F,E[B].transactions+=1}}),Object.entries(E).map(([R,A])=>({month:R,co2Saved:Math.round(A.co2Saved*10)/10,transactions:A.transactions,waterSaved:Math.round(A.waterSaved),energySaved:Math.round(A.energySaved*10)/10}))},y=(w,E,R)=>{const A=[];w.length>=1&&A.push("first_transaction"),E>=10&&A.push("co2_saver_10"),E>=50&&A.push("co2_saver_50"),E>=100&&A.push("co2_saver_100"),R>=1e3&&A.push("water_saver"),w.length>=20&&A.push("recycling_master"),w.filter($=>$.transactionType==="donation").length>=5&&A.push("donation_hero");const I=new Date().toISOString().slice(0,7);return w.filter($=>ed($.createdAt).toISOString().slice(0,7)===I).length>=10&&A.push("monthly_champion"),A},j=(w,E)=>{let R="Débutant",A=0;return w>=200?(R="Légende Écologique",A=95):w>=100?(R="Maître Environnemental",A=85):w>=50?(R="Expert Vert",A=70):w>=25?(R="Éco-Warrior",A=50):w>=10?(R="Protecteur",A=30):w>=5&&(R="Apprenti Vert",A=15),{rank:R,percentile:A}},b=async w=>{if(t)try{const E=jt(Ue,"users",t.uid);await On(E,{co2Saved:w.totalCo2Saved,environmentalRank:w.rank,environmentalBadges:w.badges,lastEnvironmentalUpdate:new Date})}catch(E){console.error("Erreur lors de la mise à jour des données environnementales:",E)}},N=async()=>{const w=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:w,url:window.location.origin})}catch{navigator.clipboard.writeText(w)}else navigator.clipboard.writeText(w)},_=()=>{const w={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:s.length,period:u},E=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),R=URL.createObjectURL(E),A=document.createElement("a");A.href=R,A.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,A.click(),URL.revokeObjectURL(R)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Oi,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",onClick:N,className:"flex items-center gap-2",children:[i.jsx($0,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(te,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ii,{className:"w-5 h-5 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(w=>i.jsx(te,{variant:u===w.key?"default":"outline",size:"sm",onClick:()=>d(w.key),children:w.label},w.key))})]})})}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((w,E)=>i.jsx(ve,{className:"animate-pulse",children:i.jsx(ye,{className:"pt-6",children:i.jsx("div",{className:"h-16 bg-muted rounded"})})},E))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(ve,{className:"border-green-200 bg-green-50/50",children:i.jsxs(ye,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),i.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Oi,{className:"w-6 h-6 text-green-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),i.jsx(ve,{className:"border-blue-200 bg-blue-50/50",children:i.jsxs(ye,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),i.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(ik,{className:"w-6 h-6 text-blue-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),i.jsx(ve,{className:"border-yellow-200 bg-yellow-50/50",children:i.jsxs(ye,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),i.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(Uh,{className:"w-6 h-6 text-yellow-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),i.jsx(ve,{className:"border-purple-200 bg-purple-50/50",children:i.jsxs(ye,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),i.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(HY,{className:"w-6 h-6 text-purple-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx($D,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),i.jsxs(ye,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),i.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl",children:"🏆"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),i.jsx(SV,{value:n.percentile,className:"h-3"}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[i.jsx("span",{children:"Débutant"}),i.jsx("span",{children:"Légende Écologique"})]})]})]}),i.jsxs(yu,{defaultValue:"overview",className:"space-y-4",children:[i.jsxs(ec,{className:"grid w-full grid-cols-4",children:[i.jsx(pn,{value:"overview",children:"Vue d'ensemble"}),i.jsx(pn,{value:"categories",children:"Par catégorie"}),i.jsx(pn,{value:"badges",children:"Badges"}),i.jsx(pn,{value:"methodology",children:"Méthodologie"})]}),i.jsxs(gn,{value:"overview",className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(qD,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),i.jsx(Mt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),i.jsx(ye,{children:i.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((w,E)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{className:"font-medium",children:new Date(w.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[w.co2Saved," kg"]}),i.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-blue-600",children:[w.waterSaved," L"]}),i.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-primary",children:w.transactions}),i.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},w.month))})})]}),i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(GD,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),i.jsx(Mt,{children:"Votre impact traduit en équivalences du quotidien"})]}),i.jsx(ye,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[i.jsx(NY,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx(QY,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[i.jsx(RY,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[i.jsx(ik,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),i.jsx(gn,{value:"categories",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(_n,{className:"w-5 h-5"}),"Impact par Catégorie"]}),i.jsx(Mt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),i.jsx(ye,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([w,E])=>{const R=mc[w]||mc.electronics,A=R.icon,B=E*R.co2PerItem;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:i.jsx(A,{className:`w-5 h-5 ${R.color}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:R.category}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[E," transaction",E>1?"s":""]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(B*10)/10," kg CO₂"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(E*R.waterPerItem)," L eau"]})]})]},w)})})})]})}),i.jsx(gn,{value:"badges",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(q1,{className:"w-5 h-5"}),"Badges Écologiques"]}),i.jsx(Mt,{children:"Vos récompenses pour votre engagement environnemental"})]}),i.jsx(ye,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Yde.map(w=>{const E=n.badges.includes(w.id);return i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${E?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-2",children:w.icon}),i.jsx("h3",{className:`font-semibold ${E?"text-green-800":"text-gray-600"}`,children:w.name}),i.jsx("p",{className:`text-sm ${E?"text-green-600":"text-gray-500"}`,children:w.description}),E&&i.jsx(ot,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},w.id)})})})]})}),i.jsx(gn,{value:"methodology",className:"space-y-6",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Dl,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),i.jsx(Mt,{children:"Comment nous calculons votre impact environnemental"})]}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs(Wt,{children:[i.jsx(Dl,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),i.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),i.jsx("div",{className:"space-y-3",children:Object.entries(mc).map(([w,E])=>{const R=E.icon;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(R,{className:`w-4 h-4 ${E.color}`}),i.jsx("span",{className:"font-medium",children:E.category})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[E.co2PerItem," kg"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[E.waterPerItem," L"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[E.energyPerItem," kWh"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[E.wastePerItem," kg"]})]})]})]},w)})}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(th,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vo,{className:"w-4 h-4 text-purple-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_n,{className:"w-4 h-4 text-blue-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),i.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),i.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),i.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),i.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(Oi,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),i.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Cv=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Px=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Px).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=Px(t[n]);r!==void 0&&(e[n]=r)}),e}return t},UR=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],BR=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],Jde=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],ehe=()=>{const{currentUser:t,userProfile:e}=Nn(),[n,r]=x.useState([]),[s,a]=x.useState([]),[o,l]=x.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,d]=x.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[f,m]=x.useState(!1),[p,y]=x.useState(null),[j,b]=x.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});x.useEffect(()=>{t&&(N(),_())},[t]);const N=async()=>{if(t)try{d(G=>({...G,searches:!0}));const P=bn(Bt(Ue,"savedSearches"),tr("userId","==",t.uid),oi(50)),M=await zn(P),D=[];M.forEach(G=>{const se=G.data();D.push({id:G.id,...se,createdAt:Cv(se.createdAt),updatedAt:Cv(se.updatedAt),lastNotified:se.lastNotified?Cv(se.lastNotified):void 0})}),D.sort((G,se)=>se.createdAt.getTime()-G.createdAt.getTime()),r(D);const k=D.filter(G=>G.alertsEnabled).length;l(G=>({...G,totalSearches:D.length,activeAlerts:k}))}catch(P){console.error("Erreur lors du chargement des recherches sauvegardées:",P),be.error("Erreur lors du chargement des recherches sauvegardées")}finally{d(P=>({...P,searches:!1}))}},_=async()=>{if(t)try{d(G=>({...G,matches:!0}));const P=bn(Bt(Ue,"alertMatches"),tr("userId","==",t.uid),oi(100)),M=await zn(P),D=[];M.forEach(G=>{const se=G.data();D.push({id:G.id,...se,matchedAt:Cv(se.matchedAt)})}),D.sort((G,se)=>se.matchedAt.getTime()-G.matchedAt.getTime()),a(D);const k=D.filter(G=>!G.seen).length;l(G=>({...G,totalMatches:D.length,newMatches:k}))}catch(P){console.error("Erreur lors du chargement des correspondances:",P),be.error("Erreur lors du chargement des correspondances")}finally{d(P=>({...P,matches:!1}))}},w=async()=>{if(!t||!j.name.trim()){be.error("Veuillez remplir le nom de la recherche");return}d(P=>({...P,creating:!0}));try{const P={};if(j.query&&j.query.trim()&&(P.query=j.query.trim()),j.category&&j.category!=="all"&&(P.category=j.category),j.transactionType&&j.transactionType!=="all"&&(P.transactionType=j.transactionType),j.university&&j.university!=="all"&&(P.university=j.university),j.minPrice&&j.minPrice.trim()){const k=parseFloat(j.minPrice);!isNaN(k)&&k>=0&&(P.minPrice=k)}if(j.maxPrice&&j.maxPrice.trim()){const k=parseFloat(j.maxPrice);!isNaN(k)&&k>=0&&(P.maxPrice=k)}const M={userId:t.uid,name:j.name.trim(),filters:P,alertsEnabled:j.alertsEnabled,notificationFrequency:j.notificationFrequency,notificationMethods:{email:j.notificationMethods.email,push:j.notificationMethods.push,sms:j.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},D=Px(M);await Ml(Bt(Ue,"savedSearches"),D),be.success("Alerte créée avec succès !"),m(!1),I(),N()}catch(P){console.error("Erreur lors de la création de l'alerte:",P),be.error("Erreur lors de la création de l'alerte")}finally{d(P=>({...P,creating:!1}))}},E=async(P,M)=>{try{d(k=>({...k,updating:!0}));const D=Px({...M,updatedAt:new Date});await On(jt(Ue,"savedSearches",P),D),be.success("Recherche mise à jour !"),N()}catch(D){console.error("Erreur lors de la mise à jour:",D),be.error("Erreur lors de la mise à jour")}finally{d(D=>({...D,updating:!1}))}},R=async P=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Xd(jt(Ue,"savedSearches",P)),be.success("Recherche supprimée !"),N()}catch(M){console.error("Erreur lors de la suppression:",M),be.error("Erreur lors de la suppression")}},A=async(P,M)=>{await E(P,{alertsEnabled:M})},B=async P=>{try{await On(jt(Ue,"alertMatches",P),{seen:!0,seenAt:new Date}),_()}catch(M){console.error("Erreur lors du marquage comme vu:",M)}},I=()=>{b({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),y(null)},F=P=>{try{return Qh(P,{addSuffix:!0,locale:Vr})}catch{return"Date inconnue"}},$=P=>{const M=[];if(P.query&&M.push(`"${P.query}"`),P.category&&P.category!=="all"){const D=UR.find(k=>k.value===P.category);D&&M.push(D.label)}if(P.transactionType&&P.transactionType!=="all"){const D=BR.find(k=>k.value===P.transactionType);D&&M.push(D.label)}return P.minPrice!==void 0&&M.push(`≥ ${P.minPrice}€`),P.maxPrice!==void 0&&M.push(`≤ ${P.maxPrice}€`),M.length>0?M.join(" • "):"Tous les critères"};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Ei,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),i.jsxs(wa,{open:f,onOpenChange:m,children:[i.jsx(Dd,{asChild:!0,children:i.jsxs(te,{className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),i.jsxs(Mi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ba,{children:[i.jsxs(Di,{className:"flex items-center gap-2",children:[i.jsx(hc,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),i.jsx(Lc,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),i.jsx(rt,{id:"alert-name",value:j.name,onChange:P=>b(M=>({...M,name:P.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(hE,{className:"w-4 h-4"}),"Critères de Recherche"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-query",children:"Mots-clés"}),i.jsx(rt,{id:"search-query",value:j.query,onChange:P=>b(M=>({...M,query:P.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-category",children:"Catégorie"}),i.jsxs(ln,{value:j.category,onValueChange:P=>b(M=>({...M,category:P})),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{})}),i.jsx(an,{children:UR.map(P=>i.jsx(Qe,{value:P.value,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"transaction-type",children:"Type de transaction"}),i.jsxs(ln,{value:j.transactionType,onValueChange:P=>b(M=>({...M,transactionType:P})),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{})}),i.jsx(an,{children:BR.map(P=>i.jsx(Qe,{value:P.value,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-university",children:"Université"}),i.jsxs(ln,{value:j.university,onValueChange:P=>b(M=>({...M,university:P})),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{})}),i.jsx(an,{children:Jde.map(P=>i.jsx(Qe,{value:P.value,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"min-price",children:"Prix minimum (€)"}),i.jsx(rt,{id:"min-price",type:"number",value:j.minPrice,onChange:P=>b(M=>({...M,minPrice:P.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"max-price",children:"Prix maximum (€)"}),i.jsx(rt,{id:"max-price",type:"number",value:j.maxPrice,onChange:P=>b(M=>({...M,maxPrice:P.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Ei,{className:"w-4 h-4"}),"Notifications"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),i.jsx(ar,{id:"alerts-enabled",checked:j.alertsEnabled,onCheckedChange:P=>b(M=>({...M,alertsEnabled:P}))})]}),j.alertsEnabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Oe,{children:"Fréquence des notifications"}),i.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(P=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:P.value,name:"frequency",value:P.value,checked:j.notificationFrequency===P.value,onChange:M=>b(D=>({...D,notificationFrequency:M.target.value})),className:"rounded border-border"}),i.jsx(Oe,{htmlFor:P.value,className:"cursor-pointer",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:P.label}),i.jsx("div",{className:"text-sm text-muted-foreground",children:P.description})]})})]},P.value))})]}),i.jsxs("div",{children:[i.jsx(Oe,{children:"Méthodes de notification"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(js,{className:"w-4 h-4 text-blue-600"}),i.jsx(Oe,{htmlFor:"email-notifications",children:"Email"})]}),i.jsx(ar,{id:"email-notifications",checked:j.notificationMethods.email,onCheckedChange:P=>b(M=>({...M,notificationMethods:{...M.notificationMethods,email:P}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"w-4 h-4 text-green-600"}),i.jsx(Oe,{htmlFor:"push-notifications",children:"Notifications push"})]}),i.jsx(ar,{id:"push-notifications",checked:j.notificationMethods.push,onCheckedChange:P=>b(M=>({...M,notificationMethods:{...M.notificationMethods,push:P}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ak,{className:"w-4 h-4 text-purple-600"}),i.jsx(Oe,{htmlFor:"sms-notifications",children:"SMS"}),i.jsx(ot,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),i.jsx(ar,{id:"sms-notifications",checked:j.notificationMethods.sms,onCheckedChange:P=>b(M=>({...M,notificationMethods:{...M.notificationMethods,sms:P}})),disabled:!0})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx(te,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),i.jsx(te,{onClick:w,disabled:u.creating||!j.name.trim(),children:u.creating?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hc,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),i.jsx(es,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),i.jsx(Ei,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),i.jsx(hc,{className:"w-8 h-8 text-purple-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),i.jsx(Uh,{className:"w-8 h-8 text-orange-600"})]})})})]}),i.jsxs(yu,{defaultValue:"searches",className:"space-y-4",children:[i.jsxs(ec,{className:"grid w-full grid-cols-2",children:[i.jsxs(pn,{value:"searches",className:"flex items-center gap-2",children:[i.jsx(es,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsxs(pn,{value:"matches",className:"flex items-center gap-2",children:[i.jsx(hc,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&i.jsx(ot,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),i.jsx(gn,{value:"searches",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(dE,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),i.jsx(Mt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),i.jsx(ye,{children:u.searches?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((P,M)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},M))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(es,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),i.jsxs(te,{onClick:()=>m(!0),children:[i.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):i.jsx("div",{className:"space-y-4",children:n.map(P=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:P.name}),P.alertsEnabled?i.jsxs(ot,{className:"bg-green-100 text-green-800",children:[i.jsx(Ei,{className:"w-3 h-3 mr-1"}),"Actif"]}):i.jsxs(ot,{variant:"secondary",children:[i.jsx(ok,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:$(P.filters)}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),"Créé ",F(P.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(hc,{className:"w-3 h-3"}),P.matchCount," correspondance",P.matchCount!==1?"s":""]}),P.lastNotified&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ei,{className:"w-3 h-3"}),"Dernière alerte ",F(P.lastNotified)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>A(P.id,!P.alertsEnabled),title:P.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:P.alertsEnabled?i.jsx(ok,{className:"w-4 h-4"}):i.jsx(BY,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{var M,D;y(P),b({name:P.name,query:P.filters.query||"",category:P.filters.category||"all",transactionType:P.filters.transactionType||"all",university:P.filters.university||"all",minPrice:((M=P.filters.minPrice)==null?void 0:M.toString())||"",maxPrice:((D=P.filters.maxPrice)==null?void 0:D.toString())||"",alertsEnabled:P.alertsEnabled,notificationFrequency:P.notificationFrequency,notificationMethods:P.notificationMethods}),m(!0)},title:"Modifier",children:i.jsx(WY,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>R(P.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]}),P.alertsEnabled&&i.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"}),i.jsxs("span",{children:["Fréquence: ",P.notificationFrequency==="instant"?"Instantané":P.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[P.notificationMethods.email&&i.jsx(js,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),P.notificationMethods.push&&i.jsx(Ei,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),P.notificationMethods.sms&&i.jsx(ak,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},P.id))})})]})}),i.jsx(gn,{value:"matches",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(hc,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),i.jsx(Mt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),i.jsx(ye,{children:u.matches?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((P,M)=>i.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},M))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(hc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):i.jsx("div",{className:"space-y-4",children:s.map(P=>i.jsx("div",{className:`border rounded-lg p-4 transition-colors ${P.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[P.listingImage?i.jsx("img",{src:P.listingImage,alt:P.listingTitle,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:P.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2",children:[!P.seen&&i.jsx(ot,{className:"bg-blue-500",children:"Nouveau"}),i.jsx("span",{className:"font-semibold text-primary",children:P.listingPrice===0?"Gratuit":`${P.listingPrice}€`})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"}),"Trouvé ",F(P.matchedAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>B(P.id),disabled:P.seen,children:P.seen?i.jsxs(i.Fragment,{children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Vu"]}):i.jsxs(i.Fragment,{children:[i.jsx(eh,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),i.jsxs(te,{size:"sm",onClick:()=>window.open(`/listing/${P.listingId}`,"_blank"),children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},P.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(es,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),i.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},Pv=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},HR=[{value:"all",label:"Toutes catégories",icon:_n},{value:"electronics",label:"Électronique",icon:zh},{value:"books",label:"Livres & Cours",icon:UD},{value:"furniture",label:"Mobilier",icon:H1},{value:"clothing",label:"Vêtements",icon:YD},{value:"services",label:"Services",icon:Yp},{value:"housing",label:"Logement",icon:H1},{value:"jobs",label:"Jobs & Stages",icon:jY}],the=[{value:"all",label:"Tous types",icon:_n},{value:"sale",label:"Vente",icon:rx},{value:"donation",label:"Don",icon:th},{value:"exchange",label:"Échange",icon:vo},{value:"service",label:"Service",icon:Yp}],nhe=[{value:"recent",label:"Plus récents",icon:Hn},{value:"oldest",label:"Plus anciens",icon:ii},{value:"price-asc",label:"Prix croissant",icon:sk},{value:"price-desc",label:"Prix décroissant",icon:VD},{value:"title",label:"Titre A-Z",icon:sk},{value:"category",label:"Par catégorie",icon:up}],rhe=()=>{const{currentUser:t,userProfile:e}=Nn(),[n,r]=x.useState([]),[s,a]=x.useState([]),[o,l]=x.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,d]=x.useState({favorites:!0,listings:!0,removing:!1}),[f,m]=x.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[p,y]=x.useState("recent"),[j,b]=x.useState("grid"),[N,_]=x.useState([]);x.useEffect(()=>{t&&w()},[t]),x.useEffect(()=>{n.length>0&&E()},[n]);const w=async()=>{if(t)try{d(ae=>({...ae,favorites:!0}));const k=bn(Bt(Ue,"favorites"),tr("userId","==",t.uid),oi(100)),G=await zn(k),se=[];G.forEach(ae=>{const K=ae.data();se.push({id:ae.id,...K,createdAt:Pv(K.createdAt),updatedAt:Pv(K.updatedAt)})}),se.sort((ae,K)=>K.createdAt.getTime()-ae.createdAt.getTime()),r(se),R(se)}catch(k){console.error("Erreur lors du chargement des favoris:",k),be.error("Erreur lors du chargement des favoris")}finally{d(k=>({...k,favorites:!1}))}},E=async()=>{try{d(ae=>({...ae,listings:!0}));const k=n.map(async ae=>{try{const K=await Vs(jt(Ue,"listings",ae.listingId));if(K.exists()){const z=K.data();return{id:K.id,...z,createdAt:Pv(z.createdAt),updatedAt:Pv(z.updatedAt)}}return null}catch(K){return console.error(`Erreur lors du chargement de l'annonce ${ae.listingId}:`,K),null}}),se=(await Promise.all(k)).filter(ae=>ae!==null);a(se)}catch(k){console.error("Erreur lors du chargement des annonces favorites:",k)}finally{d(k=>({...k,listings:!1}))}},R=k=>{const G={},se={};let ae=0,K=0;const z=new Date;z.setDate(z.getDate()-7);let H=0;k.forEach(V=>{G[V.listingCategory]=(G[V.listingCategory]||0)+1,se[V.listingTransactionType]=(se[V.listingTransactionType]||0)+1,V.listingPrice>0&&(ae+=V.listingPrice,K++),V.createdAt>=z&&H++}),l({totalFavorites:k.length,byCategory:G,byTransactionType:se,averagePrice:K>0?Math.round(ae/K):0,recentlyAdded:H,availableCount:k.length,soldCount:0})},A=async k=>{try{await Xd(jt(Ue,"favorites",k)),be.success("Favori supprimé"),w()}catch(G){console.error("Erreur lors de la suppression:",G),be.error("Erreur lors de la suppression")}},B=async()=>{if(N.length!==0&&window.confirm(`Supprimer ${N.length} favori(s) sélectionné(s) ?`)){d(k=>({...k,removing:!0}));try{const k=N.map(G=>Xd(jt(Ue,"favorites",G)));await Promise.all(k),be.success(`${N.length} favori(s) supprimé(s)`),_([]),w()}catch(k){console.error("Erreur lors de la suppression multiple:",k),be.error("Erreur lors de la suppression")}finally{d(k=>({...k,removing:!1}))}}},I=()=>{const k={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(K=>({title:K.listingTitle,price:K.listingPrice,category:K.listingCategory,transactionType:K.listingTransactionType,seller:K.sellerName,university:K.sellerUniversity,addedDate:K.createdAt.toISOString(),notes:K.notes||"",tags:K.tags}))},G=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),se=URL.createObjectURL(G),ae=document.createElement("a");ae.href=se,ae.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,ae.click(),URL.revokeObjectURL(se)},F=async()=>{const k=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:k,url:window.location.origin})}catch{navigator.clipboard.writeText(k),be.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(k),be.success("Lien copié dans le presse-papiers")},$=()=>{let k=n;if(f.search){const G=f.search.toLowerCase();k=k.filter(se=>se.listingTitle.toLowerCase().includes(G)||se.sellerName.toLowerCase().includes(G)||se.tags.some(ae=>ae.toLowerCase().includes(G)))}if(f.category!=="all"&&(k=k.filter(G=>G.listingCategory===f.category)),f.transactionType!=="all"&&(k=k.filter(G=>G.listingTransactionType===f.transactionType)),f.priceRange!=="all")switch(f.priceRange){case"free":k=k.filter(G=>G.listingPrice===0);break;case"under-50":k=k.filter(G=>G.listingPrice>0&&G.listingPrice<50);break;case"50-200":k=k.filter(G=>G.listingPrice>=50&&G.listingPrice<=200);break;case"over-200":k=k.filter(G=>G.listingPrice>200);break}switch(p){case"recent":k.sort((G,se)=>se.createdAt.getTime()-G.createdAt.getTime());break;case"oldest":k.sort((G,se)=>G.createdAt.getTime()-se.createdAt.getTime());break;case"price-asc":k.sort((G,se)=>G.listingPrice-se.listingPrice);break;case"price-desc":k.sort((G,se)=>se.listingPrice-G.listingPrice);break;case"title":k.sort((G,se)=>G.listingTitle.localeCompare(se.listingTitle));break;case"category":k.sort((G,se)=>G.listingCategory.localeCompare(se.listingCategory));break}return k},P=k=>{try{return Qh(k,{addSuffix:!0,locale:Vr})}catch{return"Date inconnue"}},M=(k,G)=>G==="donation"?"Gratuit":G==="exchange"?"Échange":k===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(k),D=$();return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Fr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",onClick:F,className:"flex items-center gap-2",children:[i.jsx($0,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(te,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),i.jsx(Fr,{className:"w-8 h-8 text-red-500"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),i.jsx(Qp,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),i.jsx(Uh,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),i.jsx(up,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{placeholder:"Rechercher dans vos favoris...",value:f.search,onChange:k=>m(G=>({...G,search:k.target.value})),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ln,{value:p,onValueChange:y,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{})}),i.jsx(an,{children:nhe.map(k=>i.jsx(Qe,{value:k.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(k.icon,{className:"w-4 h-4"}),k.label]})},k.value))})]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(te,{variant:j==="grid"?"default":"ghost",size:"icon",onClick:()=>b("grid"),className:"rounded-none",children:i.jsx(AY,{className:"w-4 h-4"})}),i.jsx(te,{variant:j==="list"?"default":"ghost",size:"icon",onClick:()=>b("list"),className:"rounded-none",children:i.jsx(DY,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ln,{value:f.category,onValueChange:k=>m(G=>({...G,category:k})),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Catégorie"})}),i.jsx(an,{children:HR.map(k=>i.jsx(Qe,{value:k.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(k.icon,{className:"w-4 h-4"}),k.label]})},k.value))})]}),i.jsxs(ln,{value:f.transactionType,onValueChange:k=>m(G=>({...G,transactionType:k})),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Type"})}),i.jsx(an,{children:the.map(k=>i.jsx(Qe,{value:k.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(k.icon,{className:"w-4 h-4"}),k.label]})},k.value))})]}),i.jsxs(ln,{value:f.priceRange,onValueChange:k=>m(G=>({...G,priceRange:k})),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Prix"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Tous les prix"}),i.jsx(Qe,{value:"free",children:"Gratuit"}),i.jsx(Qe,{value:"under-50",children:"Moins de 50€"}),i.jsx(Qe,{value:"50-200",children:"50€ - 200€"}),i.jsx(Qe,{value:"over-200",children:"Plus de 200€"})]})]}),i.jsxs(ln,{value:f.availability,onValueChange:k=>m(G=>({...G,availability:k})),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Disponibilité"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Toutes"}),i.jsx(Qe,{value:"available",children:"Disponibles"}),i.jsx(Qe,{value:"sold",children:"Vendues"}),i.jsx(Qe,{value:"reserved",children:"Réservées"})]})]})]}),N.length>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[N.length," favori(s) sélectionné(s)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>_([]),children:"Désélectionner"}),i.jsx(te,{variant:"destructive",size:"sm",onClick:B,disabled:u.removing,children:u.removing?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ao,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:u.favorites?i.jsx("div",{className:`grid gap-6 ${j==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((k,G)=>i.jsxs(ve,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ye,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},G))}):D.length===0?i.jsx(ve,{children:i.jsx(ye,{className:"pt-12 pb-12 text-center",children:n.length===0?i.jsxs(i.Fragment,{children:[i.jsx(Fr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),i.jsx(te,{asChild:!0,children:i.jsxs("a",{href:"/listings",children:[i.jsx(es,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(hE,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),i.jsx(te,{variant:"outline",onClick:()=>m({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[D.length," favori(s) trouvé(s)",D.length!==n.length&&` sur ${n.length}`]}),i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{N.length===D.length?_([]):_(D.map(k=>k.id))},children:N.length===D.length?"Désélectionner tout":"Sélectionner tout"})]}),j==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(k=>{const G=s.find(se=>se.id===k.listingId);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx("input",{type:"checkbox",checked:N.includes(k.id),onChange:se=>{se.target.checked?_(ae=>[...ae,k.id]):_(ae=>ae.filter(K=>K!==k.id))},className:"w-4 h-4 rounded border-border bg-background"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(te,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>A(k.id),children:i.jsx(ao,{className:"w-4 h-4"})})}),G?i.jsx(hx,{listing:G}):i.jsxs(ve,{children:[i.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Em,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),i.jsxs(ye,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:k.listingTitle}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:M(k.listingPrice,k.listingTransactionType)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",P(k.createdAt)]})]})]})]},k.id)})}):i.jsx("div",{className:"space-y-4",children:D.map(k=>{var se;const G=s.find(ae=>ae.id===k.listingId);return i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsx(ye,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",checked:N.includes(k.id),onChange:ae=>{ae.target.checked?_(K=>[...K,k.id]):_(K=>K.filter(z=>z!==k.id))},className:"w-4 h-4 rounded border-border"}),i.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:k.listingImage?i.jsx("img",{src:k.listingImage,alt:k.listingTitle,className:"w-full h-full object-cover rounded-lg"}):i.jsx(_n,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold truncate",children:k.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("span",{className:"font-semibold text-primary",children:M(k.listingPrice,k.listingTransactionType)}),(G==null?void 0:G.status)&&i.jsx(ot,{variant:G.status==="active"?"default":"secondary",children:G.status==="active"?"Disponible":G.status==="sold"?"Vendu":"Réservé"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ss,{className:"w-3 h-3"}),k.sellerName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-3 h-3"}),k.sellerUniversity]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(up,{className:"w-3 h-3"}),(se=HR.find(ae=>ae.value===k.listingCategory))==null?void 0:se.label]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",P(k.createdAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${k.listingId}`,"_blank"),children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Voir"]}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>A(k.id),className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-3 h-3"})})]})]})]})]})})},k.id)})})]})})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(Fr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),i.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},sb=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:s}=c_(),a=j=>{switch(j){case"pending":return Hn;case"confirmed":return At;case"completed":return At;case"cancelled":return Jd;case"disputed":return Mn;default:return Hn}},o=j=>{switch(j){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=j=>{switch(j){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return j}},u=j=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[j]||j,d=(j,b)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:b||"EUR"}).format(j),f=(j,b)=>{navigator.clipboard.writeText(j),be.success(`${b} copié dans le presse-papiers`)},m=async j=>{try{await r(t.id,j),n==null||n(j)}catch(b){console.error("Erreur lors de la mise à jour du statut:",b)}},p=a(t.status),y=s(t.paymentMethod,t);return i.jsxs(ve,{className:"w-full",children:[i.jsx(Xe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(Un,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(Je,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),i.jsxs(Mt,{children:[d(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),i.jsxs(ot,{className:o(t.status),children:[i.jsx(p,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),i.jsx("p",{className:"font-medium",children:dr(t.createdAt,"PPP à HH:mm",{locale:Vr})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),i.jsx("p",{className:"font-medium",children:dr(t.updatedAt,"PPP à HH:mm",{locale:Vr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),i.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),i.jsx("p",{className:"font-medium",children:dr(t.meetingDateTime,"PPP à HH:mm",{locale:Vr})})]})]})]}),t.securityCode&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Ht,{className:"w-4 h-4"}),"Code de sécurité"]}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>f(t.securityCode,"Code de sécurité"),children:i.jsx(WD,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&y.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:i.jsx("ul",{className:"space-y-1 text-sm",children:y.map((j,b)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),i.jsx("span",{children:j})]},b))})})]}),t.notes&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notes"}),i.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs(te,{onClick:()=>m("confirmed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Accepter"]}),i.jsxs(te,{variant:"outline",onClick:()=>m("cancelled"),className:"flex-1",children:[i.jsx(Jd,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&i.jsxs(te,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&i.jsxs(te,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(At,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&i.jsxs(te,{variant:"outline",onClick:()=>m("disputed"),className:"text-orange-600 hover:text-orange-700",children:[i.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&i.jsxs(Wt,{children:[i.jsx(Hn,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&i.jsxs(Wt,{className:"border-green-200 bg-green-50",children:[i.jsx(At,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&i.jsxs(Wt,{className:"border-green-200 bg-green-50",children:[i.jsx(At,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&i.jsxs(Wt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},she=()=>{const{currentUser:t,userProfile:e}=Nn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:s,initializePaymentMethods:a}=c_(),[o,l]=x.useState(""),[u,d]=x.useState("all"),[f,m]=x.useState("all"),[p,y]=x.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});x.useEffect(()=>{a()},[a]),x.useEffect(()=>{t&&s(t.uid)},[t,s]),x.useEffect(()=>{j()},[n]);const j=()=>{const R={},A={};let B=0;n.forEach(I=>{R[I.paymentMethod]=(R[I.paymentMethod]||0)+1,A[I.status]=(A[I.status]||0)+1,B+=I.amount}),y({totalRequests:n.length,pendingRequests:A.pending||0,completedRequests:A.completed||0,totalAmount:B,averageAmount:n.length>0?B/n.length:0,byMethod:R,byStatus:A})},b=()=>n.filter(R=>{const A=!o||R.listingId.toLowerCase().includes(o.toLowerCase())||R.id.toLowerCase().includes(o.toLowerCase()),B=u==="all"||R.status===u,I=f==="all"||R.paymentMethod===f;return A&&B&&I}),N=()=>b().filter(R=>R.buyerId===(t==null?void 0:t.uid)),_=()=>b().filter(R=>R.sellerId===(t==null?void 0:t.uid)),w=R=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(R),E=()=>{const R={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:p,payments:n.map(F=>({id:F.id,amount:F.amount,currency:F.currency,method:F.paymentMethod,status:F.status,role:F.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:F.createdAt.toISOString(),updatedAt:F.updatedAt.toISOString()}))},A=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),B=URL.createObjectURL(A),I=document.createElement("a");I.href=B,I.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,I.click(),URL.revokeObjectURL(B)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(XY,{className:"w-8 h-8 text-primary"}),"Mes Paiements",p.totalRequests>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),i.jsxs(te,{variant:"outline",onClick:E,className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.totalRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),i.jsx(Un,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.pendingRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),i.jsx(Hn,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.completedRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),i.jsx(At,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:w(p.totalAmount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),i.jsx(Qp,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:R=>l(R.target.value),className:"pl-10"})]}),i.jsxs(ln,{value:u,onValueChange:d,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{placeholder:"Statut"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Tous les statuts"}),i.jsx(Qe,{value:"pending",children:"En attente"}),i.jsx(Qe,{value:"confirmed",children:"Confirmé"}),i.jsx(Qe,{value:"completed",children:"Terminé"}),i.jsx(Qe,{value:"cancelled",children:"Annulé"}),i.jsx(Qe,{value:"disputed",children:"Litige"})]})]}),i.jsxs(ln,{value:f,onValueChange:m,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{placeholder:"Méthode"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Toutes les méthodes"}),i.jsx(Qe,{value:"cash",children:"Espèces"}),i.jsx(Qe,{value:"transfer",children:"Virement"}),i.jsx(Qe,{value:"paypal",children:"PayPal"}),i.jsx(Qe,{value:"lydia",children:"Lydia"})]})]})]})})}),i.jsxs(yu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(ec,{className:"grid w-full grid-cols-3",children:[i.jsxs(pn,{value:"all",className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Toutes",p.totalRequests>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsxs(pn,{value:"purchases",className:"flex items-center gap-2",children:[i.jsx(Aw,{className:"w-4 h-4"}),"Mes achats",N().length>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:N().length})]}),i.jsxs(pn,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(Iw,{className:"w-4 h-4"}),"Mes ventes",_().length>0&&i.jsx(ot,{variant:"secondary\\",className:"ml-1",children:_().length})]})]}),i.jsx(gn,{value:"all",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(qD,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),i.jsx(Mt,{children:"Historique complet de vos transactions"})]}),i.jsx(ye,{children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((R,A)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},A))}):b().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),i.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):i.jsx("div",{className:"space-y-4",children:b().map(R=>i.jsx(sb,{request:R,userRole:R.buyerId===t.uid?"buyer":"seller"},R.id))})})]})}),i.jsx(gn,{value:"purchases",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Aw,{className:"w-5 h-5"}),"Mes Achats"]}),i.jsx(Mt,{children:"Demandes de paiement que vous avez initiées"})]}),i.jsx(ye,{children:N().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Aw,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):i.jsx("div",{className:"space-y-4",children:N().map(R=>i.jsx(sb,{request:R,userRole:"buyer"},R.id))})})]})}),i.jsx(gn,{value:"sales",className:"space-y-4",children:i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Iw,{className:"w-5 h-5"}),"Mes Ventes"]}),i.jsx(Mt,{children:"Demandes de paiement reçues pour vos annonces"})]}),i.jsx(ye,{children:_().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Iw,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):i.jsx("div",{className:"space-y-4",children:_().map(R=>i.jsx(sb,{request:R,userRole:"seller"},R.id))})})]})})]}),i.jsxs(Wt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Ht,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(Un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var w_="Collapsible",[ihe,EV]=Pr(w_),[ahe,pC]=ihe(w_),CV=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[u,d]=Bs({prop:r,defaultProp:s??!1,onChange:o,caller:w_});return i.jsx(ahe,{scope:n,disabled:a,contentId:$s(),open:u,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),children:i.jsx(Ge.div,{"data-state":vC(u),"data-disabled":a?"":void 0,...l,ref:e})})});CV.displayName=w_;var PV="CollapsibleTrigger",TV=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=pC(PV,n);return i.jsx(Ge.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":vC(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Fe(t.onClick,s.onOpenToggle)})});TV.displayName=PV;var gC="CollapsibleContent",kV=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pC(gC,t.__scopeCollapsible);return i.jsx(Tr,{present:n||s.open,children:({present:a})=>i.jsx(ohe,{...r,ref:e,present:a})})});kV.displayName=gC;var ohe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=pC(gC,n),[l,u]=x.useState(r),d=x.useRef(null),f=ft(e,d),m=x.useRef(0),p=m.current,y=x.useRef(0),j=y.current,b=o.open||l,N=x.useRef(b),_=x.useRef(void 0);return x.useEffect(()=>{const w=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(w)},[]),Wn(()=>{const w=d.current;if(w){_.current=_.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const E=w.getBoundingClientRect();m.current=E.height,y.current=E.width,N.current||(w.style.transitionDuration=_.current.transitionDuration,w.style.animationName=_.current.animationName),u(r)}},[o.open,r]),i.jsx(Ge.div,{"data-state":vC(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...a,ref:f,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:b&&s})});function vC(t){return t?"open":"closed"}var lhe=CV,che=TV,uhe=kV,Wi="Accordion",dhe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[yC,hhe,fhe]=Xp(Wi),[b_,uxe]=Pr(Wi,[fhe,EV]),xC=EV(),RV=ue.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,a=r;return i.jsx(yC.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(vhe,{...a,ref:e}):i.jsx(ghe,{...s,ref:e})})});RV.displayName=Wi;var[IV,mhe]=b_(Wi),[AV,phe]=b_(Wi,{collapsible:!1}),ghe=ue.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,u]=Bs({prop:n,defaultProp:r??"",onChange:s,caller:Wi});return i.jsx(IV,{scope:t.__scopeAccordion,value:ue.useMemo(()=>l?[l]:[],[l]),onItemOpen:u,onItemClose:ue.useCallback(()=>a&&u(""),[a,u]),children:i.jsx(AV,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(OV,{...o,ref:e})})})}),vhe=ue.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=t,[o,l]=Bs({prop:n,defaultProp:r??[],onChange:s,caller:Wi}),u=ue.useCallback(f=>l((m=[])=>[...m,f]),[l]),d=ue.useCallback(f=>l((m=[])=>m.filter(p=>p!==f)),[l]);return i.jsx(IV,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:d,children:i.jsx(AV,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(OV,{...a,ref:e})})})}),[yhe,j_]=b_(Wi),OV=ue.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:a="vertical",...o}=t,l=ue.useRef(null),u=ft(l,e),d=hhe(n),m=mu(s)==="ltr",p=Fe(t.onKeyDown,y=>{var F;if(!dhe.includes(y.key))return;const j=y.target,b=d().filter($=>{var P;return!((P=$.ref.current)!=null&&P.disabled)}),N=b.findIndex($=>$.ref.current===j),_=b.length;if(N===-1)return;y.preventDefault();let w=N;const E=0,R=_-1,A=()=>{w=N+1,w>R&&(w=E)},B=()=>{w=N-1,w<E&&(w=R)};switch(y.key){case"Home":w=E;break;case"End":w=R;break;case"ArrowRight":a==="horizontal"&&(m?A():B());break;case"ArrowDown":a==="vertical"&&A();break;case"ArrowLeft":a==="horizontal"&&(m?B():A());break;case"ArrowUp":a==="vertical"&&B();break}const I=w%_;(F=b[I].ref.current)==null||F.focus()});return i.jsx(yhe,{scope:n,disabled:r,direction:s,orientation:a,children:i.jsx(yC.Slot,{scope:n,children:i.jsx(Ge.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:p})})})}),Tx="AccordionItem",[xhe,_C]=b_(Tx),MV=ue.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,a=j_(Tx,n),o=mhe(Tx,n),l=xC(n),u=$s(),d=r&&o.value.includes(r)||!1,f=a.disabled||t.disabled;return i.jsx(xhe,{scope:n,open:d,disabled:f,triggerId:u,children:i.jsx(lhe,{"data-orientation":a.orientation,"data-state":zV(d),...l,...s,ref:e,disabled:f,open:d,onOpenChange:m=>{m?o.onItemOpen(r):o.onItemClose(r)}})})});MV.displayName=Tx;var DV="AccordionHeader",LV=ue.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=j_(Wi,n),a=_C(DV,n);return i.jsx(Ge.h3,{"data-orientation":s.orientation,"data-state":zV(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});LV.displayName=DV;var Ej="AccordionTrigger",FV=ue.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=j_(Wi,n),a=_C(Ej,n),o=phe(Ej,n),l=xC(n);return i.jsx(yC.ItemSlot,{scope:n,children:i.jsx(che,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...r,ref:e})})});FV.displayName=Ej;var VV="AccordionContent",$V=ue.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=j_(Wi,n),a=_C(VV,n),o=xC(n);return i.jsx(uhe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});$V.displayName=VV;function zV(t){return t?"open":"closed"}var _he=RV,whe=MV,bhe=LV,UV=FV,BV=$V;const jhe=_he,HV=x.forwardRef(({className:t,...e},n)=>i.jsx(whe,{ref:n,className:it("border-b",t),...e}));HV.displayName="AccordionItem";const qV=x.forwardRef(({className:t,children:e,...n},r)=>i.jsx(bhe,{className:"flex",children:i.jsxs(UV,{ref:r,className:it("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(F3,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));qV.displayName=UV.displayName;const WV=x.forwardRef(({className:t,children:e,...n},r)=>i.jsx(BV,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:it("pb-4 pt-0",t),children:e})}));WV.displayName=BV.displayName;const qR=[{category:"Compte et Inscription",icon:Yp,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:Un,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Ht,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:jn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Fr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:V0,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Nhe=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:jn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:js,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:$h,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:BD,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],She=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:dl,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Ht,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:Uh,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Fr,duration:"4 min",type:"Infographie"}],Ehe=()=>{const{currentUser:t,userProfile:e}=Nn(),[n,r]=x.useState(""),[s,a]=x.useState("all"),[o,l]=x.useState({subject:"",category:"",message:"",priority:"normal"}),[u,d]=x.useState(!1),f=qR.filter(p=>{if(s!=="all"&&p.category!==s)return!1;if(n){const y=n.toLowerCase();return p.questions.some(j=>j.question.toLowerCase().includes(y)||j.answer.toLowerCase().includes(y))}return!0}),m=async p=>{if(p.preventDefault(),!o.subject||!o.message){be.error("Veuillez remplir tous les champs obligatoires");return}d(!0);try{await new Promise(y=>setTimeout(y,1e3)),be.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{be.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{d(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(nx,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx(es,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),i.jsx(rt,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:p=>r(p.target.value),className:"pl-12 h-14 text-lg"})]})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Nhe.map((p,y)=>i.jsx(ve,{className:`transition-all hover:shadow-lg ${p.available?"hover:-translate-y-1":"opacity-60"}`,children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${p.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i.jsx(p.icon,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:p.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:p.hours}),i.jsx(te,{variant:p.available?"default":"secondary",size:"sm",disabled:!p.available,className:"w-full",children:p.action})]})},y))}),i.jsxs(yu,{defaultValue:"faq",className:"space-y-6",children:[i.jsxs(ec,{className:"grid w-full grid-cols-3",children:[i.jsxs(pn,{value:"faq",className:"flex items-center gap-2",children:[i.jsx(nx,{className:"w-4 h-4"}),"FAQ"]}),i.jsxs(pn,{value:"guides",className:"flex items-center gap-2",children:[i.jsx(BD,{className:"w-4 h-4"}),"Guides"]}),i.jsxs(pn,{value:"contact",className:"flex items-center gap-2",children:[i.jsx(jn,{className:"w-4 h-4"}),"Contact"]})]}),i.jsxs(gn,{value:"faq",className:"space-y-6",children:[i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(te,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),qR.map(p=>i.jsxs(te,{variant:s===p.category?"default":"outline",size:"sm",onClick:()=>a(p.category),className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-4 h-4"}),p.category]},p.category))]})})}),f.length===0?i.jsx(ve,{children:i.jsxs(ye,{className:"pt-12 pb-12 text-center",children:[i.jsx(es,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),i.jsx(te,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):i.jsx("div",{className:"space-y-6",children:f.map((p,y)=>i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-5 h-5"}),p.category]})}),i.jsx(ye,{children:i.jsx(jhe,{type:"single",collapsible:!0,className:"w-full",children:p.questions.map((j,b)=>i.jsxs(HV,{value:`${y}-${b}`,children:[i.jsx(qV,{className:"text-left",children:j.question}),i.jsx(WV,{className:"text-muted-foreground leading-relaxed",children:j.answer})]},b))})})]},y))})]}),i.jsxs(gn,{value:"guides",className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(ZD,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),i.jsx(Mt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),i.jsx(ye,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:She.map((p,y)=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(p.icon,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold",children:p.title}),i.jsx(ot,{variant:"outline",className:"text-xs",children:p.type})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"}),p.duration]}),i.jsxs(te,{size:"sm",variant:"outline",children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},y))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(JD,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(li,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(li,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(Yp,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),i.jsx(gn,{value:"contact",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(nh,{className:"w-5 h-5"}),"Contactez notre équipe"]}),i.jsx(Mt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),i.jsx(ye,{children:i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"subject",children:"Sujet *"}),i.jsx(rt,{id:"subject",value:o.subject,onChange:p=>l(y=>({...y,subject:p.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"category",children:"Catégorie"}),i.jsxs(ln,{value:o.category,onValueChange:p=>l(y=>({...y,category:p})),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{placeholder:"Sélectionnez une catégorie"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"account",children:"Compte et profil"}),i.jsx(Qe,{value:"listing",children:"Annonces"}),i.jsx(Qe,{value:"payment",children:"Paiements"}),i.jsx(Qe,{value:"security",children:"Sécurité"}),i.jsx(Qe,{value:"technical",children:"Problème technique"}),i.jsx(Qe,{value:"other",children:"Autre"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"priority",children:"Priorité"}),i.jsxs(ln,{value:o.priority,onValueChange:p=>l(y=>({...y,priority:p})),children:[i.jsx(sn,{className:"mt-1",children:i.jsx(cn,{})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"low",children:"Basse - Question générale"}),i.jsx(Qe,{value:"normal",children:"Normale - Besoin d'aide"}),i.jsx(Qe,{value:"high",children:"Haute - Problème bloquant"}),i.jsx(Qe,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"message",children:"Message *"}),i.jsx(ui,{id:"message",value:o.message,onChange:p=>l(y=>({...y,message:p.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&i.jsxs(Wt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Nous vous répondrons à l'adresse ",i.jsx("strong",{children:t.email})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(nh,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"w-5 h-5"}),"Temps de réponse"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Questions générales"}),i.jsx(ot,{variant:"secondary",children:"24h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),i.jsx(ot,{variant:"secondary",children:"12h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),i.jsx(ot,{className:"bg-red-500",children:"2h"})]})]})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(GD,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(js,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(jn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Chat en direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zh,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Application mobile"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"w-5 h-5"}),"État du système"]})}),i.jsxs(ye,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Plateforme web"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Messagerie"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Notifications email"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),i.jsxs(te,{variant:"outline",size:"sm",className:"w-full mt-3",children:[i.jsx(vs,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Che=[{category:"Rencontres et Échanges",icon:Lr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:At},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Jd},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:At},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:At}]},{category:"Vérification d'Identité",icon:XD,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:At},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:At},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Mn},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:At}]},{category:"Paiements Sécurisés",icon:Un,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:At},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Jd},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:At},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Mn}]},{category:"Communication",icon:jn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:At},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:At},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Mn},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:At}]}],Phe=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Mn},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Un},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Lr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:Oc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:Yp},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:jn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Hn},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Jc}],The=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:$h,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:Cc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:jn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Ht,color:"text-green-600"}],khe=()=>i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:i.jsx(Ht,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),i.jsxs(Wt,{className:"border-green-200 bg-green-50",children:[i.jsx(Ht,{className:"h-4 w-4 text-green-600"}),i.jsx(Gt,{className:"text-green-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),i.jsxs(te,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[i.jsx(li,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-6 h-6 text-green-600"})}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(XD,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Hn,{className:"w-6 h-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(dl,{className:"w-6 h-6 text-orange-600"})}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Che.map((t,e)=>i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),i.jsx(ye,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),i.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),i.jsx(Mt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),i.jsx(ye,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Phe.map((t,e)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),i.jsx(ot,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),i.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx($h,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),i.jsx(Mt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),i.jsx(ye,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:The.map((t,e)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold mb-1",children:t.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),i.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(IY,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(li,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(nx,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),i.jsx(te,{variant:"outline",className:"w-full",asChild:!0,children:i.jsxs(ze,{to:"/help",children:[i.jsx(vs,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6 text-center",children:[i.jsx(jn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),i.jsxs(Wt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(ZD,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Rhe(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var wC="ScrollArea",[GV,dxe]=Pr(wC),[Ihe,pi]=GV(wC),KV=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,u]=x.useState(null),[d,f]=x.useState(null),[m,p]=x.useState(null),[y,j]=x.useState(null),[b,N]=x.useState(null),[_,w]=x.useState(0),[E,R]=x.useState(0),[A,B]=x.useState(!1),[I,F]=x.useState(!1),$=ft(e,M=>u(M)),P=mu(s);return i.jsx(Ihe,{scope:n,type:r,dir:P,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:f,content:m,onContentChange:p,scrollbarX:y,onScrollbarXChange:j,scrollbarXEnabled:A,onScrollbarXEnabledChange:B,scrollbarY:b,onScrollbarYChange:N,scrollbarYEnabled:I,onScrollbarYEnabledChange:F,onCornerWidthChange:w,onCornerHeightChange:R,children:i.jsx(Ge.div,{dir:P,...o,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});KV.displayName=wC;var ZV="ScrollAreaViewport",QV=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=pi(ZV,n),l=x.useRef(null),u=ft(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});QV.displayName=ZV;var Ia="ScrollAreaScrollbar",bC=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pi(Ia,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return x.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Ahe,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Ohe,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(YV,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(jC,{...r,ref:e}):null});bC.displayName=Ia;var Ahe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pi(Ia,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Tr,{present:n||a,children:i.jsx(YV,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Ohe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pi(Ia,t.__scopeScrollArea),a=t.orientation==="horizontal",o=S_(()=>u("SCROLL_END"),100),[l,u]=Rhe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),x.useEffect(()=>{const d=s.viewport,f=a?"scrollLeft":"scrollTop";if(d){let m=d[f];const p=()=>{const y=d[f];m!==y&&(u("SCROLL"),o()),m=y};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,a,u,o]),i.jsx(Tr,{present:n||l!=="hidden",children:i.jsx(jC,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Fe(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),YV=x.forwardRef((t,e)=>{const n=pi(Ia,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=x.useState(!1),l=t.orientation==="horizontal",u=S_(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:f)}},10);return ph(n.viewport,u),ph(n.content,u),i.jsx(Tr,{present:r||a,children:i.jsx(jC,{"data-state":a?"visible":"hidden",...s,ref:e})})}),jC=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=pi(Ia,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[l,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=n9(l.viewport,l.content),f={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,y){return $he(p,o.current,l,y)}return n==="horizontal"?i.jsx(Mhe,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,y=WR(p,l,s.dir);a.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?i.jsx(Dhe,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,y=WR(p,l);a.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Mhe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=pi(Ia,t.__scopeScrollArea),[o,l]=x.useState(),u=x.useRef(null),d=ft(e,u,a.onScrollbarXChange);return x.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(JV,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":N_(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(p),s9(p,m)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Rx(o.paddingLeft),paddingEnd:Rx(o.paddingRight)}})}})}),Dhe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=pi(Ia,t.__scopeScrollArea),[o,l]=x.useState(),u=x.useRef(null),d=ft(e,u,a.onScrollbarYChange);return x.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(JV,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":N_(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(a.viewport){const p=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(p),s9(p,m)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Rx(o.paddingTop),paddingEnd:Rx(o.paddingBottom)}})}})}),[Lhe,XV]=GV(Ia),JV=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:m,...p}=t,y=pi(Ia,n),[j,b]=x.useState(null),N=ft(e,$=>b($)),_=x.useRef(null),w=x.useRef(""),E=y.viewport,R=r.content-r.viewport,A=yr(f),B=yr(u),I=S_(m,10);function F($){if(_.current){const P=$.clientX-_.current.left,M=$.clientY-_.current.top;d({x:P,y:M})}}return x.useEffect(()=>{const $=P=>{const M=P.target;(j==null?void 0:j.contains(M))&&A(P,R)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[E,j,R,A]),x.useEffect(B,[r,B]),ph(j,I),ph(y.content,I),i.jsx(Lhe,{scope:n,scrollbar:j,hasThumb:s,onThumbChange:yr(a),onThumbPointerUp:yr(o),onThumbPositionChange:B,onThumbPointerDown:yr(l),children:i.jsx(Ge.div,{...p,ref:N,style:{position:"absolute",...p.style},onPointerDown:Fe(t.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),_.current=j.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),F($))}),onPointerMove:Fe(t.onPointerMove,F),onPointerUp:Fe(t.onPointerUp,$=>{const P=$.target;P.hasPointerCapture($.pointerId)&&P.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=w.current,y.viewport&&(y.viewport.style.scrollBehavior=""),_.current=null})})})}),kx="ScrollAreaThumb",e9=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=XV(kx,t.__scopeScrollArea);return i.jsx(Tr,{present:n||s.hasThumb,children:i.jsx(Fhe,{ref:e,...r})})}),Fhe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=pi(kx,n),o=XV(kx,n),{onThumbPositionChange:l}=o,u=ft(e,m=>o.onThumbChange(m)),d=x.useRef(void 0),f=S_(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(f(),!d.current){const y=zhe(m,l);d.current=y,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,f,l]),i.jsx(Ge.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(t.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),j=m.clientX-y.left,b=m.clientY-y.top;o.onThumbPointerDown({x:j,y:b})}),onPointerUp:Fe(t.onPointerUp,o.onThumbPointerUp)})});e9.displayName=kx;var NC="ScrollAreaCorner",t9=x.forwardRef((t,e)=>{const n=pi(NC,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Vhe,{...t,ref:e}):null});t9.displayName=NC;var Vhe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=pi(NC,n),[a,o]=x.useState(0),[l,u]=x.useState(0),d=!!(a&&l);return ph(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),u(f)}),ph(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),d?i.jsx(Ge.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Rx(t){return t?parseInt(t,10):0}function n9(t,e){const n=t/e;return isNaN(n)?0:n}function N_(t){const e=n9(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function $he(t,e,n,r="ltr"){const s=N_(n),a=s/2,o=e||a,l=s-o,u=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return r9([u,d],m)(t)}function WR(t,e,n="ltr"){const r=N_(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,u=n==="ltr"?[0,o]:[o*-1,0],d=yp(t,u);return r9([0,o],[0,l])(d)}function r9(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function s9(t,e){return t>0&&t<e}var zhe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function S_(t,e){const n=yr(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function ph(t,e){const n=yr(e);Wn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var i9=KV,Uhe=QV,Bhe=t9;const SC=x.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(i9,{ref:r,className:it("relative overflow-hidden",t),...n,children:[i.jsx(Uhe,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(a9,{}),i.jsx(Bhe,{})]}));SC.displayName=i9.displayName;const a9=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(bC,{ref:r,orientation:e,className:it("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(e9,{className:"relative flex-1 rounded-full bg-border"})}));a9.displayName=bC.displayName;const GR=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:s,currentUser:a,onSelectConversation:o})=>{const l=t.filter(f=>{const m=f.participants.find(y=>y!==(a==null?void 0:a.uid)),p=m?f.participantDetails[m]:null;return(p==null?void 0:p.name.toLowerCase().includes(n.toLowerCase()))||f.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=f=>f===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(f),d=f=>{const m=f.participants.find(p=>p!==(a==null?void 0:a.uid));return m?f.participantDetails[m]:null};return i.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jn,{className:"w-5 h-5 text-primary"}),i.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:i.jsx(hE,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:i.jsx(VD,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:i.jsx(V0,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(es,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{placeholder:"Rechercher conversations...",value:n,onChange:f=>r(f.target.value),className:"pl-9 h-9 text-sm"})]})]}),i.jsx(SC,{className:"flex-1",children:e?i.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((f,m)=>i.jsx("div",{className:"animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-2 p-2",children:[i.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.jsx(ss,{className:"w-5 h-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},m))}):l.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(jn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n?i.jsxs(i.Fragment,{children:[i.jsx(es,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):i.jsxs(i.Fragment,{children:[i.jsx(js,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):i.jsx("div",{className:"p-1",children:l.map(f=>{var j,b;const m=d(f),p=f.unreadCount[a==null?void 0:a.uid]||0,y=(s==null?void 0:s.id)===f.id;return i.jsx("div",{onClick:()=>o(f),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${y?"bg-accent":""}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(_o,{className:"w-10 h-10",children:[i.jsx(wo,{src:m==null?void 0:m.avatar}),i.jsx(bo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((b=(j=m==null?void 0:m.name)==null?void 0:j[0])==null?void 0:b.toUpperCase())||i.jsx(ss,{className:"w-4 h-4"})})]}),(m==null?void 0:m.verified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Ht,{className:"w-1.5 h-1.5 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(ss,{className:"w-3 h-3 text-muted-foreground"}),(m==null?void 0:m.name)||"Utilisateur"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[f.lastMessage&&i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"}),Qh(f.lastMessage.sentAt,{addSuffix:!0,locale:Vr})]}),p>0&&i.jsx(ot,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.listingImage?i.jsx("img",{src:f.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):i.jsx(KD,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:f.listingTitle}),i.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[f.listingPrice===0?i.jsx(Fr,{className:"w-3 h-3 text-green-600"}):i.jsx("span",{children:"€"}),u(f.listingPrice)]})]}),f.lastMessage&&i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[f.lastMessage.senderId===(a==null?void 0:a.uid)?i.jsx(nh,{className:"w-3 h-3"}):i.jsx(jn,{className:"w-3 h-3"}),f.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",f.lastMessage.text]})]})]})},f.id)})})})]})},KR=({conversation:t,messages:e,loading:n,currentUser:r,onBack:s})=>{var V,q;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:u,deleteConversation:d}=r_(),[f,m]=x.useState(""),[p,y]=x.useState(40),[j,b]=x.useState(!1),[N,_]=x.useState(!1),[w,E]=x.useState(""),[R,A]=x.useState(""),B=x.useRef(null),I=x.useRef(null),F=()=>{var J;(J=I.current)==null||J.scrollIntoView({behavior:"smooth"})},$=x.useCallback(()=>{const J=B.current;if(!J)return;J.style.height="auto";const me=Math.max(40,Math.min(J.scrollHeight,120));y(me)},[]),P=x.useCallback(J=>{const me=J.target.value;m(me),b(!!me.trim()),setTimeout($,0)},[$]),M=async()=>{if(!f.trim()||!t||!r)return;const J=f.trim();m(""),b(!1),y(40),await a(t.id,J,r.uid,r.displayName||"Utilisateur",r.photoURL)},D=J=>{J.key==="Enter"&&!J.shiftKey&&(J.preventDefault(),M())},k=async()=>{!t||!r||await l(t.id,r.uid)},G=async()=>{if(!t||!r||!w.trim())return;const J=t.participants.find(me=>me!==r.uid);J&&(await u(t.id,r.uid,J,w,R),_(!1),E(""),A(""))},se=async()=>{!t||!r||(await d(t.id,r.uid),s())};if(x.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),x.useEffect(F,[e]),!t)return i.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jn,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),i.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(es,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const ae=t.participants.find(J=>J!==(r==null?void 0:r.uid)),K=ae?t.participantDetails[ae]:null,z=J=>{const me=new Date,Pe=new Date(J);return Pe.toDateString()===me.toDateString()?Pe.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((me.getTime()-Pe.getTime())/(1e3*60*60*24))<7?Pe.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Pe.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},H=J=>J.senderId!==(r==null?void 0:r.uid)?null:J.seen?i.jsx(SY,{className:"w-3 h-3 text-blue-500"}):i.jsx(EY,{className:"w-3 h-3 text-muted-foreground"});return i.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden h-8 w-8",children:i.jsx(Ac,{className:"w-4 h-4"})}),i.jsxs(_o,{className:"w-8 h-8",children:[i.jsx(wo,{src:K==null?void 0:K.avatar}),i.jsx(bo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((q=(V=K==null?void 0:K.name)==null?void 0:V[0])==null?void 0:q.toUpperCase())||i.jsx(ss,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[i.jsx(ss,{className:"w-3 h-3 text-muted-foreground"}),(K==null?void 0:K.name)||"Utilisateur"]}),(K==null?void 0:K.verified)&&i.jsx(Ht,{className:"w-3 h-3 text-green-600"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[i.jsx(Lr,{className:"w-3 h-3"}),K==null?void 0:K.university]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:i.jsx($h,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:i.jsx(JD,{className:"w-4 h-4"})}),i.jsxs(rj,{children:[i.jsx(sj,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(PY,{className:"w-4 h-4"})})}),i.jsxs(ux,{align:"end",children:[i.jsx(nn,{asChild:!0,children:i.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[i.jsx(vs,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),i.jsxs(nn,{children:[i.jsx(dl,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),i.jsxs(nn,{children:[i.jsx(_Y,{className:"w-4 h-4 mr-2"}),"Archiver"]}),i.jsx(ea,{}),i.jsxs(nn,{onClick:()=>_(!0),children:[i.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),i.jsxs(nn,{onClick:k,children:[i.jsx(bY,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),i.jsxs(nn,{onClick:se,className:"text-destructive",children:[i.jsx(ao,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),i.jsx(ve,{className:"mt-2",children:i.jsx(ye,{className:"p-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?i.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:i.jsx(KD,{className:"w-4 h-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(dE,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),i.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?i.jsxs(i.Fragment,{children:[i.jsx(Fr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),i.jsx(te,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:i.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[i.jsx(vs,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(SC,{className:"flex-1 p-3",children:i.jsxs("div",{className:"space-y-3",children:[n?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((J,me)=>i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:`flex ${me%2===0?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),i.jsx("div",{className:"h-8 bg-muted rounded"})]})})},me))}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jn,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(nh,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(J=>{const me=J.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${me?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${me?"order-2":"order-1"}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-2 ${me?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:J.text})}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${me?"justify-end":"justify-start"}`,children:[i.jsx(Hn,{className:"w-3 h-3"}),i.jsx("span",{children:z(J.sentAt)}),H(J)]})]})},J.id)}),i.jsx("div",{ref:I})]})}),i.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[i.jsx(ui,{ref:B,value:f,placeholder:"Tapez votre message...",onChange:P,onKeyDown:D,rows:1,style:{height:p,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),i.jsx(te,{onClick:M,disabled:!f.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:i.jsx(nh,{className:"h-3.5 w-3.5"})})]}),j&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[i.jsx(jn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),i.jsx(wa,{open:N,onOpenChange:_,children:i.jsxs(Mi,{children:[i.jsx(ba,{children:i.jsxs(Di,{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"w-4 h-4"}),"Motif du signalement"]}),i.jsxs(ln,{value:w,onValueChange:E,children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Sélectionnez un motif"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"spam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(js,{className:"w-4 h-4"}),"Spam"]})}),i.jsx(Qe,{value:"harassment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"w-4 h-4"}),"Harcèlement"]})}),i.jsx(Qe,{value:"inappropriate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),i.jsx(Qe,{value:"scam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"w-4 h-4"}),"Arnaque"]})}),i.jsx(Qe,{value:"other",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dl,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"report-description",className:"flex items-center gap-2",children:[i.jsx(jn,{className:"w-4 h-4"}),"Description (optionnel)"]}),i.jsx(ui,{id:"report-description",value:R,onChange:J=>A(J.target.value),placeholder:"Décrivez le problème...",rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>_(!1),children:"Annuler"}),i.jsxs(te,{onClick:G,disabled:!w,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Hhe=()=>{const{currentUser:t,userProfile:e}=Nn(),{conversations:n,currentConversation:r,messages:s,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:u,cleanup:d}=r_(),[f,m]=x.useState(""),[p,y]=x.useState(!1);x.useEffect(()=>(t&&o(t.uid),()=>{d()}),[t,o,d]),x.useEffect(()=>{r&&l(r.id)},[r,l]);const j=N=>{u(N),y(!0)},b=()=>{y(!1),u(null)};return t?i.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[i.jsx("div",{className:"lg:hidden w-full h-full",children:p?i.jsx(KR,{conversation:r,messages:s,loading:a,currentUser:t,onBack:b}):i.jsx(GR,{conversations:n,loading:a,searchQuery:f,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:j})}),i.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[i.jsx(GR,{conversations:n,loading:a,searchQuery:f,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:j}),i.jsx(KR,{conversation:r,messages:s,loading:a,currentUser:t,onBack:b})]})]}):i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jn,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),i.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[i.jsx(ss,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),i.jsx(te,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:i.jsxs(ze,{to:"/auth",className:"flex items-center gap-2",children:[i.jsx(ss,{className:"w-4 h-4"}),"Se connecter"]})})]})};var cy={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*t)*Math.sin((t*r-l)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?a/2*(t*t*(((s*=1.525)+1)*t-s))+e:a/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,a;return a=cy.easeOutBounce(r-t,0,s,r),s-a+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,a;return t<r/2?(a=cy.easeInBounce(t*2,0,s,r),a*.5+e):(a=cy.easeOutBounce(t*2-r,0,s,r),a*.5+s*.5+e)}},qhe=cy;function Whe(t){return t*Math.PI/180}function Rs(t,e){return t+Math.random()*(e-t)}function Ghe(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Tm;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Tm||(Tm={}));var Xo;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Xo||(Xo={}));const Khe=1e3/60;class Zhe{constructor(e,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=Rs(5,20),this.h=Rs(5,20),this.radius=Rs(5,10),this.vx=typeof o=="number"?Rs(-o,o):Rs(o.min,o.max),this.vy=typeof l=="number"?Rs(-l,0):Rs(l.min,l.max),this.shape=Ghe(0,2),this.angle=Whe(Rs(0,360)),this.angularSpin=Rs(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Rs(0,1),this.rotationDirection=Rs(0,1)?Xo.Positive:Xo.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=e/Khe;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===Xo.Positive?this.rotationDirection=Xo.Negative:this.rotateY<=-1&&this.rotationDirection===Xo.Negative&&(this.rotationDirection=Xo.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Tm.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Tm.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Tm.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Qhe{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Rs(this.x,this.w+this.x),a=Rs(this.y,this.h+this.y);return new Zhe(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:d,recycle:f,numberOfPieces:m,debug:p,tweenFunction:y,tweenDuration:j}=this.getOptions();if(!d)return!1;const b=this.particles.length,N=f?b:l;if(N<m){u!==m&&(this.tweenProgress=0,this.tweenFrom=N,this.lastNumberOfPieces=m),this.tweenProgress=Math.min(j,Math.max(0,this.tweenProgress+s));const _=y(this.tweenProgress,this.tweenFrom,m,j),w=Math.round(_-N);for(let E=0;E<w;E++)this.particles.push(this.getParticle());this.particlesGenerated+=w}p&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,a.width-10,a.height-20));for(let _=this.particles.length-1;_>=0;_--){const w=this.particles[_];w.update(s),(w.y>a.height||w.y<-100||w.x>a.width+100||w.x<-100)&&(f&&N<=m?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return b>0||N<m},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const EC={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:qhe.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Yhe{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...EC,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:u,context:d}=this,f=Math.min(s-this.lastFrameTime,50);if(l&&f<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?f%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Qhe(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Xhe=ue.createRef();class CC extends ue.Component{constructor(e){super(e),this.canvas=ue.createRef(),this.canvas=e.canvasRef||Xhe}componentDidMount(){if(this.canvas.current){const e=ib(this.props)[0];this.confetti=new Yhe(this.canvas.current,e)}}componentDidUpdate(){const e=ib(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=ib(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}CC.defaultProps={...EC};CC.displayName="ReactConfetti";function ib(t){const e={},n={},r={},s=[...Object.keys(EC),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[e,r,n]}const Jhe=ue.forwardRef((t,e)=>i.jsx(CC,{canvasRef:e,...t})),efe=({open:t,loading:e,email:n,onResend:r,onCheck:s,onClose:a,verified:o})=>i.jsx(wa,{open:t,children:i.jsxs(Mi,{className:"max-w-md text-center",children:[o&&i.jsx(Jhe,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),i.jsxs(ba,{children:[i.jsxs(Di,{className:"flex items-center justify-center gap-2 text-lg",children:[o?i.jsx(UY,{className:"w-6 h-6 text-green-500 animate-bounce"}):i.jsx(FY,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),i.jsx(Lc,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&i.jsxs("div",{className:"space-y-3 mt-2",children:[i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",i.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),i.jsxs(te,{onClick:s,disabled:e,className:"w-full",children:[e?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),i.jsxs(te,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),i.jsx(te,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),tfe=vu({email:Et().email("Email invalide"),password:Et().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),nfe=vu({displayName:Et().min(2,"Le nom doit contenir au moins 2 caractères"),email:Et().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:Et().min(1,"Veuillez sélectionner votre université"),otherUniversity:Et().optional(),fieldOfStudy:Et().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Et().optional(),graduationYear:Et().min(1,"Veuillez indiquer votre année de diplôme"),password:Et().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:Et()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),rfe=vu({university:Et().min(1,"Veuillez sélectionner votre université"),otherUniversity:Et().optional(),fieldOfStudy:Et().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Et().optional(),graduationYear:Et().min(1,"Veuillez indiquer votre année de diplôme"),displayName:Et().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),ZR=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],QR=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],sfe=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),ife=()=>{var K,z;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=Nn(),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[u,d]=x.useState(!1),[f,m]=x.useState(!1),[p,y]=x.useState(""),[j,b]=x.useState(""),[N,_]=x.useState(!1),[w,E]=x.useState(null);Co();const[R,A]=x.useState(!1),[B,I]=x.useState(!1),[F,$]=x.useState(!1),P=fr(),M=Fc({resolver:Vc(tfe),defaultValues:{email:"",password:""}}),D=Fc({resolver:Vc(nfe),defaultValues:{displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),k=Fc({resolver:Vc(rfe),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(x.useEffect(()=>{(async()=>{if(t)try{const V=await Vs(jt(Ue,"users",t.uid));if(V.exists()){const q=V.data();if(!(t.emailVerified||t.providerData.some(me=>me.providerId==="google.com"))&&!q.emailVerified){b(t.email||""),m(!0),A(!0),$(!1);return}}else{if(t.providerData.some(J=>J.providerId==="google.com")){if(!sfe(t.email||"")){y("Vous devez utiliser une adresse email universitaire"),ra.signOut();return}E({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),_(!0);return}const q=localStorage.getItem("pendingUserData");if(q&&t.emailVerified){const J=JSON.parse(q),me=Object.fromEntries(Object.entries(J).filter(([,Pe])=>Pe!==void 0));await Ec(jt(Ue,"users",t.uid),me),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(V){console.error("Error checking user profile:",V)}})()},[t,r]),x.useEffect(()=>{let H=null;return f&&t&&!t.emailVerified&&(H=setInterval(async()=>{await nm(t),t.emailVerified&&(m(!1),b(""),y(""),window.location.reload())},5e3)),()=>{H&&clearInterval(H)}},[f,t]),x.useEffect(()=>{t?t.emailVerified?(A(!1),$(!1)):(b(t.email||""),A(!0),$(!1)):(A(!1),$(!1))},[t]),x.useEffect(()=>{let H=null;return R&&t&&!t.emailVerified&&(H=setInterval(async()=>{await nm(t),t.emailVerified&&($(!0),H&&clearInterval(H))},5e3)),()=>{H&&clearInterval(H)}},[R,t]),N&&w)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(ve,{className:"w-full max-w-md",children:[i.jsxs(Xe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(qY,{className:"w-6 h-6 text-green-600"})})}),i.jsx(Je,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),i.jsx(Mt,{children:"Dernière étape pour accéder à StudyMarket"})]}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs(Wt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Connecté avec ",i.jsx("strong",{children:w.email})]})]}),p&&i.jsxs(Wt,{variant:"destructive",children:[i.jsx(Em,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsxs("form",{onSubmit:k.handleSubmit(async H=>{d(!0),y("");try{const V=H.university==="Autre université"?H.otherUniversity:H.university,q=H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:H.fieldOfStudy,J=Object.fromEntries(Object.entries(H).filter(([,me])=>me!==void 0));if(await Ec(jt(Ue,"users",w.uid),{email:w.email,displayName:J.displayName,photoURL:w.photoURL,university:V,otherUniversity:H.university==="Autre université"?H.otherUniversity:void 0,fieldOfStudy:q,otherFieldOfStudy:H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:void 0,graduationYear:parseInt(H.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&w.displayName)try{await ep(t,{displayName:J.displayName})}catch{}await r(w.uid),_(!1),window.location.reload()}catch(V){console.error("Error completing profile:",V),y("Erreur lors de la sauvegarde du profil")}finally{d(!1)}}),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"university",children:"Université"}),i.jsxs(ln,{onValueChange:H=>k.setValue("university",H),value:k.watch("university"),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Sélectionnez votre université"})}),i.jsx(an,{children:ZR.map(H=>i.jsx(Qe,{value:H,children:H},H))})]}),k.watch("university")==="Autre université"&&i.jsx(rt,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...k.register("otherUniversity"),className:"mt-2"}),k.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.university.message}),k.watch("university")==="Autre université"&&k.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(ln,{onValueChange:H=>k.setValue("fieldOfStudy",H),value:k.watch("fieldOfStudy"),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Filière"})}),i.jsx(an,{children:QR.map(H=>i.jsx(Qe,{value:H,children:H},H))})]}),k.watch("fieldOfStudy")==="Autre"&&i.jsx(rt,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...k.register("otherFieldOfStudy"),className:"mt-2"}),k.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.fieldOfStudy.message}),k.watch("fieldOfStudy")==="Autre"&&k.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(ln,{onValueChange:H=>k.setValue("graduationYear",H),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Année"})}),i.jsx(an,{children:Array.from({length:8},(H,V)=>2024+V).map(H=>i.jsx(Qe,{value:H.toString(),children:H},H))})]}),k.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.graduationYear.message})]})]}),i.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),i.jsx(te,{variant:"outline",onClick:()=>{ra.signOut(),_(!1),E(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(f)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(ve,{className:"w-full max-w-md",children:[i.jsxs(Xe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(js,{className:"w-6 h-6 text-blue-600"})})}),i.jsx(Je,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),i.jsxs(Mt,{children:["Un lien d'activation a été envoyé à ",i.jsx("strong",{children:j}),".",i.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),i.jsxs(ye,{className:"space-y-4",children:[i.jsxs(Wt,{children:[i.jsx(At,{className:"h-4 w-4"}),i.jsxs(Gt,{children:["Nous avons envoyé un lien d'activation à ",i.jsx("strong",{children:j}),".",i.jsx("br",{}),i.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Important :"})}),i.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),i.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),i.jsx("p",{children:"• Le lien expire dans 24h"})]}),i.jsxs(te,{onClick:async()=>{if(t){d(!0);try{await bw(t),y(""),alert("Email d'activation renvoyé !")}catch(H){y("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",H)}d(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(js,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),i.jsx(te,{onClick:async()=>{if(t){d(!0);try{await nm(t),t.emailVerified?(m(!1),b(""),y(""),window.location.reload()):y("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{y("Erreur lors de la vérification de l'état de l'email")}d(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai déjà validé mon email"}),p&&i.jsxs(Wt,{variant:"destructive",children:[i.jsx(Em,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsx(te,{variant:"link",onClick:()=>{m(!1),b(""),y(""),t&&ra.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const G=async H=>{d(!0),y("");try{await e(H.email,H.password),P("/")}catch(V){V.code==="auth/invalid-credential"?y("Email ou mot de passe incorrect"):V.code==="auth/user-not-found"?y("Aucun compte trouvé avec cet email"):V.code==="auth/user-disabled"?y("Ce compte a été désactivé"):V.code==="auth/too-many-requests"?y("Trop de tentatives. Réessayez plus tard."):y("Erreur de connexion: "+(V.message||"Erreur inconnue")),console.error("Sign in error:",V)}finally{d(!1)}},se=async H=>{d(!0),y("");try{const q=(await L4(ra,H.email,H.password)).user;await bw(q,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const J=H.university==="Autre université"?H.otherUniversity:H.university,me=H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:H.fieldOfStudy,Pe=Object.fromEntries(Object.entries(H).filter(([,oe])=>oe!==void 0)),Me={displayName:Pe.displayName,university:J,otherUniversity:H.university==="Autre université"?H.otherUniversity:void 0,fieldOfStudy:me,otherFieldOfStudy:H.fieldOfStudy==="Autre"?H.otherFieldOfStudy:void 0,graduationYear:parseInt(Pe.graduationYear),email:H.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await Ec(jt(Ue,"users",q.uid),Me),await r(q.uid),b(H.email),A(!0),$(!1),q&&await ep(q,{displayName:Pe.displayName}),window.location.reload()}catch(V){console.error("Sign up error:",V),V.code==="auth/email-already-in-use"?y("Cette adresse email est déjà utilisée"):V.code==="auth/weak-password"?y("Le mot de passe est trop faible"):V.code==="auth/invalid-email"?y("Adresse email invalide"):y("Erreur lors de la création du compte")}finally{d(!1)}},ae=async()=>{d(!0),y("");try{await n()}catch(H){H.code==="auth/popup-closed-by-user"?y("Connexion annulée"):H.code==="auth/popup-blocked"?y("Popup bloquée par le navigateur"):H.code==="auth/account-exists-with-different-credential"?y("Un compte existe déjà avec cet email"):y("Erreur de connexion avec Google: "+(H.message||"Erreur inconnue")),console.error("Google sign in error:",H)}finally{d(!1)}};return x.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Vs(jt(Ue,"users",t.uid))).exists()){const q=localStorage.getItem("pendingUserData");if(q){const J=JSON.parse(q),me=Object.fromEntries(Object.entries(J).filter(([,Pe])=>Pe!==void 0));await Ec(jt(Ue,"users",t.uid),me),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),i.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[i.jsxs(ve,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[i.jsxs(Xe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(Vh,{className:"w-6 h-6 text-white"})})}),i.jsx(Je,{className:"text-2xl",children:s?"Rejoindre StudyMarket":"Se connecter"}),i.jsx(Mt,{children:s?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),s&&i.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:i.jsxs(ot,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),i.jsxs(ye,{className:"space-y-6",children:[p&&i.jsxs(Wt,{variant:"destructive",children:[i.jsx(Em,{className:"h-4 w-4"}),i.jsx(Gt,{children:p})]}),i.jsxs(te,{variant:"outline",className:"w-full",onClick:ae,disabled:u,children:[u?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(Pi,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),i.jsxs("form",{onSubmit:s?D.handleSubmit(se):M.handleSubmit(G),className:"space-y-4",children:[s&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"displayName",children:"Nom complet"}),i.jsxs("div",{className:"relative",children:[i.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{id:"displayName",type:"text",placeholder:"Votre nom complet",className:"pl-10",...D.register("displayName")})]}),D.formState.errors.displayName&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.displayName.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"email",children:"Email universitaire"}),i.jsxs("div",{className:"relative",children:[i.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...s?D.register("email"):M.register("email")})]}),(s?D.formState.errors.email:M.formState.errors.email)&&i.jsx("p",{className:"text-sm text-destructive",children:(K=s?D.formState.errors.email:M.formState.errors.email)==null?void 0:K.message}),s&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"university",children:"Université"}),i.jsxs(ln,{onValueChange:H=>D.setValue("university",H),value:D.watch("university"),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Sélectionnez votre université"})}),i.jsx(an,{children:ZR.map(H=>i.jsx(Qe,{value:H,children:H},H))})]}),D.watch("university")==="Autre université"&&i.jsx(rt,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...D.register("otherUniversity"),className:"mt-2"}),D.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre université"&&D.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(ln,{onValueChange:H=>D.setValue("fieldOfStudy",H),value:D.watch("fieldOfStudy"),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Filière"})}),i.jsx(an,{children:QR.map(H=>i.jsx(Qe,{value:H,children:H},H))})]}),D.watch("fieldOfStudy")==="Autre"&&i.jsx(rt,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...D.register("otherFieldOfStudy"),className:"mt-2"}),D.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(ln,{onValueChange:H=>D.setValue("graduationYear",H),children:[i.jsx(sn,{children:i.jsx(cn,{placeholder:"Année"})}),i.jsx(an,{children:Array.from({length:8},(H,V)=>2024+V).map(H=>i.jsx(Qe,{value:H.toString(),children:H},H))})]}),D.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"password",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...s?D.register("password"):M.register("password")}),i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>l(!o),children:o?i.jsx(TY,{className:"w-4 h-4"}):i.jsx(eh,{className:"w-4 h-4"})})]}),(s?D.formState.errors.password:M.formState.errors.password)&&i.jsx("p",{className:"text-sm text-destructive",children:(z=s?D.formState.errors.password:M.formState.errors.password)==null?void 0:z.message})]}),s&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10",...D.register("confirmPassword")})]}),D.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.confirmPassword.message})]}),i.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?i.jsx(Jr,{className:"w-4 h-4 mr-2 animate-spin"}):null,s?"Créer le compte et envoyer l'email":"Se connecter"]})]}),i.jsx("div",{className:"w-full",children:i.jsx(te,{variant:"link",onClick:()=>a(!s),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:s?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),s&&i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),i.jsx(efe,{open:R,loading:B,email:j,onResend:async()=>{I(!0);try{t&&await bw(t)}finally{I(!1)}},onCheck:async()=>{I(!0);try{t&&(await nm(t),t.emailVerified&&$(!0))}finally{I(!1)}},onClose:()=>{A(!1),$(!1),P("/")},verified:F})]})},bi=({children:t})=>{const{currentUser:e}=Nn(),n=Co();return e?i.jsx(i.Fragment,{children:t}):i.jsx(QU,{to:"/auth",state:{from:n},replace:!0})},o9=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=fr(),s=e,a=0,o=0,l=s+a-o,u=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d);return i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Ll,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((d,f)=>d+f.quantity,0),")"]}),i.jsx("span",{children:u(s)})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(z0,{className:"w-4 h-4"}),"Livraison"]}),i.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,i.jsx(Pi,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"font-bold text-lg",children:u(l)})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&i.jsxs(te,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[i.jsx(Un,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",i.jsx(ca,{className:"ml-2 h-4 w-4"})]})]})})]})},afe=()=>{const{currentUser:t}=Nn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,cartTotal:a}=Kh(),o=fr(),[l,u]=x.useState(""),[d,f]=x.useState(!1),m=(j,b)=>{if(!(b<1)){if(b>10){be.error("Maximum 10 articles par produit");return}n(j,b)}},p=j=>{r(j),be.success("Article retiré du panier")},y=()=>{l.trim()&&(f(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?be.success("Code promo appliqué : 10% de réduction"):be.error("Code promo invalide ou expiré"),f(!1)},1e3))};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[i.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Ll,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&i.jsxs(te,{variant:"outline",onClick:s,className:"text-destructive hover:text-destructive",children:[i.jsx(ao,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ll,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:"/products",children:[i.jsx(Dc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Articles (",e.reduce((j,b)=>j+b.quantity,0),")"]}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[i.jsx(Dc,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),i.jsx(ye,{children:i.jsx("div",{className:"space-y-4",children:e.map(j=>i.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[j.image?i.jsx("img",{src:j.image,alt:j.name,className:"w-20 h-20 object-cover rounded"}):i.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:i.jsx(Dc,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:j.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:j.seller}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>m(j.id,j.quantity-1),disabled:j.quantity<=1,children:i.jsx(QD,{className:"h-3 w-3"})}),i.jsx(rt,{type:"number",value:j.quantity,onChange:b=>{const N=parseInt(b.target.value);isNaN(N)||m(j.id,N)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),i.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>m(j.id,j.quantity+1),disabled:j.quantity>=10,children:i.jsx(Mc,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(j.price*j.quantity)}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>p(j.id),className:"text-destructive hover:text-destructive mt-2",children:[i.jsx(ao,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},j.id))})})]}),i.jsx(ve,{className:"mt-6",children:i.jsxs(ye,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(up,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{placeholder:"Code promo",value:l,onChange:j=>u(j.target.value),className:"pl-10"})]}),i.jsx(te,{onClick:y,disabled:!l.trim()||d,children:d?i.jsxs(i.Fragment,{children:[i.jsx(vo,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(o9,{cart:e,total:a,showCheckoutButton:!0}),!t&&i.jsxs(Wt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Tv=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},PC=Gh((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=bn(Bt(Ue,"orders"),tr("userId","==",n),oi(100)),s=await zn(r),a=[];s.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:Tv(l.createdAt),updatedAt:Tv(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),be.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Vs(jt(Ue,"orders",n));if(r.exists()){const s=r.data();return{id:r.id,...s,createdAt:Tv(s.createdAt),updatedAt:Tv(s.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),be.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),s={...n,securityCode:r,createdAt:or(),updatedAt:or()},a=await Ml(Bt(Ue,"orders"),s),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),be.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),be.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:or()};s&&(a.notes=s),await On(jt(Ue,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:s||l.notes,updatedAt:new Date}:l)})),be.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),be.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await On(jt(Ue,"orders",n),{status:"cancelled",notes:r,updatedAt:or()}),t(s=>({orders:s.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),be.success("Commande annulée")}catch(s){console.error("Error cancelling order:",s),be.error("Erreur lors de l'annulation de la commande")}}})),ofe=()=>{const{currentUser:t,userProfile:e}=Nn(),n=fr(),r=Co(),{cart:s,cartTotal:a,clearCart:o}=Kh(),{createOrder:l}=PC(),[u,d]=x.useState("shipping"),[f,m]=x.useState(!1),[p,y]=x.useState(null),[j,b]=x.useState({}),[N,_]=x.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[w,E]=x.useState({}),[R,A]=x.useState(!1);x.useEffect(()=>{var M;s.length===0&&!((M=r.state)!=null&&M.directCheckout)&&(n("/cart"),be.error("Votre panier est vide"))},[s,n,r]);const B=()=>{const M={};return N.fullName||(M.fullName="Nom complet requis"),N.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)||(M.email="Format d'email invalide"):M.email="Email requis",N.phone||(M.phone="Téléphone requis"),N.address||(M.address="Adresse requise"),N.city||(M.city="Ville requise"),N.postalCode||(M.postalCode="Code postal requis"),E(M),Object.keys(M).length===0},I=M=>{M.preventDefault(),B()&&(d("payment"),window.scrollTo(0,0))},F=(M,D)=>{y(M),b(D),M==="card"&&D.stripePaymentId&&(d("review"),window.scrollTo(0,0))},$=()=>{if(!p){be.error("Veuillez sélectionner un mode de paiement");return}d("review"),window.scrollTo(0,0)},P=async()=>{if(!t){n("/auth");return}if(!R){be.error("Veuillez accepter les conditions générales");return}m(!0);try{const M={userId:t.uid,items:s,total:a,shipping:N,payment:{method:p,details:j,transactionId:j.stripePaymentId},status:p==="card"?"processing":"pending"},D=await l(M);o(),n(`/order-confirmation/${D}`)}catch(M){console.error("Error placing order:",M),be.error("Erreur lors de la création de la commande")}finally{m(!1)}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[i.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),i.jsxs("div",{className:"flex items-center mt-6",children:[i.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),i.jsx(ca,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),i.jsx(ca,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(z0,{className:"w-5 h-5"}),"Informations de livraison"]}),i.jsx(Mt,{children:"Entrez vos coordonnées pour la livraison"})]}),i.jsx(ye,{children:i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"fullName",className:"flex items-center gap-1",children:[i.jsx(ss,{className:"w-4 h-4"}),"Nom complet *"]}),i.jsx(rt,{id:"fullName",value:N.fullName,onChange:M=>_({...N,fullName:M.target.value}),className:w.fullName?"border-red-500":""}),w.fullName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.fullName})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"email",className:"flex items-center gap-1",children:[i.jsx(js,{className:"w-4 h-4"}),"Email *"]}),i.jsx(rt,{id:"email",type:"email",value:N.email,onChange:M=>_({...N,email:M.target.value}),className:w.email?"border-red-500":""}),w.email&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.email})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"phone",className:"flex items-center gap-1",children:[i.jsx($h,{className:"w-4 h-4"}),"Téléphone *"]}),i.jsx(rt,{id:"phone",value:N.phone,onChange:M=>_({...N,phone:M.target.value}),className:w.phone?"border-red-500":""}),w.phone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.phone})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"university",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Université"]}),i.jsx(rt,{id:"university",value:N.university,onChange:M=>_({...N,university:M.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"address",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Adresse *"]}),i.jsx(rt,{id:"address",value:N.address,onChange:M=>_({...N,address:M.target.value}),className:w.address?"border-red-500":""}),w.address&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.address})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"city",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Ville *"]}),i.jsx(rt,{id:"city",value:N.city,onChange:M=>_({...N,city:M.target.value}),className:w.city?"border-red-500":""}),w.city&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.city})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Code postal *"]}),i.jsx(rt,{id:"postalCode",value:N.postalCode,onChange:M=>_({...N,postalCode:M.target.value}),className:w.postalCode?"border-red-500":""}),w.postalCode&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:w.postalCode})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"country",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"w-4 h-4"}),"Pays *"]}),i.jsx(rt,{id:"country",value:N.country,onChange:M=>_({...N,country:M.target.value}),disabled:!0})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsx(Ex,{id:"saveInfo",checked:N.saveInfo,onCheckedChange:M=>_({...N,saveInfo:M})}),i.jsx(Oe,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs(te,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",i.jsx(ca,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-5 h-5"}),"Méthode de paiement"]}),i.jsx(Mt,{children:"Choisissez votre mode de paiement préféré"})]}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(N5,{amount:a,currency:"EUR",onMethodSelect:F,selectedMethod:p}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs(te,{variant:"outline",onClick:()=>d("shipping"),children:[i.jsx(Ac,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsxs(te,{onClick:$,disabled:!p||p==="card"&&!j.stripePaymentId,children:["Vérifier la commande",i.jsx(ca,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&i.jsxs(ve,{children:[i.jsxs(Xe,{children:[i.jsxs(Je,{className:"flex items-center gap-2",children:[i.jsx(At,{className:"w-5 h-5"}),"Vérification de la commande"]}),i.jsx(Mt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>d("shipping"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:N.fullName}),i.jsx("p",{children:N.address}),i.jsxs("p",{children:[N.postalCode," ",N.city,", ",N.country]}),i.jsx("p",{children:N.email}),i.jsx("p",{children:N.phone})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>d("payment"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsxs("p",{className:"font-medium",children:[p==="card"&&"Carte bancaire",p==="paypal"&&"PayPal",p==="transfer"&&"Virement bancaire",p==="cash"&&"Paiement à la livraison",p==="lydia"&&"Lydia"]}),p==="card"&&j.stripePaymentId&&i.jsxs("p",{className:"text-green-600 text-sm",children:[i.jsx(At,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),p==="paypal"&&j.paypalEmail&&i.jsx("p",{children:j.paypalEmail}),p==="lydia"&&j.lydiaPhone&&i.jsx("p",{children:j.lydiaPhone})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",s.length,")"]}),i.jsx("div",{className:"space-y-3",children:s.map(M=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[M.image&&i.jsx("img",{src:M.image,alt:M.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:M.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",M.quantity]})]}),i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(M.price*M.quantity)})]},M.id))})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Ex,{id:"terms",checked:R,onCheckedChange:M=>A(M)}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs(te,{variant:"outline",onClick:()=>d("payment"),children:[i.jsx(Ac,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsx(te,{onClick:P,disabled:f||!R,className:"bg-gradient-to-r from-primary to-secondary",children:f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(o9,{cart:s,total:a,showCheckoutButton:!1}),i.jsxs(Wt,{className:"mt-4 border-blue-200 bg-blue-50",children:[i.jsx(Ht,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Gt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),i.jsx(ve,{className:"mt-4",children:i.jsx(ye,{className:"pt-6",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Dl,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),i.jsx(te,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6",children:[i.jsx(Ll,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),i.jsx(te,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},lfe=()=>{const{currentUser:t}=Nn(),{orders:e,fetchUserOrders:n,loading:r}=PC(),s=fr(),[a,o]=x.useState(""),[l,u]=x.useState("all"),[d,f]=x.useState("date-desc"),[m,p]=x.useState("all");x.useEffect(()=>{t&&n(t.uid)},[t,n]);const y=()=>e.filter(_=>{const w=!a||_.id.toLowerCase().includes(a.toLowerCase()),E=l==="all"||_.status===l;let R=!0;if(m!=="all"){const A=new Date(_.createdAt),B=new Date;if(m==="last-30-days"){const I=new Date;I.setDate(B.getDate()-30),R=A>=I}else if(m==="last-6-months"){const I=new Date;I.setMonth(B.getMonth()-6),R=A>=I}}return w&&E&&R}).sort((_,w)=>d==="date-desc"?new Date(w.createdAt).getTime()-new Date(_.createdAt).getTime():d==="date-asc"?new Date(_.createdAt).getTime()-new Date(w.createdAt).getTime():d==="total-desc"?w.total-_.total:d==="total-asc"?_.total-w.total:0),j=_=>{switch(_){case"pending":return i.jsxs(ot,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(Hn,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return i.jsxs(ot,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(_n,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return i.jsxs(ot,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[i.jsx(z0,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return i.jsxs(ot,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(At,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return i.jsxs(ot,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(Jd,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return i.jsx(ot,{children:_})}},b=_=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(_),N=()=>{const _={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(A=>({id:A.id,date:A.createdAt,status:A.status,total:A.total,items:A.items.length}))},w=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),E=URL.createObjectURL(w),R=document.createElement("a");R.href=E,R.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(E)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(_n,{className:"w-8 h-8"}),"Mes Commandes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),i.jsxs(te,{variant:"outline",onClick:N,className:"flex items-center gap-2",children:[i.jsx(li,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsx(ve,{children:i.jsx(ye,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(rt,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:_=>o(_.target.value),className:"pl-10"})]}),i.jsxs(ln,{value:l,onValueChange:u,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{placeholder:"Statut"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Tous les statuts"}),i.jsx(Qe,{value:"pending",children:"En attente"}),i.jsx(Qe,{value:"processing",children:"En traitement"}),i.jsx(Qe,{value:"shipped",children:"Expédiée"}),i.jsx(Qe,{value:"delivered",children:"Livrée"}),i.jsx(Qe,{value:"cancelled",children:"Annulée"})]})]}),i.jsxs(ln,{value:m,onValueChange:p,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{placeholder:"Période"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"all",children:"Toutes les périodes"}),i.jsx(Qe,{value:"last-30-days",children:"30 derniers jours"}),i.jsx(Qe,{value:"last-6-months",children:"6 derniers mois"})]})]}),i.jsxs(ln,{value:d,onValueChange:f,children:[i.jsx(sn,{className:"w-40",children:i.jsx(cn,{placeholder:"Trier par"})}),i.jsxs(an,{children:[i.jsx(Qe,{value:"date-desc",children:"Date (récent → ancien)"}),i.jsx(Qe,{value:"date-asc",children:"Date (ancien → récent)"}),i.jsx(Qe,{value:"total-desc",children:"Prix (élevé → bas)"}),i.jsx(Qe,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),i.jsxs(yu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(ec,{className:"grid w-full grid-cols-4",children:[i.jsx(pn,{value:"all",children:"Toutes"}),i.jsx(pn,{value:"active",children:"En cours"}),i.jsx(pn,{value:"completed",children:"Terminées"}),i.jsx(pn,{value:"cancelled",children:"Annulées"})]}),i.jsx(gn,{value:"all",className:"space-y-4",children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((_,w)=>i.jsx(ve,{className:"animate-pulse",children:i.jsxs(ye,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},w))}):y().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_n,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:"/listings",children:[i.jsx(Dc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsx("div",{className:"space-y-4",children:y().map(_=>i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ye,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),j(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),dr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Vr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(ca,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((w,E)=>i.jsx("div",{className:"flex-shrink-0",children:w.image?i.jsx("img",{src:w.image,alt:w.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(_n,{className:"w-6 h-6 text-muted-foreground"})})},E)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(gn,{value:"active",className:"space-y-4",children:y().filter(_=>["pending","processing","shipped"].includes(_.status)).length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Hn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(_=>["pending","processing","shipped"].includes(_.status)).map(_=>i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ye,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),j(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),dr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Vr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(ca,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((w,E)=>i.jsx("div",{className:"flex-shrink-0",children:w.image?i.jsx("img",{src:w.image,alt:w.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(_n,{className:"w-6 h-6 text-muted-foreground"})})},E)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(gn,{value:"completed",className:"space-y-4",children:y().filter(_=>_.status==="delivered").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(At,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(_=>_.status==="delivered").map(_=>i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ye,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),j(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),dr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Vr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(ca,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((w,E)=>i.jsx("div",{className:"flex-shrink-0",children:w.image?i.jsx("img",{src:w.image,alt:w.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(_n,{className:"w-6 h-6 text-muted-foreground"})})},E)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})}),i.jsx(gn,{value:"cancelled",className:"space-y-4",children:y().filter(_=>_.status==="cancelled").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jd,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(_=>_.status==="cancelled").map(_=>i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ye,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",_.id.slice(0,8)]}),j(_.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),dr(new Date(_.createdAt),"dd MMMM yyyy",{locale:Vr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:b(_.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.items.length," article",_.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(ze,{to:`/order/${_.id}`,children:["Détails",i.jsx(ca,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[_.items.slice(0,4).map((w,E)=>i.jsx("div",{className:"flex-shrink-0",children:w.image?i.jsx("img",{src:w.image,alt:w.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(_n,{className:"w-6 h-6 text-muted-foreground"})})},E)),_.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",_.items.length-4]})})]})]})},_.id))})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6",children:[i.jsx(_n,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),i.jsx(te,{onClick:()=>s("/auth"),children:"Se connecter"})]})})})},cfe=()=>{var f,m;const{orderId:t}=XN(),{getOrderById:e}=PC(),[n,r]=x.useState(null),[s,a]=x.useState(!0);x.useEffect(()=>{(async()=>{if(t)try{a(!0);const y=await e(t);r(y)}catch(y){console.error("Error loading order:",y)}finally{a(!1)}})()},[t,e]);const o=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(p),l=p=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[p]||p,u=()=>{const p=new Date,y=new Date(p);return y.setDate(p.getDate()+3),dr(y,"EEEE d MMMM",{locale:Vr})},d=()=>{navigator.clipboard.writeText(t||""),be.success("Numéro de commande copié !")};return s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),i.jsx("div",{className:"h-32 bg-muted rounded"}),i.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(At,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),i.jsxs(ve,{className:"mb-6",children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(_n,{className:"w-5 h-5"}),"Détails de la commande"]}),i.jsx(ot,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,i.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:i.jsx(WD,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),i.jsx("p",{className:"font-medium",children:dr(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),i.jsx(Pi,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),i.jsx("div",{className:"space-y-3",children:n.items.map((p,y)=>i.jsxs("div",{className:"flex items-center gap-3",children:[p.image&&i.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:p.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",p.quantity]})]}),i.jsx("p",{className:"font-semibold",children:o(p.price*p.quantity)})]},y))})]}),i.jsx(Pi,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),i.jsx("span",{children:o(n.total)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),i.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total"}),i.jsx("span",{children:o(n.total)})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[i.jsx(z0,{className:"w-4 h-4"}),"Livraison"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:n.shipping.fullName}),i.jsx("p",{children:n.shipping.address}),i.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(ii,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[i.jsx(Un,{className:"w-4 h-4"}),"Paiement"]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((f=n.payment.details)==null?void 0:f.cardNumber)&&i.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((m=n.payment.details)==null?void 0:m.paypalEmail)&&i.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&i.jsxs(Wt,{className:"mt-2",children:[i.jsx(Mn,{className:"h-4 w-4"}),i.jsx(Gt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Hn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(te,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ze,{to:"/orders",children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsxs(te,{variant:"outline",className:"flex-1",children:[i.jsx(li,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ze,{to:"/listings",children:[i.jsx(Dc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs(te,{variant:"link",className:"text-primary",children:[i.jsx(js,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),i.jsxs(te,{variant:"link",className:"text-primary",children:[i.jsx(cp,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(ve,{children:i.jsxs(ye,{className:"pt-6",children:[i.jsx(Mn,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),i.jsx(te,{asChild:!0,children:i.jsx(ze,{to:"/orders",children:"Voir mes commandes"})})]})})})},ufe=({id:t,name:e,description:n,price:r,currency:s,image:a,mode:o})=>{const{currentUser:l}=Nn(),{addToCart:u}=Kh(),d=fr(),f=(y,j)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:j}).format(y),m=()=>{if(!l){be.error("Veuillez vous connecter pour ajouter au panier"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},p=()=>{if(!l){be.error("Veuillez vous connecter pour acheter"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),d("/checkout")};return i.jsxs(ve,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[i.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):i.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:i.jsx(wY,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx(ot,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),i.jsxs(Xe,{children:[i.jsx(Je,{children:e}),i.jsx(Mt,{children:n})]}),i.jsx(ye,{children:i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f(r,s),o==="subscription"&&i.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),i.jsxs(tF,{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",className:"flex-1",onClick:m,children:[i.jsx(Ll,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:p,children:"Acheter"})]})]})},Cj=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],dfe=t=>Cj.find(e=>e.priceId===t),hfe="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";f5(hfe);async function ffe(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function mfe(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const pfe=()=>{const{getCartItemCount:t}=Kh(),e=fr(),n=t();return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[i.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Dc,{className:"w-8 h-8"}),"Boutique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&i.jsxs(te,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[i.jsx(Ll,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Cj.map(r=>i.jsx(ufe,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Cj.length===0&&i.jsx(ve,{className:"text-center py-12",children:i.jsxs(ye,{className:"pt-6",children:[i.jsx(_n,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},gfe=()=>{const[t]=QO(),e=fr(),{currentUser:n}=Nn(),{clearCart:r}=Kh(),[s,a]=x.useState(!0),[o,l]=x.useState(null),[u,d]=x.useState(null),[f,m]=x.useState(null),p=t.get("session_id"),y=t.get("type")==="subscription";x.useEffect(()=>{r();async function b(){if(n)try{if(a(!0),y){const _=await ffe();l(_)}else{const w=(await mfe())[0];d(w)}}catch(_){console.error("Error fetching checkout result:",_),m("Impossible de charger les détails de votre achat")}finally{a(!1)}}const N=setTimeout(()=>{b()},2e3);return()=>clearTimeout(N)},[n,y,p,r]);const j=()=>{if(y&&(o!=null&&o.price_id)){const b=dfe(o.price_id);return b?b.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto text-center",children:[i.jsx(Jr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),i.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):f?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(Wt,{className:"border-red-200 bg-red-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-red-600"}),i.jsx(Gt,{className:"text-red-800",children:f})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(te,{asChild:!0,children:i.jsx(ze,{to:"/",children:"Retour à l'accueil"})})})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(At,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Votre ",y?"abonnement":"commande"," a été confirmé",y?"":"e","."]})]}),i.jsxs(ve,{className:"mb-6",children:[i.jsx(Xe,{children:i.jsxs(Je,{className:"flex items-center gap-2",children:[y?i.jsx(Un,{className:"w-5 h-5"}):i.jsx(_n,{className:"w-5 h-5"}),j()]})}),i.jsx(ye,{children:i.jsx("div",{className:"space-y-4",children:y&&o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),i.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),i.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),i.jsx("span",{className:"font-medium",children:u.order_id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):i.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(Wt,{className:"bg-blue-50 border-blue-200",children:[i.jsx(ii,{className:"h-4 w-4 text-blue-600"}),i.jsx(Gt,{className:"text-blue-800",children:y?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(te,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ze,{to:"/orders",children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ze,{to:"/products",children:[i.jsx(Dc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",i.jsx(cp,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(Wt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Mn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Gt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(te,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete Yh.Icon.Default.prototype._getIconUrl;Yh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function vfe({position:t,onChange:e}){function n(){return YE({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?i.jsx(JE,{position:t}):null}return i.jsxs(XE,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[i.jsx(eC,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(n,{})]})}const yfe=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],xfe=()=>{const{id:t}=XN(),e=fr(),{currentUser:n}=Nn(),{fetchListingById:r,updateListing:s,currentListing:a,loading:o}=s_(),[l,u]=x.useState({title:"",description:"",price:"",images:[]}),[d,f]=x.useState([]),[m,p]=x.useState(!1),[y,j]=x.useState(null),[b,N]=x.useState(""),[_,w]=x.useState([]),[E,R]=x.useState(""),[A,B]=x.useState(""),[I,F]=x.useState(null),[$,P]=x.useState(!1);x.useEffect(()=>{t&&r(t)},[t,r]),x.useEffect(()=>{var z;a&&(u({title:a.title||"",description:a.description||"",price:((z=a.price)==null?void 0:z.toString())||"",images:a.images||[]}),N(a.category||""),w(a.tags||[]),B(a.meetingLocation||""),a.coordinates&&F(a.coordinates))},[a]);const M=z=>{u({...l,[z.target.name]:z.target.value})},D=z=>{if(!z.target.files)return;const H=Array.from(z.target.files);f(V=>[...V,...H])},k=z=>{u({...l,images:l.images.filter((H,V)=>V!==z)})},G=z=>{f(d.filter((H,V)=>V!==z))},se=()=>{E.trim()&&!_.includes(E.trim())&&_.length<5&&(w([..._,E.trim()]),R(""))},ae=z=>{w(_.filter(H=>H!==z))},K=async z=>{if(z.preventDefault(),!(!t||!n)){p(!0);try{let H=[];d.length>0&&(H=await Promise.all(d.map(q=>_fe(q,n.uid))));const V=[...l.images,...H];await s(t,{...l,price:parseFloat(l.price),images:V,category:b,tags:_,meetingLocation:A,coordinates:I}),e(`/listing/${t}`)}catch{j("Erreur lors de la mise à jour de l'annonce")}finally{p(!1)}}};return o?i.jsx("div",{children:"Chargement..."}):a?y?i.jsx("div",{className:"text-red-500",children:y}):i.jsx("form",{onSubmit:K,className:"max-w-lg mx-auto mt-10",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),i.jsx(rt,{id:"title",name:"title",value:l.title,onChange:M,placeholder:"Titre",className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),i.jsx(ui,{id:"description",name:"description",value:l.description,onChange:M,placeholder:"Description",className:"w-full",rows:4})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),i.jsx(rt,{id:"price",name:"price",value:l.price,onChange:M,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),i.jsxs("select",{id:"category",name:"category",value:b,onChange:z=>N(z.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[i.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),yfe.map(z=>i.jsx("option",{value:z.value,children:z.label},z.value))]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(rt,{id:"meetingLocation",name:"meetingLocation",value:A,onChange:z=>B(z.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");P(!0),navigator.geolocation.getCurrentPosition(async z=>{const{latitude:H,longitude:V}=z.coords;F([H,V]);const q=await YR(H,V);B(q),P(!1)},()=>P(!1))},disabled:$,children:"📍"})]}),i.jsx("div",{className:"mt-3",children:i.jsx(vfe,{position:I,onChange:async z=>{F(z);const H=await YR(z[0],z[1]);B(H)}})})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(z=>i.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[z,i.jsx(te,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>ae(z),children:"×"})]},z))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{placeholder:"Ajouter un tag...",value:E,onChange:z=>R(z.target.value),onKeyDown:z=>z.key==="Enter"&&(z.preventDefault(),se()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:se,disabled:!E.trim()||_.length>=5,children:"Ajouter"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx(Oe,{className:"block mb-1 text-gray-700",children:"Photos"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((z,H)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:z,alt:`photo-${H}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(te,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>k(H),children:"×"})]},H)),d.map((z,H)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(z),alt:`new-photo-${H}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(te,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>G(H),children:"×"})]},H)),i.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[i.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:m})]})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:m,children:m?"Enregistrement...":"Enregistrer les modifications"}),y&&i.jsx("div",{className:"text-red-500 text-center mt-2",children:y})]})}):i.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function _fe(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,s=lE(uE,r),a=await aE(s,t);return await oE(a.ref)}async function YR(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}async function wfe(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function bfe(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,s)=>({id:r.id||`jooble-${s}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function jfe(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function Nfe(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(l=a.location)==null?void 0:l.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function Sfe(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(l=a.refs)==null?void 0:l.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function Efe(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((s,a)=>{const o=s;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function l9(t){try{console.log("🔍 Recherche Algolia avec query:",t||"*");const e="Q3E5Y56YF4",n="ff26b6f0fa03bc6384566ea42dfe0ab4",s=`https://${e}-dsn.algolia.net/1/indexes/study-market-jobs/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log("🧪 Recherche dans l'index: study-market-jobs"),console.log("🔗 URL:",s),console.log("📊 Récupération de toutes les offres disponibles...");let o=[],l=0;const u=10;for(;l<u;){const f={...a,page:l},m=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(f)});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const p=await m.json(),y=p.hits||[],j=p.nbHits||0;if(console.log(`📄 Page ${l+1}: ${y.length} offres récupérées`),y.length===0){console.log("✅ Plus d'offres à récupérer");break}if(o=o.concat(y),o.length>=j){console.log(`✅ Toutes les ${j} offres récupérées`);break}l++}return console.log(`📊 Total: ${o.length} offres récupérées depuis l'index "study-market-jobs"`),o.length===0?(console.log("ℹ️ Aucun résultat trouvé dans l'index study-market-jobs"),[]):(console.log("🔍 Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((f,m)=>{const p=f,y=()=>p.objectID||p.id||p.job_id||p._id||`algolia-${m}`,j=()=>p.title||p.job_title||p.position||p.name||"Titre non spécifié",b=()=>p.company||p.company_name||p.employer||p.employer_name||"Entreprise non spécifiée",N=()=>p.location||p.city||p.country||p.address||"France",_=()=>p.description||p.summary||p.job_description||p.content||"",w=()=>p.url||p.apply_url||p.job_url||p.link||"#",E=()=>p.publication_date||p.date||p.posted_date||p.created_at||"",R=()=>p.contract_type||p.job_type||p.employment_type||p.type||"";return{id:y(),title:j(),company:b(),company_logo:p.company_logo||p.logo||"",location:N(),description:_(),url:w(),source:"Algolia",publication_date:E(),contract_type:R(),remote:!!(p.remote||p.is_remote||p.remote_ok),tags:Array.isArray(p.tags)?p.tags:Array.isArray(p.skills)?p.skills:[]}}))}catch(e){throw console.error("❌ Erreur complète Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function Cfe(t){console.log("🚀 Début de la recherche pour:",t);const e=[{name:"Remotive",func:wfe},{name:"Jooble",func:bfe},{name:"JSearch",func:jfe},{name:"Adzuna",func:Nfe},{name:"The Muse",func:Sfe},{name:"LinkedIn",func:Efe},{name:"Algolia",func:l9}],r=(await Promise.allSettled(e.map(async a=>{console.log(`🔄 Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(`✅ ${a.name}: ${o.length} offres récupérées`),o}catch(o){return console.error(`❌ ${a.name} a échoué:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(`📋 Total final: ${r.length} offres de ${e.length} sources`);const s=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log("📊 Résumé par source:",s),r}function TC(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function Pfe(t,e){await Ml(Bt(Ue,"users",t,"favoriteJobs"),TC(e))}async function XR(t){const e=bn(Bt(Ue,"users",t,"favoriteJobs"));return(await zn(e)).docs.map(r=>({...r.data(),id:r.id}))}async function Tfe(t,e){const n=xD(Ue),r=Bt(Ue,"users",t,"searchedJobs");e.forEach(s=>{const a=jt(r);n.set(a,TC(s))}),await n.commit()}async function kfe(t,e,n){const r=iD(),s=jt(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(l=>TC(l)):[];await Ec(s,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const Rfe=({image:t,title:e,subtitle:n,location:r,date:s,isFavorite:a=!1,onFavoriteToggle:o,url:l,companyName:u})=>{const d=()=>{l&&window.open(l,"_blank","noopener,noreferrer")},f=p=>{p.stopPropagation(),o&&o()},m=p=>{p.stopPropagation()};return i.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:d,children:[i.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[i.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:p=>{const y=p.target;y.src.endsWith("/assets/job-default.jpg")||(y.src="/assets/job-default.jpg")}}),i.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),i.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:f,children:i.jsx(Fr,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:m,children:i.jsx($0,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&i.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[i.jsx(HD,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),i.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&i.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[i.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[i.jsx(Lr,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{children:r})]}),s&&i.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[i.jsx(ii,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),s]})]})]})]})},Ife="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function Afe(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:Ife}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function Ofe(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const Wf=12;function Mfe(t){var l,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((l=t.title)==null?void 0:l.toLowerCase())||"",s=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const d in e)if(r.includes(d)||s.includes(d)){n=e[d];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const Dfe=()=>{const[t,e]=x.useState(""),[n,r]=x.useState([]),[s,a]=x.useState(!1),{currentUser:o}=Nn(),[l,u]=x.useState([]),[d,f]=x.useState(1),[m,p]=x.useState({}),[y,j]=x.useState(null),[b,N]=x.useState(!1),[_,w]=x.useState(null);x.useEffect(()=>{(async()=>{if(o)try{const M=await XR(o.uid);u(M)}catch(M){console.error("Erreur lors du chargement des favoris:",M)}})()},[o]),x.useEffect(()=>{(async()=>{try{console.log("🧪 Test de connexion Algolia...");const M=await l9("");console.log("✅ Test Algolia réussi:",M.length,"offres trouvées"),M.length===0&&console.log("⚠️ Aucune offre dans l'index Algolia")}catch(M){console.error("❌ Erreur test Algolia:",M)}})()},[]),x.useEffect(()=>{if(n.length===0)return;(async()=>{const M={},D={},k=(d-1)*Wf,G=k+Wf,se=n.slice(k,G);for(const ae of se){const K=Mfe(ae),z=ae.id+ae.source;if(m[z]){M[z]=m[z];continue}if(D[K]){M[z]=D[K];continue}try{const H=await Afe(K);H?(D[K]=H,M[z]=H):M[z]="/assets/job-default.jpg"}catch(H){console.warn("Erreur chargement image pour",ae.title,H),M[z]="/assets/job-default.jpg"}}p(ae=>({...ae,...M}))})()},[n,d,m]),x.useEffect(()=>{E("")},[]);const E=async P=>{const M=P??t;a(!0),j(null),N(!0);try{console.log("🔍 Recherche avec query:",M);const D=await Cfe(M);console.log("📊 Résultats par source:");const k=D.reduce((G,se)=>(G[se.source||"unknown"]=(G[se.source||"unknown"]||0)+1,G),{});if(console.table(k),r(D),f(1),o&&D.length>0)try{await Tfe(o.uid,D);const G={};for(const se of D){const ae=se.source||"unknown";G[ae]||(G[ae]=[]),G[ae].push(se)}for(const se in G)await kfe(o.uid,se,G[se])}catch(G){console.error("Erreur Firestore:",G)}D.length===0&&j("Aucune offre trouvée pour cette recherche. Essayez avec des mots-clés différents.")}catch(D){console.error("❌ Erreur lors de la recherche:",D),j("Erreur lors de la recherche : "+(D instanceof Error?D.message:String(D)))}finally{a(!1)}},R=async P=>{if(!o){alert("Vous devez être connecté pour ajouter aux favoris.");return}try{if(l.some(D=>D.id===P.id&&D.source===P.source)){alert("Cette offre est déjà dans vos favoris !");return}await Pfe(o.uid,P),u(D=>[...D,P]),alert("Offre ajoutée aux favoris !")}catch(M){console.error("Erreur ajout favori:",M),alert("Erreur lors de l'ajout aux favoris.")}},A=async()=>{if(!o){alert("Vous devez être connecté pour voir vos favoris.");return}try{const P=await XR(o.uid);u(P),console.log("Favoris chargés:",P.length)}catch(P){console.error("Erreur chargement favoris:",P),alert("Erreur lors du chargement des favoris.")}},B=_?n.filter(P=>(P.source||"unknown")===_):n,I=Math.ceil(B.length/Wf),F=B.slice((d-1)*Wf,d*Wf),$=n.reduce((P,M)=>{const D=M.source||"unknown";return P[D]=(P[D]||0)+1,P},{});return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[i.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:P=>e(P.target.value),placeholder:"Ex: développeur, marketing, designer...",onKeyPress:P=>P.key==="Enter"&&E()}),i.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>E(),disabled:s,children:s?"Recherche...":"Tout rechercher"}),i.jsxs("button",{onClick:A,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",l.length,")"]})]}),b&&i.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouvées"]}),Object.keys($).length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${_?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{w(null),f(1)},children:["Tous: ",n.length]}),Object.entries($).map(([P,M])=>i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${_===P?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{w(P),f(1)},children:[P,": ",M]},P))]})]}),F.length>0&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:F.map(P=>i.jsx(Rfe,{image:m[P.id+P.source]||"/assets/job-default.jpg",companyName:P.company||void 0,title:P.title||"Titre non spécifié",subtitle:P.contract_type,location:P.location||"Non spécifié",date:P.publication_date?Ofe(P.publication_date):void 0,isFavorite:l.some(M=>M.id===P.id&&M.source===P.source),onFavoriteToggle:()=>R(P),url:P.url},`${P.id}-${P.source}`))}),I>1&&i.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d-1),disabled:d===1,children:"Précédent"}),Array.from({length:I}).map((P,M)=>{const D=M+1,k=D===d;return D===1||D===2||D===I||D===I-1||Math.abs(D-d)<=1?i.jsx("button",{className:`px-3 py-1 rounded border ${k?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>f(D),disabled:k,children:D},D):D===3&&d>5||D===I-2&&d<I-4?i.jsx("span",{children:"..."},D):null}),i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d+1),disabled:d===I,children:"Suivant"})]}),l.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",l.length,")"]}),i.jsx("div",{className:"space-y-4",children:l.map(P=>i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:P.title}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[P.company," — ",P.location]}),i.jsxs("div",{className:"flex gap-2",children:[P.contract_type&&i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:P.contract_type}),i.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:P.source})]})]}),i.jsx("div",{className:"flex gap-2 ml-4",children:i.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${P.id}-${P.source}`))})]}),n.length===0&&!s&&b&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouvée"}),i.jsx("p",{className:"text-sm",children:"Essayez avec des mots-clés différents ou vérifiez votre configuration API."})]}),!b&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),i.jsx("p",{className:"text-sm",children:`Saisissez des mots-clés et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),y&&i.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:i.jsx("p",{className:"font-semibold text-base",children:y})}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})};var Lfe=typeof Element<"u",Ffe=typeof Map=="function",Vfe=typeof Set=="function",$fe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function uy(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!uy(t[r],e[r]))return!1;return!0}var a;if(Ffe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!uy(r.value[1],e.get(r.value[0])))return!1;return!0}if(Vfe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if($fe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(Lfe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!uy(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var zfe=function(e,n){try{return uy(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const c9=Pa(zfe);var u9=x.createContext({onInternalStateUpdate:function(){},createHrefForState:function(){return"#"},onSearchForFacetValues:function(){},onSearchStateChange:function(){},onSearchParameters:function(){},store:{},widgetsManager:{},mainTargetedIndex:""}),Ufe=u9.Consumer,Bfe=u9.Provider,d9=x.createContext(void 0),Hfe=d9.Consumer;d9.Provider;function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){qfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qfe(t,e,n){return e=Wfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wfe(t){var e=Gfe(t,"string");return gh(e)==="symbol"?e:String(e)}function Gfe(t,e){if(gh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}var Kfe=Object.prototype.hasOwnProperty,eI=function(e,n){if(e===n)return!0;var r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!Kfe.call(n,r[a])||e[r[a]]!==n[r[a]])return!1;return!0},Zfe=function(e){return e.displayName||e.name||"UnknownComponent"},Qfe=Promise.resolve(),Yfe=function(e){Qfe.then(e)},Xfe=function(e){return gh(e)==="object"&&e!==null&&!Array.isArray(e)},Jfe=function t(e){return Object.keys(e).forEach(function(n){var r=e[n];Xfe(r)&&(nme(r)?t(r):delete e[n])}),e};function eme(t,e,n){return t.map(function(r,s){return Ix(Ix({},r),{},{__position:e*n+s+1})})}function tme(t,e){return e?t.map(function(n){return Ix(Ix({},n),{},{__queryID:e})}):t}function nme(t){return t&&Object.keys(t).length>0}function Ax(t,e){if(t==null)return{};for(var n={},r=Object.keys(t),s=0;s<r.length;s++){var a=r[s];e.indexOf(a)>=0||(n[a]=t[a])}return n}var rme=function(e,n){return(Array.isArray(n)?n:n.replace(/\[(\d+)]/g,".$1").split(".")).reduce(function(r,s){return r?r[s]:void 0},e)};function sme(t){return t.replace(/^\\-/,"-")}var ime=["contextValue"];function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ox.apply(this,arguments)}function ame(t,e){if(t==null)return{};var n=ome(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ome(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(r){Zr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h9(r.key),r)}}function ume(t,e,n){return e&&cme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pj(t,e)}function Pj(t,e){return Pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Pj(t,e)}function hme(t){var e=mme();return function(){var r=Mx(t),s;if(e){var a=Mx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return fme(this,s)}}function fme(t,e){if(e&&(vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hs(t)}function hs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mx(t){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mx(t)}function Zr(t,e,n){return e=h9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h9(t){var e=pme(t,"string");return vh(e)==="symbol"?e:String(e)}function pme(t,e){if(vh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gme(t){if(!t.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var e=typeof t.getSearchParameters=="function"||typeof t.getMetadata=="function"||typeof t.transitionState=="function";return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=function(a){dme(l,a);var o=hme(l);function l(u){var d;return lme(this,l),d=o.call(this,u),Zr(hs(d),"unsubscribe",void 0),Zr(hs(d),"unregisterWidget",void 0),Zr(hs(d),"cleanupTimerRef",null),Zr(hs(d),"isUnmounting",!1),Zr(hs(d),"state",{providedProps:d.getProvidedProps(d.props)}),Zr(hs(d),"refine",function(){for(var f,m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];d.props.contextValue.onInternalStateUpdate((f=t.refine).call.apply(f,[hs(d),d.props,d.props.contextValue.store.getState().widgets].concat(p)))}),Zr(hs(d),"createURL",function(){for(var f,m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];return d.props.contextValue.createHrefForState((f=t.refine).call.apply(f,[hs(d),d.props,d.props.contextValue.store.getState().widgets].concat(p)))}),Zr(hs(d),"searchForFacetValues",function(){for(var f,m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];d.props.contextValue.onSearchForFacetValues((f=t.searchForFacetValues).call.apply(f,[hs(d),d.props,d.props.contextValue.store.getState().widgets].concat(p)))}),t.getSearchParameters&&d.props.contextValue.onSearchParameters(t.getSearchParameters.bind(hs(d)),{ais:d.props.contextValue,multiIndexContext:d.props.indexContextValue},d.props,t.getMetadata&&t.getMetadata.bind(hs(d)),t.displayName),d}return ume(l,[{key:"componentDidMount",value:function(){var d=this;this.cleanupTimerRef&&(clearTimeout(this.cleanupTimerRef),this.cleanupTimerRef=null),this.unsubscribe=this.props.contextValue.store.subscribe(function(){d.isUnmounting||d.setState({providedProps:d.getProvidedProps(d.props)})}),e&&(this.unregisterWidget=this.props.contextValue.widgetsManager.registerWidget(this))}},{key:"shouldComponentUpdate",value:function(d,f){if(typeof t.shouldComponentUpdate=="function")return t.shouldComponentUpdate.call(this,this.props,d,this.state,f);var m=eI(this.props,d);return this.state.providedProps===null||f.providedProps===null?this.state.providedProps===f.providedProps?!m:!0:!m||!eI(this.state.providedProps,f.providedProps)}},{key:"componentDidUpdate",value:function(d){c9(d,this.props)||(this.setState({providedProps:this.getProvidedProps(this.props)}),e&&(this.props.contextValue.widgetsManager.update(),typeof t.transitionState=="function"&&this.props.contextValue.onSearchStateChange(t.transitionState.call(this,this.props,this.props.contextValue.store.getState().widgets,this.props.contextValue.store.getState().widgets))))}},{key:"componentWillUnmount",value:function(){var d=this;this.cleanupTimerRef=setTimeout(function(){if(d.isUnmounting=!0,d.unsubscribe&&d.unsubscribe(),d.unregisterWidget&&(d.unregisterWidget(),typeof t.cleanUp=="function")){var f=t.cleanUp.call(d,d.props,d.props.contextValue.store.getState().widgets);d.props.contextValue.store.setState(nI(nI({},d.props.contextValue.store.getState()),{},{widgets:f})),d.props.contextValue.onSearchStateChange(Jfe(f))}})}},{key:"getProvidedProps",value:function(d){var f=this.props.contextValue.store.getState(),m=f.widgets,p=f.results,y=f.resultsFacetValues,j=f.searching,b=f.searchingForFacetValues,N=f.isSearchStalled,_=f.metadata,w=f.error,E={results:p,searching:j,searchingForFacetValues:b,isSearchStalled:N,error:w};return t.getProvidedProps.call(this,d,m,E,_,y)}},{key:"getSearchParameters",value:function(d){return typeof t.getSearchParameters=="function"?t.getSearchParameters.call(this,d,this.props,this.props.contextValue.store.getState().widgets):null}},{key:"getMetadata",value:function(d){return typeof t.getMetadata=="function"?t.getMetadata.call(this,this.props,d):{}}},{key:"transitionState",value:function(d,f){return typeof t.transitionState=="function"?t.transitionState.call(this,this.props,d,f):f}},{key:"render",value:function(){var d=this.props;d.contextValue;var f=ame(d,ime),m=this.state.providedProps;if(m===null)return null;var p=typeof t.refine=="function"?{refine:this.refine,createURL:this.createURL}:{},y=typeof t.searchForFacetValues=="function"?{searchForItems:this.searchForFacetValues}:{};return ue.createElement(n,Ox({},f,m,p,y))}}]),l}(x.Component);return Zr(s,"displayName","".concat(t.displayName,"(").concat(Zfe(n),")")),Zr(s,"$$type",t.$$type),Zr(s,"$$widgetType",r.$$widgetType),Zr(s,"propTypes",t.propTypes),Zr(s,"defaultProps",t.defaultProps),Zr(s,"_connectorDesc",t),s}}var xu=function(e){return function(n,r){var s=gme(e)(n,r),a=function(l){return ue.createElement(Ufe,null,function(u){return ue.createElement(Hfe,null,function(d){return ue.createElement(s,Ox({contextValue:u,indexContextValue:d},l))})})};return a}},Tj={highlightPreTag:"<ais-highlight-0000000000>",highlightPostTag:"</ais-highlight-0000000000>"};function rI(t){var e=t.preTag,n=t.postTag,r=t.highlightedValue,s=r===void 0?"":r,a=s.split(e),o=a.shift(),l=o===""?[]:[{value:o,isHighlighted:!1}];if(n===e){var u=!0;a.forEach(function(d){l.push({value:d,isHighlighted:u}),u=!u})}else a.forEach(function(d){var f=d.split(n);l.push({value:f[0],isHighlighted:!0}),f[1]!==""&&l.push({value:f[1],isHighlighted:!1})});return l}function vme(t){var e=t.preTag,n=e===void 0?"<em>":e,r=t.postTag,s=r===void 0?"</em>":r,a=t.highlightProperty,o=t.attribute,l=t.hit;if(!l)throw new Error("`hit`, the matching record, must be provided");var u=rme(l[a],o)||{};return Array.isArray(u)?u.map(function(d){return rI({preTag:n,postTag:s,highlightedValue:d.value})}):rI({preTag:n,postTag:s,highlightedValue:u.value})}const yme="6.40.4";function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kj.apply(this,arguments)}function xme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m9(r.key),r)}}function wme(t,e,n){return e&&_me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rj(t,e)}function Rj(t,e){return Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Rj(t,e)}function jme(t){var e=Sme();return function(){var r=Dx(t),s;if(e){var a=Dx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nme(this,s)}}function Nme(t,e){if(e&&(yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f9(t)}function f9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dx(t)}function Eme(t,e,n){return e=m9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m9(t){var e=Cme(t,"string");return yh(e)==="symbol"?e:String(e)}function Cme(t,e){if(yh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pme=function(e){return function(n,r,s){var a=n[r];if(a)for(var o=0,l=Object.keys(a);o<l.length;o++){var u=l[o];if(e.indexOf(u)===-1)return new Error("Unknown `".concat(r,"` key `").concat(u,"`. Check the render method ")+"of `".concat(s,"`."))}}};function E_(t){return function(e){var n=function(s){bme(o,s);var a=jme(o);function o(){var l;xme(this,o);for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];return l=a.call.apply(a,[this].concat(d)),Eme(f9(l),"translate",function(m){var p=l.props.translations,y=p&&p.hasOwnProperty(m)?p[m]:t[m];if(typeof y=="function"){for(var j=arguments.length,b=new Array(j>1?j-1:0),N=1;N<j;N++)b[N-1]=arguments[N];return y.apply(void 0,b)}return y}),l}return wme(o,[{key:"render",value:function(){return ue.createElement(e,kj({translate:this.translate},this.props))}}]),o}(x.Component),r=e.displayName||e.name||"UnknownComponent";return n.displayName="Translatable(".concat(r,")"),n.propTypes={translations:Pme(Object.keys(t))},n}}function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function sI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sI(Object(n),!0).forEach(function(r){Os(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Os(t,e,n){return e=Tme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tme(t){var e=kme(t,"string");return xp(e)==="symbol"?e:String(e)}function kme(t,e){if(xp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _u(t){return mg(t)?t.multiIndexContext.targetedIndex:t.ais.mainTargetedIndex}function fg(t,e){if(t.results){if(t.results.hits)return t.results;var n=_u(e);if(t.results[n])return t.results[n]}return null}function mg(t){return t&&t.multiIndexContext}function pg(t,e,n,r,s){if(mg(n)){var a=_u(n);return s?Ame(t,e,a,r,s):Rme(t,e,a,r)}else return t.indices&&r&&Object.keys(t.indices).forEach(function(o){t=pg(t,{page:1},{multiIndexContext:{targetedIndex:o}},!0,s)}),s?Ome(t,e,r,s):Ime(t,e,r)}function Rme(t,e,n,r){var s=r?{page:1}:void 0,a=t.indices&&t.indices[n]?St(St({},t.indices),{},Os({},n,St(St(St({},t.indices[n]),e),s))):St(St({},t.indices),{},Os({},n,St(St({},e),s)));return St(St({},t),{},{indices:a})}function Ime(t,e,n){var r=n?{page:1}:void 0;return St(St(St({},t),e),r)}function Ame(t,e,n,r,s){var a,o=r?{page:1}:void 0,l=t.indices&&t.indices[n]?St(St({},t.indices),{},Os({},n,St(St({},t.indices[n]),{},(a={},Os(a,s,St(St({},t.indices[n][s]),e)),Os(a,"page",1),a)))):St(St({},t.indices),{},Os({},n,St(Os({},s,e),o)));return St(St({},t),{},{indices:l})}function Ome(t,e,n,r){var s=n?{page:1}:void 0;return St(St({},t),{},Os({},r,St(St({},t[r]),e)),s)}function p9(t){var e=t.match(/^([^.]*)\.(.*)/),n=e&&e[1],r=e&&e[2];return{namespace:n,attributeName:r}}function Mme(t){var e=t.multiIndex,n=t.indexId,r=t.namespace,s=t.attributeName,a=t.id,o=t.searchState;return e&&r?o.indices&&o.indices[n]&&o.indices[n][r]&&Object.hasOwnProperty.call(o.indices[n][r],s):e?o.indices&&o.indices[n]&&Object.hasOwnProperty.call(o.indices[n],a):r?o[r]&&Object.hasOwnProperty.call(o[r],s):Object.hasOwnProperty.call(o,a)}function Dme(t){var e=t.multiIndex,n=t.indexId,r=t.namespace,s=t.attributeName,a=t.id,o=t.searchState;return e&&r?o.indices[n][r][s]:e?o.indices[n][a]:r?o[r][s]:o[a]}function C_(t,e,n,r,s){var a=_u(n),o=p9(r),l=o.namespace,u=o.attributeName,d=mg(n),f={multiIndex:d,indexId:a,namespace:l,attributeName:u,id:r,searchState:e},m=Mme(f);return m?Dme(f):t.defaultRefinement?t.defaultRefinement:s}function P_(t,e,n){var r=_u(e),s=p9(n),a=s.namespace,o=s.attributeName;return mg(e)&&t.indices?Fme({attribute:o,searchState:t,indexId:r,id:n,namespace:a}):Lme({attribute:o,searchState:t,id:n,namespace:a})}function Lme(t){var e=t.searchState,n=t.id,r=t.namespace,s=t.attribute;return r?St(St({},e),{},Os({},r,Ax(e[r],[s]))):Ax(e,[n])}function Fme(t){var e=t.searchState,n=t.indexId,r=t.id,s=t.namespace,a=t.attribute,o=e.indices[n];return s&&o?St(St({},e),{},{indices:St(St({},e.indices),{},Os({},n,St(St({},o),{},Os({},s,Ax(o[s],[a])))))}):o?St(St({},e),{},{indices:St(St({},e.indices),{},Os({},n,Ax(o,[r])))}):e}function Br(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var g9=Br;Br.prototype._events=void 0;Br.prototype._maxListeners=void 0;Br.defaultMaxListeners=10;Br.prototype.setMaxListeners=function(t){if(!Vme(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};Br.prototype.emit=function(t){var e,n,r,s,a,o;if(this._events||(this._events={}),t==="error"&&(!this._events.error||_p(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],v9(n))return!1;if(No(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(_p(n))for(s=Array.prototype.slice.call(arguments,1),o=n.slice(),r=o.length,a=0;a<r;a++)o[a].apply(this,s);return!0};Br.prototype.addListener=function(t,e){var n;if(!No(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,No(e.listener)?e.listener:e),this._events[t]?_p(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,_p(this._events[t])&&!this._events[t].warned&&(v9(this._maxListeners)?n=Br.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};Br.prototype.on=Br.prototype.addListener;Br.prototype.once=function(t,e){if(!No(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this};Br.prototype.removeListener=function(t,e){var n,r,s,a;if(!No(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||No(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(_p(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};Br.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],No(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this};Br.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:No(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};Br.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(No(e))return 1;if(e)return e.length}return 0};Br.listenerCount=function(t,e){return t.listenerCount(e)};function No(t){return typeof t=="function"}function Vme(t){return typeof t=="number"}function _p(t){return typeof t=="object"&&t!==null}function v9(t){return t===void 0}function $me(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}var y9=$me,zme=g9,Ume=y9;function T_(t,e){this.main=t,this.fn=e,this.lastResults=null}Ume(T_,zme);T_.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};T_.prototype.getModifiedState=function(t){return this.fn(t)};var Bme=T_;function Hme(t){return typeof t!="string"?t:String(t).replace(/^-/,"\\-")}function qme(t){return typeof t!="string"?t:t.replace(/^\\-/,"-")}var kC={escapeFacetValue:Hme,unescapeFacetValue:qme};function Wme(t){return typeof t=="object"&&t!==null?RC(Array.isArray(t)?[]:{},t):t}function Lx(t){return typeof t=="function"||Array.isArray(t)||Object.prototype.toString.call(t)==="[object Object]"}function RC(t,e){if(t===e)return t;for(var n in e)if(!(!Object.prototype.hasOwnProperty.call(e,n)||n==="__proto__"||n==="constructor")){var r=e[n],s=t[n];typeof s<"u"&&typeof r>"u"||(Lx(s)&&Lx(r)?t[n]=RC(s,r):t[n]=Wme(r))}return t}function Gme(t){Lx(t)||(t={});for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];Lx(r)&&RC(t,r)}return t}var k_=Gme;function Kme(t){return t&&Object.keys(t).length>0}var IC=Kme;function Zme(t,e){if(t===null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var AC=Zme,ab=k_;function ob(t){return Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})}var ks={_getQueries:function(e,n){var r=[];return r.push({indexName:e,params:ks._getHitsSearchParams(n)}),n.getRefinedDisjunctiveFacets().forEach(function(s){r.push({indexName:e,params:ks._getDisjunctiveFacetSearchParams(n,s)})}),n.getRefinedHierarchicalFacets().forEach(function(s){var a=n.getHierarchicalFacetByName(s),o=n.getHierarchicalRefinement(s),l=n._getHierarchicalFacetSeparator(a);if(o.length>0&&o[0].split(l).length>1){var u=o[0].split(l).slice(0,-1).reduce(function(f,m,p){return f.concat({attribute:a.attributes[p],value:p===0?m:[f[f.length-1].value,m].join(l)})},[]);u.forEach(function(d,f){var m=ks._getDisjunctiveFacetSearchParams(n,d.attribute,f===0);function p(b){return a.attributes.some(function(N){return N===b.split(":")[0]})}var y=(m.facetFilters||[]).reduce(function(b,N){if(Array.isArray(N)){var _=N.filter(function(w){return!p(w)});_.length>0&&b.push(_)}return typeof N=="string"&&!p(N)&&b.push(N),b},[]),j=u[f-1];f>0?m.facetFilters=y.concat(j.attribute+":"+j.value):m.facetFilters=y.length>0?y:void 0,r.push({indexName:e,params:m})})}}),r},_getHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets).concat(ks._getHitsHierarchicalFacetsAttributes(t)).sort(),n=ks._getFacetFilters(t),r=ks._getNumericFilters(t),s=ks._getTagFilters(t),a={facets:e.indexOf("*")>-1?["*"]:e,tagFilters:s};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),ob(ab({},t.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(t,e,n){var r=ks._getFacetFilters(t,e,n),s=ks._getNumericFilters(t,e),a=ks._getTagFilters(t),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(o.tagFilters=a);var l=t.getHierarchicalFacetByName(e);return l?o.facets=ks._getDisjunctiveHierarchicalFacetAttribute(t,l,n):o.facets=e,s.length>0&&(o.numericFilters=s),r.length>0&&(o.facetFilters=r),ob(ab({},t.getQueryParams(),o))},_getNumericFilters:function(t,e){if(t.numericFilters)return t.numericFilters;var n=[];return Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r]||{};Object.keys(s).forEach(function(a){var o=s[a]||[];e!==r&&o.forEach(function(l){if(Array.isArray(l)){var u=l.map(function(d){return r+a+d});n.push(u)}else n.push(r+a+l)})})}),n},_getTagFilters:function(t){return t.tagFilters?t.tagFilters:t.tagRefinements.join(",")},_getFacetFilters:function(t,e,n){var r=[],s=t.facetsRefinements||{};Object.keys(s).sort().forEach(function(u){var d=s[u]||[];d.sort().forEach(function(f){r.push(u+":"+f)})});var a=t.facetsExcludes||{};Object.keys(a).sort().forEach(function(u){var d=a[u]||[];d.sort().forEach(function(f){r.push(u+":-"+f)})});var o=t.disjunctiveFacetsRefinements||{};Object.keys(o).sort().forEach(function(u){var d=o[u]||[];if(!(u===e||!d||d.length===0)){var f=[];d.sort().forEach(function(m){f.push(u+":"+m)}),r.push(f)}});var l=t.hierarchicalFacetsRefinements||{};return Object.keys(l).sort().forEach(function(u){var d=l[u]||[],f=d[0];if(f!==void 0){var m=t.getHierarchicalFacetByName(u),p=t._getHierarchicalFacetSeparator(m),y=t._getHierarchicalRootPath(m),j,b;if(e===u){if(f.indexOf(p)===-1||!y&&n===!0||y&&y.split(p).length===f.split(p).length)return;y?(b=y.split(p).length-1,f=y):(b=f.split(p).length-2,f=f.slice(0,f.lastIndexOf(p))),j=m.attributes[b]}else b=f.split(p).length-1,j=m.attributes[b];j&&r.push([j+":"+f])}}),r},_getHitsHierarchicalFacetsAttributes:function(t){var e=[];return t.hierarchicalFacets.reduce(function(r,s){var a=t.getHierarchicalRefinement(s.name)[0];if(!a)return r.push(s.attributes[0]),r;var o=t._getHierarchicalFacetSeparator(s),l=a.split(o).length,u=s.attributes.slice(0,l+1);return r.concat(u)},e)},_getDisjunctiveHierarchicalFacetAttribute:function(t,e,n){var r=t._getHierarchicalFacetSeparator(e);if(n===!0){var s=t._getHierarchicalRootPath(e),a=0;return s&&(a=s.split(r).length),[e.attributes[a]]}var o=t.getHierarchicalRefinement(e.name)[0]||"",l=o.split(r).length-1;return e.attributes.slice(0,l+1)},getSearchForFacetQuery:function(t,e,n,r){var s=r.isDisjunctiveFacet(t)?r.clearRefinements(t):r,a={facetQuery:e,facetName:t};return typeof n=="number"&&(a.maxFacetHits=n),ob(ab({},ks._getHitsSearchParams(s),a))}},Qme=ks,OC=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(s){r[s]!==void 0&&(n[s]!==void 0&&delete n[s],n[s]=r[s])}),n},{})},R_=function(e,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return e[r]}};function Yme(t,e){return t.filter(function(n,r){return e.indexOf(n)>-1&&t.indexOf(n)===r})}var Xme=Yme;function x9(t){if(typeof t=="number")return t;if(typeof t=="string")return parseFloat(t);if(Array.isArray(t))return t.map(x9);throw new Error("The value should be a number, a parsable string or an array of those.")}var Jme=x9,epe=function(e){return e===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(e)},tpe=OC,npe=IC,rpe=AC,xc={addRefinement:function(e,n,r){if(xc.isRefined(e,n,r))return e;var s=""+r,a=e[n]?e[n].concat(s):[s],o={};return o[n]=a,tpe({},o,e)},removeRefinement:function(e,n,r){if(r===void 0)return xc.clearRefinement(e,function(a,o){return n===o});var s=""+r;return xc.clearRefinement(e,function(a,o){return n===o&&s===a})},toggleRefinement:function(e,n,r){if(r===void 0)throw new Error("toggleRefinement should be used with a value");return xc.isRefined(e,n,r)?xc.removeRefinement(e,n,r):xc.addRefinement(e,n,r)},clearRefinement:function(e,n,r){if(n===void 0)return npe(e)?{}:e;if(typeof n=="string")return rpe(e,[n]);if(typeof n=="function"){var s=!1,a=Object.keys(e).reduce(function(o,l){var u=e[l]||[],d=u.filter(function(f){return!n(f,l,r)});return d.length!==u.length&&(s=!0),o[l]=d,o},{});return s?a:e}},isRefined:function(e,n,r){var s=!!e[n]&&e[n].length>0;if(r===void 0||!s)return s;var a=""+r;return e[n].indexOf(a)!==-1}},spe=xc,lb=OC,_9=R_,iI=Xme,Ij=k_,Aj=IC,aI=AC,cb=Jme,ipe=epe,In=spe;function MC(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(function(n,r){return MC(e[r],n)}):t===e}function ape(t,e){return _9(t,function(n){return MC(n,e)})}function xs(t){var e=t?xs._parseNumbers(t):{};e.userToken!==void 0&&!ipe(e.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=e.facets||[],this.disjunctiveFacets=e.disjunctiveFacets||[],this.hierarchicalFacets=e.hierarchicalFacets||[],this.facetsRefinements=e.facetsRefinements||{},this.facetsExcludes=e.facetsExcludes||{},this.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements||{},this.numericRefinements=e.numericRefinements||{},this.tagRefinements=e.tagRefinements||[],this.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements||{};var n=this;Object.keys(e).forEach(function(r){var s=xs.PARAMETERS.indexOf(r)!==-1,a=e[r]!==void 0;!s&&a&&(n[r]=e[r])})}xs.PARAMETERS=Object.keys(new xs);xs._parseNumbers=function(t){if(t instanceof xs)return t;var e={},n=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(n.forEach(function(s){var a=t[s];if(typeof a=="string"){var o=parseFloat(a);e[s]=isNaN(o)?a:o}}),Array.isArray(t.insideBoundingBox)&&(e.insideBoundingBox=t.insideBoundingBox.map(function(s){return Array.isArray(s)?s.map(function(a){return parseFloat(a)}):s})),t.numericRefinements){var r={};Object.keys(t.numericRefinements).forEach(function(s){var a=t.numericRefinements[s]||{};r[s]={},Object.keys(a).forEach(function(o){var l=a[o],u=l.map(function(d){return Array.isArray(d)?d.map(function(f){return typeof f=="string"?parseFloat(f):f}):typeof d=="string"?parseFloat(d):d});r[s][o]=u})}),e.numericRefinements=r}return Ij({},t,e)};xs.make=function(e){var n=new xs(e),r=e.hierarchicalFacets||[];return r.forEach(function(s){if(s.rootPath){var a=n.getHierarchicalRefinement(s.name);a.length>0&&a[0].indexOf(s.rootPath)!==0&&(n=n.clearRefinements(s.name)),a=n.getHierarchicalRefinement(s.name),a.length===0&&(n=n.toggleHierarchicalFacetRefinement(s.name,s.rootPath))}}),n};xs.validate=function(t,e){var n=e||{};return t.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):t.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):t.numericFilters&&n.numericRefinements&&Aj(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Aj(t.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};xs.prototype={constructor:xs,clearRefinements:function(e){var n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:In.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:In.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:In.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:In.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(t,e,n){var r=cb(n);if(this.isNumericRefined(t,e,r))return this;var s=Ij({},this.numericRefinements);return s[t]=Ij({},s[t]),s[t][e]?(s[t][e]=s[t][e].slice(),s[t][e].push(r)):s[t][e]=[r],this.setQueryParameters({numericRefinements:s})},getConjunctiveRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsRefinements[t]||[]:[]},getDisjunctiveRefinements:function(t){return this.isDisjunctiveFacet(t)?this.disjunctiveFacetsRefinements[t]||[]:[]},getHierarchicalRefinement:function(t){return this.hierarchicalFacetsRefinements[t]||[]},getExcludeRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsExcludes[t]||[]:[]},removeNumericRefinement:function(t,e,n){var r=n;return r!==void 0?this.isNumericRefined(t,e,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e&&MC(s.val,cb(r))})}):this:e!==void 0?this.isNumericRefined(t,e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e})}):this:this.isNumericRefined(t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t})}):this},getNumericRefinements:function(t){return this.numericRefinements[t]||{}},getNumericRefinement:function(t,e){return this.numericRefinements[t]&&this.numericRefinements[t][e]},_clearNumericRefinements:function(e){if(e===void 0)return Aj(this.numericRefinements)?{}:this.numericRefinements;if(typeof e=="string")return aI(this.numericRefinements,[e]);if(typeof e=="function"){var n=!1,r=this.numericRefinements,s=Object.keys(r).reduce(function(a,o){var l=r[o],u={};return l=l||{},Object.keys(l).forEach(function(d){var f=l[d]||[],m=[];f.forEach(function(p){var y=e({val:p,op:d},o,"numeric");y||m.push(p)}),m.length!==f.length&&(n=!0),u[d]=m}),a[o]=u,a},{});return n?s:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return In.isRefined(this.facetsRefinements,e,n)?this:this.setQueryParameters({facetsRefinements:In.addRefinement(this.facetsRefinements,e,n)})},addExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return In.isRefined(this.facetsExcludes,e,n)?this:this.setQueryParameters({facetsExcludes:In.addRefinement(this.facetsExcludes,e,n)})},addDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return In.isRefined(this.disjunctiveFacetsRefinements,e,n)?this:this.setQueryParameters({disjunctiveFacetsRefinements:In.addRefinement(this.disjunctiveFacetsRefinements,e,n)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(n)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter(function(n){return n!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(n){return n!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(n){return n.name!==e})}):this},removeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return In.isRefined(this.facetsRefinements,e,n)?this.setQueryParameters({facetsRefinements:In.removeRefinement(this.facetsRefinements,e,n)}):this},removeExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return In.isRefined(this.facetsExcludes,e,n)?this.setQueryParameters({facetsExcludes:In.removeRefinement(this.facetsExcludes,e,n)}):this},removeDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return In.isRefined(this.disjunctiveFacetsRefinements,e,n)?this.setQueryParameters({disjunctiveFacetsRefinements:In.removeRefinement(this.disjunctiveFacetsRefinements,e,n)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.filter(function(r){return r!==e})};return this.setQueryParameters(n)},toggleRefinement:function(e,n){return this.toggleFacetRefinement(e,n)},toggleFacetRefinement:function(e,n){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,n);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,n);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,n);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:In.toggleRefinement(this.facetsRefinements,e,n)})},toggleExcludeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:In.toggleRefinement(this.facetsExcludes,e,n)})},toggleDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:In.toggleRefinement(this.disjunctiveFacetsRefinements,e,n)})},toggleHierarchicalFacetRefinement:function(e,n){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),s={},a=this.hierarchicalFacetsRefinements[e]!==void 0&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===n||this.hierarchicalFacetsRefinements[e][0].indexOf(n+r)===0);return a?n.indexOf(r)===-1?s[e]=[]:s[e]=[n.slice(0,n.lastIndexOf(r))]:s[e]=[n],this.setQueryParameters({hierarchicalFacetsRefinements:lb({},s,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(t,e){if(this.isHierarchicalFacetRefined(t))throw new Error(t+" is already refined.");if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:lb({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(t){if(!this.isHierarchicalFacetRefined(t))return this;var e={};return e[t]=[],this.setQueryParameters({hierarchicalFacetsRefinements:lb({},e,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(t){return this.disjunctiveFacets.indexOf(t)>-1},isHierarchicalFacet:function(t){return this.getHierarchicalFacetByName(t)!==void 0},isConjunctiveFacet:function(t){return this.facets.indexOf(t)>-1},isFacetRefined:function(e,n){return this.isConjunctiveFacet(e)?In.isRefined(this.facetsRefinements,e,n):!1},isExcludeRefined:function(e,n){return this.isConjunctiveFacet(e)?In.isRefined(this.facetsExcludes,e,n):!1},isDisjunctiveFacetRefined:function(e,n){return this.isDisjunctiveFacet(e)?In.isRefined(this.disjunctiveFacetsRefinements,e,n):!1},isHierarchicalFacetRefined:function(e,n){if(!this.isHierarchicalFacet(e))return!1;var r=this.getHierarchicalRefinement(e);return n?r.indexOf(n)!==-1:r.length>0},isNumericRefined:function(e,n,r){if(r===void 0&&n===void 0)return!!this.numericRefinements[e];var s=this.numericRefinements[e]&&this.numericRefinements[e][n]!==void 0;if(r===void 0||!s)return s;var a=cb(r),o=ape(this.numericRefinements[e][n],a)!==void 0;return s&&o},isTagRefined:function(e){return this.tagRefinements.indexOf(e)!==-1},getRefinedDisjunctiveFacets:function(){var e=this,n=iI(Object.keys(this.numericRefinements).filter(function(r){return Object.keys(e.numericRefinements[r]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(r){return e.disjunctiveFacetsRefinements[r].length>0}).concat(n).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var e=this;return iI(this.hierarchicalFacets.map(function(n){return n.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(n){return e.hierarchicalFacetsRefinements[n].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return t.indexOf(e)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,n={},r=this;return Object.keys(this).forEach(function(s){var a=r[s];e.indexOf(s)===-1&&a!==void 0&&(n[s]=a)}),n},setQueryParameter:function(e,n){if(this[e]===n)return this;var r={};return r[e]=n,this.setQueryParameters(r)},setQueryParameters:function(e){if(!e)return this;var n=xs.validate(this,e);if(n)throw n;var r=this,s=xs._parseNumbers(e),a=Object.keys(this).reduce(function(l,u){return l[u]=r[u],l},{}),o=Object.keys(s).reduce(function(l,u){var d=l[u]!==void 0,f=s[u]!==void 0;return d&&!f?aI(l,[u]):(f&&(l[u]=s[u]),l)},a);return new this.constructor(o)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(t){return t.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(t){return t.separator||" > "},_getHierarchicalRootPath:function(t){return t.rootPath||null},_getHierarchicalShowParentLevel:function(t){return typeof t.showParentLevel=="boolean"?t.showParentLevel:!0},getHierarchicalFacetByName:function(t){return _9(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(t){if(!this.isHierarchicalFacet(t))return[];var e=this.getHierarchicalRefinement(t)[0];if(!e)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r=e.split(n);return r.map(function(s){return s.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var w9=xs,ope=function(e){return Array.isArray(e)?e.filter(Boolean):[]},lpe=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(n(e[r]))return r;return-1},cpe=R_,b9=function(e,n){var r=(n||[]).map(function(s){return s.split(":")});return e.reduce(function(a,o){var l=o.split(":"),u=cpe(r,function(d){return d[0]===l[0]});return l.length>1||!u?(a[0].push(l[0]),a[1].push(l[1]),a):(a[0].push(u[0]),a[1].push(u[1]),a)},[[],[]])};function upe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=e!==void 0,a=e===null;if(!a&&t>e||r&&s||!n)return 1;if(!r&&t<e||a&&n||!s)return-1}return 0}function dpe(t,e,n){if(!Array.isArray(t))return[];Array.isArray(n)||(n=[]);var r=t.map(function(s,a){return{criteria:e.map(function(o){return s[o]}),index:a,value:s}});return r.sort(function(a,o){for(var l=-1;++l<a.criteria.length;){var u=upe(a.criteria[l],o.criteria[l]);if(u)return l>=n.length?u:n[l]==="desc"?-u:u}return a.index-o.index}),r.map(function(s){return s.value})}var j9=dpe,hpe=ype,N9=kC,fpe=R_,mpe=b9,ppe=j9,gpe=N9.escapeFacetValue,vpe=N9.unescapeFacetValue;function ype(t){return function(n,r){var s=t.hierarchicalFacets[r],a=t.hierarchicalFacetsRefinements[s.name]&&t.hierarchicalFacetsRefinements[s.name][0]||"",o=t._getHierarchicalFacetSeparator(s),l=t._getHierarchicalRootPath(s),u=t._getHierarchicalShowParentLevel(s),d=mpe(t._getHierarchicalFacetSortBy(s)),f=n.every(function(y){return y.exhaustive}),m=xpe(d,o,l,u,a),p=n;return l&&(p=n.slice(l.split(o).length)),p.reduce(m,{name:t.hierarchicalFacets[r].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:f,data:null})}}function xpe(t,e,n,r,s){return function(o,l,u){var d=o;if(u>0){var f=0;for(d=o;f<u;){var m=d&&Array.isArray(d.data)?d.data:[];d=fpe(m,function(y){return y.isRefined}),f++}}if(d){var p=Object.keys(l.data).map(function(y){return[y,l.data[y]]}).filter(function(y){var j=y[0];return _pe(j,d.path||n,s,e,n,r)});d.data=ppe(p.map(function(y){var j=y[0],b=y[1];return wpe(b,j,e,vpe(s),l.exhaustive)}),t[0],t[1])}return o}}function _pe(t,e,n,r,s,a){return s&&(t.indexOf(s)!==0||s===t)?!1:!s&&t.indexOf(r)===-1||s&&t.split(r).length-s.split(r).length===1||t.indexOf(r)===-1&&n.indexOf(r)===-1||n.indexOf(t)===0||t.indexOf(e+r)===0&&(a||t.indexOf(n)===0)}function wpe(t,e,n,r,s){var a=e.split(n);return{name:a[a.length-1].trim(),path:e,escapedValue:gpe(e),count:t,isRefined:r===e||r.indexOf(e+n)===0,exhaustive:s,data:null}}var ub=ope,Fx=OC,S9=kC,Li=R_,Gf=lpe,bpe=b9,jpe=k_,E9=j9,oI=S9.escapeFacetValue,C9=S9.unescapeFacetValue,Npe=hpe;function lI(t){var e={};return t.forEach(function(n,r){e[n]=r}),e}function db(t,e,n){e&&e[n]&&(t.stats=e[n])}function Spe(t,e){return Li(t,function(r){var s=r.attributes||[];return s.indexOf(e)>-1})}function Cl(t,e,n){var r=e[0];this._rawResults=e;var s=this;Object.keys(r).forEach(function(f){s[f]=r[f]}),Object.keys(n||{}).forEach(function(f){s[f]=n[f]}),this.processingTimeMS=e.reduce(function(f,m){return m.processingTimeMS===void 0?f:f+m.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=t.hierarchicalFacets.map(function(){return[]}),this.facets=[];var a=t.getRefinedDisjunctiveFacets(),o=lI(t.facets),l=lI(t.disjunctiveFacets),u=1,d=r.facets||{};Object.keys(d).forEach(function(f){var m=d[f],p=Spe(t.hierarchicalFacets,f);if(p){var y=p.attributes.indexOf(f),j=Gf(t.hierarchicalFacets,function(w){return w.name===p.name});s.hierarchicalFacets[j][y]={attribute:f,data:m,exhaustive:r.exhaustiveFacetsCount}}else{var b=t.disjunctiveFacets.indexOf(f)!==-1,N=t.facets.indexOf(f)!==-1,_;b&&(_=l[f],s.disjunctiveFacets[_]={name:f,data:m,exhaustive:r.exhaustiveFacetsCount},db(s.disjunctiveFacets[_],r.facets_stats,f)),N&&(_=o[f],s.facets[_]={name:f,data:m,exhaustive:r.exhaustiveFacetsCount},db(s.facets[_],r.facets_stats,f))}}),this.hierarchicalFacets=ub(this.hierarchicalFacets),a.forEach(function(f){var m=e[u],p=m&&m.facets?m.facets:{},y=t.getHierarchicalFacetByName(f);Object.keys(p).forEach(function(j){var b=p[j],N;if(y){N=Gf(t.hierarchicalFacets,function(E){return E.name===y.name});var _=Gf(s.hierarchicalFacets[N],function(E){return E.attribute===j});if(_===-1)return;s.hierarchicalFacets[N][_].data=jpe({},s.hierarchicalFacets[N][_].data,b)}else{N=l[j];var w=r.facets&&r.facets[j]||{};s.disjunctiveFacets[N]={name:j,data:Fx({},b,w),exhaustive:m.exhaustiveFacetsCount},db(s.disjunctiveFacets[N],m.facets_stats,j),t.disjunctiveFacetsRefinements[j]&&t.disjunctiveFacetsRefinements[j].forEach(function(E){!s.disjunctiveFacets[N].data[E]&&t.disjunctiveFacetsRefinements[j].indexOf(C9(E))>-1&&(s.disjunctiveFacets[N].data[E]=0)})}}),u++}),t.getRefinedHierarchicalFacets().forEach(function(f){var m=t.getHierarchicalFacetByName(f),p=t._getHierarchicalFacetSeparator(m),y=t.getHierarchicalRefinement(f);y.length===0||y[0].split(p).length<2||e.slice(u).forEach(function(j){var b=j&&j.facets?j.facets:{};Object.keys(b).forEach(function(N){var _=b[N],w=Gf(t.hierarchicalFacets,function(B){return B.name===m.name}),E=Gf(s.hierarchicalFacets[w],function(B){return B.attribute===N});if(E!==-1){var R={};if(y.length>0){var A=y[0].split(p)[0];R[A]=s.hierarchicalFacets[w][E].data[A]}s.hierarchicalFacets[w][E].data=Fx(R,_,s.hierarchicalFacets[w][E].data)}}),u++})}),Object.keys(t.facetsExcludes).forEach(function(f){var m=t.facetsExcludes[f],p=o[f];s.facets[p]={name:f,data:d[f],exhaustive:r.exhaustiveFacetsCount},m.forEach(function(y){s.facets[p]=s.facets[p]||{name:f},s.facets[p].data=s.facets[p].data||{},s.facets[p].data[y]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Npe(t)),this.facets=ub(this.facets),this.disjunctiveFacets=ub(this.disjunctiveFacets),this._state=t}Cl.prototype.getFacetByName=function(t){function e(n){return n.name===t}return Li(this.facets,e)||Li(this.disjunctiveFacets,e)||Li(this.hierarchicalFacets,e)};function Epe(t,e){function n(f){return f.name===e}if(t._state.isConjunctiveFacet(e)){var r=Li(t.facets,n);return r?Object.keys(r.data).map(function(f){var m=oI(f);return{name:f,escapedValue:m,count:r.data[f],isRefined:t._state.isFacetRefined(e,m),isExcluded:t._state.isExcludeRefined(e,f)}}):[]}else if(t._state.isDisjunctiveFacet(e)){var s=Li(t.disjunctiveFacets,n);return s?Object.keys(s.data).map(function(f){var m=oI(f);return{name:f,escapedValue:m,count:s.data[f],isRefined:t._state.isDisjunctiveFacetRefined(e,m)}}):[]}else if(t._state.isHierarchicalFacet(e)){var a=Li(t.hierarchicalFacets,n);if(!a)return a;var o=t._state.getHierarchicalFacetByName(e),l=t._state._getHierarchicalFacetSeparator(o),u=C9(t._state.getHierarchicalRefinement(e)[0]||"");u.indexOf(o.rootPath)===0&&(u=u.replace(o.rootPath+l,""));var d=u.split(l);return d.unshift(e),P9(a,d,0),a}}function P9(t,e,n){t.isRefined=t.name===e[n],t.data&&t.data.forEach(function(r){P9(r,e,n+1)})}function T9(t,e,n,r){if(r=r||0,Array.isArray(e))return t(e,n[r]);if(!e.data||e.data.length===0)return e;var s=e.data.map(function(l){return T9(t,l,n,r+1)}),a=t(s,n[r]),o=Fx({data:a},e);return o}Cl.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function Cpe(t,e){return e.sort(t)}function Ppe(t,e){var n=[],r=[],s=e.order||[],a=s.reduce(function(u,d,f){return u[d]=f,u},{});t.forEach(function(u){var d=u.path||u.name;a[d]!==void 0?n[a[d]]=u:r.push(u)}),n=n.filter(function(u){return u});var o=e.sortRemainingBy,l;return o==="hidden"?n:(o==="alpha"?l=[["path","name"],["asc","asc"]]:l=[["count"],["desc"]],n.concat(E9(r,l[0],l[1])))}function Tpe(t,e){return t.renderingContent&&t.renderingContent.facetOrdering&&t.renderingContent.facetOrdering.values&&t.renderingContent.facetOrdering.values[e]}Cl.prototype.getFacetValues=function(t,e){var n=Epe(this,t);if(n){var r=Fx({},e,{sortBy:Cl.DEFAULT_SORT,facetOrdering:!(e&&e.sortBy)}),s=this,a;if(Array.isArray(n))a=[t];else{var o=s._state.getHierarchicalFacetByName(n.name);a=o.attributes}return T9(function(l,u){if(r.facetOrdering){var d=Tpe(s,u);if(d)return Ppe(l,d)}if(Array.isArray(r.sortBy)){var f=bpe(r.sortBy,Cl.DEFAULT_SORT);return E9(l,f[0],f[1])}else if(typeof r.sortBy=="function")return Cpe(r.sortBy,l);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},n,a)}};Cl.prototype.getFacetStats=function(t){if(this._state.isConjunctiveFacet(t))return cI(this.facets,t);if(this._state.isDisjunctiveFacet(t))return cI(this.disjunctiveFacets,t)};function cI(t,e){var n=Li(t,function(r){return r.name===e});return n&&n.stats}Cl.prototype.getRefinements=function(){var t=this._state,e=this,n=[];return Object.keys(t.facetsRefinements).forEach(function(r){t.facetsRefinements[r].forEach(function(s){n.push(hb(t,"facet",r,s,e.facets))})}),Object.keys(t.facetsExcludes).forEach(function(r){t.facetsExcludes[r].forEach(function(s){n.push(hb(t,"exclude",r,s,e.facets))})}),Object.keys(t.disjunctiveFacetsRefinements).forEach(function(r){t.disjunctiveFacetsRefinements[r].forEach(function(s){n.push(hb(t,"disjunctive",r,s,e.disjunctiveFacets))})}),Object.keys(t.hierarchicalFacetsRefinements).forEach(function(r){t.hierarchicalFacetsRefinements[r].forEach(function(s){n.push(kpe(t,r,s,e.hierarchicalFacets))})}),Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r];Object.keys(s).forEach(function(a){s[a].forEach(function(o){n.push({type:"numeric",attributeName:r,name:o,numericValue:o,operator:a})})})}),t.tagRefinements.forEach(function(r){n.push({type:"tag",attributeName:"_tags",name:r})}),n};function hb(t,e,n,r,s){var a=Li(s,function(u){return u.name===n}),o=a&&a.data&&a.data[r]?a.data[r]:0,l=a&&a.exhaustive||!1;return{type:e,attributeName:n,name:r,count:o,exhaustive:l}}function kpe(t,e,n,r){var s=t.getHierarchicalFacetByName(e),a=t._getHierarchicalFacetSeparator(s),o=n.split(a),l=Li(r,function(p){return p.name===e}),u=o.reduce(function(p,y){var j=p&&Li(p.data,function(b){return b.name===y});return j!==void 0?j:p},l),d=u&&u.count||0,f=u&&u.exhaustive||!1,m=u&&u.path||"";return{type:"hierarchical",attributeName:e,name:m,count:d,exhaustive:f}}var k9=Cl,R9="3.14.0",Rpe=g9,Ipe=Bme,Ape=kC.escapeFacetValue,Ope=y9,Mpe=k_,Dpe=IC,Lpe=AC,xh=Qme,DC=w9,Oj=k9,I9=R9;function Ke(t,e,n){typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+I9+")"),this.setClient(t);var r=n||{};r.index=e,this.state=DC.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}Ope(Ke,Rpe);Ke.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};Ke.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};Ke.prototype.getQuery=function(){var t=this.state;return xh._getHitsSearchParams(t)};Ke.prototype.searchOnce=function(t,e){var n=t?this.state.setQueryParameters(t):this.state,r=xh._getQueries(n.index,n),s=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),e){this.client.search(r).then(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(null,new Oj(n,a.results),n)}).catch(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(a,null,n)});return}return this.client.search(r).then(function(a){return s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),{content:new Oj(n,a.results),state:n,_originalResponse:a}},function(a){throw s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),a})};Ke.prototype.findAnswers=function(t){console.warn("[algoliasearch-helper] answers is no longer supported");var e=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(e),s=Mpe({attributesForPrediction:t.attributesForPrediction,nbHits:t.nbHits},{params:Lpe(xh._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(a);var o=this.client.initIndex(r.index);if(typeof o.findAnswers!="function")throw new Error(a);return o.findAnswers(r.query,t.queryLanguages,s)};Ke.prototype.searchForFacetValues=function(t,e,n,r){var s=typeof this.client.searchForFacetValues=="function",a=typeof this.client.initIndex=="function";if(!s&&!a&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var o=this.state.setQueryParameters(r||{}),l=o.isDisjunctiveFacet(t),u=xh.getSearchForFacetQuery(t,e,n,o);this._currentNbQueries++;var d=this,f;return s?f=this.client.searchForFacetValues([{indexName:o.index,params:u}]):a?f=this.client.initIndex(o.index).searchForFacetValues(u):(delete u.facetName,f=this.client.search([{type:"facet",facet:t,indexName:o.index,params:u}]).then(function(p){return p.results[0]})),this.emit("searchForFacetValues",{state:o,facet:t,query:e}),f.then(function(p){return d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),p=Array.isArray(p)?p[0]:p,p.facetHits.forEach(function(y){y.escapedValue=Ape(y.value),y.isRefined=l?o.isDisjunctiveFacetRefined(t,y.escapedValue):o.isFacetRefined(t,y.escapedValue)}),p},function(m){throw d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),m})};Ke.prototype.setQuery=function(t){return this._change({state:this.state.resetPage().setQuery(t),isPageReset:!0}),this};Ke.prototype.clearRefinements=function(t){return this._change({state:this.state.resetPage().clearRefinements(t),isPageReset:!0}),this};Ke.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};Ke.prototype.addDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};Ke.prototype.addHierarchicalFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.addNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().addNumericRefinement(t,e,n),isPageReset:!0}),this};Ke.prototype.addFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};Ke.prototype.addFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().addExcludeRefinement(t,e),isPageReset:!0}),this};Ke.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};Ke.prototype.addTag=function(t){return this._change({state:this.state.resetPage().addTagRefinement(t),isPageReset:!0}),this};Ke.prototype.removeNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().removeNumericRefinement(t,e,n),isPageReset:!0}),this};Ke.prototype.removeDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};Ke.prototype.removeHierarchicalFacetRefinement=function(t){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(t),isPageReset:!0}),this};Ke.prototype.removeFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};Ke.prototype.removeFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().removeExcludeRefinement(t,e),isPageReset:!0}),this};Ke.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};Ke.prototype.removeTag=function(t){return this._change({state:this.state.resetPage().removeTagRefinement(t),isPageReset:!0}),this};Ke.prototype.toggleFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};Ke.prototype.toggleRefinement=function(t,e){return this.toggleFacetRefinement(t,e)};Ke.prototype.toggleFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().toggleFacetRefinement(t,e),isPageReset:!0}),this};Ke.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};Ke.prototype.toggleTag=function(t){return this._change({state:this.state.resetPage().toggleTagRefinement(t),isPageReset:!0}),this};Ke.prototype.nextPage=function(){var t=this.state.page||0;return this.setPage(t+1)};Ke.prototype.previousPage=function(){var t=this.state.page||0;return this.setPage(t-1)};function A9(t){if(t<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(t),isPageReset:!1}),this}Ke.prototype.setCurrentPage=A9;Ke.prototype.setPage=A9;Ke.prototype.setIndex=function(t){return this._change({state:this.state.resetPage().setIndex(t),isPageReset:!0}),this};Ke.prototype.setQueryParameter=function(t,e){return this._change({state:this.state.resetPage().setQueryParameter(t,e),isPageReset:!0}),this};Ke.prototype.setState=function(t){return this._change({state:DC.make(t),isPageReset:!1}),this};Ke.prototype.overrideStateWithoutTriggeringChangeEvent=function(t){return this.state=new DC(t),this};Ke.prototype.hasRefinements=function(t){return Dpe(this.state.getNumericRefinements(t))?!0:this.state.isConjunctiveFacet(t)?this.state.isFacetRefined(t):this.state.isDisjunctiveFacet(t)?this.state.isDisjunctiveFacetRefined(t):this.state.isHierarchicalFacet(t)?this.state.isHierarchicalFacetRefined(t):!1};Ke.prototype.isExcluded=function(t,e){return this.state.isExcludeRefined(t,e)};Ke.prototype.isDisjunctiveRefined=function(t,e){return this.state.isDisjunctiveFacetRefined(t,e)};Ke.prototype.hasTag=function(t){return this.state.isTagRefined(t)};Ke.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};Ke.prototype.getIndex=function(){return this.state.index};function O9(){return this.state.page}Ke.prototype.getCurrentPage=O9;Ke.prototype.getPage=O9;Ke.prototype.getTags=function(){return this.state.tagRefinements};Ke.prototype.getRefinements=function(t){var e=[];if(this.state.isConjunctiveFacet(t)){var n=this.state.getConjunctiveRefinements(t);n.forEach(function(o){e.push({value:o,type:"conjunctive"})});var r=this.state.getExcludeRefinements(t);r.forEach(function(o){e.push({value:o,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(t)){var s=this.state.getDisjunctiveRefinements(t);s.forEach(function(o){e.push({value:o,type:"disjunctive"})})}var a=this.state.getNumericRefinements(t);return Object.keys(a).forEach(function(o){var l=a[o];e.push({value:l,operator:o,type:"numeric"})}),e};Ke.prototype.getNumericRefinement=function(t,e){return this.state.getNumericRefinement(t,e)};Ke.prototype.getHierarchicalFacetBreadcrumb=function(t){return this.state.getHierarchicalFacetBreadcrumb(t)};Ke.prototype._search=function(t){var e=this.state,n=[],r=[];t.onlyWithDerivedHelpers||(r=xh._getQueries(e.index,e),n.push({state:e,queriesCount:r.length,helper:this}),this.emit("search",{state:e,results:this.lastResults}));var s=this.derivedHelpers.map(function(l){var u=l.getModifiedState(e),d=u.index?xh._getQueries(u.index,u):[];return n.push({state:u,queriesCount:d.length,helper:l}),l.emit("search",{state:u,results:l.lastResults}),d}),a=Array.prototype.concat.apply(r,s),o=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,n,o));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(l){this.emit("error",{error:l})}};Ke.prototype._dispatchAlgoliaResponse=function(t,e,n){if(!(e<this._lastQueryIdReceived)){this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var r=n.results.slice();t.forEach(function(s){var a=s.state,o=s.queriesCount,l=s.helper,u=r.splice(0,o);if(!a.index){l.emit("result",{results:null,state:a});return}l.lastResults=new Oj(a,u),l.emit("result",{results:l.lastResults,state:a})})}};Ke.prototype._dispatchAlgoliaError=function(t,e){t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this.emit("error",{error:e}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};Ke.prototype.containsRefinement=function(t,e,n,r){return t||e.length!==0||n.length!==0||r.length!==0};Ke.prototype._hasDisjunctiveRefinements=function(t){return this.state.disjunctiveRefinements[t]&&this.state.disjunctiveRefinements[t].length>0};Ke.prototype._change=function(t){var e=t.state,n=t.isPageReset;e!==this.state&&(this.state=e,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))};Ke.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};Ke.prototype.setClient=function(t){return this.client===t?this:(typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+I9+")"),this.client=t,this)};Ke.prototype.getClient=function(){return this.client};Ke.prototype.derive=function(t){var e=new Ipe(this,t);return this.derivedHelpers.push(e),e};Ke.prototype.detachDerivedHelper=function(t){var e=this.derivedHelpers.indexOf(t);if(e===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)};Ke.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Fpe=Ke,M9=Fpe,Vpe=w9,$pe=k9;function gg(t,e,n){return new M9(t,e,n)}gg.version=R9;gg.AlgoliaSearchHelper=M9;gg.SearchParameters=Vpe;gg.SearchResults=$pe;var zpe=gg;const Kf=Pa(zpe);function Upe(t){var e=t,n=[];return{getState:function(){return e},setState:function(s){e=s,n.forEach(function(a){return a()})},subscribe:function(s){return n.push(s),function(){n.splice(n.indexOf(s),1)}}}}function Bpe(t){var e=[],n=!1;function r(){n||(n=!0,Yfe(function(){n=!1,t()}))}return{registerWidget:function(a){return e.push(a),r(),function(){e.splice(e.indexOf(a),1),r()}},update:r,getWidgets:function(){return e}}}var Hpe=["resultsFacetValues"],qpe=["resultsFacetValues"],Wpe=["resultsFacetValues"];function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function fb(t,e){if(t==null)return{};var n=Gpe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gpe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uI(Object(n),!0).forEach(function(r){Wo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wo(t,e,n){return e=Kpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kpe(t){var e=Zpe(t,"string");return wp(e)==="symbol"?e:String(e)}function Zpe(t,e){if(wp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dI(t){typeof t.addAlgoliaAgent=="function"&&(t.addAlgoliaAgent("react (".concat(x.version,")")),t.addAlgoliaAgent("react-instantsearch (".concat(yme,")")))}var kv=function(e){return mg({ais:e.props.contextValue,multiIndexContext:e.props.indexContextValue})},hI=function(e,n){return e.props.indexContextValue.targetedIndex===n},km=function(e){return!!e.props.indexId},fI=function(e,n){return e.props.indexId===n},mI=function(e,n){var r=km(e),s=km(n);return r&&!s?-1:!r&&s?1:0};function Qpe(t){var e=function(s){return Object.prototype.toString.call(s)==="[object Object]"||Object.prototype.toString.call(s)==="[object Array]"},n=function(s){for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];var u=0;return s.replace(/%s/g,function(){return encodeURIComponent(o[u++])})};return Object.keys(t).map(function(r){return n("%s=%s",r,e(t[r])?JSON.stringify(t[r]):t[r])}).join("&")}function Ype(t){var e=t.indexName,n=t.initialState,r=n===void 0?{}:n,s=t.searchClient,a=t.resultsState,o=t.stalledSearchDelay,l=Kf(s,e,It({},Tj));dI(s),l.on("search",B).on("result",R({indexId:e})).on("error",A);var u=!1,d=null,f=l.state,m,p=Bpe(M);I(s,a);var y=Upe({widgets:r,metadata:Xpe(a),results:P(a),error:null,searching:!1,isSearchStalled:!0,searchingForFacetValues:!1});function j(){u=!0}function b(K){dI(K),l.setClient(K),E()}function N(){l.clearCache(),E()}function _(K){return p.getWidgets().filter(function(z){return!!z.getMetadata}).map(function(z){return z.getMetadata(K)})}function w(){var K=p.getWidgets().filter(function(q){return!!q.getSearchParameters}).filter(function(q){return!kv(q)&&!km(q)}).reduce(function(q,J){return J.getSearchParameters(q)},f),z=p.getWidgets().filter(function(q){return!!q.getSearchParameters}).filter(function(q){var J=kv(q)&&hI(q,e),me=km(q)&&fI(q,e);return J||me}).sort(mI).reduce(function(q,J){return J.getSearchParameters(q)},K),H=p.getWidgets().filter(function(q){return!!q.getSearchParameters}).filter(function(q){var J=kv(q)&&!hI(q,e),me=km(q)&&!fI(q,e);return J||me}).sort(mI).reduce(function(q,J){var me=kv(J)?J.props.indexContextValue.targetedIndex:J.props.indexId,Pe=q[me]||[];return It(It({},q),{},Wo({},me,Pe.concat(J)))},{}),V=Object.keys(H).map(function(q){return{parameters:H[q].reduce(function(J,me){return me.getSearchParameters(J)},K),indexId:q}});return{mainParameters:z,derivedParameters:V}}function E(){if(!u){var K=w(l.state),z=K.mainParameters,H=K.derivedParameters;m=H.length+1,l.derivedHelpers.slice().forEach(function(V){V.detach()}),H.forEach(function(V){var q=V.indexId,J=V.parameters,me=l.derive(function(){return J});me.on("result",R({indexId:q})).on("error",A)}),l.setState(z),l.search()}}function R(K){var z=K.indexId;return function(H){m--;var V=y.getState(),q=!l.derivedHelpers.length,J=V.results?V.results:{};J=!q&&J.getFacetByName?{}:J,q?J=H.results:J=It(It({},J),{},Wo({},z,H.results));var me=y.getState(),Pe=me.isSearchStalled;l.hasPendingRequests()||(clearTimeout(d),d=null,Pe=!1),me.resultsFacetValues;var Me=fb(me,Hpe);y.setState(It(It({},Me),{},{results:J,isSearchStalled:Pe,searching:m>0,error:null}))}}function A(K){var z=K.error,H=y.getState(),V=H.isSearchStalled;l.hasPendingRequests()||(clearTimeout(d),V=!1),H.resultsFacetValues;var q=fb(H,qpe);y.setState(It(It({},q),{},{isSearchStalled:V,error:z,searching:!1}))}function B(){d||(d=setTimeout(function(){var K=y.getState();K.resultsFacetValues;var z=fb(K,Wpe);y.setState(It(It({},z),{},{isSearchStalled:!0}))},o))}function I(K,z){if(z&&!((!K.transporter||K._cacheHydrated)&&(!K._useCache||typeof K.addAlgoliaAgent!="function"))){if(K.transporter&&!K._cacheHydrated){K._cacheHydrated=!0;var H=K.search;K.search=function(V){for(var q=arguments.length,J=new Array(q>1?q-1:0),me=1;me<q;me++)J[me-1]=arguments[me];var Pe=V.map(function(Me){return It(It({},Me),{},{params:Qpe(Me.params)})});return K.transporter.responsesCache.get({method:"search",args:[Pe].concat(J)},function(){return H.apply(void 0,[V].concat(J))})}}if(Array.isArray(z.results)){F(K,z.results);return}$(K,z)}}function F(K,z){if(K.transporter){K.transporter.responsesCache.set({method:"search",args:[z.reduce(function(V,q){return V.concat(q.rawResults.map(function(J){return{indexName:J.index,params:J.params}}))},[])]},{results:z.reduce(function(V,q){return V.concat(q.rawResults)},[])});return}var H="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:z.reduce(function(V,q){return V.concat(q.rawResults.map(function(J){return{indexName:J.index,params:J.params}}))},[])}));K.cache=It(It({},K.cache),{},Wo({},H,JSON.stringify({results:z.reduce(function(V,q){return V.concat(q.rawResults)},[])})))}function $(K,z){if(K.transporter){K.transporter.responsesCache.set({method:"search",args:[z.rawResults.map(function(V){return{indexName:V.index,params:V.params}})]},{results:z.rawResults});return}var H="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:z.rawResults.map(function(V){return{indexName:V.index,params:V.params}})}));K.cache=It(It({},K.cache),{},Wo({},H,JSON.stringify({results:z.rawResults})))}function P(K){return K?Array.isArray(K.results)?K.results.reduce(function(z,H){return It(It({},z),{},Wo({},H._internalIndexId,new Kf.SearchResults(new Kf.SearchParameters(H.state),H.rawResults)))},{}):new Kf.SearchResults(new Kf.SearchParameters(K.state),K.rawResults):null}function M(){var K=_(y.getState().widgets);y.setState(It(It({},y.getState()),{},{metadata:K,searching:!0})),E()}function D(K){var z=y.getState().widgets;return p.getWidgets().filter(function(H){return!!H.transitionState}).reduce(function(H,V){return V.transitionState(z,H)},K)}function k(K){var z=_(K);y.setState(It(It({},y.getState()),{},{widgets:K,metadata:z,searching:!0})),E()}function G(K){var z=K.facetName,H=K.query,V=K.maxFacetHits,q=V===void 0?10:V,J=Math.max(1,Math.min(q,100));y.setState(It(It({},y.getState()),{},{searchingForFacetValues:!0})),l.searchForFacetValues(z,H,J).then(function(me){var Pe;y.setState(It(It({},y.getState()),{},{error:null,searchingForFacetValues:!1,resultsFacetValues:It(It({},y.getState().resultsFacetValues),{},(Pe={},Wo(Pe,z,me.facetHits),Wo(Pe,"query",H),Pe))}))},function(me){y.setState(It(It({},y.getState()),{},{searchingForFacetValues:!1,error:me}))}).catch(function(me){setTimeout(function(){throw me})})}function se(K){f=f.setIndex(K)}function ae(){return y.getState().metadata.reduce(function(K,z){return typeof z.id<"u"?K.concat(z.id):K},[])}return{store:y,widgetsManager:p,getWidgetsIds:ae,getSearchParameters:w,onSearchForFacetValues:G,onExternalStateUpdate:k,transitionState:D,updateClient:b,updateIndex:se,clearCache:N,skipSearch:j}}function Xpe(t){return t?t.metadata.map(function(e){return It(It({value:function(){return{}}},e),{},{items:e.items&&e.items.map(function(n){return It(It({value:function(){return{}}},n),{},{items:n.items&&n.items.map(function(r){return It({value:function(){return{}}},r)})})})})}):[]}function Rm(t){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(t)}function Jpe(){return(typeof window>"u"?"undefined":Rm(window))==="object"&&Rm(window.navigator)==="object"&&typeof window.navigator.userAgent=="string"&&window.navigator.userAgent.includes("Algolia Crawler")&&Rm(window.document)==="object"}function ege(t,e){var n=["contextValue","indexContextValue"],r=t.map(function(o){var l=o.props,u=o.constructor,d=u._connectorDesc||{},f=d.defaultProps,m=f===void 0?{}:f,p=d.displayName,y=p===void 0?u.displayName:p;return{displayName:y,$$type:u.$$type,$$widgetType:u.$$widgetType,params:Object.keys(l).filter(function(j){return!n.includes(j)&&m[j]!==l[j]&&l[j]!==void 0})}}),s=e,a=s.transporter&&s.transporter.userAgent?s.transporter.userAgent.value:s._ua;return{ua:a,widgets:r}}function tge(t,e){var n=document.createElement("meta"),r=document.querySelector("head");n.name="algolia:metadata";var s=ege(t,e);n.content=JSON.stringify(s),r.appendChild(n)}function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function pI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pI(Object(n),!0).forEach(function(r){bp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D9(r.key),r)}}function rge(t,e,n){return e&&vI(t.prototype,e),n&&vI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mj(t,e)}function Mj(t,e){return Mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Mj(t,e)}function ige(t){var e=oge();return function(){var r=Vx(t),s;if(e){var a=Vx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return age(this,s)}}function age(t,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Go(t)}function Go(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vx(t){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vx(t)}function bp(t,e,n){return e=D9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D9(t){var e=lge(t,"string");return _h(e)==="symbol"?e:String(e)}function lge(t,e){if(_h(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_h(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mb(t){return!!t.searchState}var LC=function(t){sge(n,t);var e=ige(n);function n(r){var s;nge(this,n),s=e.call(this,r),bp(Go(s),"cleanupTimerRef",null),bp(Go(s),"isUnmounting",!1);var a=Ype({indexName:s.props.indexName,searchClient:s.props.searchClient,initialState:s.props.searchState||{},resultsState:s.props.resultsState,stalledSearchDelay:s.props.stalledSearchDelay}),o={store:a.store,widgetsManager:a.widgetsManager,mainTargetedIndex:s.props.indexName,onInternalStateUpdate:s.onWidgetsInternalStateUpdate.bind(Go(s)),createHrefForState:s.createHrefForState.bind(Go(s)),onSearchForFacetValues:s.onSearchForFacetValues.bind(Go(s)),onSearchStateChange:s.onSearchStateChange.bind(Go(s)),onSearchParameters:s.onSearchParameters.bind(Go(s))};return s.state={isControlled:mb(s.props),instantSearchManager:a,contextValue:o},s}return rge(n,[{key:"componentDidUpdate",value:function(s){var a=mb(s);if(a&&!this.state.isControlled)throw new Error("You can't switch <InstantSearch> from being controlled to uncontrolled");if(!a&&this.state.isControlled)throw new Error("You can't switch <InstantSearch> from being uncontrolled to controlled");this.props.refresh!==s.refresh&&this.props.refresh&&this.state.instantSearchManager.clearCache(),s.indexName!==this.props.indexName&&this.state.instantSearchManager.updateIndex(this.props.indexName),s.searchClient!==this.props.searchClient&&this.state.instantSearchManager.updateClient(this.props.searchClient)}},{key:"componentDidMount",value:function(){this.cleanupTimerRef&&(clearTimeout(this.cleanupTimerRef),this.cleanupTimerRef=null),Jpe()&&tge(this.state.instantSearchManager.widgetsManager.getWidgets(),this.props.searchClient)}},{key:"componentWillUnmount",value:function(){var s=this;this.cleanupTimerRef=setTimeout(function(){s.isUnmounting=!0,s.state.instantSearchManager.skipSearch()})}},{key:"createHrefForState",value:function(s){return s=this.state.instantSearchManager.transitionState(s),this.state.isControlled&&this.props.createURL?this.props.createURL(s,this.getKnownKeys()):"#"}},{key:"onWidgetsInternalStateUpdate",value:function(s){s=this.state.instantSearchManager.transitionState(s),this.onSearchStateChange(s),this.state.isControlled||this.state.instantSearchManager.onExternalStateUpdate(s)}},{key:"onSearchStateChange",value:function(s){this.props.onSearchStateChange&&!this.isUnmounting&&this.props.onSearchStateChange(s)}},{key:"onSearchParameters",value:function(s,a,o,l,u){if(this.props.onSearchParameters){var d=this.props.searchState?this.props.searchState:{};this.props.onSearchParameters(s,a,o,d)}if(this.props.widgetsCollector){var f=this.props.searchState?this.props.searchState:{};this.props.widgetsCollector({getSearchParameters:s,getMetadata:l,context:a,props:o,searchState:f,displayName:u})}}},{key:"onSearchForFacetValues",value:function(s){this.state.instantSearchManager.onSearchForFacetValues(s)}},{key:"getKnownKeys",value:function(){return this.state.instantSearchManager.getWidgetsIds()}},{key:"render",value:function(){return x.Children.count(this.props.children)===0?null:ue.createElement(Bfe,{value:this.state.contextValue},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(s,a){var o=mb(s),l=a.instantSearchManager.store.getState().widgets,u=s.searchState;return o&&!c9(l,u)&&a.instantSearchManager.onExternalStateUpdate(s.searchState),{isControlled:o,contextValue:gI(gI({},a.contextValue),{},{mainTargetedIndex:s.indexName})}}}]),n}(x.Component);bp(LC,"defaultProps",{stalledSearchDelay:200,refresh:!1});bp(LC,"propTypes",{indexName:X.string.isRequired,searchClient:X.shape({search:X.func.isRequired,searchForFacetValues:X.func,addAlgoliaAgent:X.func,clearCache:X.func}).isRequired,createURL:X.func,refresh:X.bool,searchState:X.object,onSearchStateChange:X.func,onSearchParameters:X.func,widgetsCollector:X.func,resultsState:X.oneOfType([X.object,X.array]),children:X.node,stalledSearchDelay:X.number});var cge=function(e){var n=e.attribute,r=e.hit,s=e.highlightProperty,a=e.preTag,o=a===void 0?Tj.highlightPreTag:a,l=e.postTag,u=l===void 0?Tj.highlightPostTag:l;return vme({attribute:n,highlightProperty:s,hit:r,preTag:o,postTag:u})};const uge=xu({displayName:"AlgoliaHighlighter",$$type:"ais.highlighter",propTypes:{},getProvidedProps:function(){return{highlight:cge}}}),dge=xu({displayName:"AlgoliaHits",$$type:"ais.hits",getProvidedProps:function(e,n,r){var s=fg(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue});if(!s)return{hits:[]};var a=eme(s.hits,s.hitsPerPage,s.page),o=tme(a,s.queryID);return{hits:o}},getSearchParameters:function(e){return e}});function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function hge(t,e,n){return e=fge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fge(t){var e=mge(t,"string");return jp(e)==="symbol"?e:String(e)}function mge(t,e){if(jp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $x(){return"page"}function yI(t,e,n){var r=$x(),s=1,a=C_(t,e,n,r,s);return typeof a=="string"?parseInt(a,10):a}function pge(t,e,n,r){var s=$x(),a=hge({},s,n),o=!1;return pg(e,a,r,o)}const gge=xu({displayName:"AlgoliaPagination",$$type:"ais.pagination",getProvidedProps:function(e,n,r){var s=fg(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue});if(!s)return null;var a=s.nbPages;return{nbPages:a,currentRefinement:yI(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),canRefine:a>1}},refine:function(e,n,r){return pge(e,n,r,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,n){return P_(n,{ais:e.contextValue,multiIndexContext:e.indexContextValue},$x())},getSearchParameters:function(e,n,r){return e.setPage(yI(n,r,{ais:n.contextValue,multiIndexContext:n.indexContextValue})-1)},getMetadata:function(){return{id:$x()}}});function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function vge(t,e,n){return e=yge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yge(t){var e=xge(t,"string");return Np(e)==="symbol"?e:String(e)}function xge(t,e){if(Np(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Np(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I_(t){return t.attribute}var FC="range";function _ge(t,e,n){var r=Math.pow(10,n),s;typeof t.min=="number"&&isFinite(t.min)?s=t.min:typeof e.min=="number"&&isFinite(e.min)?s=e.min:s=void 0;var a;return typeof t.max=="number"&&isFinite(t.max)?a=t.max:typeof e.max=="number"&&isFinite(e.max)?a=e.max:a=void 0,{min:s!==void 0?Math.floor(s*r)/r:s,max:a!==void 0?Math.ceil(a*r)/r:a}}function pb(t,e,n,r){var s=C_(t,e,r,"".concat(FC,".").concat(I_(t)),{}),a=s.min,o=s.max,l=!!t.precision,u=a;typeof u=="string"&&(u=l?parseFloat(u):parseInt(u,10));var d=o;typeof d=="string"&&(d=l?parseFloat(d):parseInt(d,10));var f={min:u,max:d},m=t.min!==void 0,p=t.max!==void 0,y=f.min!==void 0,j=f.max!==void 0;if(m&&y&&f.min<n.min)throw Error("You can't provide min value lower than range.");if(p&&j&&f.max>n.max)throw Error("You can't provide max value greater than range.");return m&&!y&&(f.min=n.min),p&&!j&&(f.max=n.max),f}function xI(t,e){return{min:t.min!==void 0?t.min:e.min,max:t.max!==void 0?t.max:e.max}}function _I(t,e,n,r){var s;return!t&&n===r?s=void 0:t&&e?s=n:s=r,s}function wI(t,e,n,r,s){var a=n.min,o=n.max,l=r.min,u=r.max,d=a===void 0||a==="",f=o===void 0||o==="",m=d?void 0:parseFloat(a),p=f?void 0:parseFloat(o),y=d||isFinite(m),j=f||isFinite(p);if(!y||!j)throw Error("You can't provide non finite values to the range connector.");if(m<l)throw Error("You can't provide min value lower than range.");if(p>u)throw Error("You can't provide max value greater than range.");var b=I_(t),N=!0,_=vge({},b,{min:_I(t.min!==void 0,d,l,m),max:_I(t.max!==void 0,f,u,p)});return pg(e,_,s,N,FC)}function wge(t,e,n){return P_(e,n,"".concat(FC,".").concat(I_(t)))}const bge=xu({displayName:"AlgoliaRange",$$type:"ais.range",propTypes:{id:X.string,attribute:X.string.isRequired,defaultRefinement:X.shape({min:X.number,max:X.number}),min:X.number,max:X.number,precision:X.number,header:X.node,footer:X.node},defaultProps:{precision:0},getProvidedProps:function(e,n,r){var s=e.attribute,a=e.precision,o=e.min,l=e.max,u=fg(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),d=u&&u.getFacetByName(s),f=d?u.getFacetStats(s)||{}:{},m=d?u.getFacetValues(s):[],p=m.map(function(_){return{value:_.name,count:_.count}}),y=_ge({min:o,max:l},f,a),j=y.min,b=y.max;this._currentRange={min:j,max:b};var N=pb(e,n,this._currentRange,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return{min:j,max:b,canRefine:p.length>0,currentRefinement:xI(N,this._currentRange),count:p,precision:a}},refine:function(e,n,r){return wI(e,n,r,this._currentRange,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,n){return wge(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,n,r){var s=n.attribute,a=pb(n,r,this._currentRange,{ais:n.contextValue,multiIndexContext:n.indexContextValue}),o=a.min,l=a.max;return e=e.addDisjunctiveFacet(s),o!==void 0&&(e=e.addNumericRefinement(s,">=",o)),l!==void 0&&(e=e.addNumericRefinement(s,"<=",l)),e},getMetadata:function(e,n){var r=this,s=this._currentRange,a=s.min,o=s.max,l=pb(e,n,this._currentRange,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),u=l.min,d=l.max,f=[],m=u!==void 0,p=d!==void 0,y=m&&u!==a,j=p&&d!==o;if(y||j){var b=[m?"".concat(u," <= "):"",e.attribute,p?" <= ".concat(d):""];f.push({label:b.join(""),attribute:e.attribute,value:function(_){return wI(e,_,{},r._currentRange,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:xI({min:u,max:d},{min:a,max:o})})}return{id:I_(e),index:_u({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:f}}});function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function jge(t,e,n){return e=Nge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nge(t){var e=Sge(t,"string");return Sp(e)==="symbol"?e:String(e)}function Sge(t,e){if(Sp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VC="refinementList";function A_(t){return t.attribute}function Ko(t,e,n){var r=C_(t,e,n,"".concat(VC,".").concat(A_(t)),[]);return typeof r!="string"?r:r?[r]:[]}function bI(t,e,n,r){var s=Ko(e,n,r),a=s.indexOf(t)===-1,o=a?s.concat([t]):s.filter(function(l){return l!==t});return o}function gb(t){var e=t.showMore,n=t.limit,r=t.showMoreLimit;return e?r:n}function vb(t,e,n,r){var s=A_(t),a=jge({},s,n.length>0?n:""),o=!0;return pg(e,a,r,o,VC)}function Ege(t,e,n){return P_(e,n,"".concat(VC,".").concat(A_(t)))}var Cge=["isRefined","count:desc","name:asc"];const Pge=xu({displayName:"AlgoliaRefinementList",$$type:"ais.refinementList",propTypes:{id:X.string,attribute:X.string.isRequired,operator:X.oneOf(["and","or"]),showMore:X.bool,limit:X.number,showMoreLimit:X.number,defaultRefinement:X.arrayOf(X.oneOfType([X.string,X.number])),searchable:X.bool,transformItems:X.func,facetOrdering:X.bool},defaultProps:{operator:"or",showMore:!1,limit:10,showMoreLimit:20,facetOrdering:!0},getProvidedProps:function(e,n,r,s,a){var o=e.attribute,l=e.searchable,u=e.indexContextValue,d=e.facetOrdering,f=fg(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),m=!!f&&!!f.getFacetByName(o),p=!!(a&&a[o]&&a.query!=="");if(l&&u)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!m)return{items:[],currentRefinement:Ko(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),canRefine:m,isFromSearch:p,searchable:l};var y=p?a[o].map(function(b){return{label:b.value,value:bI(b.escapedValue,e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),_highlightResult:{label:{value:b.highlighted}},count:b.count,isRefined:b.isRefined}}):f.getFacetValues(o,{sortBy:Cge,facetOrdering:d}).map(function(b){return{label:b.name,value:bI(b.escapedValue,e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),count:b.count,isRefined:b.isRefined}}),j=e.transformItems?e.transformItems(y):y;return{items:j.slice(0,gb(e)),currentRefinement:Ko(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isFromSearch:p,searchable:l,canRefine:j.length>0}},refine:function(e,n,r){return vb(e,n,r,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},searchForFacetValues:function(e,n,r){return{facetName:e.attribute,query:r,maxFacetHits:gb(e)}},cleanUp:function(e,n){return Ege(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,n,r){var s=n.attribute,a=n.operator,o=a==="and"?"addFacet":"addDisjunctiveFacet",l="".concat(o,"Refinement");return e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,gb(n))}),e=e[o](s),Ko(n,r,{ais:n.contextValue,multiIndexContext:n.indexContextValue}).reduce(function(u,d){return u[l](s,d)},e)},getMetadata:function(e,n){var r=A_(e),s={ais:e.contextValue,multiIndexContext:e.indexContextValue};return{id:r,index:_u(s),items:Ko(e,n,s).length>0?[{attribute:e.attribute,label:"".concat(e.attribute,": "),currentRefinement:Ko(e,n,s),value:function(o){return vb(e,o,[],s)},items:Ko(e,n,s).map(function(a){return{label:sme("".concat(a)),value:function(l){var u=Ko(e,l,s).filter(function(d){return d!==a});return vb(e,n,u,s)}}})}]:[]}}});function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function Tge(t,e,n){return e=kge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kge(t){var e=Rge(t,"string");return Ep(e)==="symbol"?e:String(e)}function Rge(t,e){if(Ep(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O_(){return"query"}function yb(t,e,n){var r=O_(),s=C_(t,e,n,r,"");return s||""}function jI(t,e,n,r){var s=O_(),a=Tge({},s,n),o=!0;return pg(e,a,r,o)}function Ige(t,e,n){return P_(e,n,O_())}const Age=xu({displayName:"AlgoliaSearchBox",$$type:"ais.searchBox",propTypes:{defaultRefinement:X.string},getProvidedProps:function(e,n,r){return{currentRefinement:yb(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isSearchStalled:r.isSearchStalled}},refine:function(e,n,r){return jI(e,n,r,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,n){return Ige(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,n,r){return e.setQuery(yb(n,r,{ais:n.contextValue,multiIndexContext:n.indexContextValue}))},getMetadata:function(e,n){var r=O_(),s=yb(e,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return{id:r,index:_u({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:s===null?[]:[{label:"".concat(r,": ").concat(s),value:function(o){return jI(e,o,"",{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:s}]}}}),Oge=xu({displayName:"AlgoliaStats",$$type:"ais.stats",getProvidedProps:function(e,n,r){var s=fg(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return s?{areHitsSorted:s.appliedRelevancyStrictness!==void 0&&s.appliedRelevancyStrictness>0&&s.nbHits!==s.nbSortedHits,nbHits:s.nbHits,nbSortedHits:s.nbSortedHits,processingTimeMS:s.processingTimeMS}:null}});var L9={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(L9);var Mge=L9.exports;const tc=Pa(Mge);function Dge(t){return $ge(t)||Vge(t)||Fge(t)||Lge()}function Lge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(t,e){if(t){if(typeof t=="string")return Dj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dj(t,e)}}function Vge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ge(t){if(Array.isArray(t))return Dj(t)}function Dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wu=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ais";return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.filter(function(l){return l||l===""}).map(function(l){var u="".concat(n,"-").concat(e);return l?"".concat(u,"-").concat(l):u});return tc(o)}},zge=function(e){var n=e.button===1;return!!(n||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},Uge=function(e){return e.length===0?"":"".concat(e[0].toUpperCase()).concat(e.slice(1))};function NI(t){var e=t.start,n=e===void 0?0:e,r=t.end,s=t.step,a=s===void 0?1:s,o=a===0?1:a,l=Math.round((r-n)/o);return Dge(Array(l)).map(function(u,d){return(n+d)*o})}function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lj.apply(this,arguments)}function Bge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$9(r.key),r)}}function qge(t,e,n){return e&&Hge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fj(t,e)}function Fj(t,e){return Fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Fj(t,e)}function Gge(t){var e=Zge();return function(){var r=zx(t),s;if(e){var a=zx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Kge(this,s)}}function Kge(t,e){if(e&&(wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F9(t)}function F9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zx(t)}function V9(t,e,n){return e=$9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $9(t){var e=Qge(t,"string");return wh(e)==="symbol"?e:String(e)}function Qge(t,e){if(wh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z9=function(t){Wge(n,t);var e=Gge(n);function n(){var r;Bge(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),V9(F9(r),"onClick",function(l){zge(l)||(r.props.onClick(),l.preventDefault())}),r}return qge(n,[{key:"render",value:function(){return ue.createElement("a",Lj({},this.props,{onClick:this.onClick}))}}]),n}(x.Component);V9(z9,"propTypes",{onClick:X.func.isRequired});function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function Yge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U9(r.key),r)}}function Jge(t,e,n){return e&&Xge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vj(t,e)}function Vj(t,e){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Vj(t,e)}function tve(t){var e=rve();return function(){var r=Ux(t),s;if(e){var a=Ux(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return nve(this,s)}}function nve(t,e){if(e&&(bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $j(t)}function $j(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ux(t){return Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ux(t)}function Bx(t,e,n){return e=U9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U9(t){var e=sve(t,"string");return bh(e)==="symbol"?e:String(e)}function sve(t,e){if(bh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rv=wu("Panel"),B9=x.createContext(function(){}),ive=B9.Consumer,ave=B9.Provider,H9=function(t){eve(n,t);var e=tve(n);function n(){var r;Yge(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Bx($j(r),"state",{canRefine:!0}),Bx($j(r),"setCanRefine",function(l){r.setState({canRefine:l})}),r}return Jge(n,[{key:"render",value:function(){var s=this.props,a=s.children,o=s.className,l=s.header,u=s.footer,d=this.state.canRefine;return ue.createElement("div",{className:tc(Rv("",!d&&"-noRefinement"),o)},l&&ue.createElement("div",{className:Rv("header")},l),ue.createElement("div",{className:Rv("body")},ue.createElement(ave,{value:this.setCanRefine},a)),u&&ue.createElement("div",{className:Rv("footer")},u))}}]),n}(x.Component);Bx(H9,"propTypes",{children:X.node.isRequired,className:X.string,header:X.node,footer:X.node});Bx(H9,"defaultProps",{className:"",header:null,footer:null});function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function ove(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q9(r.key),r)}}function cve(t,e,n){return e&&lve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zj(t,e)}function zj(t,e){return zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zj(t,e)}function dve(t){var e=mve();return function(){var r=Hx(t),s;if(e){var a=Hx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return hve(this,s)}}function hve(t,e){if(e&&(jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fve(t)}function fve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hx(t){return Hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hx(t)}function pve(t,e,n){return e=q9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9(t){var e=gve(t,"string");return jh(e)==="symbol"?e:String(e)}function gve(t,e){if(jh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W9=function(t){uve(n,t);var e=dve(n);function n(){return ove(this,n),e.apply(this,arguments)}return cve(n,[{key:"componentDidMount",value:function(){this.props.setCanRefine(this.props.canRefine)}},{key:"componentDidUpdate",value:function(s){s.canRefine!==this.props.canRefine&&this.props.setCanRefine(this.props.canRefine)}},{key:"render",value:function(){return this.props.children}}]),n}(x.Component);pve(W9,"propTypes",{children:X.node.isRequired,canRefine:X.bool.isRequired,setCanRefine:X.func.isRequired});var M_=function(e){var n=e.canRefine,r=e.children;return ue.createElement(ive,null,function(s){return ue.createElement(W9,{setCanRefine:s,canRefine:n},r)})};M_.propTypes={canRefine:X.bool.isRequired,children:X.node.isRequired};function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function Uj(){return Uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uj.apply(this,arguments)}function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){na(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G9(r.key),r)}}function xve(t,e,n){return e&&yve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bj(t,e)}function Bj(t,e){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Bj(t,e)}function wve(t){var e=jve();return function(){var r=qx(t),s;if(e){var a=qx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return bve(this,s)}}function bve(t,e){if(e&&(Nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _c(t)}function _c(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qx(t){return qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qx(t)}function na(t,e,n){return e=G9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G9(t){var e=Nve(t,"string");return Nh(e)==="symbol"?e:String(e)}function Nve(t,e){if(Nh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ya=wu("SearchBox"),Sve=ue.createElement("svg",{width:"18",height:"18",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#444",className:Ya("loadingIcon"),"aria-hidden":"true"},ue.createElement("g",{fill:"none",fillRule:"evenodd"},ue.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},ue.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),ue.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},ue.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))),Eve=ue.createElement("svg",{className:Ya("resetIcon"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"10",height:"10","aria-hidden":"true"},ue.createElement("path",{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"})),Cve=ue.createElement("svg",{className:Ya("submitIcon"),xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 40 40","aria-hidden":"true"},ue.createElement("path",{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"})),$C=function(t){_ve(n,t);var e=wve(n);function n(r){var s;return vve(this,n),s=e.call(this),na(_c(s),"getQuery",function(){return s.props.searchAsYouType?s.props.currentRefinement:s.state.query}),na(_c(s),"onInputMount",function(a){s.input=a,s.props.inputRef&&(typeof s.props.inputRef=="function"?s.props.inputRef(a):s.props.inputRef.current=a)}),na(_c(s),"onKeyDown",function(a){if(s.props.focusShortcuts){var o=s.props.focusShortcuts.map(function(f){return typeof f=="string"?f.toUpperCase().charCodeAt(0):f}),l=a.target||a.srcElement,u=l.tagName;if(!(l.isContentEditable||u==="INPUT"||u==="SELECT"||u==="TEXTAREA")){var d=a.which||a.keyCode;o.indexOf(d)!==-1&&(s.input.focus(),a.stopPropagation(),a.preventDefault())}}}),na(_c(s),"onSubmit",function(a){a.preventDefault(),a.stopPropagation(),s.input.blur();var o=s.props,l=o.refine,u=o.searchAsYouType;return u||l(s.getQuery()),!1}),na(_c(s),"onChange",function(a){var o=s.props,l=o.searchAsYouType,u=o.refine,d=o.onChange,f=a.target.value;l?u(f):s.setState({query:f}),d&&d(a)}),na(_c(s),"onReset",function(a){var o=s.props,l=o.searchAsYouType,u=o.refine,d=o.onReset;u(""),s.input.focus(),l||s.setState({query:""}),d&&d(a)}),s.state={query:r.searchAsYouType?null:r.currentRefinement},s}return xve(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"componentDidUpdate",value:function(s){!this.props.searchAsYouType&&s.currentRefinement!==this.props.currentRefinement&&this.setState({query:this.props.currentRefinement})}},{key:"render",value:function(){var s=this,a=this.props,o=a.className,l=a.inputId,u=a.translate,d=a.autoFocus,f=a.loadingIndicator,m=a.submit,p=a.reset,y=this.getQuery(),j=Object.keys(this.props).reduce(function(N,_){return["onsubmit","onreset","onchange"].indexOf(_.toLowerCase())===-1&&_.indexOf("on")===0?EI(EI({},N),{},na({},_,s.props[_])):N},{}),b=this.props.showLoadingIndicator&&this.props.isSearchStalled;return ue.createElement("div",{className:tc(Ya(""),o)},ue.createElement("form",{ref:this.props.formRef,noValidate:!0,onSubmit:this.props.onSubmit?this.props.onSubmit:this.onSubmit,onReset:this.onReset,className:Ya("form",b&&"form--stalledSearch"),action:"",role:"search"},ue.createElement("input",Uj({ref:this.onInputMount,id:l,type:"search",placeholder:u("placeholder"),autoFocus:d,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,maxLength:"512",value:y,onChange:this.onChange},j,{className:Ya("input")})),ue.createElement("button",{type:"submit",title:u("submitTitle"),className:Ya("submit")},m),ue.createElement("button",{type:"reset",title:u("resetTitle"),className:Ya("reset"),hidden:!y||b},p),this.props.showLoadingIndicator&&ue.createElement("span",{hidden:!b,className:Ya("loadingIndicator")},f)))}}]),n}(x.Component);na($C,"propTypes",{currentRefinement:X.string,className:X.string,refine:X.func.isRequired,translate:X.func.isRequired,loadingIndicator:X.node,reset:X.node,submit:X.node,focusShortcuts:X.arrayOf(X.oneOfType([X.string,X.number])),autoFocus:X.bool,searchAsYouType:X.bool,onSubmit:X.func,onReset:X.func,onChange:X.func,isSearchStalled:X.bool,showLoadingIndicator:X.bool,formRef:X.oneOfType([X.func,X.exact({current:X.object})]),inputRef:X.oneOfType([X.func,X.exact({current:X.object})]),inputId:X.string});na($C,"defaultProps",{currentRefinement:"",className:"",focusShortcuts:["s","/"],autoFocus:!1,searchAsYouType:!0,showLoadingIndicator:!1,isSearchStalled:!1,loadingIndicator:Sve,reset:Eve,submit:Cve});const K9=E_({resetTitle:"Clear the search query.",submitTitle:"Submit your search query.",placeholder:"Search here…"})($C);function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function Pve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z9(r.key),r)}}function kve(t,e,n){return e&&Tve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hj(t,e)}function Hj(t,e){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Hj(t,e)}function Ive(t){var e=Ove();return function(){var r=Wx(t),s;if(e){var a=Wx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Ave(this,s)}}function Ave(t,e){if(e&&(Sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return um(t)}function um(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ove(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wx(t)}function _d(t,e,n){return e=Z9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z9(t){var e=Mve(t,"string");return Sh(e)==="symbol"?e:String(e)}function Mve(t,e){if(Sh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q9=X.arrayOf(X.shape({value:X.any,label:X.node.isRequired,items:function(){return Q9.apply(void 0,arguments)}})),zC=function(t){Rve(n,t);var e=Ive(n);function n(){var r;return Pve(this,n),r=e.call(this),_d(um(r),"onShowMoreClick",function(){r.setState(function(s){return{extended:!s.extended}})}),_d(um(r),"getLimit",function(){var s=r.props,a=s.limit,o=s.showMoreLimit,l=r.state.extended;return l?o:a}),_d(um(r),"resetQuery",function(){r.setState({query:""})}),_d(um(r),"renderItem",function(s,a){var o=s.items&&!!s.items.length;return ue.createElement("li",{key:s.key||s.label,className:r.props.cx("item",s.isRefined&&"item--selected",s.noRefinement&&"item--noRefinement",o&&"item--parent")},r.props.renderItem(s,a),o&&ue.createElement("ul",{className:r.props.cx("list","list--child")},s.items.slice(0,r.getLimit()).map(function(l){return r.renderItem(l,s)})))}),r.state={extended:!1,query:""},r}return kve(n,[{key:"renderShowMore",value:function(){var s=this.props,a=s.showMore,o=s.translate,l=s.cx,u=this.state.extended,d=this.props.limit>=this.props.items.length;return a?ue.createElement("button",{disabled:d,className:l("showMore",d&&"showMore--disabled"),onClick:this.onShowMoreClick},o("showMore",u)):null}},{key:"renderSearchBox",value:function(){var s=this,a=this.props,o=a.cx,l=a.searchForItems,u=a.isFromSearch,d=a.translate,f=a.items,m=a.selectItem,p=f.length===0&&this.state.query!==""?ue.createElement("div",{className:o("noResults")},d("noResults")):null;return ue.createElement("div",{className:o("searchBox")},ue.createElement(K9,{currentRefinement:this.state.query,refine:function(j){s.setState({query:j}),l(j)},focusShortcuts:[],translate:d,onSubmit:function(j){j.preventDefault(),j.stopPropagation(),u&&f.length>0&&m(f[0],s.resetQuery)}}),p)}},{key:"render",value:function(){var s=this,a=this.props,o=a.cx,l=a.items,u=a.className,d=a.searchable,f=a.canRefine,m=d?this.renderSearchBox():null,p=tc(o("",!f&&"-noRefinement"),u);return l.length===0?ue.createElement("div",{className:p},m):ue.createElement("div",{className:p},m,ue.createElement("ul",{className:o("list",!f&&"list--noRefinement")},l.slice(0,this.getLimit()).map(function(y){return s.renderItem(y,s.resetQuery)})),this.renderShowMore())}}]),n}(x.Component);_d(zC,"propTypes",{cx:X.func.isRequired,translate:X.func,items:Q9,renderItem:X.func.isRequired,selectItem:X.func,className:X.string,showMore:X.bool,limit:X.number,showMoreLimit:X.number,show:X.func,searchForItems:X.func,searchable:X.bool,isFromSearch:X.bool,canRefine:X.bool});_d(zC,"defaultProps",{className:"",isFromSearch:!1});var qj=function(e){var n=e.cx,r=e.value,s=e.highlightedTagName,a=e.isHighlighted,o=e.nonHighlightedTagName,l=a?s:o,u=a?"highlighted":"nonHighlighted";return ue.createElement(l,{className:n(u)},r)};qj.propTypes={cx:X.func.isRequired,value:X.string.isRequired,isHighlighted:X.bool.isRequired,highlightedTagName:X.string.isRequired,nonHighlightedTagName:X.string.isRequired};var UC=function(e){var n=e.cx,r=e.hit,s=e.attribute,a=e.highlight,o=e.highlightProperty,l=e.tagName,u=e.nonHighlightedTagName,d=e.separator,f=e.className,m=a({hit:r,attribute:s,highlightProperty:o});return ue.createElement("span",{className:tc(n(""),f)},m.map(function(p,y){if(Array.isArray(p)){var j=y===m.length-1;return ue.createElement("span",{key:y},p.map(function(b,N){return ue.createElement(qj,{cx:n,key:N,value:b.value,highlightedTagName:l,nonHighlightedTagName:u,isHighlighted:b.isHighlighted})}),!j&&ue.createElement("span",{className:n("separator")},d))}return ue.createElement(qj,{cx:n,key:y,value:p.value,highlightedTagName:l,nonHighlightedTagName:u,isHighlighted:p.isHighlighted})}))};UC.propTypes={cx:X.func.isRequired,hit:X.object.isRequired,attribute:X.oneOfType([X.arrayOf(X.string),X.string]).isRequired,highlight:X.func.isRequired,highlightProperty:X.string.isRequired,tagName:X.string,nonHighlightedTagName:X.string,className:X.string,separator:X.node};UC.defaultProps={tagName:"em",nonHighlightedTagName:"span",className:"",separator:", "};function Wj(){return Wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wj.apply(this,arguments)}var Dve=wu("Highlight"),Lve=function(e){return ue.createElement(UC,Wj({},e,{highlightProperty:"_highlightResult",cx:Dve}))};const Fve=uge(Lve,{$$widgetType:"ais.highlight"});var xb=wu("Hits"),Vve=function(e){return ue.createElement("div",{style:{borderBottom:"1px solid #bbb",paddingBottom:"5px",marginBottom:"5px",wordBreak:"break-all"}},JSON.stringify(e).slice(0,100),"...")},Y9=function(e){var n=e.hits,r=e.className,s=r===void 0?"":r,a=e.hitComponent,o=a===void 0?Vve:a;return ue.createElement("div",{className:tc(xb(""),s)},ue.createElement("ul",{className:xb("list")},n.map(function(l){return ue.createElement("li",{className:xb("item"),key:l.objectID},ue.createElement(o,{hit:l}))})))},$ve=X.shape({objectID:X.oneOfType([X.string,X.number]).isRequired});Y9.propTypes={hits:X.arrayOf($ve.isRequired).isRequired,className:X.string,hitComponent:X.any};const zve=dge(Y9,{$$widgetType:"ais.hits"});function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function Uve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X9(r.key),r)}}function Hve(t,e,n){return e&&Bve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gj(t,e)}function Gj(t,e){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Gj(t,e)}function Wve(t){var e=Zve();return function(){var r=Gx(t),s;if(e){var a=Gx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Gve(this,s)}}function Gve(t,e){if(e&&(Eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kve(t)}function Kve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gx(t)}function Qve(t,e,n){return e=X9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X9(t){var e=Yve(t,"string");return Eh(e)==="symbol"?e:String(e)}function Yve(t,e){if(Eh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J9=function(t){qve(n,t);var e=Wve(n);function n(){return Uve(this,n),e.apply(this,arguments)}return Hve(n,[{key:"render",value:function(){var s=this.props,a=s.cx,o=s.createURL,l=s.items,u=s.onSelect,d=s.canRefine;return ue.createElement("ul",{className:a("list",!d&&"list--noRefinement")},l.map(function(f){return ue.createElement("li",{key:f.key===void 0?f.value:f.key,className:a("item",f.selected&&!f.disabled&&"item--selected",f.disabled&&"item--disabled",f.modifier)},f.disabled?ue.createElement("span",{className:a("link")},f.label===void 0?f.value:f.label):ue.createElement(z9,{className:a("link",f.selected&&"link--selected"),"aria-label":f.ariaLabel,href:o(f.value),onClick:function(){return u(f.value)}},f.label===void 0?f.value:f.label))}))}}]),n}(x.Component);Qve(J9,"propTypes",{cx:X.func.isRequired,createURL:X.func.isRequired,items:X.arrayOf(X.shape({value:X.oneOfType([X.string,X.number,X.object]).isRequired,key:X.oneOfType([X.string,X.number]),label:X.node,modifier:X.string,ariaLabel:X.string,disabled:X.bool})),onSelect:X.func.isRequired,canRefine:X.bool.isRequired});var Xve=["listComponent","nbPages","totalPages","currentRefinement","padding","showFirst","showPrevious","showNext","showLast","refine","createURL","canRefine","translate","className"];function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function Kj(){return Kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kj.apply(this,arguments)}function Jve(t,e){if(t==null)return{};var n=eye(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eye(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function tye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t8(r.key),r)}}function rye(t,e,n){return e&&nye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zj(t,e)}function Zj(t,e){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Zj(t,e)}function iye(t){var e=lye();return function(){var r=Kx(t),s;if(e){var a=Kx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return aye(this,s)}}function aye(t,e){if(e&&(Ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oye(t)}function oye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kx(t)}function e8(t,e,n){return e=t8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8(t){var e=cye(t,"string");return Ch(e)==="symbol"?e:String(e)}function cye(t,e){if(Ch(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ch(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CI=wu("Pagination");function uye(t,e){return Math.min(2*t+1,e)}function dye(t,e,n,r){return t<=e?t:t>=n-e?r-(n-t):e+1}function hye(t,e,n){var r=uye(n,e);if(r===e)return NI({start:1,end:e+1});var s=dye(t,n,e,r),a=r-s,o=t-s,l=t+a;return NI({start:o+1,end:l+1})}var BC=function(t){sye(n,t);var e=iye(n);function n(){return tye(this,n),e.apply(this,arguments)}return rye(n,[{key:"getItem",value:function(s,a,o){var l=this.props,u=l.nbPages,d=l.totalPages,f=l.translate;return{key:"".concat(s,".").concat(o),modifier:s,disabled:o<1||o>=Math.min(d,u),label:f(a,o),value:o,ariaLabel:f("aria".concat(Uge(a)),o)}}},{key:"render",value:function(){var s=this.props,a=s.listComponent,o=s.nbPages,l=s.totalPages,u=s.currentRefinement,d=s.padding,f=s.showFirst,m=s.showPrevious,p=s.showNext,y=s.showLast,j=s.refine,b=s.createURL,N=s.canRefine,_=s.translate,w=s.className,E=Jve(s,Xve),R=Math.min(o,l),A=R,B=[];return f&&B.push({key:"first",modifier:"item--firstPage",disabled:u===1,label:_("first"),value:1,ariaLabel:_("ariaFirst")}),m&&B.push({key:"previous",modifier:"item--previousPage",disabled:u===1,label:_("previous"),value:u-1,ariaLabel:_("ariaPrevious")}),B=B.concat(hye(u,R,d).map(function(I){return{key:I,modifier:"item--page",label:_("page",I),value:I,selected:I===u,ariaLabel:_("ariaPage",I)}})),p&&B.push({key:"next",modifier:"item--nextPage",disabled:u===A||A<=1,label:_("next"),value:u+1,ariaLabel:_("ariaNext")}),y&&B.push({key:"last",modifier:"item--lastPage",disabled:u===A||A<=1,label:_("last"),value:A,ariaLabel:_("ariaLast")}),ue.createElement("div",{className:tc(CI("",!N&&"-noRefinement"),w)},ue.createElement(a,Kj({},E,{cx:CI,items:B,onSelect:j,createURL:b,canRefine:N})))}}]),n}(x.Component);e8(BC,"propTypes",{nbPages:X.number.isRequired,currentRefinement:X.number.isRequired,refine:X.func.isRequired,createURL:X.func.isRequired,canRefine:X.bool.isRequired,translate:X.func.isRequired,listComponent:X.func,showFirst:X.bool,showPrevious:X.bool,showNext:X.bool,showLast:X.bool,padding:X.number,totalPages:X.number,className:X.string});e8(BC,"defaultProps",{listComponent:J9,showFirst:!0,showPrevious:!0,showNext:!0,showLast:!1,padding:3,totalPages:1/0,className:""});const fye=E_({previous:"‹",next:"›",first:"«",last:"»",page:function(e){return e.toString()},ariaPrevious:"Previous page",ariaNext:"Next page",ariaFirst:"First page",ariaLast:"Last page",ariaPage:function(e){return"Page ".concat(e.toString())}})(BC);var mye=function(e){return ue.createElement(M_,e,ue.createElement(fye,e))};const pye=gge(mye,{$$widgetType:"ais.pagination"});function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}function gye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r8(r.key),r)}}function yye(t,e,n){return e&&vye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qj(t,e)}function Qj(t,e){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Qj(t,e)}function _ye(t){var e=bye();return function(){var r=Zx(t),s;if(e){var a=Zx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return wye(this,s)}}function wye(t,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n8(t)}function n8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(t)}function HC(t,e,n){return e=r8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r8(t){var e=jye(t,"string");return Ph(e)==="symbol"?e:String(e)}function jye(t,e){if(Ph(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ph(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var td=wu("RangeInput"),qC=function(t){xye(n,t);var e=_ye(n);function n(r){var s;return gye(this,n),s=e.call(this,r),HC(n8(s),"onSubmit",function(a){a.preventDefault(),s.props.refine({min:s.state.from,max:s.state.to})}),s.state=s.normalizeStateForRendering(r),s}return yye(n,[{key:"componentDidUpdate",value:function(s){this.props.canRefine&&(s.currentRefinement.min!==this.props.currentRefinement.min||s.currentRefinement.max!==this.props.currentRefinement.max)&&this.setState(this.normalizeStateForRendering(this.props))}},{key:"normalizeStateForRendering",value:function(s){var a=s.canRefine,o=s.min,l=s.max,u=s.currentRefinement,d=u.min,f=u.max;return{from:a&&d!==void 0&&d!==o?d:"",to:a&&f!==void 0&&f!==l?f:""}}},{key:"normalizeRangeForRendering",value:function(s){var a=s.canRefine,o=s.min,l=s.max,u=o!==void 0,d=l!==void 0;return{min:a&&u&&d?o:"",max:a&&u&&d?l:""}}},{key:"render",value:function(){var s=this,a=this.state,o=a.from,l=a.to,u=this.props,d=u.precision,f=u.translate,m=u.canRefine,p=u.className,y=this.normalizeRangeForRendering(this.props),j=y.min,b=y.max,N=1/Math.pow(10,d);return ue.createElement("div",{className:tc(td("",!m&&"-noRefinement"),p)},ue.createElement("form",{className:td("form"),onSubmit:this.onSubmit},ue.createElement("input",{className:td("input","input--min"),type:"number",min:j,max:b,value:o,step:N,placeholder:j,disabled:!m,onChange:function(w){return s.setState({from:w.currentTarget.value})}}),ue.createElement("span",{className:td("separator")},f("separator")),ue.createElement("input",{className:td("input","input--max"),type:"number",min:j,max:b,value:l,step:N,placeholder:b,disabled:!m,onChange:function(w){return s.setState({to:w.currentTarget.value})}}),ue.createElement("button",{className:td("submit"),type:"submit"},f("submit"))))}}]),n}(x.Component);HC(qC,"propTypes",{canRefine:X.bool.isRequired,precision:X.number.isRequired,translate:X.func.isRequired,refine:X.func.isRequired,min:X.number,max:X.number,currentRefinement:X.shape({min:X.number,max:X.number}),className:X.string});HC(qC,"defaultProps",{currentRefinement:{},className:""});const Nye=E_({submit:"ok",separator:"to"})(qC);var Sye=function(e){return ue.createElement(M_,e,ue.createElement(Nye,e))};const Eye=bge(Sye,{$$widgetType:"ais.rangeInput"});function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function Cye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s8(r.key),r)}}function Tye(t,e,n){return e&&Pye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yj(t,e)}function Yj(t,e){return Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Yj(t,e)}function Rye(t){var e=Aye();return function(){var r=Qx(t),s;if(e){var a=Qx(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Iye(this,s)}}function Iye(t,e){if(e&&(Th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dy(t)}function dy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qx(t)}function Im(t,e,n){return e=s8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s8(t){var e=Oye(t,"string");return Th(e)==="symbol"?e:String(e)}function Oye(t,e){if(Th(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Th(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zf=wu("RefinementList"),WC=function(t){kye(n,t);var e=Rye(n);function n(){var r;Cye(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Im(dy(r),"state",{query:""}),Im(dy(r),"selectItem",function(l,u){u(),r.props.refine(l.value)}),Im(dy(r),"renderItem",function(l,u){var d=r.props.isFromSearch?ue.createElement(Fve,{attribute:"label",hit:l}):l.label;return ue.createElement("label",{className:Zf("label")},ue.createElement("input",{className:Zf("checkbox"),type:"checkbox",checked:l.isRefined,onChange:function(){return r.selectItem(l,u)}}),ue.createElement("span",{className:Zf("labelText")},d)," ",ue.createElement("span",{className:Zf("count")},l.count.toLocaleString()))}),r}return Tye(n,[{key:"render",value:function(){var s=this.props,a=s.translate,o=s.items,l=s.showMore,u=s.limit,d=s.showMoreLimit,f=s.isFromSearch,m=s.searchForItems,p=s.searchable,y=s.canRefine,j=s.className;return ue.createElement(zC,{renderItem:this.renderItem,selectItem:this.selectItem,cx:Zf,translate:a,items:o,showMore:l,limit:u,showMoreLimit:d,isFromSearch:f,searchForItems:m,searchable:p,canRefine:y,className:j,query:this.state.query})}}]),n}(x.Component);Im(WC,"propTypes",{translate:X.func.isRequired,refine:X.func.isRequired,searchForItems:X.func.isRequired,searchable:X.bool,createURL:X.func.isRequired,items:X.arrayOf(X.shape({label:X.string.isRequired,value:X.arrayOf(X.string).isRequired,count:X.number.isRequired,isRefined:X.bool.isRequired})),isFromSearch:X.bool.isRequired,canRefine:X.bool.isRequired,showMore:X.bool,limit:X.number,showMoreLimit:X.number,transformItems:X.func,className:X.string});Im(WC,"defaultProps",{className:""});const Mye=E_({showMore:function(e){return e?"Show less":"Show more"},noResults:"No results",submit:null,reset:null,resetTitle:"Clear the search query.",submitTitle:"Submit your search query.",placeholder:"Search here…"})(WC);var Dye=function(e){return ue.createElement(M_,e,ue.createElement(Mye,e))};const _b=Pge(Dye,{$$widgetType:"ais.refinementList"}),Lye=Age(K9,{$$widgetType:"ais.searchBox"}),Fye="Q3E5Y56YF4",Vye="5f0e550b9ede2710482ad296ad3b3cae",i8="student-housing",a8=vF(Fye,Vye);function Iv(t,e){for(const n of e)if(t[n])return t[n]}function $ye({hit:t}){const e=Iv(t,["titre","types","taper","cône","title"]),n=t.prix,r=t.adresse,s=t.surface,a=Iv(t,["garanties","types","section"]),o=Iv(t,["services","services_supplémentaires"]),l=Iv(t,["date_de_disponibilité","scraped_at","gratté_à","traitéÀ"]),u=t.description,d=t.image||Array.isArray(t.images)&&t.images[0],f=t.objectID||t.source_url;return console.log("Hit data:",t),i.jsx(ve,{className:"mb-4",children:i.jsxs(ye,{className:"flex flex-col md:flex-row gap-4 p-4",children:[d&&i.jsx("img",{src:d,alt:e,className:"w-full md:w-48 h-32 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[i.jsx("span",{className:"font-bold text-lg",children:e||"Titre non spécifié"}),n&&i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[n," €"]}),s&&i.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm",children:[s," m²"]})]}),r&&i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:r}),a&&i.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["État : ",a]}),o&&i.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Services : ",o]}),l&&i.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Date : ",l]}),u&&i.jsx("div",{className:"text-xs text-gray-700 mb-2 line-clamp-2",children:u}),i.jsxs("div",{className:"text-xs text-red-600 mb-1",children:["Source: ",t.source," | Source_normalized: ",t.source_normalized]}),f&&i.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800",children:"Voir l'annonce"})]})]})})}const zye=()=>{const[t,e]=ue.useState(null),[n,r]=ue.useState(!0);return ue.useEffect(()=>{(async()=>{try{const a=a8.initIndex(i8),o=await a.search("",{hitsPerPage:3,facets:["*"]}),l=await a.getSettings();e({totalHits:o.nbHits,firstHit:o.hits[0]||null,facets:o.facets,attributesForFaceting:l.attributesForFaceting||[],searchableAttributes:l.searchableAttributes||[]}),console.log("Diagnostic complet:",{allResults:o,settings:l,firstHit:o.hits[0]})}catch(a){console.error("Erreur diagnostic:",a),e({error:a.message})}finally{r(!1)}})()},[]),n?i.jsx("div",{className:"p-4 bg-gray-100 rounded",children:"Chargement du diagnostic..."}):t?i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-3",children:"🔍 DIAGNOSTIC ALGOLIA"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Total d'annonces dans l'index:"})," ",t.totalHits]}),t.firstHit&&i.jsxs("div",{children:[i.jsx("strong",{children:"Exemple d'annonce (structure):"}),i.jsx("pre",{className:"text-xs bg-white p-2 rounded mt-1 overflow-auto max-h-32",children:JSON.stringify(t.firstHit,null,2)})]}),t.attributesForFaceting&&t.attributesForFaceting.length>0&&i.jsxs("div",{children:[i.jsx("strong",{children:"Attributs configurés pour les filtres:"}),i.jsx("ul",{className:"list-disc list-inside ml-2",children:t.attributesForFaceting.map((s,a)=>i.jsx("li",{children:s},a))})]}),t.facets&&Object.keys(t.facets).length>0&&i.jsxs("div",{children:[i.jsx("strong",{children:"Facettes disponibles:"}),Object.entries(t.facets).map(([s,a])=>i.jsxs("div",{className:"ml-2 mt-1",children:[i.jsxs("strong",{children:[s,":"]}),i.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(a).slice(0,5).map(([o,l])=>i.jsxs("li",{className:"text-xs",children:[o,": ",l]},o))})]},s))]}),t.error&&i.jsxs("div",{className:"text-red-600",children:[i.jsx("strong",{children:"Erreur:"})," ",t.error]})]})]}):i.jsx("div",{className:"p-4 bg-red-100 rounded",children:"Erreur lors du diagnostic"})},Uye=Oge(({searchResults:t})=>i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded",children:t?i.jsxs("div",{children:[i.jsxs("strong",{children:["Résultats: ",t.nbHits]}),' | Requête: "',t.query||"vide",'" | Temps: ',t.processingTimeMS,"ms"]}):i.jsx("div",{children:"Aucun résultat de recherche"})})),Bye=()=>i.jsx(LC,{searchClient:a8,indexName:i8,children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Logements étudiants - Diagnostic"}),i.jsx(zye,{}),i.jsx("div",{className:"mb-6",children:i.jsx(Lye,{translations:{placeholder:"Rechercher un logement..."},className:"ais-SearchBox w-full"})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[i.jsx("aside",{className:"lg:w-80 space-y-6",children:i.jsxs(ve,{children:[i.jsx(Xe,{children:i.jsx(Je,{children:"Filtres de test"})}),i.jsxs(ye,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Source (test 1)"}),i.jsx(_b,{attribute:"source",limit:10,showMore:!0,translations:{noResults:"Aucune source",showMore:"Voir plus",showLess:"Voir moins"}})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Source Normalized (test 2)"}),i.jsx(_b,{attribute:"source_normalized",limit:10,showMore:!0,translations:{noResults:"Aucune source",showMore:"Voir plus",showLess:"Voir moins"}})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Types"}),i.jsx(_b,{attribute:"types",limit:10,translations:{noResults:"Aucun type"}})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Prix"}),i.jsx(Eye,{attribute:"prix",translations:{submit:"OK",separator:"à"}})]})]})]})}),i.jsxs("main",{className:"flex-1",children:[i.jsx(Uye,{}),i.jsx(zve,{hitComponent:$ye}),i.jsx(pye,{})]})]})]})});function Hye({children:t}){const[e,n]=ue.useState(null);return ue.useEffect(()=>{const r=s=>{n(s.error||new Error(s.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?i.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):i.jsx(i.Fragment,{children:t})}function qye(){return i.jsx(fB,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:i.jsx(gY,{children:i.jsxs(aB,{children:[i.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[i.jsx(Nre,{}),i.jsx("main",{className:"flex-1 pt-16",children:i.jsx(Hye,{children:i.jsxs(XU,{children:[i.jsx(mn,{path:"/",element:i.jsx($ie,{})}),i.jsx(mn,{path:"/listings",element:i.jsx(xae,{})}),i.jsx(mn,{path:"/listing/:id",element:i.jsx(bce,{})}),i.jsx(mn,{path:"/auth",element:i.jsx(ife,{})}),i.jsx(mn,{path:"/help",element:i.jsx(Ehe,{})}),i.jsx(mn,{path:"/safety",element:i.jsx(khe,{})}),i.jsx(mn,{path:"/cart",element:i.jsx(afe,{})}),i.jsx(mn,{path:"/products",element:i.jsx(pfe,{})}),i.jsx(mn,{path:"/checkout/success",element:i.jsx(gfe,{})}),i.jsx(mn,{path:"/checkout",element:i.jsx(bi,{children:i.jsx(ofe,{})})}),i.jsx(mn,{path:"/orders",element:i.jsx(bi,{children:i.jsx(lfe,{})})}),i.jsx(mn,{path:"/order-confirmation/:orderId",element:i.jsx(bi,{children:i.jsx(cfe,{})})}),i.jsx(mn,{path:"/create",element:i.jsx(bi,{children:i.jsx(Sde,{})})}),i.jsx(mn,{path:"/profile",element:i.jsx(bi,{children:i.jsx(Tde,{})})}),i.jsx(mn,{path:"/settings",element:i.jsx(bi,{children:i.jsx(Bde,{})})}),i.jsx(mn,{path:"/impact",element:i.jsx(bi,{children:i.jsx(Xde,{})})}),i.jsx(mn,{path:"/saved-searches",element:i.jsx(bi,{children:i.jsx(ehe,{})})}),i.jsx(mn,{path:"/favorites",element:i.jsx(bi,{children:i.jsx(rhe,{})})}),i.jsx(mn,{path:"/payments",element:i.jsx(bi,{children:i.jsx(she,{})})}),i.jsx(mn,{path:"/messages",element:i.jsx(bi,{children:i.jsx(Hhe,{})})}),i.jsx(mn,{path:"/edit-listing/:id",element:i.jsx(xfe,{})}),i.jsx(mn,{path:"/jobs",element:i.jsx(Dfe,{})}),i.jsx(mn,{path:"/housing",element:i.jsx(Bye,{})}),i.jsx(mn,{path:"*",element:i.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),i.jsx(Ere,{})]}),i.jsx(o7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}$O(document.getElementById("root")).render(i.jsx(x.StrictMode,{children:i.jsx(qye,{})}));
