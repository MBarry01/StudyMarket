function i5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function bg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lC={exports:{}},jg={},cC={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=Symbol.for("react.element"),a5=Symbol.for("react.portal"),o5=Symbol.for("react.fragment"),l5=Symbol.for("react.strict_mode"),c5=Symbol.for("react.profiler"),u5=Symbol.for("react.provider"),d5=Symbol.for("react.context"),h5=Symbol.for("react.forward_ref"),f5=Symbol.for("react.suspense"),m5=Symbol.for("react.memo"),p5=Symbol.for("react.lazy"),B_=Symbol.iterator;function g5(t){return t===null||typeof t!="object"?null:(t=B_&&t[B_]||t["@@iterator"],typeof t=="function"?t:null)}var uC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dC=Object.assign,hC={};function iu(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||uC}iu.prototype.isReactComponent={};iu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};iu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fC(){}fC.prototype=iu.prototype;function Nw(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||uC}var Ew=Nw.prototype=new fC;Ew.constructor=Nw;dC(Ew,iu.prototype);Ew.isPureReactComponent=!0;var q_=Array.isArray,mC=Object.prototype.hasOwnProperty,Sw={current:null},pC={key:!0,ref:!0,__self:!0,__source:!0};function gC(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)mC.call(e,r)&&!pC.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:kh,type:t,key:a,ref:o,props:i,_owner:Sw.current}}function v5(t,e){return{$$typeof:kh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cw(t){return typeof t=="object"&&t!==null&&t.$$typeof===kh}function x5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var W_=/\/+/g;function ix(t,e){return typeof t=="object"&&t!==null&&t.key!=null?x5(""+t.key):e.toString(36)}function wm(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kh:case a5:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ix(o,0):r,q_(i)?(n="",t!=null&&(n=t.replace(W_,"$&/")+"/"),wm(i,e,n,"",function(u){return u})):i!=null&&(Cw(i)&&(i=v5(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(W_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",q_(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+ix(a,l);o+=wm(a,e,n,c,i)}else if(c=g5(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+ix(a,l++),o+=wm(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Of(t,e,n){if(t==null)return t;var r=[],i=0;return wm(t,r,"","",function(a){return e.call(n,a,i++)}),r}function y5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mr={current:null},bm={transition:null},w5={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:bm,ReactCurrentOwner:Sw};function vC(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Of,forEach:function(t,e,n){Of(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Of(t,function(){e++}),e},toArray:function(t){return Of(t,function(e){return e})||[]},only:function(t){if(!Cw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=iu;Ze.Fragment=o5;Ze.Profiler=c5;Ze.PureComponent=Nw;Ze.StrictMode=l5;Ze.Suspense=f5;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w5;Ze.act=vC;Ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dC({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Sw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)mC.call(e,c)&&!pC.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:kh,type:t.type,key:i,ref:a,props:r,_owner:o}};Ze.createContext=function(t){return t={$$typeof:d5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u5,_context:t},t.Consumer=t};Ze.createElement=gC;Ze.createFactory=function(t){var e=gC.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:h5,render:t}};Ze.isValidElement=Cw;Ze.lazy=function(t){return{$$typeof:p5,_payload:{_status:-1,_result:t},_init:y5}};Ze.memo=function(t,e){return{$$typeof:m5,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=bm.transition;bm.transition={};try{t()}finally{bm.transition=e}};Ze.unstable_act=vC;Ze.useCallback=function(t,e){return mr.current.useCallback(t,e)};Ze.useContext=function(t){return mr.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return mr.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return mr.current.useEffect(t,e)};Ze.useId=function(){return mr.current.useId()};Ze.useImperativeHandle=function(t,e,n){return mr.current.useImperativeHandle(t,e,n)};Ze.useInsertionEffect=function(t,e){return mr.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return mr.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return mr.current.useMemo(t,e)};Ze.useReducer=function(t,e,n){return mr.current.useReducer(t,e,n)};Ze.useRef=function(t){return mr.current.useRef(t)};Ze.useState=function(t){return mr.current.useState(t)};Ze.useSyncExternalStore=function(t,e,n){return mr.current.useSyncExternalStore(t,e,n)};Ze.useTransition=function(){return mr.current.useTransition()};Ze.version="18.3.1";cC.exports=Ze;var p=cC.exports;const xe=bg(p),xC=i5({__proto__:null,default:xe},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5=p,j5=Symbol.for("react.element"),_5=Symbol.for("react.fragment"),N5=Object.prototype.hasOwnProperty,E5=b5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S5={key:!0,ref:!0,__self:!0,__source:!0};function yC(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)N5.call(e,r)&&!S5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:j5,type:t,key:a,ref:o,props:i,_owner:E5.current}}jg.Fragment=_5;jg.jsx=yC;jg.jsxs=yC;lC.exports=jg;var s=lC.exports,wC={exports:{}},zr={},bC={exports:{}},jC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var U=O.length;O.push(B);e:for(;0<U;){var Q=U-1>>>1,ie=O[Q];if(0<i(ie,B))O[Q]=B,O[U]=ie,U=Q;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],U=O.pop();if(U!==B){O[0]=U;e:for(var Q=0,ie=O.length,Ce=ie>>>1;Q<Ce;){var Xe=2*(Q+1)-1,xt=O[Xe],ut=Xe+1,ge=O[ut];if(0>i(xt,U))ut<ie&&0>i(ge,xt)?(O[Q]=ge,O[ut]=U,Q=ut):(O[Q]=xt,O[Xe]=U,Q=Xe);else if(ut<ie&&0>i(ge,U))O[Q]=ge,O[ut]=U,Q=ut;else break e}}return B}function i(O,B){var U=O.sortIndex-B.sortIndex;return U!==0?U:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,v=!1,x=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function E(O){if(w=!1,b(O),!x)if(n(c)!==null)x=!0,Y(S);else{var B=n(u);B!==null&&L(E,B.startTime-O)}}function S(O,B){x=!1,w&&(w=!1,y(I),I=-1),v=!0;var U=m;try{for(b(B),f=n(c);f!==null&&(!(f.expirationTime>B)||O&&!P());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var ie=Q(f.expirationTime<=B);B=t.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(c)&&r(c),b(B)}else r(c);f=n(c)}if(f!==null)var Ce=!0;else{var Xe=n(u);Xe!==null&&L(E,Xe.startTime-B),Ce=!1}return Ce}finally{f=null,m=U,v=!1}}var M=!1,k=null,I=-1,A=5,N=-1;function P(){return!(t.unstable_now()-N<A)}function R(){if(k!==null){var O=t.unstable_now();N=O;var B=!0;try{B=k(!0,O)}finally{B?T():(M=!1,k=null)}}else M=!1}var T;if(typeof g=="function")T=function(){g(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=R,T=function(){W.postMessage(null)}}else T=function(){j(R,0)};function Y(O){k=O,M||(M=!0,T())}function L(O,B){I=j(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,Y(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var U=m;m=B;try{return O()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=m;m=O;try{return B()}finally{m=U}},t.unstable_scheduleCallback=function(O,B,U){var Q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Q+U:Q):U=Q,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=U+ie,O={id:d++,callback:B,priorityLevel:O,startTime:U,expirationTime:ie,sortIndex:-1},U>Q?(O.sortIndex=U,e(u,O),n(c)===null&&O===n(u)&&(w?(y(I),I=-1):w=!0,L(E,U-Q))):(O.sortIndex=ie,e(c,O),x||v||(x=!0,Y(S))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var B=m;return function(){var U=m;m=B;try{return O.apply(this,arguments)}finally{m=U}}}})(jC);bC.exports=jC;var C5=bC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T5=p,Ur=C5;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _C=new Set,Pd={};function vl(t,e){Tc(t,e),Tc(t+"Capture",e)}function Tc(t,e){for(Pd[t]=e,t=0;t<e.length;t++)_C.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wy=Object.prototype.hasOwnProperty,k5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H_={},G_={};function I5(t){return wy.call(G_,t)?!0:wy.call(H_,t)?!1:k5.test(t)?G_[t]=!0:(H_[t]=!0,!1)}function P5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A5(t,e,n,r){if(e===null||typeof e>"u"||P5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var On={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){On[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];On[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){On[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){On[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){On[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){On[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){On[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){On[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){On[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tw=/[\-:]([a-z])/g;function kw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tw,kw);On[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tw,kw);On[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tw,kw);On[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){On[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});On.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){On[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iw(t,e,n,r){var i=On.hasOwnProperty(e)?On[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A5(e,n,i,r)&&(n=null),r||i===null?I5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zi=T5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lf=Symbol.for("react.element"),Kl=Symbol.for("react.portal"),Yl=Symbol.for("react.fragment"),Pw=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),EC=Symbol.for("react.context"),Aw=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),_y=Symbol.for("react.suspense_list"),Rw=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),SC=Symbol.for("react.offscreen"),K_=Symbol.iterator;function Uu(t){return t===null||typeof t!="object"?null:(t=K_&&t[K_]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,ax;function td(t){if(ax===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ax=e&&e[1]||""}return`
`+ax+t}var ox=!1;function lx(t,e){if(!t||ox)return"";ox=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ox=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?td(t):""}function R5(t){switch(t.tag){case 5:return td(t.type);case 16:return td("Lazy");case 13:return td("Suspense");case 19:return td("SuspenseList");case 0:case 2:case 15:return t=lx(t.type,!1),t;case 11:return t=lx(t.type.render,!1),t;case 1:return t=lx(t.type,!0),t;default:return""}}function Ny(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yl:return"Fragment";case Kl:return"Portal";case by:return"Profiler";case Pw:return"StrictMode";case jy:return"Suspense";case _y:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EC:return(t.displayName||"Context")+".Consumer";case NC:return(t._context.displayName||"Context")+".Provider";case Aw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rw:return e=t.displayName||null,e!==null?e:Ny(t.type)||"Memo";case ma:e=t._payload,t=t._init;try{return Ny(t(e))}catch{}}return null}function D5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ny(e);case 8:return e===Pw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function M5(t){var e=CC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vf(t){t._valueTracker||(t._valueTracker=M5(t))}function TC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ey(t,e){var n=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Y_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ba(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kC(t,e){e=e.checked,e!=null&&Iw(t,"checked",e,!1)}function Sy(t,e){kC(t,e);var n=Ba(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cy(t,e.type,Ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Q_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cy(t,e,n){(e!=="number"||Xm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nd=Array.isArray;function cc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ba(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ty(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(nd(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ba(n)}}function IC(t,e){var n=Ba(e.value),r=Ba(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ky(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ff,AC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ff.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ad(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O5=["Webkit","ms","Moz","O"];Object.keys(pd).forEach(function(t){O5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pd[e]=pd[t]})});function RC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pd.hasOwnProperty(t)&&pd[t]?(""+e).trim():e+"px"}function DC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var L5=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iy(t,e){if(e){if(L5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Py(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=null;function Dw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ry=null,uc=null,dc=null;function J_(t){if(t=Ah(t)){if(typeof Ry!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Cg(e),Ry(t.stateNode,t.type,e))}}function MC(t){uc?dc?dc.push(t):dc=[t]:uc=t}function OC(){if(uc){var t=uc,e=dc;if(dc=uc=null,J_(t),e)for(t=0;t<e.length;t++)J_(e[t])}}function LC(t,e){return t(e)}function VC(){}var cx=!1;function FC(t,e,n){if(cx)return t(e,n);cx=!0;try{return LC(t,e,n)}finally{cx=!1,(uc!==null||dc!==null)&&(VC(),OC())}}function Rd(t,e){var n=t.stateNode;if(n===null)return null;var r=Cg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var Dy=!1;if(Mi)try{var $u={};Object.defineProperty($u,"passive",{get:function(){Dy=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{Dy=!1}function V5(t,e,n,r,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var gd=!1,Zm=null,Jm=!1,My=null,F5={onError:function(t){gd=!0,Zm=t}};function U5(t,e,n,r,i,a,o,l,c){gd=!1,Zm=null,V5.apply(F5,arguments)}function $5(t,e,n,r,i,a,o,l,c){if(U5.apply(this,arguments),gd){if(gd){var u=Zm;gd=!1,Zm=null}else throw Error(re(198));Jm||(Jm=!0,My=u)}}function xl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eN(t){if(xl(t)!==t)throw Error(re(188))}function z5(t){var e=t.alternate;if(!e){if(e=xl(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return eN(i),t;if(a===r)return eN(i),e;a=a.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function $C(t){return t=z5(t),t!==null?zC(t):null}function zC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zC(t);if(e!==null)return e;t=t.sibling}return null}var BC=Ur.unstable_scheduleCallback,tN=Ur.unstable_cancelCallback,B5=Ur.unstable_shouldYield,q5=Ur.unstable_requestPaint,sn=Ur.unstable_now,W5=Ur.unstable_getCurrentPriorityLevel,Mw=Ur.unstable_ImmediatePriority,qC=Ur.unstable_UserBlockingPriority,ep=Ur.unstable_NormalPriority,H5=Ur.unstable_LowPriority,WC=Ur.unstable_IdlePriority,_g=null,Hs=null;function G5(t){if(Hs&&typeof Hs.onCommitFiberRoot=="function")try{Hs.onCommitFiberRoot(_g,t,void 0,(t.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:Q5,K5=Math.log,Y5=Math.LN2;function Q5(t){return t>>>=0,t===0?32:31-(K5(t)/Y5|0)|0}var Uf=64,$f=4194304;function rd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=rd(l):(a&=o,a!==0&&(r=rd(a)))}else o=n&~i,o!==0?r=rd(o):a!==0&&(r=rd(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xs(e),i=1<<n,r|=t[n],e&=~i;return r}function X5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-xs(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=X5(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Oy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HC(){var t=Uf;return Uf<<=1,!(Uf&4194240)&&(Uf=64),t}function ux(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ih(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xs(e),t[e]=n}function J5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xs(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Ow(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var jt=0;function GC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KC,Lw,YC,QC,XC,Ly=!1,zf=[],Ia=null,Pa=null,Aa=null,Dd=new Map,Md=new Map,ga=[],e6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nN(t,e){switch(t){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Dd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Md.delete(e.pointerId)}}function zu(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ah(e),e!==null&&Lw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t6(t,e,n,r,i){switch(e){case"focusin":return Ia=zu(Ia,t,e,n,r,i),!0;case"dragenter":return Pa=zu(Pa,t,e,n,r,i),!0;case"mouseover":return Aa=zu(Aa,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dd.set(a,zu(Dd.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Md.set(a,zu(Md.get(a)||null,t,e,n,r,i)),!0}return!1}function ZC(t){var e=Ro(t.target);if(e!==null){var n=xl(e);if(n!==null){if(e=n.tag,e===13){if(e=UC(n),e!==null){t.blockedOn=e,XC(t.priority,function(){YC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ay=r,n.target.dispatchEvent(r),Ay=null}else return e=Ah(n),e!==null&&Lw(e),t.blockedOn=n,!1;e.shift()}return!0}function rN(t,e,n){jm(t)&&n.delete(e)}function n6(){Ly=!1,Ia!==null&&jm(Ia)&&(Ia=null),Pa!==null&&jm(Pa)&&(Pa=null),Aa!==null&&jm(Aa)&&(Aa=null),Dd.forEach(rN),Md.forEach(rN)}function Bu(t,e){t.blockedOn===e&&(t.blockedOn=null,Ly||(Ly=!0,Ur.unstable_scheduleCallback(Ur.unstable_NormalPriority,n6)))}function Od(t){function e(i){return Bu(i,t)}if(0<zf.length){Bu(zf[0],t);for(var n=1;n<zf.length;n++){var r=zf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ia!==null&&Bu(Ia,t),Pa!==null&&Bu(Pa,t),Aa!==null&&Bu(Aa,t),Dd.forEach(e),Md.forEach(e),n=0;n<ga.length;n++)r=ga[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)ZC(n),n.blockedOn===null&&ga.shift()}var hc=Zi.ReactCurrentBatchConfig,np=!0;function r6(t,e,n,r){var i=jt,a=hc.transition;hc.transition=null;try{jt=1,Vw(t,e,n,r)}finally{jt=i,hc.transition=a}}function s6(t,e,n,r){var i=jt,a=hc.transition;hc.transition=null;try{jt=4,Vw(t,e,n,r)}finally{jt=i,hc.transition=a}}function Vw(t,e,n,r){if(np){var i=Vy(t,e,n,r);if(i===null)wx(t,e,r,rp,n),nN(t,r);else if(t6(i,t,e,n,r))r.stopPropagation();else if(nN(t,r),e&4&&-1<e6.indexOf(t)){for(;i!==null;){var a=Ah(i);if(a!==null&&KC(a),a=Vy(t,e,n,r),a===null&&wx(t,e,r,rp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else wx(t,e,r,null,n)}}var rp=null;function Vy(t,e,n,r){if(rp=null,t=Dw(r),t=Ro(t),t!==null)if(e=xl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rp=t,null}function JC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W5()){case Mw:return 1;case qC:return 4;case ep:case H5:return 16;case WC:return 536870912;default:return 16}default:return 16}}var Ea=null,Fw=null,_m=null;function eT(){if(_m)return _m;var t,e=Fw,n=e.length,r,i="value"in Ea?Ea.value:Ea.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return _m=i.slice(t,1<r?1-r:void 0)}function Nm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bf(){return!0}function sN(){return!1}function Br(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Bf:sN,this.isPropagationStopped=sN,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),e}var au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uw=Br(au),Ph=Gt({},au,{view:0,detail:0}),i6=Br(Ph),dx,hx,qu,Ng=Gt({},Ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$w,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qu&&(qu&&t.type==="mousemove"?(dx=t.screenX-qu.screenX,hx=t.screenY-qu.screenY):hx=dx=0,qu=t),dx)},movementY:function(t){return"movementY"in t?t.movementY:hx}}),iN=Br(Ng),a6=Gt({},Ng,{dataTransfer:0}),o6=Br(a6),l6=Gt({},Ph,{relatedTarget:0}),fx=Br(l6),c6=Gt({},au,{animationName:0,elapsedTime:0,pseudoElement:0}),u6=Br(c6),d6=Gt({},au,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h6=Br(d6),f6=Gt({},au,{data:0}),aN=Br(f6),m6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g6[t])?!!e[t]:!1}function $w(){return v6}var x6=Gt({},Ph,{key:function(t){if(t.key){var e=m6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?p6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$w,charCode:function(t){return t.type==="keypress"?Nm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y6=Br(x6),w6=Gt({},Ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oN=Br(w6),b6=Gt({},Ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$w}),j6=Br(b6),_6=Gt({},au,{propertyName:0,elapsedTime:0,pseudoElement:0}),N6=Br(_6),E6=Gt({},Ng,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S6=Br(E6),C6=[9,13,27,32],zw=Mi&&"CompositionEvent"in window,vd=null;Mi&&"documentMode"in document&&(vd=document.documentMode);var T6=Mi&&"TextEvent"in window&&!vd,tT=Mi&&(!zw||vd&&8<vd&&11>=vd),lN=" ",cN=!1;function nT(t,e){switch(t){case"keyup":return C6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ql=!1;function k6(t,e){switch(t){case"compositionend":return rT(e);case"keypress":return e.which!==32?null:(cN=!0,lN);case"textInput":return t=e.data,t===lN&&cN?null:t;default:return null}}function I6(t,e){if(Ql)return t==="compositionend"||!zw&&nT(t,e)?(t=eT(),_m=Fw=Ea=null,Ql=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tT&&e.locale!=="ko"?null:e.data;default:return null}}var P6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P6[t.type]:e==="textarea"}function sT(t,e,n,r){MC(r),e=sp(e,"onChange"),0<e.length&&(n=new Uw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xd=null,Ld=null;function A6(t){pT(t,0)}function Eg(t){var e=Jl(t);if(TC(e))return t}function R6(t,e){if(t==="change")return e}var iT=!1;if(Mi){var mx;if(Mi){var px="oninput"in document;if(!px){var dN=document.createElement("div");dN.setAttribute("oninput","return;"),px=typeof dN.oninput=="function"}mx=px}else mx=!1;iT=mx&&(!document.documentMode||9<document.documentMode)}function hN(){xd&&(xd.detachEvent("onpropertychange",aT),Ld=xd=null)}function aT(t){if(t.propertyName==="value"&&Eg(Ld)){var e=[];sT(e,Ld,t,Dw(t)),FC(A6,e)}}function D6(t,e,n){t==="focusin"?(hN(),xd=e,Ld=n,xd.attachEvent("onpropertychange",aT)):t==="focusout"&&hN()}function M6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eg(Ld)}function O6(t,e){if(t==="click")return Eg(e)}function L6(t,e){if(t==="input"||t==="change")return Eg(e)}function V6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ns=typeof Object.is=="function"?Object.is:V6;function Vd(t,e){if(Ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wy.call(e,i)||!Ns(t[i],e[i]))return!1}return!0}function fN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mN(t,e){var n=fN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fN(n)}}function oT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lT(){for(var t=window,e=Xm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xm(t.document)}return e}function Bw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F6(t){var e=lT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oT(n.ownerDocument.documentElement,n)){if(r!==null&&Bw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=mN(n,a);var o=mN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var U6=Mi&&"documentMode"in document&&11>=document.documentMode,Xl=null,Fy=null,yd=null,Uy=!1;function pN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uy||Xl==null||Xl!==Xm(r)||(r=Xl,"selectionStart"in r&&Bw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yd&&Vd(yd,r)||(yd=r,r=sp(Fy,"onSelect"),0<r.length&&(e=new Uw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xl)))}function qf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zl={animationend:qf("Animation","AnimationEnd"),animationiteration:qf("Animation","AnimationIteration"),animationstart:qf("Animation","AnimationStart"),transitionend:qf("Transition","TransitionEnd")},gx={},cT={};Mi&&(cT=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Sg(t){if(gx[t])return gx[t];if(!Zl[t])return t;var e=Zl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cT)return gx[t]=e[n];return t}var uT=Sg("animationend"),dT=Sg("animationiteration"),hT=Sg("animationstart"),fT=Sg("transitionend"),mT=new Map,gN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(t,e){mT.set(t,e),vl(e,[t])}for(var vx=0;vx<gN.length;vx++){var xx=gN[vx],$6=xx.toLowerCase(),z6=xx[0].toUpperCase()+xx.slice(1);oo($6,"on"+z6)}oo(uT,"onAnimationEnd");oo(dT,"onAnimationIteration");oo(hT,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(fT,"onTransitionEnd");Tc("onMouseEnter",["mouseout","mouseover"]);Tc("onMouseLeave",["mouseout","mouseover"]);Tc("onPointerEnter",["pointerout","pointerover"]);Tc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B6=new Set("cancel close invalid load scroll toggle".split(" ").concat(sd));function vN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$5(r,e,void 0,t),t.currentTarget=null}function pT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;vN(i,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;vN(i,l,u),a=c}}}if(Jm)throw t=My,Jm=!1,My=null,t}function Mt(t,e){var n=e[Wy];n===void 0&&(n=e[Wy]=new Set);var r=t+"__bubble";n.has(r)||(gT(e,t,2,!1),n.add(r))}function yx(t,e,n){var r=0;e&&(r|=4),gT(n,t,r,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[Wf]){t[Wf]=!0,_C.forEach(function(n){n!=="selectionchange"&&(B6.has(n)||yx(n,!1,t),yx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,yx("selectionchange",!1,e))}}function gT(t,e,n,r){switch(JC(e)){case 1:var i=r6;break;case 4:i=s6;break;default:i=Vw}n=i.bind(null,e,n,t),i=void 0,!Dy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wx(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ro(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}FC(function(){var u=a,d=Dw(n),f=[];e:{var m=mT.get(t);if(m!==void 0){var v=Uw,x=t;switch(t){case"keypress":if(Nm(n)===0)break e;case"keydown":case"keyup":v=y6;break;case"focusin":x="focus",v=fx;break;case"focusout":x="blur",v=fx;break;case"beforeblur":case"afterblur":v=fx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=iN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=o6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=j6;break;case uT:case dT:case hT:v=u6;break;case fT:v=N6;break;case"scroll":v=i6;break;case"wheel":v=S6;break;case"copy":case"cut":case"paste":v=h6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=oN}var w=(e&4)!==0,j=!w&&t==="scroll",y=w?m!==null?m+"Capture":null:m;w=[];for(var g=u,b;g!==null;){b=g;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=Rd(g,y),E!=null&&w.push(Ud(g,E,b)))),j)break;g=g.return}0<w.length&&(m=new v(m,x,null,n,d),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Ay&&(x=n.relatedTarget||n.fromElement)&&(Ro(x)||x[Oi]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=u,x=x?Ro(x):null,x!==null&&(j=xl(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(w=iN,E="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=oN,E="onPointerLeave",y="onPointerEnter",g="pointer"),j=v==null?m:Jl(v),b=x==null?m:Jl(x),m=new w(E,g+"leave",v,n,d),m.target=j,m.relatedTarget=b,E=null,Ro(d)===u&&(w=new w(y,g+"enter",x,n,d),w.target=b,w.relatedTarget=j,E=w),j=E,v&&x)t:{for(w=v,y=x,g=0,b=w;b;b=Ol(b))g++;for(b=0,E=y;E;E=Ol(E))b++;for(;0<g-b;)w=Ol(w),g--;for(;0<b-g;)y=Ol(y),b--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=Ol(w),y=Ol(y)}w=null}else w=null;v!==null&&xN(f,m,v,w,!1),x!==null&&j!==null&&xN(f,j,x,w,!0)}}e:{if(m=u?Jl(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var S=R6;else if(uN(m))if(iT)S=L6;else{S=M6;var M=D6}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=O6);if(S&&(S=S(t,u))){sT(f,S,n,d);break e}M&&M(t,m,u),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Cy(m,"number",m.value)}switch(M=u?Jl(u):window,t){case"focusin":(uN(M)||M.contentEditable==="true")&&(Xl=M,Fy=u,yd=null);break;case"focusout":yd=Fy=Xl=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,pN(f,n,d);break;case"selectionchange":if(U6)break;case"keydown":case"keyup":pN(f,n,d)}var k;if(zw)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ql?nT(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(tT&&n.locale!=="ko"&&(Ql||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ql&&(k=eT()):(Ea=d,Fw="value"in Ea?Ea.value:Ea.textContent,Ql=!0)),M=sp(u,I),0<M.length&&(I=new aN(I,t,null,n,d),f.push({event:I,listeners:M}),k?I.data=k:(k=rT(n),k!==null&&(I.data=k)))),(k=T6?k6(t,n):I6(t,n))&&(u=sp(u,"onBeforeInput"),0<u.length&&(d=new aN("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}pT(f,e)})}function Ud(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Rd(t,n),a!=null&&r.unshift(Ud(t,a,i)),a=Rd(t,e),a!=null&&r.push(Ud(t,a,i))),t=t.return}return r}function Ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xN(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Rd(n,a),c!=null&&o.unshift(Ud(n,c,l))):i||(c=Rd(n,a),c!=null&&o.push(Ud(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var q6=/\r\n?/g,W6=/\u0000|\uFFFD/g;function yN(t){return(typeof t=="string"?t:""+t).replace(q6,`
`).replace(W6,"")}function Hf(t,e,n){if(e=yN(e),yN(t)!==e&&n)throw Error(re(425))}function ip(){}var $y=null,zy=null;function By(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qy=typeof setTimeout=="function"?setTimeout:void 0,H6=typeof clearTimeout=="function"?clearTimeout:void 0,wN=typeof Promise=="function"?Promise:void 0,G6=typeof queueMicrotask=="function"?queueMicrotask:typeof wN<"u"?function(t){return wN.resolve(null).then(t).catch(K6)}:qy;function K6(t){setTimeout(function(){throw t})}function bx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Od(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Od(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ou=Math.random().toString(36).slice(2),Vs="__reactFiber$"+ou,$d="__reactProps$"+ou,Oi="__reactContainer$"+ou,Wy="__reactEvents$"+ou,Y6="__reactListeners$"+ou,Q6="__reactHandles$"+ou;function Ro(t){var e=t[Vs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Oi]||n[Vs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bN(t);t!==null;){if(n=t[Vs])return n;t=bN(t)}return e}t=n,n=t.parentNode}return null}function Ah(t){return t=t[Vs]||t[Oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Cg(t){return t[$d]||null}var Hy=[],ec=-1;function lo(t){return{current:t}}function Vt(t){0>ec||(t.current=Hy[ec],Hy[ec]=null,ec--)}function Pt(t,e){ec++,Hy[ec]=t.current,t.current=e}var qa={},Qn=lo(qa),_r=lo(!1),Xo=qa;function kc(t,e){var n=t.type.contextTypes;if(!n)return qa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nr(t){return t=t.childContextTypes,t!=null}function ap(){Vt(_r),Vt(Qn)}function jN(t,e,n){if(Qn.current!==qa)throw Error(re(168));Pt(Qn,e),Pt(_r,n)}function vT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,D5(t)||"Unknown",i));return Gt({},n,r)}function op(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qa,Xo=Qn.current,Pt(Qn,t),Pt(_r,_r.current),!0}function _N(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=vT(t,e,Xo),r.__reactInternalMemoizedMergedChildContext=t,Vt(_r),Vt(Qn),Pt(Qn,t)):Vt(_r),Pt(_r,n)}var bi=null,Tg=!1,jx=!1;function xT(t){bi===null?bi=[t]:bi.push(t)}function X6(t){Tg=!0,xT(t)}function co(){if(!jx&&bi!==null){jx=!0;var t=0,e=jt;try{var n=bi;for(jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bi=null,Tg=!1}catch(i){throw bi!==null&&(bi=bi.slice(t+1)),BC(Mw,co),i}finally{jt=e,jx=!1}}return null}var tc=[],nc=0,lp=null,cp=0,Kr=[],Yr=0,Zo=null,_i=1,Ni="";function ko(t,e){tc[nc++]=cp,tc[nc++]=lp,lp=t,cp=e}function yT(t,e,n){Kr[Yr++]=_i,Kr[Yr++]=Ni,Kr[Yr++]=Zo,Zo=t;var r=_i;t=Ni;var i=32-xs(r)-1;r&=~(1<<i),n+=1;var a=32-xs(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_i=1<<32-xs(e)+i|n<<i|r,Ni=a+t}else _i=1<<a|n<<i|r,Ni=t}function qw(t){t.return!==null&&(ko(t,1),yT(t,1,0))}function Ww(t){for(;t===lp;)lp=tc[--nc],tc[nc]=null,cp=tc[--nc],tc[nc]=null;for(;t===Zo;)Zo=Kr[--Yr],Kr[Yr]=null,Ni=Kr[--Yr],Kr[Yr]=null,_i=Kr[--Yr],Kr[Yr]=null}var Or=null,Rr=null,Ut=!1,ms=null;function wT(t,e){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Or=t,Rr=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Or=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zo!==null?{id:_i,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Or=t,Rr=null,!0):!1;default:return!1}}function Gy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(Ut){var e=Rr;if(e){var n=e;if(!NN(t,e)){if(Gy(t))throw Error(re(418));e=Ra(n.nextSibling);var r=Or;e&&NN(t,e)?wT(r,n):(t.flags=t.flags&-4097|2,Ut=!1,Or=t)}}else{if(Gy(t))throw Error(re(418));t.flags=t.flags&-4097|2,Ut=!1,Or=t}}}function EN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Or=t}function Gf(t){if(t!==Or)return!1;if(!Ut)return EN(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!By(t.type,t.memoizedProps)),e&&(e=Rr)){if(Gy(t))throw bT(),Error(re(418));for(;e;)wT(t,e),e=Ra(e.nextSibling)}if(EN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=Ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Or?Ra(t.stateNode.nextSibling):null;return!0}function bT(){for(var t=Rr;t;)t=Ra(t.nextSibling)}function Ic(){Rr=Or=null,Ut=!1}function Hw(t){ms===null?ms=[t]:ms.push(t)}var Z6=Zi.ReactCurrentBatchConfig;function Wu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Kf(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function SN(t){var e=t._init;return e(t._payload)}function jT(t){function e(y,g){if(t){var b=y.deletions;b===null?(y.deletions=[g],y.flags|=16):b.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=La(y,g),y.index=0,y.sibling=null,y}function a(y,g,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<g?(y.flags|=2,g):b):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,b,E){return g===null||g.tag!==6?(g=kx(b,y.mode,E),g.return=y,g):(g=i(g,b),g.return=y,g)}function c(y,g,b,E){var S=b.type;return S===Yl?d(y,g,b.props.children,E,b.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ma&&SN(S)===g.type)?(E=i(g,b.props),E.ref=Wu(y,g,b),E.return=y,E):(E=Pm(b.type,b.key,b.props,null,y.mode,E),E.ref=Wu(y,g,b),E.return=y,E)}function u(y,g,b,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Ix(b,y.mode,E),g.return=y,g):(g=i(g,b.children||[]),g.return=y,g)}function d(y,g,b,E,S){return g===null||g.tag!==7?(g=Uo(b,y.mode,E,S),g.return=y,g):(g=i(g,b),g.return=y,g)}function f(y,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=kx(""+g,y.mode,b),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lf:return b=Pm(g.type,g.key,g.props,null,y.mode,b),b.ref=Wu(y,null,g),b.return=y,b;case Kl:return g=Ix(g,y.mode,b),g.return=y,g;case ma:var E=g._init;return f(y,E(g._payload),b)}if(nd(g)||Uu(g))return g=Uo(g,y.mode,b,null),g.return=y,g;Kf(y,g)}return null}function m(y,g,b,E){var S=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(y,g,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:return b.key===S?c(y,g,b,E):null;case Kl:return b.key===S?u(y,g,b,E):null;case ma:return S=b._init,m(y,g,S(b._payload),E)}if(nd(b)||Uu(b))return S!==null?null:d(y,g,b,E,null);Kf(y,b)}return null}function v(y,g,b,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,l(g,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lf:return y=y.get(E.key===null?b:E.key)||null,c(g,y,E,S);case Kl:return y=y.get(E.key===null?b:E.key)||null,u(g,y,E,S);case ma:var M=E._init;return v(y,g,b,M(E._payload),S)}if(nd(E)||Uu(E))return y=y.get(b)||null,d(g,y,E,S,null);Kf(g,E)}return null}function x(y,g,b,E){for(var S=null,M=null,k=g,I=g=0,A=null;k!==null&&I<b.length;I++){k.index>I?(A=k,k=null):A=k.sibling;var N=m(y,k,b[I],E);if(N===null){k===null&&(k=A);break}t&&k&&N.alternate===null&&e(y,k),g=a(N,g,I),M===null?S=N:M.sibling=N,M=N,k=A}if(I===b.length)return n(y,k),Ut&&ko(y,I),S;if(k===null){for(;I<b.length;I++)k=f(y,b[I],E),k!==null&&(g=a(k,g,I),M===null?S=k:M.sibling=k,M=k);return Ut&&ko(y,I),S}for(k=r(y,k);I<b.length;I++)A=v(k,y,I,b[I],E),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?I:A.key),g=a(A,g,I),M===null?S=A:M.sibling=A,M=A);return t&&k.forEach(function(P){return e(y,P)}),Ut&&ko(y,I),S}function w(y,g,b,E){var S=Uu(b);if(typeof S!="function")throw Error(re(150));if(b=S.call(b),b==null)throw Error(re(151));for(var M=S=null,k=g,I=g=0,A=null,N=b.next();k!==null&&!N.done;I++,N=b.next()){k.index>I?(A=k,k=null):A=k.sibling;var P=m(y,k,N.value,E);if(P===null){k===null&&(k=A);break}t&&k&&P.alternate===null&&e(y,k),g=a(P,g,I),M===null?S=P:M.sibling=P,M=P,k=A}if(N.done)return n(y,k),Ut&&ko(y,I),S;if(k===null){for(;!N.done;I++,N=b.next())N=f(y,N.value,E),N!==null&&(g=a(N,g,I),M===null?S=N:M.sibling=N,M=N);return Ut&&ko(y,I),S}for(k=r(y,k);!N.done;I++,N=b.next())N=v(k,y,I,N.value,E),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?I:N.key),g=a(N,g,I),M===null?S=N:M.sibling=N,M=N);return t&&k.forEach(function(R){return e(y,R)}),Ut&&ko(y,I),S}function j(y,g,b,E){if(typeof b=="object"&&b!==null&&b.type===Yl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:e:{for(var S=b.key,M=g;M!==null;){if(M.key===S){if(S=b.type,S===Yl){if(M.tag===7){n(y,M.sibling),g=i(M,b.props.children),g.return=y,y=g;break e}}else if(M.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ma&&SN(S)===M.type){n(y,M.sibling),g=i(M,b.props),g.ref=Wu(y,M,b),g.return=y,y=g;break e}n(y,M);break}else e(y,M);M=M.sibling}b.type===Yl?(g=Uo(b.props.children,y.mode,E,b.key),g.return=y,y=g):(E=Pm(b.type,b.key,b.props,null,y.mode,E),E.ref=Wu(y,g,b),E.return=y,y=E)}return o(y);case Kl:e:{for(M=b.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(y,g.sibling),g=i(g,b.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=Ix(b,y.mode,E),g.return=y,y=g}return o(y);case ma:return M=b._init,j(y,g,M(b._payload),E)}if(nd(b))return x(y,g,b,E);if(Uu(b))return w(y,g,b,E);Kf(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,b),g.return=y,y=g):(n(y,g),g=kx(b,y.mode,E),g.return=y,y=g),o(y)):n(y,g)}return j}var Pc=jT(!0),_T=jT(!1),up=lo(null),dp=null,rc=null,Gw=null;function Kw(){Gw=rc=dp=null}function Yw(t){var e=up.current;Vt(up),t._currentValue=e}function Yy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fc(t,e){dp=t,Gw=rc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(br=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(Gw!==t)if(t={context:t,memoizedValue:e,next:null},rc===null){if(dp===null)throw Error(re(308));rc=t,dp.dependencies={lanes:0,firstContext:t}}else rc=rc.next=t;return e}var Do=null;function Qw(t){Do===null?Do=[t]:Do.push(t)}function NT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qw(e)):(n.next=i.next,i.next=n),e.interleaved=n,Li(t,r)}function Li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pa=!1;function Xw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ET(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ct&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Li(t,n)}return i=r.interleaved,i===null?(e.next=e,Qw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Li(t,n)}function Em(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ow(t,n)}}function CN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hp(t,e,n,r){var i=t.updateQueue;pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,v=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,w=l;switch(m=e,v=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=Gt({},f,m);break e;case 2:pa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);el|=o,t.lanes=o,t.memoizedState=f}}function TN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var Rh={},Gs=lo(Rh),zd=lo(Rh),Bd=lo(Rh);function Mo(t){if(t===Rh)throw Error(re(174));return t}function Zw(t,e){switch(Pt(Bd,e),Pt(zd,t),Pt(Gs,Rh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ky(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ky(e,t)}Vt(Gs),Pt(Gs,e)}function Ac(){Vt(Gs),Vt(zd),Vt(Bd)}function ST(t){Mo(Bd.current);var e=Mo(Gs.current),n=ky(e,t.type);e!==n&&(Pt(zd,t),Pt(Gs,n))}function Jw(t){zd.current===t&&(Vt(Gs),Vt(zd))}var Bt=lo(0);function fp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _x=[];function e1(){for(var t=0;t<_x.length;t++)_x[t]._workInProgressVersionPrimary=null;_x.length=0}var Sm=Zi.ReactCurrentDispatcher,Nx=Zi.ReactCurrentBatchConfig,Jo=0,Ht=null,bn=null,Cn=null,mp=!1,wd=!1,qd=0,J6=0;function zn(){throw Error(re(321))}function t1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ns(t[n],e[n]))return!1;return!0}function n1(t,e,n,r,i,a){if(Jo=a,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sm.current=t===null||t.memoizedState===null?rL:sL,t=n(r,i),wd){a=0;do{if(wd=!1,qd=0,25<=a)throw Error(re(301));a+=1,Cn=bn=null,e.updateQueue=null,Sm.current=iL,t=n(r,i)}while(wd)}if(Sm.current=pp,e=bn!==null&&bn.next!==null,Jo=0,Cn=bn=Ht=null,mp=!1,e)throw Error(re(300));return t}function r1(){var t=qd!==0;return qd=0,t}function Ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Ht.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function ss(){if(bn===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Cn===null?Ht.memoizedState:Cn.next;if(e!==null)Cn=e,bn=t;else{if(t===null)throw Error(re(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Cn===null?Ht.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function Wd(t,e){return typeof e=="function"?e(t):e}function Ex(t){var e=ss(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=bn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Jo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Ht.lanes|=d,el|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Ns(r,e.memoizedState)||(br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Ht.lanes|=a,el|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sx(t){var e=ss(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ns(a,e.memoizedState)||(br=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function CT(){}function TT(t,e){var n=Ht,r=ss(),i=e(),a=!Ns(r.memoizedState,i);if(a&&(r.memoizedState=i,br=!0),r=r.queue,s1(PT.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Cn!==null&&Cn.memoizedState.tag&1){if(n.flags|=2048,Hd(9,IT.bind(null,n,r,i,e),void 0,null),Tn===null)throw Error(re(349));Jo&30||kT(n,e,i)}return i}function kT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IT(t,e,n,r){e.value=n,e.getSnapshot=r,AT(e)&&RT(t)}function PT(t,e,n){return n(function(){AT(e)&&RT(t)})}function AT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ns(t,n)}catch{return!0}}function RT(t){var e=Li(t,1);e!==null&&ys(e,t,1,-1)}function kN(t){var e=Ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wd,lastRenderedState:t},e.queue=t,t=t.dispatch=nL.bind(null,Ht,t),[e.memoizedState,t]}function Hd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DT(){return ss().memoizedState}function Cm(t,e,n,r){var i=Ds();Ht.flags|=t,i.memoizedState=Hd(1|e,n,void 0,r===void 0?null:r)}function kg(t,e,n,r){var i=ss();r=r===void 0?null:r;var a=void 0;if(bn!==null){var o=bn.memoizedState;if(a=o.destroy,r!==null&&t1(r,o.deps)){i.memoizedState=Hd(e,n,a,r);return}}Ht.flags|=t,i.memoizedState=Hd(1|e,n,a,r)}function IN(t,e){return Cm(8390656,8,t,e)}function s1(t,e){return kg(2048,8,t,e)}function MT(t,e){return kg(4,2,t,e)}function OT(t,e){return kg(4,4,t,e)}function LT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VT(t,e,n){return n=n!=null?n.concat([t]):null,kg(4,4,LT.bind(null,e,t),n)}function i1(){}function FT(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UT(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $T(t,e,n){return Jo&21?(Ns(n,e)||(n=HC(),Ht.lanes|=n,el|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=n)}function eL(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var r=Nx.transition;Nx.transition={};try{t(!1),e()}finally{jt=n,Nx.transition=r}}function zT(){return ss().memoizedState}function tL(t,e,n){var r=Oa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BT(t))qT(e,n);else if(n=NT(t,e,n,r),n!==null){var i=cr();ys(n,t,r,i),WT(n,e,r)}}function nL(t,e,n){var r=Oa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BT(t))qT(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ns(l,o)){var c=e.interleaved;c===null?(i.next=i,Qw(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=NT(t,e,i,r),n!==null&&(i=cr(),ys(n,t,r,i),WT(n,e,r))}}function BT(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function qT(t,e){wd=mp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ow(t,n)}}var pp={readContext:rs,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},rL={readContext:rs,useCallback:function(t,e){return Ds().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:IN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cm(4194308,4,LT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cm(4,2,t,e)},useMemo:function(t,e){var n=Ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tL.bind(null,Ht,t),[r.memoizedState,t]},useRef:function(t){var e=Ds();return t={current:t},e.memoizedState=t},useState:kN,useDebugValue:i1,useDeferredValue:function(t){return Ds().memoizedState=t},useTransition:function(){var t=kN(!1),e=t[0];return t=eL.bind(null,t[1]),Ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ht,i=Ds();if(Ut){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),Tn===null)throw Error(re(349));Jo&30||kT(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,IN(PT.bind(null,r,a,t),[t]),r.flags|=2048,Hd(9,IT.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ds(),e=Tn.identifierPrefix;if(Ut){var n=Ni,r=_i;n=(r&~(1<<32-xs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sL={readContext:rs,useCallback:FT,useContext:rs,useEffect:s1,useImperativeHandle:VT,useInsertionEffect:MT,useLayoutEffect:OT,useMemo:UT,useReducer:Ex,useRef:DT,useState:function(){return Ex(Wd)},useDebugValue:i1,useDeferredValue:function(t){var e=ss();return $T(e,bn.memoizedState,t)},useTransition:function(){var t=Ex(Wd)[0],e=ss().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:TT,useId:zT,unstable_isNewReconciler:!1},iL={readContext:rs,useCallback:FT,useContext:rs,useEffect:s1,useImperativeHandle:VT,useInsertionEffect:MT,useLayoutEffect:OT,useMemo:UT,useReducer:Sx,useRef:DT,useState:function(){return Sx(Wd)},useDebugValue:i1,useDeferredValue:function(t){var e=ss();return bn===null?e.memoizedState=t:$T(e,bn.memoizedState,t)},useTransition:function(){var t=Sx(Wd)[0],e=ss().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:TT,useId:zT,unstable_isNewReconciler:!1};function ds(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ig={isMounted:function(t){return(t=t._reactInternals)?xl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cr(),i=Oa(t),a=ki(r,i);a.payload=e,n!=null&&(a.callback=n),e=Da(t,a,i),e!==null&&(ys(e,t,i,r),Em(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cr(),i=Oa(t),a=ki(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Da(t,a,i),e!==null&&(ys(e,t,i,r),Em(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cr(),r=Oa(t),i=ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=Da(t,i,r),e!==null&&(ys(e,t,r,n),Em(e,t,r))}};function PN(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Vd(n,r)||!Vd(i,a):!0}function HT(t,e,n){var r=!1,i=qa,a=e.contextType;return typeof a=="object"&&a!==null?a=rs(a):(i=Nr(e)?Xo:Qn.current,r=e.contextTypes,a=(r=r!=null)?kc(t,i):qa),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ig,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function AN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ig.enqueueReplaceState(e,e.state,null)}function Xy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xw(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=rs(a):(a=Nr(e)?Xo:Qn.current,i.context=kc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Qy(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ig.enqueueReplaceState(i,i.state,null),hp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rc(t,e){try{var n="",r=e;do n+=R5(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Cx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aL=typeof WeakMap=="function"?WeakMap:Map;function GT(t,e,n){n=ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vp||(vp=!0,l0=r),Zy(t,e)},n}function KT(t,e,n){n=ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zy(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Zy(t,e),typeof r!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function RN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=wL.bind(null,t,e,n),e.then(t,t))}function DN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ki(-1,1),e.tag=2,Da(n,e,1))),n.lanes|=1),t)}var oL=Zi.ReactCurrentOwner,br=!1;function tr(t,e,n,r){e.child=t===null?_T(e,null,n,r):Pc(e,t.child,n,r)}function ON(t,e,n,r,i){n=n.render;var a=e.ref;return fc(e,i),r=n1(t,e,n,r,a,i),n=r1(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vi(t,e,i)):(Ut&&n&&qw(e),e.flags|=1,tr(t,e,r,i),e.child)}function LN(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!f1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,YT(t,e,a,r,i)):(t=Pm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Vd,n(o,r)&&t.ref===e.ref)return Vi(t,e,i)}return e.flags|=1,t=La(a,r),t.ref=e.ref,t.return=e,e.child=t}function YT(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Vd(a,r)&&t.ref===e.ref)if(br=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(br=!0);else return e.lanes=t.lanes,Vi(t,e,i)}return Jy(t,e,n,r,i)}function QT(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(ic,Pr),Pr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pt(ic,Pr),Pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Pt(ic,Pr),Pr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Pt(ic,Pr),Pr|=r;return tr(t,e,i,n),e.child}function XT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jy(t,e,n,r,i){var a=Nr(n)?Xo:Qn.current;return a=kc(e,a),fc(e,i),n=n1(t,e,n,r,a,i),r=r1(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vi(t,e,i)):(Ut&&r&&qw(e),e.flags|=1,tr(t,e,n,i),e.child)}function VN(t,e,n,r,i){if(Nr(n)){var a=!0;op(e)}else a=!1;if(fc(e,i),e.stateNode===null)Tm(t,e),HT(e,n,r),Xy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=rs(u):(u=Nr(n)?Xo:Qn.current,u=kc(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&AN(e,o,r,u),pa=!1;var m=e.memoizedState;o.state=m,hp(e,r,o,i),c=e.memoizedState,l!==r||m!==c||_r.current||pa?(typeof d=="function"&&(Qy(e,n,d,r),c=e.memoizedState),(l=pa||PN(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ET(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ds(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=rs(c):(c=Nr(n)?Xo:Qn.current,c=kc(e,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&AN(e,o,r,c),pa=!1,m=e.memoizedState,o.state=m,hp(e,r,o,i);var x=e.memoizedState;l!==f||m!==x||_r.current||pa?(typeof v=="function"&&(Qy(e,n,v,r),x=e.memoizedState),(u=pa||PN(e,n,u,r,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return e0(t,e,n,r,a,i)}function e0(t,e,n,r,i,a){XT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_N(e,n,!1),Vi(t,e,a);r=e.stateNode,oL.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pc(e,t.child,null,a),e.child=Pc(e,null,l,a)):tr(t,e,l,a),e.memoizedState=r.state,i&&_N(e,n,!0),e.child}function ZT(t){var e=t.stateNode;e.pendingContext?jN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jN(t,e.context,!1),Zw(t,e.containerInfo)}function FN(t,e,n,r,i){return Ic(),Hw(i),e.flags|=256,tr(t,e,n,r),e.child}var t0={dehydrated:null,treeContext:null,retryLane:0};function n0(t){return{baseLanes:t,cachePool:null,transitions:null}}function JT(t,e,n){var r=e.pendingProps,i=Bt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pt(Bt,i&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Rg(o,r,0,null),t=Uo(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=n0(n),e.memoizedState=t0,t):a1(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lL(t,e,o,r,l,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=La(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=La(l,a):(a=Uo(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?n0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=t0,r}return a=t.child,t=a.sibling,r=La(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function a1(t,e){return e=Rg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yf(t,e,n,r){return r!==null&&Hw(r),Pc(e,t.child,null,n),t=a1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lL(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Cx(Error(re(422))),Yf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Rg({mode:"visible",children:r.children},i,0,null),a=Uo(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Pc(e,t.child,null,o),e.child.memoizedState=n0(o),e.memoizedState=t0,a);if(!(e.mode&1))return Yf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(re(419)),r=Cx(a,r,void 0),Yf(t,e,o,r)}if(l=(o&t.childLanes)!==0,br||l){if(r=Tn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Li(t,i),ys(r,t,i,-1))}return h1(),r=Cx(Error(re(421))),Yf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bL.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Rr=Ra(i.nextSibling),Or=e,Ut=!0,ms=null,t!==null&&(Kr[Yr++]=_i,Kr[Yr++]=Ni,Kr[Yr++]=Zo,_i=t.id,Ni=t.overflow,Zo=e),e=a1(e,r.children),e.flags|=4096,e)}function UN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yy(t.return,e,n)}function Tx(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ek(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(tr(t,e,r.children,n),r=Bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&UN(t,n,e);else if(t.tag===19)UN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pt(Bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tx(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tx(e,!0,n,null,a);break;case"together":Tx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),el|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=La(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=La(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cL(t,e,n){switch(e.tag){case 3:ZT(e),Ic();break;case 5:ST(e);break;case 1:Nr(e.type)&&op(e);break;case 4:Zw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pt(up,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pt(Bt,Bt.current&1),e.flags|=128,null):n&e.child.childLanes?JT(t,e,n):(Pt(Bt,Bt.current&1),t=Vi(t,e,n),t!==null?t.sibling:null);Pt(Bt,Bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ek(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pt(Bt,Bt.current),r)break;return null;case 22:case 23:return e.lanes=0,QT(t,e,n)}return Vi(t,e,n)}var tk,r0,nk,rk;tk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};r0=function(){};nk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mo(Gs.current);var a=null;switch(n){case"input":i=Ey(t,i),r=Ey(t,r),a=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),a=[];break;case"textarea":i=Ty(t,i),r=Ty(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ip)}Iy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pd.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Mt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};rk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hu(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uL(t,e,n){var r=e.pendingProps;switch(Ww(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(e),null;case 1:return Nr(e.type)&&ap(),Bn(e),null;case 3:return r=e.stateNode,Ac(),Vt(_r),Vt(Qn),e1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ms!==null&&(d0(ms),ms=null))),r0(t,e),Bn(e),null;case 5:Jw(e);var i=Mo(Bd.current);if(n=e.type,t!==null&&e.stateNode!=null)nk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Bn(e),null}if(t=Mo(Gs.current),Gf(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Vs]=e,r[$d]=a,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(i=0;i<sd.length;i++)Mt(sd[i],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":Y_(r,a),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mt("invalid",r);break;case"textarea":X_(r,a),Mt("invalid",r)}Iy(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Hf(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Hf(r.textContent,l,t),i=["children",""+l]):Pd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Vf(r),Q_(r,a,!0);break;case"textarea":Vf(r),Z_(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ip)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vs]=e,t[$d]=r,tk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Py(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),i=r;break;case"iframe":case"object":case"embed":Mt("load",t),i=r;break;case"video":case"audio":for(i=0;i<sd.length;i++)Mt(sd[i],t);i=r;break;case"source":Mt("error",t),i=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),i=r;break;case"details":Mt("toggle",t),i=r;break;case"input":Y_(t,r),i=Ey(t,r),Mt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":X_(t,r),i=Ty(t,r),Mt("invalid",t);break;default:i=r}Iy(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?DC(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AC(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ad(t,c):typeof c=="number"&&Ad(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Pd.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Mt("scroll",t):c!=null&&Iw(t,a,c,o))}switch(n){case"input":Vf(t),Q_(t,r,!1);break;case"textarea":Vf(t),Z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ba(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?cc(t,!!r.multiple,a,!1):r.defaultValue!=null&&cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ip)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bn(e),null;case 6:if(t&&e.stateNode!=null)rk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=Mo(Bd.current),Mo(Gs.current),Gf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vs]=e,(a=r.nodeValue!==n)&&(t=Or,t!==null))switch(t.tag){case 3:Hf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hf(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vs]=e,e.stateNode=r}return Bn(e),null;case 13:if(Vt(Bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&Rr!==null&&e.mode&1&&!(e.flags&128))bT(),Ic(),e.flags|=98560,a=!1;else if(a=Gf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(re(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(re(317));a[Vs]=e}else Ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bn(e),a=!1}else ms!==null&&(d0(ms),ms=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?jn===0&&(jn=3):h1())),e.updateQueue!==null&&(e.flags|=4),Bn(e),null);case 4:return Ac(),r0(t,e),t===null&&Fd(e.stateNode.containerInfo),Bn(e),null;case 10:return Yw(e.type._context),Bn(e),null;case 17:return Nr(e.type)&&ap(),Bn(e),null;case 19:if(Vt(Bt),a=e.memoizedState,a===null)return Bn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Hu(a,!1);else{if(jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fp(t),o!==null){for(e.flags|=128,Hu(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pt(Bt,Bt.current&1|2),e.child}t=t.sibling}a.tail!==null&&sn()>Dc&&(e.flags|=128,r=!0,Hu(a,!1),e.lanes=4194304)}else{if(!r)if(t=fp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ut)return Bn(e),null}else 2*sn()-a.renderingStartTime>Dc&&n!==1073741824&&(e.flags|=128,r=!0,Hu(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=sn(),e.sibling=null,n=Bt.current,Pt(Bt,r?n&1|2:n&1),e):(Bn(e),null);case 22:case 23:return d1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pr&1073741824&&(Bn(e),e.subtreeFlags&6&&(e.flags|=8192)):Bn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function dL(t,e){switch(Ww(e),e.tag){case 1:return Nr(e.type)&&ap(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ac(),Vt(_r),Vt(Qn),e1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jw(e),null;case 13:if(Vt(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Ic()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Bt),null;case 4:return Ac(),null;case 10:return Yw(e.type._context),null;case 22:case 23:return d1(),null;case 24:return null;default:return null}}var Qf=!1,Hn=!1,hL=typeof WeakSet=="function"?WeakSet:Set,be=null;function sc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Zt(t,e,r)}else n.current=null}function s0(t,e,n){try{n()}catch(r){Zt(t,e,r)}}var $N=!1;function fL(t,e){if($y=np,t=lT(),Bw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++u===i&&(l=o),m===a&&++d===r&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zy={focusedElem:t,selectionRange:n},np=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,j=x.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:ds(e.type,w),j);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(E){Zt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return x=$N,$N=!1,x}function bd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&s0(e,n,a)}i=i.next}while(i!==r)}}function Pg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function i0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sk(t){var e=t.alternate;e!==null&&(t.alternate=null,sk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[$d],delete e[Wy],delete e[Y6],delete e[Q6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ik(t){return t.tag===5||t.tag===3||t.tag===4}function zN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ik(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function a0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ip));else if(r!==4&&(t=t.child,t!==null))for(a0(t,e,n),t=t.sibling;t!==null;)a0(t,e,n),t=t.sibling}function o0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(o0(t,e,n),t=t.sibling;t!==null;)o0(t,e,n),t=t.sibling}var In=null,hs=!1;function la(t,e,n){for(n=n.child;n!==null;)ak(t,e,n),n=n.sibling}function ak(t,e,n){if(Hs&&typeof Hs.onCommitFiberUnmount=="function")try{Hs.onCommitFiberUnmount(_g,n)}catch{}switch(n.tag){case 5:Hn||sc(n,e);case 6:var r=In,i=hs;In=null,la(t,e,n),In=r,hs=i,In!==null&&(hs?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(hs?(t=In,n=n.stateNode,t.nodeType===8?bx(t.parentNode,n):t.nodeType===1&&bx(t,n),Od(t)):bx(In,n.stateNode));break;case 4:r=In,i=hs,In=n.stateNode.containerInfo,hs=!0,la(t,e,n),In=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&s0(n,e,o),i=i.next}while(i!==r)}la(t,e,n);break;case 1:if(!Hn&&(sc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Zt(n,e,l)}la(t,e,n);break;case 21:la(t,e,n);break;case 22:n.mode&1?(Hn=(r=Hn)||n.memoizedState!==null,la(t,e,n),Hn=r):la(t,e,n);break;default:la(t,e,n)}}function BN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hL),e.forEach(function(r){var i=jL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:In=l.stateNode,hs=!1;break e;case 3:In=l.stateNode.containerInfo,hs=!0;break e;case 4:In=l.stateNode.containerInfo,hs=!0;break e}l=l.return}if(In===null)throw Error(re(160));ak(a,o,i),In=null,hs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Zt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ok(e,t),e=e.sibling}function ok(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Rs(t),r&4){try{bd(3,t,t.return),Pg(3,t)}catch(w){Zt(t,t.return,w)}try{bd(5,t,t.return)}catch(w){Zt(t,t.return,w)}}break;case 1:ls(e,t),Rs(t),r&512&&n!==null&&sc(n,n.return);break;case 5:if(ls(e,t),Rs(t),r&512&&n!==null&&sc(n,n.return),t.flags&32){var i=t.stateNode;try{Ad(i,"")}catch(w){Zt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&kC(i,a),Py(l,o);var u=Py(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?DC(i,f):d==="dangerouslySetInnerHTML"?AC(i,f):d==="children"?Ad(i,f):Iw(i,d,f,u)}switch(l){case"input":Sy(i,a);break;case"textarea":IC(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?cc(i,!!a.multiple,v,!1):m!==!!a.multiple&&(a.defaultValue!=null?cc(i,!!a.multiple,a.defaultValue,!0):cc(i,!!a.multiple,a.multiple?[]:"",!1))}i[$d]=a}catch(w){Zt(t,t.return,w)}}break;case 6:if(ls(e,t),Rs(t),r&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(w){Zt(t,t.return,w)}}break;case 3:if(ls(e,t),Rs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Od(e.containerInfo)}catch(w){Zt(t,t.return,w)}break;case 4:ls(e,t),Rs(t);break;case 13:ls(e,t),Rs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(c1=sn())),r&4&&BN(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(u=Hn)||d,ls(e,t),Hn=u):ls(e,t),Rs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(m=be,v=m.child,m.tag){case 0:case 11:case 14:case 15:bd(4,m,m.return);break;case 1:sc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){Zt(r,n,w)}}break;case 5:sc(m,m.return);break;case 22:if(m.memoizedState!==null){WN(f);continue}}v!==null?(v.return=m,be=v):WN(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=RC("display",o))}catch(w){Zt(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Zt(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ls(e,t),Rs(t),r&4&&BN(t);break;case 21:break;default:ls(e,t),Rs(t)}}function Rs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ik(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ad(i,""),r.flags&=-33);var a=zN(t);o0(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zN(t);a0(t,l,o);break;default:throw Error(re(161))}}catch(c){Zt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mL(t,e,n){be=t,lk(t)}function lk(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var i=be,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qf;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Hn;l=Qf;var u=Hn;if(Qf=o,(Hn=c)&&!u)for(be=i;be!==null;)o=be,c=o.child,o.tag===22&&o.memoizedState!==null?HN(i):c!==null?(c.return=o,be=c):HN(i);for(;a!==null;)be=a,lk(a),a=a.sibling;be=i,Qf=l,Hn=u}qN(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,be=a):qN(t)}}function qN(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||Pg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ds(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&TN(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TN(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Od(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Hn||e.flags&512&&i0(e)}catch(m){Zt(e,e.return,m)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function WN(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function HN(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pg(4,e)}catch(c){Zt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Zt(e,i,c)}}var a=e.return;try{i0(e)}catch(c){Zt(e,a,c)}break;case 5:var o=e.return;try{i0(e)}catch(c){Zt(e,o,c)}}}catch(c){Zt(e,e.return,c)}if(e===t){be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,be=l;break}be=e.return}}var pL=Math.ceil,gp=Zi.ReactCurrentDispatcher,o1=Zi.ReactCurrentOwner,Jr=Zi.ReactCurrentBatchConfig,ct=0,Tn=null,un=null,Dn=0,Pr=0,ic=lo(0),jn=0,Gd=null,el=0,Ag=0,l1=0,jd=null,xr=null,c1=0,Dc=1/0,wi=null,vp=!1,l0=null,Ma=null,Xf=!1,Sa=null,xp=0,_d=0,c0=null,km=-1,Im=0;function cr(){return ct&6?sn():km!==-1?km:km=sn()}function Oa(t){return t.mode&1?ct&2&&Dn!==0?Dn&-Dn:Z6.transition!==null?(Im===0&&(Im=HC()),Im):(t=jt,t!==0||(t=window.event,t=t===void 0?16:JC(t.type)),t):1}function ys(t,e,n,r){if(50<_d)throw _d=0,c0=null,Error(re(185));Ih(t,n,r),(!(ct&2)||t!==Tn)&&(t===Tn&&(!(ct&2)&&(Ag|=n),jn===4&&va(t,Dn)),Er(t,r),n===1&&ct===0&&!(e.mode&1)&&(Dc=sn()+500,Tg&&co()))}function Er(t,e){var n=t.callbackNode;Z5(t,e);var r=tp(t,t===Tn?Dn:0);if(r===0)n!==null&&tN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tN(n),e===1)t.tag===0?X6(GN.bind(null,t)):xT(GN.bind(null,t)),G6(function(){!(ct&6)&&co()}),n=null;else{switch(GC(r)){case 1:n=Mw;break;case 4:n=qC;break;case 16:n=ep;break;case 536870912:n=WC;break;default:n=ep}n=gk(n,ck.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ck(t,e){if(km=-1,Im=0,ct&6)throw Error(re(327));var n=t.callbackNode;if(mc()&&t.callbackNode!==n)return null;var r=tp(t,t===Tn?Dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yp(t,r);else{e=r;var i=ct;ct|=2;var a=dk();(Tn!==t||Dn!==e)&&(wi=null,Dc=sn()+500,Fo(t,e));do try{xL();break}catch(l){uk(t,l)}while(!0);Kw(),gp.current=a,ct=i,un!==null?e=0:(Tn=null,Dn=0,e=jn)}if(e!==0){if(e===2&&(i=Oy(t),i!==0&&(r=i,e=u0(t,i))),e===1)throw n=Gd,Fo(t,0),va(t,r),Er(t,sn()),n;if(e===6)va(t,r);else{if(i=t.current.alternate,!(r&30)&&!gL(i)&&(e=yp(t,r),e===2&&(a=Oy(t),a!==0&&(r=a,e=u0(t,a))),e===1))throw n=Gd,Fo(t,0),va(t,r),Er(t,sn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Io(t,xr,wi);break;case 3:if(va(t,r),(r&130023424)===r&&(e=c1+500-sn(),10<e)){if(tp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qy(Io.bind(null,t,xr,wi),e);break}Io(t,xr,wi);break;case 4:if(va(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xs(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pL(r/1960))-r,10<r){t.timeoutHandle=qy(Io.bind(null,t,xr,wi),r);break}Io(t,xr,wi);break;case 5:Io(t,xr,wi);break;default:throw Error(re(329))}}}return Er(t,sn()),t.callbackNode===n?ck.bind(null,t):null}function u0(t,e){var n=jd;return t.current.memoizedState.isDehydrated&&(Fo(t,e).flags|=256),t=yp(t,e),t!==2&&(e=xr,xr=n,e!==null&&d0(e)),t}function d0(t){xr===null?xr=t:xr.push.apply(xr,t)}function gL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ns(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function va(t,e){for(e&=~l1,e&=~Ag,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xs(e),r=1<<n;t[n]=-1,e&=~r}}function GN(t){if(ct&6)throw Error(re(327));mc();var e=tp(t,0);if(!(e&1))return Er(t,sn()),null;var n=yp(t,e);if(t.tag!==0&&n===2){var r=Oy(t);r!==0&&(e=r,n=u0(t,r))}if(n===1)throw n=Gd,Fo(t,0),va(t,e),Er(t,sn()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Io(t,xr,wi),Er(t,sn()),null}function u1(t,e){var n=ct;ct|=1;try{return t(e)}finally{ct=n,ct===0&&(Dc=sn()+500,Tg&&co())}}function tl(t){Sa!==null&&Sa.tag===0&&!(ct&6)&&mc();var e=ct;ct|=1;var n=Jr.transition,r=jt;try{if(Jr.transition=null,jt=1,t)return t()}finally{jt=r,Jr.transition=n,ct=e,!(ct&6)&&co()}}function d1(){Pr=ic.current,Vt(ic)}function Fo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H6(n)),un!==null)for(n=un.return;n!==null;){var r=n;switch(Ww(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ap();break;case 3:Ac(),Vt(_r),Vt(Qn),e1();break;case 5:Jw(r);break;case 4:Ac();break;case 13:Vt(Bt);break;case 19:Vt(Bt);break;case 10:Yw(r.type._context);break;case 22:case 23:d1()}n=n.return}if(Tn=t,un=t=La(t.current,null),Dn=Pr=e,jn=0,Gd=null,l1=Ag=el=0,xr=jd=null,Do!==null){for(e=0;e<Do.length;e++)if(n=Do[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Do=null}return t}function uk(t,e){do{var n=un;try{if(Kw(),Sm.current=pp,mp){for(var r=Ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mp=!1}if(Jo=0,Cn=bn=Ht=null,wd=!1,qd=0,o1.current=null,n===null||n.return===null){jn=1,Gd=e,un=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Dn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=DN(o);if(v!==null){v.flags&=-257,MN(v,o,l,a,e),v.mode&1&&RN(a,u,e),e=v,c=u;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){RN(a,u,e),h1();break e}c=Error(re(426))}}else if(Ut&&l.mode&1){var j=DN(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),MN(j,o,l,a,e),Hw(Rc(c,l));break e}}a=c=Rc(c,l),jn!==4&&(jn=2),jd===null?jd=[a]:jd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=GT(a,c,e);CN(a,y);break e;case 1:l=c;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ma===null||!Ma.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=KT(a,l,e);CN(a,E);break e}}a=a.return}while(a!==null)}fk(n)}catch(S){e=S,un===n&&n!==null&&(un=n=n.return);continue}break}while(!0)}function dk(){var t=gp.current;return gp.current=pp,t===null?pp:t}function h1(){(jn===0||jn===3||jn===2)&&(jn=4),Tn===null||!(el&268435455)&&!(Ag&268435455)||va(Tn,Dn)}function yp(t,e){var n=ct;ct|=2;var r=dk();(Tn!==t||Dn!==e)&&(wi=null,Fo(t,e));do try{vL();break}catch(i){uk(t,i)}while(!0);if(Kw(),ct=n,gp.current=r,un!==null)throw Error(re(261));return Tn=null,Dn=0,jn}function vL(){for(;un!==null;)hk(un)}function xL(){for(;un!==null&&!B5();)hk(un)}function hk(t){var e=pk(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,e===null?fk(t):un=e,o1.current=null}function fk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dL(n,e),n!==null){n.flags&=32767,un=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jn=6,un=null;return}}else if(n=uL(n,e,Pr),n!==null){un=n;return}if(e=e.sibling,e!==null){un=e;return}un=e=t}while(e!==null);jn===0&&(jn=5)}function Io(t,e,n){var r=jt,i=Jr.transition;try{Jr.transition=null,jt=1,yL(t,e,n,r)}finally{Jr.transition=i,jt=r}return null}function yL(t,e,n,r){do mc();while(Sa!==null);if(ct&6)throw Error(re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(J5(t,a),t===Tn&&(un=Tn=null,Dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xf||(Xf=!0,gk(ep,function(){return mc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Jr.transition,Jr.transition=null;var o=jt;jt=1;var l=ct;ct|=4,o1.current=null,fL(t,n),ok(n,t),F6(zy),np=!!$y,zy=$y=null,t.current=n,mL(n),q5(),ct=l,jt=o,Jr.transition=a}else t.current=n;if(Xf&&(Xf=!1,Sa=t,xp=i),a=t.pendingLanes,a===0&&(Ma=null),G5(n.stateNode),Er(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vp)throw vp=!1,t=l0,l0=null,t;return xp&1&&t.tag!==0&&mc(),a=t.pendingLanes,a&1?t===c0?_d++:(_d=0,c0=t):_d=0,co(),null}function mc(){if(Sa!==null){var t=GC(xp),e=Jr.transition,n=jt;try{if(Jr.transition=null,jt=16>t?16:t,Sa===null)var r=!1;else{if(t=Sa,Sa=null,xp=0,ct&6)throw Error(re(331));var i=ct;for(ct|=4,be=t.current;be!==null;){var a=be,o=a.child;if(be.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:bd(8,d,a)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var m=d.sibling,v=d.return;if(sk(d),d===u){be=null;break}if(m!==null){m.return=v,be=m;break}be=v}}}var x=a.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}be=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,be=o;else e:for(;be!==null;){if(a=be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:bd(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,be=y;break e}be=a.return}}var g=t.current;for(be=g;be!==null;){o=be;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,be=b;else e:for(o=g;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pg(9,l)}}catch(S){Zt(l,l.return,S)}if(l===o){be=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,be=E;break e}be=l.return}}if(ct=i,co(),Hs&&typeof Hs.onPostCommitFiberRoot=="function")try{Hs.onPostCommitFiberRoot(_g,t)}catch{}r=!0}return r}finally{jt=n,Jr.transition=e}}return!1}function KN(t,e,n){e=Rc(n,e),e=GT(t,e,1),t=Da(t,e,1),e=cr(),t!==null&&(Ih(t,1,e),Er(t,e))}function Zt(t,e,n){if(t.tag===3)KN(t,t,n);else for(;e!==null;){if(e.tag===3){KN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ma===null||!Ma.has(r))){t=Rc(n,t),t=KT(e,t,1),e=Da(e,t,1),t=cr(),e!==null&&(Ih(e,1,t),Er(e,t));break}}e=e.return}}function wL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Dn&n)===n&&(jn===4||jn===3&&(Dn&130023424)===Dn&&500>sn()-c1?Fo(t,0):l1|=n),Er(t,e)}function mk(t,e){e===0&&(t.mode&1?(e=$f,$f<<=1,!($f&130023424)&&($f=4194304)):e=1);var n=cr();t=Li(t,e),t!==null&&(Ih(t,e,n),Er(t,n))}function bL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mk(t,n)}function jL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),mk(t,n)}var pk;pk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_r.current)br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return br=!1,cL(t,e,n);br=!!(t.flags&131072)}else br=!1,Ut&&e.flags&1048576&&yT(e,cp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tm(t,e),t=e.pendingProps;var i=kc(e,Qn.current);fc(e,n),i=n1(null,e,r,t,i,n);var a=r1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nr(r)?(a=!0,op(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xw(e),i.updater=Ig,e.stateNode=i,i._reactInternals=e,Xy(e,r,t,n),e=e0(null,e,r,!0,a,n)):(e.tag=0,Ut&&a&&qw(e),tr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=NL(r),t=ds(r,t),i){case 0:e=Jy(null,e,r,t,n);break e;case 1:e=VN(null,e,r,t,n);break e;case 11:e=ON(null,e,r,t,n);break e;case 14:e=LN(null,e,r,ds(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ds(r,i),Jy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ds(r,i),VN(t,e,r,i,n);case 3:e:{if(ZT(e),t===null)throw Error(re(387));r=e.pendingProps,a=e.memoizedState,i=a.element,ET(t,e),hp(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Rc(Error(re(423)),e),e=FN(t,e,r,n,i);break e}else if(r!==i){i=Rc(Error(re(424)),e),e=FN(t,e,r,n,i);break e}else for(Rr=Ra(e.stateNode.containerInfo.firstChild),Or=e,Ut=!0,ms=null,n=_T(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ic(),r===i){e=Vi(t,e,n);break e}tr(t,e,r,n)}e=e.child}return e;case 5:return ST(e),t===null&&Ky(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,By(r,i)?o=null:a!==null&&By(r,a)&&(e.flags|=32),XT(t,e),tr(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return JT(t,e,n);case 4:return Zw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pc(e,null,r,n):tr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ds(r,i),ON(t,e,r,i,n);case 7:return tr(t,e,e.pendingProps,n),e.child;case 8:return tr(t,e,e.pendingProps.children,n),e.child;case 12:return tr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Pt(up,r._currentValue),r._currentValue=o,a!==null)if(Ns(a.value,o)){if(a.children===i.children&&!_r.current){e=Vi(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=ki(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Yy(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(re(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yy(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fc(e,n),i=rs(i),r=r(i),e.flags|=1,tr(t,e,r,n),e.child;case 14:return r=e.type,i=ds(r,e.pendingProps),i=ds(r.type,i),LN(t,e,r,i,n);case 15:return YT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ds(r,i),Tm(t,e),e.tag=1,Nr(r)?(t=!0,op(e)):t=!1,fc(e,n),HT(e,r,i),Xy(e,r,i,n),e0(null,e,r,!0,t,n);case 19:return ek(t,e,n);case 22:return QT(t,e,n)}throw Error(re(156,e.tag))};function gk(t,e){return BC(t,e)}function _L(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(t,e,n,r){return new _L(t,e,n,r)}function f1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NL(t){if(typeof t=="function")return f1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Aw)return 11;if(t===Rw)return 14}return 2}function La(t,e){var n=t.alternate;return n===null?(n=Xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pm(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")f1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yl:return Uo(n.children,i,a,e);case Pw:o=8,i|=8;break;case by:return t=Xr(12,n,e,i|2),t.elementType=by,t.lanes=a,t;case jy:return t=Xr(13,n,e,i),t.elementType=jy,t.lanes=a,t;case _y:return t=Xr(19,n,e,i),t.elementType=_y,t.lanes=a,t;case SC:return Rg(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NC:o=10;break e;case EC:o=9;break e;case Aw:o=11;break e;case Rw:o=14;break e;case ma:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Xr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Uo(t,e,n,r){return t=Xr(7,t,r,e),t.lanes=n,t}function Rg(t,e,n,r){return t=Xr(22,t,r,e),t.elementType=SC,t.lanes=n,t.stateNode={isHidden:!1},t}function kx(t,e,n){return t=Xr(6,t,null,e),t.lanes=n,t}function Ix(t,e,n){return e=Xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function m1(t,e,n,r,i,a,o,l,c){return t=new EL(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Xr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xw(a),t}function SL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vk(t){if(!t)return qa;t=t._reactInternals;e:{if(xl(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Nr(n))return vT(t,n,e)}return e}function xk(t,e,n,r,i,a,o,l,c){return t=m1(n,r,!0,t,i,a,o,l,c),t.context=vk(null),n=t.current,r=cr(),i=Oa(n),a=ki(r,i),a.callback=e??null,Da(n,a,i),t.current.lanes=i,Ih(t,i,r),Er(t,r),t}function Dg(t,e,n,r){var i=e.current,a=cr(),o=Oa(i);return n=vk(n),e.context===null?e.context=n:e.pendingContext=n,e=ki(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Da(i,e,o),t!==null&&(ys(t,i,o,a),Em(t,i,o)),o}function wp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function p1(t,e){YN(t,e),(t=t.alternate)&&YN(t,e)}function CL(){return null}var yk=typeof reportError=="function"?reportError:function(t){console.error(t)};function g1(t){this._internalRoot=t}Mg.prototype.render=g1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Dg(t,e,null,null)};Mg.prototype.unmount=g1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tl(function(){Dg(null,t,null,null)}),e[Oi]=null}};function Mg(t){this._internalRoot=t}Mg.prototype.unstable_scheduleHydration=function(t){if(t){var e=QC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ga.length&&e!==0&&e<ga[n].priority;n++);ga.splice(n,0,t),n===0&&ZC(t)}};function v1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QN(){}function TL(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=wp(o);a.call(u)}}var o=xk(e,r,t,0,null,!1,!1,"",QN);return t._reactRootContainer=o,t[Oi]=o.current,Fd(t.nodeType===8?t.parentNode:t),tl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=wp(c);l.call(u)}}var c=m1(t,0,!1,null,null,!1,!1,"",QN);return t._reactRootContainer=c,t[Oi]=c.current,Fd(t.nodeType===8?t.parentNode:t),tl(function(){Dg(e,c,n,r)}),c}function Lg(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=wp(o);l.call(c)}}Dg(e,o,t,i)}else o=TL(n,e,t,i,r);return wp(o)}KC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rd(e.pendingLanes);n!==0&&(Ow(e,n|1),Er(e,sn()),!(ct&6)&&(Dc=sn()+500,co()))}break;case 13:tl(function(){var r=Li(t,1);if(r!==null){var i=cr();ys(r,t,1,i)}}),p1(t,1)}};Lw=function(t){if(t.tag===13){var e=Li(t,134217728);if(e!==null){var n=cr();ys(e,t,134217728,n)}p1(t,134217728)}};YC=function(t){if(t.tag===13){var e=Oa(t),n=Li(t,e);if(n!==null){var r=cr();ys(n,t,e,r)}p1(t,e)}};QC=function(){return jt};XC=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};Ry=function(t,e,n){switch(e){case"input":if(Sy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cg(r);if(!i)throw Error(re(90));TC(r),Sy(r,i)}}}break;case"textarea":IC(t,n);break;case"select":e=n.value,e!=null&&cc(t,!!n.multiple,e,!1)}};LC=u1;VC=tl;var kL={usingClientEntryPoint:!1,Events:[Ah,Jl,Cg,MC,OC,u1]},Gu={findFiberByHostInstance:Ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IL={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$C(t),t===null?null:t.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||CL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{_g=Zf.inject(IL),Hs=Zf}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kL;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v1(e))throw Error(re(200));return SL(t,e,null,n)};zr.createRoot=function(t,e){if(!v1(t))throw Error(re(299));var n=!1,r="",i=yk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=m1(t,1,!1,null,null,n,!1,r,i),t[Oi]=e.current,Fd(t.nodeType===8?t.parentNode:t),new g1(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=$C(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return tl(t)};zr.hydrate=function(t,e,n){if(!Og(e))throw Error(re(200));return Lg(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!v1(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=yk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xk(e,null,t,1,n??null,i,!1,a,o),t[Oi]=e.current,Fd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Mg(e)};zr.render=function(t,e,n){if(!Og(e))throw Error(re(200));return Lg(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Og(t))throw Error(re(40));return t._reactRootContainer?(tl(function(){Lg(null,null,t,!1,function(){t._reactRootContainer=null,t[Oi]=null})}),!0):!1};zr.unstable_batchedUpdates=u1;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Og(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Lg(t,e,n,!1,r)};zr.version="18.3.1-next-f1338f8080-20240426";function wk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wk)}catch(t){console.error(t)}}wk(),wC.exports=zr;var lu=wC.exports;const PL=bg(lu);var bk,XN=lu;bk=XN.createRoot,XN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const ZN="popstate";function AL(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:l="",hash:c=""}=yl(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),h0("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:bp(a))}function r(i,a){x1(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return DL(e,n,r,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RL(){return Math.random().toString(36).substr(2,8)}function JN(t,e){return{usr:t.state,key:t.key,idx:e}}function h0(t,e,n,r){return n===void 0&&(n=null),Kd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yl(e):e,{state:n,key:e&&e.key||r||RL()})}function bp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Ca.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Kd({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Ca.Pop;let j=d(),y=j==null?null:j-u;u=j,c&&c({action:l,location:w.location,delta:y})}function m(j,y){l=Ca.Push;let g=h0(w.location,j,y);n&&n(g,j),u=d()+1;let b=JN(g,u),E=w.createHref(g);try{o.pushState(b,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}a&&c&&c({action:l,location:w.location,delta:1})}function v(j,y){l=Ca.Replace;let g=h0(w.location,j,y);n&&n(g,j),u=d();let b=JN(g,u),E=w.createHref(g);o.replaceState(b,"",E),a&&c&&c({action:l,location:w.location,delta:0})}function x(j){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof j=="string"?j:bp(j);return g=g.replace(/ $/,"%20"),on(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let w={get action(){return l},get location(){return t(i,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ZN,f),c=j,()=>{i.removeEventListener(ZN,f),c=null}},createHref(j){return e(i,j)},createURL:x,encodeLocation(j){let y=x(j);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:v,go(j){return o.go(j)}};return w}var e2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(e2||(e2={}));function ML(t,e,n){return n===void 0&&(n="/"),OL(t,e,n,!1)}function OL(t,e,n,r){let i=typeof e=="string"?yl(e):e,a=y1(i.pathname||"/",n);if(a==null)return null;let o=jk(t);LL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=KL(a);l=HL(o[c],u,r)}return l}function jk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(on(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Va([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(on(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jk(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:qL(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of _k(a.path))i(a,o,c)}),e}function _k(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=_k(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function LL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const VL=/^:[\w-]+$/,FL=3,UL=2,$L=1,zL=10,BL=-2,t2=t=>t==="*";function qL(t,e){let n=t.split("/"),r=n.length;return n.some(t2)&&(r+=BL),e&&(r+=UL),n.filter(i=>!t2(i)).reduce((i,a)=>i+(VL.test(a)?FL:a===""?$L:zL),r)}function WL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function HL(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=n2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=n2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Va([a,f.pathname]),pathnameBase:ZL(Va([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=Va([a,f.pathnameBase]))}return o}function n2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let w=l[f]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[f];return v&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function GL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function KL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function y1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yl(t):t;return{pathname:n?n.startsWith("/")?n:QL(n,e):e,search:JL(r),hash:eV(i)}}function QL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Px(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w1(t,e){let n=XL(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function b1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=yl(t):(i=Kd({},t),on(!i.pathname||!i.pathname.includes("?"),Px("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),Px("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),Px("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=YL(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Va=t=>t.join("/").replace(/\/\/+/g,"/"),ZL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nk=["post","put","patch","delete"];new Set(Nk);const nV=["get",...Nk];new Set(nV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(this,arguments)}const j1=p.createContext(null),rV=p.createContext(null),uo=p.createContext(null),Vg=p.createContext(null),Ji=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Ek=p.createContext(null);function sV(t,e){let{relative:n}=e===void 0?{}:e;cu()||on(!1);let{basename:r,navigator:i}=p.useContext(uo),{hash:a,pathname:o,search:l}=Ck(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Va([r,o])),i.createHref({pathname:c,search:l,hash:a})}function cu(){return p.useContext(Vg)!=null}function ea(){return cu()||on(!1),p.useContext(Vg).location}function Sk(t){p.useContext(uo).static||p.useLayoutEffect(t)}function Vn(){let{isDataRoute:t}=p.useContext(Ji);return t?vV():iV()}function iV(){cu()||on(!1);let t=p.useContext(j1),{basename:e,future:n,navigator:r}=p.useContext(uo),{matches:i}=p.useContext(Ji),{pathname:a}=ea(),o=JSON.stringify(w1(i,n.v7_relativeSplatPath)),l=p.useRef(!1);return Sk(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=b1(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Va([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,a,t])}function _1(){let{matches:t}=p.useContext(Ji),e=t[t.length-1];return e?e.params:{}}function Ck(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(uo),{matches:i}=p.useContext(Ji),{pathname:a}=ea(),o=JSON.stringify(w1(i,r.v7_relativeSplatPath));return p.useMemo(()=>b1(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function aV(t,e){return oV(t,e)}function oV(t,e,n,r){cu()||on(!1);let{navigator:i}=p.useContext(uo),{matches:a}=p.useContext(Ji),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ea(),d;if(e){var f;let j=typeof e=="string"?yl(e):e;c==="/"||(f=j.pathname)!=null&&f.startsWith(c)||on(!1),d=j}else d=u;let m=d.pathname||"/",v=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let x=ML(t,{pathname:v}),w=hV(x&&x.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Va([c,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Va([c,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,n,r);return e&&w?p.createElement(Vg.Provider,{value:{location:Yd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ca.Pop}},w):w}function lV(){let t=gV(),e=tV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:i},n):null,null)}const cV=p.createElement(lV,null);class uV extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(Ji.Provider,{value:this.props.routeContext},p.createElement(Ek.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dV(t){let{routeContext:e,match:n,children:r}=t,i=p.useContext(j1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Ji.Provider,{value:e},r)}function hV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||on(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:v}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let v,x=!1,w=null,j=null;n&&(v=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||cV,c&&(u<0&&m===0?(x=!0,j=null):u===m&&(x=!0,j=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,m+1)),g=()=>{let b;return v?b=w:x?b=j:f.route.Component?b=p.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,p.createElement(dV,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(uV,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var Tk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Tk||{}),jp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jp||{});function fV(t){let e=p.useContext(j1);return e||on(!1),e}function mV(t){let e=p.useContext(rV);return e||on(!1),e}function pV(t){let e=p.useContext(Ji);return e||on(!1),e}function kk(t){let e=pV(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function gV(){var t;let e=p.useContext(Ek),n=mV(jp.UseRouteError),r=kk(jp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function vV(){let{router:t}=fV(Tk.UseNavigateStable),e=kk(jp.UseNavigateStable),n=p.useRef(!1);return Sk(()=>{n.current=!0}),p.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Yd({fromRouteId:e},a)))},[t,e])}function xV(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ik(t){let{to:e,replace:n,state:r,relative:i}=t;cu()||on(!1);let{future:a,static:o}=p.useContext(uo),{matches:l}=p.useContext(Ji),{pathname:c}=ea(),u=Vn(),d=b1(e,w1(l,a.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function Xt(t){on(!1)}function yV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ca.Pop,navigator:a,static:o=!1,future:l}=t;cu()&&on(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:o,future:Yd({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=yl(r));let{pathname:d="/",search:f="",hash:m="",state:v=null,key:x="default"}=r,w=p.useMemo(()=>{let j=y1(d,c);return j==null?null:{location:{pathname:j,search:f,hash:m,state:v,key:x},navigationType:i}},[c,d,f,m,v,x,i]);return w==null?null:p.createElement(uo.Provider,{value:u},p.createElement(Vg.Provider,{children:n,value:w}))}function wV(t){let{children:e,location:n}=t;return aV(f0(e),n)}new Promise(()=>{});function f0(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,i)=>{if(!p.isValidElement(r))return;let a=[...e,i];if(r.type===p.Fragment){n.push.apply(n,f0(r.props.children,a));return}r.type!==Xt&&on(!1),!r.props.index||!r.props.children||on(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=f0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m0.apply(this,arguments)}function bV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _V(t,e){return t.button===0&&(!e||e==="_self")&&!jV(t)}function p0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function NV(t,e){let n=p0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const EV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SV="6";try{window.__reactRouterVersion=SV}catch{}const CV="startTransition",r2=xC[CV];function TV(t){let{basename:e,children:n,future:r,window:i}=t,a=p.useRef();a.current==null&&(a.current=AL({window:i,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=p.useCallback(f=>{u&&r2?r2(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>xV(r),[r]),p.createElement(yV,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const kV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=p.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=bV(e,EV),{basename:v}=p.useContext(uo),x,w=!1;if(typeof u=="string"&&IV.test(u)&&(x=u,kV))try{let b=new URL(window.location.href),E=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=y1(E.pathname,v);E.origin===b.origin&&S!=null?u=S+E.search+E.hash:w=!0}catch{}let j=sV(u,{relative:i}),y=PV(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function g(b){r&&r(b),b.defaultPrevented||y(b)}return p.createElement("a",m0({},m,{href:x||j,onClick:w||a?r:g,ref:n,target:c}))});var s2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(s2||(s2={}));var i2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(i2||(i2={}));function PV(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Vn(),u=ea(),d=Ck(t,{relative:o});return p.useCallback(f=>{if(_V(f,n)){f.preventDefault();let m=r!==void 0?r:bp(u)===bp(d);c(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,t,a,o,l])}function N1(t){let e=p.useRef(p0(t)),n=p.useRef(!1),r=ea(),i=p.useMemo(()=>NV(r.search,n.current?null:e.current),[r.search]),a=Vn(),o=p.useCallback((l,c)=>{const u=p0(typeof l=="function"?l(i):l);n.current=!0,a("?"+u,c)},[a,i]);return[i,o]}var _p=["light","dark"],E1="(prefers-color-scheme: dark)",AV=typeof window>"u",S1=p.createContext(void 0),RV={setTheme:t=>{},themes:[]},DV=()=>{var t;return(t=p.useContext(S1))!=null?t:RV},MV=t=>p.useContext(S1)?t.children:p.createElement(LV,{...t}),OV=["light","dark"],LV=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=OV,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[f,m]=p.useState(()=>a2(i,o)),[v,x]=p.useState(()=>a2(i)),w=c?Object.values(c):a,j=p.useCallback(E=>{let S=E;if(!S)return;E==="system"&&n&&(S=o2());let M=c?c[S]:S,k=e?FV():null,I=document.documentElement;if(l==="class"?(I.classList.remove(...w),M&&I.classList.add(M)):M?I.setAttribute(l,M):I.removeAttribute(l),r){let A=_p.includes(o)?o:null,N=_p.includes(S)?S:A;I.style.colorScheme=N}k==null||k()},[]),y=p.useCallback(E=>{let S=typeof E=="function"?E(E):E;m(S);try{localStorage.setItem(i,S)}catch{}},[t]),g=p.useCallback(E=>{let S=o2(E);x(S),f==="system"&&n&&!t&&j("system")},[f,t]);p.useEffect(()=>{let E=window.matchMedia(E1);return E.addListener(g),g(E),()=>E.removeListener(g)},[g]),p.useEffect(()=>{let E=S=>{if(S.key!==i)return;let M=S.newValue||o;y(M)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[y]),p.useEffect(()=>{j(t??f)},[t,f]);let b=p.useMemo(()=>({theme:f,setTheme:y,forcedTheme:t,resolvedTheme:f==="system"?v:f,themes:n?[...a,"system"]:a,systemTheme:n?v:void 0}),[f,y,t,v,n,a]);return p.createElement(S1.Provider,{value:b},p.createElement(VV,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:w,nonce:d}),u)},VV=p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?_p.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,w=!1,j=!0)=>{let y=o?o[x]:x,g=w?x+"|| ''":`'${y}'`,b="";return i&&j&&!w&&_p.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),n==="class"?w||y?b+=`c.add(${g})`:b+="null":y&&(b+=`d[s](n,${g})`),b},v=t?`!function(){${d}${m(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${E1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:v}})}),a2=(t,e)=>{if(AV)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},FV=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},o2=t=>(t||(t=window.matchMedia(E1)),t.matches?"dark":"light");let UV={data:""},$V=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||UV,zV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,BV=/\/\*[^]*?\*\/|  +/g,l2=/\n+/g,xa=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?xa(o,a):a+"{"+xa(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=xa(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=xa.p?xa.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},pi={},Pk=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Pk(t[n]);return e}return t},qV=(t,e,n,r,i)=>{let a=Pk(t),o=pi[a]||(pi[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!pi[o]){let c=a!==t?t:(u=>{let d,f,m=[{}];for(;d=zV.exec(u.replace(BV,""));)d[4]?m.shift():d[3]?(f=d[3].replace(l2," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][d[1]]=d[2].replace(l2," ").trim();return m[0]})(t);pi[o]=xa(i?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&pi.g?pi.g:null;return n&&(pi.g=pi[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(pi[o],e,r,l),o},WV=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":xa(l,""):l===!1?"":l}return r+i+(o??"")},"");function Fg(t){let e=this||{},n=t.call?t(e.p):t;return qV(n.unshift?n.raw?WV(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,$V(e.target),e.g,e.o,e.k)}let Ak,g0,v0;Fg.bind({g:1});let Fi=Fg.bind({k:1});function HV(t,e,n,r){xa.p=e,Ak=t,g0=n,v0=r}function ho(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;n.p=Object.assign({theme:g0&&g0()},l),n.o=/ *go\d+/.test(c),l.className=Fg.apply(n,r)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),v0&&u[0]&&v0(l),Ak(u,l)}return i}}var GV=t=>typeof t=="function",Np=(t,e)=>GV(t)?t(e):t,KV=(()=>{let t=0;return()=>(++t).toString()})(),Rk=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),YV=20,Dk=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,YV)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return Dk(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Am=[],Oo={toasts:[],pausedAt:void 0},wl=t=>{Oo=Dk(Oo,t),Am.forEach(e=>{e(Oo)})},QV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},XV=(t={})=>{let[e,n]=p.useState(Oo),r=p.useRef(Oo);p.useEffect(()=>(r.current!==Oo&&n(Oo),Am.push(n),()=>{let a=Am.indexOf(n);a>-1&&Am.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||QV[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:i}},ZV=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||KV()}),Dh=t=>(e,n)=>{let r=ZV(e,t,n);return wl({type:2,toast:r}),r.id},sr=(t,e)=>Dh("blank")(t,e);sr.error=Dh("error");sr.success=Dh("success");sr.loading=Dh("loading");sr.custom=Dh("custom");sr.dismiss=t=>{wl({type:3,toastId:t})};sr.remove=t=>wl({type:4,toastId:t});sr.promise=(t,e,n)=>{let r=sr.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Np(e.success,i):void 0;return a?sr.success(a,{id:r,...n,...n==null?void 0:n.success}):sr.dismiss(r),i}).catch(i=>{let a=e.error?Np(e.error,i):void 0;a?sr.error(a,{id:r,...n,...n==null?void 0:n.error}):sr.dismiss(r)}),t};var JV=(t,e)=>{wl({type:1,toast:{id:t,height:e}})},eF=()=>{wl({type:5,time:Date.now()})},Nd=new Map,tF=1e3,nF=(t,e=tF)=>{if(Nd.has(t))return;let n=setTimeout(()=>{Nd.delete(t),wl({type:4,toastId:t})},e);Nd.set(t,n)},rF=t=>{let{toasts:e,pausedAt:n}=XV(t);p.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&sr.dismiss(l.id);return}return setTimeout(()=>sr.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=p.useCallback(()=>{n&&wl({type:6,time:Date.now()})},[n]),i=p.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(v=>(v.position||u)===(a.position||u)&&v.height),f=d.findIndex(v=>v.id===a.id),m=d.filter((v,x)=>x<f&&v.visible).length;return d.filter(v=>v.visible).slice(...l?[m+1]:[0,m]).reduce((v,x)=>v+(x.height||0)+c,0)},[e]);return p.useEffect(()=>{e.forEach(a=>{if(a.dismissed)nF(a.id,a.removeDelay);else{let o=Nd.get(a.id);o&&(clearTimeout(o),Nd.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:JV,startPause:eF,endPause:r,calculateOffset:i}}},sF=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,iF=Fi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,aF=Fi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,oF=ho("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${iF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${aF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lF=Fi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,cF=ho("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${lF} 1s linear infinite;
`,uF=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dF=Fi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hF=ho("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fF=ho("div")`
  position: absolute;
`,mF=ho("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,pF=Fi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gF=ho("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${pF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?p.createElement(gF,null,e):e:n==="blank"?null:p.createElement(mF,null,p.createElement(cF,{...r}),n!=="loading"&&p.createElement(fF,null,n==="error"?p.createElement(oF,{...r}):p.createElement(hF,{...r})))},xF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,yF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wF="0%{opacity:0;} 100%{opacity:1;}",bF="0%{opacity:1;} 100%{opacity:0;}",jF=ho("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_F=ho("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,NF=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Rk()?[wF,bF]:[xF(n),yF(n)];return{animation:e?`${Fi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},EF=p.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?NF(t.position||e||"top-center",t.visible):{opacity:0},a=p.createElement(vF,{toast:t}),o=p.createElement(_F,{...t.ariaProps},Np(t.message,t));return p.createElement(jF,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):p.createElement(p.Fragment,null,a,o))});HV(p.createElement);var SF=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=p.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return p.createElement("div",{ref:a,className:e,style:n},i)},CF=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Rk()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},TF=Fg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jf=16,kF=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=rF(n);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Jf,left:Jf,right:Jf,bottom:Jf,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=CF(d,f);return p.createElement(SF,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?TF:"",style:m},u.type==="custom"?Np(u.message,u):i?i(u):p.createElement(EF,{toast:u,position:d}))}))},ee=sr,c2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Ok={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,f=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(n[d],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||f==null)throw new PF;const m=a<<2|l>>4;if(r.push(m),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AF=function(t){const e=Mk(t);return Ok.encodeByteArray(e,!0)},Ep=function(t){return AF(t).replace(/\./g,"")},Lk=function(t){try{return Ok.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=()=>RF().__FIREBASE_DEFAULTS__,MF=()=>{if(typeof process>"u"||typeof c2>"u")return;const t=c2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lk(t[1]);return e&&JSON.parse(e)},Ug=()=>{try{return DF()||MF()||OF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vk=t=>{var e,n;return(n=(e=Ug())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fk=t=>{const e=Vk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uk=()=>{var t;return(t=Ug())===null||t===void 0?void 0:t.config},$k=t=>{var e;return(e=Ug())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ep(JSON.stringify(n)),Ep(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function FF(){var t;const e=(t=Ug())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $F(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BF(){const t=Xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qF(){return!FF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WF(){try{return typeof indexedDB=="object"}catch{return!1}}function HF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="FirebaseError";class li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GF,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mh.prototype.create)}}class Mh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?KF(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new li(i,l,r)}}function KF(t,e){return t.replace(YF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const YF=/\{\$([^}]+)}/g;function QF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(u2(a)&&u2(o)){if(!Sp(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function u2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function id(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ad(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XF(t,e){const n=new ZF(t,e);return n.subscribe.bind(n)}class ZF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ax),i.error===void 0&&(i.error=Ax),i.complete===void 0&&(i.complete=Ax);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ax(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class Wa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n9(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t9(t){return t===Po?void 0:t}function n9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const s9={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},i9=rt.INFO,a9={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},o9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=a9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class C1{constructor(e){this.name=e,this._logLevel=i9,this._logHandler=o9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const l9=(t,e)=>e.some(n=>t instanceof n);let d2,h2;function c9(){return d2||(d2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u9(){return h2||(h2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bk=new WeakMap,x0=new WeakMap,qk=new WeakMap,Rx=new WeakMap,T1=new WeakMap;function d9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Fa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bk.set(n,t)}).catch(()=>{}),T1.set(e,t),e}function h9(t){if(x0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});x0.set(t,e)}let y0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f9(t){y0=t(y0)}function m9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dx(this),e,...n);return qk.set(r,e.sort?e.sort():[e]),Fa(r)}:u9().includes(t)?function(...e){return t.apply(Dx(this),e),Fa(Bk.get(this))}:function(...e){return Fa(t.apply(Dx(this),e))}}function p9(t){return typeof t=="function"?m9(t):(t instanceof IDBTransaction&&h9(t),l9(t,c9())?new Proxy(t,y0):t)}function Fa(t){if(t instanceof IDBRequest)return d9(t);if(Rx.has(t))return Rx.get(t);const e=p9(t);return e!==t&&(Rx.set(t,e),T1.set(e,t)),e}const Dx=t=>T1.get(t);function g9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=Fa(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fa(o.result),c.oldVersion,c.newVersion,Fa(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const v9=["get","getKey","getAll","getAllKeys","count"],x9=["put","add","delete","clear"],Mx=new Map;function f2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mx.get(e))return Mx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=x9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v9.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return Mx.set(e,a),a}f9(t=>({...t,get:(e,n,r)=>f2(e,n)||t.get(e,n,r),has:(e,n)=>!!f2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const w0="@firebase/app",m2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new C1("@firebase/app"),b9="@firebase/app-compat",j9="@firebase/analytics-compat",_9="@firebase/analytics",N9="@firebase/app-check-compat",E9="@firebase/app-check",S9="@firebase/auth",C9="@firebase/auth-compat",T9="@firebase/database",k9="@firebase/data-connect",I9="@firebase/database-compat",P9="@firebase/functions",A9="@firebase/functions-compat",R9="@firebase/installations",D9="@firebase/installations-compat",M9="@firebase/messaging",O9="@firebase/messaging-compat",L9="@firebase/performance",V9="@firebase/performance-compat",F9="@firebase/remote-config",U9="@firebase/remote-config-compat",$9="@firebase/storage",z9="@firebase/storage-compat",B9="@firebase/firestore",q9="@firebase/vertexai-preview",W9="@firebase/firestore-compat",H9="firebase",G9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="[DEFAULT]",K9={[w0]:"fire-core",[b9]:"fire-core-compat",[_9]:"fire-analytics",[j9]:"fire-analytics-compat",[E9]:"fire-app-check",[N9]:"fire-app-check-compat",[S9]:"fire-auth",[C9]:"fire-auth-compat",[T9]:"fire-rtdb",[k9]:"fire-data-connect",[I9]:"fire-rtdb-compat",[P9]:"fire-fn",[A9]:"fire-fn-compat",[R9]:"fire-iid",[D9]:"fire-iid-compat",[M9]:"fire-fcm",[O9]:"fire-fcm-compat",[L9]:"fire-perf",[V9]:"fire-perf-compat",[F9]:"fire-rc",[U9]:"fire-rc-compat",[$9]:"fire-gcs",[z9]:"fire-gcs-compat",[B9]:"fire-fst",[W9]:"fire-fst-compat",[q9]:"fire-vertex","fire-js":"fire-js",[H9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=new Map,Y9=new Map,j0=new Map;function p2(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nl(t){const e=t.name;if(j0.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;j0.set(e,t);for(const n of Cp.values())p2(n,t);for(const n of Y9.values())p2(n,t);return!0}function $g(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ua=new Mh("app","Firebase",Q9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=G9;function Wk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:b0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ua.create("bad-app-name",{appName:String(i)});if(n||(n=Uk()),!n)throw Ua.create("no-options");const a=Cp.get(i);if(a){if(Sp(n,a.options)&&Sp(r,a.config))return a;throw Ua.create("duplicate-app",{appName:i})}const o=new r9(i);for(const c of j0.values())o.addComponent(c);const l=new X9(n,r,o);return Cp.set(i,l),l}function k1(t=b0){const e=Cp.get(t);if(!e&&t===b0&&Uk())return Wk();if(!e)throw Ua.create("no-app",{appName:t});return e}function Ks(t,e,n){var r;let i=(r=K9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(l.join(" "));return}nl(new Wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="firebase-heartbeat-database",J9=1,Qd="firebase-heartbeat-store";let Ox=null;function Hk(){return Ox||(Ox=g9(Z9,J9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ua.create("idb-open",{originalErrorMessage:t.message})})),Ox}async function e8(t){try{const n=(await Hk()).transaction(Qd),r=await n.objectStore(Qd).get(Gk(t));return await n.done,r}catch(e){if(e instanceof li)Ui.warn(e.message);else{const n=Ua.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function g2(t,e){try{const r=(await Hk()).transaction(Qd,"readwrite");await r.objectStore(Qd).put(e,Gk(t)),await r.done}catch(n){if(n instanceof li)Ui.warn(n.message);else{const r=Ua.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(r.message)}}}function Gk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=1024,n8=30*24*60*60*1e3;class r8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new i8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=v2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=n8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=v2(),{heartbeatsToSend:r,unsentEntries:i}=s8(this._heartbeatsCache.heartbeats),a=Ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ui.warn(n),""}}}function v2(){return new Date().toISOString().substring(0,10)}function s8(t,e=t8){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),x2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),x2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class i8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WF()?HF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await e8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function x2(t){return Ep(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t){nl(new Wa("platform-logger",e=>new y9(e),"PRIVATE")),nl(new Wa("heartbeat",e=>new r8(e),"PRIVATE")),Ks(w0,m2,t),Ks(w0,m2,"esm2017"),Ks("fire-js","")}a8("");var Fs=function(){return Fs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fs.apply(this,arguments)};function Lh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o8(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Kk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l8=Kk,Yk=new Mh("auth","Firebase",Kk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new C1("@firebase/auth");function c8(t,...e){Tp.logLevel<=rt.WARN&&Tp.warn(`Auth (${bl}): ${t}`,...e)}function Rm(t,...e){Tp.logLevel<=rt.ERROR&&Tp.error(`Auth (${bl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw P1(t,...e)}function Ys(t,...e){return P1(t,...e)}function I1(t,e,n){const r=Object.assign(Object.assign({},l8()),{[e]:n});return new Mh("auth","Firebase",r).create(e,{appName:t.name})}function ws(t){return I1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u8(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&is(t,"argument-error"),I1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function P1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yk.create(t,...e)}function Me(t,e,...n){if(!t)throw P1(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rm(e),new Error(e)}function $i(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function d8(){return y2()==="http:"||y2()==="https:"}function y2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d8()||$F()||"connection"in navigator)?navigator.onLine:!0}function f8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=VF()||zF()}get(){return h8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=new Vh(3e4,6e4);function ta(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ps(t,e,n,r,i={}){return Xk(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Oh(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return UF()||(u.referrerPolicy="no-referrer"),Qk.fetch()(Zk(t,t.config.apiHost,n,l),u)})}async function Xk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},m8),e);try{const i=new v8(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw em(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw em(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw em(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw em(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw I1(t,d,u);is(t,d)}}catch(i){if(i instanceof li)throw i;is(t,"network-request-failed",{message:String(i)})}}async function Fh(t,e,n,r,i={}){const a=await Ps(t,e,n,r,i);return"mfaPendingCredential"in a&&is(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Zk(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?A1(t.config,i):`${t.config.apiScheme}://${i}`}function g8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ys(this.auth,"network-request-failed")),p8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function em(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ys(t,e,r);return i.customData._tokenResponse=n,i}function w2(t){return t!==void 0&&t.enterprise!==void 0}class x8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return g8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function y8(t,e){return Ps(t,"GET","/v2/recaptchaConfig",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(t,e){return Ps(t,"POST","/v1/accounts:delete",e)}async function Jk(t,e){return Ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b8(t,e=!1){const n=gt(t),r=await n.getIdToken(e),i=R1(r);Me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ed(Lx(i.auth_time)),issuedAtTime:Ed(Lx(i.iat)),expirationTime:Ed(Lx(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lx(t){return Number(t)*1e3}function R1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lk(n);return i?JSON.parse(i):(Rm("Failed to decode base64 JWT payload"),null)}catch(i){return Rm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function b2(t){const e=R1(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof li&&j8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function j8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ed(this.lastLoginAt),this.creationTime=Ed(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await rl(t,Jk(n,{idToken:r}));Me(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?eI(a.providerUserInfo):[],l=E8(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new N0(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function N8(t){const e=gt(t);await kp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eI(t){return t.map(e=>{var{providerId:n}=e,r=Lh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){const n=await Xk(t,{},async()=>{const r=Oh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=Zk(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Qk.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function C8(t,e){return Ps(t,"POST","/v2/accounts:revokeToken",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=b2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await S8(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new pc;return r&&(Me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Me(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Si{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Lh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new N0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await rl(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b8(this,e)}reload(){return N8(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await rl(this,w8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,l,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:E,isAnonymous:S,providerData:M,stsTokenManager:k}=n;Me(b&&k,e,"internal-error");const I=pc.fromJSON(this.name,k);Me(typeof b=="string",e,"internal-error"),ca(f,e.name),ca(m,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof S=="boolean",e,"internal-error"),ca(v,e.name),ca(x,e.name),ca(w,e.name),ca(j,e.name),ca(y,e.name),ca(g,e.name);const A=new Si({uid:b,auth:e,email:m,emailVerified:E,displayName:f,isAnonymous:S,photoURL:x,phoneNumber:v,tenantId:w,stsTokenManager:I,createdAt:y,lastLoginAt:g});return M&&Array.isArray(M)&&(A.providerData=M.map(N=>Object.assign({},N))),j&&(A._redirectEventId=j),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new pc;i.updateFromServerResponse(n);const a=new Si({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Me(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?eI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new pc;l.updateFromIdToken(r);const c=new Si({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new N0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new Map;function Ci(t){$i(t instanceof Function,"Expected a class definition");let e=j2.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tI.type="NONE";const _2=tI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e,n){return`firebase:${t}:${e}:${n}`}class gc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Dm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Dm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gc(Ci(_2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Ci(_2);const o=Dm(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){const f=Si._fromJSON(e,d);u!==a&&(l=f),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new gc(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new gc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oI(e))return"Blackberry";if(lI(e))return"Webos";if(rI(e))return"Safari";if((e.includes("chrome/")||sI(e))&&!e.includes("edge/"))return"Chrome";if(aI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nI(t=Xn()){return/firefox\//i.test(t)}function rI(t=Xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sI(t=Xn()){return/crios\//i.test(t)}function iI(t=Xn()){return/iemobile/i.test(t)}function aI(t=Xn()){return/android/i.test(t)}function oI(t=Xn()){return/blackberry/i.test(t)}function lI(t=Xn()){return/webos/i.test(t)}function D1(t=Xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T8(t=Xn()){var e;return D1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function k8(){return BF()&&document.documentMode===10}function cI(t=Xn()){return D1(t)||aI(t)||lI(t)||oI(t)||/windows phone/i.test(t)||iI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e=[]){let n;switch(t){case"Browser":n=N2(Xn());break;case"Worker":n=`${N2(Xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(t,e={}){return Ps(t,"GET","/v2/passwordPolicy",ta(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=6;class R8{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:A8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E2(this),this.idTokenSubscription=new E2(this),this.beforeStateQueue=new I8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ci(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await gc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jk(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(ws(this));const n=e?gt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P8(this),n=new R8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await C8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ci(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await gc.create(this,[Ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&c8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function na(t){return gt(t)}class E2{constructor(e){this.auth=e,this.observer=null,this.addObserver=XF(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M8(t){zg=t}function dI(t){return zg.loadJS(t)}function O8(){return zg.recaptchaEnterpriseScript}function L8(){return zg.gapiScript}function V8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const F8="recaptcha-enterprise",U8="NO_RECAPTCHA";class $8{constructor(e){this.type=F8,this.auth=na(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{y8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new x8(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;w2(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(U8)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&w2(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=O8();c.length!==0&&(c+=l),dI(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function S2(t,e,n,r=!1){const i=new $8(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function E0(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await S2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await S2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e){const n=$g(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Sp(a,e??{}))return i;is(i,"already-initialized")}return n.initialize({options:e})}function B8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function q8(t,e,n){const r=na(t);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=hI(e),{host:o,port:l}=W8(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),H8()}function hI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function W8(t){const e=hI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:C2(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:C2(o)}}}function C2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function G8(t,e){return Ps(t,"POST","/v1/accounts:update",e)}async function K8(t,e){return Ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y8(t,e){return Fh(t,"POST","/v1/accounts:signInWithPassword",ta(t,e))}async function Q8(t,e){return Ps(t,"POST","/v1/accounts:sendOobCode",ta(t,e))}async function X8(t,e){return Q8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(t,e){return Fh(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}async function J8(t,e){return Fh(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends M1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,n,"signInWithPassword",Y8);case"emailLink":return Z8(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,r,"signUpPassword",K8);case"emailLink":return J8(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t,e){return Fh(t,"POST","/v1/accounts:signInWithIdp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="http://localhost";class sl extends M1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Lh(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vc(e,n)}buildRequest(){const e={requestUri:eU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nU(t){const e=id(ad(t)).link,n=e?id(ad(e)).deep_link_id:null,r=id(ad(t)).deep_link_id;return(r?id(ad(r)).link:null)||r||n||e||t}class O1{constructor(e){var n,r,i,a,o,l;const c=id(ad(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=tU((i=c.mode)!==null&&i!==void 0?i:null);Me(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=nU(e);try{return new O1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.providerId=Ha.PROVIDER_ID}static credential(e,n){return Xd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=O1.parseLink(n);return Me(r,"argument-error"),Xd._fromEmailAndCode(e,r.code,r.tenantId)}}Ha.PROVIDER_ID="password";Ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends L1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Uh{constructor(){super("facebook.com")}static credential(e){return sl._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sl._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Uh{constructor(){super("github.com")}static credential(e){return sl._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.GITHUB_SIGN_IN_METHOD="github.com";wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Uh{constructor(){super("twitter.com")}static credential(e,n){return sl._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ba.credential(n,r)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t,e){return Fh(t,"POST","/v1/accounts:signUp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Si._fromIdTokenResponse(e,r,i),o=T2(r);return new il({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=T2(r);return new il({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function T2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends li{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ip.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ip(e,n,r,i)}}function fI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ip._fromErrorAndOperation(t,a,e,r):a})}async function sU(t,e,n=!1){const r=await rl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return il._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(t,e,n=!1){const{auth:r}=t;if(Zr(r.app))return Promise.reject(ws(r));const i="reauthenticate";try{const a=await rl(t,fI(r,i,e,t),n);Me(a.idToken,r,"internal-error");const o=R1(a.idToken);Me(o,r,"internal-error");const{sub:l}=o;return Me(t.uid===l,r,"user-mismatch"),il._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&is(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(t,e,n=!1){if(Zr(t.app))return Promise.reject(ws(t));const r="signIn",i=await fI(t,r,e),a=await il._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function iU(t,e){return pI(na(t),e)}async function k2(t,e){return mI(gt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t,e,n){var r;Me(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Me(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Me(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Me(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(t){const e=na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vI(t,e,n){if(Zr(t.app))return Promise.reject(ws(t));const r=na(t),o=await E0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&gI(t),c}),l=await il._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function oU(t,e,n){return Zr(t.app)?Promise.reject(ws(t)):iU(gt(t),Ha.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gI(t),r})}async function I2(t,e){const n=gt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&aU(n.auth,i,e);const{email:a}=await X8(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(t,e){return Ps(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=gt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await rl(r,lU(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function cU(t,e){const n=gt(t);return Zr(n.auth.app)?Promise.reject(ws(n.auth)):xI(n,e,null)}function uU(t,e){return xI(gt(t),null,e)}async function xI(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await rl(t,G8(r,a));await t._updateTokensIfNecessary(o,!0)}function dU(t,e,n,r){return gt(t).onIdTokenChanged(e,n,r)}function hU(t,e,n){return gt(t).beforeAuthStateChanged(e,n)}function fU(t,e,n,r){return gt(t).onAuthStateChanged(e,n,r)}function mU(t){return gt(t).signOut()}async function pU(t){return gt(t).delete()}const Pp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pp,"1"),this.storage.removeItem(Pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=1e3,vU=10;class wI extends yI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);k8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vU):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wI.type="LOCAL";const xU=wI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI extends yI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bI.type="SESSION";const jI=bI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await yU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=V1("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}function bU(t){Qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function jU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _U(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NU(){return _I()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="firebaseLocalStorageDb",EU=1,Ap="firebaseLocalStorage",EI="fbase_key";class $h{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qg(t,e){return t.transaction([Ap],e?"readwrite":"readonly").objectStore(Ap)}function SU(){const t=indexedDB.deleteDatabase(NI);return new $h(t).toPromise()}function C0(){const t=indexedDB.open(NI,EU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ap,{keyPath:EI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ap)?e(r):(r.close(),await SU(),e(await C0()))})})}async function P2(t,e,n){const r=qg(t,!0).put({[EI]:e,value:n});return new $h(r).toPromise()}async function CU(t,e){const n=qg(t,!1).get(e),r=await new $h(n).toPromise();return r===void 0?null:r.value}function A2(t,e){const n=qg(t,!0).delete(e);return new $h(n).toPromise()}const TU=800,kU=3;class SI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _I()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bg._getInstance(NU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jU(),!this.activeServiceWorker)return;this.sender=new wU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_U()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C0();return await P2(e,Pp,"1"),await A2(e,Pp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=qg(i,!1).getAll();return new $h(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SI.type="LOCAL";const IU=SI;new Vh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){return e?Ci(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends M1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PU(t){return pI(t.auth,new F1(t),t.bypassAuthState)}function AU(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),mI(n,new F1(t),t.bypassAuthState)}async function RU(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),sU(n,new F1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PU;case"linkViaPopup":case"linkViaRedirect":return RU;case"reauthViaPopup":case"reauthViaRedirect":return AU;default:is(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=new Vh(2e3,1e4);class ac extends TI{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ac.currentPopupAction&&ac.currentPopupAction.cancel(),ac.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=V1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ys(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ys(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ac.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ys(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DU.get())};e()}}ac.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="pendingRedirect",Mm=new Map;class OU extends TI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mm.get(this.auth._key());if(!e){try{const r=await LU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mm.set(this.auth._key(),e)}return this.bypassAuthState||Mm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LU(t,e){const n=II(e),r=kI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function VU(t,e){return kI(t)._set(II(e),"true")}function FU(t,e){Mm.set(t._key(),e)}function kI(t){return Ci(t._redirectPersistence)}function II(t){return Dm(MU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t,e,n){return $U(t,e,n)}async function $U(t,e,n){if(Zr(t.app))return Promise.reject(ws(t));const r=na(t);u8(t,e,L1),await r._initializationPromise;const i=CI(r,n);return await VU(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function zU(t,e){return await na(t)._initializationPromise,PI(t,e,!1)}async function PI(t,e,n=!1){if(Zr(t.app))return Promise.reject(ws(t));const r=na(t),i=CI(r,e),o=await new OU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=10*60*1e3;class qU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ys(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BU&&this.cachedEventUids.clear(),this.cachedEventUids.has(R2(e))}saveEventToCache(e){this.cachedEventUids.add(R2(e)),this.lastProcessedEventTime=Date.now()}}function R2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(t,e={}){return Ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KU=/^https?/;async function YU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HU(t);for(const n of e)try{if(QU(n))return}catch{}is(t,"unauthorized-domain")}function QU(t){const e=_0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KU.test(n))return!1;if(GU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=new Vh(3e4,6e4);function D2(){const t=Qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZU(t){return new Promise((e,n)=>{var r,i,a;function o(){D2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D2(),n(Ys(t,"network-request-failed"))},timeout:XU.get()})}if(!((i=(r=Qs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Qs().gapi)===null||a===void 0)&&a.load)o();else{const l=V8("iframefcb");return Qs()[l]=()=>{gapi.load?o():n(Ys(t,"network-request-failed"))},dI(`${L8()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Om=null,e})}let Om=null;function JU(t){return Om=Om||ZU(t),Om}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=new Vh(5e3,15e3),t$="__/auth/iframe",n$="emulator/auth/iframe",r$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i$(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?A1(e,n$):`https://${t.config.authDomain}/${t$}`,r={apiKey:e.apiKey,appName:t.name,v:bl},i=s$.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Oh(r).slice(1)}`}async function a$(t){const e=await JU(t),n=Qs().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:i$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r$,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ys(t,"network-request-failed"),l=Qs().setTimeout(()=>{a(o)},e$.get());function c(){Qs().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l$=500,c$=600,u$="_blank",d$="http://localhost";class M2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h$(t,e,n,r=l$,i=c$){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},o$),{width:r.toString(),height:i.toString(),top:a,left:o}),u=Xn().toLowerCase();n&&(l=sI(u)?u$:n),nI(u)&&(e=e||d$,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(T8(u)&&l!=="_self")return f$(e||"",l),new M2(null);const f=window.open(e||"",l,d);Me(f,t,"popup-blocked");try{f.focus()}catch{}return new M2(f)}function f$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$="__/auth/handler",p$="emulator/auth/handler",g$=encodeURIComponent("fac");async function O2(t,e,n,r,i,a){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bl,eventId:i};if(e instanceof L1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Uh){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${g$}=${encodeURIComponent(c)}`:"";return`${v$(t)}?${Oh(l).slice(1)}${u}`}function v$({config:t}){return t.emulator?A1(t,p$):`https://${t.authDomain}/${m$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="webStorageSupport";class x${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jI,this._completeRedirectFn=PI,this._overrideRedirectResult=FU}async _openPopup(e,n,r,i){var a;$i((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await O2(e,n,r,_0(),i);return h$(e,o,V1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await O2(e,n,r,_0(),i);return bU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):($i(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await a$(e),r=new qU(e);return n.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vx,{type:Vx},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Vx];o!==void 0&&n(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cI()||rI()||D1()}}const y$=x$;var L2="@firebase/auth",V2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j$(t){nl(new Wa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uI(t)},u=new D8(r,i,a,c);return B8(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nl(new Wa("auth-internal",e=>{const n=na(e.getProvider("auth").getImmediate());return(r=>new w$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(L2,V2,b$(t)),Ks(L2,V2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=5*60,N$=$k("authIdTokenMaxAge")||_$;let F2=null;const E$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>N$)return;const i=n==null?void 0:n.token;F2!==i&&(F2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function S$(t=k1()){const e=$g(t,"auth");if(e.isInitialized())return e.getImmediate();const n=z8(t,{popupRedirectResolver:y$,persistence:[IU,xU,jI]}),r=$k("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=E$(a.toString());hU(n,o,()=>o(n.currentUser)),dU(n,l=>o(l))}}const i=Vk("auth");return i&&q8(n,`http://${i}`),n}function C$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}M8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ys("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",C$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j$("Browser");var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,RI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(N,P,R){for(var T=Array(arguments.length-2),F=2;F<arguments.length;F++)T[F-2]=arguments[F];return I.prototype[P].apply(N,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,I,A){A||(A=0);var N=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)N[P]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(P=0;16>P;++P)N[P]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],P=k.g[2];var R=k.g[3],T=I+(R^A&(P^R))+N[0]+3614090360&4294967295;I=A+(T<<7&4294967295|T>>>25),T=R+(P^I&(A^P))+N[1]+3905402710&4294967295,R=I+(T<<12&4294967295|T>>>20),T=P+(A^R&(I^A))+N[2]+606105819&4294967295,P=R+(T<<17&4294967295|T>>>15),T=A+(I^P&(R^I))+N[3]+3250441966&4294967295,A=P+(T<<22&4294967295|T>>>10),T=I+(R^A&(P^R))+N[4]+4118548399&4294967295,I=A+(T<<7&4294967295|T>>>25),T=R+(P^I&(A^P))+N[5]+1200080426&4294967295,R=I+(T<<12&4294967295|T>>>20),T=P+(A^R&(I^A))+N[6]+2821735955&4294967295,P=R+(T<<17&4294967295|T>>>15),T=A+(I^P&(R^I))+N[7]+4249261313&4294967295,A=P+(T<<22&4294967295|T>>>10),T=I+(R^A&(P^R))+N[8]+1770035416&4294967295,I=A+(T<<7&4294967295|T>>>25),T=R+(P^I&(A^P))+N[9]+2336552879&4294967295,R=I+(T<<12&4294967295|T>>>20),T=P+(A^R&(I^A))+N[10]+4294925233&4294967295,P=R+(T<<17&4294967295|T>>>15),T=A+(I^P&(R^I))+N[11]+2304563134&4294967295,A=P+(T<<22&4294967295|T>>>10),T=I+(R^A&(P^R))+N[12]+1804603682&4294967295,I=A+(T<<7&4294967295|T>>>25),T=R+(P^I&(A^P))+N[13]+4254626195&4294967295,R=I+(T<<12&4294967295|T>>>20),T=P+(A^R&(I^A))+N[14]+2792965006&4294967295,P=R+(T<<17&4294967295|T>>>15),T=A+(I^P&(R^I))+N[15]+1236535329&4294967295,A=P+(T<<22&4294967295|T>>>10),T=I+(P^R&(A^P))+N[1]+4129170786&4294967295,I=A+(T<<5&4294967295|T>>>27),T=R+(A^P&(I^A))+N[6]+3225465664&4294967295,R=I+(T<<9&4294967295|T>>>23),T=P+(I^A&(R^I))+N[11]+643717713&4294967295,P=R+(T<<14&4294967295|T>>>18),T=A+(R^I&(P^R))+N[0]+3921069994&4294967295,A=P+(T<<20&4294967295|T>>>12),T=I+(P^R&(A^P))+N[5]+3593408605&4294967295,I=A+(T<<5&4294967295|T>>>27),T=R+(A^P&(I^A))+N[10]+38016083&4294967295,R=I+(T<<9&4294967295|T>>>23),T=P+(I^A&(R^I))+N[15]+3634488961&4294967295,P=R+(T<<14&4294967295|T>>>18),T=A+(R^I&(P^R))+N[4]+3889429448&4294967295,A=P+(T<<20&4294967295|T>>>12),T=I+(P^R&(A^P))+N[9]+568446438&4294967295,I=A+(T<<5&4294967295|T>>>27),T=R+(A^P&(I^A))+N[14]+3275163606&4294967295,R=I+(T<<9&4294967295|T>>>23),T=P+(I^A&(R^I))+N[3]+4107603335&4294967295,P=R+(T<<14&4294967295|T>>>18),T=A+(R^I&(P^R))+N[8]+1163531501&4294967295,A=P+(T<<20&4294967295|T>>>12),T=I+(P^R&(A^P))+N[13]+2850285829&4294967295,I=A+(T<<5&4294967295|T>>>27),T=R+(A^P&(I^A))+N[2]+4243563512&4294967295,R=I+(T<<9&4294967295|T>>>23),T=P+(I^A&(R^I))+N[7]+1735328473&4294967295,P=R+(T<<14&4294967295|T>>>18),T=A+(R^I&(P^R))+N[12]+2368359562&4294967295,A=P+(T<<20&4294967295|T>>>12),T=I+(A^P^R)+N[5]+4294588738&4294967295,I=A+(T<<4&4294967295|T>>>28),T=R+(I^A^P)+N[8]+2272392833&4294967295,R=I+(T<<11&4294967295|T>>>21),T=P+(R^I^A)+N[11]+1839030562&4294967295,P=R+(T<<16&4294967295|T>>>16),T=A+(P^R^I)+N[14]+4259657740&4294967295,A=P+(T<<23&4294967295|T>>>9),T=I+(A^P^R)+N[1]+2763975236&4294967295,I=A+(T<<4&4294967295|T>>>28),T=R+(I^A^P)+N[4]+1272893353&4294967295,R=I+(T<<11&4294967295|T>>>21),T=P+(R^I^A)+N[7]+4139469664&4294967295,P=R+(T<<16&4294967295|T>>>16),T=A+(P^R^I)+N[10]+3200236656&4294967295,A=P+(T<<23&4294967295|T>>>9),T=I+(A^P^R)+N[13]+681279174&4294967295,I=A+(T<<4&4294967295|T>>>28),T=R+(I^A^P)+N[0]+3936430074&4294967295,R=I+(T<<11&4294967295|T>>>21),T=P+(R^I^A)+N[3]+3572445317&4294967295,P=R+(T<<16&4294967295|T>>>16),T=A+(P^R^I)+N[6]+76029189&4294967295,A=P+(T<<23&4294967295|T>>>9),T=I+(A^P^R)+N[9]+3654602809&4294967295,I=A+(T<<4&4294967295|T>>>28),T=R+(I^A^P)+N[12]+3873151461&4294967295,R=I+(T<<11&4294967295|T>>>21),T=P+(R^I^A)+N[15]+530742520&4294967295,P=R+(T<<16&4294967295|T>>>16),T=A+(P^R^I)+N[2]+3299628645&4294967295,A=P+(T<<23&4294967295|T>>>9),T=I+(P^(A|~R))+N[0]+4096336452&4294967295,I=A+(T<<6&4294967295|T>>>26),T=R+(A^(I|~P))+N[7]+1126891415&4294967295,R=I+(T<<10&4294967295|T>>>22),T=P+(I^(R|~A))+N[14]+2878612391&4294967295,P=R+(T<<15&4294967295|T>>>17),T=A+(R^(P|~I))+N[5]+4237533241&4294967295,A=P+(T<<21&4294967295|T>>>11),T=I+(P^(A|~R))+N[12]+1700485571&4294967295,I=A+(T<<6&4294967295|T>>>26),T=R+(A^(I|~P))+N[3]+2399980690&4294967295,R=I+(T<<10&4294967295|T>>>22),T=P+(I^(R|~A))+N[10]+4293915773&4294967295,P=R+(T<<15&4294967295|T>>>17),T=A+(R^(P|~I))+N[1]+2240044497&4294967295,A=P+(T<<21&4294967295|T>>>11),T=I+(P^(A|~R))+N[8]+1873313359&4294967295,I=A+(T<<6&4294967295|T>>>26),T=R+(A^(I|~P))+N[15]+4264355552&4294967295,R=I+(T<<10&4294967295|T>>>22),T=P+(I^(R|~A))+N[6]+2734768916&4294967295,P=R+(T<<15&4294967295|T>>>17),T=A+(R^(P|~I))+N[13]+1309151649&4294967295,A=P+(T<<21&4294967295|T>>>11),T=I+(P^(A|~R))+N[4]+4149444226&4294967295,I=A+(T<<6&4294967295|T>>>26),T=R+(A^(I|~P))+N[11]+3174756917&4294967295,R=I+(T<<10&4294967295|T>>>22),T=P+(I^(R|~A))+N[2]+718787259&4294967295,P=R+(T<<15&4294967295|T>>>17),T=A+(R^(P|~I))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,N=this.B,P=this.h,R=0;R<I;){if(P==0)for(;R<=A;)i(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<I;)if(N[P++]=k.charCodeAt(R++),P==this.blockSize){i(this,N),P=0;break}}else for(;R<I;)if(N[P++]=k[R++],P==this.blockSize){i(this,N),P=0;break}}this.h=P,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var N=0;32>N;N+=8)k[A++]=this.g[I]>>>N&255;return k};function a(k,I){var A=l;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function o(k,I){this.h=I;for(var A=[],N=!0,P=k.length-1;0<=P;P--){var R=k[P]|0;N&&R==I||(A[P]=R,N=!1)}this.g=A}var l={};function c(k){return-128<=k&&128>k?a(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return j(u(-k));for(var I=[],A=1,N=0;k>=A;N++)I[N]=k/A|0,A*=4294967296;return new o(I,0)}function d(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return j(d(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(I,8)),N=f,P=0;P<k.length;P+=8){var R=Math.min(8,k.length-P),T=parseInt(k.substring(P,P+R),I);8>R?(R=u(Math.pow(I,R)),N=N.j(R).add(u(T))):(N=N.j(A),N=N.add(u(T)))}return N}var f=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-j(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var N=this.i(A);k+=(0<=N?N:4294967296+N)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(w(this))return"-"+j(this).toString(k);for(var I=u(Math.pow(k,6)),A=this,N="";;){var P=E(A,I).g;A=y(A,P.j(I));var R=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=P,x(A))return R+N;for(;6>R.length;)R="0"+R;N=R+N}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function w(k){return k.h==-1}t.l=function(k){return k=y(this,k),w(k)?-1:x(k)?0:1};function j(k){for(var I=k.g.length,A=[],N=0;N<I;N++)A[N]=~k.g[N];return new o(A,~k.h).add(m)}t.abs=function(){return w(this)?j(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0,P=0;P<=I;P++){var R=N+(this.i(P)&65535)+(k.i(P)&65535),T=(R>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);N=T>>>16,R&=65535,T&=65535,A[P]=T<<16|R}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(k,I){return k.add(j(I))}t.j=function(k){if(x(this)||x(k))return f;if(w(this))return w(k)?j(this).j(j(k)):j(j(this).j(k));if(w(k))return j(this.j(j(k)));if(0>this.l(v)&&0>k.l(v))return u(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],N=0;N<2*I;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<k.g.length;P++){var R=this.i(N)>>>16,T=this.i(N)&65535,F=k.i(P)>>>16,W=k.i(P)&65535;A[2*N+2*P]+=T*W,g(A,2*N+2*P),A[2*N+2*P+1]+=R*W,g(A,2*N+2*P+1),A[2*N+2*P+1]+=T*F,g(A,2*N+2*P+1),A[2*N+2*P+2]+=R*F,g(A,2*N+2*P+2)}for(N=0;N<I;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=I;N<2*I;N++)A[N]=0;return new o(A,0)};function g(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function b(k,I){this.g=k,this.h=I}function E(k,I){if(x(I))throw Error("division by zero");if(x(k))return new b(f,f);if(w(k))return I=E(j(k),I),new b(j(I.g),j(I.h));if(w(I))return I=E(k,j(I)),new b(j(I.g),I.h);if(30<k.g.length){if(w(k)||w(I))throw Error("slowDivide_ only works with positive integers.");for(var A=m,N=I;0>=N.l(k);)A=S(A),N=S(N);var P=M(A,1),R=M(N,1);for(N=M(N,2),A=M(A,2);!x(N);){var T=R.add(N);0>=T.l(k)&&(P=P.add(A),R=T),N=M(N,1),A=M(A,1)}return I=y(k,P.j(I)),new b(P,I)}for(P=f;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),R=u(A),T=R.j(I);w(T)||0<T.l(k);)A-=N,R=u(A),T=R.j(I);x(R)&&(R=m),P=P.add(R),k=y(k,T)}return new b(P,k)}t.A=function(k){return E(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)&k.i(N);return new o(A,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)|k.i(N);return new o(A,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)^k.i(N);return new o(A,this.h^k.h)};function S(k){for(var I=k.g.length+1,A=[],N=0;N<I;N++)A[N]=k.i(N)<<1|k.i(N-1)>>>31;return new o(A,k.h)}function M(k,I){var A=I>>5;I%=32;for(var N=k.g.length-A,P=[],R=0;R<N;R++)P[R]=0<I?k.i(R+A)>>>I|k.i(R+A+1)<<32-I:k.i(R+A);return new o(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$o=o}).apply(typeof U2<"u"?U2:typeof self<"u"?self:typeof window<"u"?window:{});var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DI,od,MI,Lm,T0,OI,LI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,C){return h==Array.prototype||h==Object.prototype||(h[_]=C.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof tm=="object"&&tm];for(var _=0;_<h.length;++_){var C=h[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(h,_){if(_)e:{var C=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var z=h[D];if(!(z in C))break e;C=C[z]}h=h[h.length-1],D=C[h],_=_(D),_!=D&&_!=null&&e(C,h,{configurable:!0,writable:!0,value:_})}}function a(h,_){h instanceof String&&(h+="");var C=0,D=!1,z={next:function(){if(!D&&C<h.length){var K=C++;return{value:_(K,h[K]),done:!1}}return D=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(h){return h||function(){return a(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function u(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,C){return h.call.apply(h.bind,arguments)}function f(h,_,C){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,D),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function m(h,_,C){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(h,_){var C=Array.prototype.slice.call(arguments,1);return function(){var D=C.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function x(h,_){function C(){}C.prototype=_.prototype,h.aa=_.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(D,z,K){for(var ce=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)ce[kt-2]=arguments[kt];return _.prototype[z].apply(D,ce)}}function w(h){const _=h.length;if(0<_){const C=Array(_);for(let D=0;D<_;D++)C[D]=h[D];return C}return[]}function j(h,_){for(let C=1;C<arguments.length;C++){const D=arguments[C];if(c(D)){const z=h.length||0,K=D.length||0;h.length=z+K;for(let ce=0;ce<K;ce++)h[z+ce]=D[ce]}else h.push(D)}}class y{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function g(h){return/^[\s\xa0]*$/.test(h)}function b(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function E(h){return E[" "](h),h}E[" "]=function(){};var S=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(h,_,C){for(const D in h)_.call(C,h[D],D,h)}function k(h,_){for(const C in h)_.call(void 0,h[C],C,h)}function I(h){const _={};for(const C in h)_[C]=h[C];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,_){let C,D;for(let z=1;z<arguments.length;z++){D=arguments[z];for(C in D)h[C]=D[C];for(let K=0;K<A.length;K++)C=A[K],Object.prototype.hasOwnProperty.call(D,C)&&(h[C]=D[C])}}function P(h){var _=1;h=h.split(":");const C=[];for(;0<_&&h.length;)C.push(h.shift()),_--;return h.length&&C.push(h.join(":")),C}function R(h){l.setTimeout(()=>{throw h},0)}function T(){var h=B;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class F{constructor(){this.h=this.g=null}add(_,C){const D=W.get();D.set(_,C),this.h?this.h.next=D:this.g=D,this.h=D}}var W=new y(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let L,O=!1,B=new F,U=()=>{const h=l.Promise.resolve(void 0);L=()=>{h.then(Q)}};var Q=()=>{for(var h;h=T();){try{h.h.call(h.g)}catch(C){R(C)}var _=W;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}O=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};l.addEventListener("test",C,_),l.removeEventListener("test",C,_)}catch{}return h}();function xt(h,_){if(Ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(S){e:{try{E(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else C=="mouseover"?_=h.fromElement:C=="mouseout"&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ut[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xt.aa.h.call(this)}}x(xt,Ce);var ut={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function X(h,_,C,D,z){this.listener=h,this.proxy=null,this.src=_,this.type=C,this.capture=!!D,this.ha=z,this.key=++Qe,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Te(h){this.src=h,this.g={},this.h=0}Te.prototype.add=function(h,_,C,D,z){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var ce=He(h,_,D,z);return-1<ce?(_=h[ce],C||(_.fa=!1)):(_=new X(_,this.src,K,!!D,z),_.fa=C,h.push(_)),_};function Oe(h,_){var C=_.type;if(C in h.g){var D=h.g[C],z=Array.prototype.indexOf.call(D,_,void 0),K;(K=0<=z)&&Array.prototype.splice.call(D,z,1),K&&(de(_),h.g[C].length==0&&(delete h.g[C],h.h--))}}function He(h,_,C,D){for(var z=0;z<h.length;++z){var K=h[z];if(!K.da&&K.listener==_&&K.capture==!!C&&K.ha==D)return z}return-1}var Tt="closure_lm_"+(1e6*Math.random()|0),Wr={};function hi(h,_,C,D,z){if(Array.isArray(_)){for(var K=0;K<_.length;K++)hi(h,_[K],C,D,z);return null}return C=ot(C),h&&h[ge]?h.K(_,C,u(D)?!!D.capture:!!D,z):sa(h,_,C,!1,D,z)}function sa(h,_,C,D,z,K){if(!_)throw Error("Invalid event type");var ce=u(z)?!!z.capture:!!z,kt=ae(h);if(kt||(h[Tt]=kt=new Te(h)),C=kt.add(_,C,D,ce,K),C.proxy)return C;if(D=V(),C.proxy=D,D.src=h,D.listener=C,h.addEventListener)Xe||(z=ce),z===void 0&&(z=!1),h.addEventListener(_.toString(),D,z);else if(h.attachEvent)h.attachEvent(me(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return C}function V(){function h(C){return _.call(h.src,h.listener,C)}const _=ue;return h}function q(h,_,C,D,z){if(Array.isArray(_))for(var K=0;K<_.length;K++)q(h,_[K],C,D,z);else D=u(D)?!!D.capture:!!D,C=ot(C),h&&h[ge]?(h=h.i,_=String(_).toString(),_ in h.g&&(K=h.g[_],C=He(K,C,D,z),-1<C&&(de(K[C]),Array.prototype.splice.call(K,C,1),K.length==0&&(delete h.g[_],h.h--)))):h&&(h=ae(h))&&(_=h.g[_.toString()],h=-1,_&&(h=He(_,C,D,z)),(C=-1<h?_[h]:null)&&Z(C))}function Z(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ge])Oe(_.i,h);else{var C=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(C,D,h.capture):_.detachEvent?_.detachEvent(me(C),D):_.addListener&&_.removeListener&&_.removeListener(D),(C=ae(_))?(Oe(C,h),C.h==0&&(C.src=null,_[Tt]=null)):de(h)}}}function me(h){return h in Wr?Wr[h]:Wr[h]="on"+h}function ue(h,_){if(h.da)h=!0;else{_=new xt(_,this);var C=h.listener,D=h.ha||h.src;h.fa&&Z(h),h=C.call(D,_)}return h}function ae(h){return h=h[Tt],h instanceof Te?h:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(h){return typeof h=="function"?h:(h[Ie]||(h[Ie]=function(_){return h.handleEvent(_)}),h[Ie])}function nt(){ie.call(this),this.i=new Te(this),this.M=this,this.F=null}x(nt,ie),nt.prototype[ge]=!0,nt.prototype.removeEventListener=function(h,_,C,D){q(this,h,_,C,D)};function st(h,_){var C,D=h.F;if(D)for(C=[];D;D=D.F)C.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new Ce(_,h);else if(_ instanceof Ce)_.target=_.target||h;else{var z=_;_=new Ce(D,h),N(_,z)}if(z=!0,C)for(var K=C.length-1;0<=K;K--){var ce=_.g=C[K];z=Hr(ce,D,!0,_)&&z}if(ce=_.g=h,z=Hr(ce,D,!0,_)&&z,z=Hr(ce,D,!1,_)&&z,C)for(K=0;K<C.length;K++)ce=_.g=C[K],z=Hr(ce,D,!1,_)&&z}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var C=h.g[_],D=0;D<C.length;D++)de(C[D]);delete h.g[_],h.h--}}this.F=null},nt.prototype.K=function(h,_,C,D){return this.i.add(String(h),_,!1,C,D)},nt.prototype.L=function(h,_,C,D){return this.i.add(String(h),_,!0,C,D)};function Hr(h,_,C,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,K=0;K<_.length;++K){var ce=_[K];if(ce&&!ce.da&&ce.capture==C){var kt=ce.listener,kn=ce.ha||ce.src;ce.fa&&Oe(h.i,ce),z=kt.call(kn,D)!==!1&&z}}return z&&!D.defaultPrevented}function yf(h,_,C){if(typeof h=="function")C&&(h=m(h,C));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:l.setTimeout(h,_||0)}function Il(h){h.g=yf(()=>{h.g=null,h.i&&(h.i=!1,Il(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Su extends ie{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(h){ie.call(this),this.h=h,this.g={}}x(wo,ie);var Cu=[];function wf(h){M(h.g,function(_,C){this.g.hasOwnProperty(C)&&Z(_)},h),h.g={}}wo.prototype.N=function(){wo.aa.N.call(this),wf(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pl=l.JSON.stringify,D3=l.JSON.parse,M3=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function qv(){}qv.prototype.h=null;function Zj(h){return h.h||(h.h=h.i())}function Jj(){}var Tu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wv(){Ce.call(this,"d")}x(Wv,Ce);function Hv(){Ce.call(this,"c")}x(Hv,Ce);var bo={},e_=null;function bf(){return e_=e_||new nt}bo.La="serverreachability";function t_(h){Ce.call(this,bo.La,h)}x(t_,Ce);function ku(h){const _=bf();st(_,new t_(_))}bo.STAT_EVENT="statevent";function n_(h,_){Ce.call(this,bo.STAT_EVENT,h),this.stat=_}x(n_,Ce);function Jn(h){const _=bf();st(_,new n_(_,h))}bo.Ma="timingevent";function r_(h,_){Ce.call(this,bo.Ma,h),this.size=_}x(r_,Ce);function Iu(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},_)}function Pu(){this.g=!0}Pu.prototype.xa=function(){this.g=!1};function O3(h,_,C,D,z,K){h.info(function(){if(h.g)if(K)for(var ce="",kt=K.split("&"),kn=0;kn<kt.length;kn++){var dt=kt[kn].split("=");if(1<dt.length){var Un=dt[0];dt=dt[1];var $n=Un.split("_");ce=2<=$n.length&&$n[1]=="type"?ce+(Un+"="+dt+"&"):ce+(Un+"=redacted&")}}else ce=null;else ce=K;return"XMLHTTP REQ ("+D+") [attempt "+z+"]: "+_+`
`+C+`
`+ce})}function L3(h,_,C,D,z,K,ce){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+z+"]: "+_+`
`+C+`
`+K+" "+ce})}function Al(h,_,C,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+F3(h,C)+(D?" "+D:"")})}function V3(h,_){h.info(function(){return"TIMEOUT: "+_})}Pu.prototype.info=function(){};function F3(h,_){if(!h.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var D=C[h];if(!(2>D.length)){var z=D[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Pl(C)}catch{return _}}var jf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},s_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gv;function _f(){}x(_f,qv),_f.prototype.g=function(){return new XMLHttpRequest},_f.prototype.i=function(){return{}},Gv=new _f;function ia(h,_,C,D){this.j=h,this.i=_,this.l=C,this.R=D||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new i_}function i_(){this.i=null,this.g="",this.h=!1}var a_={},Kv={};function Yv(h,_,C){h.L=1,h.v=Cf(fi(_)),h.m=C,h.P=!0,o_(h,null)}function o_(h,_){h.F=Date.now(),Nf(h),h.A=fi(h.v);var C=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),b_(C.i,"t",D),h.C=0,C=h.j.J,h.h=new i_,h.g=F_(h.j,C?_:null,!h.m),0<h.O&&(h.M=new Su(m(h.Y,h,h.g),h.O)),_=h.U,C=h.g,D=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Cu[0]=z.toString()),z=Cu);for(var K=0;K<z.length;K++){var ce=hi(C,z[K],D||_.handleEvent,!1,_.h||_);if(!ce)break;_.g[ce.key]=ce}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ku(),O3(h.i,h.u,h.A,h.l,h.R,h.m)}ia.prototype.ca=function(h){h=h.target;const _=this.M;_&&mi(h)==3?_.j():this.Y(h)},ia.prototype.Y=function(h){try{if(h==this.g)e:{const $n=mi(this.g);var _=this.g.Ba();const Ml=this.g.Z();if(!(3>$n)&&($n!=3||this.g&&(this.h.h||this.g.oa()||T_(this.g)))){this.J||$n!=4||_==7||(_==8||0>=Ml?ku(3):ku(2)),Qv(this);var C=this.g.Z();this.X=C;t:if(l_(this)){var D=T_(this.g);h="";var z=D.length,K=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jo(this),Au(this);var ce="";break t}this.h.i=new l.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(K&&_==z-1)});D.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=C==200,L3(this.i,this.u,this.A,this.l,this.R,$n,C),this.o){if(this.T&&!this.K){t:{if(this.g){var kt,kn=this.g;if((kt=kn.g?kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(kt)){var dt=kt;break t}}dt=null}if(C=dt)Al(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xv(this,C);else{this.o=!1,this.s=3,Jn(12),jo(this),Au(this);break e}}if(this.P){C=!0;let os;for(;!this.J&&this.C<ce.length;)if(os=U3(this,ce),os==Kv){$n==4&&(this.s=4,Jn(14),C=!1),Al(this.i,this.l,null,"[Incomplete Response]");break}else if(os==a_){this.s=4,Jn(15),Al(this.i,this.l,ce,"[Invalid Chunk]"),C=!1;break}else Al(this.i,this.l,os,null),Xv(this,os);if(l_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$n!=4||ce.length!=0||this.h.h||(this.s=1,Jn(16),C=!1),this.o=this.o&&C,!C)Al(this.i,this.l,ce,"[Invalid Chunked Response]"),jo(this),Au(this);else if(0<ce.length&&!this.W){this.W=!0;var Un=this.j;Un.g==this&&Un.ba&&!Un.M&&(Un.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),rx(Un),Un.M=!0,Jn(11))}}else Al(this.i,this.l,ce,null),Xv(this,ce);$n==4&&jo(this),this.o&&!this.J&&($n==4?M_(this.j,this):(this.o=!1,Nf(this)))}else r5(this.g),C==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Jn(12)):(this.s=0,Jn(13)),jo(this),Au(this)}}}catch{}finally{}};function l_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function U3(h,_){var C=h.C,D=_.indexOf(`
`,C);return D==-1?Kv:(C=Number(_.substring(C,D)),isNaN(C)?a_:(D+=1,D+C>_.length?Kv:(_=_.slice(D,D+C),h.C=D+C,_)))}ia.prototype.cancel=function(){this.J=!0,jo(this)};function Nf(h){h.S=Date.now()+h.I,c_(h,h.I)}function c_(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Iu(m(h.ba,h),_)}function Qv(h){h.B&&(l.clearTimeout(h.B),h.B=null)}ia.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(V3(this.i,this.A),this.L!=2&&(ku(),Jn(17)),jo(this),this.s=2,Au(this)):c_(this,this.S-h)};function Au(h){h.j.G==0||h.J||M_(h.j,h)}function jo(h){Qv(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,wf(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Xv(h,_){try{var C=h.j;if(C.G!=0&&(C.g==h||Zv(C.h,h))){if(!h.K&&Zv(C.h,h)&&C.G==3){try{var D=C.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var z=D;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Rf(C),Pf(C);else break e;nx(C),Jn(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=Iu(m(C.Za,C),6e3));if(1>=h_(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else No(C,11)}else if((h.K||C.g==h)&&Rf(C),!g(_))for(z=C.Da.g.parse(_),_=0;_<z.length;_++){let dt=z[_];if(C.T=dt[0],dt=dt[1],C.G==2)if(dt[0]=="c"){C.K=dt[1],C.ia=dt[2];const Un=dt[3];Un!=null&&(C.la=Un,C.j.info("VER="+C.la));const $n=dt[4];$n!=null&&(C.Aa=$n,C.j.info("SVER="+C.Aa));const Ml=dt[5];Ml!=null&&typeof Ml=="number"&&0<Ml&&(D=1.5*Ml,C.L=D,C.j.info("backChannelRequestTimeoutMs_="+D)),D=C;const os=h.g;if(os){const Mf=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mf){var K=D.h;K.g||Mf.indexOf("spdy")==-1&&Mf.indexOf("quic")==-1&&Mf.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Jv(K,K.h),K.h=null))}if(D.D){const sx=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;sx&&(D.ya=sx,Rt(D.I,D.D,sx))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),D=C;var ce=h;if(D.qa=V_(D,D.J?D.ia:null,D.W),ce.K){f_(D.h,ce);var kt=ce,kn=D.L;kn&&(kt.I=kn),kt.B&&(Qv(kt),Nf(kt)),D.g=ce}else R_(D);0<C.i.length&&Af(C)}else dt[0]!="stop"&&dt[0]!="close"||No(C,7);else C.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?No(C,7):tx(C):dt[0]!="noop"&&C.l&&C.l.ta(dt),C.v=0)}}ku(4)}catch{}}var $3=class{constructor(h,_){this.g=h,this.map=_}};function u_(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function d_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function h_(h){return h.h?1:h.g?h.g.size:0}function Zv(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Jv(h,_){h.g?h.g.add(_):h.h=_}function f_(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}u_.prototype.cancel=function(){if(this.i=m_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function m_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const C of h.g.values())_=_.concat(C.D);return _}return w(h.i)}function z3(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],C=h.length,D=0;D<C;D++)_.push(h[D]);return _}_=[],C=0;for(D in h)_[C++]=h[D];return _}function B3(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var C=0;C<h;C++)_.push(C);return _}_=[],C=0;for(const D in h)_[C++]=D;return _}}}function p_(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var C=B3(h),D=z3(h),z=D.length,K=0;K<z;K++)_.call(void 0,D[K],C&&C[K],h)}var g_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q3(h,_){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var D=h[C].indexOf("="),z=null;if(0<=D){var K=h[C].substring(0,D);z=h[C].substring(D+1)}else K=h[C];_(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function _o(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof _o){this.h=h.h,Ef(this,h.j),this.o=h.o,this.g=h.g,Sf(this,h.s),this.l=h.l;var _=h.i,C=new Mu;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),v_(this,C),this.m=h.m}else h&&(_=String(h).match(g_))?(this.h=!1,Ef(this,_[1]||"",!0),this.o=Ru(_[2]||""),this.g=Ru(_[3]||"",!0),Sf(this,_[4]),this.l=Ru(_[5]||"",!0),v_(this,_[6]||"",!0),this.m=Ru(_[7]||"")):(this.h=!1,this.i=new Mu(null,this.h))}_o.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Du(_,x_,!0),":");var C=this.g;return(C||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Du(_,x_,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Du(C,C.charAt(0)=="/"?G3:H3,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Du(C,Y3)),h.join("")};function fi(h){return new _o(h)}function Ef(h,_,C){h.j=C?Ru(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Sf(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function v_(h,_,C){_ instanceof Mu?(h.i=_,Q3(h.i,h.h)):(C||(_=Du(_,K3)),h.i=new Mu(_,h.h))}function Rt(h,_,C){h.i.set(_,C)}function Cf(h){return Rt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ru(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Du(h,_,C){return typeof h=="string"?(h=encodeURI(h).replace(_,W3),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function W3(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var x_=/[#\/\?@]/g,H3=/[#\?:]/g,G3=/[#\?]/g,K3=/[#\?@]/g,Y3=/#/g;function Mu(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function aa(h){h.g||(h.g=new Map,h.h=0,h.i&&q3(h.i,function(_,C){h.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Mu.prototype,t.add=function(h,_){aa(this),this.i=null,h=Rl(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(_),this.h+=1,this};function y_(h,_){aa(h),_=Rl(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function w_(h,_){return aa(h),_=Rl(h,_),h.g.has(_)}t.forEach=function(h,_){aa(this),this.g.forEach(function(C,D){C.forEach(function(z){h.call(_,z,D,this)},this)},this)},t.na=function(){aa(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let D=0;D<_.length;D++){const z=h[D];for(let K=0;K<z.length;K++)C.push(_[D])}return C},t.V=function(h){aa(this);let _=[];if(typeof h=="string")w_(this,h)&&(_=_.concat(this.g.get(Rl(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)_=_.concat(h[C])}return _},t.set=function(h,_){return aa(this),this.i=null,h=Rl(this,h),w_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function b_(h,_,C){y_(h,_),0<C.length&&(h.i=null,h.g.set(Rl(h,_),w(C)),h.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var D=_[C];const K=encodeURIComponent(String(D)),ce=this.V(D);for(D=0;D<ce.length;D++){var z=K;ce[D]!==""&&(z+="="+encodeURIComponent(String(ce[D]))),h.push(z)}}return this.i=h.join("&")};function Rl(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Q3(h,_){_&&!h.j&&(aa(h),h.i=null,h.g.forEach(function(C,D){var z=D.toLowerCase();D!=z&&(y_(this,D),b_(this,z,C))},h)),h.j=_}function X3(h,_){const C=new Pu;if(l.Image){const D=new Image;D.onload=v(oa,C,"TestLoadImage: loaded",!0,_,D),D.onerror=v(oa,C,"TestLoadImage: error",!1,_,D),D.onabort=v(oa,C,"TestLoadImage: abort",!1,_,D),D.ontimeout=v(oa,C,"TestLoadImage: timeout",!1,_,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function Z3(h,_){const C=new Pu,D=new AbortController,z=setTimeout(()=>{D.abort(),oa(C,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(K=>{clearTimeout(z),K.ok?oa(C,"TestPingServer: ok",!0,_):oa(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),oa(C,"TestPingServer: error",!1,_)})}function oa(h,_,C,D,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),D(C)}catch{}}function J3(){this.g=new M3}function e5(h,_,C){const D=C||"";try{p_(h,function(z,K){let ce=z;u(z)&&(ce=Pl(z)),_.push(D+K+"="+encodeURIComponent(ce))})}catch(z){throw _.push(D+"type="+encodeURIComponent("_badmap")),z}}function Tf(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Tf,qv),Tf.prototype.g=function(){return new kf(this.l,this.j)},Tf.prototype.i=function(h){return function(){return h}}({});function kf(h,_){nt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(kf,nt),t=kf.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Lu(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||l).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ou(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Lu(this)),this.g&&(this.readyState=3,Lu(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function j_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ou(this):Lu(this),this.readyState==3&&j_(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Ou(this))},t.Qa=function(h){this.g&&(this.response=h,Ou(this))},t.ga=function(){this.g&&Ou(this)};function Ou(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Lu(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=_.next();return h.join(`\r
`)};function Lu(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function __(h){let _="";return M(h,function(C,D){_+=D,_+=":",_+=C,_+=`\r
`}),_}function ex(h,_,C){e:{for(D in C){var D=!1;break e}D=!0}D||(C=__(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Rt(h,_,C))}function Qt(h){nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Qt,nt);var t5=/^https?$/i,n5=["POST","PUT"];t=Qt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,C,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gv.g(),this.v=this.o?Zj(this.o):Zj(Gv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(K){N_(this,K);return}if(h=C||"",C=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var z in D)C.set(z,D[z]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const K of D.keys())C.set(K,D.get(K));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),z=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(n5,_,void 0))||D||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of C)this.g.setRequestHeader(K,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{C_(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){N_(this,K)}};function N_(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,E_(h),If(h)}function E_(h){h.A||(h.A=!0,st(h,"complete"),st(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,st(this,"complete"),st(this,"abort"),If(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),If(this,!0)),Qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?S_(this):this.bb())},t.bb=function(){S_(this)};function S_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||mi(h)!=4||h.Z()!=2)){if(h.u&&mi(h)==4)yf(h.Ea,0,h);else if(st(h,"readystatechange"),mi(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var D;if(D=ce===0){var z=String(h.D).match(g_)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),D=!t5.test(z?z.toLowerCase():"")}C=D}if(C)st(h,"complete"),st(h,"success");else{h.m=6;try{var K=2<mi(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",E_(h)}}finally{If(h)}}}}function If(h,_){if(h.g){C_(h);const C=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||st(h,"ready");try{C.onreadystatechange=D}catch{}}}function C_(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function mi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),D3(_)}};function T_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function r5(h){const _={};h=(h.g&&2<=mi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(g(h[D]))continue;var C=P(h[D]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=_[z]||[];_[z]=K,K.push(C)}k(_,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vu(h,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||_}function k_(h){this.Aa=0,this.i=[],this.j=new Pu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vu("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vu("baseRetryDelayMs",5e3,h),this.cb=Vu("retryDelaySeedMs",1e4,h),this.Wa=Vu("forwardChannelMaxRetries",2,h),this.wa=Vu("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new u_(h&&h.concurrentRequestLimit),this.Da=new J3,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=k_.prototype,t.la=8,t.G=1,t.connect=function(h,_,C,D){Jn(0),this.W=h,this.H=_||{},C&&D!==void 0&&(this.H.OSID=C,this.H.OAID=D),this.F=this.X,this.I=V_(this,null,this.W),Af(this)};function tx(h){if(I_(h),h.G==3){var _=h.U++,C=fi(h.I);if(Rt(C,"SID",h.K),Rt(C,"RID",_),Rt(C,"TYPE","terminate"),Fu(h,C),_=new ia(h,h.j,_),_.L=2,_.v=Cf(fi(C)),C=!1,l.navigator&&l.navigator.sendBeacon)try{C=l.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&l.Image&&(new Image().src=_.v,C=!0),C||(_.g=F_(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Nf(_)}L_(h)}function Pf(h){h.g&&(rx(h),h.g.cancel(),h.g=null)}function I_(h){Pf(h),h.u&&(l.clearTimeout(h.u),h.u=null),Rf(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function Af(h){if(!d_(h.h)&&!h.s){h.s=!0;var _=h.Ga;L||U(),O||(L(),O=!0),B.add(_,h),h.B=0}}function s5(h,_){return h_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Iu(m(h.Ga,h,_),O_(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new ia(this,this.j,h);let K=this.o;if(this.S&&(K?(K=I(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var D=this.i[C];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=A_(this,z,_),C=fi(this.I),Rt(C,"RID",h),Rt(C,"CVER",22),this.D&&Rt(C,"X-HTTP-Session-Id",this.D),Fu(this,C),K&&(this.O?_="headers="+encodeURIComponent(String(__(K)))+"&"+_:this.m&&ex(C,this.m,K)),Jv(this.h,z),this.Ua&&Rt(C,"TYPE","init"),this.P?(Rt(C,"$req",_),Rt(C,"SID","null"),z.T=!0,Yv(z,C,null)):Yv(z,C,_),this.G=2}}else this.G==3&&(h?P_(this,h):this.i.length==0||d_(this.h)||P_(this))};function P_(h,_){var C;_?C=_.l:C=h.U++;const D=fi(h.I);Rt(D,"SID",h.K),Rt(D,"RID",C),Rt(D,"AID",h.T),Fu(h,D),h.m&&h.o&&ex(D,h.m,h.o),C=new ia(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),_&&(h.i=_.D.concat(h.i)),_=A_(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Jv(h.h,C),Yv(C,D,_)}function Fu(h,_){h.H&&M(h.H,function(C,D){Rt(_,D,C)}),h.l&&p_({},function(C,D){Rt(_,D,C)})}function A_(h,_,C){C=Math.min(h.i.length,C);var D=h.l?m(h.l.Na,h.l,h):null;e:{var z=h.i;let K=-1;for(;;){const ce=["count="+C];K==-1?0<C?(K=z[0].g,ce.push("ofs="+K)):K=0:ce.push("ofs="+K);let kt=!0;for(let kn=0;kn<C;kn++){let dt=z[kn].g;const Un=z[kn].map;if(dt-=K,0>dt)K=Math.max(0,z[kn].g-100),kt=!1;else try{e5(Un,ce,"req"+dt+"_")}catch{D&&D(Un)}}if(kt){D=ce.join("&");break e}}}return h=h.i.splice(0,C),_.D=h,D}function R_(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;L||U(),O||(L(),O=!0),B.add(_,h),h.v=0}}function nx(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Iu(m(h.Fa,h),O_(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,D_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Iu(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jn(10),Pf(this),D_(this))};function rx(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function D_(h){h.g=new ia(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=fi(h.qa);Rt(_,"RID","rpc"),Rt(_,"SID",h.K),Rt(_,"AID",h.T),Rt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Rt(_,"TO",h.ja),Rt(_,"TYPE","xmlhttp"),Fu(h,_),h.m&&h.o&&ex(_,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Cf(fi(_)),C.m=null,C.P=!0,o_(C,h)}t.Za=function(){this.C!=null&&(this.C=null,Pf(this),nx(this),Jn(19))};function Rf(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function M_(h,_){var C=null;if(h.g==_){Rf(h),rx(h),h.g=null;var D=2}else if(Zv(h.h,_))C=_.D,f_(h.h,_),D=1;else return;if(h.G!=0){if(_.o)if(D==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;D=bf(),st(D,new r_(D,C)),Af(h)}else R_(h);else if(z=_.s,z==3||z==0&&0<_.X||!(D==1&&s5(h,_)||D==2&&nx(h)))switch(C&&0<C.length&&(_=h.h,_.i=_.i.concat(C)),z){case 1:No(h,5);break;case 4:No(h,10);break;case 3:No(h,6);break;default:No(h,2)}}}function O_(h,_){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*_}function No(h,_){if(h.j.info("Error code "+_),_==2){var C=m(h.fb,h),D=h.Xa;const z=!D;D=new _o(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ef(D,"https"),Cf(D),z?X3(D.toString(),C):Z3(D.toString(),C)}else Jn(2);h.G=0,h.l&&h.l.sa(_),L_(h),I_(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Jn(2)):(this.j.info("Failed to ping google.com"),Jn(1))};function L_(h){if(h.G=0,h.ka=[],h.l){const _=m_(h.h);(_.length!=0||h.i.length!=0)&&(j(h.ka,_),j(h.ka,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.ra()}}function V_(h,_,C){var D=C instanceof _o?fi(C):new _o(C);if(D.g!="")_&&(D.g=_+"."+D.g),Sf(D,D.s);else{var z=l.location;D=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var K=new _o(null);D&&Ef(K,D),_&&(K.g=_),z&&Sf(K,z),C&&(K.l=C),D=K}return C=h.D,_=h.ya,C&&_&&Rt(D,C,_),Rt(D,"VER",h.la),Fu(h,D),D}function F_(h,_,C){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Qt(new Tf({eb:C})):new Qt(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function U_(){}t=U_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Df(){}Df.prototype.g=function(h,_){return new kr(h,_)};function kr(h,_){nt.call(this),this.g=new k_(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!g(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!g(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Dl(this)}x(kr,nt),kr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kr.prototype.close=function(){tx(this.g)},kr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Pl(h),h=C);_.i.push(new $3(_.Ya++,h)),_.G==3&&Af(_)},kr.prototype.N=function(){this.g.l=null,delete this.j,tx(this.g),delete this.g,kr.aa.N.call(this)};function $_(h){Wv.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const C in _){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x($_,Wv);function z_(){Hv.call(this),this.status=1}x(z_,Hv);function Dl(h){this.g=h}x(Dl,U_),Dl.prototype.ua=function(){st(this.g,"a")},Dl.prototype.ta=function(h){st(this.g,new $_(h))},Dl.prototype.sa=function(h){st(this.g,new z_)},Dl.prototype.ra=function(){st(this.g,"b")},Df.prototype.createWebChannel=Df.prototype.g,kr.prototype.send=kr.prototype.o,kr.prototype.open=kr.prototype.m,kr.prototype.close=kr.prototype.close,VI=function(){return new Df},LI=function(){return bf()},OI=bo,T0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Lm=jf,s_.COMPLETE="complete",MI=s_,Jj.EventType=Tu,Tu.OPEN="a",Tu.CLOSE="b",Tu.ERROR="c",Tu.MESSAGE="d",nt.prototype.listen=nt.prototype.K,od=Jj,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,DI=Qt}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});const $2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new C1("@firebase/firestore");function Ku(){return al.logLevel}function Se(t,...e){if(al.logLevel<=rt.DEBUG){const n=e.map(U1);al.debug(`Firestore (${uu}): ${t}`,...n)}}function zi(t,...e){if(al.logLevel<=rt.ERROR){const n=e.map(U1);al.error(`Firestore (${uu}): ${t}`,...n)}}function Mc(t,...e){if(al.logLevel<=rt.WARN){const n=e.map(U1);al.warn(`Firestore (${uu}): ${t}`,...n)}}function U1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t="Unexpected state"){const e=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function _t(t,e){t||$e()}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wn.UNAUTHENTICATED))}shutdown(){}}class k${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I${constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ii,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ii)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string"),new FI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Wn(e)}}class P${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class A${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new P$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_t(this.o===void 0);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_t(typeof n.token=="string"),this.R=n.token,new R$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=M$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function Oc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Nn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Nn(0,0))}static max(){return new Be(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r){n===void 0?n=0:n>e.length&&$e(),r===void 0?r=e.length-n:r>e.length-n&&$e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class It extends Zd{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new It(n)}static emptyPath(){return new It([])}}const O$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Zd{construct(e,n,r){return new An(e,n,r)}static isValidIdentifier(e){return O$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(It.fromString(e))}static fromName(e){return new De(It.fromString(e).popFirst(5))}static empty(){return new De(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new It(e.slice()))}}function L$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(r===1e9?new Nn(n+1,0):new Nn(n,r));return new Ga(i,De.empty(),e)}function V$(t){return new Ga(t.readTime,t.key,-1)}class Ga{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ga(Be.min(),De.empty(),-1)}static max(){return new Ga(Be.max(),De.empty(),-1)}}function F$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==U$)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&n()},c=>r(c))}),o=!0,a===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>i(d))}})}static doWhile(e,n){return new ne((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function z$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$1.oe=-1;function Wg(t){return t==null}function Rp(t){return t===0&&1/t==-1/0}function B$(t){return typeof t=="number"&&Number.isInteger(t)&&!Rp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.comparator=e,this.root=n||Pn.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Pn.RED,this.left=i??Pn.EMPTY,this.right=a??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Pn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $e();const e=this.left.check();if(e!==this.right.check())throw $e();return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e()}get value(){throw $e()}get color(){throw $e()}get left(){throw $e()}get right(){throw $e()}copy(e,n,r,i,a){return this}insert(e,n,r){return new Pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B2(this.data.getIterator())}getIteratorFrom(e){return new B2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class B2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new Dr([])}unionWith(e){let n=new Mn(An.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zI("Invalid base64 string: "+a):a}}(e);return new Ln(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const q$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(t){if(_t(!!t),typeof t=="string"){let e=0;const n=q$.exec(t);if(_t(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(t.seconds),nanos:rn(t.nanos)}}function rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ol(t){return typeof t=="string"?Ln.fromBase64String(t):Ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function z1(t){const e=t.mapValue.fields.__previous_value__;return Hg(e)?z1(e):e}function Jd(t){const e=Ka(t.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n,r,i,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class eh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ll(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hg(t)?4:G$(t)?9007199254740991:H$(t)?10:11:$e()}function ni(t,e){if(t===e)return!0;const n=ll(t);if(n!==ll(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jd(t).isEqual(Jd(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ka(i.timestampValue),l=Ka(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ol(i.bytesValue).isEqual(ol(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return rn(i.geoPointValue.latitude)===rn(a.geoPointValue.latitude)&&rn(i.geoPointValue.longitude)===rn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return rn(i.integerValue)===rn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=rn(i.doubleValue),l=rn(a.doubleValue);return o===l?Rp(o)===Rp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Oc(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(z2(o)!==z2(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ni(o[c],l[c])))return!1;return!0}(t,e);default:return $e()}}function th(t,e){return(t.values||[]).find(n=>ni(n,e))!==void 0}function Lc(t,e){if(t===e)return 0;const n=ll(t),r=ll(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=rn(a.integerValue||a.doubleValue),c=rn(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return q2(t.timestampValue,e.timestampValue);case 4:return q2(Jd(t),Jd(e));case 5:return ht(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ol(a),c=ol(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=ht(l[u],c[u]);if(d!==0)return d}return ht(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ht(rn(a.latitude),rn(o.latitude));return l!==0?l:ht(rn(a.longitude),rn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return W2(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const f=a.fields||{},m=o.fields||{},v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=ht(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:W2(v,x)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===rm.mapValue&&o===rm.mapValue)return 0;if(a===rm.mapValue)return 1;if(o===rm.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=ht(c[f],d[f]);if(m!==0)return m;const v=Lc(l[c[f]],u[d[f]]);if(v!==0)return v}return ht(c.length,d.length)}(t.mapValue,e.mapValue);default:throw $e()}}function q2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=Ka(t),r=Ka(e),i=ht(n.seconds,r.seconds);return i!==0?i:ht(n.nanos,r.nanos)}function W2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Lc(n[i],r[i]);if(a)return a}return ht(n.length,r.length)}function Vc(t){return k0(t)}function k0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ka(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ol(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return De.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=k0(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${k0(n.fields[o])}`;return i+"}"}(t.mapValue):$e()}function Dp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I0(t){return!!t&&"integerValue"in t}function B1(t){return!!t&&"arrayValue"in t}function H2(t){return!!t&&"nullValue"in t}function G2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vm(t){return!!t&&"mapValue"in t}function H$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Sd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function G$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sd(n)}setAll(e){let n=An.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Sd(o):i.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Vm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jl(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new wr(Sd(this.value))}}function BI(t){const e=[];return jl(t.fields,(n,r)=>{const i=new An([n]);if(Vm(r)){const a=BI(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,r,i,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gn(e,0,Be.min(),Be.min(),Be.min(),wr.empty(),0)}static newFoundDocument(e,n,r,i){return new Gn(e,1,n,Be.min(),r,i,0)}static newNoDocument(e,n){return new Gn(e,2,n,Be.min(),Be.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new Gn(e,3,n,Be.min(),Be.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.position=e,this.inclusive=n}}function K2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),n.key):r=Lc(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ni(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function K$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qI=class{};class dn extends qI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Q$(e,n,r):n==="array-contains"?new J$(e,r):n==="in"?new e7(e,r):n==="not-in"?new t7(e,r):n==="array-contains-any"?new n7(e,r):new dn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X$(e,r):new Z$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lc(n,this.value)):n!==null&&ll(this.value)===ll(n)&&this.matchesComparison(Lc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Es extends qI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Es(e,n)}matches(e){return WI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WI(t){return t.op==="and"}function HI(t){return Y$(t)&&WI(t)}function Y$(t){for(const e of t.filters)if(e instanceof Es)return!1;return!0}function P0(t){if(t instanceof dn)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(HI(t))return t.filters.map(e=>P0(e)).join(",");{const e=t.filters.map(n=>P0(n)).join(",");return`${t.op}(${e})`}}function GI(t,e){return t instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.field.isEqual(i.field)&&ni(r.value,i.value)}(t,e):t instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,l)=>a&&GI(o,i.filters[l]),!0):!1}(t,e):void $e()}function KI(t){return t instanceof dn?function(n){return`${n.field.canonicalString()} ${n.op} ${Vc(n.value)}`}(t):t instanceof Es?function(n){return n.op.toString()+" {"+n.getFilters().map(KI).join(" ,")+"}"}(t):"Filter"}class Q$ extends dn{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class X$ extends dn{constructor(e,n){super(e,"in",n),this.keys=YI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z$ extends dn{constructor(e,n){super(e,"not-in",n),this.keys=YI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>De.fromName(r.referenceValue))}class J$ extends dn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return B1(n)&&th(n.arrayValue,this.value)}}class e7 extends dn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&th(this.value.arrayValue,n)}}class t7 extends dn{constructor(e,n){super(e,"not-in",n)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!th(this.value.arrayValue,n)}}class n7 extends dn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!B1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>th(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n=null,r=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function Q2(t,e=null,n=[],r=[],i=null,a=null,o=null){return new r7(t,e,n,r,i,a,o)}function q1(t){const e=qe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>P0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Wg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e.ue=n}return e.ue}function W1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y2(t.startAt,e.startAt)&&Y2(t.endAt,e.endAt)}function A0(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function s7(t,e,n,r,i,a,o,l){return new _l(t,e,n,r,i,a,o,l)}function Gg(t){return new _l(t)}function X2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H1(t){return t.collectionGroup!==null}function xc(t){const e=qe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Mn(An.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new nh(a,r))}),n.has(An.keyField().canonicalString())||e.ce.push(new nh(An.keyField(),r))}return e.ce}function Xs(t){const e=qe(t);return e.le||(e.le=i7(e,xc(t))),e.le}function i7(t,e){if(t.limitType==="F")return Q2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new nh(i.field,a)});const n=t.endAt?new Fc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fc(t.startAt.position,t.startAt.inclusive):null;return Q2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R0(t,e){const n=t.filters.concat([e]);return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mp(t,e,n){return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kg(t,e){return W1(Xs(t),Xs(e))&&t.limitType===e.limitType}function QI(t){return`${q1(Xs(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>KI(i)).join(", ")}]`),Wg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vc(i)).join(",")),`Target(${r})`}(Xs(t))}; limitType=${t.limitType})`}function Yg(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):De.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of xc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=K2(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,xc(r),i)||r.endAt&&!function(o,l,c){const u=K2(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,xc(r),i))}(t,e)}function a7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XI(t){return(e,n)=>{let r=!1;for(const i of xc(t)){const a=o7(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function o7(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Lc(c,u):$e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return $I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=new Kt(De.comparator);function Bi(){return l7}const ZI=new Kt(De.comparator);function ld(...t){let e=ZI;for(const n of t)e=e.insert(n.key,n);return e}function JI(t){let e=ZI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lo(){return Cd()}function eP(){return Cd()}function Cd(){return new du(t=>t.toString(),(t,e)=>t.isEqual(e))}const c7=new Kt(De.comparator),u7=new Mn(De.comparator);function et(...t){let e=u7;for(const n of t)e=e.add(n);return e}const d7=new Mn(ht);function h7(){return d7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rp(e)?"-0":e}}function tP(t){return{integerValue:""+t}}function f7(t,e){return B$(e)?tP(e):G1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this._=void 0}}function m7(t,e,n){return t instanceof rh?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Hg(a)&&(a=z1(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof sh?rP(t,e):t instanceof ih?sP(t,e):function(i,a){const o=nP(i,a),l=Z2(o)+Z2(i.Pe);return I0(o)&&I0(i.Pe)?tP(l):G1(i.serializer,l)}(t,e)}function p7(t,e,n){return t instanceof sh?rP(t,e):t instanceof ih?sP(t,e):n}function nP(t,e){return t instanceof Op?function(r){return I0(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class rh extends Qg{}class sh extends Qg{constructor(e){super(),this.elements=e}}function rP(t,e){const n=iP(e);for(const r of t.elements)n.some(i=>ni(i,r))||n.push(r);return{arrayValue:{values:n}}}class ih extends Qg{constructor(e){super(),this.elements=e}}function sP(t,e){let n=iP(e);for(const r of t.elements)n=n.filter(i=>!ni(i,r));return{arrayValue:{values:n}}}class Op extends Qg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Z2(t){return rn(t.integerValue||t.doubleValue)}function iP(t){return B1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,n){this.field=e,this.transform=n}}function v7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof sh&&i instanceof sh||r instanceof ih&&i instanceof ih?Oc(r.elements,i.elements,ni):r instanceof Op&&i instanceof Op?ni(r.Pe,i.Pe):r instanceof rh&&i instanceof rh}(t.transform,e.transform)}class x7{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xg{}function aP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zg(t.key,ur.none()):new qh(t.key,t.data,ur.none());{const n=t.data,r=wr.empty();let i=new Mn(An.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new fo(t.key,r,new Dr(i.toArray()),ur.none())}}function y7(t,e,n){t instanceof qh?function(i,a,o){const l=i.value.clone(),c=eE(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fo?function(i,a,o){if(!Fm(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=eE(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(oP(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Td(t,e,n,r){return t instanceof qh?function(a,o,l,c){if(!Fm(a.precondition,o))return l;const u=a.value.clone(),d=tE(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof fo?function(a,o,l,c){if(!Fm(a.precondition,o))return l;const u=tE(a.fieldTransforms,c,o),d=o.data;return d.setAll(oP(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,o,l){return Fm(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function w7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=nP(r.transform,i||null);a!=null&&(n===null&&(n=wr.empty()),n.set(r.field,a))}return n||null}function J2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oc(r,i,(a,o)=>v7(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qh extends Xg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fo extends Xg{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eE(t,e,n){const r=new Map;_t(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);r.set(a.field,p7(o,l,n[i]))}return r}function tE(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,m7(a,o,e))}return r}class Zg extends Xg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b7 extends Xg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&y7(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Td(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Td(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eP();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(i.key)?null:l;const c=aP(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&Oc(this.mutations,e.mutations,(n,r)=>J2(n,r))&&Oc(this.baseMutations,e.baseMutations,(n,r)=>J2(n,r))}}class K1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_t(e.mutations.length===r.length);let i=function(){return c7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new K1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _7=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,it;function E7(t){switch(t){default:return $e();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function lP(t){if(t===void 0)return zi("GRPC error has no .code"),J.UNKNOWN;switch(t){case cn.OK:return J.OK;case cn.CANCELLED:return J.CANCELLED;case cn.UNKNOWN:return J.UNKNOWN;case cn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case cn.INTERNAL:return J.INTERNAL;case cn.UNAVAILABLE:return J.UNAVAILABLE;case cn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case cn.NOT_FOUND:return J.NOT_FOUND;case cn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case cn.ABORTED:return J.ABORTED;case cn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case cn.DATA_LOSS:return J.DATA_LOSS;default:return $e()}}(it=cn||(cn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=new $o([4294967295,4294967295],0);function nE(t){const e=S7().encode(t),n=new RI;return n.update(e),new Uint8Array(n.digest())}function rE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $o([n,r],0),new $o([i,a],0)]}class Y1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cd(`Invalid padding: ${n}`);if(r<0)throw new cd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($o.fromNumber(r)));return i.compare(C7)===1&&(i=new $o([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nE(e),[r,i]=rE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Y1(a,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=nE(e),[r,i]=rE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jg(Be.min(),i,new Kt(ht),Bi(),et())}}class Wh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wh(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cP{constructor(e,n){this.targetId=e,this.me=n}}class uP{constructor(e,n,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sE{constructor(){this.fe=0,this.ge=aE(),this.pe=Ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=et(),n=et(),r=et();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$e()}}),new Wh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=aE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class T7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bi(),this.qe=iE(),this.Qe=new Kt(ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:$e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(A0(a))if(r===0){const o=new De(a.path);this.Ue(n,o,Gn.newNoDocument(o,Be.min()))}else _t(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=ol(r).toUint8Array()}catch(c){if(c instanceof zI)return Mc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Y1(o,i,a)}catch(c){return Mc(c instanceof cd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&A0(l.target)){const c=new De(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Gn.newNoDocument(c,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=et();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Jg(e,n,this.Qe,this.ke,r);return this.ke=Bi(),this.qe=iE(),this.Qe=new Kt(ht),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Mn(ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iE(){return new Kt(De.comparator)}function aE(){return new Kt(De.comparator)}const k7={asc:"ASCENDING",desc:"DESCENDING"},I7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P7={and:"AND",or:"OR"};class A7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function D0(t,e){return t.useProto3Json||Wg(e)?e:{value:e}}function Lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R7(t,e){return Lp(t,e.toTimestamp())}function Zs(t){return _t(!!t),Be.fromTimestamp(function(n){const r=Ka(n);return new Nn(r.seconds,r.nanos)}(t))}function Q1(t,e){return M0(t,e).canonicalString()}function M0(t,e){const n=function(i){return new It(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hP(t){const e=It.fromString(t);return _t(vP(e)),e}function O0(t,e){return Q1(t.databaseId,e.path)}function Fx(t,e){const n=hP(e);if(n.get(1)!==t.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(mP(n))}function fP(t,e){return Q1(t.databaseId,e)}function D7(t){const e=hP(t);return e.length===4?It.emptyPath():mP(e)}function L0(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mP(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function oE(t,e,n){return{name:O0(t,e),fields:n.value.mapValue.fields}}function M7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:$e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(_t(d===void 0||typeof d=="string"),Ln.fromBase64String(d||"")):(_t(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ln.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?J.UNKNOWN:lP(u.code);return new he(d,u.message||"")}(o);n=new uP(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fx(t,r.document.name),a=Zs(r.document.updateTime),o=r.document.createTime?Zs(r.document.createTime):Be.min(),l=new wr({mapValue:{fields:r.document.fields}}),c=Gn.newFoundDocument(i,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Um(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fx(t,r.document),a=r.readTime?Zs(r.readTime):Be.min(),o=Gn.newNoDocument(i,a),l=r.removedTargetIds||[];n=new Um([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fx(t,r.document),a=r.removedTargetIds||[];n=new Um([],a,i,null)}else{if(!("filter"in e))return $e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new N7(i,a),l=r.targetId;n=new cP(l,o)}}return n}function O7(t,e){let n;if(e instanceof qh)n={update:oE(t,e.key,e.value)};else if(e instanceof Zg)n={delete:O0(t,e.key)};else if(e instanceof fo)n={update:oE(t,e.key,e.data),updateMask:W7(e.fieldMask)};else{if(!(e instanceof b7))return $e();n={verify:O0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof rh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ih)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Op)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw $e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:R7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:$e()}(t,e.precondition)),n}function L7(t,e){return t&&t.length>0?(_t(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?Zs(i.updateTime):Zs(a);return o.isEqual(Be.min())&&(o=Zs(a)),new x7(o,i.transformResults||[])}(n,e))):[]}function V7(t,e){return{documents:[fP(t,e.path)]}}function F7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fP(t,i);const a=function(u){if(u.length!==0)return gP(Es.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Wl(m.field),direction:z7(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=D0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function U7(t){let e=D7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_t(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(f){const m=pP(f);return m instanceof Es&&HI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new nh(Hl(x.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Wg(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new Fc(v,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new Fc(v,m)}(n.endAt)),s7(e,i,o,a,l,"F",c,u)}function $7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hl(n.unaryFilter.field);return dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hl(n.unaryFilter.field);return dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Hl(n.unaryFilter.field);return dn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hl(n.unaryFilter.field);return dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $e()}}(t):t.fieldFilter!==void 0?function(n){return dn.create(Hl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Es.create(n.compositeFilter.filters.map(r=>pP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $e()}}(n.compositeFilter.op))}(t):$e()}function z7(t){return k7[t]}function B7(t){return I7[t]}function q7(t){return P7[t]}function Wl(t){return{fieldPath:t.canonicalString()}}function Hl(t){return An.fromServerFormat(t.fieldPath)}function gP(t){return t instanceof dn?function(n){if(n.op==="=="){if(G2(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NAN"}};if(H2(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G2(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NAN"}};if(H2(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(n.field),op:B7(n.op),value:n.value}}}(t):t instanceof Es?function(n){const r=n.getFilters().map(i=>gP(i));return r.length===1?r[0]:{compositeFilter:{op:q7(n.op),filters:r}}}(t):$e()}function W7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,i,a=Be.min(),o=Be.min(),l=Ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e){this.ct=e}}function G7(t){const e=U7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this.un=new Y7}addToCollectionParentIndex(e,n){return this.un.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ga.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class Y7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mn(It.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Uc(0)}static kn(){return new Uc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(){this.changes=new du(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Td(r.mutation,i,Dr.empty(),Nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const i=Lo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=ld();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let a=Bi();const o=Cd(),l=function(){return Cd()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof fo)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Td(d.mutation,u,d.mutation.getFieldMask(),Nn.now())):o.set(u.key,Dr.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return l.set(u,new X7(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Cd();let i=new Kt((o,l)=>o-l),a=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Dr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(i.get(l.batchId)||et()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=eP();d.forEach(m=>{if(!a.has(m)){const v=aP(n.get(m),r.get(m));v!==null&&f.set(m,v),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ne.resolve(Lo());let l=-1,c=a;return o.next(u=>ne.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(d)?ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,et())).next(d=>({batchId:l,changes:JI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next(r=>{let i=ld();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=ld();return this.indexManager.getCollectionParents(e,a).next(l=>ne.forEach(l,c=>{const u=function(f,m){return new _l(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Gn.newInvalidDocument(d)))});let l=ld();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&Td(d.mutation,u,Dr.empty(),Nn.now()),Yg(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ne.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zs(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:G7(i.bundledQuery),readTime:Zs(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this.overlays=new Kt(De.comparator),this.Ir=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lo();return ne.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=Lo(),a=n.length+1,o=new De(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Kt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Lo(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Lo(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return ne.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _7(n,r));let a=this.Ir.get(n);a===void 0&&(a=et(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Tr=new Mn(Sn.Er),this.dr=new Mn(Sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Sn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Sn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new De(new It([])),r=new Sn(n,e),i=new Sn(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new De(new It([])),r=new Sn(n,e),i=new Sn(n,e+1);let a=et();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Sn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return De.comparator(e.key,n.key)||ht(e.wr,n.wr)}static Ar(e,n){return ht(e.wr,n.wr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Mn(Sn.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new j7(a,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Sn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Sn(n,0),i=new Sn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);a.push(l)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mn(ht);return n.forEach(i=>{const a=new Sn(i,0),o=new Sn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;De.isDocumentKey(a)||(a=a.child(""));const o=new Sn(new De(a),0);let l=new Mn(ht);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},o),ne.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_t(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(n.mutations,i=>{const a=new Sn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Sn(n,0),i=this.br.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.Mr=e,this.docs=function(){return new Kt(De.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(n))}getEntries(e,n){let r=Bi();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Bi();const o=n.path,l=new De(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||F$(V$(d),r)<=0||(i.has(d.key)||Yg(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,n,r,i){$e()}Or(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sz(this)}getSize(e){return ne.resolve(this.size)}}class sz extends Q7{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e){this.persistence=e,this.Nr=new du(n=>q1(n),W1),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new X1,this.targetCount=0,this.kr=Uc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Uc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Kn(n),ne.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $1(0),this.Kr=!1,this.Kr=!0,this.$r=new tz,this.referenceDelegate=e(this),this.Ur=new iz(this),this.indexManager=new K7,this.remoteDocumentCache=function(i){return new rz(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new H7(n),this.Gr=new J7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ez,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new nz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const i=new oz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class oz extends $${constructor(e){super(),this.currentSequenceNumber=e}}class Z1{constructor(e){this.persistence=e,this.Jr=new X1,this.Yr=null}static Zr(e){return new Z1(e)}get Xr(){if(this.Yr)return this.Yr;throw $e()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,r=>{const i=De.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,Be.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ne.or([()=>ne.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=et(),i=et();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new J1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qF()?8:z$(Xn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new lz;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ku()<=rt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(Ku()<=rt.DEBUG&&Se("QueryEngine","Query:",ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ku()<=rt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(n))):ne.resolve())}Yi(e,n){if(X2(n))return ne.resolve(null);let r=Xs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mp(n,null,"F"),r=Xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=et(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,o,c.readTime)?this.Yi(e,Mp(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return X2(n)||i.isEqual(Be.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?ne.resolve(null):(Ku()<=rt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(n)),this.rs(e,o,n,L$(i,-1)).next(l=>l))})}ts(e,n){let r=new Mn(XI(e));return n.forEach((i,a)=>{Yg(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Ku()<=rt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",ql(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ga.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Kt(ht),this._s=new du(a=>q1(a),W1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z7(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function dz(t,e,n,r){return new uz(t,e,n,r)}async function xP(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=et();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function hz(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let v=ne.resolve();return m.forEach(x=>{v=v.next(()=>d.getEntry(c,x)).next(w=>{const j=u.docVersions.get(x);_t(j!==null),w.version.compareTo(j)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=et();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yP(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fz(t,e){const n=qe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;l.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,f)));let v=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Ln.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(w,j,y){return w.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,v,d)&&l.push(n.Ur.updateTargetData(a,v))});let c=Bi(),u=et();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(mz(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Be.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return ne.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.os=i,a))}function mz(t,e,n){let r=et(),i=et();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Bi();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Be.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function pz(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gz(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ta(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function V0(t,e,n){const r=qe(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bh(o))throw o;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function lE(t,e,n){const r=qe(t);let i=Be.min(),a=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=qe(c),m=f._s.get(d);return m!==void 0?ne.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(r,o,Xs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Be.min(),n?a:et())).next(l=>(vz(r,a7(e),l),{documents:l,Ts:a})))}function vz(t,e,n){let r=t.us.get(e)||Be.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class cE{constructor(){this.activeTargetIds=h7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xz{constructor(){this.so=new cE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm=null;function Ux(){return sm===null?sm=function(){return 268435456+Math.round(2147483648*Math.random())}():sm++,"0x"+sm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class jz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const l=Ux(),c=this.xo(n,r.toUriEncodedString());Se("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(n,c,u,i).then(d=>(Se("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw Mc("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,a,o,l){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=wz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=Ux();return new Promise((o,l)=>{const c=new DI;c.setWithCredentials(!0),c.listenOnce(MI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lm.NO_ERROR:const d=c.getResponseJson();Se(qn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Lm.TIMEOUT:Se(qn,`RPC '${e}' ${a} timed out`),l(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const f=c.getStatus();if(Se(qn,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const x=function(j){const y=j.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(y)>=0?y:J.UNKNOWN}(v.status);l(new he(x,v.message))}else l(new he(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new he(J.UNAVAILABLE,"Connection failed."));break;default:$e()}}finally{Se(qn,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);Se(qn,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Ux(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VI(),l=LI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");Se(qn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=o.createWebChannel(d,c);let m=!1,v=!1;const x=new bz({Io:j=>{v?Se(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(m||(Se(qn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Se(qn,`RPC '${e}' stream ${i} sending:`,j),f.send(j))},To:()=>f.close()}),w=(j,y,g)=>{j.listen(y,b=>{try{g(b)}catch(E){setTimeout(()=>{throw E},0)}})};return w(f,od.EventType.OPEN,()=>{v||(Se(qn,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),w(f,od.EventType.CLOSE,()=>{v||(v=!0,Se(qn,`RPC '${e}' stream ${i} transport closed`),x.So())}),w(f,od.EventType.ERROR,j=>{v||(v=!0,Mc(qn,`RPC '${e}' stream ${i} transport errored:`,j),x.So(new he(J.UNAVAILABLE,"The operation could not be completed")))}),w(f,od.EventType.MESSAGE,j=>{var y;if(!v){const g=j.data[0];_t(!!g);const b=g,E=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(E){Se(qn,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let M=function(A){const N=cn[A];if(N!==void 0)return lP(N)}(S),k=E.message;M===void 0&&(M=J.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),v=!0,x.So(new he(M,k)),f.close()}else Se(qn,`RPC '${e}' stream ${i} received:`,g),x.bo(g)}}),w(l,OI.STAT_EVENT,j=>{j.stat===T0.PROXY?Se(qn,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===T0.NOPROXY&&Se(qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function $x(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){return new A7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,i,a,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wP(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _z extends bP{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=M7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Be.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Zs(o.readTime):Be.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=L0(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=A0(c)?{documents:V7(a,c)}:{query:F7(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dP(a,o.resumeToken);const u=D0(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Be.min())>0){l.readTime=Lp(a,o.snapshotVersion.toTimestamp());const u=D0(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=$7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=L0(this.serializer),n.removeTarget=e,this.a_(n)}}class Nz extends bP{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=L7(e.writeResults,e.commitTime),r=Zs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=L0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>O7(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,M0(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,M0(n,r),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Sz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):Se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Nl(this)&&(Se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=qe(c);u.L_.add(4),await Hh(u),u.q_.set("Unknown"),u.L_.delete(4),await tv(u)}(this))})}),this.q_=new Sz(r,i)}}async function tv(t){if(Nl(t))for(const e of t.B_)await e(!0)}async function Hh(t){for(const e of t.B_)await e(!1)}function jP(t,e){const n=qe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rb(n)?nb(n):hu(n).r_()&&tb(n,e))}function eb(t,e){const n=qe(t),r=hu(n);n.N_.delete(e),r.r_()&&_P(n,e),n.N_.size===0&&(r.r_()?r.o_():Nl(n)&&n.q_.set("Unknown"))}function tb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hu(t).A_(e)}function _P(t,e){t.Q_.xe(e),hu(t).R_(e)}function nb(t){t.Q_=new T7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),hu(t).start(),t.q_.v_()}function rb(t){return Nl(t)&&!hu(t).n_()&&t.N_.size>0}function Nl(t){return qe(t).L_.size===0}function NP(t){t.Q_=void 0}async function Tz(t){t.q_.set("Online")}async function kz(t){t.N_.forEach((e,n)=>{tb(t,e)})}async function Iz(t,e){NP(t),rb(t)?(t.q_.M_(e),nb(t)):t.q_.set("Unknown")}async function Pz(t,e,n){if(t.q_.set("Online"),e instanceof uP&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vp(t,r)}else if(e instanceof Um?t.Q_.Ke(e):e instanceof cP?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await yP(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Ln.EMPTY_BYTE_STRING,d.snapshotVersion)),_P(a,c);const f=new Ta(d.target,c,u,d.sequenceNumber);tb(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),await Vp(t,r)}}async function Vp(t,e,n){if(!Bh(e))throw e;t.L_.add(1),await Hh(t),t.q_.set("Offline"),n||(n=()=>yP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await tv(t)})}function EP(t,e){return e().catch(n=>Vp(t,n,e))}async function nv(t){const e=qe(t),n=Ya(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Az(e);)try{const i=await pz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Rz(e,i)}catch(i){await Vp(e,i)}SP(e)&&CP(e)}function Az(t){return Nl(t)&&t.O_.length<10}function Rz(t,e){t.O_.push(e);const n=Ya(t);n.r_()&&n.V_&&n.m_(e.mutations)}function SP(t){return Nl(t)&&!Ya(t).n_()&&t.O_.length>0}function CP(t){Ya(t).start()}async function Dz(t){Ya(t).p_()}async function Mz(t){const e=Ya(t);for(const n of t.O_)e.m_(n.mutations)}async function Oz(t,e,n){const r=t.O_.shift(),i=K1.from(r,e,n);await EP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nv(t)}async function Lz(t,e){e&&Ya(t).V_&&await async function(r,i){if(function(o){return E7(o)&&o!==J.ABORTED}(i.code)){const a=r.O_.shift();Ya(r).s_(),await EP(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await nv(r)}}(t,e),SP(t)&&CP(t)}async function dE(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=Nl(n);n.L_.add(3),await Hh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await tv(n)}async function Vz(t,e){const n=qe(t);e?(n.L_.delete(2),await tv(n)):e||(n.L_.add(2),await Hh(n),n.q_.set("Unknown"))}function hu(t){return t.K_||(t.K_=function(n,r,i){const a=qe(n);return a.w_(),new _z(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Tz.bind(null,t),Ro:kz.bind(null,t),mo:Iz.bind(null,t),d_:Pz.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rb(t)?nb(t):t.q_.set("Unknown")):(await t.K_.stop(),NP(t))})),t.K_}function Ya(t){return t.U_||(t.U_=function(n,r,i){const a=qe(n);return a.w_(),new Nz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Dz.bind(null,t),mo:Lz.bind(null,t),f_:Mz.bind(null,t),g_:Oz.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nv(t)):(await t.U_.stop(),t.O_.length>0&&(Se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,l=new sb(e,n,o,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ib(t,e){if(zi("AsyncQueue",`${e}: ${t}`),Bh(t))return new he(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=ld(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new yc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.W_=new Kt(De.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):$e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $c{constructor(e,n,r,i,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $c(e,n,yc.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Uz{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=qe(n),a=i.queries;i.queries=fE(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function fE(){return new du(t=>QI(t),Kg)}async function ab(t,e){const n=qe(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new Fz,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=ib(o,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&lb(n)}async function ob(t,e){const n=qe(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $z(t,e){const n=qe(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&lb(n)}function zz(t,e,n){const r=qe(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function lb(t){t.Y_.forEach(e=>{e.next()})}var F0,mE;(mE=F0||(F0={})).ea="default",mE.Cache="cache";class cb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==F0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.key=e}}class kP{constructor(e){this.key=e}}class Bz{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=et(),this.mutatedKeys=et(),this.Aa=XI(e),this.Ra=new yc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hE,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),v=Yg(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let j=!1;m&&v?m.data.isEqual(v.data)?x!==w&&(r.track({type:3,doc:v}),j=!0):this.ga(m,v)||(r.track({type:2,doc:v}),j=!0,(c&&this.Aa(v,c)>0||u&&this.Aa(v,u)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),j=!0):m&&!v&&(r.track({type:1,doc:m}),j=!0,(c||u)&&(l=!0)),j&&(v?(o=o.add(v),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(v,x){const w=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e()}};return w(v)-w(x)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new $c(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=et(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new kP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new TP(r))}),n}ba(e){this.Ta=e.Ts,this.da=et();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $c.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Wz{constructor(e){this.key=e,this.va=!1}}class Hz{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new du(l=>QI(l),Kg),this.Ma=new Map,this.xa=new Set,this.Oa=new Kt(De.comparator),this.Na=new Map,this.La=new X1,this.Ba={},this.ka=new Map,this.qa=Uc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Gz(t,e,n=!0){const r=MP(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await IP(r,e,n,!0),i}async function Kz(t,e){const n=MP(t);await IP(n,e,!0,!1)}async function IP(t,e,n,r){const i=await gz(t.localStore,Xs(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await Yz(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jP(t.remoteStore,i),l}async function Yz(t,e,n,r,i){t.Ka=(f,m,v)=>async function(w,j,y,g){let b=j.view.ma(y);b.ns&&(b=await lE(w.localStore,j.query,!1).then(({documents:k})=>j.view.ma(k,b)));const E=g&&g.targetChanges.get(j.targetId),S=g&&g.targetMismatches.get(j.targetId)!=null,M=j.view.applyChanges(b,w.isPrimaryClient,E,S);return gE(w,j.targetId,M.wa),M.snapshot}(t,f,m,v);const a=await lE(t.localStore,e,!0),o=new Bz(e,a.Ts),l=o.ma(a.documents),c=Wh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);gE(t,n,u.wa);const d=new qz(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function Qz(t,e,n){const r=qe(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!Kg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await V0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eb(r.remoteStore,i.targetId),U0(r,i.targetId)}).catch(zh)):(U0(r,i.targetId),await V0(r.localStore,i.targetId,!0))}async function Xz(t,e){const n=qe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eb(n.remoteStore,r.targetId))}async function Zz(t,e,n){const r=iB(t);try{const i=await function(o,l){const c=qe(o),u=Nn.now(),d=l.reduce((v,x)=>v.add(x.key),et());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Bi(),w=et();return c.cs.getEntries(v,d).next(j=>{x=j,x.forEach((y,g)=>{g.isValidDocument()||(w=w.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,x)).next(j=>{f=j;const y=[];for(const g of l){const b=w7(g,f.get(g.key).overlayedDocument);b!=null&&y.push(new fo(g.key,b,BI(b.value.mapValue),ur.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,y,l)}).next(j=>{m=j;const y=j.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(v,j.batchId,y)})}).then(()=>({batchId:m.batchId,changes:JI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Kt(ht)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Gh(r,i.changes),await nv(r.remoteStore)}catch(i){const a=ib(i,"Failed to persist write");n.reject(a)}}async function PP(t,e){const n=qe(t);try{const r=await fz(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_t(o.va):i.removedDocuments.size>0&&(_t(o.va),o.va=!1))}),await Gh(n,r,e)}catch(r){await zh(r)}}function pE(t,e,n){const r=qe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=qe(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(l)&&(u=!0)}),u&&lb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jz(t,e,n){const r=qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new Kt(De.comparator);o=o.insert(a,Gn.newNoDocument(a,Be.min()));const l=et().add(a),c=new Jg(Be.min(),new Map,new Kt(ht),o,l);await PP(r,c),r.Oa=r.Oa.remove(a),r.Na.delete(e),ub(r)}else await V0(r.localStore,e,!1).then(()=>U0(r,e,n)).catch(zh)}async function eB(t,e){const n=qe(t),r=e.batch.batchId;try{const i=await hz(n.localStore,e);RP(n,r,null),AP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gh(n,i)}catch(i){await zh(i)}}async function tB(t,e,n){const r=qe(t);try{const i=await function(o,l){const c=qe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(_t(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);RP(r,e,n),AP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gh(r,i)}catch(i){await zh(i)}}function AP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function RP(t,e,n){const r=qe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function U0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||DP(t,r)})}function DP(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(eb(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ub(t))}function gE(t,e,n){for(const r of n)r instanceof TP?(t.La.addReference(r.key,e),nB(t,r)):r instanceof kP?(Se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||DP(t,r.key)):$e()}function nB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Se("SyncEngine","New document in limbo: "+n),t.xa.add(r),ub(t))}function ub(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new De(It.fromString(e)),r=t.qa.next();t.Na.set(r,new Wz(n)),t.Oa=t.Oa.insert(n,r),jP(t.remoteStore,new Ta(Xs(Gg(n.path)),r,"TargetPurposeLimboResolution",$1.oe))}}async function Gh(t,e,n){const r=qe(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=J1.Wi(c.targetId,u);a.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,u){const d=qe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(u,m=>ne.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>ne.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Bh(f))throw f;Se("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=d.os.get(m),x=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,w)}}}(r.localStore,a))}async function rB(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=await xP(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new he(J.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gh(n,r.hs)}}function sB(t,e){const n=qe(t),r=n.Na.get(e);if(r&&r.va)return et().add(r.key);{let i=et();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function MP(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jz.bind(null,e),e.Ca.d_=$z.bind(null,e.eventManager),e.Ca.$a=zz.bind(null,e.eventManager),e}function iB(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tB.bind(null,e),e}class Fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ev(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return dz(this.persistence,new cz,e.initialUser,this.serializer)}Ga(e){return new az(Z1.Zr,this.serializer)}Wa(e){return new xz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fp.provider={build:()=>new Fp};class $0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rB.bind(null,this.syncEngine),await Vz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Uz}()}createDatastore(e){const n=ev(e.databaseInfo.databaseId),r=function(a){return new jz(a)}(e.databaseInfo);return function(a,o,l,c){return new Ez(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,l){return new Cz(r,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>pE(this.syncEngine,n,0),function(){return uE.D()?new uE:new yz}())}createSyncEngine(e,n){return function(i,a,o,l,c,u,d){const f=new Hz(i,a,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=qe(i);Se("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Hh(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$0.provider={build:()=>new $0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Wn.UNAUTHENTICATED,this.clientId=UI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ib(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zx(t,e){t.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oB(t);Se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dE(e.remoteStore,i)),t._onlineComponents=e}async function oB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se("FirestoreClient","Using user provided OfflineComponentProvider");try{await zx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Mc("Error using user provided cache. Falling back to memory cache: "+n),await zx(t,new Fp)}}else Se("FirestoreClient","Using default OfflineComponentProvider"),await zx(t,new Fp);return t._offlineComponents}async function OP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se("FirestoreClient","Using user provided OnlineComponentProvider"),await vE(t,t._uninitializedComponentsProvider._online)):(Se("FirestoreClient","Using default OnlineComponentProvider"),await vE(t,new $0))),t._onlineComponents}function lB(t){return OP(t).then(e=>e.syncEngine)}async function Up(t){const e=await OP(t),n=e.eventManager;return n.onListen=Gz.bind(null,e.syncEngine),n.onUnlisten=Qz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Xz.bind(null,e.syncEngine),n}function cB(t,e,n={}){const r=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new db({next:m=>{d.Za(),o.enqueueAndForget(()=>ob(a,f));const v=m.docs.has(l);!v&&m.fromCache?u.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?u.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new cb(Gg(l.path),d,{includeMetadataChanges:!0,_a:!0});return ab(a,f)}(await Up(t),t.asyncQueue,e,n,r)),r.promise}function uB(t,e,n={}){const r=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new db({next:m=>{d.Za(),o.enqueueAndForget(()=>ob(a,f)),m.fromCache&&c.source==="server"?u.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new cb(l,d,{includeMetadataChanges:!0,_a:!0});return ab(a,f)}(await Up(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dB(t,e,n,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yE(t){if(!De.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wE(t){if(De.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e()}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rv(t);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hB(t,e){if(e<=0)throw new he(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T$;switch(r.type){case"firstParty":return new A$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xE.get(n);r&&(Se("ComponentProvider","Removing Datastore"),xE.delete(n),r.terminate())}(this),Promise.resolve()}}function fB(t,e,n,r={}){var i;const a=(t=dr(t,sv))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Wn.MOCK_USER;else{l=zk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Wn(u)}t._authCredentials=new k$(new FI(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class Yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class $a extends ci{constructor(e,n,r){super(e,n,Gg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new De(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function vt(t,e,...n){if(t=gt(t),VP("collection","path",e),t instanceof sv){const r=It.fromString(e,...n);return wE(r),new $a(t,null,r)}{if(!(t instanceof Yn||t instanceof $a))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return wE(r),new $a(t.firestore,null,r)}}function lt(t,e,...n){if(t=gt(t),arguments.length===1&&(e=UI.newId()),VP("doc","path",e),t instanceof sv){const r=It.fromString(e,...n);return yE(r),new Yn(t,null,new De(r))}{if(!(t instanceof Yn||t instanceof $a))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return yE(r),new Yn(t.firestore,t instanceof $a?t.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wP(this,"async_queue_retry"),this.Vu=()=>{const r=$x();r&&Se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$x();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$x();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Bh(e))throw e;Se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw zi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=sb.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&$e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function _E(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ri extends sv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jE(e),this._firestoreClient=void 0,await e}}}function mB(t,e){const n=typeof t=="object"?t:k1(),r=typeof t=="string"?t:"(default)",i=$g(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Fk("firestore");a&&fB(i,...a)}return i}function Kh(t){if(t._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pB(t),t._firestoreClient}function pB(t){var e,n,r;const i=t._freezeSettings(),a=function(l,c,u,d){return new W$(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,LP(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zc(Ln.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zc(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=/^__.*__$/;class vB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new qh(e,this.data,n,this.fieldTransforms)}}class FP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e()}}class mb{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $p(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UP(this.Cu)&&gB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ev(e)}Qu(e,n,r,i=!1){return new mb({Cu:e,methodName:n,qu:r,path:An.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(t){const e=t._freezeSettings(),n=ev(t._databaseId);return new xB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pb(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);vb("Data must be an object, but it was:",o,r);const l=qP(r,o);let c,u;if(a.merge)c=new Dr(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const m=z0(e,f,n);if(!o.contains(m))throw new he(J.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);HP(d,m)||d.push(m)}c=new Dr(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new vB(new wr(l),c,u)}class av extends iv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof av}}class gb extends iv{_toFieldTransform(e){return new g7(e.path,new rh)}isEqual(e){return e instanceof gb}}function $P(t,e,n,r){const i=t.Qu(1,e,n);vb("Data must be an object, but it was:",i,r);const a=[],o=wr.empty();jl(r,(c,u)=>{const d=xb(e,c,n);u=gt(u);const f=i.Nu(d);if(u instanceof av)a.push(d);else{const m=Qh(u,f);m!=null&&(a.push(d),o.set(d,m))}});const l=new Dr(a);return new FP(o,l,i.fieldTransforms)}function zP(t,e,n,r,i,a){const o=t.Qu(1,e,n),l=[z0(e,r,n)],c=[i];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(z0(e,a[m])),c.push(a[m+1]);const u=[],d=wr.empty();for(let m=l.length-1;m>=0;--m)if(!HP(u,l[m])){const v=l[m];let x=c[m];x=gt(x);const w=o.Nu(v);if(x instanceof av)u.push(v);else{const j=Qh(x,w);j!=null&&(u.push(v),d.set(v,j))}}const f=new Dr(u);return new FP(d,f,o.fieldTransforms)}function BP(t,e,n,r=!1){return Qh(n,t.Qu(r?4:3,e))}function Qh(t,e){if(WP(t=gt(t)))return vb("Unsupported field value:",e,t),qP(t,e);if(t instanceof iv)return function(r,i){if(!UP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const l of r){let c=Qh(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Nn.fromDate(r);return{timestampValue:Lp(i.serializer,a)}}if(r instanceof Nn){const a=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(i.serializer,a)}}if(r instanceof hb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zc)return{bytesValue:dP(i.serializer,r._byteString)};if(r instanceof Yn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Q1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fb)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return G1(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rv(r)}`)}(t,e)}function qP(t,e){const n={};return $I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jl(t,(r,i)=>{const a=Qh(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function WP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nn||t instanceof hb||t instanceof zc||t instanceof Yn||t instanceof iv||t instanceof fb)}function vb(t,e,n){if(!WP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function z0(t,e,n){if((e=gt(e))instanceof Yh)return e._internalPath;if(typeof e=="string")return xb(t,e);throw $p("Field path arguments must be of type string or ",t,!1,void 0,n)}const yB=new RegExp("[~\\*/\\[\\]]");function xb(t,e,n){if(e.search(yB)>=0)throw $p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yh(...e.split("."))._internalPath}catch{throw $p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $p(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new he(J.INVALID_ARGUMENT,l+t+c)}function HP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ov("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wB extends yb{data(){return super.data()}}function ov(t,e){return typeof e=="string"?xb(t,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wb{}class lv extends wb{}function qt(t,e,...n){let r=[];e instanceof wb&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof bb).length,l=a.filter(c=>c instanceof cv).length;if(o>1||o>0&&l>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class cv extends lv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cv(e,n,r)}_apply(e){const n=this._parse(e);return KP(e._query,n),new ci(e.firestore,e.converter,R0(e._query,n))}_parse(e){const n=fu(e.firestore);return function(a,o,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){SE(f,d);const v=[];for(const x of f)v.push(EE(c,a,x));m={arrayValue:{values:v}}}else m=EE(c,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||SE(f,d),m=BP(l,o,f,d==="in"||d==="not-in");return dn.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hn(t,e,n){const r=e,i=ov("where",t);return cv._create(i,r,n)}class bb extends wb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Es.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)KP(o,c),o=R0(o,c)}(e._query,n),new ci(e.firestore,e.converter,R0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jb extends lv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jb(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nh(a,o)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new _l(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function NE(t,e="asc"){const n=e,r=ov("orderBy",t);return jb._create(r,n)}class _b extends lv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _b(e,n,r)}_apply(e){return new ci(e.firestore,e.converter,Mp(e._query,this._limit,this._limitType))}}function es(t){return hB("limit",t),_b._create("limit",t,"F")}class Nb extends lv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Nb(e,n,r)}_apply(e){const n=jB(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,function(i,a){return new _l(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function bB(...t){return Nb._create("startAfter",t,!1)}function jB(t,e,n,r){if(n[0]=gt(n[0]),n[0]instanceof yb)return function(a,o,l,c,u){if(!c)throw new he(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of xc(a))if(f.field.isKeyField())d.push(Dp(o,c.key));else{const m=c.data.field(f.field);if(Hg(m))throw new he(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const v=f.field.canonicalString();throw new he(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}d.push(m)}return new Fc(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=fu(t.firestore);return function(o,l,c,u,d,f){const m=o.explicitOrderBy;if(d.length>m.length)throw new he(J.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let x=0;x<d.length;x++){const w=d[x];if(m[x].field.isKeyField()){if(typeof w!="string")throw new he(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!H1(o)&&w.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const j=o.path.child(It.fromString(w));if(!De.isDocumentKey(j))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const y=new De(j);v.push(Dp(l,y))}else{const j=BP(c,u,w);v.push(j)}}return new Fc(v,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function EE(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H1(e)&&n.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!De.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dp(t,new De(r))}if(n instanceof Yn)return Dp(t,n._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rv(n)}.`)}function SE(t,e){if(!Array.isArray(t)||t.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KP(t,e){const n=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _B{convertValue(e,n="none"){switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jl(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>rn(o.doubleValue));return new fb(a)}convertGeoPoint(e){return new hb(rn(e.latitude),rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=z1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){const n=Ka(e);return new Nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);_t(vP(r));const i=new eh(r.get(1),r.get(3)),a=new De(r.popFirst(5));return i.isEqual(n)||zi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YP extends yb{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ov("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $m extends YP{data(e={}){return super.data(e)}}class QP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ud(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $m(this._firestore,this._userDataWriter,r.key,r,new ud(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new $m(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ud(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new $m(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ud(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:NB(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){t=dr(t,Yn);const e=dr(t.firestore,ri);return cB(Kh(e),t._key).then(n=>XP(e,t,n))}class Sb extends _B{constructor(e){super(),this.firestore=e}convertBytes(e){return new zc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,n)}}function fn(t){t=dr(t,ci);const e=dr(t.firestore,ri),n=Kh(e),r=new Sb(e);return GP(t._query),uB(n,t._query).then(i=>new QP(e,r,t,i))}function zo(t,e,n){t=dr(t,Yn);const r=dr(t.firestore,ri),i=Eb(t.converter,e,n);return Xh(r,[pb(fu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ur.none())])}function ar(t,e,n,...r){t=dr(t,Yn);const i=dr(t.firestore,ri),a=fu(i);let o;return o=typeof(e=gt(e))=="string"||e instanceof Yh?zP(a,"updateDoc",t._key,e,n,r):$P(a,"updateDoc",t._key,e),Xh(i,[o.toMutation(t._key,ur.exists(!0))])}function Bc(t){return Xh(dr(t.firestore,ri),[new Zg(t._key,ur.none())])}function Qa(t,e){const n=dr(t.firestore,ri),r=lt(t),i=Eb(t.converter,e);return Xh(n,[pb(fu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}function CE(t,...e){var n,r,i;t=gt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_E(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(_E(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Yn)u=dr(t.firestore,ri),d=Gg(t._key.path),c={next:f=>{e[o]&&e[o](XP(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=dr(t,ci);u=dr(f.firestore,ri),d=f._query;const m=new Sb(u);c={next:v=>{e[o]&&e[o](new QP(u,m,f,v))},error:e[o+1],complete:e[o+2]},GP(t._query)}return function(m,v,x,w){const j=new db(w),y=new cb(v,j,x);return m.asyncQueue.enqueueAndForget(async()=>ab(await Up(m),y)),()=>{j.Za(),m.asyncQueue.enqueueAndForget(async()=>ob(await Up(m),y))}}(Kh(u),d,l,c)}function Xh(t,e){return function(r,i){const a=new Ii;return r.asyncQueue.enqueueAndForget(async()=>Zz(await lB(r),i,a)),a.promise}(Kh(t),e)}function XP(t,e,n){const r=n.docs.get(e._key),i=new Sb(t);return new YP(t,i,e._key,r,new ud(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=fu(e)}set(e,n,r){this._verifyNotCommitted();const i=Bx(e,this._firestore),a=Eb(i.converter,n,r),o=pb(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ur.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Bx(e,this._firestore);let o;return o=typeof(n=gt(n))=="string"||n instanceof Yh?zP(this._dataReader,"WriteBatch.update",a._key,n,r,i):$P(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Bx(e,this._firestore);return this._mutations=this._mutations.concat(new Zg(n._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bx(t,e){if((t=gt(t)).firestore!==e)throw new he(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function wn(){return new gb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t){return Kh(t=dr(t,ri)),new EB(t,e=>Xh(t,e))}(function(e,n=!0){(function(i){uu=i})(bl),nl(new Wa("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new ri(new I$(r.getProvider("auth-internal")),new D$(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eh(u.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Ks($2,"4.7.3",e),Ks($2,"4.7.3","esm2017")})();var CB="firebase",TB="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(CB,TB,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="firebasestorage.googleapis.com",JP="storageBucket",kB=2*60*1e3,IB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends li{constructor(e,n,r=0){super(qx(e),`Firebase Storage: ${n} (${qx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function qx(t){return"storage/"+t}function Cb(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,t)}function PB(t){return new tn(en.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function AB(t){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,t)}function DB(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function MB(t){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function OB(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LB(){return new tn(en.CANCELED,"User canceled the upload/download.")}function VB(t){return new tn(en.INVALID_URL,"Invalid URL '"+t+"'.")}function FB(t){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function UB(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JP+"' property when initializing the app?")}function $B(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zB(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BB(t){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function B0(t){return new tn(en.INVALID_ARGUMENT,t)}function eA(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function qB(t){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kd(t,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yu(t){throw new tn(en.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mr.makeFromUrl(e,n)}catch{return new Mr(e,"")}if(r.path==="")return r;throw FB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},w=n===ZP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",y=new RegExp(`^https?://${w}/${i}/${j}`,"i"),b=[{regex:l,indices:c,postModify:a},{regex:v,indices:x,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<b.length;E++){const S=b[E],M=S.regex.exec(e);if(M){const k=M[S.indices.bucket];let I=M[S.indices.path];I||(I=""),r=new Mr(k,I),S.postModify(r);break}}if(r==null)throw VB(e);return r}}class WB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t,e,n){let r=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...j){u||(u=!0,e.apply(null,j))}function f(j){i=setTimeout(()=>{i=null,t(v,c())},j)}function m(){a&&clearTimeout(a)}function v(j,...y){if(u){m();return}if(j){m(),d.call(null,j,...y);return}if(c()||o){m(),d.call(null,j,...y);return}r<64&&(r*=2);let b;l===1?(l=2,b=0):b=(r+Math.random())*1e3,f(b)}let x=!1;function w(j){x||(x=!0,m(),!u&&(i!==null?(j||(l=2),clearTimeout(i),f(0)):j||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,w(!0)},n),w}function GB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t){return t!==void 0}function YB(t){return typeof t=="object"&&!Array.isArray(t)}function Tb(t){return typeof t=="string"||t instanceof String}function TE(t){return kb()&&t instanceof Blob}function kb(){return typeof Blob<"u"}function kE(t,e,n,r){if(r<e)throw B0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw B0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function tA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Bo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bo||(Bo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,n,r,i,a,o,l,c,u,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new im(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Bo.NO_ERROR,c=a.getStatus();if(!l||QB(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Bo.ABORT;r(!1,new im(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new im(u,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());KB(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=Cb();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?eA():LB();o(c)}else{const c=OB();o(c)}};this.canceled_?n(!1,new im(!1,null,!0)):this.backoffId_=HB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class im{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ZB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function JB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function tq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nq(t,e,n,r,i,a,o=!0){const l=tA(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return eq(u,e),ZB(u,n),JB(u,a),tq(u,r),new XB(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sq(...t){const e=rq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kb())return new Blob(t);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function iq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){if(typeof atob>"u")throw BB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wx{constructor(e,n){this.data=e,this.contentType=n||null}}function oq(t,e){switch(t){case zs.RAW:return new Wx(nA(e));case zs.BASE64:case zs.BASE64URL:return new Wx(rA(t,e));case zs.DATA_URL:return new Wx(cq(e),uq(e))}throw Cb()}function nA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function lq(t){let e;try{e=decodeURIComponent(t)}catch{throw kd(zs.DATA_URL,"Malformed data URL.")}return nA(e)}function rA(t,e){switch(t){case zs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw kd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw kd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aq(e)}catch(i){throw i.message.includes("polyfill")?i:kd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class sA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw kd(zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=dq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function cq(t){const e=new sA(t);return e.base64?rA(zs.BASE64,e.rest):lq(e.rest)}function uq(t){return new sA(t).contentType}function dq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){let r=0,i="";TE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(TE(this.data_)){const r=this.data_,i=iq(r,e,n);return i===null?null:new ja(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ja(r,!0)}}static getBlob(...e){if(kb()){const n=e.map(r=>r instanceof ja?r.data_:r);return new ja(sq.apply(null,n))}else{const n=e.map(o=>Tb(o)?oq(zs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new ja(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){let e;try{e=JSON.parse(t)}catch{return null}return YB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function fq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t,e){return e}class er{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||mq}}let am=null;function pq(t){return!Tb(t)||t.length<2?t:aA(t)}function oA(){if(am)return am;const t=[];t.push(new er("bucket")),t.push(new er("generation")),t.push(new er("metageneration")),t.push(new er("name","fullPath",!0));function e(a,o){return pq(o)}const n=new er("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new er("size");return i.xform=r,t.push(i),t.push(new er("timeCreated")),t.push(new er("updated")),t.push(new er("md5Hash",null,!0)),t.push(new er("cacheControl",null,!0)),t.push(new er("contentDisposition",null,!0)),t.push(new er("contentEncoding",null,!0)),t.push(new er("contentLanguage",null,!0)),t.push(new er("contentType",null,!0)),t.push(new er("metadata","customMetadata",!0)),am=t,am}function gq(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Mr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function vq(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return gq(r,t),r}function lA(t,e,n){const r=iA(e);return r===null?null:vq(t,r,n)}function xq(t,e,n,r){const i=iA(e);if(i===null||!Tb(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),v=Ib(m,n,r),x=tA({alt:"media",token:u});return v+x})[0]}function yq(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class cA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){if(!t)throw Cb()}function wq(t,e){function n(r,i){const a=lA(t,i,e);return uA(a!==null),a}return n}function bq(t,e){function n(r,i){const a=lA(t,i,e);return uA(a!==null),xq(a,i,t.host,t._protocol)}return n}function dA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=DB():i=RB():n.getStatus()===402?i=AB(t.bucket):n.getStatus()===403?i=MB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function jq(t){const e=dA(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=PB(t.path)),a.serverResponse=i.serverResponse,a}return n}function _q(t,e,n){const r=e.fullServerUrl(),i=Ib(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new cA(i,a,bq(t,n),o);return l.errorHandler=jq(e),l}function Nq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Eq(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Nq(null,e)),r}function Sq(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let b="";for(let E=0;E<2;E++)b=b+Math.random().toString().slice(2);return b}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Eq(e,r,i),d=yq(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",v=ja.getBlob(f,r,m);if(v===null)throw $B();const x={name:u.fullPath},w=Ib(a,t.host,t._protocol),j="POST",y=t.maxUploadRetryTime,g=new cA(w,j,wq(t,n),y);return g.urlParams=x,g.headers=o,g.body=v.uploadData(),g.errorHandler=dA(e),g}class Cq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Yu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Tq extends Cq{initXhr(){this.xhr_.responseType="text"}}function hA(){return new Tq}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this._service=e,n instanceof Mr?this._location=n:this._location=Mr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new cl(e,n)}get root(){const e=new Mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aA(this._location.path)}get storage(){return this._service}get parent(){const e=hq(this._location.path);if(e===null)return null;const n=new Mr(this._location.bucket,e);return new cl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qB(e)}}function kq(t,e,n){t._throwIfRoot("uploadBytes");const r=Sq(t.storage,t._location,oA(),new ja(e,!0),n);return t.storage.makeRequestWithTokens(r,hA).then(i=>({metadata:i,ref:t}))}function Iq(t){t._throwIfRoot("getDownloadURL");const e=_q(t.storage,t._location,oA());return t.storage.makeRequestWithTokens(e,hA).then(n=>{if(n===null)throw zB();return n})}function Pq(t,e){const n=fq(t._location.path,e),r=new Mr(t._location.bucket,n);return new cl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){return/^[A-Za-z]+:\/\//.test(t)}function Rq(t,e){return new cl(t,e)}function fA(t,e){if(t instanceof Pb){const n=t;if(n._bucket==null)throw UB();const r=new cl(n,n._bucket);return e!=null?fA(r,e):r}else return e!==void 0?Pq(t,e):t}function Dq(t,e){if(e&&Aq(e)){if(t instanceof Pb)return Rq(t,e);throw B0("To use ref(service, url), the first argument must be a Storage instance.")}else return fA(t,e)}function IE(t,e){const n=e==null?void 0:e[JP];return n==null?null:Mr.makeFromBucketSpec(n,t)}function Mq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:zk(i,t.app.options.projectId))}class Pb{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ZP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kB,this._maxUploadRetryTime=IB,this._requests=new Set,i!=null?this._bucket=Mr.makeFromBucketSpec(i,this._host):this._bucket=IE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mr.makeFromBucketSpec(this._url,e):this._bucket=IE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new WB(eA());{const o=nq(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const PE="@firebase/storage",AE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="storage";function Ab(t,e,n){return t=gt(t),kq(t,e,n)}function Rb(t){return t=gt(t),Iq(t)}function Db(t,e){return t=gt(t),Dq(t,e)}function Oq(t=k1(),e){t=gt(t);const r=$g(t,mA).getImmediate({identifier:e}),i=Fk("storage");return i&&Lq(r,...i),r}function Lq(t,e,n,r={}){Mq(t,e,n,r)}function Vq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Pb(n,r,i,e,bl)}function Fq(){nl(new Wa(mA,Vq,"PUBLIC").setMultipleInstances(!0)),Ks(PE,AE,""),Ks(PE,AE,"esm2017")}Fq();const Uq={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Mb=Wk(Uq),Ls=S$(Mb),Ne=mB(Mb),Ob=Oq(Mb),pA=p.createContext(void 0),RE=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting Firestore timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Yt=()=>{const t=p.useContext(pA);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},$q=({children:t})=>{const[e,n]=p.useState(null),[r,i]=p.useState(null),[a,o]=p.useState(!0),l=async(x,w)=>{const j=lt(Ne,"users",x.uid),y=await Pi(j);if(y.exists()){const g=y.data(),b={...g,id:x.uid,email:x.email,displayName:g.displayName||x.displayName||"Utilisateur",photoURL:g.photoURL||x.photoURL||null,phone:g.phone||null,isVerified:g.isVerified||!1,verificationStatus:g.verificationStatus||"pending",university:g.university||"Université non spécifiée",studentId:g.studentId||null,graduationYear:g.graduationYear||new Date().getFullYear()+2,fieldOfStudy:g.fieldOfStudy||"Non spécifié",campus:g.campus||"Campus principal",bio:g.bio||null,rating:g.rating||0,reviewCount:g.reviewCount||0,trustScore:g.trustScore||0,co2Saved:g.co2Saved||0,transactionsCount:g.transactionsCount||0,donationsCount:g.donationsCount||0,location:g.location||"Paris, France",notificationPreferences:g.notificationPreferences||{email:!0,push:!0,sms:!1,alerts:!0},createdAt:RE(g.createdAt),lastSeen:RE(g.lastSeen)};await zo(j,b),i(b)}else{const g={id:x.uid,email:x.email,displayName:x.displayName||"Utilisateur",photoURL:x.photoURL||null,phone:null,isVerified:!1,verificationStatus:"pending",university:(w==null?void 0:w.university)||"Université non spécifiée",studentId:null,graduationYear:(w==null?void 0:w.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(w==null?void 0:w.fieldOfStudy)||"Non spécifié",campus:(w==null?void 0:w.campus)||"Campus principal",bio:null,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date};await zo(j,g),i(g)}},c=async(x,w)=>{try{await oU(Ls,x,w),ee.success("Connexion réussie !")}catch(j){throw ee.error("Erreur de connexion : "+j.message),j}},u=async(x,w,j,y)=>{try{const{user:g}=await vI(Ls,x,w);await S0(g,{displayName:j}),await l(g,y),ee.success("Compte créé avec succès !")}catch(g){throw ee.error("Erreur lors de la création du compte : "+g.message),g}},d=async()=>{try{const x=new ji;x.setCustomParameters({prompt:"select_account"}),x.addScope("email"),x.addScope("profile"),await UU(Ls,x)}catch(x){throw console.error("Google sign in error:",x),ee.error("Erreur de connexion Google : "+x.message),x}},f=async()=>{try{await mU(Ls),i(null),ee.success("Déconnexion réussie !")}catch(x){throw ee.error("Erreur lors de la déconnexion"),x}},m=async x=>{if(!(!e||!r))try{const w=lt(Ne,"users",e.uid),j={...x,updatedAt:new Date};Object.keys(j).forEach(y=>{j[y]===void 0&&delete j[y]}),await ar(w,j),i({...r,...x}),ee.success("Profil mis à jour !")}catch(w){throw ee.error("Erreur lors de la mise à jour du profil"),w}};p.useEffect(()=>{const x=fU(Ls,async j=>{n(j),j?await l(j):i(null),o(!1)});return(async()=>{try{const j=await zU(Ls);j!=null&&j.user&&(await l(j.user),ee.success("Connexion Google réussie !"))}catch(j){console.error("Redirect result error:",j),j.code!=="auth/null-user"&&ee.error("Erreur de connexion Google : "+j.message)}})(),x},[]);const v={currentUser:e,userProfile:r,loading:a,signIn:c,signUp:u,signInWithGoogle:d,logout:f,updateUserProfile:m};return s.jsx(pA.Provider,{value:v,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gA=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...Bq,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gA("lucide",i),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(t,e)=>{const n=p.forwardRef(({className:r,...i},a)=>p.createElement(qq,{ref:a,iconNode:e,className:gA(`lucide-${zq(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=te("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=te("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=te("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=te("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=te("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=te("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=te("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=te("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=te("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=te("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=te("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=te("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=te("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=te("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=te("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=te("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=te("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=te("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=te("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=te("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function wW(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function fv(...t){return e=>t.forEach(n=>wW(n,e))}function We(...t){return p.useCallback(fv(...t),t)}var Wi=p.forwardRef((t,e)=>{const{children:n,...r}=t,i=p.Children.toArray(n),a=i.find(jW);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return s.jsx(G0,{...r,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return s.jsx(G0,{...r,ref:e,children:n})});Wi.displayName="Slot";var G0=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const i=NW(n);return p.cloneElement(n,{..._W(r,n.props),ref:e?fv(e,i):i})}return p.Children.count(n)>1?p.Children.only(null):null});G0.displayName="SlotClone";var bW=({children:t})=>s.jsx(s.Fragment,{children:t});function jW(t){return p.isValidElement(t)&&t.type===bW}function _W(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function NW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function DA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=DA(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function EW(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=DA(t))&&(r&&(r+=" "),r+=e);return r}const VE=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,FE=EW,mv=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return FE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const m=VE(d)||VE(f);return i[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:m,...v}=d;return Object.entries(v).every(x=>{let[w,j]=x;return Array.isArray(j)?j.includes({...a,...l}[w]):{...a,...l}[w]===j})?[...u,f,m]:u},[]);return FE(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};function MA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=MA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function SW(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=MA(t))&&(r&&(r+=" "),r+=e);return r}const Ub="-",CW=t=>{const e=kW(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Ub);return l[0]===""&&l.length!==1&&l.shift(),OA(l,e)||TW(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},OA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?OA(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(Ub);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},UE=/^\[(.+)\]$/,TW=t=>{if(UE.test(t)){const e=UE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},kW=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return PW(Object.entries(t.classGroups),n).forEach(([a,o])=>{K0(o,r,a,e)}),r},K0=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:$E(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(IW(i)){K0(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{K0(o,$E(e,a),n,r)})})},$E=(t,e)=>{let n=t;return e.split(Ub).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},IW=t=>t.isThemeGetter,PW=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,i]}):t,AW=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},LA="!",RW=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let j=0;j<l.length;j++){let y=l[j];if(u===0){if(y===i&&(r||l.slice(j,j+a)===e)){c.push(l.slice(d,j)),d=j+a;continue}if(y==="/"){f=j;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),v=m.startsWith(LA),x=v?m.substring(1):m,w=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:o}):o},DW=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},MW=t=>({cache:AW(t.cacheSize),parseClassName:RW(t),...CW(t)}),OW=/\s+/,LW=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(OW);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=n(u);let x=!!v,w=r(x?m.substring(0,v):m);if(!w){if(!x){l=u+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=u+(l.length>0?" "+l:l);continue}x=!1}const j=DW(d).join(":"),y=f?j+LA:j,g=y+w;if(a.includes(g))continue;a.push(g);const b=i(w,x);for(let E=0;E<b.length;++E){const S=b[E];a.push(y+S)}l=u+(l.length>0?" "+l:l)}return l};function VW(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VA(e))&&(r&&(r+=" "),r+=n);return r}const VA=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=VA(t[r]))&&(n&&(n+=" "),n+=e);return n};function FW(t,...e){let n,r,i,a=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return n=MW(u),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=LW(c,n);return i(c,d),d}return function(){return a(VW.apply(null,arguments))}}const Dt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},FA=/^\[(?:([a-z-]+):)?(.+)\]$/i,UW=/^\d+\/\d+$/,$W=new Set(["px","full","screen"]),zW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,HW=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gi=t=>bc(t)||$W.has(t)||UW.test(t),ua=t=>gu(t,"length",eH),bc=t=>!!t&&!Number.isNaN(Number(t)),Yx=t=>gu(t,"number",bc),Qu=t=>!!t&&Number.isInteger(Number(t)),GW=t=>t.endsWith("%")&&bc(t.slice(0,-1)),Ke=t=>FA.test(t),da=t=>zW.test(t),KW=new Set(["length","size","percentage"]),YW=t=>gu(t,KW,UA),QW=t=>gu(t,"position",UA),XW=new Set(["image","url"]),ZW=t=>gu(t,XW,nH),JW=t=>gu(t,"",tH),Xu=()=>!0,gu=(t,e,n)=>{const r=FA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},eH=t=>BW.test(t)&&!qW.test(t),UA=()=>!1,tH=t=>WW.test(t),nH=t=>HW.test(t),rH=()=>{const t=Dt("colors"),e=Dt("spacing"),n=Dt("blur"),r=Dt("brightness"),i=Dt("borderColor"),a=Dt("borderRadius"),o=Dt("borderSpacing"),l=Dt("borderWidth"),c=Dt("contrast"),u=Dt("grayscale"),d=Dt("hueRotate"),f=Dt("invert"),m=Dt("gap"),v=Dt("gradientColorStops"),x=Dt("gradientColorStopPositions"),w=Dt("inset"),j=Dt("margin"),y=Dt("opacity"),g=Dt("padding"),b=Dt("saturate"),E=Dt("scale"),S=Dt("sepia"),M=Dt("skew"),k=Dt("space"),I=Dt("translate"),A=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Ke,e],R=()=>[Ke,e],T=()=>["",gi,ua],F=()=>["auto",bc,Ke],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Ke],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[bc,Ke];return{cacheSize:500,separator:":",theme:{colors:[Xu],spacing:[gi,ua],blur:["none","",da,Ke],brightness:Q(),borderColor:[t],borderRadius:["none","","full",da,Ke],borderSpacing:R(),borderWidth:T(),contrast:Q(),grayscale:B(),hueRotate:Q(),invert:B(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[GW,ua],inset:P(),margin:P(),opacity:Q(),padding:R(),saturate:Q(),scale:Q(),sepia:B(),skew:Q(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[da]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ke]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qu,Ke]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Qu,Ke]}],"grid-cols":[{"grid-cols":[Xu]}],"col-start-end":[{col:["auto",{span:["full",Qu,Ke]},Ke]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Xu]}],"row-start-end":[{row:["auto",{span:[Qu,Ke]},Ke]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[da]},da]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",da,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yx]}],"font-family":[{font:[Xu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",bc,Yx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gi,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gi,ua]}],"underline-offset":[{"underline-offset":["auto",gi,Ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),QW]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YW]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZW]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[gi,Ke]}],"outline-w":[{outline:[gi,ua]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[gi,ua]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",da,JW]}],"shadow-color":[{shadow:[Xu]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",da,Ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Qu,Ke]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gi,ua,Yx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sH=FW(rH);function Pe(...t){return sH(SW(t))}const Y0=mv("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),$=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?Wi:"button";return s.jsx(o,{className:Pe(Y0({variant:e,size:n,className:t})),ref:a,...i})});$.displayName="Button";const ke=p.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));ke.displayName="Input";function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function iH(t,e){const n=p.createContext(e),r=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(a){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function qr(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var y;const{scope:m,children:v,...x}=f,w=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,j=p.useMemo(()=>x,Object.values(x));return s.jsx(w.Provider,{value:j,children:v})};u.displayName=a+"Provider";function d(f,m){var w;const v=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,aH(i,...e)]}function aH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function mn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $r({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=oH({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=mn(n),c=p.useCallback(u=>{if(a){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else i(u)},[a,t,i,l]);return[o,c]}function oH({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,i=p.useRef(r),a=mn(e);return p.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var lH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=lH.reduce((t,e)=>{const n=p.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?Wi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function $A(t,e){t&&lu.flushSync(()=>t.dispatchEvent(e))}function cH(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...x}=f,w=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>x,Object.values(x));return s.jsx(w.Provider,{value:j,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,uH(i,...e)]}function uH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function tf(t){const e=t+"CollectionProvider",[n,r]=cH(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:w}=v,j=xe.useRef(null),y=xe.useRef(new Map).current;return s.jsx(i,{scope:x,itemMap:y,collectionRef:j,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=xe.forwardRef((v,x)=>{const{scope:w,children:j}=v,y=a(l,w),g=We(x,y.collectionRef);return s.jsx(Wi,{ref:g,children:j})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=xe.forwardRef((v,x)=>{const{scope:w,children:j,...y}=v,g=xe.useRef(null),b=We(x,g),E=a(u,w);return xe.useEffect(()=>(E.itemMap.set(g,{ref:g,...y}),()=>void E.itemMap.delete(g))),s.jsx(Wi,{[d]:"",ref:b,children:j})});f.displayName=u;function m(v){const x=a(t+"CollectionConsumer",v);return xe.useCallback(()=>{const j=x.collectionRef.current;if(!j)return[];const y=Array.from(j.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((E,S)=>y.indexOf(E.ref.current)-y.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,r]}var dH=p.createContext(void 0);function Sl(t){const e=p.useContext(dH);return t||e||"ltr"}function hH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var fH="DismissableLayer",Q0="dismissableLayer.update",mH="dismissableLayer.pointerDownOutside",pH="dismissableLayer.focusOutside",zE,zA=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nf=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(zA),[d,f]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=p.useState({}),x=We(e,k=>f(k)),w=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(j),g=d?w.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,E=g>=y,S=xH(k=>{const I=k.target,A=[...u.branches].some(N=>N.contains(I));!E||A||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},m),M=yH(k=>{const I=k.target;[...u.branches].some(N=>N.contains(I))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},m);return hH(k=>{g===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(zE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),BE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=zE)}},[d,m,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),BE())},[d,u]),p.useEffect(()=>{const k=()=>v({});return document.addEventListener(Q0,k),()=>document.removeEventListener(Q0,k)},[]),s.jsx(_e.div,{...c,ref:x,style:{pointerEvents:b?E?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,M.onFocusCapture),onBlurCapture:le(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,S.onPointerDownCapture)})});nf.displayName=fH;var gH="DismissableLayerBranch",vH=p.forwardRef((t,e)=>{const n=p.useContext(zA),r=p.useRef(null),i=We(e,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(_e.div,{...t,ref:i})});vH.displayName=gH;function xH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){BA(mH,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function yH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&BA(pH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BE(){const t=new CustomEvent(Q0);document.dispatchEvent(t)}function BA(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?$A(i,a):i.dispatchEvent(a)}var Qx=0;function pv(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??qE()),document.body.insertAdjacentElement("beforeend",t[1]??qE()),Qx++,()=>{Qx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qx--}},[])}function qE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Xx="focusScope.autoFocusOnMount",Zx="focusScope.autoFocusOnUnmount",WE={bubbles:!1,cancelable:!0},wH="FocusScope",rf=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=mn(i),d=mn(a),f=p.useRef(null),m=We(e,w=>c(w)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(b){if(v.paused||!l)return;const E=b.target;l.contains(E)?f.current=E:fa(f.current,{select:!0})},j=function(b){if(v.paused||!l)return;const E=b.relatedTarget;E!==null&&(l.contains(E)||fa(f.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&fa(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",j);const g=new MutationObserver(y);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",j),g.disconnect()}}},[r,l,v.paused]),p.useEffect(()=>{if(l){GE.add(v);const w=document.activeElement;if(!l.contains(w)){const y=new CustomEvent(Xx,WE);l.addEventListener(Xx,u),l.dispatchEvent(y),y.defaultPrevented||(bH(SH(qA(l)),{select:!0}),document.activeElement===w&&fa(l))}return()=>{l.removeEventListener(Xx,u),setTimeout(()=>{const y=new CustomEvent(Zx,WE);l.addEventListener(Zx,d),l.dispatchEvent(y),y.defaultPrevented||fa(w??document.body,{select:!0}),l.removeEventListener(Zx,d),GE.remove(v)},0)}}},[l,u,d,v]);const x=p.useCallback(w=>{if(!n&&!r||v.paused)return;const j=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,y=document.activeElement;if(j&&y){const g=w.currentTarget,[b,E]=jH(g);b&&E?!w.shiftKey&&y===E?(w.preventDefault(),n&&fa(b,{select:!0})):w.shiftKey&&y===b&&(w.preventDefault(),n&&fa(E,{select:!0})):y===g&&w.preventDefault()}},[n,r,v.paused]);return s.jsx(_e.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});rf.displayName=wH;function bH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(fa(r,{select:e}),document.activeElement!==n)return}function jH(t){const e=qA(t),n=HE(e,t),r=HE(e.reverse(),t);return[n,r]}function qA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function HE(t,e){for(const n of t)if(!_H(n,{upTo:e}))return n}function _H(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function NH(t){return t instanceof HTMLInputElement&&"select"in t}function fa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&NH(t)&&e&&t.select()}}var GE=EH();function EH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=KE(t,e),t.unshift(e)},remove(e){var n;t=KE(t,e),(n=t[0])==null||n.resume()}}}function KE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function SH(t){return t.filter(e=>e.tagName!=="A")}var En=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},CH=xC.useId||(()=>{}),TH=0;function Lr(t){const[e,n]=p.useState(CH());return En(()=>{n(r=>r??String(TH++))},[t]),e?`radix-${e}`:""}const kH=["top","right","bottom","left"],Ja=Math.min,Ar=Math.max,Wp=Math.round,om=Math.floor,eo=t=>({x:t,y:t}),IH={left:"right",right:"left",bottom:"top",top:"bottom"},PH={start:"end",end:"start"};function X0(t,e,n){return Ar(t,Ja(e,n))}function Hi(t,e){return typeof t=="function"?t(e):t}function Gi(t){return t.split("-")[0]}function vu(t){return t.split("-")[1]}function $b(t){return t==="x"?"y":"x"}function zb(t){return t==="y"?"height":"width"}function to(t){return["top","bottom"].includes(Gi(t))?"y":"x"}function Bb(t){return $b(to(t))}function AH(t,e,n){n===void 0&&(n=!1);const r=vu(t),i=Bb(t),a=zb(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Hp(o)),[o,Hp(o)]}function RH(t){const e=Hp(t);return[Z0(t),e,Z0(e)]}function Z0(t){return t.replace(/start|end/g,e=>PH[e])}function DH(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function MH(t,e,n,r){const i=vu(t);let a=DH(Gi(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Z0)))),a}function Hp(t){return t.replace(/left|right|bottom|top/g,e=>IH[e])}function OH(t){return{top:0,right:0,bottom:0,left:0,...t}}function WA(t){return typeof t!="number"?OH(t):{top:t,right:t,bottom:t,left:t}}function Gp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function YE(t,e,n){let{reference:r,floating:i}=t;const a=to(e),o=Bb(e),l=zb(o),c=Gi(e),u=a==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,m=r[l]/2-i[l]/2;let v;switch(c){case"top":v={x:d,y:r.y-i.height};break;case"bottom":v={x:d,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-i.width,y:f};break;default:v={x:r.x,y:r.y}}switch(vu(e)){case"start":v[o]-=m*(n&&u?-1:1);break;case"end":v[o]+=m*(n&&u?-1:1);break}return v}const LH=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=YE(u,r,c),m=r,v={},x=0;for(let w=0;w<l.length;w++){const{name:j,fn:y}=l[w],{x:g,y:b,data:E,reset:S}=await y({x:d,y:f,initialPlacement:r,placement:m,strategy:i,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});d=g??d,f=b??f,v={...v,[j]:{...v[j],...E}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:f}=YE(u,m,c)),w=-1)}return{x:d,y:f,placement:m,strategy:i,middlewareData:v}};async function lh(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=Hi(e,t),x=WA(v),j=l[m?f==="floating"?"reference":"floating":f],y=Gp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(j)))==null||n?j:j.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),g=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),E=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Gp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:c}):g);return{top:(y.top-S.top+x.top)/E.y,bottom:(S.bottom-y.bottom+x.bottom)/E.y,left:(y.left-S.left+x.left)/E.x,right:(S.right-y.right+x.right)/E.x}}const VH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Hi(t,e)||{};if(u==null)return{};const f=WA(d),m={x:n,y:r},v=Bb(i),x=zb(v),w=await o.getDimensions(u),j=v==="y",y=j?"top":"left",g=j?"bottom":"right",b=j?"clientHeight":"clientWidth",E=a.reference[x]+a.reference[v]-m[v]-a.floating[x],S=m[v]-a.reference[v],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=M?M[b]:0;(!k||!await(o.isElement==null?void 0:o.isElement(M)))&&(k=l.floating[b]||a.floating[x]);const I=E/2-S/2,A=k/2-w[x]/2-1,N=Ja(f[y],A),P=Ja(f[g],A),R=N,T=k-w[x]-P,F=k/2-w[x]/2+I,W=X0(R,F,T),Y=!c.arrow&&vu(i)!=null&&F!==W&&a.reference[x]/2-(F<R?N:P)-w[x]/2<0,L=Y?F<R?F-R:F-T:0;return{[v]:m[v]+L,data:{[v]:W,centerOffset:F-W-L,...Y&&{alignmentOffset:L}},reset:Y}}}),FH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...j}=Hi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const y=Gi(i),g=to(l),b=Gi(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(b||!w?[Hp(l)]:RH(l)),M=x!=="none";!m&&M&&S.push(...MH(l,w,x,E));const k=[l,...S],I=await lh(e,j),A=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&A.push(I[y]),f){const F=AH(i,o,E);A.push(I[F[0]],I[F[1]])}if(N=[...N,{placement:i,overflows:A}],!A.every(F=>F<=0)){var P,R;const F=(((P=a.flip)==null?void 0:P.index)||0)+1,W=k[F];if(W)return{data:{index:F,overflows:N},reset:{placement:W}};let Y=(R=N.filter(L=>L.overflows[0]<=0).sort((L,O)=>L.overflows[1]-O.overflows[1])[0])==null?void 0:R.placement;if(!Y)switch(v){case"bestFit":{var T;const L=(T=N.filter(O=>{if(M){const B=to(O.placement);return B===g||B==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:T[0];L&&(Y=L);break}case"initialPlacement":Y=l;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};function QE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function XE(t){return kH.some(e=>t[e]>=0)}const UH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Hi(t,e);switch(r){case"referenceHidden":{const a=await lh(e,{...i,elementContext:"reference"}),o=QE(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:XE(o)}}}case"escaped":{const a=await lh(e,{...i,altBoundary:!0}),o=QE(a,n.floating);return{data:{escapedOffsets:o,escaped:XE(o)}}}default:return{}}}}};async function $H(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Gi(n),l=vu(n),c=to(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,f=Hi(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(v=l==="end"?x*-1:x),c?{x:v*d,y:m*u}:{x:m*u,y:v*d}}const zH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await $H(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},BH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:y,y:g}=j;return{x:y,y:g}}},...c}=Hi(t,e),u={x:n,y:r},d=await lh(e,c),f=to(Gi(i)),m=$b(f);let v=u[m],x=u[f];if(a){const j=m==="y"?"top":"left",y=m==="y"?"bottom":"right",g=v+d[j],b=v-d[y];v=X0(g,v,b)}if(o){const j=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=x+d[j],b=x-d[y];x=X0(g,x,b)}const w=l.fn({...e,[m]:v,[f]:x});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:a,[f]:o}}}}}},qH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Hi(t,e),d={x:n,y:r},f=to(i),m=$b(f);let v=d[m],x=d[f];const w=Hi(l,e),j=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const b=m==="y"?"height":"width",E=a.reference[m]-a.floating[b]+j.mainAxis,S=a.reference[m]+a.reference[b]-j.mainAxis;v<E?v=E:v>S&&(v=S)}if(u){var y,g;const b=m==="y"?"width":"height",E=["top","left"].includes(Gi(i)),S=a.reference[f]-a.floating[b]+(E&&((y=o.offset)==null?void 0:y[f])||0)+(E?0:j.crossAxis),M=a.reference[f]+a.reference[b]+(E?0:((g=o.offset)==null?void 0:g[f])||0)-(E?j.crossAxis:0);x<S?x=S:x>M&&(x=M)}return{[m]:v,[f]:x}}}},WH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Hi(t,e),d=await lh(e,u),f=Gi(i),m=vu(i),v=to(i)==="y",{width:x,height:w}=a.floating;let j,y;f==="top"||f==="bottom"?(j=f,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,j=m==="end"?"top":"bottom");const g=w-d.top-d.bottom,b=x-d.left-d.right,E=Ja(w-d[j],g),S=Ja(x-d[y],b),M=!e.middlewareData.shift;let k=E,I=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=g),M&&!m){const N=Ar(d.left,0),P=Ar(d.right,0),R=Ar(d.top,0),T=Ar(d.bottom,0);v?I=x-2*(N!==0||P!==0?N+P:Ar(d.left,d.right)):k=w-2*(R!==0||T!==0?R+T:Ar(d.top,d.bottom))}await c({...e,availableWidth:I,availableHeight:k});const A=await o.getDimensions(l.floating);return x!==A.width||w!==A.height?{reset:{rects:!0}}:{}}}};function gv(){return typeof window<"u"}function xu(t){return HA(t)?(t.nodeName||"").toLowerCase():"#document"}function Vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ui(t){var e;return(e=(HA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HA(t){return gv()?t instanceof Node||t instanceof Vr(t).Node:!1}function Ss(t){return gv()?t instanceof Element||t instanceof Vr(t).Element:!1}function si(t){return gv()?t instanceof HTMLElement||t instanceof Vr(t).HTMLElement:!1}function ZE(t){return!gv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vr(t).ShadowRoot}function sf(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Cs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function HH(t){return["table","td","th"].includes(xu(t))}function vv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qb(t){const e=Wb(),n=Ss(t)?Cs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function GH(t){let e=no(t);for(;si(e)&&!Kc(e);){if(qb(e))return e;if(vv(e))return null;e=no(e)}return null}function Wb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kc(t){return["html","body","#document"].includes(xu(t))}function Cs(t){return Vr(t).getComputedStyle(t)}function xv(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function no(t){if(xu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZE(t)&&t.host||ui(t);return ZE(e)?e.host:e}function GA(t){const e=no(t);return Kc(e)?t.ownerDocument?t.ownerDocument.body:t.body:si(e)&&sf(e)?e:GA(e)}function ch(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=GA(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Vr(i);if(a){const l=J0(o);return e.concat(o,o.visualViewport||[],sf(i)?i:[],l&&n?ch(l):[])}return e.concat(i,ch(i,[],n))}function J0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function KA(t){const e=Cs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=si(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Wp(n)!==a||Wp(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Hb(t){return Ss(t)?t:t.contextElement}function jc(t){const e=Hb(t);if(!si(e))return eo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=KA(e);let o=(a?Wp(n.width):n.width)/r,l=(a?Wp(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const KH=eo(0);function YA(t){const e=Vr(t);return!Wb()||!e.visualViewport?KH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YH(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Vr(t)?!1:e}function dl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=Hb(t);let o=eo(1);e&&(r?Ss(r)&&(o=jc(r)):o=jc(t));const l=YH(a,n,r)?YA(a):eo(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(a){const m=Vr(a),v=r&&Ss(r)?Vr(r):r;let x=m,w=J0(x);for(;w&&r&&v!==x;){const j=jc(w),y=w.getBoundingClientRect(),g=Cs(w),b=y.left+(w.clientLeft+parseFloat(g.paddingLeft))*j.x,E=y.top+(w.clientTop+parseFloat(g.paddingTop))*j.y;c*=j.x,u*=j.y,d*=j.x,f*=j.y,c+=b,u+=E,x=Vr(w),w=J0(x)}}return Gp({width:d,height:f,x:c,y:u})}function QH(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=ui(r),l=e?vv(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=eo(1);const d=eo(0),f=si(r);if((f||!f&&!a)&&((xu(r)!=="body"||sf(o))&&(c=xv(r)),si(r))){const m=dl(r);u=jc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function XH(t){return Array.from(t.getClientRects())}function ew(t,e){const n=xv(t).scrollLeft;return e?e.left+n:dl(ui(t)).left+n}function ZH(t){const e=ui(t),n=xv(t),r=t.ownerDocument.body,i=Ar(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ar(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ew(t);const l=-n.scrollTop;return Cs(r).direction==="rtl"&&(o+=Ar(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function JH(t,e){const n=Vr(t),r=ui(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=Wb();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function eG(t,e){const n=dl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=si(t)?jc(t):eo(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function JE(t,e,n){let r;if(e==="viewport")r=JH(t,n);else if(e==="document")r=ZH(ui(t));else if(Ss(e))r=eG(e,n);else{const i=YA(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Gp(r)}function QA(t,e){const n=no(t);return n===e||!Ss(n)||Kc(n)?!1:Cs(n).position==="fixed"||QA(n,e)}function tG(t,e){const n=e.get(t);if(n)return n;let r=ch(t,[],!1).filter(l=>Ss(l)&&xu(l)!=="body"),i=null;const a=Cs(t).position==="fixed";let o=a?no(t):t;for(;Ss(o)&&!Kc(o);){const l=Cs(o),c=qb(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||sf(o)&&!c&&QA(t,o))?r=r.filter(d=>d!==o):i=l,o=no(o)}return e.set(t,r),r}function nG(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?vv(e)?[]:tG(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=JE(e,d,i);return u.top=Ar(f.top,u.top),u.right=Ja(f.right,u.right),u.bottom=Ja(f.bottom,u.bottom),u.left=Ar(f.left,u.left),u},JE(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function rG(t){const{width:e,height:n}=KA(t);return{width:e,height:n}}function sG(t,e,n){const r=si(e),i=ui(e),a=n==="fixed",o=dl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=eo(0);if(r||!r&&!a)if((xu(e)!=="body"||sf(i))&&(l=xv(e)),r){const v=dl(e,!0,a,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else i&&(c.x=ew(i));let u=0,d=0;if(i&&!r&&!a){const v=i.getBoundingClientRect();d=v.top+l.scrollTop,u=v.left+l.scrollLeft-ew(i,v)}const f=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:f,y:m,width:o.width,height:o.height}}function Jx(t){return Cs(t).position==="static"}function eS(t,e){if(!si(t)||Cs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ui(t)===n&&(n=n.ownerDocument.body),n}function XA(t,e){const n=Vr(t);if(vv(t))return n;if(!si(t)){let i=no(t);for(;i&&!Kc(i);){if(Ss(i)&&!Jx(i))return i;i=no(i)}return n}let r=eS(t,e);for(;r&&HH(r)&&Jx(r);)r=eS(r,e);return r&&Kc(r)&&Jx(r)&&!qb(r)?n:r||GH(t)||n}const iG=async function(t){const e=this.getOffsetParent||XA,n=this.getDimensions,r=await n(t.floating);return{reference:sG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aG(t){return Cs(t).direction==="rtl"}const oG={convertOffsetParentRelativeRectToViewportRelativeRect:QH,getDocumentElement:ui,getClippingRect:nG,getOffsetParent:XA,getElementRects:iG,getClientRects:XH,getDimensions:rG,getScale:jc,isElement:Ss,isRTL:aG};function lG(t,e){let n=null,r;const i=ui(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const v=om(d),x=om(i.clientWidth-(u+f)),w=om(i.clientHeight-(d+m)),j=om(u),g={rootMargin:-v+"px "+-x+"px "+-w+"px "+-j+"px",threshold:Ar(0,Ja(1,c))||1};let b=!0;function E(S){const M=S[0].intersectionRatio;if(M!==c){if(!b)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),a}function cG(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Hb(t),d=i||a?[...u?ch(u):[],...ch(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),a&&y.addEventListener("resize",n)});const f=u&&l?lG(u,n):null;let m=-1,v=null;o&&(v=new ResizeObserver(y=>{let[g]=y;g&&g.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=v)==null||b.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let x,w=c?dl(t):null;c&&j();function j(){const y=dl(t);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&n(),w=y,x=requestAnimationFrame(j)}return n(),()=>{var y;d.forEach(g=>{i&&g.removeEventListener("scroll",n),a&&g.removeEventListener("resize",n)}),f==null||f(),(y=v)==null||y.disconnect(),v=null,c&&cancelAnimationFrame(x)}}const uG=zH,dG=BH,hG=FH,fG=WH,mG=UH,tS=VH,pG=qH,gG=(t,e,n)=>{const r=new Map,i={platform:oG,...n},a={...i.platform,_c:r};return LH(t,e,{...i,platform:a})};var zm=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Kp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Kp(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function ZA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function nS(t,e){const n=ZA(t);return Math.round(e*n)/n}function ey(t){const e=p.useRef(t);return zm(()=>{e.current=t}),e}function vG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=p.useState(r);Kp(m,r)||v(r);const[x,w]=p.useState(null),[j,y]=p.useState(null),g=p.useCallback(O=>{O!==M.current&&(M.current=O,w(O))},[]),b=p.useCallback(O=>{O!==k.current&&(k.current=O,y(O))},[]),E=a||x,S=o||j,M=p.useRef(null),k=p.useRef(null),I=p.useRef(d),A=c!=null,N=ey(c),P=ey(i),R=ey(u),T=p.useCallback(()=>{if(!M.current||!k.current)return;const O={placement:e,strategy:n,middleware:m};P.current&&(O.platform=P.current),gG(M.current,k.current,O).then(B=>{const U={...B,isPositioned:R.current!==!1};F.current&&!Kp(I.current,U)&&(I.current=U,lu.flushSync(()=>{f(U)}))})},[m,e,n,P,R]);zm(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=p.useRef(!1);zm(()=>(F.current=!0,()=>{F.current=!1}),[]),zm(()=>{if(E&&(M.current=E),S&&(k.current=S),E&&S){if(N.current)return N.current(E,S,T);T()}},[E,S,T,N,A]);const W=p.useMemo(()=>({reference:M,floating:k,setReference:g,setFloating:b}),[g,b]),Y=p.useMemo(()=>({reference:E,floating:S}),[E,S]),L=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!Y.floating)return O;const B=nS(Y.floating,d.x),U=nS(Y.floating,d.y);return l?{...O,transform:"translate("+B+"px, "+U+"px)",...ZA(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:U}},[n,l,Y.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:T,refs:W,elements:Y,floatingStyles:L}),[d,T,W,Y,L])}const xG=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?tS({element:r.current,padding:i}).fn(n):{}:r?tS({element:r,padding:i}).fn(n):{}}}},yG=(t,e)=>({...uG(t),options:[t,e]}),wG=(t,e)=>({...dG(t),options:[t,e]}),bG=(t,e)=>({...pG(t),options:[t,e]}),jG=(t,e)=>({...hG(t),options:[t,e]}),_G=(t,e)=>({...fG(t),options:[t,e]}),NG=(t,e)=>({...mG(t),options:[t,e]}),EG=(t,e)=>({...xG(t),options:[t,e]});var SG="Arrow",JA=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(_e.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});JA.displayName=SG;var CG=JA;function TG(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...x}=f,w=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>x,Object.values(x));return s.jsx(w.Provider,{value:j,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,kG(i,...e)]}function kG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function yv(t){const[e,n]=p.useState(void 0);return En(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Gb="Popper",[eR,yu]=TG(Gb),[IG,tR]=eR(Gb),nR=t=>{const{__scopePopper:e,children:n}=t,[r,i]=p.useState(null);return s.jsx(IG,{scope:e,anchor:r,onAnchorChange:i,children:n})};nR.displayName=Gb;var rR="PopperAnchor",sR=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=tR(rR,n),o=p.useRef(null),l=We(e,o);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(_e.div,{...i,ref:l})});sR.displayName=rR;var Kb="PopperContent",[PG,AG]=eR(Kb),iR=p.forwardRef((t,e)=>{var ge,Qe,X,de,Te,Oe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:x,...w}=t,j=tR(Kb,n),[y,g]=p.useState(null),b=We(e,He=>g(He)),[E,S]=p.useState(null),M=yv(E),k=(M==null?void 0:M.width)??0,I=(M==null?void 0:M.height)??0,A=r+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],R=P.length>0,T={padding:N,boundary:P.filter(DG),altBoundary:R},{refs:F,floatingStyles:W,placement:Y,isPositioned:L,middlewareData:O}=vG({strategy:"fixed",placement:A,whileElementsMounted:(...He)=>cG(...He,{animationFrame:v==="always"}),elements:{reference:j.anchor},middleware:[yG({mainAxis:i+I,alignmentAxis:o}),c&&wG({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bG():void 0,...T}),c&&jG({...T}),_G({...T,apply:({elements:He,rects:Tt,availableWidth:Wr,availableHeight:hi})=>{const{width:sa,height:V}=Tt.reference,q=He.floating.style;q.setProperty("--radix-popper-available-width",`${Wr}px`),q.setProperty("--radix-popper-available-height",`${hi}px`),q.setProperty("--radix-popper-anchor-width",`${sa}px`),q.setProperty("--radix-popper-anchor-height",`${V}px`)}}),E&&EG({element:E,padding:l}),MG({arrowWidth:k,arrowHeight:I}),m&&NG({strategy:"referenceHidden",...T})]}),[B,U]=lR(Y),Q=mn(x);En(()=>{L&&(Q==null||Q())},[L,Q]);const ie=(ge=O.arrow)==null?void 0:ge.x,Ce=(Qe=O.arrow)==null?void 0:Qe.y,Xe=((X=O.arrow)==null?void 0:X.centerOffset)!==0,[xt,ut]=p.useState();return En(()=>{y&&ut(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:L?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xt,"--radix-popper-transform-origin":[(de=O.transformOrigin)==null?void 0:de.x,(Te=O.transformOrigin)==null?void 0:Te.y].join(" "),...((Oe=O.hide)==null?void 0:Oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(PG,{scope:n,placedSide:B,onArrowChange:S,arrowX:ie,arrowY:Ce,shouldHideArrow:Xe,children:s.jsx(_e.div,{"data-side":B,"data-align":U,...w,ref:b,style:{...w.style,animation:L?void 0:"none"}})})})});iR.displayName=Kb;var aR="PopperArrow",RG={top:"bottom",right:"left",bottom:"top",left:"right"},oR=p.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=AG(aR,r),o=RG[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(CG,{...i,ref:n,style:{...i.style,display:"block"}})})});oR.displayName=aR;function DG(t){return t!==null}var MG=t=>({name:"transformOrigin",options:t,fn(e){var j,y,g;const{placement:n,rects:r,middlewareData:i}=e,o=((j=i.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=lR(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((y=i.arrow)==null?void 0:y.x)??0)+l/2,v=(((g=i.arrow)==null?void 0:g.y)??0)+c/2;let x="",w="";return u==="bottom"?(x=o?f:`${m}px`,w=`${-c}px`):u==="top"?(x=o?f:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,w=o?f:`${v}px`):u==="left"&&(x=`${r.floating.width+c}px`,w=o?f:`${v}px`),{data:{x,y:w}}}});function lR(t){const[e,n="center"]=t.split("-");return[e,n]}var Yb=nR,wv=sR,Qb=iR,Xb=oR,OG="Portal",af=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,a]=p.useState(!1);En(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?PL.createPortal(s.jsx(_e.div,{...r,ref:e}),o):null});af.displayName=OG;function LG(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Fn=t=>{const{present:e,children:n}=t,r=VG(e),i=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=We(r.ref,FG(i));return typeof n=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};Fn.displayName="Presence";function VG(t){const[e,n]=p.useState(),r=p.useRef({}),i=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=LG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=lm(r.current);a.current=l==="mounted"?u:"none"},[l]),En(()=>{const u=r.current,d=i.current;if(d!==t){const m=a.current,v=lm(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),En(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=v=>{const w=lm(r.current).includes(v.animationName);if(v.target===e&&w&&(c("ANIMATION_END"),!i.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},m=v=>{v.target===e&&(a.current=lm(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function lm(t){return(t==null?void 0:t.animationName)||"none"}function FG(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function UG(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...x}=f,w=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>x,Object.values(x));return s.jsx(w.Provider,{value:j,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,$G(i,...e)]}function $G(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var ty="rovingFocusGroup.onEntryFocus",zG={bubbles:!1,cancelable:!0},bv="RovingFocusGroup",[tw,cR,BG]=tf(bv),[qG,jv]=UG(bv,[BG]),[WG,HG]=qG(bv),uR=p.forwardRef((t,e)=>s.jsx(tw.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(tw.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(GG,{...t,ref:e})})}));uR.displayName=bv;var GG=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=p.useRef(null),v=We(e,m),x=Sl(a),[w=null,j]=$r({prop:o,defaultProp:l,onChange:c}),[y,g]=p.useState(!1),b=mn(u),E=cR(n),S=p.useRef(!1),[M,k]=p.useState(0);return p.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(ty,b),()=>I.removeEventListener(ty,b)},[b]),s.jsx(WG,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:w,onItemFocus:p.useCallback(I=>j(I),[j]),onItemShiftTab:p.useCallback(()=>g(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:p.useCallback(()=>k(I=>I-1),[]),children:s.jsx(_e.div,{tabIndex:y||M===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{S.current=!0}),onFocus:le(t.onFocus,I=>{const A=!S.current;if(I.target===I.currentTarget&&A&&!y){const N=new CustomEvent(ty,zG);if(I.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=E().filter(Y=>Y.focusable),R=P.find(Y=>Y.active),T=P.find(Y=>Y.id===w),W=[R,T,...P].filter(Boolean).map(Y=>Y.ref.current);fR(W,d)}}S.current=!1}),onBlur:le(t.onBlur,()=>g(!1))})})}),dR="RovingFocusGroupItem",hR=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=t,l=Lr(),c=a||l,u=HG(dR,n),d=u.currentTabStopId===c,f=cR(n),{onFocusableItemAdd:m,onFocusableItemRemove:v}=u;return p.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),s.jsx(tw.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:s.jsx(_e.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:le(t.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:le(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:le(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=QG(x,u.orientation,u.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let y=f().filter(g=>g.focusable).map(g=>g.ref.current);if(w==="last")y.reverse();else if(w==="prev"||w==="next"){w==="prev"&&y.reverse();const g=y.indexOf(x.currentTarget);y=u.loop?XG(y,g+1):y.slice(g+1)}setTimeout(()=>fR(y))}})})})});hR.displayName=dR;var KG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function QG(t,e,n){const r=YG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return KG[r]}function fR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function XG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var mR=uR,pR=hR,ZG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ll=new WeakMap,cm=new WeakMap,um={},ny=0,gR=function(t){return t&&(t.host||gR(t.parentNode))},JG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},eK=function(t,e,n,r){var i=JG(e,Array.isArray(t)?t:[t]);um[n]||(um[n]=new WeakMap);var a=um[n],o=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var v=m.getAttribute(r),x=v!==null&&v!=="false",w=(Ll.get(m)||0)+1,j=(a.get(m)||0)+1;Ll.set(m,w),a.set(m,j),o.push(m),w===1&&x&&cm.set(m,!0),j===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(e),l.clear(),ny++,function(){o.forEach(function(f){var m=Ll.get(f)-1,v=a.get(f)-1;Ll.set(f,m),a.set(f,v),m||(cm.has(f)||f.removeAttribute(r),cm.delete(f)),v||f.removeAttribute(n)}),ny--,ny||(Ll=new WeakMap,Ll=new WeakMap,cm=new WeakMap,um={})}},_v=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=ZG(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),eK(r,i,n,"aria-hidden")):function(){return null}},Bm="right-scroll-bar-position",qm="width-before-scroll-bar",tK="with-scroll-bars-hidden",nK="--removed-body-scroll-bar-size";function ry(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function rK(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var sK=typeof window<"u"?p.useLayoutEffect:p.useEffect,rS=new WeakMap;function iK(t,e){var n=rK(null,function(r){return t.forEach(function(i){return ry(i,r)})});return sK(function(){var r=rS.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(l){a.has(l)||ry(l,null)}),a.forEach(function(l){i.has(l)||ry(l,o)})}rS.set(n,t)},[t]),n}function aK(t){return t}function oK(t,e){e===void 0&&(e=aK);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function lK(t){t===void 0&&(t={});var e=oK(null);return e.options=Fs({async:!0,ssr:!1},t),e}var vR=function(t){var e=t.sideCar,n=Lh(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Fs({},n))};vR.isSideCarExport=!0;function cK(t,e){return t.useMedium(e),vR}var xR=lK(),sy=function(){},Nv=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:sy,onWheelCapture:sy,onTouchMoveCapture:sy}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,v=t.noIsolation,x=t.inert,w=t.allowPinchZoom,j=t.as,y=j===void 0?"div":j,g=t.gapMode,b=Lh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,S=iK([n,e]),M=Fs(Fs({},b),i);return p.createElement(p.Fragment,null,d&&p.createElement(E,{sideCar:xR,removeScrollBar:u,shards:f,noIsolation:v,inert:x,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:g}),o?p.cloneElement(p.Children.only(l),Fs(Fs({},M),{ref:S})):p.createElement(y,Fs({},M,{className:c,ref:S}),l))});Nv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Nv.classNames={fullWidth:qm,zeroRight:Bm};var uK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uK();return e&&t.setAttribute("nonce",e),t}function hK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dK())&&(hK(e,n),fK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pK=function(){var t=mK();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yR=function(){var t=pK(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},gK={left:0,top:0,right:0,gap:0},iy=function(t){return parseInt(t||"",10)||0},vK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[iy(n),iy(r),iy(i)]},xK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gK;var e=vK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},yK=yR(),_c="data-scroll-locked",wK=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(tK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(_c,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bm,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Bm," .").concat(Bm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qm," .").concat(qm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_c,`] {
    `).concat(nK,": ").concat(l,`px;
  }
`)},sS=function(){var t=parseInt(document.body.getAttribute(_c)||"0",10);return isFinite(t)?t:0},bK=function(){p.useEffect(function(){return document.body.setAttribute(_c,(sS()+1).toString()),function(){var t=sS()-1;t<=0?document.body.removeAttribute(_c):document.body.setAttribute(_c,t.toString())}},[])},jK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;bK();var a=p.useMemo(function(){return xK(i)},[i]);return p.createElement(yK,{styles:wK(a,!e,i,n?"":"!important")})},nw=!1;if(typeof window<"u")try{var dm=Object.defineProperty({},"passive",{get:function(){return nw=!0,!0}});window.addEventListener("test",dm,dm),window.removeEventListener("test",dm,dm)}catch{nw=!1}var Vl=nw?{passive:!1}:!1,_K=function(t){return t.tagName==="TEXTAREA"},wR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_K(t)&&n[e]==="visible")},NK=function(t){return wR(t,"overflowY")},EK=function(t){return wR(t,"overflowX")},iS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=bR(t,r);if(i){var a=jR(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bR=function(t,e){return t==="v"?NK(e):EK(e)},jR=function(t,e){return t==="v"?SK(e):CK(e)},TK=function(t,e){return t==="h"&&e==="rtl"?-1:1},kK=function(t,e,n,r,i){var a=TK(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,f=0,m=0;do{var v=jR(t,l),x=v[0],w=v[1],j=v[2],y=w-j-a*x;(x||y)&&bR(t,l)&&(f+=y,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(m)<1||!i))&&(u=!0),u},hm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aS=function(t){return[t.deltaX,t.deltaY]},oS=function(t){return t&&"current"in t?t.current:t},IK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},AK=0,Fl=[];function RK(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),i=p.useState(AK++)[0],a=p.useState(yR)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=o8([t.lockRef.current],(t.shards||[]).map(oS),!0).filter(Boolean);return w.forEach(function(j){return j.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(w,j){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var y=hm(w),g=n.current,b="deltaX"in w?w.deltaX:g[0]-y[0],E="deltaY"in w?w.deltaY:g[1]-y[1],S,M=w.target,k=Math.abs(b)>Math.abs(E)?"h":"v";if("touches"in w&&k==="h"&&M.type==="range")return!1;var I=iS(k,M);if(!I)return!0;if(I?S=k:(S=k==="v"?"h":"v",I=iS(k,M)),!I)return!1;if(!r.current&&"changedTouches"in w&&(b||E)&&(r.current=S),!S)return!0;var A=r.current||S;return kK(A,j,w,A==="h"?b:E,!0)},[]),c=p.useCallback(function(w){var j=w;if(!(!Fl.length||Fl[Fl.length-1]!==a)){var y="deltaY"in j?aS(j):hm(j),g=e.current.filter(function(S){return S.name===j.type&&(S.target===j.target||j.target===S.shadowParent)&&IK(S.delta,y)})[0];if(g&&g.should){j.cancelable&&j.preventDefault();return}if(!g){var b=(o.current.shards||[]).map(oS).filter(Boolean).filter(function(S){return S.contains(j.target)}),E=b.length>0?l(j,b[0]):!o.current.noIsolation;E&&j.cancelable&&j.preventDefault()}}},[]),u=p.useCallback(function(w,j,y,g){var b={name:w,delta:j,target:y,should:g,shadowParent:DK(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(E){return E!==b})},1)},[]),d=p.useCallback(function(w){n.current=hm(w),r.current=void 0},[]),f=p.useCallback(function(w){u(w.type,aS(w),w.target,l(w,t.lockRef.current))},[]),m=p.useCallback(function(w){u(w.type,hm(w),w.target,l(w,t.lockRef.current))},[]);p.useEffect(function(){return Fl.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Vl),document.addEventListener("touchmove",c,Vl),document.addEventListener("touchstart",d,Vl),function(){Fl=Fl.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,Vl),document.removeEventListener("touchmove",c,Vl),document.removeEventListener("touchstart",d,Vl)}},[]);var v=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:PK(i)}):null,v?p.createElement(jK,{gapMode:t.gapMode}):null)}function DK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const MK=cK(xR,RK);var of=p.forwardRef(function(t,e){return p.createElement(Nv,Fs({},t,{ref:e,sideCar:MK}))});of.classNames=Nv.classNames;var rw=["Enter"," "],OK=["ArrowDown","PageUp","Home"],_R=["ArrowUp","PageDown","End"],LK=[...OK,..._R],VK={ltr:[...rw,"ArrowRight"],rtl:[...rw,"ArrowLeft"]},FK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},lf="Menu",[uh,UK,$K]=tf(lf),[Cl,NR]=qr(lf,[$K,yu,jv]),Ev=yu(),ER=jv(),[zK,Tl]=Cl(lf),[BK,cf]=Cl(lf),SR=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,l=Ev(e),[c,u]=p.useState(null),d=p.useRef(!1),f=mn(a),m=Sl(i);return p.useEffect(()=>{const v=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Yb,{...l,children:s.jsx(zK,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(BK,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};SR.displayName=lf;var qK="MenuAnchor",Zb=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ev(n);return s.jsx(wv,{...i,...r,ref:e})});Zb.displayName=qK;var Jb="MenuPortal",[WK,CR]=Cl(Jb,{forceMount:void 0}),TR=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Tl(Jb,e);return s.jsx(WK,{scope:e,forceMount:n,children:s.jsx(Fn,{present:n||a.open,children:s.jsx(af,{asChild:!0,container:i,children:r})})})};TR.displayName=Jb;var ns="MenuContent",[HK,ej]=Cl(ns),kR=p.forwardRef((t,e)=>{const n=CR(ns,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Tl(ns,t.__scopeMenu),o=cf(ns,t.__scopeMenu);return s.jsx(uh.Provider,{scope:t.__scopeMenu,children:s.jsx(Fn,{present:r||a.open,children:s.jsx(uh.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(GK,{...i,ref:e}):s.jsx(KK,{...i,ref:e})})})})}),GK=p.forwardRef((t,e)=>{const n=Tl(ns,t.__scopeMenu),r=p.useRef(null),i=We(e,r);return p.useEffect(()=>{const a=r.current;if(a)return _v(a)},[]),s.jsx(tj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),KK=p.forwardRef((t,e)=>{const n=Tl(ns,t.__scopeMenu);return s.jsx(tj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),tj=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:v,disableOutsideScroll:x,...w}=t,j=Tl(ns,n),y=cf(ns,n),g=Ev(n),b=ER(n),E=UK(n),[S,M]=p.useState(null),k=p.useRef(null),I=We(e,k,j.onContentChange),A=p.useRef(0),N=p.useRef(""),P=p.useRef(0),R=p.useRef(null),T=p.useRef("right"),F=p.useRef(0),W=x?of:p.Fragment,Y=x?{as:Wi,allowPinchZoom:!0}:void 0,L=B=>{var ge,Qe;const U=N.current+B,Q=E().filter(X=>!X.disabled),ie=document.activeElement,Ce=(ge=Q.find(X=>X.ref.current===ie))==null?void 0:ge.textValue,Xe=Q.map(X=>X.textValue),xt=aY(Xe,U,Ce),ut=(Qe=Q.find(X=>X.textValue===xt))==null?void 0:Qe.ref.current;(function X(de){N.current=de,window.clearTimeout(A.current),de!==""&&(A.current=window.setTimeout(()=>X(""),1e3))})(U),ut&&setTimeout(()=>ut.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),pv();const O=p.useCallback(B=>{var Q,ie;return T.current===((Q=R.current)==null?void 0:Q.side)&&lY(B,(ie=R.current)==null?void 0:ie.area)},[]);return s.jsx(HK,{scope:n,searchRef:N,onItemEnter:p.useCallback(B=>{O(B)&&B.preventDefault()},[O]),onItemLeave:p.useCallback(B=>{var U;O(B)||((U=k.current)==null||U.focus(),M(null))},[O]),onTriggerLeave:p.useCallback(B=>{O(B)&&B.preventDefault()},[O]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(B=>{R.current=B},[]),children:s.jsx(W,{...Y,children:s.jsx(rf,{asChild:!0,trapped:i,onMountAutoFocus:le(a,B=>{var U;B.preventDefault(),(U=k.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(nf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:v,children:s.jsx(mR,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:M,onEntryFocus:le(c,B=>{y.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Qb,{role:"menu","aria-orientation":"vertical","data-state":WR(j.open),"data-radix-menu-content":"",dir:y.dir,...g,...w,ref:I,style:{outline:"none",...w.style},onKeyDown:le(w.onKeyDown,B=>{const Q=B.target.closest("[data-radix-menu-content]")===B.currentTarget,ie=B.ctrlKey||B.altKey||B.metaKey,Ce=B.key.length===1;Q&&(B.key==="Tab"&&B.preventDefault(),!ie&&Ce&&L(B.key));const Xe=k.current;if(B.target!==Xe||!LK.includes(B.key))return;B.preventDefault();const ut=E().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);_R.includes(B.key)&&ut.reverse(),sY(ut)}),onBlur:le(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(A.current),N.current="")}),onPointerMove:le(t.onPointerMove,dh(B=>{const U=B.target,Q=F.current!==B.clientX;if(B.currentTarget.contains(U)&&Q){const ie=B.clientX>F.current?"right":"left";T.current=ie,F.current=B.clientX}}))})})})})})})});kR.displayName=ns;var YK="MenuGroup",nj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(_e.div,{role:"group",...r,ref:e})});nj.displayName=YK;var QK="MenuLabel",IR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(_e.div,{...r,ref:e})});IR.displayName=QK;var Yp="MenuItem",lS="menu.itemSelect",Sv=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=p.useRef(null),o=cf(Yp,t.__scopeMenu),l=ej(Yp,t.__scopeMenu),c=We(e,a),u=p.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(lS,{bubbles:!0,cancelable:!0});f.addEventListener(lS,v=>r==null?void 0:r(v),{once:!0}),$A(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(PR,{...i,ref:c,disabled:n,onClick:le(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:le(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:le(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||rw.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Sv.displayName=Yp;var PR=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=ej(Yp,n),l=ER(n),c=p.useRef(null),u=We(e,c),[d,f]=p.useState(!1),[m,v]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&v((x.textContent??"").trim())},[a.children]),s.jsx(uh.ItemSlot,{scope:n,disabled:r,textValue:i??m,children:s.jsx(pR,{asChild:!0,...l,focusable:!r,children:s.jsx(_e.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:le(t.onPointerMove,dh(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,dh(x=>o.onItemLeave(x))),onFocus:le(t.onFocus,()=>f(!0)),onBlur:le(t.onBlur,()=>f(!1))})})})}),XK="MenuCheckboxItem",AR=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(LR,{scope:t.__scopeMenu,checked:n,children:s.jsx(Sv,{role:"menuitemcheckbox","aria-checked":Qp(n)?"mixed":n,...i,ref:e,"data-state":sj(n),onSelect:le(i.onSelect,()=>r==null?void 0:r(Qp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});AR.displayName=XK;var RR="MenuRadioGroup",[ZK,JK]=Cl(RR,{value:void 0,onValueChange:()=>{}}),DR=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=mn(r);return s.jsx(ZK,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(nj,{...i,ref:e})})});DR.displayName=RR;var MR="MenuRadioItem",OR=p.forwardRef((t,e)=>{const{value:n,...r}=t,i=JK(MR,t.__scopeMenu),a=n===i.value;return s.jsx(LR,{scope:t.__scopeMenu,checked:a,children:s.jsx(Sv,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":sj(a),onSelect:le(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});OR.displayName=MR;var rj="MenuItemIndicator",[LR,eY]=Cl(rj,{checked:!1}),VR=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=eY(rj,n);return s.jsx(Fn,{present:r||Qp(a.checked)||a.checked===!0,children:s.jsx(_e.span,{...i,ref:e,"data-state":sj(a.checked)})})});VR.displayName=rj;var tY="MenuSeparator",FR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(_e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});FR.displayName=tY;var nY="MenuArrow",UR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ev(n);return s.jsx(Xb,{...i,...r,ref:e})});UR.displayName=nY;var rY="MenuSub",[Nae,$R]=Cl(rY),dd="MenuSubTrigger",zR=p.forwardRef((t,e)=>{const n=Tl(dd,t.__scopeMenu),r=cf(dd,t.__scopeMenu),i=$R(dd,t.__scopeMenu),a=ej(dd,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(Zb,{asChild:!0,...u,children:s.jsx(PR,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":WR(n.open),...t,ref:fv(e,i.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,dh(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(t.onPointerLeave,dh(f=>{var v,x;d();const m=(v=n.content)==null?void 0:v.getBoundingClientRect();if(m){const w=(x=n.content)==null?void 0:x.dataset.side,j=w==="right",y=j?-5:5,g=m[j?"left":"right"],b=m[j?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:g,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:g,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,f=>{var v;const m=a.searchRef.current!=="";t.disabled||m&&f.key===" "||VK[r.dir].includes(f.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),f.preventDefault())})})})});zR.displayName=dd;var BR="MenuSubContent",qR=p.forwardRef((t,e)=>{const n=CR(ns,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Tl(ns,t.__scopeMenu),o=cf(ns,t.__scopeMenu),l=$R(BR,t.__scopeMenu),c=p.useRef(null),u=We(e,c);return s.jsx(uh.Provider,{scope:t.__scopeMenu,children:s.jsx(Fn,{present:r||a.open,children:s.jsx(uh.Slot,{scope:t.__scopeMenu,children:s.jsx(tj,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:le(t.onKeyDown,d=>{var v;const f=d.currentTarget.contains(d.target),m=FK[o.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),(v=l.trigger)==null||v.focus(),d.preventDefault())})})})})})});qR.displayName=BR;function WR(t){return t?"open":"closed"}function Qp(t){return t==="indeterminate"}function sj(t){return Qp(t)?"indeterminate":t?"checked":"unchecked"}function sY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function iY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function aY(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=iY(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function oY(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}function lY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return oY(n,e)}function dh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var cY=SR,uY=Zb,dY=TR,hY=kR,fY=nj,mY=IR,pY=Sv,gY=AR,vY=DR,xY=OR,yY=VR,wY=FR,bY=UR,jY=zR,_Y=qR,ij="DropdownMenu",[NY,Eae]=qr(ij,[NR]),gr=NR(),[EY,HR]=NY(ij),GR=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=gr(e),u=p.useRef(null),[d=!1,f]=$r({prop:i,defaultProp:a,onChange:o});return s.jsx(EY,{scope:e,triggerId:Lr(),triggerRef:u,contentId:Lr(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(cY,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};GR.displayName=ij;var KR="DropdownMenuTrigger",YR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=HR(KR,n),o=gr(n);return s.jsx(uY,{asChild:!0,...o,children:s.jsx(_e.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:fv(e,a.triggerRef),onPointerDown:le(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:le(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});YR.displayName=KR;var SY="DropdownMenuPortal",QR=t=>{const{__scopeDropdownMenu:e,...n}=t,r=gr(e);return s.jsx(dY,{...r,...n})};QR.displayName=SY;var XR="DropdownMenuContent",ZR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=HR(XR,n),a=gr(n),o=p.useRef(!1);return s.jsx(hY,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:le(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZR.displayName=XR;var CY="DropdownMenuGroup",TY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(fY,{...i,...r,ref:e})});TY.displayName=CY;var kY="DropdownMenuLabel",JR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(mY,{...i,...r,ref:e})});JR.displayName=kY;var IY="DropdownMenuItem",e4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(pY,{...i,...r,ref:e})});e4.displayName=IY;var PY="DropdownMenuCheckboxItem",t4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(gY,{...i,...r,ref:e})});t4.displayName=PY;var AY="DropdownMenuRadioGroup",RY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(vY,{...i,...r,ref:e})});RY.displayName=AY;var DY="DropdownMenuRadioItem",n4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(xY,{...i,...r,ref:e})});n4.displayName=DY;var MY="DropdownMenuItemIndicator",r4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(yY,{...i,...r,ref:e})});r4.displayName=MY;var OY="DropdownMenuSeparator",s4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(wY,{...i,...r,ref:e})});s4.displayName=OY;var LY="DropdownMenuArrow",VY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(bY,{...i,...r,ref:e})});VY.displayName=LY;var FY="DropdownMenuSubTrigger",i4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(jY,{...i,...r,ref:e})});i4.displayName=FY;var UY="DropdownMenuSubContent",a4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gr(n);return s.jsx(_Y,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a4.displayName=UY;var $Y=GR,zY=YR,BY=QR,o4=ZR,l4=JR,c4=e4,u4=t4,d4=n4,h4=r4,f4=s4,m4=i4,p4=a4;function mo(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var qY=["color"],WY=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,qY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),HY=["color"],aj=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,HY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),GY=["color"],g4=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,GY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),KY=["color"],YY=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,KY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),QY=["color"],v4=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,QY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),XY=["color"],ZY=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,XY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),JY=["color"],eQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,JY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tQ=["color"],nQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=mo(t,tQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const sw=$Y,iw=zY,rQ=p.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(m4,{ref:i,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(v4,{className:"ml-auto h-4 w-4"})]}));rQ.displayName=m4.displayName;const sQ=p.forwardRef(({className:t,...e},n)=>s.jsx(p4,{ref:n,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));sQ.displayName=p4.displayName;const Xp=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(BY,{children:s.jsx(o4,{ref:r,sideOffset:e,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Xp.displayName=o4.displayName;const Et=p.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(c4,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Et.displayName=c4.displayName;const iQ=p.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(u4,{ref:i,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(h4,{children:s.jsx(aj,{className:"h-4 w-4"})})}),e]}));iQ.displayName=u4.displayName;const aQ=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(d4,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(h4,{children:s.jsx(nQ,{className:"h-4 w-4 fill-current"})})}),e]}));aQ.displayName=d4.displayName;const oQ=p.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(l4,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));oQ.displayName=l4.displayName;const Ms=p.forwardRef(({className:t,...e},n)=>s.jsx(f4,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));Ms.displayName=f4.displayName;var oj="Avatar",[lQ,Sae]=qr(oj),[cQ,x4]=lQ(oj),y4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=p.useState("idle");return s.jsx(cQ,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(_e.span,{...r,ref:e})})});y4.displayName=oj;var w4="AvatarImage",b4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=x4(w4,n),l=uQ(r,a.referrerPolicy),c=mn(u=>{i(u),o.onImageLoadingStatusChange(u)});return En(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(_e.img,{...a,ref:e,src:r}):null});b4.displayName=w4;var j4="AvatarFallback",_4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=x4(j4,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(_e.span,{...i,ref:e}):null});_4.displayName=j4;function uQ(t,e){const[n,r]=p.useState("idle");return En(()=>{if(!t){r("error");return}let i=!0;const a=new window.Image,o=l=>()=>{i&&r(l)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var N4=y4,E4=b4,S4=_4;const Ki=p.forwardRef(({className:t,...e},n)=>s.jsx(N4,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ki.displayName=N4.displayName;const Yi=p.forwardRef(({className:t,...e},n)=>s.jsx(E4,{ref:n,className:Pe("aspect-square h-full w-full",t),...e}));Yi.displayName=E4.displayName;const Qi=p.forwardRef(({className:t,...e},n)=>s.jsx(S4,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Qi.displayName=S4.displayName;const dQ=mv("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ae({className:t,variant:e,...n}){return s.jsx("div",{className:Pe(dQ({variant:e}),t),...n})}const hQ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},cS=t=>{let e;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const v=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(x=>x(e,v))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(hQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,c);return c},fQ=t=>t?cS(t):cS;var C4={exports:{}},T4={},k4={exports:{}},I4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc=p;function mQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pQ=typeof Object.is=="function"?Object.is:mQ,gQ=Yc.useState,vQ=Yc.useEffect,xQ=Yc.useLayoutEffect,yQ=Yc.useDebugValue;function wQ(t,e){var n=e(),r=gQ({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return xQ(function(){i.value=n,i.getSnapshot=e,ay(i)&&a({inst:i})},[t,n,e]),vQ(function(){return ay(i)&&a({inst:i}),t(function(){ay(i)&&a({inst:i})})},[t]),yQ(n),n}function ay(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pQ(t,n)}catch{return!0}}function bQ(t,e){return e()}var jQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bQ:wQ;I4.useSyncExternalStore=Yc.useSyncExternalStore!==void 0?Yc.useSyncExternalStore:jQ;k4.exports=I4;var _Q=k4.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=p,NQ=_Q;function EQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var SQ=typeof Object.is=="function"?Object.is:EQ,CQ=NQ.useSyncExternalStore,TQ=Cv.useRef,kQ=Cv.useEffect,IQ=Cv.useMemo,PQ=Cv.useDebugValue;T4.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=TQ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=IQ(function(){function c(v){if(!u){if(u=!0,d=v,v=r(v),i!==void 0&&o.hasValue){var x=o.value;if(i(x,v))return f=x}return f=v}if(x=f,SQ(d,v))return x;var w=r(v);return i!==void 0&&i(x,w)?(d=v,x):(d=v,f=w)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,i]);var l=CQ(t,a[0],a[1]);return kQ(function(){o.hasValue=!0,o.value=l},[l]),PQ(l),l};C4.exports=T4;var AQ=C4.exports;const RQ=bg(AQ),P4={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},{useDebugValue:DQ}=xe,{useSyncExternalStoreWithSelector:MQ}=RQ;let uS=!1;const OQ=t=>t;function LQ(t,e=OQ,n){(P4?"production":void 0)!=="production"&&n&&!uS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),uS=!0);const r=MQ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return DQ(r),r}const dS=t=>{(P4?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?fQ(t):t,n=(r,i)=>LQ(e,r,i);return Object.assign(n,e),n},wu=t=>t?dS(t):dS,So=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},VQ=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},FQ=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},Tv=wu((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=qt(vt(Ne,"conversations"),hn("participants","array-contains",n)),a=CE(i,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(n)||u.blockedBy&&u.blockedBy.includes(n)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:So(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:So(u.createdAt),updatedAt:So(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),ee.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=qt(vt(Ne,"conversations",n,"messages")),a=CE(i,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:n,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:So(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),ee.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(i)){ee.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:wn()};console.log("Adding message to Firestore:",c);const u=await Qa(vt(Ne,"conversations",n,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==i),f={};d.forEach(m=>{f[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:wn(),senderId:i,senderName:a},updatedAt:wn(),...f}),await ar(lt(Ne,"conversations",n),{lastMessage:{text:r,sentAt:wn(),senderId:i,senderName:a},updatedAt:wn(),...f}),d.forEach(async m=>{const v=l.participantDetails[m];if(v&&v.email){const x=l.participantDetails[i];await FQ(v.email,v.name,a,(x==null?void 0:x.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),ee.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const f=VQ(o,l,n);console.log("Generated conversation ID:",f);const m=await Pi(lt(Ne,"conversations",f));if(m.exists()){console.log("Conversation already exists, sending message");const w=m.data(),j={id:f,participants:w.participants||[],listingId:w.listingId||"",listingTitle:w.listingTitle||"",listingImage:w.listingImage,listingPrice:w.listingPrice||0,participantDetails:w.participantDetails||{},lastMessage:w.lastMessage?{...w.lastMessage,sentAt:So(w.lastMessage.sentAt)}:void 0,unreadCount:w.unreadCount||{},blockedBy:w.blockedBy||[],deletedFor:w.deletedFor||[],status:w.status||"active",createdAt:So(w.createdAt),updatedAt:So(w.updatedAt)};return t({currentConversation:j}),await e().sendMessage(f,d,o,c.displayName,c.photoURL),f}console.log("Creating new conversation");const v={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:wn(),updatedAt:wn()};console.log("Setting conversation document:",v),await zo(lt(Ne,"conversations",f),v);const x={id:f,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:v.participantDetails,unreadCount:v.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:x}),console.log("Sending initial message"),await e().sendMessage(f,d,o,c.displayName,c.photoURL),f}catch(f){throw console.error("Error creating conversation:",f),ee.error("Erreur lors de la création de la conversation"),f}},markMessagesAsSeen:async(n,r)=>{try{const i=lt(Ne,"conversations",n);await ar(i,{[`unreadCount.${r}`]:0})}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=lt(Ne,"conversations",n),a=await Pi(i);if(a.exists()){const l=a.data().blockedBy||[];l.includes(r)||(await ar(i,{blockedBy:[...l,r],status:"blocked",updatedAt:wn()}),ee.success("Utilisateur bloqué"))}}catch(i){console.error("Error blocking user:",i),ee.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const l={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:wn()};await Qa(vt(Ne,"reports"),l),ee.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),ee.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=lt(Ne,"conversations",n),a=await Pi(i);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const c=[...l,r];c.length===o.participants.length?await Bc(i):await ar(i,{deletedFor:c,updatedAt:wn()}),ee.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),ee.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),UQ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"};function $Q(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const hh=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return hh(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return hh(r)(n)}}}},zQ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,y)=>({...y,...j}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...j)},r,i);const d=hh(a.serialize),f=()=>{const j=a.partialize({...r()});let y;const g=d({state:j,version:a.version}).then(b=>u.setItem(a.name,b)).catch(b=>{y=b});if(y)throw y;return g},m=i.setState;i.setState=(j,y)=>{m(j,y),f()};const v=t((...j)=>{n(...j),f()},r,i);let x;const w=()=>{var j;if(!u)return;o=!1,l.forEach(g=>g(r()));const y=((j=a.onRehydrateStorage)==null?void 0:j.call(a,r()))||void 0;return hh(u.getItem.bind(u))(a.name).then(g=>{if(g)return a.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return a.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var b;return x=a.merge(g,(b=r())!=null?b:v),n(x,!0),f()}).then(()=>{y==null||y(x,void 0),o=!0,c.forEach(g=>g(x))}).catch(g=>{y==null||y(void 0,g)})};return i.persist={setOptions:j=>{a={...a,...j},j.getStorage&&(u=j.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:j=>(l.add(j),()=>{l.delete(j)}),onFinishHydration:j=>(c.add(j),()=>{c.delete(j)})},w(),x||v},BQ=(t,e)=>(n,r,i)=>{let a={storage:$Q(()=>localStorage),partialize:w=>w,version:0,merge:(w,j)=>({...j,...w}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const d=()=>{const w=a.partialize({...r()});return u.setItem(a.name,{state:w,version:a.version})},f=i.setState;i.setState=(w,j)=>{f(w,j),d()};const m=t((...w)=>{n(...w),d()},r,i);i.getInitialState=()=>m;let v;const x=()=>{var w,j;if(!u)return;o=!1,l.forEach(g=>{var b;return g((b=r())!=null?b:m)});const y=((j=a.onRehydrateStorage)==null?void 0:j.call(a,(w=r())!=null?w:m))||void 0;return hh(u.getItem.bind(u))(a.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return[!0,a.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var b;const[E,S]=g;if(v=a.merge(S,(b=r())!=null?b:m),n(v,!0),E)return d()}).then(()=>{y==null||y(v,void 0),v=r(),o=!0,c.forEach(g=>g(v))}).catch(g=>{y==null||y(void 0,g)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(u=w.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},a.skipHydration||x(),v||m},qQ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((UQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),zQ(t,e)):BQ(t,e),WQ=qQ,bu=wu()(WQ((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),ee.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),HQ=()=>{var j,y;const{currentUser:t,userProfile:e,logout:n}=Yt(),{conversations:r,fetchConversations:i}=Tv(),{cart:a,getCartItemCount:o}=bu(),{theme:l,setTheme:c}=DV(),u=Vn(),[d,f]=p.useState(""),m=xe.useMemo(()=>!t||!r.length?0:r.reduce((g,b)=>{const E=b.unreadCount[t.uid]||0;return g+E},0),[r,t]);p.useEffect(()=>{t&&i(t.uid)},[t,i]);const v=g=>{g.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},x=async()=>{try{await n(),u("/")}catch(g){console.error("Logout error:",g)}},w=o();return s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(fe,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(Zh,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("form",{onSubmit:v,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{type:"text",placeholder:"Rechercher entre étudiants...",value:d,onChange:g=>f(g.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>c(l==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[s.jsx(gW,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(uW,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx($,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(fe,{to:"/create",children:[s.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx($,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/cart",children:s.jsx(Za,{className:"w-4 h-4"})})}),w>0&&s.jsx(Ae,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:w>99?"99+":w})]}),s.jsx($,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/saved-searches",children:s.jsx(fs,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx($,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/messages",children:s.jsx(Wt,{className:"w-4 h-4"})})}),m>0&&s.jsx(Ae,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:m>99?"99+":m})]}),s.jsxs(sw,{children:[s.jsx(iw,{asChild:!0,children:s.jsxs($,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(Ki,{className:"h-8 w-8",children:[s.jsx(Yi,{src:e==null?void 0:e.photoURL}),s.jsx(Qi,{children:((y=(j=e==null?void 0:e.displayName)==null?void 0:j[0])==null?void 0:y.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(pt,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(Xp,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:e==null?void 0:e.displayName}),(e==null?void 0:e.isVerified)&&s.jsxs(Ae,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(pt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e==null?void 0:e.university}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(bs,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/profile",className:"cursor-pointer",children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/settings",className:"cursor-pointer",children:[s.jsx(dv,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/orders",className:"cursor-pointer",children:[s.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/payments",className:"cursor-pointer",children:[s.jsx(Jh,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(lr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(Lb,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/impact",className:"cursor-pointer",children:[s.jsx(bs,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/help",className:"cursor-pointer",children:[s.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/safety",className:"cursor-pointer",children:[s.jsx(pt,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),s.jsx(Ms,{}),s.jsxs(Et,{onClick:x,className:"cursor-pointer text-destructive",children:[s.jsx(lW,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx($,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(fe,{to:"/create",children:s.jsx(Ho,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx($,{variant:"ghost",asChild:!0,children:s.jsx(fe,{to:"/auth",children:"Se connecter"})}),s.jsx($,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(fe,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(sw,{children:[s.jsx(iw,{asChild:!0,className:"sm:hidden",children:s.jsx($,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(cW,{className:"w-5 h-5"})})}),s.jsxs(Xp,{className:"w-56",align:"end",children:[s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(Et,{asChild:!0,children:s.jsx(fe,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Ms,{}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/create",className:"cursor-pointer",children:[s.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(Za,{className:"w-4 h-4 mr-2 "}),"Panier",w>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:w})]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(lr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function GQ({icon:t,size:e=100,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const KQ=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(GQ,{icon:Zh,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(nW,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(xW,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(aW,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(fe,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(fe,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(pt,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(bs,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Sr,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),s.jsx(fe,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),s.jsx(fe,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),s.jsx(fe,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(fe,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(fe,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),s.jsx(fe,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(or,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),H=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));H.displayName="Card";const je=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));je.displayName="CardHeader";const Ee=p.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:Pe("font-semibold leading-none tracking-tight",t),...e}));Ee.displayName="CardTitle";const tt=p.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));tt.displayName="CardDescription";const G=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("p-6 pt-0",t),...e}));G.displayName="CardContent";const A4=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",t),...e}));A4.displayName="CardFooter";const Zp=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Zp).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=Zp(t[n]);r!==void 0&&(e[n]=r)}),e}return t},hS=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},oy=t=>{var n,r,i,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:hS(e.createdAt),updatedAt:hS(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},uf=wu((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=qt(vt(Ne,"listings"),NE("createdAt","desc"),es(20));!r&&a&&(o=qt(o,bB(a)));const l=await fn(o);let c=l.docs.map(oy);if(n.category&&n.category!=="all"&&(c=c.filter(d=>d.category===n.category)),n.minPrice!==void 0&&(c=c.filter(d=>d.price>=n.minPrice)),n.maxPrice!==void 0&&(c=c.filter(d=>d.price<=n.maxPrice)),n.query){const d=n.query.toLowerCase();c=c.filter(f=>{var m;return f.title.toLowerCase().includes(d)||f.description.toLowerCase().includes(d)||((m=f.tags)==null?void 0:m.some(v=>v.toLowerCase().includes(d)))})}if(n.condition&&n.condition.length>0&&(c=c.filter(d=>n.condition.includes(d.condition))),n.sortBy)switch(n.sortBy){case"price-asc":c.sort((d,f)=>d.price-f.price);break;case"price-desc":c.sort((d,f)=>f.price-d.price);break;case"date":default:c.sort((d,f)=>new Date(f.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:r?c:[...i,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),ee.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=qt(vt(Ne,"listings"),NE("createdAt","desc"),es(6)),r=await fn(n);console.log(`📊 Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=oy(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=lt(Ne,"listings",n),i=await Pi(r);if(i.exists()){const a=oy(i);await ar(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),ee.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),ee.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,l,c;try{const u=Zp({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((c=n.location)==null?void 0:c.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Qa(vt(Ne,"listings"),u);return ee.success("Annonce créée avec succès !"),d.id}catch(u){throw console.error("Error creating listing:",u),ee.error("Erreur lors de la création de l'annonce"),u}},updateListing:async(n,r)=>{try{const i=lt(Ne,"listings",n),a=Zp({...r,updatedAt:new Date});await ar(i,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===n?{...u,...r}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),ee.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),ee.error("Erreur lors de la mise à jour"),i}},deleteListing:async n=>{try{await Bc(lt(Ne,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),ee.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),ee.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),fS=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},R4=wu((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=qt(vt(Ne,"favorites"),hn("userId","==",n),es(100)),i=await fn(r),a=[],o=new Set;i.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:fS(c.createdAt),updatedAt:fS(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),ee.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){ee.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:wn(),updatedAt:wn()},l={id:(await Qa(vt(Ne,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(r.id),t({favorites:[l,...c],userFavoriteIds:d});try{await ar(lt(Ne,"listings",r.id),{likes:(r.likes||0)+1})}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}ee.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),ee.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=qt(vt(Ne,"favorites"),hn("userId","==",n),hn("listingId","==",r)),a=await fn(i);if(a.empty){ee.info("Pas dans vos favoris");return}const o=a.docs[0];await Bc(lt(Ne,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(r),t({favorites:l.filter(d=>d.listingId!==r),userFavoriteIds:u});try{const d=lt(Ne,"listings",r),f=await fn(qt(vt(Ne,"listings"),hn("__name__","==",r)));if(!f.empty){const m=f.docs[0].data().likes||0;await ar(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise à jour du compteur de likes:",d)}ee.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),ee.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),D4=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const{currentUser:i}=Yt(),{isFavorite:a,toggleFavorite:o}=R4(),l=Vn(),c=a(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!i){ee.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(i.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx($,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${r}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(lr,{className:`w-4 h-4 ${c?"fill-current":""}`})})},M4=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),ee.success("Lien copié dans le presse-papiers"))}catch(c){console.error("Error sharing:",c)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx($,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(Vb,{className:"w-4 h-4"})})};function ze(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Tr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function nr(t,e){const n=ze(t);return isNaN(e)?Tr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ts(t,e){const n=ze(t);if(isNaN(e))return Tr(t,NaN);if(!e)return n;const r=n.getDate(),i=Tr(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const lj=6048e5,YQ=864e5,fm=43200,mS=1440;let QQ={};function ju(){return QQ}function ii(t,e){var l,c,u,d;const n=ju(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ze(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function hl(t){return ii(t,{weekStartsOn:1})}function O4(t){const e=ze(t),n=e.getFullYear(),r=Tr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=hl(r),a=Tr(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=hl(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Qc(t){const e=ze(t);return e.setHours(0,0,0,0),e}function Xc(t){const e=ze(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function qs(t,e){const n=Qc(t),r=Qc(e),i=+n-Xc(n),a=+r-Xc(r);return Math.round((i-a)/YQ)}function XQ(t){const e=O4(t),n=Tr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),hl(n)}function aw(t,e){const n=e*7;return nr(t,n)}function ZQ(t,e){return Ts(t,e*12)}function JQ(t){let e;return t.forEach(function(n){const r=ze(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function eX(t){let e;return t.forEach(n=>{const r=ze(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Wm(t,e){const n=ze(t),r=ze(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function tX(t){return Tr(t,Date.now())}function jr(t,e){const n=Qc(t),r=Qc(e);return+n==+r}function cj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nX(t){if(!cj(t)&&typeof t!="number")return!1;const e=ze(t);return!isNaN(Number(e))}function Zc(t,e){const n=ze(t),r=ze(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function rX(t,e,n){const r=ii(t,n),i=ii(e,n),a=+r-Xc(r),o=+i-Xc(i);return Math.round((a-o)/lj)}function sX(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function iX(t,e){return+ze(t)-+ze(e)}function aX(t){const e=ze(t);return e.setHours(23,59,59,999),e}function kv(t){const e=ze(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function oX(t){const e=ze(t);return+aX(e)==+kv(e)}function lX(t,e){const n=ze(t),r=ze(e),i=Wm(n,r),a=Math.abs(Zc(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=Wm(n,r)===-i;oX(ze(t))&&a===1&&Wm(t,r)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function cX(t,e,n){const r=iX(t,e)/1e3;return sX(n==null?void 0:n.roundingMethod)(r)}function Cr(t){const e=ze(t);return e.setDate(1),e.setHours(0,0,0,0),e}function L4(t){const e=ze(t),n=Tr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function uj(t,e){var l,c,u,d;const n=ju(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ze(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function V4(t){return uj(t,{weekStartsOn:1})}const uX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dX=(t,e,n)=>{let r;const i=uX[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Nc(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const hX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pX={date:Nc({formats:hX,defaultWidth:"full"}),time:Nc({formats:fX,defaultWidth:"full"}),dateTime:Nc({formats:mX,defaultWidth:"full"})},gX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vX=(t,e,n,r)=>gX[t];function Us(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const xX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_X={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NX=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},EX={ordinalNumber:NX,era:Us({values:xX,defaultWidth:"wide"}),quarter:Us({values:yX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Us({values:wX,defaultWidth:"wide"}),day:Us({values:bX,defaultWidth:"wide"}),dayPeriod:Us({values:jX,defaultWidth:"wide",formattingValues:_X,defaultFormattingWidth:"wide"})};function $s(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?CX(l,f=>f.test(o)):SX(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function SX(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function CX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function F4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const TX=/^(\d+)(th|st|nd|rd)?/i,kX=/\d+/i,IX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PX={any:[/^b/i,/^(a|c)/i]},AX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RX={any:[/1/i,/2/i,/3/i,/4/i]},DX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UX={ordinalNumber:F4({matchPattern:TX,parsePattern:kX,valueCallback:t=>parseInt(t,10)}),era:$s({matchPatterns:IX,defaultMatchWidth:"wide",parsePatterns:PX,defaultParseWidth:"any"}),quarter:$s({matchPatterns:AX,defaultMatchWidth:"wide",parsePatterns:RX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:$s({matchPatterns:DX,defaultMatchWidth:"wide",parsePatterns:MX,defaultParseWidth:"any"}),day:$s({matchPatterns:OX,defaultMatchWidth:"wide",parsePatterns:LX,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:VX,defaultMatchWidth:"any",parsePatterns:FX,defaultParseWidth:"any"})},dj={code:"en-US",formatDistance:dX,formatLong:pX,formatRelative:vX,localize:EX,match:UX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $X(t){const e=ze(t);return qs(e,L4(e))+1}function U4(t){const e=ze(t),n=+hl(e)-+XQ(e);return Math.round(n/lj)+1}function $4(t,e){var d,f,m,v;const n=ze(t),r=n.getFullYear(),i=ju(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=Tr(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=ii(o,e),c=Tr(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=ii(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function zX(t,e){var l,c,u,d;const n=ju(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=$4(t,e),a=Tr(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ii(a,e)}function z4(t,e){const n=ze(t),r=+ii(n,e)-+zX(n,e);return Math.round(r/lj)+1}function yt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ha={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return yt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):yt(n+1,2)},d(t,e){return yt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return yt(t.getHours()%12||12,e.length)},H(t,e){return yt(t.getHours(),e.length)},m(t,e){return yt(t.getMinutes(),e.length)},s(t,e){return yt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return yt(i,e.length)}},Ul={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pS={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ha.y(t,e)},Y:function(t,e,n,r){const i=$4(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return yt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):yt(a,e.length)},R:function(t,e){const n=O4(t);return yt(n,e.length)},u:function(t,e){const n=t.getFullYear();return yt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return yt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return yt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ha.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return yt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=z4(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):yt(i,e.length)},I:function(t,e,n){const r=U4(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):yt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ha.d(t,e)},D:function(t,e,n){const r=$X(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):yt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return yt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return yt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return yt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ul.noon:r===0?i=Ul.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ul.evening:r>=12?i=Ul.afternoon:r>=4?i=Ul.morning:i=Ul.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ha.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ha.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ha.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ha.s(t,e)},S:function(t,e){return ha.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return vS(r);case"XXXX":case"XX":return Ao(r);case"XXXXX":case"XXX":default:return Ao(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return vS(r);case"xxxx":case"xx":return Ao(r);case"xxxxx":case"xxx":default:return Ao(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gS(r,":");case"OOOO":default:return"GMT"+Ao(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gS(r,":");case"zzzz":default:return"GMT"+Ao(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return yt(r,e.length)},T:function(t,e,n){const r=t.getTime();return yt(r,e.length)}};function gS(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+yt(a,2)}function vS(t,e){return t%60===0?(t>0?"-":"+")+yt(Math.abs(t)/60,2):Ao(t,e)}function Ao(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=yt(Math.trunc(r/60),2),a=yt(r%60,2);return n+i+e+a}const xS=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},B4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BX=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return xS(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",xS(r,e)).replace("{{time}}",B4(i,e))},qX={p:B4,P:BX},WX=/^D+$/,HX=/^Y+$/,GX=["D","DD","YY","YYYY"];function KX(t){return WX.test(t)}function YX(t){return HX.test(t)}function QX(t,e,n){const r=XX(t,e,n);if(console.warn(r),GX.includes(t))throw new RangeError(r)}function XX(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ZX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eZ=/^'([^]*?)'?$/,tZ=/''/g,nZ=/[a-zA-Z]/;function _n(t,e,n){var d,f,m,v,x,w,j,y;const r=ju(),i=(n==null?void 0:n.locale)??r.locale??dj,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((y=(j=r.locale)==null?void 0:j.options)==null?void 0:y.weekStartsOn)??0,l=ze(t);if(!nX(l))throw new RangeError("Invalid time value");let c=e.match(JX).map(g=>{const b=g[0];if(b==="p"||b==="P"){const E=qX[b];return E(g,i.formatLong)}return g}).join("").match(ZX).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const b=g[0];if(b==="'")return{isToken:!1,value:rZ(g)};if(pS[b])return{isToken:!0,value:g};if(b.match(nZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(g=>{if(!g.isToken)return g.value;const b=g.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&YX(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&KX(b))&&QX(b,e,String(t));const E=pS[b[0]];return E(l,b,i.localize,u)}).join("")}function rZ(t){const e=t.match(eZ);return e?e[1].replace(tZ,"'"):t}function sZ(t,e,n){const r=ju(),i=(n==null?void 0:n.locale)??r.locale??dj,a=2520,o=Wm(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=ze(e),u=ze(t)):(c=ze(t),u=ze(e));const d=cX(u,c),f=(Xc(u)-Xc(c))/1e3,m=Math.round((d-f)/60);let v;if(m<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<mS){const x=Math.round(m/60);return i.formatDistance("aboutXHours",x,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<fm){const x=Math.round(m/mS);return i.formatDistance("xDays",x,l)}else if(m<fm*2)return v=Math.round(m/fm),i.formatDistance("aboutXMonths",v,l)}if(v=lX(u,c),v<12){const x=Math.round(m/fm);return i.formatDistance("xMonths",x,l)}else{const x=v%12,w=Math.trunc(v/12);return x<3?i.formatDistance("aboutXYears",w,l):x<9?i.formatDistance("overXYears",w,l):i.formatDistance("almostXYears",w+1,l)}}function _u(t,e){return sZ(t,tX(t),e)}function iZ(t){const e=ze(t),n=e.getFullYear(),r=e.getMonth(),i=Tr(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function aZ(t){return Math.trunc(+ze(t)/1e3)}function oZ(t){const e=ze(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function lZ(t,e){return rX(oZ(t),Cr(t),e)+1}function ow(t,e){const n=ze(t),r=ze(e);return n.getTime()>r.getTime()}function q4(t,e){const n=ze(t),r=ze(e);return+n<+r}function hj(t,e){const n=ze(t),r=ze(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function cZ(t,e){const n=ze(t),r=ze(e);return n.getFullYear()===r.getFullYear()}function ly(t,e){return nr(t,-e)}function cy(t,e){const n=ze(t),r=n.getFullYear(),i=n.getDate(),a=Tr(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=iZ(a);return n.setMonth(e,Math.min(i,o)),n}function yS(t,e){const n=ze(t);return isNaN(+n)?Tr(t,NaN):(n.setFullYear(e),n)}const uZ={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},dZ=(t,e,n)=>{let r;const i=uZ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},hZ={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},fZ={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},mZ={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pZ={date:Nc({formats:hZ,defaultWidth:"full"}),time:Nc({formats:fZ,defaultWidth:"full"}),dateTime:Nc({formats:mZ,defaultWidth:"full"})},gZ={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},vZ=(t,e,n,r)=>gZ[t],xZ={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},yZ={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},wZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},bZ={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},jZ={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},_Z=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"ère":"er":a="ème",n+a},NZ=["MMM","MMMM"],EZ={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&NZ.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:_Z,era:Us({values:xZ,defaultWidth:"wide"}),quarter:Us({values:yZ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Us({values:wZ,defaultWidth:"wide"}),day:Us({values:bZ,defaultWidth:"wide"}),dayPeriod:Us({values:jZ,defaultWidth:"wide"})},SZ=/^(\d+)(ième|ère|ème|er|e)?/i,CZ=/\d+/i,TZ={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},kZ={any:[/^av/i,/^ap/i]},IZ={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},PZ={any:[/1/i,/2/i,/3/i,/4/i]},AZ={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},RZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},DZ={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},MZ={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},OZ={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},LZ={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},VZ={ordinalNumber:F4({matchPattern:SZ,parsePattern:CZ,valueCallback:t=>parseInt(t)}),era:$s({matchPatterns:TZ,defaultMatchWidth:"wide",parsePatterns:kZ,defaultParseWidth:"any"}),quarter:$s({matchPatterns:IZ,defaultMatchWidth:"wide",parsePatterns:PZ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:$s({matchPatterns:AZ,defaultMatchWidth:"wide",parsePatterns:RZ,defaultParseWidth:"any"}),day:$s({matchPatterns:DZ,defaultMatchWidth:"wide",parsePatterns:MZ,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:OZ,defaultMatchWidth:"any",parsePatterns:LZ,defaultParseWidth:"any"})},Kn={code:"fr",formatDistance:dZ,formatLong:pZ,formatRelative:vZ,localize:EZ,match:VZ,options:{weekStartsOn:1,firstWeekContainsDate:4}},fh=({listing:t})=>{var f,m,v,x,w,j;const e=(y,g)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const b=g||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:b}).format(y)}catch{return`${y} €`}},n=y=>{switch(y){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=y=>{switch(y){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return y}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(Hc,{className:"w-3 h-3"});case"exchange":return s.jsx(qi,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=y=>{try{let g;if(!y)return"Date inconnue";if(y instanceof Date)g=y;else if(typeof y=="string"||typeof y=="number")g=new Date(y);else if(y&&typeof y.toDate=="function")g=y.toDate();else if(y&&typeof y=="object"&&y.seconds)g=new Date(y.seconds*1e3);else return"Date inconnue";return isNaN(g.getTime())?"Date inconnue":_u(g,{addSuffix:!0,locale:Kn})}catch(g){return console.warn("Error formatting date:",g),"Date inconnue"}},l=t.price||0,c=t.currency||"EUR",u=t.condition||"good",d=t.transactionType||"sale";return s.jsxs(H,{className:"group relative bg-white rounded-xl border border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(fe,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((f=t.images)==null?void 0:f[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(D4,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(M4,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),d!=="sale"&&s.jsxs(Ae,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:d==="donation"?"Don":"Troc"})]}),d==="sale"&&s.jsx(Ae,{className:`absolute top-3 left-3 ${n(u)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(u)}),t.environmentalImpact&&s.jsxs(Ae,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(bs,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(G,{className:"p-6 space-y-4",children:[s.jsxs(fe,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${d==="donation"?"text-green-600":d==="exchange"?"text-purple-600":"text-slate-900"}`,children:e(l,c)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Wc,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),d==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(qi,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(ir,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((m=t.location)==null?void 0:m.campus)||((v=t.location)!=null&&v.city&&((x=t.location)!=null&&x.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(ln,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(Ki,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(Yi,{src:t.sellerAvatar}),s.jsx(Qi,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((j=(w=t.sellerName)==null?void 0:w[0])==null?void 0:j.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(pt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&d==="sale"&&s.jsx(Ae,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})},wS=[{email:"marie.dupont@sorbonne-universite.fr",displayName:"Marie Dupont",photoURL:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"Sorbonne Université",graduationYear:2025,fieldOfStudy:"Informatique",campus:"Campus Pierre et Marie Curie",bio:"Étudiante en Master 2 Informatique, passionnée de développement web",rating:4.8,reviewCount:12,trustScore:95,co2Saved:45,transactionsCount:15,donationsCount:3,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date("2023-09-15"),lastSeen:new Date},{email:"thomas.martin@dauphine.psl.eu",displayName:"Thomas Martin",photoURL:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"Université Paris-Dauphine",graduationYear:2024,fieldOfStudy:"Finance",campus:"Campus Dauphine",bio:"Étudiant en finance, vendeur de confiance depuis 2 ans",rating:4.9,reviewCount:28,trustScore:98,co2Saved:78,transactionsCount:32,donationsCount:8,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!0,alerts:!0},createdAt:new Date("2022-10-01"),lastSeen:new Date},{email:"sophie.bernard@polytechnique.edu",displayName:"Sophie Bernard",photoURL:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"École Polytechnique",graduationYear:2026,fieldOfStudy:"Ingénierie",campus:"Campus de Palaiseau",bio:"Élève ingénieure, spécialisée en technologies durables",rating:4.7,reviewCount:8,trustScore:92,co2Saved:23,transactionsCount:10,donationsCount:5,location:"Palaiseau, France",notificationPreferences:{email:!0,push:!1,sms:!1,alerts:!0},createdAt:new Date("2024-01-20"),lastSeen:new Date}],bS=[{title:'MacBook Pro 13" M1 - Parfait état',description:"MacBook Pro 13 pouces avec puce M1, 8GB RAM, 256GB SSD. Utilisé uniquement pour les cours, toujours dans sa housse de protection. Vendu avec chargeur original et boîte. Idéal pour étudiant en informatique !",price:850,currency:"EUR",category:"electronics",subcategory:"ordinateurs",condition:"like-new",images:["https://images.pexels.com/photos/205421/pexels-photo-205421.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1029757/pexels-photo-1029757.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["apple","macbook","étudiant","informatique","portable"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Pierre et Marie Curie",university:"Sorbonne Université",coordinates:{lat:48.8566,lng:2.3522}},transactionType:"sale",sellerId:"user1",sellerName:"Marie Dupont",sellerAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Sorbonne Université",sellerVerified:!0,status:"active",views:45,likes:12,saves:8,aiPriceEstimate:{min:800,max:900,confidence:.85},environmentalImpact:{co2Saved:15,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{title:"Livres de cours Finance M1 - Lot complet",description:"Lot de 5 livres essentiels pour le Master 1 Finance à Dauphine. Tous en excellent état, annotations au crayon facilement effaçables. Économisez plus de 200€ par rapport au neuf !",price:120,currency:"EUR",category:"books",subcategory:"manuels-universitaires",condition:"good",images:["https://images.pexels.com/photos/159711/books-bookstore-book-reading-159711.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1370295/pexels-photo-1370295.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["finance","master","dauphine","livres","économie"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"sale",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:28,likes:6,saves:4,environmentalImpact:{co2Saved:8,category:"books"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-12")},{title:"Vélo de ville - Don gratuit !",description:"Vélo de ville en bon état que je donne car je déménage. Quelques rayures mais fonctionne parfaitement. Idéal pour se déplacer sur le campus ! À récupérer rapidement.",price:0,currency:"EUR",category:"furniture",subcategory:"transport",condition:"fair",images:["https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["vélo","transport","campus","gratuit","écologique"],location:{city:"Palaiseau",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"donation",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:67,likes:23,saves:15,environmentalImpact:{co2Saved:25,category:"transport"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-10")},{title:"Cours particuliers Mathématiques",description:"Élève ingénieure à Polytechnique propose cours particuliers en mathématiques niveau lycée et prépa. Expérience de 2 ans, méthode personnalisée. Disponible soirs et week-ends.",price:25,currency:"EUR",category:"services",subcategory:"cours-particuliers",condition:"new",images:["https://images.pexels.com/photos/5212345/pexels-photo-5212345.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["mathématiques","cours","prépa","lycée","polytechnique"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"service",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:34,likes:8,saves:12,reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-08")},{title:"Échange : Notes de cours Droit contre Économie",description:"Je propose mes notes complètes de cours de Droit L2 (très bien organisées) contre des notes d'Économie du même niveau. Mes notes sont tapées et illustrées.",price:0,currency:"EUR",category:"books",subcategory:"notes-cours",condition:"like-new",images:["https://images.pexels.com/photos/4050315/pexels-photo-4050315.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["droit","économie","notes","L2","échange"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"exchange",exchangeFor:"Notes de cours d'Économie L2",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:19,likes:5,saves:7,environmentalImpact:{co2Saved:3,category:"education"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-05")},{title:"iPhone 12 - Excellent état",description:"iPhone 12 128GB Bleu, acheté il y a 1 an. Toujours eu une coque et verre trempé. Batterie à 89%. Vendu avec chargeur Lightning et coque.",price:420,currency:"EUR",category:"electronics",subcategory:"smartphones",condition:"good",images:["https://images.pexels.com/photos/788946/pexels-photo-788946.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["iphone","apple","smartphone","étudiant"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Pierre et Marie Curie",university:"Sorbonne Université",coordinates:{lat:48.8566,lng:2.3522}},transactionType:"sale",sellerId:"user1",sellerName:"Marie Dupont",sellerAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Sorbonne Université",sellerVerified:!0,status:"active",views:89,likes:24,saves:18,aiPriceEstimate:{min:400,max:450,confidence:.92},environmentalImpact:{co2Saved:12,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-03")},{title:"Meuble de rangement IKEA - Parfait pour chambre étudiante",description:"Étagère IKEA Kallax 2x2 cases, blanche, en parfait état. Idéale pour organiser une chambre étudiante. Facile à monter/démonter. Vendue car déménagement.",price:25,currency:"EUR",category:"furniture",subcategory:"rangement",condition:"like-new",images:["https://images.pexels.com/photos/1350789/pexels-photo-1350789.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["ikea","meuble","rangement","chambre","étudiant"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"sale",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:42,likes:11,saves:9,environmentalImpact:{co2Saved:18,category:"furniture"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{title:"Calculatrice scientifique TI-82 - Don",description:"Calculatrice Texas Instruments TI-82 que je donne car j'ai fini mes études. Fonctionne parfaitement, quelques traces d'usure normales. Parfaite pour lycée/prépa.",price:0,currency:"EUR",category:"electronics",subcategory:"calculatrices",condition:"good",images:["https://images.pexels.com/photos/6238297/pexels-photo-6238297.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["calculatrice","TI-82","mathématiques","gratuit","lycée"],location:{city:"Palaiseau",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"donation",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:31,likes:14,saves:8,environmentalImpact:{co2Saved:5,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2023-12-28"),updatedAt:new Date("2023-12-28")}],FZ=async()=>{try{console.log("🚀 Début du peuplement de la base de données...");const t=[];for(let e=0;e<wS.length;e++){const n=wS[e],r=`user${e+1}`;await zo(lt(Ne,"users",r),n),t.push(r),console.log(`✅ Utilisateur ${n.displayName} ajouté`)}for(let e=0;e<bS.length;e++){const n=bS[e],r=e%t.length,i={...n,sellerId:t[r]};await Qa(vt(Ne,"listings"),i),console.log(`✅ Annonce "${n.title}" ajoutée`)}console.log("🎉 Base de données peuplée avec succès !"),ee.success("Données d'exemple ajoutées avec succès !"),window.location.reload()}catch(t){console.error("❌ Erreur lors du peuplement:",t),ee.error("Erreur lors de l'ajout des données d'exemple")}},UZ=()=>{const[t,e]=p.useState(!1),n=async()=>{if(window.confirm("Voulez-vous ajouter des données d'exemple à la base de données ? Cela ajoutera des utilisateurs et des annonces de test.")){e(!0);try{await FZ()}finally{e(!1)}}};return s.jsxs($,{onClick:n,disabled:t,variant:"outline",className:"fixed bottom-4 right-4 z-50 bg-background border-2 border-primary/20 hover:border-primary/40 shadow-lg",children:[t?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Jq,{className:"w-4 h-4 mr-2"}),t?"Ajout en cours...":"Ajouter données test"]})};var W4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jS=xe.createContext&&xe.createContext(W4),$Z=["attr","size","title"];function zZ(t,e){if(t==null)return{};var n=BZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jp.apply(this,arguments)}function _S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_S(Object(n),!0).forEach(function(r){qZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qZ(t,e,n){return e=WZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WZ(t){var e=HZ(t,"string");return typeof e=="symbol"?e:e+""}function HZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H4(t){return t&&t.map((e,n)=>xe.createElement(e.tag,eg({key:n},e.attr),H4(e.child)))}function po(t){return e=>xe.createElement(GZ,Jp({attr:eg({},t.attr)},e),H4(t.child))}function GZ(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=zZ(t,$Z),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),xe.createElement("svg",Jp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:eg(eg({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&xe.createElement("title",null,a),t.children)};return jS!==void 0?xe.createElement(jS.Consumer,null,n=>e(n)):e(W4)}function KZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function YZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function QZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function XZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function ZZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function JZ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function eJ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function tJ(t){return po({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const nJ={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},rJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),sJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),iJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),aJ=()=>s.jsx("img",{src:"/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),oJ=[{id:"electronics",name:"Électronique",icon:XZ,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:YZ,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:KZ,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:QZ,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:ZZ,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:JZ,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:tJ,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:eJ,color:"text-blue-600",description:"Échanges de services et objets"}],lJ=[{icon:pt,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:aJ,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:bs,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:xA,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],cJ=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:rJ,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:sJ,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:iJ,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],uJ=()=>{const{featuredListings:t,fetchFeaturedListings:e}=uf();return p.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"min-h-screen",children:[s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-20 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200 px-4 py-2",children:[s.jsx(pt,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(ke,{type:"text",placeholder:"Rechercher parmi les étudiants de votre région...",className:"pl-12 h-14 text-lg rounded-full border-2"}),s.jsx($,{size:"lg",className:"absolute right-2 top-1/2 transform -translate-y-1/2 rounded-full bg-gradient-to-r from-primary to-secondary",children:"Rechercher"})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:cJ.map((n,r)=>s.jsx(fe,{to:n.link,className:"group",children:s.jsx(H,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(G,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-14 h-14 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx($,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(fe,{to:"/listings",children:["Parcourir les annonces",s.jsx(ah,{className:"w-4 h-4 ml-2"})]})}),s.jsx($,{size:"lg",variant:"outline",asChild:!0,children:s.jsx(fe,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:oJ.map(n=>s.jsx(fe,{to:`/listings?category=${n.id}`,className:"group",children:s.jsx(H,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(G,{className:"p-6 text-center",children:[s.jsx("img",{src:nJ[n.id],alt:n.name,className:"w-16 h-16 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold text-sm mb-2",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Annonces récentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),s.jsx($,{variant:"outline",asChild:!0,children:s.jsxs(fe,{to:"/listings",children:["Voir tout",s.jsx(ah,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(fh,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:lJ.map((n,r)=>s.jsx(H,{className:"border-0 shadow-none",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:n.title}),s.jsx("p",{className:"text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(bs,{className:"w-16 h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx($,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(fe,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(Zh,{className:"w-16 h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx($,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(fe,{to:"/auth",children:[s.jsx(pt,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx($,{size:"lg",variant:"outline",className:"border-white text-white bg-tranparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(fe,{to:"/listings",children:"Commencer à explorer"})})]})]})}),s.jsx(UZ,{})]})};function mh(t,[e,n]){return Math.min(n,Math.max(e,t))}function Iv(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var dJ="VisuallyHidden",G4=p.forwardRef((t,e)=>s.jsx(_e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));G4.displayName=dJ;var hJ=[" ","Enter","ArrowUp","ArrowDown"],fJ=[" ","Enter"],df="Select",[Pv,Av,mJ]=tf(df),[Nu,Cae]=qr(df,[mJ,yu]),Rv=yu(),[pJ,go]=Nu(df),[gJ,vJ]=Nu(df),K4=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:v,form:x}=t,w=Rv(e),[j,y]=p.useState(null),[g,b]=p.useState(null),[E,S]=p.useState(!1),M=Sl(u),[k=!1,I]=$r({prop:r,defaultProp:i,onChange:a}),[A,N]=$r({prop:o,defaultProp:l,onChange:c}),P=p.useRef(null),R=j?x||!!j.closest("form"):!0,[T,F]=p.useState(new Set),W=Array.from(T).map(Y=>Y.props.value).join(";");return s.jsx(Yb,{...w,children:s.jsxs(pJ,{required:v,scope:e,trigger:j,onTriggerChange:y,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:E,onValueNodeHasChildrenChange:S,contentId:Lr(),value:A,onValueChange:N,open:k,onOpenChange:I,dir:M,triggerPointerDownPosRef:P,disabled:m,children:[s.jsx(Pv.Provider,{scope:e,children:s.jsx(gJ,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(Y=>{F(L=>new Set(L).add(Y))},[]),onNativeOptionRemove:p.useCallback(Y=>{F(L=>{const O=new Set(L);return O.delete(Y),O})},[]),children:n})}),R?s.jsxs(yD,{"aria-hidden":!0,required:v,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:Y=>N(Y.target.value),disabled:m,form:x,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(T)]},W):null]})})};K4.displayName=df;var Y4="SelectTrigger",Q4=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=Rv(n),o=go(Y4,n),l=o.disabled||r,c=We(e,o.onTriggerChange),u=Av(n),d=p.useRef("touch"),[f,m,v]=wD(w=>{const j=u().filter(b=>!b.disabled),y=j.find(b=>b.value===o.value),g=bD(j,w,y);g!==void 0&&o.onValueChange(g.value)}),x=w=>{l||(o.onOpenChange(!0),v()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(wv,{asChild:!0,...a,children:s.jsx(_e.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":xD(o.value)?"":void 0,...i,ref:c,onClick:le(i.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&x(w)}),onPointerDown:le(i.onPointerDown,w=>{d.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(x(w),w.preventDefault())}),onKeyDown:le(i.onKeyDown,w=>{const j=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(j&&w.key===" ")&&hJ.includes(w.key)&&(x(),w.preventDefault())})})})});Q4.displayName=Y4;var X4="SelectValue",Z4=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=t,c=go(X4,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=We(e,c.onValueNodeChange);return En(()=>{u(d)},[u,d]),s.jsx(_e.span,{...l,ref:f,style:{pointerEvents:"none"},children:xD(c.value)?s.jsx(s.Fragment,{children:o}):a})});Z4.displayName=X4;var xJ="SelectIcon",J4=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(_e.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});J4.displayName=xJ;var yJ="SelectPortal",eD=t=>s.jsx(af,{asChild:!0,...t});eD.displayName=yJ;var fl="SelectContent",tD=p.forwardRef((t,e)=>{const n=go(fl,t.__scopeSelect),[r,i]=p.useState();if(En(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?lu.createPortal(s.jsx(nD,{scope:t.__scopeSelect,children:s.jsx(Pv.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(rD,{...t,ref:e})});tD.displayName=fl;var us=10,[nD,vo]=Nu(fl),wJ="SelectContentImpl",rD=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:w,avoidCollisions:j,...y}=t,g=go(fl,n),[b,E]=p.useState(null),[S,M]=p.useState(null),k=We(e,ge=>E(ge)),[I,A]=p.useState(null),[N,P]=p.useState(null),R=Av(n),[T,F]=p.useState(!1),W=p.useRef(!1);p.useEffect(()=>{if(b)return _v(b)},[b]),pv();const Y=p.useCallback(ge=>{const[Qe,...X]=R().map(Oe=>Oe.ref.current),[de]=X.slice(-1),Te=document.activeElement;for(const Oe of ge)if(Oe===Te||(Oe==null||Oe.scrollIntoView({block:"nearest"}),Oe===Qe&&S&&(S.scrollTop=0),Oe===de&&S&&(S.scrollTop=S.scrollHeight),Oe==null||Oe.focus(),document.activeElement!==Te))return},[R,S]),L=p.useCallback(()=>Y([I,b]),[Y,I,b]);p.useEffect(()=>{T&&L()},[T,L]);const{onOpenChange:O,triggerPointerDownPosRef:B}=g;p.useEffect(()=>{if(b){let ge={x:0,y:0};const Qe=de=>{var Te,Oe;ge={x:Math.abs(Math.round(de.pageX)-(((Te=B.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Oe=B.current)==null?void 0:Oe.y)??0))}},X=de=>{ge.x<=10&&ge.y<=10?de.preventDefault():b.contains(de.target)||O(!1),document.removeEventListener("pointermove",Qe),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",Qe),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Qe),document.removeEventListener("pointerup",X,{capture:!0})}}},[b,O,B]),p.useEffect(()=>{const ge=()=>O(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[O]);const[U,Q]=wD(ge=>{const Qe=R().filter(Te=>!Te.disabled),X=Qe.find(Te=>Te.ref.current===document.activeElement),de=bD(Qe,ge,X);de&&setTimeout(()=>de.ref.current.focus())}),ie=p.useCallback((ge,Qe,X)=>{const de=!W.current&&!X;(g.value!==void 0&&g.value===Qe||de)&&(A(ge),de&&(W.current=!0))},[g.value]),Ce=p.useCallback(()=>b==null?void 0:b.focus(),[b]),Xe=p.useCallback((ge,Qe,X)=>{const de=!W.current&&!X;(g.value!==void 0&&g.value===Qe||de)&&P(ge)},[g.value]),xt=r==="popper"?lw:sD,ut=xt===lw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:w,avoidCollisions:j}:{};return s.jsx(nD,{scope:n,content:b,viewport:S,onViewportChange:M,itemRefCallback:ie,selectedItem:I,onItemLeave:Ce,itemTextRefCallback:Xe,focusSelectedItem:L,selectedItemText:N,position:r,isPositioned:T,searchRef:U,children:s.jsx(of,{as:Wi,allowPinchZoom:!0,children:s.jsx(rf,{asChild:!0,trapped:g.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:le(i,ge=>{var Qe;(Qe=g.trigger)==null||Qe.focus({preventScroll:!0}),ge.preventDefault()}),children:s.jsx(nf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:s.jsx(xt,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:ge=>ge.preventDefault(),...y,...ut,onPlaced:()=>F(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:le(y.onKeyDown,ge=>{const Qe=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!Qe&&ge.key.length===1&&Q(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let de=R().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const Te=ge.target,Oe=de.indexOf(Te);de=de.slice(Oe+1)}setTimeout(()=>Y(de)),ge.preventDefault()}})})})})})})});rD.displayName=wJ;var bJ="SelectItemAlignedPosition",sD=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=go(fl,n),o=vo(fl,n),[l,c]=p.useState(null),[u,d]=p.useState(null),f=We(e,k=>d(k)),m=Av(n),v=p.useRef(!1),x=p.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:y,focusSelectedItem:g}=o,b=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&j&&y){const k=a.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),N=y.getBoundingClientRect();if(a.dir!=="rtl"){const Te=N.left-I.left,Oe=A.left-Te,He=k.left-Oe,Tt=k.width+He,Wr=Math.max(Tt,I.width),hi=window.innerWidth-us,sa=mh(Oe,[us,Math.max(us,hi-Wr)]);l.style.minWidth=Tt+"px",l.style.left=sa+"px"}else{const Te=I.right-N.right,Oe=window.innerWidth-A.right-Te,He=window.innerWidth-k.right-Oe,Tt=k.width+He,Wr=Math.max(Tt,I.width),hi=window.innerWidth-us,sa=mh(Oe,[us,Math.max(us,hi-Wr)]);l.style.minWidth=Tt+"px",l.style.right=sa+"px"}const P=m(),R=window.innerHeight-us*2,T=w.scrollHeight,F=window.getComputedStyle(u),W=parseInt(F.borderTopWidth,10),Y=parseInt(F.paddingTop,10),L=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),B=W+Y+T+O+L,U=Math.min(j.offsetHeight*5,B),Q=window.getComputedStyle(w),ie=parseInt(Q.paddingTop,10),Ce=parseInt(Q.paddingBottom,10),Xe=k.top+k.height/2-us,xt=R-Xe,ut=j.offsetHeight/2,ge=j.offsetTop+ut,Qe=W+Y+ge,X=B-Qe;if(Qe<=Xe){const Te=P.length>0&&j===P[P.length-1].ref.current;l.style.bottom="0px";const Oe=u.clientHeight-w.offsetTop-w.offsetHeight,He=Math.max(xt,ut+(Te?Ce:0)+Oe+L),Tt=Qe+He;l.style.height=Tt+"px"}else{const Te=P.length>0&&j===P[0].ref.current;l.style.top="0px";const He=Math.max(Xe,W+w.offsetTop+(Te?ie:0)+ut)+X;l.style.height=He+"px",w.scrollTop=Qe-Xe+w.offsetTop}l.style.margin=`${us}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,j,y,a.dir,r]);En(()=>b(),[b]);const[E,S]=p.useState();En(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const M=p.useCallback(k=>{k&&x.current===!0&&(b(),g==null||g(),x.current=!1)},[b,g]);return s.jsx(_J,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:s.jsx(_e.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});sD.displayName=bJ;var jJ="SelectPopperPosition",lw=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=us,...a}=t,o=Rv(n);return s.jsx(Qb,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lw.displayName=jJ;var[_J,fj]=Nu(fl,{}),cw="SelectViewport",iD=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=vo(cw,n),o=fj(cw,n),l=We(e,a.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Pv.Slot,{scope:n,children:s.jsx(_e.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:le(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-d.scrollTop);if(v>0){const x=window.innerHeight-us*2,w=parseFloat(f.style.minHeight),j=parseFloat(f.style.height),y=Math.max(w,j);if(y<x){const g=y+v,b=Math.min(x,g),E=g-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});iD.displayName=cw;var aD="SelectGroup",[NJ,EJ]=Nu(aD),SJ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Lr();return s.jsx(NJ,{scope:n,id:i,children:s.jsx(_e.div,{role:"group","aria-labelledby":i,...r,ref:e})})});SJ.displayName=aD;var oD="SelectLabel",lD=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=EJ(oD,n);return s.jsx(_e.div,{id:i.id,...r,ref:e})});lD.displayName=oD;var tg="SelectItem",[CJ,cD]=Nu(tg),uD=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,l=go(tg,n),c=vo(tg,n),u=l.value===r,[d,f]=p.useState(a??""),[m,v]=p.useState(!1),x=We(e,g=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,g,r,i)}),w=Lr(),j=p.useRef("touch"),y=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(CJ,{scope:n,value:r,disabled:i,textId:w,isSelected:u,onItemTextChange:p.useCallback(g=>{f(b=>b||((g==null?void 0:g.textContent)??"").trim())},[]),children:s.jsx(Pv.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:s.jsx(_e.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:le(o.onFocus,()=>v(!0)),onBlur:le(o.onBlur,()=>v(!1)),onClick:le(o.onClick,()=>{j.current!=="mouse"&&y()}),onPointerUp:le(o.onPointerUp,()=>{j.current==="mouse"&&y()}),onPointerDown:le(o.onPointerDown,g=>{j.current=g.pointerType}),onPointerMove:le(o.onPointerMove,g=>{var b;j.current=g.pointerType,i?(b=c.onItemLeave)==null||b.call(c):j.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(o.onPointerLeave,g=>{var b;g.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:le(o.onKeyDown,g=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&g.key===" "||(fJ.includes(g.key)&&y(),g.key===" "&&g.preventDefault())})})})})});uD.displayName=tg;var hd="SelectItemText",dD=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=go(hd,n),l=vo(hd,n),c=cD(hd,n),u=vJ(hd,n),[d,f]=p.useState(null),m=We(e,y=>f(y),c.onItemTextChange,y=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,y,c.value,c.disabled)}),v=d==null?void 0:d.textContent,x=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=u;return En(()=>(w(x),()=>j(x)),[w,j,x]),s.jsxs(s.Fragment,{children:[s.jsx(_e.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?lu.createPortal(a.children,o.valueNode):null]})});dD.displayName=hd;var hD="SelectItemIndicator",fD=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return cD(hD,n).isSelected?s.jsx(_e.span,{"aria-hidden":!0,...r,ref:e}):null});fD.displayName=hD;var uw="SelectScrollUpButton",mD=p.forwardRef((t,e)=>{const n=vo(uw,t.__scopeSelect),r=fj(uw,t.__scopeSelect),[i,a]=p.useState(!1),o=We(e,r.onScrollButtonChange);return En(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(gD,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});mD.displayName=uw;var dw="SelectScrollDownButton",pD=p.forwardRef((t,e)=>{const n=vo(dw,t.__scopeSelect),r=fj(dw,t.__scopeSelect),[i,a]=p.useState(!1),o=We(e,r.onScrollButtonChange);return En(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(gD,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});pD.displayName=dw;var gD=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=vo("SelectScrollButton",n),o=p.useRef(null),l=Av(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),En(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(_e.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:le(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:le(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:le(i.onPointerLeave,()=>{c()})})}),TJ="SelectSeparator",vD=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(_e.div,{"aria-hidden":!0,...r,ref:e})});vD.displayName=TJ;var hw="SelectArrow",kJ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Rv(n),a=go(hw,n),o=vo(hw,n);return a.open&&o.position==="popper"?s.jsx(Xb,{...i,...r,ref:e}):null});kJ.displayName=hw;function xD(t){return t===""||t===void 0}var yD=p.forwardRef((t,e)=>{const{value:n,...r}=t,i=p.useRef(null),a=We(e,i),o=Iv(n);return p.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&d){const f=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(f)}},[o,n]),s.jsx(G4,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});yD.displayName="BubbleSelect";function wD(t){const e=mn(t),n=p.useRef(""),r=p.useRef(0),i=p.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function bD(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=IJ(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function IJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var PJ=K4,jD=Q4,AJ=Z4,RJ=J4,DJ=eD,_D=tD,MJ=iD,ND=lD,ED=uD,OJ=dD,LJ=fD,SD=mD,CD=pD,TD=vD;const St=PJ,Ct=AJ,wt=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(jD,{ref:r,className:Pe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(RJ,{asChild:!0,children:s.jsx(WY,{className:"h-4 w-4 opacity-50"})})]}));wt.displayName=jD.displayName;const kD=p.forwardRef(({className:t,...e},n)=>s.jsx(SD,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(ZY,{})}));kD.displayName=SD.displayName;const ID=p.forwardRef(({className:t,...e},n)=>s.jsx(CD,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(g4,{})}));ID.displayName=CD.displayName;const bt=p.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(DJ,{children:s.jsxs(_D,{ref:i,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(kD,{}),s.jsx(MJ,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(ID,{})]})}));bt.displayName=_D.displayName;const VJ=p.forwardRef(({className:t,...e},n)=>s.jsx(ND,{ref:n,className:Pe("px-2 py-1.5 text-sm font-semibold",t),...e}));VJ.displayName=ND.displayName;const we=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(ED,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(LJ,{children:s.jsx(aj,{className:"h-4 w-4"})})}),s.jsx(OJ,{children:e})]}));we.displayName=ED.displayName;const FJ=p.forwardRef(({className:t,...e},n)=>s.jsx(TD,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));FJ.displayName=TD.displayName;var UJ="Separator",NS="horizontal",$J=["horizontal","vertical"],PD=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=NS,...i}=t,a=zJ(r)?r:NS,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(_e.div,{"data-orientation":a,...l,...i,ref:e})});PD.displayName=UJ;function zJ(t){return $J.includes(t)}var AD=PD;const Qr=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(AD,{ref:i,decorative:n,orientation:e,className:Pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Qr.displayName=AD.displayName;const uy=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:El},{value:"vehicles",label:"Véhicules",icon:_A},{value:"real-estate",label:"Immobilier",icon:qp},{value:"fashion",label:"Mode",icon:Fb},{value:"gaming",label:"Jeux & Jouets",icon:iW},{value:"baby",label:"Bébé & Enfant",icon:Hq},{value:"business",label:"Équipement Pro",icon:jA}],BJ=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],qJ=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],WJ=()=>{var y;const[t,e]=N1(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=uf(),[l,c]=p.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=p.useState("grid"),[f,m]=p.useState(!1);p.useEffect(()=>{const g={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(g),o(g)},[t,o]);const v=()=>{const g={...l};o(g);const b=new URLSearchParams;g.query&&b.set("q",g.query),g.category&&b.set("category",g.category),e(b)},x=(g,b)=>{const E={...l,[g]:b};c(E)},w=()=>{a(l,!1)},j=()=>{const g={query:"",sortBy:"date"};c(g),o(g),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:g=>x("query",g.target.value),onKeyPress:g=>g.key==="Enter"&&v(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{onClick:v,className:"whitespace-nowrap",children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs($,{variant:"outline",onClick:()=>m(!f),className:"lg:hidden",children:[s.jsx(uv,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:uy.slice(1,6).map(g=>{const b=g.icon;return s.jsxs($,{variant:l.category===g.value?"default":"outline",size:"sm",onClick:()=>x("category",l.category===g.value?"":g.value),className:"flex items-center gap-2",children:[b&&s.jsx(b,{className:"w-4 h-4"}),g.label]},g.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${f?"block":"hidden lg:block"}`,children:s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx($,{variant:"ghost",size:"sm",onClick:j,children:"Effacer"})]})}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(St,{value:l.category||"all",onValueChange:g=>x("category",g==="all"?"":g),children:[s.jsx(wt,{children:s.jsx(Ct,{})}),s.jsx(bt,{children:uy.map(g=>{const b=g.icon;return s.jsx(we,{value:g.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[b&&s.jsx(b,{className:"w-4 h-4"}),g.label]})},g.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:g=>x("minPrice",g.target.value?parseInt(g.target.value):void 0)}),s.jsx(ke,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:g=>x("maxPrice",g.target.value?parseInt(g.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:BJ.map(g=>{var b;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((b=l.condition)==null?void 0:b.includes(g.value))||!1,onChange:E=>{const S=l.condition||[],M=E.target.checked?[...S,g.value]:S.filter(k=>k!==g.value);x("condition",M.length>0?M:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:g.label})]},g.value)})})]}),s.jsx($,{onClick:v,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&s.jsxs(Ae,{variant:"secondary",children:['"',l.query,'"']}),l.category&&s.jsx(Ae,{variant:"secondary",children:(y=uy.find(g=>g.value===l.category))==null?void 0:y.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(St,{value:l.sortBy||"date",onValueChange:g=>x("sortBy",g),children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{})}),s.jsx(bt,{children:qJ.map(g=>s.jsx(we,{value:g.value,children:g.label},g.value))})]}),s.jsx(Qr,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx($,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(CA,{className:"w-4 h-4"})}),s.jsx($,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(IA,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((g,b)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(G,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},b))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(g=>s.jsx(fh,{listing:g},g.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx($,{onClick:w,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx($,{onClick:j,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var mj="Dialog",[RD,Tae]=qr(mj),[HJ,As]=RD(mj),DD=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=$r({prop:r,defaultProp:i,onChange:a});return s.jsx(HJ,{scope:e,triggerRef:l,contentRef:c,contentId:Lr(),titleId:Lr(),descriptionId:Lr(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};DD.displayName=mj;var MD="DialogTrigger",OD=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=As(MD,n),a=We(e,i.triggerRef);return s.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vj(i.open),...r,ref:a,onClick:le(t.onClick,i.onOpenToggle)})});OD.displayName=MD;var pj="DialogPortal",[GJ,LD]=RD(pj,{forceMount:void 0}),VD=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=As(pj,e);return s.jsx(GJ,{scope:e,forceMount:n,children:p.Children.map(r,o=>s.jsx(Fn,{present:n||a.open,children:s.jsx(af,{asChild:!0,container:i,children:o})}))})};VD.displayName=pj;var ng="DialogOverlay",FD=p.forwardRef((t,e)=>{const n=LD(ng,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=As(ng,t.__scopeDialog);return a.modal?s.jsx(Fn,{present:r||a.open,children:s.jsx(KJ,{...i,ref:e})}):null});FD.displayName=ng;var KJ=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=As(ng,n);return s.jsx(of,{as:Wi,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(_e.div,{"data-state":vj(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ml="DialogContent",UD=p.forwardRef((t,e)=>{const n=LD(ml,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=As(ml,t.__scopeDialog);return s.jsx(Fn,{present:r||a.open,children:a.modal?s.jsx(YJ,{...i,ref:e}):s.jsx(QJ,{...i,ref:e})})});UD.displayName=ml;var YJ=p.forwardRef((t,e)=>{const n=As(ml,t.__scopeDialog),r=p.useRef(null),i=We(e,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return _v(a)},[]),s.jsx($D,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:le(t.onFocusOutside,a=>a.preventDefault())})}),QJ=p.forwardRef((t,e)=>{const n=As(ml,t.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return s.jsx($D,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),$D=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=As(ml,n),c=p.useRef(null),u=We(e,c);return pv(),s.jsxs(s.Fragment,{children:[s.jsx(rf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(nf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":vj(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(XJ,{titleId:l.titleId}),s.jsx(JJ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),gj="DialogTitle",zD=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=As(gj,n);return s.jsx(_e.h2,{id:i.titleId,...r,ref:e})});zD.displayName=gj;var BD="DialogDescription",qD=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=As(BD,n);return s.jsx(_e.p,{id:i.descriptionId,...r,ref:e})});qD.displayName=BD;var WD="DialogClose",HD=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=As(WD,n);return s.jsx(_e.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>i.onOpenChange(!1))})});HD.displayName=WD;function vj(t){return t?"open":"closed"}var GD="DialogTitleWarning",[kae,KD]=iH(GD,{contentName:ml,titleName:gj,docsSlug:"dialog"}),XJ=({titleId:t})=>{const e=KD(GD),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},ZJ="DialogDescriptionWarning",JJ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KD(ZJ).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},eee=DD,tee=OD,nee=VD,YD=FD,QD=UD,XD=zD,ZD=qD,ree=HD;const Ri=eee,Ec=tee,see=nee,JD=p.forwardRef(({className:t,...e},n)=>s.jsx(YD,{ref:n,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));JD.displayName=YD.displayName;const Js=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(see,{children:[s.jsx(JD,{}),s.jsxs(QD,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(ree,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(eQ,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Js.displayName=QD.displayName;const Di=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Di.displayName="DialogHeader";const Hm=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Hm.displayName="DialogFooter";const ei=p.forwardRef(({className:t,...e},n)=>s.jsx(XD,{ref:n,className:Pe("text-lg font-semibold leading-none tracking-tight",t),...e}));ei.displayName=XD.displayName;const Sc=p.forwardRef(({className:t,...e},n)=>s.jsx(ZD,{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Sc.displayName=ZD.displayName;const js=p.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Pe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));js.displayName="Textarea";var iee="Label",eM=p.forwardRef((t,e)=>s.jsx(_e.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eM.displayName=iee;var tM=eM;const aee=mv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oe=p.forwardRef(({className:t,...e},n)=>s.jsx(tM,{ref:n,className:Pe(aee(),t),...e}));oe.displayName=tM.displayName;const oee=mv("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ft=p.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Pe(oee({variant:e}),t),...n}));ft.displayName="Alert";const lee=p.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",t),...e}));lee.displayName="AlertTitle";const mt=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",t),...e}));mt.displayName="AlertDescription";var Fe=function(){return Fe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fe.apply(this,arguments)};function cee(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nM(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function hf(t){return t.mode==="multiple"}function ff(t){return t.mode==="range"}function Dv(t){return t.mode==="single"}var uee={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dee(t,e){return _n(t,"LLLL y",e)}function hee(t,e){return _n(t,"d",e)}function fee(t,e){return _n(t,"LLLL",e)}function mee(t){return"".concat(t)}function pee(t,e){return _n(t,"cccccc",e)}function gee(t,e){return _n(t,"yyyy",e)}var vee=Object.freeze({__proto__:null,formatCaption:dee,formatDay:hee,formatMonthCaption:fee,formatWeekNumber:mee,formatWeekdayName:pee,formatYearCaption:gee}),xee=function(t,e,n){return _n(t,"do MMMM (EEEE)",n)},yee=function(){return"Month: "},wee=function(){return"Go to next month"},bee=function(){return"Go to previous month"},jee=function(t,e){return _n(t,"cccc",e)},_ee=function(t){return"Week n. ".concat(t)},Nee=function(){return"Year: "},Eee=Object.freeze({__proto__:null,labelDay:xee,labelMonthDropdown:yee,labelNext:wee,labelPrevious:bee,labelWeekNumber:_ee,labelWeekday:jee,labelYearDropdown:Nee});function See(){var t="buttons",e=uee,n=dj,r={},i={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:vee,labels:Eee,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Cee(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Cr(r):e&&(a=new Date(e,0,1)),i?o=kv(i):n&&(o=new Date(n,11,31)),{fromDate:a?Qc(a):void 0,toDate:o?Qc(o):void 0}}var rM=p.createContext(void 0);function Tee(t){var e,n=t.initialProps,r=See(),i=Cee(n),a=i.fromDate,o=i.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(Dv(n)||hf(n)||ff(n))&&(c=n.onSelect);var u=Fe(Fe(Fe({},r),n),{captionLayout:l,classNames:Fe(Fe({},r.classNames),n.classNames),components:Fe({},n.components),formatters:Fe(Fe({},r.formatters),n.formatters),fromDate:a,labels:Fe(Fe({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Fe(Fe({},r.modifiers),n.modifiers),modifiersClassNames:Fe(Fe({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Fe(Fe({},r.styles),n.styles),toDate:o});return s.jsx(rM.Provider,{value:u,children:t.children})}function At(){var t=p.useContext(rM);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function sM(t){var e=At(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function kee(t){return s.jsx("svg",Fe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function iM(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=At(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:kee;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Iee(t){var e,n=At(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var f=[];if(cZ(r,i))for(var m=Cr(r),v=r.getMonth();v<=i.getMonth();v++)f.push(cy(m,v));else for(var m=Cr(new Date),v=0;v<=11;v++)f.push(cy(m,v));var x=function(j){var y=Number(j.target.value),g=cy(Cr(t.displayMonth),y);t.onChange(g)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:iM;return s.jsx(w,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:f.map(function(j){return s.jsx("option",{value:j.getMonth(),children:l(j,{locale:o})},j.getMonth())})})}function Pee(t){var e,n=t.displayMonth,r=At(),i=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,m=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var v=i.getFullYear(),x=a.getFullYear(),w=v;w<=x;w++)m.push(yS(L4(new Date),w));var j=function(g){var b=yS(Cr(n),Number(g.target.value));t.onChange(b)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:iM;return s.jsx(y,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:j,value:n.getFullYear(),caption:d(n,{locale:o}),children:m.map(function(g){return s.jsx("option",{value:g.getFullYear(),children:d(g,{locale:o})},g.getFullYear())})})}function Aee(t,e){var n=p.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function Ree(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Zc(a,i)<0){var u=-1*(c-1);i=Ts(a,u)}return o&&Zc(i,o)<0&&(i=o),Cr(i)}function Dee(){var t=At(),e=Ree(t),n=Aee(e,t.month),r=n[0],i=n[1],a=function(o){var l;if(!t.disableNavigation){var c=Cr(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,a]}function Mee(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Cr(t),a=Cr(Ts(i,r)),o=Zc(a,i),l=[],c=0;c<o;c++){var u=Ts(i,c);l.push(u)}return n&&(l=l.reverse()),l}function Oee(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Cr(t);if(!n)return Ts(l,o);var c=Zc(n,t);if(!(c<a))return Ts(l,o)}}function Lee(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Cr(t);if(!n)return Ts(l,-o);var c=Zc(l,n);if(!(c<=0))return Ts(l,-o)}}var aM=p.createContext(void 0);function Vee(t){var e=At(),n=Dee(),r=n[0],i=n[1],a=Mee(r,e),o=Oee(r,e),l=Lee(r,e),c=function(f){return a.some(function(m){return hj(f,m)})},u=function(f,m){c(f)||(m&&q4(f,m)?i(Ts(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(aM.Provider,{value:d,children:t.children})}function mf(){var t=p.useContext(aM);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function ES(t){var e,n=At(),r=n.classNames,i=n.styles,a=n.components,o=mf().goToMonth,l=function(d){o(Ts(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:sM,u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:u}),s.jsx(Iee,{onChange:l,displayMonth:t.displayMonth}),s.jsx(Pee,{onChange:l,displayMonth:t.displayMonth})]})}function Fee(t){return s.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Uee(t){return s.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var rg=p.forwardRef(function(t,e){var n=At(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=Fe(Fe({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),s.jsx("button",Fe({},t,{ref:e,type:"button",className:o,style:l}))});function $ee(t){var e,n,r=At(),i=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var m=u(t.previousMonth,{locale:a}),v=[o.nav_button,o.nav_button_previous].join(" "),x=d(t.nextMonth,{locale:a}),w=[o.nav_button,o.nav_button_next].join(" "),j=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:Uee,y=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:Fee;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&s.jsx(rg,{name:"previous-month","aria-label":m,className:v,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(j,{className:o.nav_icon,style:l.nav_icon}):s.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&s.jsx(rg,{name:"next-month","aria-label":x,className:w,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(y,{className:o.nav_icon,style:l.nav_icon}):s.jsx(j,{className:o.nav_icon,style:l.nav_icon})})]})}function SS(t){var e=At().numberOfMonths,n=mf(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(x){return hj(t.displayMonth,x)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),m=function(){r&&a(r)},v=function(){i&&a(i)};return s.jsx($ee,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:m,onNextClick:v})}function zee(t){var e,n=At(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:sM,u;return i?u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=s.jsx(ES,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(ES,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(SS,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(SS,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:u})}function Bee(t){var e=At(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function qee(t,e,n){for(var r=n?hl(new Date):ii(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=nr(r,a);i.push(o)}return i}function Wee(){var t=At(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=qee(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},f)})]})}function Hee(){var t,e=At(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:Wee;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function Gee(t){var e=At(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var xj=p.createContext(void 0);function Kee(t){if(!hf(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(xj.Provider,{value:e,children:t.children})}return s.jsx(Yee,{initialProps:t.initialProps,children:t.children})}function Yee(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(u,d,f){var m,v;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,f);var x=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!x){var w=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!w){var j=r?nM([],r):[];if(d.selected){var y=j.findIndex(function(g){return jr(u,g)});j.splice(y,1)}else j.push(u);(v=e.onSelect)===null||v===void 0||v.call(e,j,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(m){return jr(m,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return s.jsx(xj.Provider,{value:c,children:n})}function yj(){var t=p.useContext(xj);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Qee(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?jr(i,t)&&jr(r,t)?void 0:jr(i,t)?{from:i,to:void 0}:jr(r,t)?void 0:ow(r,t)?{from:t,to:i}:{from:r,to:t}:i?ow(t,i)?{from:i,to:t}:{from:t,to:i}:r?q4(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var wj=p.createContext(void 0);function Xee(t){if(!ff(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(wj.Provider,{value:e,children:t.children})}return s.jsx(Zee,{initialProps:t.initialProps,children:t.children})}function Zee(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,l=e.min,c=e.max,u=function(v,x,w){var j,y;(j=e.onDayClick)===null||j===void 0||j.call(e,v,x,w);var g=Qee(v,r);(y=e.onSelect)===null||y===void 0||y.call(e,g,v,x,w)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],jr(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:ly(a,l-1),before:nr(a,l-1)}),a&&o&&d.disabled.push({after:a,before:nr(a,l-1)}),!a&&o&&d.disabled.push({after:ly(o,l-1),before:nr(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:nr(a,-c+1)}),d.disabled.push({after:nr(a,c-1)})),a&&o){var f=qs(o,a)+1,m=c-f;d.disabled.push({before:ly(a,m)}),d.disabled.push({after:nr(o,m)})}!a&&o&&(d.disabled.push({before:nr(o,-c+1)}),d.disabled.push({after:nr(o,c-1)}))}return s.jsx(wj.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function bj(){var t=p.useContext(wj);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Gm(t){return Array.isArray(t)?nM([],t):t!==void 0?[t]:[]}function Jee(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=Gm(i)}),e}var ks;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ks||(ks={}));var ete=ks.Selected,vi=ks.Disabled,tte=ks.Hidden,nte=ks.Today,dy=ks.RangeEnd,hy=ks.RangeMiddle,fy=ks.RangeStart,rte=ks.Outside;function ste(t,e,n){var r,i=(r={},r[ete]=Gm(t.selected),r[vi]=Gm(t.disabled),r[tte]=Gm(t.hidden),r[nte]=[t.today],r[dy]=[],r[hy]=[],r[fy]=[],r[rte]=[],r);return t.fromDate&&i[vi].push({before:t.fromDate}),t.toDate&&i[vi].push({after:t.toDate}),hf(t)?i[vi]=i[vi].concat(e.modifiers[vi]):ff(t)&&(i[vi]=i[vi].concat(n.modifiers[vi]),i[fy]=n.modifiers[fy],i[hy]=n.modifiers[hy],i[dy]=n.modifiers[dy]),i}var oM=p.createContext(void 0);function ite(t){var e=At(),n=yj(),r=bj(),i=ste(e,n,r),a=Jee(e.modifiers),o=Fe(Fe({},i),a);return s.jsx(oM.Provider,{value:o,children:t.children})}function lM(){var t=p.useContext(oM);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function ate(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function ote(t){return!!(t&&typeof t=="object"&&"from"in t)}function lte(t){return!!(t&&typeof t=="object"&&"after"in t)}function cte(t){return!!(t&&typeof t=="object"&&"before"in t)}function ute(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function dte(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=qs(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=qs(t,r)>=0&&qs(i,t)>=0;return o}return i?jr(i,t):r?jr(r,t):!1}function hte(t){return cj(t)}function fte(t){return Array.isArray(t)&&t.every(cj)}function mte(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(hte(n))return jr(t,n);if(fte(n))return n.includes(t);if(ote(n))return dte(t,n);if(ute(n))return n.dayOfWeek.includes(t.getDay());if(ate(n)){var r=qs(n.before,t),i=qs(n.after,t),a=r>0,o=i<0,l=ow(n.before,n.after);return l?o&&a:a||o}return lte(n)?qs(t,n.after)>0:cte(n)?qs(n.before,t)>0:typeof n=="function"?n(t):!1})}function jj(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return mte(t,l)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!hj(t,n)&&(i.outside=!0),i}function pte(t,e){for(var n=Cr(t[0]),r=kv(t[t.length-1]),i,a,o=n;o<=r;){var l=jj(o,e),c=!l.disabled&&!l.hidden;if(!c){o=nr(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=nr(o,1)}return a||i}var gte=365;function cM(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,m={day:nr,week:aw,month:Ts,year:ZQ,startOfWeek:function(j){return i.ISOWeek?hl(j):ii(j,{locale:f,weekStartsOn:c})},endOfWeek:function(j){return i.ISOWeek?V4(j):uj(j,{locale:f,weekStartsOn:c})}},v=m[n](t,r==="after"?1:-1);r==="before"&&u?v=JQ([u,v]):r==="after"&&d&&(v=eX([d,v]));var x=!0;if(a){var w=jj(v,a);x=!w.disabled&&!w.hidden}return x?v:l.count>gte?l.lastFocused:cM(v,{moveBy:n,direction:r,context:i,modifiers:a,retry:Fe(Fe({},l),{count:l.count+1})})}var uM=p.createContext(void 0);function vte(t){var e=mf(),n=lM(),r=p.useState(),i=r[0],a=r[1],o=p.useState(),l=o[0],c=o[1],u=pte(e.displayMonths,n),d=i??(l&&e.isDateDisplayed(l))?l:u,f=function(){c(i),a(void 0)},m=function(j){a(j)},v=At(),x=function(j,y){if(i){var g=cM(i,{moveBy:j,direction:y,context:v,modifiers:n});jr(i,g)||(e.goToDate(g,i),m(g))}},w={focusedDay:i,focusTarget:d,blur:f,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return s.jsx(uM.Provider,{value:w,children:t.children})}function _j(){var t=p.useContext(uM);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function xte(t,e){var n=lM(),r=jj(t,n,e);return r}var Nj=p.createContext(void 0);function yte(t){if(!Dv(t.initialProps)){var e={selected:void 0};return s.jsx(Nj.Provider,{value:e,children:t.children})}return s.jsx(wte,{initialProps:t.initialProps,children:t.children})}function wte(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},i={selected:e.selected,onDayClick:r};return s.jsx(Nj.Provider,{value:i,children:n})}function dM(){var t=p.useContext(Nj);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function bte(t,e){var n=At(),r=dM(),i=yj(),a=bj(),o=_j(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,m=o.focus,v=o.focusMonthBefore,x=o.focusMonthAfter,w=o.focusYearBefore,j=o.focusYearAfter,y=o.focusStartOfWeek,g=o.focusEndOfWeek,b=function(L){var O,B,U,Q;Dv(n)?(O=r.onDayClick)===null||O===void 0||O.call(r,t,e,L):hf(n)?(B=i.onDayClick)===null||B===void 0||B.call(i,t,e,L):ff(n)?(U=a.onDayClick)===null||U===void 0||U.call(a,t,e,L):(Q=n.onDayClick)===null||Q===void 0||Q.call(n,t,e,L)},E=function(L){var O;m(t),(O=n.onDayFocus)===null||O===void 0||O.call(n,t,e,L)},S=function(L){var O;f(),(O=n.onDayBlur)===null||O===void 0||O.call(n,t,e,L)},M=function(L){var O;(O=n.onDayMouseEnter)===null||O===void 0||O.call(n,t,e,L)},k=function(L){var O;(O=n.onDayMouseLeave)===null||O===void 0||O.call(n,t,e,L)},I=function(L){var O;(O=n.onDayPointerEnter)===null||O===void 0||O.call(n,t,e,L)},A=function(L){var O;(O=n.onDayPointerLeave)===null||O===void 0||O.call(n,t,e,L)},N=function(L){var O;(O=n.onDayTouchCancel)===null||O===void 0||O.call(n,t,e,L)},P=function(L){var O;(O=n.onDayTouchEnd)===null||O===void 0||O.call(n,t,e,L)},R=function(L){var O;(O=n.onDayTouchMove)===null||O===void 0||O.call(n,t,e,L)},T=function(L){var O;(O=n.onDayTouchStart)===null||O===void 0||O.call(n,t,e,L)},F=function(L){var O;(O=n.onDayKeyUp)===null||O===void 0||O.call(n,t,e,L)},W=function(L){var O;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),d();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?w():v();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?j():x();break;case"Home":L.preventDefault(),L.stopPropagation(),y();break;case"End":L.preventDefault(),L.stopPropagation(),g();break}(O=n.onDayKeyDown)===null||O===void 0||O.call(n,t,e,L)},Y={onClick:b,onFocus:E,onBlur:S,onKeyDown:W,onKeyUp:F,onMouseEnter:M,onMouseLeave:k,onPointerEnter:I,onPointerLeave:A,onTouchCancel:N,onTouchEnd:P,onTouchMove:R,onTouchStart:T};return Y}function jte(){var t=At(),e=dM(),n=yj(),r=bj(),i=Dv(t)?e.selected:hf(t)?n.selected:ff(t)?r.selected:void 0;return i}function _te(t){return Object.values(ks).includes(t)}function Nte(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(_te(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Ete(t,e){var n=Fe({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=Fe(Fe({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Ste(t,e,n){var r,i,a,o=At(),l=_j(),c=xte(t,e),u=bte(t,c),d=jte(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var M;c.outside||l.focusedDay&&f&&jr(l.focusedDay,t)&&((M=n.current)===null||M===void 0||M.focus())},[l.focusedDay,t,n,f,c.outside]);var m=Nte(o,c).join(" "),v=Ete(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),w=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:Gee,j=s.jsx(w,{date:t,displayMonth:e,activeModifiers:c}),y={style:v,className:m,children:j,role:"gridcell"},g=l.focusTarget&&jr(l.focusTarget,t)&&!c.outside,b=l.focusedDay&&jr(l.focusedDay,t),E=Fe(Fe(Fe({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=b||g?0:-1,r)),u),S={isButton:f,isHidden:x,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:y};return S}function Cte(t){var e=p.useRef(null),n=Ste(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(rg,Fe({name:"day",ref:e},n.buttonProps)):s.jsx("div",Fe({},n.divProps))}function Tte(t){var e=t.number,n=t.dates,r=At(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=c(Number(e),{locale:l}),m=function(v){i(e,n,v)};return s.jsx(rg,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function kte(t){var e,n,r=At(),i=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Cte,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Tte,d;return o&&(d=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(u,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:t.displayMonth,date:f})},aZ(f))})]})}function CS(t,e,n){for(var r=n!=null&&n.ISOWeek?V4(e):uj(e,n),i=n!=null&&n.ISOWeek?hl(t):ii(t,n),a=qs(r,i),o=[],l=0;l<=a;l++)o.push(nr(i,l));var c=o.reduce(function(u,d){var f=n!=null&&n.ISOWeek?U4(d):z4(d,n),m=u.find(function(v){return v.weekNumber===f});return m?(m.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function Ite(t,e){var n=CS(Cr(t),kv(t),e);if(e!=null&&e.useFixedWeeks){var r=lZ(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=aw(a,6-r),l=CS(aw(a,1),o,e);n.push.apply(n,l)}}return n}function Pte(t){var e,n,r,i=At(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,m=i.firstWeekContainsDate,v=i.ISOWeek,x=Ite(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:a,weekStartsOn:f,firstWeekContainsDate:m}),w=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:Hee,j=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:kte,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Bee;return s.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&s.jsx(w,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(g){return s.jsx(j,{displayMonth:t.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),s.jsx(y,{displayMonth:t.displayMonth})]})}function Ate(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Rte=Ate()?p.useLayoutEffect:p.useEffect,my=!1,Dte=0;function TS(){return"react-day-picker-".concat(++Dte)}function Mte(t){var e,n=t??(my?TS():null),r=p.useState(n),i=r[0],a=r[1];return Rte(function(){i===null&&a(TS())},[]),p.useEffect(function(){my===!1&&(my=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Ote(t){var e,n,r=At(),i=r.dir,a=r.classNames,o=r.styles,l=r.components,c=mf().displayMonths,u=Mte(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],m=o.month,v=t.displayIndex===0,x=t.displayIndex===c.length-1,w=!v&&!x;i==="rtl"&&(e=[v,x],x=e[0],v=e[1]),v&&(f.push(a.caption_start),m=Fe(Fe({},m),o.caption_start)),x&&(f.push(a.caption_end),m=Fe(Fe({},m),o.caption_end)),w&&(f.push(a.caption_between),m=Fe(Fe({},m),o.caption_between));var j=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:zee;return s.jsxs("div",{className:f.join(" "),style:m,children:[s.jsx(j,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(Pte,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Lte(t){var e=At(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function Vte(t){var e,n,r=t.initialProps,i=At(),a=_j(),o=mf(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=Fe(Fe({},i.styles.root),i.style),m=Object.keys(r).filter(function(x){return x.startsWith("data-")}).reduce(function(x,w){var j;return Fe(Fe({},x),(j={},j[w]=r[w],j))},{}),v=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Lte;return s.jsx("div",Fe({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:s.jsx(v,{children:o.displayMonths.map(function(x,w){return s.jsx(Ote,{displayIndex:w,displayMonth:x},w)})})}))}function Fte(t){var e=t.children,n=cee(t,["children"]);return s.jsx(Tee,{initialProps:n,children:s.jsx(Vee,{children:s.jsx(yte,{initialProps:n,children:s.jsx(Kee,{initialProps:n,children:s.jsx(Xee,{initialProps:n,children:s.jsx(ite,{children:s.jsx(vte,{children:e})})})})})})})}function Ute(t){return s.jsx(Fte,Fe({},t,{children:s.jsx(Vte,{initialProps:t})}))}function hM({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(Ute,{showOutsideDays:n,className:Pe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Pe(Y0({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Pe("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Pe(Y0({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(YY,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(v4,{className:"h-4 w-4"})},...r})}hM.displayName="Calendar";var Ej="Popover",[fM,Iae]=qr(Ej,[yu]),pf=yu(),[$te,xo]=fM(Ej),mM=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=pf(e),c=p.useRef(null),[u,d]=p.useState(!1),[f=!1,m]=$r({prop:r,defaultProp:i,onChange:a});return s.jsx(Yb,{...l,children:s.jsx($te,{scope:e,contentId:Lr(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};mM.displayName=Ej;var pM="PopoverAnchor",zte=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xo(pM,n),a=pf(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(wv,{...a,...r,ref:e})});zte.displayName=pM;var gM="PopoverTrigger",vM=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xo(gM,n),a=pf(n),o=We(e,i.triggerRef),l=s.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":jM(i.open),...r,ref:o,onClick:le(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(wv,{asChild:!0,...a,children:l})});vM.displayName=gM;var Sj="PopoverPortal",[Bte,qte]=fM(Sj,{forceMount:void 0}),xM=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=xo(Sj,e);return s.jsx(Bte,{scope:e,forceMount:n,children:s.jsx(Fn,{present:n||a.open,children:s.jsx(af,{asChild:!0,container:i,children:r})})})};xM.displayName=Sj;var Jc="PopoverContent",yM=p.forwardRef((t,e)=>{const n=qte(Jc,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=xo(Jc,t.__scopePopover);return s.jsx(Fn,{present:r||a.open,children:a.modal?s.jsx(Wte,{...i,ref:e}):s.jsx(Hte,{...i,ref:e})})});yM.displayName=Jc;var Wte=p.forwardRef((t,e)=>{const n=xo(Jc,t.__scopePopover),r=p.useRef(null),i=We(e,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return _v(o)},[]),s.jsx(of,{as:Wi,allowPinchZoom:!0,children:s.jsx(wM,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:le(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Hte=p.forwardRef((t,e)=>{const n=xo(Jc,t.__scopePopover),r=p.useRef(!1),i=p.useRef(!1);return s.jsx(wM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),wM=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,m=xo(Jc,n),v=pf(n);return pv(),s.jsx(rf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(nf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Qb,{"data-state":jM(m.open),role:"dialog",id:m.contentId,...v,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bM="PopoverClose",Gte=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xo(bM,n);return s.jsx(_e.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>i.onOpenChange(!1))})});Gte.displayName=bM;var Kte="PopoverArrow",Yte=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=pf(n);return s.jsx(Xb,{...i,...r,ref:e})});Yte.displayName=Kte;function jM(t){return t?"open":"closed"}var Qte=mM,Xte=vM,Zte=xM,_M=yM;const Jte=Qte,ene=Xte,NM=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx(Zte,{children:s.jsx(_M,{ref:i,align:e,sideOffset:n,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));NM.displayName=_M.displayName;const $l=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Mv=wu((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:wn(),updatedAt:wn()},a=await Qa(vt(Ne,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),ee.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),ee.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:wn()};i&&(a.notes=i),await ar(lt(Ne,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};ee.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),ee.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=qt(vt(Ne,"paymentRequests"),hn("buyerId","==",n),es(50)),i=qt(vt(Ne,"paymentRequests"),hn("sellerId","==",n),es(50)),[a,o]=await Promise.all([fn(r),fn(i)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:$l(u.createdAt),updatedAt:$l(u.updatedAt),meetingDateTime:u.meetingDateTime?$l(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:$l(u.createdAt),updatedAt:$l(u.updatedAt),meetingDateTime:u.meetingDateTime?$l(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),ee.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const i=[];switch(n){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&i.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var EM="https://js.stripe.com/v3",tne=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,kS="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",nne=function(){for(var e=document.querySelectorAll('script[src^="'.concat(EM,'"]')),n=0;n<e.length;n++){var r=e[n];if(tne.test(r.src))return r}return null},IS=function(e){var n="",r=document.createElement("script");r.src="".concat(EM).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},rne=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},Zu=null,mm=null,pm=null,sne=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},ine=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},ane=function(e){return Zu!==null?Zu:(Zu=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(kS),window.Stripe){n(window.Stripe);return}try{var i=nne();if(i&&e)console.warn(kS);else if(!i)i=IS(e);else if(i&&pm!==null&&mm!==null){var a;i.removeEventListener("load",pm),i.removeEventListener("error",mm),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=IS(e)}pm=ine(n,r),mm=sne(r),i.addEventListener("load",pm),i.addEventListener("error",mm)}catch(o){r(o);return}}),Zu.catch(function(n){return Zu=null,Promise.reject(n)}))},one=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return rne(i,r),i},Ju,SM=!1,CM=function(){return Ju||(Ju=ane(null).catch(function(e){return Ju=null,Promise.reject(e)}),Ju)};Promise.resolve().then(function(){return CM()}).catch(function(t){SM||console.warn(t)});var TM=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];SM=!0;var i=Date.now();return CM().then(function(a){return one(a,n,i)})},kM={exports:{}},lne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cne=lne,une=cne;function IM(){}function PM(){}PM.resetWarningCache=IM;var dne=function(){function t(r,i,a,o,l,c){if(c!==une){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:PM,resetWarningCache:IM};return n.PropTypes=n,n};kM.exports=dne();var hne=kM.exports;const $t=bg(hne);function PS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PS(Object(n),!0).forEach(function(r){AM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Km(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Km=function(e){return typeof e}:Km=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Km(t)}function AM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RM(t,e){return fne(t)||mne(t,e)||pne(t,e)||gne()}function fne(t){if(Array.isArray(t))return t}function mne(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function pne(t,e){if(t){if(typeof t=="string")return RS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RS(t,e)}}function RS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ir=function(e,n,r){var i=!!r,a=xe.useRef(r);xe.useEffect(function(){a.current=r},[r]),xe.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},fw=function(e){var n=xe.useRef(e);return xe.useEffect(function(){n.current=e},[e]),n.current},eu=function(e){return e!==null&&Km(e)==="object"},vne=function(e){return eu(e)&&typeof e.then=="function"},xne=function(e){return eu(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},DS="[object Object]",yne=function t(e,n){if(!eu(e)||!eu(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===DS,o=Object.prototype.toString.call(n)===DS;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var f=0;f<c.length;f+=1)u[c[f]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var v=e,x=n,w=function(y){return t(v[y],x[y])};return m.every(w)},DM=function(e,n,r){return eu(e)?Object.keys(e).reduce(function(i,a){var o=!eu(n)||!yne(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?AS(AS({},i||{}),{},AM({},a,e[a])):i},null):null},MM="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",MS=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MM;if(e===null||xne(e))return e;throw new Error(n)},wne=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MM;if(vne(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return MS(i,n)})};var r=MS(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},bne=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Ov=xe.createContext(null);Ov.displayName="ElementsContext";var OM=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},LM=function(e){var n=e.stripe,r=e.options,i=e.children,a=xe.useMemo(function(){return wne(n)},[n]),o=xe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=RM(o,2),c=l[0],u=l[1];xe.useEffect(function(){var m=!0,v=function(w){u(function(j){return j.stripe?j:{stripe:w,elements:w.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(x){x&&m&&v(x)}):a.tag==="sync"&&!c.stripe&&v(a.stripe),function(){m=!1}},[a,c,r]);var d=fw(n);xe.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var f=fw(r);return xe.useEffect(function(){if(c.elements){var m=DM(r,f,["clientSecret","fonts"]);m&&c.elements.update(m)}},[r,f,c.elements]),xe.useEffect(function(){bne(c.stripe)},[c.stripe]),xe.createElement(Ov.Provider,{value:c},i)};LM.propTypes={stripe:$t.any,options:$t.object};var jne=function(e){var n=xe.useContext(Ov);return OM(n,e)},_ne=function(){var e=jne("calls useElements()"),n=e.elements;return n};$t.func.isRequired;var VM=xe.createContext(null);VM.displayName="CustomCheckoutSdkContext";var Nne=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},Ene=xe.createContext(null);Ene.displayName="CustomCheckoutContext";$t.any,$t.shape({clientSecret:$t.string.isRequired,elementsOptions:$t.object}).isRequired;var mw=function(e){var n=xe.useContext(VM),r=xe.useContext(Ov);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Nne(n,e):OM(r,e)},Sne=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},gn=function(e,n){var r="".concat(Sne(e),"Element"),i=function(c){var u=c.id,d=c.className,f=c.options,m=f===void 0?{}:f,v=c.onBlur,x=c.onFocus,w=c.onReady,j=c.onChange,y=c.onEscape,g=c.onClick,b=c.onLoadError,E=c.onLoaderStart,S=c.onNetworksChange,M=c.onConfirm,k=c.onCancel,I=c.onShippingAddressChange,A=c.onShippingRateChange,N=mw("mounts <".concat(r,">")),P="elements"in N?N.elements:null,R="customCheckoutSdk"in N?N.customCheckoutSdk:null,T=xe.useState(null),F=RM(T,2),W=F[0],Y=F[1],L=xe.useRef(null),O=xe.useRef(null);Ir(W,"blur",v),Ir(W,"focus",x),Ir(W,"escape",y),Ir(W,"click",g),Ir(W,"loaderror",b),Ir(W,"loaderstart",E),Ir(W,"networkschange",S),Ir(W,"confirm",M),Ir(W,"cancel",k),Ir(W,"shippingaddresschange",I),Ir(W,"shippingratechange",A),Ir(W,"change",j);var B;w&&(e==="expressCheckout"?B=w:B=function(){w(W)}),Ir(W,"ready",B),xe.useLayoutEffect(function(){if(L.current===null&&O.current!==null&&(P||R)){var Q=null;R?Q=R.createElement(e,m):P&&(Q=P.create(e,m)),L.current=Q,Y(Q),Q&&Q.mount(O.current)}},[P,R,m]);var U=fw(m);return xe.useEffect(function(){if(L.current){var Q=DM(m,U,["paymentRequest"]);Q&&"update"in L.current&&L.current.update(Q)}},[m,U]),xe.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),xe.createElement("div",{id:u,className:d,ref:O})},a=function(c){mw("mounts <".concat(r,">"));var u=c.id,d=c.className;return xe.createElement("div",{id:u,className:d})},o=n?a:i;return o.propTypes={id:$t.string,className:$t.string,onChange:$t.func,onBlur:$t.func,onFocus:$t.func,onReady:$t.func,onEscape:$t.func,onClick:$t.func,onLoadError:$t.func,onLoaderStart:$t.func,onNetworksChange:$t.func,onConfirm:$t.func,onCancel:$t.func,onShippingAddressChange:$t.func,onShippingRateChange:$t.func,options:$t.object},o.displayName=r,o.__elementType=e,o},vn=typeof window>"u",Cne=xe.createContext(null);Cne.displayName="EmbeddedCheckoutProviderContext";var Tne=function(){var e=mw("calls useStripe()"),n=e.stripe;return n};gn("auBankAccount",vn);gn("card",vn);gn("cardNumber",vn);gn("cardExpiry",vn);gn("cardCvc",vn);gn("fpxBank",vn);gn("iban",vn);gn("idealBank",vn);gn("p24Bank",vn);gn("epsBank",vn);gn("payment",vn);gn("expressCheckout",vn);gn("currencySelector",vn);gn("paymentRequestButton",vn);gn("linkAuthentication",vn);gn("address",vn);gn("shippingAddress",vn);gn("paymentMethodMessaging",vn);gn("affirmMessage",vn);gn("afterpayClearpayMessage",vn);const kne=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Tne(),_ne();const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(f=>setTimeout(f,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);ee.success("Paiement réussi !"),n(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),r(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(tt,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(G,{children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(ft,{className:"border-red-200 bg-red-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-red-600"}),s.jsx(mt,{className:"text-red-800",children:o})]}),s.jsxs(ft,{className:"border-blue-200 bg-blue-50",children:[s.jsx(ul,{className:"h-4 w-4 text-blue-600"}),s.jsx(mt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx($,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ul,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},OS=TM("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),Ine=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return OS?s.jsx(LM,{stripe:OS,options:i,children:s.jsx(kne,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs(ft,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(mt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},FM=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=Mv(),[o,l]=p.useState({}),[c,u]=p.useState({}),[d,f]=p.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:an,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],v=S=>{switch(S){case"card":return an;case"cash":return yA;case"transfer":return Yq;case"paypal":return an;case"lydia":return El;default:return an}},x=S=>{switch(S){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=(S,M)=>{var I,A;const k={};switch(S){case"card":return!0;case"transfer":(I=M.bankDetails)!=null&&I.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(M.bankDetails.iban.replace(/\s/g,""))||(k.iban="Format IBAN invalide"):k.iban="IBAN requis",(A=M.bankDetails)!=null&&A.accountName||(k.accountName="Nom du titulaire requis");break;case"paypal":M.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.paypalEmail)||(k.paypalEmail="Format email invalide"):k.paypalEmail="Email PayPal requis";break;case"lydia":M.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(M.lydiaPhone.replace(/\s/g,""))||(k.lydiaPhone="Format de téléphone invalide"):k.lydiaPhone="Numéro de téléphone requis";break}return u(k),Object.keys(k).length===0},j=S=>{if(S==="card"){n(S,{});return}const M=o[S]||{};(S==="cash"||w(S,M))&&n(S,M)},y=(S,M,k)=>{l(I=>({...I,[S]:{...I[S],[M]:k}}))},g=(S,M)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:M||"EUR"}).format(S),b=S=>{f(S),n("card",{stripePaymentId:S})},E=S=>{console.error("Stripe payment error:",S)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:g(t,e)})]})]}),r==="card"?s.jsx(Ine,{amount:t,currency:e,onPaymentSuccess:b,onPaymentError:E}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(S=>{var N,P,R,T,F,W,Y,L;const M=v(S.type),k=S.type==="card"?t*S.fees/100:a(t,S.type),I=t+k,A=r===S.type;return s.jsxs(H,{className:`cursor-pointer transition-all hover:shadow-md ${A?"ring-2 ring-primary bg-primary/5":""} ${S.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>S.available&&j(S.type),children:[s.jsx(je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(M,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Ee,{className:"text-lg",children:S.name}),s.jsx(tt,{className:"text-sm",children:S.description})]})]}),A&&s.jsx(Je,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(G,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:S.processingTime})]}),s.jsxs(Ae,{className:x(S.securityLevel),children:[s.jsx(pt,{className:"w-3 h-3 mr-1"}),S.securityLevel==="high"?"Très sécurisé":S.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),k>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:g(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",S.fees,"%) :"]}),s.jsx("span",{children:g(k,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:g(I,e)})]})]}),A&&S.type!=="cash"&&S.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[S.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`iban-${S.id}`,children:"IBAN *"}),s.jsx(ke,{id:`iban-${S.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((P=(N=o[S.type])==null?void 0:N.bankDetails)==null?void 0:P.iban)||"",onChange:O=>{var B;return y(S.type,"bankDetails",{...(B=o[S.type])==null?void 0:B.bankDetails,iban:O.target.value})},className:c.iban?"border-red-500":""}),c.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`account-name-${S.id}`,children:"Nom du titulaire *"}),s.jsx(ke,{id:`account-name-${S.id}`,placeholder:"Jean Dupont",value:((T=(R=o[S.type])==null?void 0:R.bankDetails)==null?void 0:T.accountName)||"",onChange:O=>{var B;return y(S.type,"bankDetails",{...(B=o[S.type])==null?void 0:B.bankDetails,accountName:O.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`bic-${S.id}`,children:"BIC (optionnel)"}),s.jsx(ke,{id:`bic-${S.id}`,placeholder:"BNPAFRPP",value:((W=(F=o[S.type])==null?void 0:F.bankDetails)==null?void 0:W.bic)||"",onChange:O=>{var B;return y(S.type,"bankDetails",{...(B=o[S.type])==null?void 0:B.bankDetails,bic:O.target.value})}})]})]}),S.type==="paypal"&&s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`paypal-email-${S.id}`,children:"Email PayPal *"}),s.jsx(ke,{id:`paypal-email-${S.id}`,type:"email",placeholder:"votre.email@example.com",value:((Y=o[S.type])==null?void 0:Y.paypalEmail)||"",onChange:O=>y(S.type,"paypalEmail",O.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),S.type==="lydia"&&s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`lydia-phone-${S.id}`,children:"Numéro de téléphone *"}),s.jsx(ke,{id:`lydia-phone-${S.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((L=o[S.type])==null?void 0:L.lydiaPhone)||"",onChange:O=>y(S.type,"lydiaPhone",O.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),A&&S.type!=="card"&&s.jsxs(ft,{className:"mt-3",children:[s.jsx(Xa,{className:"h-4 w-4"}),s.jsxs(mt,{children:[S.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",S.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",S.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",S.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},S.id)})}),s.jsxs(ft,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(mt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})},Pne=({open:t,onOpenChange:e,listing:n})=>{var E;const{currentUser:r,userProfile:i}=Yt(),{createPaymentRequest:a,loading:o}=Mv(),[l,c]=p.useState("method"),[u,d]=p.useState(null),[f,m]=p.useState({}),[v,x]=p.useState({location:"",date:void 0,time:"",notes:""}),w=(S,M)=>{d(S),m(M),c("details")},j=async()=>{if(!(!r||!u))try{const S=v.date&&v.time?new Date(`${_n(v.date,"yyyy-MM-dd")} ${v.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:u,meetingLocation:v.location,meetingDateTime:S,paymentDetails:f,notes:v.notes}),e(!1),y()}catch(S){console.error("Erreur lors de la création de la demande:",S)}},y=()=>{c("method"),d(null),m({}),x({location:"",date:void 0,time:"",notes:""})},g=(S,M)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:M||"EUR"}).format(S),b=S=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[S]||S;return s.jsx(Ri,{open:t,onOpenChange:e,children:s.jsxs(Js,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Di,{children:[s.jsxs(ei,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(Sc,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((E=n.images)==null?void 0:E[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:g(n.price,n.currency||"EUR")})]})]})}),l==="method"&&s.jsx(FM,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:w,selectedMethod:u}),l==="details"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Je,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",b(u)]})]}),u==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(ir,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsx(ke,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:v.location,onChange:S=>x(M=>({...M,location:S.target.value})),className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{children:"Date de rencontre"}),s.jsxs(Jte,{children:[s.jsx(ene,{asChild:!0,children:s.jsxs($,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(gs,{className:"mr-2 h-4 w-4"}),v.date?_n(v.date,"PPP",{locale:Kn}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(NM,{className:"w-auto p-0",children:s.jsx(hM,{mode:"single",selected:v.date,onSelect:S=>x(M=>({...M,date:S})),disabled:S=>S<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(ke,{id:"meeting-time",type:"time",value:v.time,onChange:S=>x(M=>({...M,time:S.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(js,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:v.notes,onChange:S=>x(M=>({...M,notes:S.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(ft,{className:"border-blue-200 bg-blue-50",children:[s.jsx(pt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(mt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx($,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),s.jsx($,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!v.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:b(u)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:g(n.price,n.currency||"EUR")})]}),u==="cash"&&v.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:v.location})]}),v.date&&v.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[_n(v.date,"PPP",{locale:Kn})," à ",v.time]})]})]})]}),v.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:v.notes})]})]}),s.jsxs(ft,{children:[s.jsx(Xa,{className:"h-4 w-4"}),s.jsx(mt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx($,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),s.jsx($,{onClick:j,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},Ane=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=Yt(),{createConversation:i,setCurrentConversation:a,conversations:o}=Tv(),l=Vn(),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,v]=p.useState(""),[x,w]=p.useState(""),[j,y]=p.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const g=o.find(k=>k.listingId===t.id&&k.participants.includes((n==null?void 0:n.uid)||"")&&k.participants.includes(t.sellerId)),b=()=>{if(!n){l("/auth");return}if(g){a(g),l("/messages");return}const k=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;v(k),w((r==null?void 0:r.email)||""),u(!0)},E=()=>{if(!n){l("/auth");return}f(!0)},S=async()=>{var k;if(!m.trim()||!x.trim()||!n||!r){ee.error("Veuillez remplir tous les champs");return}y(!0);try{const I=await i(t.id,t.title,t.price,(k=t.images)==null?void 0:k[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),ee.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs($,{size:"sm",variant:"ghost",onClick:()=>{ee.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(ah,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(I){console.error("Erreur lors de l'envoi du message:",I),ee.error("Erreur lors de l'envoi du message")}finally{y(!1)}},M=(k,I)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const A=I||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:A}).format(k)}catch{return`${k} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{onClick:b,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),g?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs($,{onClick:E,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(Ri,{open:c,onOpenChange:u,children:s.jsxs(Js,{className:"max-w-md",children:[s.jsx(Di,{children:s.jsxs(ei,{className:"flex items-center gap-2",children:[s.jsx(Wt,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(Ki,{className:"w-8 h-8",children:[s.jsx(Yi,{src:t.sellerAvatar||void 0}),s.jsx(Qi,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:M(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(ke,{id:"contact-email",type:"email",value:x,onChange:k=>w(k.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(js,{id:"contact-message",value:m,onChange:k=>v(k.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Xa,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),s.jsx($,{onClick:S,disabled:j||!m.trim()||!x.trim(),className:"flex-1",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(Pne,{open:d,onOpenChange:f,listing:t})]})},Rne=()=>{var g;const{id:t}=_1(),e=Vn(),{currentUser:n}=Yt(),{currentListing:r,loading:i,fetchListingById:a}=uf(),{fetchUserFavorites:o}=R4(),[l,c]=p.useState(0);if(p.useEffect(()=>{t&&a(t)},[t,a]),p.useEffect(()=>{n&&o(n.uid)},[n,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Jt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx($,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=r,d=(n==null?void 0:n.uid)===u.sellerId,f=(b,E)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"Échange";const S=E||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:S}).format(b)}catch{return`${b} €`}},m=b=>{switch(b){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return b}},v=b=>{switch(b){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=()=>{switch(u.transactionType){case"donation":return s.jsx(Hc,{className:"w-4 h-4"});case"exchange":return s.jsx(qi,{className:"w-4 h-4"});case"service":return s.jsx(pu,{className:"w-4 h-4"});default:return s.jsx(Bp,{className:"w-4 h-4"})}},w=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},j=()=>{u.images&&u.images.length>1&&c(b=>b===u.images.length-1?0:b+1)},y=()=>{u.images&&u.images.length>1&&c(b=>b===0?u.images.length-1:b-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(fe,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(fe,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:u.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs($,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(qo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:y,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(Zq,{className:"w-6 h-6"})}),s.jsx("div",{onClick:j,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Bs,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),s.jsxs(Ri,{children:[s.jsx(Ec,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(Wo,{className:"w-5 h-5"})})}),s.jsxs(Js,{className:"max-w-4xl",children:[s.jsx(ei,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Wo,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((b,E)=>s.jsx("button",{onClick:()=>c(E),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${E===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:b,alt:`${u.title} ${E+1}`,className:"w-full h-full object-cover"})},E))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(H,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ae,{className:"bg-primary/10 text-primary border-primary/20",children:[x(),s.jsx("span",{className:"ml-1",children:w()})]}),u.sellerVerified&&s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(pt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[f(u.price,u.currency),u.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(qi,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(Jh,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min,"€ - ",u.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:d?s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{to:`/edit-listing/${u.id}`,children:s.jsxs($,{variant:"outline",className:"w-full",children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ane,{listing:u,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(D4,{listing:u,size:"lg",showText:!1}),s.jsx(M4,{listing:u,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(Vo,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsx(Ee,{className:"text-lg",children:"Vendeur"})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Ki,{className:"w-12 h-12",children:[s.jsx(Yi,{src:u.sellerAvatar||void 0}),s.jsx(Qi,{children:(g=u.sellerName[0])==null?void 0:g.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&s.jsx(pt,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(bs,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(G,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Wc,{className:"w-4 h-4"}),s.jsxs("span",{children:[u.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-4 h-4"}),s.jsx("span",{children:_u(u.createdAt,{addSuffix:!0,locale:Kn})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),s.jsx("span",{children:u.location.city})]})]})]}),s.jsx(Ae,{className:v(u.condition),children:m(u.condition)})]})}),s.jsx(G,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsx(Ee,{className:"text-lg",children:"Tags"})}),s.jsx(G,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((b,E)=>s.jsx(Ae,{variant:"secondary",children:b},E))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(ir,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(G,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:u.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(pt,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Xa,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var gf=t=>t.type==="checkbox",oc=t=>t instanceof Date,rr=t=>t==null;const UM=t=>typeof t=="object";var pn=t=>!rr(t)&&!Array.isArray(t)&&UM(t)&&!oc(t),Dne=t=>pn(t)&&t.target?gf(t.target)?t.target.checked:t.target.value:t,Mne=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,One=(t,e)=>t.has(Mne(e)),Lne=t=>{const e=t.constructor&&t.constructor.prototype;return pn(e)&&e.hasOwnProperty("isPrototypeOf")},Cj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Cj&&(t instanceof Blob||t instanceof FileList))&&(n||pn(t)))if(e=n?[]:{},!n&&!Lne(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Gr(t[r]));else return t;return e}var Lv=t=>Array.isArray(t)?t.filter(Boolean):[],nn=t=>t===void 0,ye=(t,e,n)=>{if(!e||!pn(t))return n;const r=Lv(e.split(/[,[\].]+?/)).reduce((i,a)=>rr(i)?i:i[a],t);return nn(r)||r===t?nn(t[e])?n:t[e]:r},Os=t=>typeof t=="boolean",Tj=t=>/^\w*$/.test(t),$M=t=>Lv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Nt=(t,e,n)=>{let r=-1;const i=Tj(e)?[e]:$M(e),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=n;if(r!==o){const u=t[l];c=pn(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const LS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ps={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};xe.createContext(null);var Vne=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==ps.all&&(e._proxyFormState[o]=!r||ps.all),t[o]}});return i},vr=t=>pn(t)&&!Object.keys(t).length,Fne=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return vr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===ps.all)},Ym=t=>Array.isArray(t)?t:[t];function Une(t){const e=xe.useRef(t);e.current=t,xe.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Ws=t=>typeof t=="string",$ne=(t,e,n,r,i)=>Ws(t)?(r&&e.watch.add(t),ye(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),ye(n,a))):(r&&(e.watchAll=!0),n),zM=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},VS=t=>({isOnSubmit:!t||t===ps.onSubmit,isOnBlur:t===ps.onBlur,isOnChange:t===ps.onChange,isOnAll:t===ps.all,isOnTouch:t===ps.onTouched}),FS=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Id=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=ye(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Id(l,e))break}else if(pn(l)&&Id(l,e))break}}};var zne=(t,e,n)=>{const r=Ym(ye(t,n));return Nt(r,"root",e[n]),Nt(t,n,r),t},kj=t=>t.type==="file",Ti=t=>typeof t=="function",sg=t=>{if(!Cj)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Qm=t=>Ws(t),Ij=t=>t.type==="radio",ig=t=>t instanceof RegExp;const US={value:!1,isValid:!1},$S={value:!0,isValid:!0};var BM=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!nn(t[0].attributes.value)?nn(t[0].value)||t[0].value===""?$S:{value:t[0].value,isValid:!0}:$S:US}return US};const zS={isValid:!1,value:null};var qM=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,zS):zS;function BS(t,e,n="validate"){if(Qm(t)||Array.isArray(t)&&t.every(Qm)||Os(t)&&!t)return{type:n,message:Qm(t)?t:"",ref:e}}var zl=t=>pn(t)&&!ig(t)?t:{value:t,message:""},qS=async(t,e,n,r,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:m,validate:v,name:x,valueAsNumber:w,mount:j,disabled:y}=t._f,g=ye(e,x);if(!j||y)return{};const b=o?o[0]:a,E=R=>{r&&b.reportValidity&&(b.setCustomValidity(Os(R)?"":R||""),b.reportValidity())},S={},M=Ij(a),k=gf(a),I=M||k,A=(w||kj(a))&&nn(a.value)&&nn(g)||sg(a)&&a.value===""||g===""||Array.isArray(g)&&!g.length,N=zM.bind(null,x,n,S),P=(R,T,F,W=xi.maxLength,Y=xi.minLength)=>{const L=R?T:F;S[x]={type:R?W:Y,message:L,ref:a,...N(R?W:Y,L)}};if(i?!Array.isArray(g)||!g.length:l&&(!I&&(A||rr(g))||Os(g)&&!g||k&&!BM(o).isValid||M&&!qM(o).isValid)){const{value:R,message:T}=Qm(l)?{value:!!l,message:l}:zl(l);if(R&&(S[x]={type:xi.required,message:T,ref:b,...N(xi.required,T)},!n))return E(T),S}if(!A&&(!rr(d)||!rr(f))){let R,T;const F=zl(f),W=zl(d);if(!rr(g)&&!isNaN(g)){const Y=a.valueAsNumber||g&&+g;rr(F.value)||(R=Y>F.value),rr(W.value)||(T=Y<W.value)}else{const Y=a.valueAsDate||new Date(g),L=U=>new Date(new Date().toDateString()+" "+U),O=a.type=="time",B=a.type=="week";Ws(F.value)&&g&&(R=O?L(g)>L(F.value):B?g>F.value:Y>new Date(F.value)),Ws(W.value)&&g&&(T=O?L(g)<L(W.value):B?g<W.value:Y<new Date(W.value))}if((R||T)&&(P(!!R,F.message,W.message,xi.max,xi.min),!n))return E(S[x].message),S}if((c||u)&&!A&&(Ws(g)||i&&Array.isArray(g))){const R=zl(c),T=zl(u),F=!rr(R.value)&&g.length>+R.value,W=!rr(T.value)&&g.length<+T.value;if((F||W)&&(P(F,R.message,T.message),!n))return E(S[x].message),S}if(m&&!A&&Ws(g)){const{value:R,message:T}=zl(m);if(ig(R)&&!g.match(R)&&(S[x]={type:xi.pattern,message:T,ref:a,...N(xi.pattern,T)},!n))return E(T),S}if(v){if(Ti(v)){const R=await v(g,e),T=BS(R,b);if(T&&(S[x]={...T,...N(xi.validate,T.message)},!n))return E(T.message),S}else if(pn(v)){let R={};for(const T in v){if(!vr(R)&&!n)break;const F=BS(await v[T](g,e),b,T);F&&(R={...F,...N(T,F.message)},E(F.message),n&&(S[x]=R))}if(!vr(R)&&(S[x]={ref:b,...R},!n))return S}}return E(!0),S};function Bne(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=nn(t)?r++:t[e[r++]];return t}function qne(t){for(const e in t)if(t.hasOwnProperty(e)&&!nn(t[e]))return!1;return!0}function xn(t,e){const n=Array.isArray(e)?e:Tj(e)?[e]:$M(e),r=n.length===1?t:Bne(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(pn(r)&&vr(r)||Array.isArray(r)&&qne(r))&&xn(t,n.slice(0,-1)),t}var py=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},ag=t=>rr(t)||!UM(t);function _a(t,e){if(ag(t)||ag(e))return t===e;if(oc(t)&&oc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(oc(a)&&oc(o)||pn(a)&&pn(o)||Array.isArray(a)&&Array.isArray(o)?!_a(a,o):a!==o)return!1}}return!0}var WM=t=>t.type==="select-multiple",Wne=t=>Ij(t)||gf(t),gy=t=>sg(t)&&t.isConnected,HM=t=>{for(const e in t)if(Ti(t[e]))return!0;return!1};function og(t,e={}){const n=Array.isArray(t);if(pn(t)||n)for(const r in t)Array.isArray(t[r])||pn(t[r])&&!HM(t[r])?(e[r]=Array.isArray(t[r])?[]:{},og(t[r],e[r])):rr(t[r])||(e[r]=!0);return e}function GM(t,e,n){const r=Array.isArray(t);if(pn(t)||r)for(const i in t)Array.isArray(t[i])||pn(t[i])&&!HM(t[i])?nn(e)||ag(n[i])?n[i]=Array.isArray(t[i])?og(t[i],[]):{...og(t[i])}:GM(t[i],rr(e)?{}:e[i],n[i]):n[i]=!_a(t[i],e[i]);return n}var gm=(t,e)=>GM(t,e,og(e)),KM=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>nn(t)?t:e?t===""?NaN:t&&+t:n&&Ws(t)?new Date(t):r?r(t):t;function vy(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return kj(e)?e.files:Ij(e)?qM(t.refs).value:WM(e)?[...e.selectedOptions].map(({value:n})=>n):gf(e)?BM(t.refs).value:KM(nn(e.value)?t.ref.value:e.value,t)}var Hne=(t,e,n,r)=>{const i={};for(const a of t){const o=ye(e,a);o&&Nt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},ed=t=>nn(t)?t:ig(t)?t.source:pn(t)?ig(t.value)?t.value.source:t.value:t;const WS="AsyncFunction";var Gne=t=>(!t||!t.validate)&&!!(Ti(t.validate)&&t.validate.constructor.name===WS||pn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===WS)),Kne=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function HS(t,e,n){const r=ye(t,n);if(r||Tj(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=ye(e,a),l=ye(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var Yne=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Qne=(t,e)=>!Lv(ye(t,e)).length&&xn(t,e);const Xne={mode:ps.onSubmit,reValidateMode:ps.onChange,shouldFocusError:!0};function Zne(t={}){let e={...Xne,...t},n={submitCount:0,isDirty:!1,isLoading:Ti(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=pn(e.defaultValues)||pn(e.values)?Gr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Gr(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:py(),array:py(),state:py()},m=VS(e.mode),v=VS(e.reValidateMode),x=e.criteriaMode===ps.all,w=V=>q=>{clearTimeout(u),u=setTimeout(V,q)},j=async V=>{if(d.isValid||V){const q=e.resolver?vr((await I()).errors):await N(r,!0);q!==n.isValid&&f.state.next({isValid:q})}},y=(V,q)=>{(d.isValidating||d.validatingFields)&&((V||Array.from(l.mount)).forEach(Z=>{Z&&(q?Nt(n.validatingFields,Z,q):xn(n.validatingFields,Z))}),f.state.next({validatingFields:n.validatingFields,isValidating:!vr(n.validatingFields)}))},g=(V,q=[],Z,me,ue=!0,ae=!0)=>{if(me&&Z){if(o.action=!0,ae&&Array.isArray(ye(r,V))){const Ie=Z(ye(r,V),me.argA,me.argB);ue&&Nt(r,V,Ie)}if(ae&&Array.isArray(ye(n.errors,V))){const Ie=Z(ye(n.errors,V),me.argA,me.argB);ue&&Nt(n.errors,V,Ie),Qne(n.errors,V)}if(d.touchedFields&&ae&&Array.isArray(ye(n.touchedFields,V))){const Ie=Z(ye(n.touchedFields,V),me.argA,me.argB);ue&&Nt(n.touchedFields,V,Ie)}d.dirtyFields&&(n.dirtyFields=gm(i,a)),f.state.next({name:V,isDirty:R(V,q),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Nt(a,V,q)},b=(V,q)=>{Nt(n.errors,V,q),f.state.next({errors:n.errors})},E=V=>{n.errors=V,f.state.next({errors:n.errors,isValid:!1})},S=(V,q,Z,me)=>{const ue=ye(r,V);if(ue){const ae=ye(a,V,nn(Z)?ye(i,V):Z);nn(ae)||me&&me.defaultChecked||q?Nt(a,V,q?ae:vy(ue._f)):W(V,ae),o.mount&&j()}},M=(V,q,Z,me,ue)=>{let ae=!1,Ie=!1;const ot={name:V},nt=!!(ye(r,V)&&ye(r,V)._f&&ye(r,V)._f.disabled);if(!Z||me){d.isDirty&&(Ie=n.isDirty,n.isDirty=ot.isDirty=R(),ae=Ie!==ot.isDirty);const st=nt||_a(ye(i,V),q);Ie=!!(!nt&&ye(n.dirtyFields,V)),st||nt?xn(n.dirtyFields,V):Nt(n.dirtyFields,V,!0),ot.dirtyFields=n.dirtyFields,ae=ae||d.dirtyFields&&Ie!==!st}if(Z){const st=ye(n.touchedFields,V);st||(Nt(n.touchedFields,V,Z),ot.touchedFields=n.touchedFields,ae=ae||d.touchedFields&&st!==Z)}return ae&&ue&&f.state.next(ot),ae?ot:{}},k=(V,q,Z,me)=>{const ue=ye(n.errors,V),ae=d.isValid&&Os(q)&&n.isValid!==q;if(t.delayError&&Z?(c=w(()=>b(V,Z)),c(t.delayError)):(clearTimeout(u),c=null,Z?Nt(n.errors,V,Z):xn(n.errors,V)),(Z?!_a(ue,Z):ue)||!vr(me)||ae){const Ie={...me,...ae&&Os(q)?{isValid:q}:{},errors:n.errors,name:V};n={...n,...Ie},f.state.next(Ie)}},I=async V=>{y(V,!0);const q=await e.resolver(a,e.context,Hne(V||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(V),q},A=async V=>{const{errors:q}=await I(V);if(V)for(const Z of V){const me=ye(q,Z);me?Nt(n.errors,Z,me):xn(n.errors,Z)}else n.errors=q;return q},N=async(V,q,Z={valid:!0})=>{for(const me in V){const ue=V[me];if(ue){const{_f:ae,...Ie}=ue;if(ae){const ot=l.array.has(ae.name),nt=ue._f&&Gne(ue._f);nt&&d.validatingFields&&y([me],!0);const st=await qS(ue,a,x,e.shouldUseNativeValidation&&!q,ot);if(nt&&d.validatingFields&&y([me]),st[ae.name]&&(Z.valid=!1,q))break;!q&&(ye(st,ae.name)?ot?zne(n.errors,st,ae.name):Nt(n.errors,ae.name,st[ae.name]):xn(n.errors,ae.name))}!vr(Ie)&&await N(Ie,q,Z)}}return Z.valid},P=()=>{for(const V of l.unMount){const q=ye(r,V);q&&(q._f.refs?q._f.refs.every(Z=>!gy(Z)):!gy(q._f.ref))&&ut(V)}l.unMount=new Set},R=(V,q)=>(V&&q&&Nt(a,V,q),!_a(Q(),i)),T=(V,q,Z)=>$ne(V,l,{...o.mount?a:nn(q)?i:Ws(V)?{[V]:q}:q},Z,q),F=V=>Lv(ye(o.mount?a:i,V,t.shouldUnregister?ye(i,V,[]):[])),W=(V,q,Z={})=>{const me=ye(r,V);let ue=q;if(me){const ae=me._f;ae&&(!ae.disabled&&Nt(a,V,KM(q,ae)),ue=sg(ae.ref)&&rr(q)?"":q,WM(ae.ref)?[...ae.ref.options].forEach(Ie=>Ie.selected=ue.includes(Ie.value)):ae.refs?gf(ae.ref)?ae.refs.length>1?ae.refs.forEach(Ie=>(!Ie.defaultChecked||!Ie.disabled)&&(Ie.checked=Array.isArray(ue)?!!ue.find(ot=>ot===Ie.value):ue===Ie.value)):ae.refs[0]&&(ae.refs[0].checked=!!ue):ae.refs.forEach(Ie=>Ie.checked=Ie.value===ue):kj(ae.ref)?ae.ref.value="":(ae.ref.value=ue,ae.ref.type||f.values.next({name:V,values:{...a}})))}(Z.shouldDirty||Z.shouldTouch)&&M(V,ue,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&U(V)},Y=(V,q,Z)=>{for(const me in q){const ue=q[me],ae=`${V}.${me}`,Ie=ye(r,ae);(l.array.has(V)||!ag(ue)||Ie&&!Ie._f)&&!oc(ue)?Y(ae,ue,Z):W(ae,ue,Z)}},L=(V,q,Z={})=>{const me=ye(r,V),ue=l.array.has(V),ae=Gr(q);Nt(a,V,ae),ue?(f.array.next({name:V,values:{...a}}),(d.isDirty||d.dirtyFields)&&Z.shouldDirty&&f.state.next({name:V,dirtyFields:gm(i,a),isDirty:R(V,ae)})):me&&!me._f&&!rr(ae)?Y(V,ae,Z):W(V,ae,Z),FS(V,l)&&f.state.next({...n}),f.values.next({name:o.mount?V:void 0,values:{...a}})},O=async V=>{o.mount=!0;const q=V.target;let Z=q.name,me=!0;const ue=ye(r,Z),ae=()=>q.type?vy(ue._f):Dne(V),Ie=ot=>{me=Number.isNaN(ot)||_a(ot,ye(a,Z,ot))};if(ue){let ot,nt;const st=ae(),Hr=V.type===LS.BLUR||V.type===LS.FOCUS_OUT,yf=!Kne(ue._f)&&!e.resolver&&!ye(n.errors,Z)&&!ue._f.deps||Yne(Hr,ye(n.touchedFields,Z),n.isSubmitted,v,m),Il=FS(Z,l,Hr);Nt(a,Z,st),Hr?(ue._f.onBlur&&ue._f.onBlur(V),c&&c(0)):ue._f.onChange&&ue._f.onChange(V);const Su=M(Z,st,Hr,!1),wo=!vr(Su)||Il;if(!Hr&&f.values.next({name:Z,type:V.type,values:{...a}}),yf)return d.isValid&&(t.mode==="onBlur"?Hr&&j():j()),wo&&f.state.next({name:Z,...Il?{}:Su});if(!Hr&&Il&&f.state.next({...n}),e.resolver){const{errors:Cu}=await I([Z]);if(Ie(st),me){const wf=HS(n.errors,r,Z),Pl=HS(Cu,r,wf.name||Z);ot=Pl.error,Z=Pl.name,nt=vr(Cu)}}else y([Z],!0),ot=(await qS(ue,a,x,e.shouldUseNativeValidation))[Z],y([Z]),Ie(st),me&&(ot?nt=!1:d.isValid&&(nt=await N(r,!0)));me&&(ue._f.deps&&U(ue._f.deps),k(Z,nt,ot,Su))}},B=(V,q)=>{if(ye(n.errors,q)&&V.focus)return V.focus(),1},U=async(V,q={})=>{let Z,me;const ue=Ym(V);if(e.resolver){const ae=await A(nn(V)?V:ue);Z=vr(ae),me=V?!ue.some(Ie=>ye(ae,Ie)):Z}else V?(me=(await Promise.all(ue.map(async ae=>{const Ie=ye(r,ae);return await N(Ie&&Ie._f?{[ae]:Ie}:Ie)}))).every(Boolean),!(!me&&!n.isValid)&&j()):me=Z=await N(r);return f.state.next({...!Ws(V)||d.isValid&&Z!==n.isValid?{}:{name:V},...e.resolver||!V?{isValid:Z}:{},errors:n.errors}),q.shouldFocus&&!me&&Id(r,B,V?ue:l.mount),me},Q=V=>{const q={...o.mount?a:i};return nn(V)?q:Ws(V)?ye(q,V):V.map(Z=>ye(q,Z))},ie=(V,q)=>({invalid:!!ye((q||n).errors,V),isDirty:!!ye((q||n).dirtyFields,V),error:ye((q||n).errors,V),isValidating:!!ye(n.validatingFields,V),isTouched:!!ye((q||n).touchedFields,V)}),Ce=V=>{V&&Ym(V).forEach(q=>xn(n.errors,q)),f.state.next({errors:V?n.errors:{}})},Xe=(V,q,Z)=>{const me=(ye(r,V,{_f:{}})._f||{}).ref,ue=ye(n.errors,V)||{},{ref:ae,message:Ie,type:ot,...nt}=ue;Nt(n.errors,V,{...nt,...q,ref:me}),f.state.next({name:V,errors:n.errors,isValid:!1}),Z&&Z.shouldFocus&&me&&me.focus&&me.focus()},xt=(V,q)=>Ti(V)?f.values.subscribe({next:Z=>V(T(void 0,q),Z)}):T(V,q,!0),ut=(V,q={})=>{for(const Z of V?Ym(V):l.mount)l.mount.delete(Z),l.array.delete(Z),q.keepValue||(xn(r,Z),xn(a,Z)),!q.keepError&&xn(n.errors,Z),!q.keepDirty&&xn(n.dirtyFields,Z),!q.keepTouched&&xn(n.touchedFields,Z),!q.keepIsValidating&&xn(n.validatingFields,Z),!e.shouldUnregister&&!q.keepDefaultValue&&xn(i,Z);f.values.next({values:{...a}}),f.state.next({...n,...q.keepDirty?{isDirty:R()}:{}}),!q.keepIsValid&&j()},ge=({disabled:V,name:q,field:Z,fields:me,value:ue})=>{if(Os(V)&&o.mount||V){const ae=V?void 0:nn(ue)?vy(Z?Z._f:ye(me,q)._f):ue;Nt(a,q,ae),M(q,ae,!1,!1,!0)}},Qe=(V,q={})=>{let Z=ye(r,V);const me=Os(q.disabled)||Os(t.disabled);return Nt(r,V,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:V}},name:V,mount:!0,...q}}),l.mount.add(V),Z?ge({field:Z,disabled:Os(q.disabled)?q.disabled:t.disabled,name:V,value:q.value}):S(V,!0,q.value),{...me?{disabled:q.disabled||t.disabled}:{},...e.progressive?{required:!!q.required,min:ed(q.min),max:ed(q.max),minLength:ed(q.minLength),maxLength:ed(q.maxLength),pattern:ed(q.pattern)}:{},name:V,onChange:O,onBlur:O,ref:ue=>{if(ue){Qe(V,q),Z=ye(r,V);const ae=nn(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,Ie=Wne(ae),ot=Z._f.refs||[];if(Ie?ot.find(nt=>nt===ae):ae===Z._f.ref)return;Nt(r,V,{_f:{...Z._f,...Ie?{refs:[...ot.filter(gy),ae,...Array.isArray(ye(i,V))?[{}]:[]],ref:{type:ae.type,name:V}}:{ref:ae}}}),S(V,!1,void 0,ae)}else Z=ye(r,V,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(One(l.array,V)&&o.action)&&l.unMount.add(V)}}},X=()=>e.shouldFocusError&&Id(r,B,l.mount),de=V=>{Os(V)&&(f.state.next({disabled:V}),Id(r,(q,Z)=>{const me=ye(r,Z);me&&(q.disabled=me._f.disabled||V,Array.isArray(me._f.refs)&&me._f.refs.forEach(ue=>{ue.disabled=me._f.disabled||V}))},0,!1))},Te=(V,q)=>async Z=>{let me;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let ue=Gr(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:ae,values:Ie}=await I();n.errors=ae,ue=Ie}else await N(r);if(xn(n.errors,"root"),vr(n.errors)){f.state.next({errors:{}});try{await V(ue,Z)}catch(ae){me=ae}}else q&&await q({...n.errors},Z),X(),setTimeout(X);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vr(n.errors)&&!me,submitCount:n.submitCount+1,errors:n.errors}),me)throw me},Oe=(V,q={})=>{ye(r,V)&&(nn(q.defaultValue)?L(V,Gr(ye(i,V))):(L(V,q.defaultValue),Nt(i,V,Gr(q.defaultValue))),q.keepTouched||xn(n.touchedFields,V),q.keepDirty||(xn(n.dirtyFields,V),n.isDirty=q.defaultValue?R(V,Gr(ye(i,V))):R()),q.keepError||(xn(n.errors,V),d.isValid&&j()),f.state.next({...n}))},He=(V,q={})=>{const Z=V?Gr(V):i,me=Gr(Z),ue=vr(V),ae=ue?i:me;if(q.keepDefaultValues||(i=Z),!q.keepValues){if(q.keepDirtyValues)for(const Ie of l.mount)ye(n.dirtyFields,Ie)?Nt(ae,Ie,ye(a,Ie)):L(Ie,ye(ae,Ie));else{if(Cj&&nn(V))for(const Ie of l.mount){const ot=ye(r,Ie);if(ot&&ot._f){const nt=Array.isArray(ot._f.refs)?ot._f.refs[0]:ot._f.ref;if(sg(nt)){const st=nt.closest("form");if(st){st.reset();break}}}}r={}}a=t.shouldUnregister?q.keepDefaultValues?Gr(i):{}:Gr(ae),f.array.next({values:{...ae}}),f.values.next({values:{...ae}})}l={mount:q.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!q.keepIsValid||!!q.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:q.keepSubmitCount?n.submitCount:0,isDirty:ue?!1:q.keepDirty?n.isDirty:!!(q.keepDefaultValues&&!_a(V,i)),isSubmitted:q.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ue?{}:q.keepDirtyValues?q.keepDefaultValues&&a?gm(i,a):n.dirtyFields:q.keepDefaultValues&&V?gm(i,V):q.keepDirty?n.dirtyFields:{},touchedFields:q.keepTouched?n.touchedFields:{},errors:q.keepErrors?n.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Tt=(V,q)=>He(Ti(V)?V(a):V,q);return{control:{register:Qe,unregister:ut,getFieldState:ie,handleSubmit:Te,setError:Xe,_executeSchema:I,_getWatch:T,_getDirty:R,_updateValid:j,_removeUnmounted:P,_updateFieldArray:g,_updateDisabledField:ge,_getFieldArray:F,_reset:He,_resetDefaultValues:()=>Ti(e.defaultValues)&&e.defaultValues().then(V=>{Tt(V,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:V=>{n={...n,...V}},_disableForm:de,_subjects:f,_proxyFormState:d,_setErrors:E,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(V){o=V},get _defaultValues(){return i},get _names(){return l},set _names(V){l=V},get _formState(){return n},set _formState(V){n=V},get _options(){return e},set _options(V){e={...e,...V}}},trigger:U,register:Qe,handleSubmit:Te,watch:xt,setValue:L,getValues:Q,reset:Tt,resetField:Oe,clearErrors:Ce,unregister:ut,setError:Xe,setFocus:(V,q={})=>{const Z=ye(r,V),me=Z&&Z._f;if(me){const ue=me.refs?me.refs[0]:me.ref;ue.focus&&(ue.focus(),q.shouldSelect&&ue.select())}},getFieldState:ie}}function Ko(t={}){const e=xe.useRef(),n=xe.useRef(),[r,i]=xe.useState({isDirty:!1,isValidating:!1,isLoading:Ti(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ti(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Zne(t),formState:r});const a=e.current.control;return a._options=t,Une({subject:a._subjects.state,next:o=>{Fne(o,a._proxyFormState,a._updateFormState)&&i({...a._formState})}}),xe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),xe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),xe.useEffect(()=>{t.values&&!_a(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),xe.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),xe.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),xe.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Vne(r,a),e.current}const GS=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ye(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},YM=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?GS(r.ref,n,t):r.refs&&r.refs.forEach(i=>GS(i,n,t))}},Jne=(t,e)=>{e.shouldUseNativeValidation&&YM(t,e);const n={};for(const r in t){const i=ye(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(ere(e.names||Object.keys(t),r)){const o=Object.assign({},ye(n,r));Nt(o,"root",a),Nt(n,r,o)}else Nt(n,r,a)}return n},ere=(t,e)=>t.some(n=>n.startsWith(e+"."));var tre=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=zM(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},Yo=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&YM({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Jne(tre(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},at;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(at||(at={}));var pw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(pw||(pw={}));const ve=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Na=t=>{switch(typeof t){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return isNaN(t)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(t)?ve.array:t===null?ve.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ve.promise:typeof Map<"u"&&t instanceof Map?ve.map:typeof Set<"u"&&t instanceof Set?ve.set:typeof Date<"u"&&t instanceof Date?ve.date:ve.object;default:return ve.unknown}},se=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nre=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Fr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fr.create=t=>new Fr(t);const tu=(t,e)=>{let n;switch(t.code){case se.invalid_type:t.received===ve.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,at.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:n=`Unrecognized key(s) in object: ${at.joinValues(t.keys,", ")}`;break;case se.invalid_union:n="Invalid input";break;case se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${at.joinValues(t.options)}`;break;case se.invalid_enum_value:n=`Invalid enum value. Expected ${at.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:n="Invalid function arguments";break;case se.invalid_return_type:n="Invalid function return type";break;case se.invalid_date:n="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:at.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case se.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case se.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case se.custom:n="Invalid input";break;case se.invalid_intersection_types:n="Intersection results could not be merged";break;case se.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:n="Number must be finite";break;default:n=e.defaultError,at.assertNever(t)}return{message:n}};let QM=tu;function rre(t){QM=t}function lg(){return QM}const cg=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}},sre=[];function pe(t,e){const n=lg(),r=cg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===tu?void 0:tu].filter(i=>!!i)});t.common.issues.push(r)}class Zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ue;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Zn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Ue;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ue=Object.freeze({status:"aborted"}),lc=t=>({status:"dirty",value:t}),fr=t=>({status:"valid",value:t}),gw=t=>t.status==="aborted",vw=t=>t.status==="dirty",ph=t=>t.status==="valid",gh=t=>typeof Promise<"u"&&t instanceof Promise;function ug(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function XM(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));var fd,md;class ai{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KS=(t,e)=>{if(ph(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fr(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},description:i}}class Ye{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Na(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zn,ctx:{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(gh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},a=this._parseSync({data:e,path:i.path,parent:i});return KS(i,a)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(gh(i)?i:Promise.resolve(i));return KS(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:se.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Is({schema:this,typeName:Ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ti.create(this,this._def)}nullable(){return ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _s.create(this,this._def)}promise(){return ru.create(this,this._def)}or(e){return wh.create([this,e],this._def)}and(e){return bh.create(this,e,this._def)}transform(e){return new Is({...Ge(this._def),schema:this,typeName:Ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sh({...Ge(this._def),innerType:this,defaultValue:n,typeName:Ve.ZodDefault})}brand(){return new Pj({typeName:Ve.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ch({...Ge(this._def),innerType:this,catchValue:n,typeName:Ve.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return vf.create(this,e)}readonly(){return Th.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ire=/^c[^\s-]{8,}$/i,are=/^[0-9a-z]+$/,ore=/^[0-9A-HJKMNP-TV-Z]{26}$/,lre=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cre=/^[a-z0-9_-]{21}$/i,ure=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dre=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hre="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xy;const fre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mre=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,pre=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gre=new RegExp(`^${ZM}$`);function JM(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function vre(t){return new RegExp(`^${JM(t)}$`)}function eO(t){let e=`${ZM}T${JM(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function xre(t,e){return!!((e==="v4"||!e)&&fre.test(t)||(e==="v6"||!e)&&mre.test(t))}class vs extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){const a=this._getOrReturnCtx(e);return pe(a,{code:se.invalid_type,expected:ve.string,received:a.parsedType}),Ue}const r=new Zn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?pe(i,{code:se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&pe(i,{code:se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")dre.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"email",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")xy||(xy=new RegExp(hre,"u")),xy.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"emoji",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")lre.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"uuid",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")cre.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"nanoid",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")ire.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")are.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid2",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")ore.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ulid",code:se.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),pe(i,{validation:"url",code:se.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"regex",code:se.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?eO(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?gre.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?vre(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:se.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?ure.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"duration",code:se.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?xre(e.data,a.version)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ip",code:se.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?pre.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"base64",code:se.invalid_string,message:a.message}),r.dirty()):at.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:se.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new vs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new vs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vs.create=t=>{var e;return new vs({checks:[],typeName:Ve.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};function yre(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class ro extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){const a=this._getOrReturnCtx(e);return pe(a,{code:se.invalid_type,expected:ve.number,received:a.parsedType}),Ue}let r;const i=new Zn;for(const a of this._def.checks)a.kind==="int"?at.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:se.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?yre(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:se.not_finite,message:a.message}),i.dirty()):at.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new ro({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new ro({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ro.create=t=>new ro({checks:[],typeName:Ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class so extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ve.bigint){const a=this._getOrReturnCtx(e);return pe(a,{code:se.invalid_type,expected:ve.bigint,received:a.parsedType}),Ue}let r;const i=new Zn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):at.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new so({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new so({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}so.create=t=>{var e;return new so({checks:[],typeName:Ve.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};class vh extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.boolean,received:r.parsedType}),Ue}return fr(e.data)}}vh.create=t=>new vh({typeName:Ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class pl extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){const a=this._getOrReturnCtx(e);return pe(a,{code:se.invalid_type,expected:ve.date,received:a.parsedType}),Ue}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return pe(a,{code:se.invalid_date}),Ue}const r=new Zn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:se.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:se.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):at.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}pl.create=t=>new pl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ve.ZodDate,...Ge(t)});class dg extends Ye{_parse(e){if(this._getType(e)!==ve.symbol){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.symbol,received:r.parsedType}),Ue}return fr(e.data)}}dg.create=t=>new dg({typeName:Ve.ZodSymbol,...Ge(t)});class xh extends Ye{_parse(e){if(this._getType(e)!==ve.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.undefined,received:r.parsedType}),Ue}return fr(e.data)}}xh.create=t=>new xh({typeName:Ve.ZodUndefined,...Ge(t)});class yh extends Ye{_parse(e){if(this._getType(e)!==ve.null){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.null,received:r.parsedType}),Ue}return fr(e.data)}}yh.create=t=>new yh({typeName:Ve.ZodNull,...Ge(t)});class nu extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return fr(e.data)}}nu.create=t=>new nu({typeName:Ve.ZodAny,...Ge(t)});class Qo extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fr(e.data)}}Qo.create=t=>new Qo({typeName:Ve.ZodUnknown,...Ge(t)});class Xi extends Ye{_parse(e){const n=this._getOrReturnCtx(e);return pe(n,{code:se.invalid_type,expected:ve.never,received:n.parsedType}),Ue}}Xi.create=t=>new Xi({typeName:Ve.ZodNever,...Ge(t)});class hg extends Ye{_parse(e){if(this._getType(e)!==ve.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.void,received:r.parsedType}),Ue}return fr(e.data)}}hg.create=t=>new hg({typeName:Ve.ZodVoid,...Ge(t)});class _s extends Ye{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ve.array)return pe(n,{code:se.invalid_type,expected:ve.array,received:n.parsedType}),Ue;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(pe(n,{code:o?se.too_big:se.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(pe(n,{code:se.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(pe(n,{code:se.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new ai(n,o,n.path,l)))).then(o=>Zn.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new ai(n,o,n.path,l)));return Zn.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new _s({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new _s({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new _s({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}_s.create=(t,e)=>new _s({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ve.ZodArray,...Ge(e)});function Gl(t){if(t instanceof zt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ti.create(Gl(r))}return new zt({...t._def,shape:()=>e})}else return t instanceof _s?new _s({...t._def,type:Gl(t.element)}):t instanceof ti?ti.create(Gl(t.unwrap())):t instanceof ao?ao.create(Gl(t.unwrap())):t instanceof oi?oi.create(t.items.map(e=>Gl(e))):t}class zt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=at.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ve.object){const u=this._getOrReturnCtx(e);return pe(u,{code:se.invalid_type,expected:ve.object,received:u.parsedType}),Ue}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Xi&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new ai(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Xi){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(pe(i,{code:se.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new ai(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Zn.mergeObjectSync(r,u)):Zn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new zt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Re.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new zt({...this._def,unknownKeys:"strip"})}passthrough(){return new zt({...this._def,unknownKeys:"passthrough"})}extend(e){return new zt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ve.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zt({...this._def,catchall:e})}pick(e){const n={};return at.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zt({...this._def,shape:()=>n})}omit(e){const n={};return at.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new zt({...this._def,shape:()=>n})}deepPartial(){return Gl(this)}partial(e){const n={};return at.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new zt({...this._def,shape:()=>n})}required(e){const n={};return at.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ti;)a=a._def.innerType;n[r]=a}}),new zt({...this._def,shape:()=>n})}keyof(){return tO(at.objectKeys(this.shape))}}zt.create=(t,e)=>new zt({shape:()=>t,unknownKeys:"strip",catchall:Xi.create(),typeName:Ve.ZodObject,...Ge(e)});zt.strictCreate=(t,e)=>new zt({shape:()=>t,unknownKeys:"strict",catchall:Xi.create(),typeName:Ve.ZodObject,...Ge(e)});zt.lazycreate=(t,e)=>new zt({shape:t,unknownKeys:"strip",catchall:Xi.create(),typeName:Ve.ZodObject,...Ge(e)});class wh extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Fr(l.ctx.common.issues));return pe(n,{code:se.invalid_union,unionErrors:o}),Ue}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Fr(c));return pe(n,{code:se.invalid_union,unionErrors:l}),Ue}}get options(){return this._def.options}}wh.create=(t,e)=>new wh({options:t,typeName:Ve.ZodUnion,...Ge(e)});const yi=t=>t instanceof _h?yi(t.schema):t instanceof Is?yi(t.innerType()):t instanceof Nh?[t.value]:t instanceof io?t.options:t instanceof Eh?at.objectValues(t.enum):t instanceof Sh?yi(t._def.innerType):t instanceof xh?[void 0]:t instanceof yh?[null]:t instanceof ti?[void 0,...yi(t.unwrap())]:t instanceof ao?[null,...yi(t.unwrap())]:t instanceof Pj||t instanceof Th?yi(t.unwrap()):t instanceof Ch?yi(t._def.innerType):[];class Vv extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return pe(n,{code:se.invalid_type,expected:ve.object,received:n.parsedType}),Ue;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(pe(n,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const a of n){const o=yi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,a)}}return new Vv({typeName:Ve.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Ge(r)})}}function xw(t,e){const n=Na(t),r=Na(e);if(t===e)return{valid:!0,data:t};if(n===ve.object&&r===ve.object){const i=at.objectKeys(e),a=at.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=xw(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===ve.array&&r===ve.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=xw(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ve.date&&r===ve.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bh extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(gw(a)||gw(o))return Ue;const l=xw(a.value,o.value);return l.valid?((vw(a)||vw(o))&&n.dirty(),{status:n.value,value:l.data}):(pe(r,{code:se.invalid_intersection_types}),Ue)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bh.create=(t,e,n)=>new bh({left:t,right:e,typeName:Ve.ZodIntersection,...Ge(n)});class oi extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.array)return pe(r,{code:se.invalid_type,expected:ve.array,received:r.parsedType}),Ue;if(r.data.length<this._def.items.length)return pe(r,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&r.data.length>this._def.items.length&&(pe(r,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new ai(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Zn.mergeArray(n,o)):Zn.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new oi({...this._def,rest:e})}}oi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oi({items:t,typeName:Ve.ZodTuple,rest:null,...Ge(e)})};class jh extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.object)return pe(r,{code:se.invalid_type,expected:ve.object,received:r.parsedType}),Ue;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:a._parse(new ai(r,l,r.path,l)),value:o._parse(new ai(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Zn.mergeObjectAsync(n,i):Zn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ye?new jh({keyType:e,valueType:n,typeName:Ve.ZodRecord,...Ge(r)}):new jh({keyType:vs.create(),valueType:e,typeName:Ve.ZodRecord,...Ge(n)})}}class fg extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.map)return pe(r,{code:se.invalid_type,expected:ve.map,received:r.parsedType}),Ue;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new ai(r,l,r.path,[u,"key"])),value:a._parse(new ai(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ue;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ue;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}fg.create=(t,e,n)=>new fg({valueType:e,keyType:t,typeName:Ve.ZodMap,...Ge(n)});class gl extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.set)return pe(r,{code:se.invalid_type,expected:ve.set,received:r.parsedType}),Ue;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(pe(r,{code:se.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(pe(r,{code:se.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ue;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new ai(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new gl({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new gl({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}gl.create=(t,e)=>new gl({valueType:t,minSize:null,maxSize:null,typeName:Ve.ZodSet,...Ge(e)});class Cc extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.function)return pe(n,{code:se.invalid_type,expected:ve.function,received:n.parsedType}),Ue;function r(l,c){return cg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lg(),tu].filter(u=>!!u),issueData:{code:se.invalid_arguments,argumentsError:c}})}function i(l,c){return cg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lg(),tu].filter(u=>!!u),issueData:{code:se.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ru){const l=this;return fr(async function(...c){const u=new Fr([]),d=await l._def.args.parseAsync(c,a).catch(v=>{throw u.addIssue(r(c,v)),u}),f=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(f,a).catch(v=>{throw u.addIssue(i(f,v)),u})})}else{const l=this;return fr(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new Fr([r(c,u.error)]);const d=Reflect.apply(o,this,u.data),f=l._def.returns.safeParse(d,a);if(!f.success)throw new Fr([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Cc({...this._def,args:oi.create(e).rest(Qo.create())})}returns(e){return new Cc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Cc({args:e||oi.create([]).rest(Qo.create()),returns:n||Qo.create(),typeName:Ve.ZodFunction,...Ge(r)})}}class _h extends Ye{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}_h.create=(t,e)=>new _h({getter:t,typeName:Ve.ZodLazy,...Ge(e)});class Nh extends Ye{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pe(n,{received:n.data,code:se.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}Nh.create=(t,e)=>new Nh({value:t,typeName:Ve.ZodLiteral,...Ge(e)});function tO(t,e){return new io({values:t,typeName:Ve.ZodEnum,...Ge(e)})}class io extends Ye{constructor(){super(...arguments),fd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{expected:at.joinValues(r),received:n.parsedType,code:se.invalid_type}),Ue}if(ug(this,fd)||XM(this,fd,new Set(this._def.values)),!ug(this,fd).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{received:n.data,code:se.invalid_enum_value,options:r}),Ue}return fr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return io.create(e,{...this._def,...n})}exclude(e,n=this._def){return io.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}fd=new WeakMap;io.create=tO;class Eh extends Ye{constructor(){super(...arguments),md.set(this,void 0)}_parse(e){const n=at.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ve.string&&r.parsedType!==ve.number){const i=at.objectValues(n);return pe(r,{expected:at.joinValues(i),received:r.parsedType,code:se.invalid_type}),Ue}if(ug(this,md)||XM(this,md,new Set(at.getValidEnumValues(this._def.values))),!ug(this,md).has(e.data)){const i=at.objectValues(n);return pe(r,{received:r.data,code:se.invalid_enum_value,options:i}),Ue}return fr(e.data)}get enum(){return this._def.values}}md=new WeakMap;Eh.create=(t,e)=>new Eh({values:t,typeName:Ve.ZodNativeEnum,...Ge(e)});class ru extends Ye{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.promise&&n.common.async===!1)return pe(n,{code:se.invalid_type,expected:ve.promise,received:n.parsedType}),Ue;const r=n.parsedType===ve.promise?n.data:Promise.resolve(n.data);return fr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ru.create=(t,e)=>new ru({type:t,typeName:Ve.ZodPromise,...Ge(e)});class Is extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{pe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ue;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ue:c.status==="dirty"||n.value==="dirty"?lc(c.value):c});{if(n.value==="aborted")return Ue;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ue:l.status==="dirty"||n.value==="dirty"?lc(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ue:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ue:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ph(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ph(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);at.assertNever(i)}}Is.create=(t,e,n)=>new Is({schema:t,typeName:Ve.ZodEffects,effect:e,...Ge(n)});Is.createWithPreprocess=(t,e,n)=>new Is({schema:e,effect:{type:"preprocess",transform:t},typeName:Ve.ZodEffects,...Ge(n)});class ti extends Ye{_parse(e){return this._getType(e)===ve.undefined?fr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ti.create=(t,e)=>new ti({innerType:t,typeName:Ve.ZodOptional,...Ge(e)});class ao extends Ye{_parse(e){return this._getType(e)===ve.null?fr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ao.create=(t,e)=>new ao({innerType:t,typeName:Ve.ZodNullable,...Ge(e)});class Sh extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ve.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sh.create=(t,e)=>new Sh({innerType:t,typeName:Ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class Ch extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gh(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Fr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ch.create=(t,e)=>new Ch({innerType:t,typeName:Ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class mg extends Ye{_parse(e){if(this._getType(e)!==ve.nan){const r=this._getOrReturnCtx(e);return pe(r,{code:se.invalid_type,expected:ve.nan,received:r.parsedType}),Ue}return{status:"valid",value:e.data}}}mg.create=t=>new mg({typeName:Ve.ZodNaN,...Ge(t)});const wre=Symbol("zod_brand");class Pj extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vf extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ue:a.status==="dirty"?(n.dirty(),lc(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ue:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new vf({in:e,out:n,typeName:Ve.ZodPipeline})}}class Th extends Ye{_parse(e){const n=this._def.innerType._parse(e),r=i=>(ph(i)&&(i.value=Object.freeze(i.value)),i);return gh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Th.create=(t,e)=>new Th({innerType:t,typeName:Ve.ZodReadonly,...Ge(e)});function nO(t,e={},n){return t?nu.create().superRefine((r,i)=>{var a,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:c})}}):nu.create()}const bre={object:zt.lazycreate};var Ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ve||(Ve={}));const jre=(t,e={message:`Input not instance of ${t.name}`})=>nO(n=>n instanceof t,e),rO=vs.create,sO=ro.create,_re=mg.create,Nre=so.create,iO=vh.create,Ere=pl.create,Sre=dg.create,Cre=xh.create,Tre=yh.create,kre=nu.create,Ire=Qo.create,Pre=Xi.create,Are=hg.create,Rre=_s.create,Dre=zt.create,Mre=zt.strictCreate,Ore=wh.create,Lre=Vv.create,Vre=bh.create,Fre=oi.create,Ure=jh.create,$re=fg.create,zre=gl.create,Bre=Cc.create,qre=_h.create,Wre=Nh.create,Hre=io.create,Gre=Eh.create,Kre=ru.create,YS=Is.create,Yre=ti.create,Qre=ao.create,Xre=Is.createWithPreprocess,Zre=vf.create,Jre=()=>rO().optional(),ese=()=>sO().optional(),tse=()=>iO().optional(),nse={string:t=>vs.create({...t,coerce:!0}),number:t=>ro.create({...t,coerce:!0}),boolean:t=>vh.create({...t,coerce:!0}),bigint:t=>so.create({...t,coerce:!0}),date:t=>pl.create({...t,coerce:!0})},rse=Ue;var Le=Object.freeze({__proto__:null,defaultErrorMap:tu,setErrorMap:rre,getErrorMap:lg,makeIssue:cg,EMPTY_PATH:sre,addIssueToContext:pe,ParseStatus:Zn,INVALID:Ue,DIRTY:lc,OK:fr,isAborted:gw,isDirty:vw,isValid:ph,isAsync:gh,get util(){return at},get objectUtil(){return pw},ZodParsedType:ve,getParsedType:Na,ZodType:Ye,datetimeRegex:eO,ZodString:vs,ZodNumber:ro,ZodBigInt:so,ZodBoolean:vh,ZodDate:pl,ZodSymbol:dg,ZodUndefined:xh,ZodNull:yh,ZodAny:nu,ZodUnknown:Qo,ZodNever:Xi,ZodVoid:hg,ZodArray:_s,ZodObject:zt,ZodUnion:wh,ZodDiscriminatedUnion:Vv,ZodIntersection:bh,ZodTuple:oi,ZodRecord:jh,ZodMap:fg,ZodSet:gl,ZodFunction:Cc,ZodLazy:_h,ZodLiteral:Nh,ZodEnum:io,ZodNativeEnum:Eh,ZodPromise:ru,ZodEffects:Is,ZodTransformer:Is,ZodOptional:ti,ZodNullable:ao,ZodDefault:Sh,ZodCatch:Ch,ZodNaN:mg,BRAND:wre,ZodBranded:Pj,ZodPipeline:vf,ZodReadonly:Th,custom:nO,Schema:Ye,ZodSchema:Ye,late:bre,get ZodFirstPartyTypeKind(){return Ve},coerce:nse,any:kre,array:Rre,bigint:Nre,boolean:iO,date:Ere,discriminatedUnion:Lre,effect:YS,enum:Hre,function:Bre,instanceof:jre,intersection:Vre,lazy:qre,literal:Wre,map:$re,nan:_re,nativeEnum:Gre,never:Pre,null:Tre,nullable:Qre,number:sO,object:Dre,oboolean:tse,onumber:ese,optional:Yre,ostring:Jre,pipeline:Zre,preprocess:Xre,promise:Kre,record:Ure,set:zre,strictObject:Mre,string:rO,symbol:Sre,transformer:YS,tuple:Fre,undefined:Cre,union:Ore,unknown:Ire,void:Are,NEVER:rse,ZodIssueCode:se,quotelessJson:nre,ZodError:Fr}),Aj="Checkbox",[sse,Pae]=qr(Aj),[ise,ase]=sse(Aj),aO=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,v]=p.useState(null),x=We(e,E=>v(E)),w=p.useRef(!1),j=m?d||!!m.closest("form"):!0,[y=!1,g]=$r({prop:i,defaultProp:a,onChange:u}),b=p.useRef(y);return p.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const S=()=>g(b.current);return E.addEventListener("reset",S),()=>E.removeEventListener("reset",S)}},[m,g]),s.jsxs(ise,{scope:n,state:y,disabled:l,children:[s.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":za(y)?"mixed":y,"aria-required":o,"data-state":cO(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:x,onKeyDown:le(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:le(t.onClick,E=>{g(S=>za(S)?!0:!S),j&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),j&&s.jsx(ose,{control:m,bubbles:!w.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:za(a)?!1:a})]})});aO.displayName=Aj;var oO="CheckboxIndicator",lO=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=ase(oO,n);return s.jsx(Fn,{present:r||za(a.state)||a.state===!0,children:s.jsx(_e.span,{"data-state":cO(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});lO.displayName=oO;var ose=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...a}=t,o=p.useRef(null),l=Iv(n),c=yv(e);p.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&v){const x=new Event("click",{bubbles:r});d.indeterminate=za(n),v.call(d,za(n)?!1:n),d.dispatchEvent(x)}},[l,n,r]);const u=p.useRef(za(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function za(t){return t==="indeterminate"}function cO(t){return za(t)?"indeterminate":t?"checked":"unchecked"}var uO=aO,lse=lO;const pg=p.forwardRef(({className:t,...e},n)=>s.jsx(uO,{ref:n,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(lse,{className:Pe("flex items-center justify-center text-current"),children:s.jsx(aj,{className:"h-4 w-4"})})}));pg.displayName=uO.displayName;var dO=["PageUp","PageDown"],hO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Eu="Slider",[yw,cse,use]=tf(Eu),[mO,Aae]=qr(Eu,[use]),[dse,Fv]=mO(Eu),pO=p.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:x,...w}=t,j=p.useRef(new Set),y=p.useRef(0),b=o==="horizontal"?hse:fse,[E=[],S]=$r({prop:d,defaultProp:u,onChange:P=>{var T;(T=[...j.current][y.current])==null||T.focus(),f(P)}}),M=p.useRef(E);function k(P){const R=xse(E,P);N(P,R)}function I(P){N(P,y.current)}function A(){const P=M.current[y.current];E[y.current]!==P&&m(E)}function N(P,R,{commit:T}={commit:!1}){const F=jse(a),W=_se(Math.round((P-r)/a)*a+r,F),Y=mh(W,[r,i]);S((L=[])=>{const O=gse(L,Y,R);if(bse(O,c*a)){y.current=O.indexOf(Y);const B=String(O)!==String(L);return B&&T&&m(O),B?O:L}else return L})}return s.jsx(dse,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:i,valueIndexToChangeRef:y,thumbs:j.current,values:E,orientation:o,form:x,children:s.jsx(yw.Provider,{scope:t.__scopeSlider,children:s.jsx(yw.Slot,{scope:t.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:e,onPointerDown:le(w.onPointerDown,()=>{l||(M.current=E)}),min:r,max:i,inverted:v,onSlideStart:l?void 0:k,onSlideMove:l?void 0:I,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&N(r,0,{commit:!0}),onEndKeyDown:()=>!l&&N(i,E.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:R})=>{if(!l){const W=dO.includes(P.key)||P.shiftKey&&hO.includes(P.key)?10:1,Y=y.current,L=E[Y],O=a*W*R;N(L+O,Y,{commit:!0})}}})})})})});pO.displayName=Eu;var[gO,vO]=mO(Eu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),hse=p.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[f,m]=p.useState(null),v=We(e,b=>m(b)),x=p.useRef(),w=Sl(i),j=w==="ltr",y=j&&!a||!j&&a;function g(b){const E=x.current||f.getBoundingClientRect(),S=[0,E.width],k=Rj(S,y?[n,r]:[r,n]);return x.current=E,k(b-E.left)}return s.jsx(gO,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:s.jsx(xO,{dir:w,"data-orientation":"horizontal",...d,ref:v,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const E=g(b.clientX);o==null||o(E)},onSlideMove:b=>{const E=g(b.clientX);l==null||l(E)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=fO[y?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:S?-1:1})}})})}),fse=p.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),f=We(e,d),m=p.useRef(),v=!i;function x(w){const j=m.current||d.current.getBoundingClientRect(),y=[0,j.height],b=Rj(y,v?[r,n]:[n,r]);return m.current=j,b(w-j.top)}return s.jsx(gO,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:s.jsx(xO,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const j=x(w.clientY);a==null||a(j)},onSlideMove:w=>{const j=x(w.clientY);o==null||o(j)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const y=fO[v?"from-bottom":"from-top"].includes(w.key);c==null||c({event:w,direction:y?-1:1})}})})}),xO=p.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=Fv(Eu,n);return s.jsx(_e.span,{...u,ref:e,onKeyDown:le(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):dO.concat(hO).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:le(t.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(m)?m.focus():r(f)}),onPointerMove:le(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:le(t.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),a(f))})})}),yO="SliderTrack",wO=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Fv(yO,n);return s.jsx(_e.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});wO.displayName=yO;var ww="SliderRange",bO=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Fv(ww,n),a=vO(ww,n),o=p.useRef(null),l=We(e,o),c=i.values.length,u=i.values.map(m=>_O(m,i.min,i.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(_e.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:f+"%"}})});bO.displayName=ww;var bw="SliderThumb",jO=p.forwardRef((t,e)=>{const n=cse(t.__scopeSlider),[r,i]=p.useState(null),a=We(e,l=>i(l)),o=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(mse,{...t,ref:a,index:o})}),mse=p.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=Fv(bw,n),l=vO(bw,n),[c,u]=p.useState(null),d=We(e,g=>u(g)),f=c?o.form||!!c.closest("form"):!0,m=yv(c),v=o.values[r],x=v===void 0?0:_O(v,o.min,o.max),w=vse(r,o.values.length),j=m==null?void 0:m[l.size],y=j?yse(j,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${y}px)`},children:[s.jsx(yw.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(_e.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:v===void 0?{display:"none"}:t.style,onFocus:le(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&s.jsx(pse,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});jO.displayName=bw;var pse=t=>{const{value:e,...n}=t,r=p.useRef(null),i=Iv(e);return p.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[i,e]),s.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function gse(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function _O(t,e,n){const a=100/(n-e)*(t-e);return mh(a,[0,100])}function vse(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function xse(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function yse(t,e,n){const r=t/2,a=Rj([0,50],[0,r]);return(r-a(e)*n)*n}function wse(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function bse(t,e){if(e>0){const n=wse(t);return Math.min(...n)>=e}return!0}function Rj(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function jse(t){return(String(t).split(".")[1]||"").length}function _se(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var NO=pO,Nse=wO,Ese=bO,Sse=jO;const EO=p.forwardRef(({className:t,...e},n)=>s.jsxs(NO,{ref:n,className:Pe("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Nse,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(Ese,{className:"absolute h-full bg-primary"})}),s.jsx(Sse,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));EO.displayName=NO.displayName;const xf=Le.object({title:Le.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:Le.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:Le.array(Le.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Le.string().min(1,"Veuillez spécifier un lieu de rencontre")}),Cse=xf.extend({price:Le.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:Le.enum(["new","like-new","good","fair"]),paymentMethods:Le.array(Le.string()).min(1,"Sélectionnez au moins un mode de paiement")}),Tse=xf.extend({donationReason:Le.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),kse=xf.extend({desiredItems:Le.array(Le.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:Le.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Ise=xf.extend({hourlyRate:Le.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:Le.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Le.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:Le.string().optional()}),Pse=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],QS=[{value:"cash",label:"Espèces",icon:yA},{value:"transfer",label:"Virement bancaire",icon:an},{value:"lydia",label:"Lydia",icon:El},{value:"paypal",label:"PayPal",icon:an}],Ase=()=>{var Q,ie,Ce,Xe,xt,ut,ge,Qe;const{currentUser:t,userProfile:e}=Yt(),{createListing:n}=uf(),r=Vn(),[i]=N1(),[a,o]=p.useState(()=>i.get("type")||"sell"),[l,c]=p.useState([]),[u,d]=p.useState(!1),[f,m]=p.useState(""),[v,x]=p.useState([]),[w,j]=p.useState(!1),[y,g]=p.useState([""]),[b,E]=p.useState(""),[S,M]=p.useState([]),[k,I]=p.useState([1]),N=Ko({resolver:Yo((()=>{switch(a){case"sell":return Cse;case"gift":return Tse;case"swap":return kse;case"service":return Ise;default:return xf}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});p.useEffect(()=>{N.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),x([]),g([""]),M([]),I([1]),c([])},[a,N]);const P=async X=>{if(!t)throw new Error("User not authenticated");const de=Date.now(),Te=`listings/${t.uid}/${de}_${X.name}`,Oe=Db(Ob,Te),He=await Ab(Oe,X);return await Rb(He.ref)},R=async X=>{const de=X.target.files;if(!(!de||de.length===0)){d(!0);try{const Oe=Array.from(de).slice(0,10-l.length).filter(Tt=>Tt.size<=15728640).map(Tt=>P(Tt)),He=await Promise.all(Oe);c(Tt=>[...Tt,...He])}catch(Te){console.error("Error uploading images:",Te)}finally{d(!1)}}},T=X=>{c(de=>de.filter((Te,Oe)=>Oe!==X))},F=()=>{if(f.trim()&&!v.includes(f.trim())&&v.length<5){const X=[...v,f.trim()];x(X),N.setValue("tags",X),m("")}},W=X=>{const de=v.filter(Te=>Te!==X);x(de),N.setValue("tags",de)},Y=()=>{if(b.trim()){const X=[...y.filter(de=>de.trim()),b.trim()];g(X),N.setValue("desiredItems",X),E("")}},L=X=>{const de=y.filter((Te,Oe)=>Oe!==X);g(de),N.setValue("desiredItems",de)},O=(X,de)=>{const Te=de?[...S,X]:S.filter(Oe=>Oe!==X);M(Te),N.setValue("paymentMethods",Te)},B=async X=>{if(!(!t||!e)){j(!0);try{const de={title:X.title,description:X.description,currency:"EUR",category:"electronics",images:l,tags:X.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let Te;switch(a){case"sell":Te={...de,price:X.price,condition:X.condition,transactionType:"sale",description:`${X.description}

Modes de paiement acceptés: ${S.map(He=>{var Tt;return(Tt=QS.find(Wr=>Wr.value===He))==null?void 0:Tt.label}).join(", ")}`};break;case"gift":Te={...de,price:0,condition:"good",transactionType:"donation",description:`${X.description}

Raison du don: ${X.donationReason}`};break;case"swap":Te={...de,price:X.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:y.filter(He=>He.trim()).join(", "),description:`${X.description}

Recherche en échange: ${y.filter(He=>He.trim()).join(", ")}
Valeur estimée: ${X.estimatedValue}€`};break;case"service":Te={...de,price:X.hourlyRate,condition:"new",transactionType:"service",description:`${X.description}

Compétences: ${X.skills}
Tarif: ${X.hourlyRate}€/h
Durée prévue: ${k[0]}h${X.availability?`
Disponibilités: ${X.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",Te);const Oe=await n(Te);r(`/listing/${Oe}`)}catch(de){console.error("Error creating listing:",de)}finally{j(!1)}}},U=()=>{const X=N.formState.errors,de=N.watch("title")&&N.watch("description")&&N.watch("meetingLocation")&&v.length>0;switch(a){case"sell":return de&&N.watch("price")&&S.length>0&&!X.title&&!X.description&&!X.price;case"gift":return de&&N.watch("donationReason")&&!X.title&&!X.description&&!X.donationReason;case"swap":return de&&y.some(Te=>Te.trim())&&N.watch("estimatedValue")&&!X.title&&!X.description&&!X.estimatedValue;case"service":return de&&N.watch("hourlyRate")&&N.watch("skills")&&!X.title&&!X.description&&!X.hourlyRate&&!X.skills;default:return!1}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:N.handleSubmit(B),className:"space-y-8",children:[s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(q0,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(tt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(G,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(G,{className:"p-4 text-center",children:[s.jsx(Bp,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(G,{className:"p-4 text-center",children:[s.jsx(Hc,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(G,{className:"p-4 text-center",children:[s.jsx(qi,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(H,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(G,{className:"p-4 text-center",children:[s.jsx(ln,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsx(Ee,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(ke,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...N.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Q=N.formState.errors.title)==null?void 0:Q.message}),s.jsxs("span",{children:[((ie=N.watch("title"))==null?void 0:ie.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(js,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...N.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Ce=N.formState.errors.description)==null?void 0:Ce.message}),s.jsxs("span",{children:[((Xe=N.watch("description"))==null?void 0:Xe.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Bp,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(ke,{id:"price",type:"text",placeholder:"0,00",...N.register("price"),className:"mt-1"}),N.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(St,{onValueChange:X=>N.setValue("condition",X),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{placeholder:"Sélectionnez un état"})}),s.jsx(bt,{children:Pse.map(X=>s.jsx(we,{value:X.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:X.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:X.description})]})},X.value))})]}),N.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:QS.map(X=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pg,{id:X.value,checked:S.includes(X.value),onCheckedChange:de=>O(X.value,de)}),s.jsxs(oe,{htmlFor:X.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(X.icon,{className:"w-4 h-4"}),X.label]})]},X.value))}),S.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Hc,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(G,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(js,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...N.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(xt=N.formState.errors.donationReason)==null?void 0:xt.message}),s.jsxs("span",{children:[((ut=N.watch("donationReason"))==null?void 0:ut.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(qi,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[y.filter(X=>X.trim()).map((X,de)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{value:X,readOnly:!0,className:"flex-1"}),s.jsx($,{type:"button",variant:"outline",size:"icon",onClick:()=>L(de),children:s.jsx(PA,{className:"w-4 h-4"})})]},de)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{placeholder:"Ex: Livre de physique L2",value:b,onChange:X=>E(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),Y()),className:"flex-1"}),s.jsx($,{type:"button",onClick:Y,disabled:!b.trim(),children:s.jsx(Ho,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(ke,{id:"estimatedValue",type:"text",placeholder:"0,00",...N.register("estimatedValue"),className:"mt-1"}),N.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(ln,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(js,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...N.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ge=N.formState.errors.skills)==null?void 0:ge.message}),s.jsxs("span",{children:[((Qe=N.watch("skills"))==null?void 0:Qe.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(ke,{id:"hourlyRate",type:"text",placeholder:"15,00",...N.register("hourlyRate"),className:"mt-1"}),N.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(oe,{className:"text-foreground",children:["Durée prévue: ",k[0],"h"]}),s.jsx(EO,{value:k,onValueChange:X=>{I(X),N.setValue("duration",X[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(ke,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...N.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Wo,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(tt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(G,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((X,de)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:X,alt:`Photo ${de+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx($,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>T(de),children:s.jsx(H0,{className:"w-3 h-3"})}),de===0&&s.jsx(Ae,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},de)),l.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[u?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(W0,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:R,className:"hidden",disabled:u})]})]})})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(oh,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map(X=>s.jsxs(Ae,{variant:"secondary",className:"flex items-center gap-1",children:[X,s.jsx($,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>W(X),children:s.jsx(H0,{className:"w-3 h-3"})})]},X))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{placeholder:"Ajouter un tag...",value:f,onChange:X=>m(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),F()),className:"flex-1"}),s.jsx($,{type:"button",onClick:F,disabled:!f.trim()||v.length>=5,children:"Ajouter"})]}),v.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsx(ke,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...N.register("meetingLocation"),className:"mt-1"}),N.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(wc,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("title")&&N.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("title")&&N.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("description")&&N.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("description")&&N.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${v.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${v.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("price")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Prix (≥ 1€)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${S.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${S.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Motif du don"})]}),a==="swap"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${y.some(X=>X.trim())?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${y.some(X=>X.trim())?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Objets recherchés"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Valeur estimée"})]})]}),a==="service"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tarif (≥ 5€/h)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("skills")&&N.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("skills")&&N.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Compétences"})]})]})]})})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(pt,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6",children:[s.jsx($,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:w||!U()||u,children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(q0,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:U()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var Dj="Tabs",[Rse,Rae]=qr(Dj,[jv]),SO=jv(),[Dse,Mj]=Rse(Dj),CO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Sl(l),[f,m]=$r({prop:r,onChange:i,defaultProp:a});return s.jsx(Dse,{scope:n,baseId:Lr(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(_e.div,{dir:d,"data-orientation":o,...u,ref:e})})});CO.displayName=Dj;var TO="TabsList",kO=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=Mj(TO,n),o=SO(n);return s.jsx(mR,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(_e.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});kO.displayName=TO;var IO="TabsTrigger",PO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=Mj(IO,n),l=SO(n),c=DO(o.baseId,r),u=MO(o.baseId,r),d=r===o.value;return s.jsx(pR,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(_e.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:le(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:le(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});PO.displayName=IO;var AO="TabsContent",RO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,l=Mj(AO,n),c=DO(l.baseId,r),u=MO(l.baseId,r),d=r===l.value,f=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Fn,{present:i||d,children:({present:m})=>s.jsx(_e.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});RO.displayName=AO;function DO(t,e){return`${t}-trigger-${e}`}function MO(t,e){return`${t}-content-${e}`}var Mse=CO,OO=kO,LO=PO,VO=RO;const kl=Mse,yo=p.forwardRef(({className:t,...e},n)=>s.jsx(OO,{ref:n,className:Pe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));yo.displayName=OO.displayName;const Ot=p.forwardRef(({className:t,...e},n)=>s.jsx(LO,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));Ot.displayName=LO.displayName;const Lt=p.forwardRef(({className:t,...e},n)=>s.jsx(VO,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Lt.displayName=VO.displayName;const FO=({currentPhotoURL:t,displayName:e})=>{var y,g;const{currentUser:n,updateUserProfile:r}=Yt(),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(null),m=p.useRef(null),v=b=>{var M;const E=(M=b.target.files)==null?void 0:M[0];if(!E)return;if(!E.type.startsWith("image/")){ee.error("Veuillez sélectionner une image");return}if(E.size>5*1024*1024){ee.error("L'image ne doit pas dépasser 5MB");return}f(E);const S=new FileReader;S.onload=k=>{var I;u((I=k.target)==null?void 0:I.result)},S.readAsDataURL(E)},x=async()=>{if(!(!d||!n)){l(!0);try{const b=`profile-photos/${n.uid}-${Date.now()}.${d.name.split(".").pop()}`,E=Db(Ob,b),S=await Ab(E,d),M=await Rb(S.ref);await S0(n,{photoURL:M}),await r({photoURL:M}),ee.success("Photo de profil mise à jour !"),a(!1),u(null),f(null)}catch(b){console.error("Erreur lors de l'upload:",b),ee.error("Erreur lors de la mise à jour de la photo")}finally{l(!1)}}},w=async()=>{if(n){l(!0);try{await S0(n,{photoURL:null}),await r({photoURL:null}),ee.success("Photo de profil supprimée"),a(!1)}catch(b){console.error("Erreur lors de la suppression:",b),ee.error("Erreur lors de la suppression de la photo")}finally{l(!1)}}},j=()=>{f(null),u(null),m.current&&(m.current.value="")};return s.jsxs(Ri,{open:i,onOpenChange:a,children:[s.jsx(Ec,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(Ki,{className:"h-20 w-20",children:[s.jsx(Yi,{src:t||""}),s.jsx(Qi,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((y=e[0])==null?void 0:y.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Wo,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(Wo,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Js,{className:"max-w-md",children:[s.jsx(Di,{children:s.jsxs(ei,{className:"flex items-center gap-2",children:[s.jsx(Wo,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(Ki,{className:"h-32 w-32",children:[s.jsx(Yi,{src:c||t||""}),s.jsx(Qi,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((g=e[0])==null?void 0:g.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:v,className:"hidden"}),d?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:d.name}),s.jsxs("p",{children:[(d.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{onClick:j,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx($,{onClick:x,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(W0,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs($,{onClick:()=>{var b;return(b=m.current)==null?void 0:b.click()},variant:"outline",className:"w-full",children:[s.jsx(W0,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs($,{onClick:w,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(H0,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),s.jsx("p",{children:"• Taille maximale : 5MB"}),s.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},Co=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ose=()=>{const{currentUser:t,userProfile:e}=Yt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[d,f]=p.useState({profile:!1,listings:!0,reviews:!0,favorites:!0}),[m,v]=p.useState([]);p.useEffect(()=>{t&&(x(),w(),j())},[t]);const x=async()=>{var b;if(t)try{f(I=>({...I,listings:!0}));const E=qt(vt(Ne,"listings"),hn("sellerId","==",t.uid),es(20)),S=await fn(E),M=[];S.forEach(I=>{const A=I.data();M.push({id:I.id,...A,createdAt:Co(A.createdAt),updatedAt:Co(A.updatedAt)})}),M.sort((I,A)=>A.createdAt.getTime()-I.createdAt.getTime()),r(M);const k=M.filter(I=>I.status==="active");u(I=>({...I,totalListings:M.length,activeListings:k.length}))}catch(E){console.error("Erreur lors du chargement des annonces:",E),(b=E.message)!=null&&b.includes("index")&&v(S=>[...S,"listings"])}finally{f(E=>({...E,listings:!1}))}},w=async()=>{var b;if(t)try{f(A=>({...A,reviews:!0}));const E=qt(vt(Ne,"reviews"),hn("revieweeId","==",t.uid),es(10)),S=await fn(E),M=[];S.forEach(A=>{const N=A.data();M.push({id:A.id,...N,createdAt:Co(N.createdAt)})}),M.sort((A,N)=>N.createdAt.getTime()-A.createdAt.getTime()),a(M);const k=M.reduce((A,N)=>A+N.rating,0),I=M.length>0?k/M.length:0;u(A=>({...A,totalReviews:M.length,averageRating:Math.round(I*10)/10}))}catch(E){console.error("Erreur lors du chargement des avis:",E),(b=E.message)!=null&&b.includes("index")&&v(S=>[...S,"reviews"])}finally{f(E=>({...E,reviews:!1}))}},j=async()=>{var b;if(t)try{f(k=>({...k,favorites:!0}));const E=qt(vt(Ne,"favorites"),hn("userId","==",t.uid),es(20)),S=await fn(E),M=[];if(S.forEach(k=>{const I=k.data();M.push({id:k.id,...I,createdAt:Co(I.createdAt)})}),M.sort((k,I)=>I.createdAt.getTime()-k.createdAt.getTime()),u(k=>({...k,totalFavorites:M.length})),M.length>0){const k=M.slice(0,6).map(async A=>{try{const N=await Pi(lt(Ne,"listings",A.listingId));if(N.exists()){const P=N.data();return{id:N.id,...P,createdAt:Co(P.createdAt),updatedAt:Co(P.updatedAt)}}return null}catch(N){return console.error("Erreur lors du chargement d'une annonce favorite:",N),null}}),I=await Promise.all(k);l(I.filter(A=>A!==null))}}catch(E){console.error("Erreur lors du chargement des favoris:",E),(b=E.message)!=null&&b.includes("index")&&v(S=>[...S,"favorites"])}finally{f(E=>({...E,favorites:!1}))}},y=b=>{if(!b)return"Date inconnue";try{const E=Co(b);return isNaN(E.getTime())?"Date invalide":_u(E,{addSuffix:!0,locale:Kn})}catch{return"Date invalide"}},g=b=>Array.from({length:5},(E,S)=>s.jsx(ka,{className:`h-4 w-4 ${S<b?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},S));return d.listings||d.reviews||d.favorites,t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[m.length>0&&s.jsxs(ft,{className:"border-orange-200 bg-orange-50",children:[s.jsx(wc,{className:"h-4 w-4 text-orange-600"}),s.jsx(mt,{className:"text-orange-800",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:"⚡ Chargement optimisé activé"}),s.jsx("p",{className:"text-sm",children:"Certaines fonctionnalités utilisent un mode de chargement optimisé. Les données sont triées côté client pour de meilleures performances."}),s.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open("https://console.firebase.google.com/project/annonces-app-44d27/firestore/indexes","_blank"),className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[s.jsx(or,{className:"h-3 w-3 mr-1"}),"Optimiser la base de données"]})]})})]}),s.jsx(H,{children:s.jsx(je,{children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(FO,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(pt,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ee,{className:"text-2xl",children:(e==null?void 0:e.displayName)||"Utilisateur"}),(e==null?void 0:e.isVerified)&&s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(pt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx(tt,{className:"text-base",children:t.email}),(e==null?void 0:e.university)&&s.jsxs("div",{className:"flex items-center mt-2 text-muted-foreground",children:[s.jsx(hr,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:e.university})]}),(e==null?void 0:e.location)&&s.jsxs("div",{className:"flex items-center mt-1 text-muted-foreground",children:[s.jsx(ir,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:e.location})]}),s.jsxs("div",{className:"flex items-center mt-1 text-muted-foreground",children:[s.jsx(gs,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",y(e==null?void 0:e.createdAt)]})]}),(e==null?void 0:e.co2Saved)&&e.co2Saved>0&&s.jsxs("div",{className:"flex items-center mt-1 text-green-600",children:[s.jsx(bs,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[e.co2Saved," kg CO₂ économisés"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ft,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):c.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Jh,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):c.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ka,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):c.averageRating||"—"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(lr,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):c.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(kl,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(yo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"listings",className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4"}),"Mes Annonces",!d.listings&&c.totalListings>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:c.totalListings})]}),s.jsxs(Ot,{value:"reviews",className:"flex items-center gap-2",children:[s.jsx(ka,{className:"w-4 h-4"}),"Avis Reçus",!d.reviews&&c.totalReviews>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:c.totalReviews})]}),s.jsxs(Ot,{value:"favorites",className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-4 h-4"}),"Favoris",!d.favorites&&c.totalFavorites>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:c.totalFavorites})]})]}),s.jsx(Lt,{value:"listings",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(tt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(G,{children:d.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((b,E)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(G,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},E))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx($,{asChild:!0,children:s.jsx("a",{href:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(b=>s.jsx(fh,{listing:b},b.id))})})]})}),s.jsx(Lt,{value:"reviews",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ka,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(tt,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(G,{children:d.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((b,E)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((S,M)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},M))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},E))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Wt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(b=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:g(b.rating)}),s.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[b.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:y(b.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed",children:b.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Par ",b.reviewerName||"Utilisateur anonyme"]}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:b.reviewType==="buyer"?"Acheteur":"Vendeur"})]})]},b.id))})})]})}),s.jsx(Lt,{value:"favorites",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(tt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(G,{children:d.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((b,E)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(G,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},E))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(lr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx($,{asChild:!0,children:s.jsx("a",{href:"/listings",children:"Explorer les annonces"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(b=>s.jsx(fh,{listing:b},b.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var Oj="Switch",[Lse,Dae]=qr(Oj),[Vse,Fse]=Lse(Oj),UO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,v]=p.useState(null),x=We(e,b=>v(b)),w=p.useRef(!1),j=m?d||!!m.closest("form"):!0,[y=!1,g]=$r({prop:i,defaultProp:a,onChange:u});return s.jsxs(Vse,{scope:n,checked:y,disabled:l,children:[s.jsx(_e.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":BO(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:x,onClick:le(t.onClick,b=>{g(E=>!E),j&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),j&&s.jsx(Use,{control:m,bubbles:!w.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});UO.displayName=Oj;var $O="SwitchThumb",zO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Fse($O,n);return s.jsx(_e.span,{"data-state":BO(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});zO.displayName=$O;var Use=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,a=p.useRef(null),o=Iv(n),l=yv(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BO(t){return t?"checked":"unchecked"}var qO=UO,$se=zO;const yn=p.forwardRef(({className:t,...e},n)=>s.jsx(qO,{className:Pe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx($se,{className:Pe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));yn.displayName=qO.displayName;const zse=Le.object({displayName:Le.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:Le.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:Le.string().optional(),university:Le.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Le.number().min(2020).max(2035),campus:Le.string().optional(),location:Le.string().optional()}),Bse=Le.object({currentPassword:Le.string().min(6,"Le mot de passe actuel est requis"),newPassword:Le.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:Le.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),qse=Le.object({newEmail:Le.string().email("Email invalide"),password:Le.string().min(6,"Mot de passe requis pour changer l'email")}),Wse=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],Hse=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],Gse=()=>{var F,W,Y,L,O,B;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=Yt(),i=Vn(),[a,o]=p.useState("profile"),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState(!1),[v,x]=p.useState(!1),[w,j]=p.useState(""),[y,g]=p.useState({email:((F=e==null?void 0:e.notificationPreferences)==null?void 0:F.email)??!0,push:((W=e==null?void 0:e.notificationPreferences)==null?void 0:W.push)??!0,sms:((Y=e==null?void 0:e.notificationPreferences)==null?void 0:Y.sms)??!1,alerts:((L=e==null?void 0:e.notificationPreferences)==null?void 0:L.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[b,E]=p.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),S=Ko({resolver:Yo(zse),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),M=Ko({resolver:Yo(Bse)}),k=Ko({resolver:Yo(qse)});p.useEffect(()=>{var U,Q,ie,Ce;e&&(S.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),g({email:((U=e.notificationPreferences)==null?void 0:U.email)??!0,push:((Q=e.notificationPreferences)==null?void 0:Q.push)??!0,sms:((ie=e.notificationPreferences)==null?void 0:ie.sms)??!1,alerts:((Ce=e.notificationPreferences)==null?void 0:Ce.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,S]);const I=async U=>{c(!0);try{await n({displayName:U.displayName,bio:U.bio||null,phone:U.phone||null,university:U.university,fieldOfStudy:U.fieldOfStudy,graduationYear:U.graduationYear,campus:U.campus||null,location:U.location||null}),ee.success("Profil mis à jour avec succès !")}catch(Q){console.error("Erreur lors de la mise à jour du profil:",Q),ee.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}},A=async()=>{c(!0);try{await n({notificationPreferences:{email:y.email,push:y.push,sms:y.sms,alerts:y.alerts}}),ee.success("Préférences de notification mises à jour !")}catch(U){console.error("Erreur lors de la mise à jour des notifications:",U),ee.error("Erreur lors de la mise à jour des notifications")}finally{c(!1)}},N=async U=>{if(t){c(!0);try{const Q=Ha.credential(t.email,U.currentPassword);await k2(t,Q),await uU(t,U.newPassword),ee.success("Mot de passe mis à jour avec succès !"),m(!1),M.reset()}catch(Q){console.error("Erreur lors du changement de mot de passe:",Q),Q.code==="auth/wrong-password"?ee.error("Mot de passe actuel incorrect"):ee.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},P=async U=>{if(t){c(!0);try{const Q=Ha.credential(t.email,U.password);await k2(t,Q),await cU(t,U.newEmail),await n({email:U.newEmail}),ee.success("Email mis à jour avec succès !"),x(!1),k.reset()}catch(Q){console.error("Erreur lors du changement d'email:",Q),Q.code==="auth/wrong-password"?ee.error("Mot de passe incorrect"):Q.code==="auth/email-already-in-use"?ee.error("Cet email est déjà utilisé"):ee.error("Erreur lors du changement d'email")}finally{c(!1)}}},R=async()=>{if(!(!t||w!=="SUPPRIMER")){c(!0);try{const U=SB(Ne),Q=["listings","conversations","reviews","favorites","reports"];for(const ie of Q){const Ce=qt(vt(Ne,ie),hn("userId","==",t.uid));(await fn(Ce)).forEach(xt=>{U.delete(xt.ref)})}U.delete(lt(Ne,"users",t.uid)),await U.commit(),await pU(t),ee.success("Compte supprimé avec succès"),i("/")}catch(U){console.error("Erreur lors de la suppression du compte:",U),ee.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},T=async()=>{if(t){c(!0);try{const U={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},Q=qt(vt(Ne,"listings"),hn("sellerId","==",t.uid)),ie=await fn(Q);U.listings=ie.docs.map(He=>({id:He.id,...He.data()}));const Ce=qt(vt(Ne,"conversations"),hn("participants","array-contains",t.uid)),Xe=await fn(Ce);U.conversations=Xe.docs.map(He=>({id:He.id,...He.data()}));const xt=qt(vt(Ne,"reviews"),hn("revieweeId","==",t.uid)),ut=await fn(xt);U.reviews=ut.docs.map(He=>({id:He.id,...He.data()}));const ge=qt(vt(Ne,"favorites"),hn("userId","==",t.uid)),Qe=await fn(ge);U.favorites=Qe.docs.map(He=>({id:He.id,...He.data()}));const X=JSON.stringify(U,null,2),de=new Blob([X],{type:"application/json"}),Te=URL.createObjectURL(de),Oe=document.createElement("a");Oe.href=Te,Oe.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,Oe.click(),URL.revokeObjectURL(Te),ee.success("Données exportées avec succès !")}catch(U){console.error("Erreur lors de l'export des données:",U),ee.error("Erreur lors de l'export des données")}finally{c(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(dv,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(kl,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(yo,{className:"grid w-full grid-cols-5",children:[s.jsxs(Ot,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(Ot,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(fs,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(Ot,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Wc,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(Ot,{value:"security",className:"flex items-center gap-2",children:[s.jsx(pt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(Ot,{value:"data",className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(Lt,{value:"profile",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(tt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(FO,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Qr,{}),s.jsxs("form",{onSubmit:S.handleSubmit(I),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(ke,{id:"displayName",...S.register("displayName"),placeholder:"Votre nom complet"}),S.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"phone",children:"Téléphone"}),s.jsx(ke,{id:"phone",type:"tel",...S.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"bio",children:"Biographie"}),s.jsx(js,{id:"bio",...S.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((O=S.watch("bio"))==null?void 0:O.length)||0,"/500 caractères"]})]}),s.jsx(Qr,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Zh,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"university",children:"Université *"}),s.jsxs(St,{value:S.watch("university"),onValueChange:U=>S.setValue("university",U),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:Wse.map(U=>s.jsx(we,{value:U,children:U},U))})]}),S.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(St,{value:S.watch("fieldOfStudy"),onValueChange:U=>S.setValue("fieldOfStudy",U),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre filière"})}),s.jsx(bt,{children:Hse.map(U=>s.jsx(we,{value:U,children:U},U))})]}),S.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(St,{value:(B=S.watch("graduationYear"))==null?void 0:B.toString(),onValueChange:U=>S.setValue("graduationYear",parseInt(U)),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année de diplôme"})}),s.jsx(bt,{children:Array.from({length:16},(U,Q)=>2020+Q).map(U=>s.jsx(we,{value:U.toString(),children:U},U))})]}),S.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"campus",children:"Campus"}),s.jsx(ke,{id:"campus",...S.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"location",children:"Localisation"}),s.jsx(ke,{id:"location",...S.register("location"),placeholder:"Paris, France"})]}),s.jsx($,{type:"submit",disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(Lt,{value:"notifications",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(fs,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(tt,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(yn,{checked:y.email,onCheckedChange:U=>g(Q=>({...Q,email:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(El,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(yn,{checked:y.push,onCheckedChange:U=>g(Q=>({...Q,push:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mu,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(yn,{checked:y.sms,onCheckedChange:U=>g(Q=>({...Q,sms:U})),disabled:!0})]})]})]}),s.jsx(Qr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wt,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(yn,{checked:y.messages,onCheckedChange:U=>g(Q=>({...Q,messages:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ft,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(yn,{checked:y.listings,onCheckedChange:U=>g(Q=>({...Q,listings:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ka,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(yn,{checked:y.reviews,onCheckedChange:U=>g(Q=>({...Q,reviews:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fs,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(yn,{checked:y.alerts,onCheckedChange:U=>g(Q=>({...Q,alerts:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(dW,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(yn,{checked:y.marketing,onCheckedChange:U=>g(Q=>({...Q,marketing:U}))})]})]})]}),s.jsx($,{onClick:A,disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(Lt,{value:"privacy",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Wc,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(tt,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(yn,{checked:b.profileVisibility==="public",onCheckedChange:U=>E(Q=>({...Q,profileVisibility:U?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(yn,{checked:b.showEmail,onCheckedChange:U=>E(Q=>({...Q,showEmail:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(yn,{checked:b.showPhone,onCheckedChange:U=>E(Q=>({...Q,showPhone:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(yn,{checked:b.showUniversity,onCheckedChange:U=>E(Q=>({...Q,showUniversity:U}))})]})]})]}),s.jsx(Qr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(yn,{checked:b.allowMessages,onCheckedChange:U=>E(Q=>({...Q,allowMessages:U}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(yn,{checked:b.showOnlineStatus,onCheckedChange:U=>E(Q=>({...Q,showOnlineStatus:U}))})]})]})]}),s.jsxs(ft,{children:[s.jsx(pt,{className:"h-4 w-4"}),s.jsx(mt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(Lt,{value:"security",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(tt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Sr,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(Ri,{open:v,onOpenChange:x,children:[s.jsx(Ec,{asChild:!0,children:s.jsx($,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Js,{children:[s.jsxs(Di,{children:[s.jsx(ei,{children:"Changer l'adresse email"}),s.jsx(Sc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:k.handleSubmit(P),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(ke,{id:"newEmail",type:"email",...k.register("newEmail"),placeholder:"nouveau@email.com"}),k.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(ke,{id:"emailPassword",type:"password",...k.register("password"),placeholder:"••••••••"}),k.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.password.message})]}),s.jsxs(Hm,{children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Annuler"}),s.jsxs($,{type:"submit",disabled:l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ul,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(Ri,{open:f,onOpenChange:m,children:[s.jsx(Ec,{asChild:!0,children:s.jsx($,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Js,{children:[s.jsxs(Di,{children:[s.jsx(ei,{children:"Changer le mot de passe"}),s.jsx(Sc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:M.handleSubmit(N),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(ke,{id:"currentPassword",type:"password",...M.register("currentPassword"),placeholder:"••••••••"}),M.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(ke,{id:"newPassword",type:"password",...M.register("newPassword"),placeholder:"••••••••"}),M.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(ke,{id:"confirmPassword",type:"password",...M.register("confirmPassword"),placeholder:"••••••••"}),M.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.confirmPassword.message})]}),s.jsxs(Hm,{children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsxs($,{type:"submit",disabled:l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(oW,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Qr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(Ae,{className:"bg-green-100 text-green-800",children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(Ae,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(ft,{children:[s.jsx(pt,{className:"h-4 w-4"}),s.jsx(mt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(Lt,{value:"data",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(tt,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs($,{onClick:T,disabled:l,variant:"outline",children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ts,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(Qr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(ft,{className:"border-destructive",children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx(mt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(Ri,{open:u,onOpenChange:d,children:[s.jsx(Ec,{asChild:!0,children:s.jsxs($,{variant:"destructive",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Js,{children:[s.jsxs(Di,{children:[s.jsx(ei,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(Sc,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(ke,{id:"deleteConfirm",value:w,onChange:U=>j(U.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(Hm,{children:[s.jsx($,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),s.jsxs($,{variant:"destructive",onClick:R,disabled:w!=="SUPPRIMER"||l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(zp,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(G,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx($,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx($,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx($,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx($,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function Kse(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...x}=f,w=(m==null?void 0:m[t][c])||l,j=p.useMemo(()=>x,Object.values(x));return s.jsx(w.Provider,{value:j,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Yse(i,...e)]}function Yse(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Lj="Progress",Vj=100,[Qse,Mae]=Kse(Lj),[Xse,Zse]=Qse(Lj),WO=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=Jse,...o}=t;(i||i===0)&&!XS(i)&&console.error(eie(`${i}`,"Progress"));const l=XS(i)?i:Vj;r!==null&&!ZS(r,l)&&console.error(tie(`${r}`,"Progress"));const c=ZS(r,l)?r:null,u=gg(c)?a(c,l):void 0;return s.jsx(Xse,{scope:n,value:c,max:l,children:s.jsx(_e.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":gg(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":KO(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});WO.displayName=Lj;var HO="ProgressIndicator",GO=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Zse(HO,n);return s.jsx(_e.div,{"data-state":KO(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});GO.displayName=HO;function Jse(t,e){return`${Math.round(t/e*100)}%`}function KO(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function gg(t){return typeof t=="number"}function XS(t){return gg(t)&&!isNaN(t)&&t>0}function ZS(t,e){return gg(t)&&!isNaN(t)&&t<=e&&t>=0}function eie(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Vj}\`.`}function tie(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Vj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var YO=WO,nie=GO;const QO=p.forwardRef(({className:t,value:e,...n},r)=>s.jsx(YO,{ref:r,className:Pe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(nie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));QO.displayName=YO.displayName;const To={electronics:{category:"Électronique",icon:El,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:wA,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:qp,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Fb,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},rie=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Bl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},sie=()=>{const{currentUser:t,userProfile:e}=Yt(),[n,r]=p.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const g=qt(vt(Ne,"listings"),hn("sellerId","==",t.uid)),b=await fn(g),E=[];b.forEach(M=>{const k=M.data();E.push({id:M.id,...k,createdAt:Bl(k.createdAt),updatedAt:Bl(k.updatedAt)})}),a(E);const S=f(E,c);r(S),await w(S)}catch(g){console.error("Erreur lors du chargement des données environnementales:",g)}finally{l(!1)}}},f=(g,b)=>{const E=new Date;let S=g;if(b==="month"){const W=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());S=g.filter(Y=>Bl(Y.createdAt)>=W)}else if(b==="year"){const W=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());S=g.filter(Y=>Bl(Y.createdAt)>=W)}let M=0,k=0,I=0,A=0;const N={};S.forEach(W=>{const Y=To[W.category]||To.electronics,L=1;let O=1;W.transactionType==="donation"?O=1.2:W.transactionType==="exchange"&&(O=.8),M+=Y.co2PerItem*L*O,k+=Y.waterPerItem*L*O,I+=Y.energyPerItem*L*O,A+=Y.wastePerItem*L*O,N[W.category]=(N[W.category]||0)+1});const P=m(g),R=v(g,M,k),{rank:T,percentile:F}=x(M,g.length);return{totalCo2Saved:Math.round(M*10)/10,totalWaterSaved:Math.round(k),totalEnergySaved:Math.round(I*10)/10,totalWasteAvoided:Math.round(A*10)/10,transactionsByCategory:N,monthlyImpact:P,badges:R,rank:T,percentile:F}},m=g=>{const b={};for(let E=11;E>=0;E--){const S=new Date;S.setMonth(S.getMonth()-E);const M=S.toISOString().slice(0,7);b[M]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return g.forEach(E=>{const M=Bl(E.createdAt).toISOString().slice(0,7);if(b[M]){const k=To[E.category]||To.electronics;let I=1;E.transactionType==="donation"?I=1.2:E.transactionType==="exchange"&&(I=.8),b[M].co2Saved+=k.co2PerItem*I,b[M].waterSaved+=k.waterPerItem*I,b[M].energySaved+=k.energyPerItem*I,b[M].transactions+=1}}),Object.entries(b).map(([E,S])=>({month:E,co2Saved:Math.round(S.co2Saved*10)/10,transactions:S.transactions,waterSaved:Math.round(S.waterSaved),energySaved:Math.round(S.energySaved*10)/10}))},v=(g,b,E)=>{const S=[];g.length>=1&&S.push("first_transaction"),b>=10&&S.push("co2_saver_10"),b>=50&&S.push("co2_saver_50"),b>=100&&S.push("co2_saver_100"),E>=1e3&&S.push("water_saver"),g.length>=20&&S.push("recycling_master"),g.filter(A=>A.transactionType==="donation").length>=5&&S.push("donation_hero");const k=new Date().toISOString().slice(0,7);return g.filter(A=>Bl(A.createdAt).toISOString().slice(0,7)===k).length>=10&&S.push("monthly_champion"),S},x=(g,b)=>{let E="Débutant",S=0;return g>=200?(E="Légende Écologique",S=95):g>=100?(E="Maître Environnemental",S=85):g>=50?(E="Expert Vert",S=70):g>=25?(E="Éco-Warrior",S=50):g>=10?(E="Protecteur",S=30):g>=5&&(E="Apprenti Vert",S=15),{rank:E,percentile:S}},w=async g=>{if(t)try{const b=lt(Ne,"users",t.uid);await ar(b,{co2Saved:g.totalCo2Saved,environmentalRank:g.rank,environmentalBadges:g.badges,lastEnvironmentalUpdate:new Date})}catch(b){console.error("Erreur lors de la mise à jour des données environnementales:",b)}},j=async()=>{const g=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:g,url:window.location.origin})}catch{navigator.clipboard.writeText(g)}else navigator.clipboard.writeText(g)},y=()=>{const g={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:c},b=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),E=URL.createObjectURL(b),S=document.createElement("a");S.href=E,S.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,S.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(bs,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[s.jsx(Vb,{className:"w-4 h-4"}),"Partager"]}),s.jsxs($,{variant:"outline",onClick:y,className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gs,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(g=>s.jsx($,{variant:c===g.key?"default":"outline",size:"sm",onClick:()=>u(g.key),children:g.label},g.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((g,b)=>s.jsx(H,{className:"animate-pulse",children:s.jsx(G,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},b))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(H,{className:"border-green-200 bg-green-50/50",children:s.jsxs(G,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(bs,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(H,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(G,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ME,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(H,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(G,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(pu,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(H,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(G,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(fW,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(xA,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(G,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(QO,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(kl,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(yo,{className:"grid w-full grid-cols-4",children:[s.jsx(Ot,{value:"overview",children:"Vue d'ensemble"}),s.jsx(Ot,{value:"categories",children:"Par catégorie"}),s.jsx(Ot,{value:"badges",children:"Badges"}),s.jsx(Ot,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(Lt,{value:"overview",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(NA,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(tt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(G,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((g,b)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(g.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[g.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[g.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:g.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},g.month))})})]}),s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(SA,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(tt,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(G,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(_A,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(vW,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(rW,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(ME,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(Lt,{value:"categories",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(tt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(G,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([g,b])=>{const E=To[g]||To.electronics,S=E.icon,M=b*E.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(S,{className:`w-5 h-5 ${E.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:E.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[b," transaction",b>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(M*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(b*E.waterPerItem)," L eau"]})]})]},g)})})})]})}),s.jsx(Lt,{value:"badges",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(q0,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(tt,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(G,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:rie.map(g=>{const b=n.badges.includes(g.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${b?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:g.icon}),s.jsx("h3",{className:`font-semibold ${b?"text-green-800":"text-gray-600"}`,children:g.name}),s.jsx("p",{className:`text-sm ${b?"text-green-600":"text-gray-500"}`,children:g.description}),b&&s.jsx(Ae,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},g.id)})})})]})}),s.jsx(Lt,{value:"methodology",className:"space-y-6",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(tt,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs(ft,{children:[s.jsx(Xa,{className:"h-4 w-4"}),s.jsx(mt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(To).map(([g,b])=>{const E=b.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(E,{className:`w-4 h-4 ${b.color}`}),s.jsx("span",{className:"font-medium",children:b.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[b.wastePerItem," kg"]})]})]})]},g)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hc,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qi,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(bs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},vm=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},vg=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(vg).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=vg(t[n]);r!==void 0&&(e[n]=r)}),e}return t},JS=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],eC=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],iie=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],aie=()=>{const{currentUser:t,userProfile:e}=Yt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=p.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,f]=p.useState(!1),[m,v]=p.useState(null),[x,w]=p.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});p.useEffect(()=>{t&&(j(),y())},[t]);const j=async()=>{if(t)try{u(F=>({...F,searches:!0}));const N=qt(vt(Ne,"savedSearches"),hn("userId","==",t.uid),es(50)),P=await fn(N),R=[];P.forEach(F=>{const W=F.data();R.push({id:F.id,...W,createdAt:vm(W.createdAt),updatedAt:vm(W.updatedAt),lastNotified:W.lastNotified?vm(W.lastNotified):void 0})}),R.sort((F,W)=>W.createdAt.getTime()-F.createdAt.getTime()),r(R);const T=R.filter(F=>F.alertsEnabled).length;l(F=>({...F,totalSearches:R.length,activeAlerts:T}))}catch(N){console.error("Erreur lors du chargement des recherches sauvegardées:",N),ee.error("Erreur lors du chargement des recherches sauvegardées")}finally{u(N=>({...N,searches:!1}))}},y=async()=>{if(t)try{u(F=>({...F,matches:!0}));const N=qt(vt(Ne,"alertMatches"),hn("userId","==",t.uid),es(100)),P=await fn(N),R=[];P.forEach(F=>{const W=F.data();R.push({id:F.id,...W,matchedAt:vm(W.matchedAt)})}),R.sort((F,W)=>W.matchedAt.getTime()-F.matchedAt.getTime()),a(R);const T=R.filter(F=>!F.seen).length;l(F=>({...F,totalMatches:R.length,newMatches:T}))}catch(N){console.error("Erreur lors du chargement des correspondances:",N),ee.error("Erreur lors du chargement des correspondances")}finally{u(N=>({...N,matches:!1}))}},g=async()=>{if(!t||!x.name.trim()){ee.error("Veuillez remplir le nom de la recherche");return}u(N=>({...N,creating:!0}));try{const N={};if(x.query&&x.query.trim()&&(N.query=x.query.trim()),x.category&&x.category!=="all"&&(N.category=x.category),x.transactionType&&x.transactionType!=="all"&&(N.transactionType=x.transactionType),x.university&&x.university!=="all"&&(N.university=x.university),x.minPrice&&x.minPrice.trim()){const T=parseFloat(x.minPrice);!isNaN(T)&&T>=0&&(N.minPrice=T)}if(x.maxPrice&&x.maxPrice.trim()){const T=parseFloat(x.maxPrice);!isNaN(T)&&T>=0&&(N.maxPrice=T)}const P={userId:t.uid,name:x.name.trim(),filters:N,alertsEnabled:x.alertsEnabled,notificationFrequency:x.notificationFrequency,notificationMethods:{email:x.notificationMethods.email,push:x.notificationMethods.push,sms:x.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},R=vg(P);await Qa(vt(Ne,"savedSearches"),R),ee.success("Alerte créée avec succès !"),f(!1),k(),j()}catch(N){console.error("Erreur lors de la création de l'alerte:",N),ee.error("Erreur lors de la création de l'alerte")}finally{u(N=>({...N,creating:!1}))}},b=async(N,P)=>{try{u(T=>({...T,updating:!0}));const R=vg({...P,updatedAt:new Date});await ar(lt(Ne,"savedSearches",N),R),ee.success("Recherche mise à jour !"),j()}catch(R){console.error("Erreur lors de la mise à jour:",R),ee.error("Erreur lors de la mise à jour")}finally{u(R=>({...R,updating:!1}))}},E=async N=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Bc(lt(Ne,"savedSearches",N)),ee.success("Recherche supprimée !"),j()}catch(P){console.error("Erreur lors de la suppression:",P),ee.error("Erreur lors de la suppression")}},S=async(N,P)=>{await b(N,{alertsEnabled:P})},M=async N=>{try{await ar(lt(Ne,"alertMatches",N),{seen:!0,seenAt:new Date}),y()}catch(P){console.error("Erreur lors du marquage comme vu:",P)}},k=()=>{w({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),v(null)},I=N=>{try{return _u(N,{addSuffix:!0,locale:Kn})}catch{return"Date inconnue"}},A=N=>{const P=[];if(N.query&&P.push(`"${N.query}"`),N.category&&N.category!=="all"){const R=JS.find(T=>T.value===N.category);R&&P.push(R.label)}if(N.transactionType&&N.transactionType!=="all"){const R=eC.find(T=>T.value===N.transactionType);R&&P.push(R.label)}return N.minPrice!==void 0&&P.push(`≥ ${N.minPrice}€`),N.maxPrice!==void 0&&P.push(`≤ ${N.maxPrice}€`),P.length>0?P.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(fs,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(Ri,{open:d,onOpenChange:f,children:[s.jsx(Ec,{asChild:!0,children:s.jsxs($,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Js,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Di,{children:[s.jsxs(ei,{className:"flex items-center gap-2",children:[s.jsx(Eo,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(Sc,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(ke,{id:"alert-name",value:x.name,onChange:N=>w(P=>({...P,name:N.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(uv,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(ke,{id:"search-query",value:x.query,onChange:N=>w(P=>({...P,query:N.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(St,{value:x.category,onValueChange:N=>w(P=>({...P,category:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:JS.map(N=>s.jsx(we,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(St,{value:x.transactionType,onValueChange:N=>w(P=>({...P,transactionType:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:eC.map(N=>s.jsx(we,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-university",children:"Université"}),s.jsxs(St,{value:x.university,onValueChange:N=>w(P=>({...P,university:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:iie.map(N=>s.jsx(we,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(ke,{id:"min-price",type:"number",value:x.minPrice,onChange:N=>w(P=>({...P,minPrice:N.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(ke,{id:"max-price",type:"number",value:x.maxPrice,onChange:N=>w(P=>({...P,maxPrice:N.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(fs,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(yn,{id:"alerts-enabled",checked:x.alertsEnabled,onCheckedChange:N=>w(P=>({...P,alertsEnabled:N}))})]}),x.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(oe,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(N=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:N.value,name:"frequency",value:N.value,checked:x.notificationFrequency===N.value,onChange:P=>w(R=>({...R,notificationFrequency:P.target.value})),className:"rounded border-border"}),s.jsx(oe,{htmlFor:N.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:N.description})]})})]},N.value))})]}),s.jsxs("div",{children:[s.jsx(oe,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sr,{className:"w-4 h-4 text-blue-600"}),s.jsx(oe,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(yn,{id:"email-notifications",checked:x.notificationMethods.email,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,email:N}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fs,{className:"w-4 h-4 text-green-600"}),s.jsx(oe,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(yn,{id:"push-notifications",checked:x.notificationMethods.push,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,push:N}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(OE,{className:"w-4 h-4 text-purple-600"}),s.jsx(oe,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(yn,{id:"sms-notifications",checked:x.notificationMethods.sms,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,sms:N}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx($,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx($,{onClick:g,disabled:c.creating||!x.name.trim(),children:c.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(Rn,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(fs,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(Eo,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(pu,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(kl,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(yo,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ot,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(Ot,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(Eo,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(Ae,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(Lt,{value:"searches",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Lb,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(tt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(G,{children:c.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((N,P)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},P))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Rn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs($,{onClick:()=>f(!0),children:[s.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(N=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:N.name}),N.alertsEnabled?s.jsxs(Ae,{className:"bg-green-100 text-green-800",children:[s.jsx(fs,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(Ae,{variant:"secondary",children:[s.jsx(LE,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A(N.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),"Créé ",I(N.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Eo,{className:"w-3 h-3"}),N.matchCount," correspondance",N.matchCount!==1?"s":""]}),N.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fs,{className:"w-3 h-3"}),"Dernière alerte ",I(N.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($,{variant:"ghost",size:"icon",onClick:()=>S(N.id,!N.alertsEnabled),title:N.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:N.alertsEnabled?s.jsx(LE,{className:"w-4 h-4"}):s.jsx(hW,{className:"w-4 h-4"})}),s.jsx($,{variant:"ghost",size:"icon",onClick:()=>{var P,R;v(N),w({name:N.name,query:N.filters.query||"",category:N.filters.category||"all",transactionType:N.filters.transactionType||"all",university:N.filters.university||"all",minPrice:((P=N.filters.minPrice)==null?void 0:P.toString())||"",maxPrice:((R=N.filters.maxPrice)==null?void 0:R.toString())||"",alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:N.notificationMethods}),f(!0)},title:"Modifier",children:s.jsx(pW,{className:"w-4 h-4"})}),s.jsx($,{variant:"ghost",size:"icon",onClick:()=>E(N.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(Ai,{className:"w-4 h-4"})})]})]}),N.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",N.notificationFrequency==="instant"?"Instantané":N.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[N.notificationMethods.email&&s.jsx(Sr,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),N.notificationMethods.push&&s.jsx(fs,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),N.notificationMethods.sms&&s.jsx(OE,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},N.id))})})]})}),s.jsx(Lt,{value:"matches",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Eo,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(tt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(G,{children:c.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((N,P)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},P))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Eo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(N=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${N.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[N.listingImage?s.jsx("img",{src:N.listingImage,alt:N.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:N.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!N.seen&&s.jsx(Ae,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:N.listingPrice===0?"Gratuit":`${N.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),"Trouvé ",I(N.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>M(N.id),disabled:N.seen,children:N.seen?s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Wc,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs($,{size:"sm",onClick:()=>window.open(`/listing/${N.listingId}`,"_blank"),children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},N.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(Rn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},xm=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},tC=[{value:"all",label:"Toutes catégories",icon:Ft},{value:"electronics",label:"Électronique",icon:El},{value:"books",label:"Livres & Cours",icon:wA},{value:"furniture",label:"Mobilier",icon:qp},{value:"clothing",label:"Vêtements",icon:Fb},{value:"services",label:"Services",icon:ef},{value:"housing",label:"Logement",icon:qp},{value:"jobs",label:"Jobs & Stages",icon:jA}],oie=[{value:"all",label:"Tous types",icon:Ft},{value:"sale",label:"Vente",icon:Bp},{value:"donation",label:"Don",icon:Hc},{value:"exchange",label:"Échange",icon:qi},{value:"service",label:"Service",icon:ef}],lie=[{value:"recent",label:"Plus récents",icon:ln},{value:"oldest",label:"Plus anciens",icon:gs},{value:"price-asc",label:"Prix croissant",icon:DE},{value:"price-desc",label:"Prix décroissant",icon:vA},{value:"title",label:"Titre A-Z",icon:DE},{value:"category",label:"Par catégorie",icon:oh}],cie=()=>{const{currentUser:t,userProfile:e}=Yt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=p.useState({favorites:!0,listings:!0,removing:!1}),[d,f]=p.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,v]=p.useState("recent"),[x,w]=p.useState("grid"),[j,y]=p.useState([]);p.useEffect(()=>{t&&g()},[t]),p.useEffect(()=>{n.length>0&&b()},[n]);const g=async()=>{if(t)try{u(Y=>({...Y,favorites:!0}));const T=qt(vt(Ne,"favorites"),hn("userId","==",t.uid),es(100)),F=await fn(T),W=[];F.forEach(Y=>{const L=Y.data();W.push({id:Y.id,...L,createdAt:xm(L.createdAt),updatedAt:xm(L.updatedAt)})}),W.sort((Y,L)=>L.createdAt.getTime()-Y.createdAt.getTime()),r(W),E(W)}catch(T){console.error("Erreur lors du chargement des favoris:",T),ee.error("Erreur lors du chargement des favoris")}finally{u(T=>({...T,favorites:!1}))}},b=async()=>{try{u(Y=>({...Y,listings:!0}));const T=n.map(async Y=>{try{const L=await Pi(lt(Ne,"listings",Y.listingId));if(L.exists()){const O=L.data();return{id:L.id,...O,createdAt:xm(O.createdAt),updatedAt:xm(O.updatedAt)}}return null}catch(L){return console.error(`Erreur lors du chargement de l'annonce ${Y.listingId}:`,L),null}}),W=(await Promise.all(T)).filter(Y=>Y!==null);a(W)}catch(T){console.error("Erreur lors du chargement des annonces favorites:",T)}finally{u(T=>({...T,listings:!1}))}},E=T=>{const F={},W={};let Y=0,L=0;const O=new Date;O.setDate(O.getDate()-7);let B=0;T.forEach(U=>{F[U.listingCategory]=(F[U.listingCategory]||0)+1,W[U.listingTransactionType]=(W[U.listingTransactionType]||0)+1,U.listingPrice>0&&(Y+=U.listingPrice,L++),U.createdAt>=O&&B++}),l({totalFavorites:T.length,byCategory:F,byTransactionType:W,averagePrice:L>0?Math.round(Y/L):0,recentlyAdded:B,availableCount:T.length,soldCount:0})},S=async T=>{try{await Bc(lt(Ne,"favorites",T)),ee.success("Favori supprimé"),g()}catch(F){console.error("Erreur lors de la suppression:",F),ee.error("Erreur lors de la suppression")}},M=async()=>{if(j.length!==0&&window.confirm(`Supprimer ${j.length} favori(s) sélectionné(s) ?`)){u(T=>({...T,removing:!0}));try{const T=j.map(F=>Bc(lt(Ne,"favorites",F)));await Promise.all(T),ee.success(`${j.length} favori(s) supprimé(s)`),y([]),g()}catch(T){console.error("Erreur lors de la suppression multiple:",T),ee.error("Erreur lors de la suppression")}finally{u(T=>({...T,removing:!1}))}}},k=()=>{const T={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(L=>({title:L.listingTitle,price:L.listingPrice,category:L.listingCategory,transactionType:L.listingTransactionType,seller:L.sellerName,university:L.sellerUniversity,addedDate:L.createdAt.toISOString(),notes:L.notes||"",tags:L.tags}))},F=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),W=URL.createObjectURL(F),Y=document.createElement("a");Y.href=W,Y.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,Y.click(),URL.revokeObjectURL(W)},I=async()=>{const T=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:T,url:window.location.origin})}catch{navigator.clipboard.writeText(T),ee.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(T),ee.success("Lien copié dans le presse-papiers")},A=()=>{let T=n;if(d.search){const F=d.search.toLowerCase();T=T.filter(W=>W.listingTitle.toLowerCase().includes(F)||W.sellerName.toLowerCase().includes(F)||W.tags.some(Y=>Y.toLowerCase().includes(F)))}if(d.category!=="all"&&(T=T.filter(F=>F.listingCategory===d.category)),d.transactionType!=="all"&&(T=T.filter(F=>F.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":T=T.filter(F=>F.listingPrice===0);break;case"under-50":T=T.filter(F=>F.listingPrice>0&&F.listingPrice<50);break;case"50-200":T=T.filter(F=>F.listingPrice>=50&&F.listingPrice<=200);break;case"over-200":T=T.filter(F=>F.listingPrice>200);break}switch(m){case"recent":T.sort((F,W)=>W.createdAt.getTime()-F.createdAt.getTime());break;case"oldest":T.sort((F,W)=>F.createdAt.getTime()-W.createdAt.getTime());break;case"price-asc":T.sort((F,W)=>F.listingPrice-W.listingPrice);break;case"price-desc":T.sort((F,W)=>W.listingPrice-F.listingPrice);break;case"title":T.sort((F,W)=>F.listingTitle.localeCompare(W.listingTitle));break;case"category":T.sort((F,W)=>F.listingCategory.localeCompare(W.listingCategory));break}return T},N=T=>{try{return _u(T,{addSuffix:!0,locale:Kn})}catch{return"Date inconnue"}},P=(T,F)=>F==="donation"?"Gratuit":F==="exchange"?"Échange":T===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(T),R=A();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(lr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[s.jsx(Vb,{className:"w-4 h-4"}),"Partager"]}),s.jsxs($,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(lr,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(Jh,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(pu,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(oh,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:T=>f(F=>({...F,search:T.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(St,{value:m,onValueChange:v,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{})}),s.jsx(bt,{children:lie.map(T=>s.jsx(we,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx($,{variant:x==="grid"?"default":"ghost",size:"icon",onClick:()=>w("grid"),className:"rounded-none",children:s.jsx(CA,{className:"w-4 h-4"})}),s.jsx($,{variant:x==="list"?"default":"ghost",size:"icon",onClick:()=>w("list"),className:"rounded-none",children:s.jsx(IA,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(St,{value:d.category,onValueChange:T=>f(F=>({...F,category:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Catégorie"})}),s.jsx(bt,{children:tC.map(T=>s.jsx(we,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs(St,{value:d.transactionType,onValueChange:T=>f(F=>({...F,transactionType:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Type"})}),s.jsx(bt,{children:oie.map(T=>s.jsx(we,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs(St,{value:d.priceRange,onValueChange:T=>f(F=>({...F,priceRange:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Prix"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Tous les prix"}),s.jsx(we,{value:"free",children:"Gratuit"}),s.jsx(we,{value:"under-50",children:"Moins de 50€"}),s.jsx(we,{value:"50-200",children:"50€ - 200€"}),s.jsx(we,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(St,{value:d.availability,onValueChange:T=>f(F=>({...F,availability:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Disponibilité"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Toutes"}),s.jsx(we,{value:"available",children:"Disponibles"}),s.jsx(we,{value:"sold",children:"Vendues"}),s.jsx(we,{value:"reserved",children:"Réservées"})]})]})]}),j.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[j.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>y([]),children:"Désélectionner"}),s.jsx($,{variant:"destructive",size:"sm",onClick:M,disabled:c.removing,children:c.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:c.favorites?s.jsx("div",{className:`grid gap-6 ${x==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((T,F)=>s.jsxs(H,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(G,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},F))}):R.length===0?s.jsx(H,{children:s.jsx(G,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(lr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx($,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(uv,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx($,{variant:"outline",onClick:()=>f({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[R.length," favori(s) trouvé(s)",R.length!==n.length&&` sur ${n.length}`]}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>{j.length===R.length?y([]):y(R.map(T=>T.id))},children:j.length===R.length?"Désélectionner tout":"Sélectionner tout"})]}),x==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(T=>{const F=i.find(W=>W.id===T.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:j.includes(T.id),onChange:W=>{W.target.checked?y(Y=>[...Y,T.id]):y(Y=>Y.filter(L=>L!==T.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx($,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>S(T.id),children:s.jsx(Ai,{className:"w-4 h-4"})})}),F?s.jsx(fh,{listing:F}):s.jsxs(H,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(wc,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(G,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:T.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P(T.listingPrice,T.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(T.createdAt)]})]})]})]},T.id)})}):s.jsx("div",{className:"space-y-4",children:R.map(T=>{var W;const F=i.find(Y=>Y.id===T.listingId);return s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsx(G,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:j.includes(T.id),onChange:Y=>{Y.target.checked?y(L=>[...L,T.id]):y(L=>L.filter(O=>O!==T.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:T.listingImage?s.jsx("img",{src:T.listingImage,alt:T.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(Ft,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:T.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:P(T.listingPrice,T.listingTransactionType)}),(F==null?void 0:F.status)&&s.jsx(Ae,{variant:F.status==="active"?"default":"secondary",children:F.status==="active"?"Disponible":F.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hr,{className:"w-3 h-3"}),T.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-3 h-3"}),T.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(oh,{className:"w-3 h-3"}),(W=tC.find(Y=>Y.value===T.listingCategory))==null?void 0:W.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(T.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${T.listingId}`,"_blank"),children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>S(T.id),className:"text-destructive hover:text-destructive",children:s.jsx(Ai,{className:"w-3 h-3"})})]})]})]})]})})},T.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(lr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},yy=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=Mv(),a=x=>{switch(x){case"pending":return ln;case"confirmed":return Je;case"completed":return Je;case"cancelled":return qc;case"disputed":return Jt;default:return ln}},o=x=>{switch(x){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=x=>{switch(x){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return x}},c=x=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[x]||x,u=(x,w)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:w||"EUR"}).format(x),d=(x,w)=>{navigator.clipboard.writeText(x),ee.success(`${w} copié dans le presse-papiers`)},f=async x=>{try{await r(t.id,x),n==null||n(x)}catch(w){console.error("Erreur lors de la mise à jour du statut:",w)}},m=a(t.status),v=i(t.paymentMethod,t);return s.jsxs(H,{className:"w-full",children:[s.jsx(je,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(an,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(Ee,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),s.jsxs(tt,{children:[u(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(Ae,{className:o(t.status),children:[s.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:_n(t.createdAt,"PPP à HH:mm",{locale:Kn})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:_n(t.updatedAt,"PPP à HH:mm",{locale:Kn})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(ir,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:_n(t.meetingDateTime,"PPP à HH:mm",{locale:Kn})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(pt,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx($,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de sécurité"),children:s.jsx(EA,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&v.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:v.map((x,w)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:x})]},w))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs($,{onClick:()=>f("confirmed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs($,{variant:"outline",onClick:()=>f("cancelled"),className:"flex-1",children:[s.jsx(qc,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs($,{onClick:()=>f("completed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs($,{onClick:()=>f("completed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs($,{variant:"outline",onClick:()=>f("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(ft,{children:[s.jsx(ln,{className:"h-4 w-4"}),s.jsx(mt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(ft,{className:"border-green-200 bg-green-50",children:[s.jsx(Je,{className:"h-4 w-4 text-green-600"}),s.jsx(mt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(ft,{className:"border-green-200 bg-green-50",children:[s.jsx(Je,{className:"h-4 w-4 text-green-600"}),s.jsx(mt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&s.jsxs(ft,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(mt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},uie=()=>{const{currentUser:t,userProfile:e}=Yt(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=Mv(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,f]=p.useState("all"),[m,v]=p.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});p.useEffect(()=>{a()},[a]),p.useEffect(()=>{t&&i(t.uid)},[t,i]),p.useEffect(()=>{x()},[n]);const x=()=>{const E={},S={};let M=0;n.forEach(k=>{E[k.paymentMethod]=(E[k.paymentMethod]||0)+1,S[k.status]=(S[k.status]||0)+1,M+=k.amount}),v({totalRequests:n.length,pendingRequests:S.pending||0,completedRequests:S.completed||0,totalAmount:M,averageAmount:n.length>0?M/n.length:0,byMethod:E,byStatus:S})},w=()=>n.filter(E=>{const S=!o||E.listingId.toLowerCase().includes(o.toLowerCase())||E.id.toLowerCase().includes(o.toLowerCase()),M=c==="all"||E.status===c,k=d==="all"||E.paymentMethod===d;return S&&M&&k}),j=()=>w().filter(E=>E.buyerId===(t==null?void 0:t.uid)),y=()=>w().filter(E=>E.sellerId===(t==null?void 0:t.uid)),g=E=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(E),b=()=>{const E={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:n.map(I=>({id:I.id,amount:I.amount,currency:I.currency,method:I.paymentMethod,status:I.status,role:I.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:I.createdAt.toISOString(),updatedAt:I.updatedAt.toISOString()}))},S=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),M=URL.createObjectURL(S),k=document.createElement("a");k.href=M,k.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,k.click(),URL.revokeObjectURL(M)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(yW,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs($,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(an,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(ln,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Je,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g(m.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(Jh,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),s.jsxs(St,{value:c,onValueChange:u,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Statut"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Tous les statuts"}),s.jsx(we,{value:"pending",children:"En attente"}),s.jsx(we,{value:"confirmed",children:"Confirmé"}),s.jsx(we,{value:"completed",children:"Terminé"}),s.jsx(we,{value:"cancelled",children:"Annulé"}),s.jsx(we,{value:"disputed",children:"Litige"})]})]}),s.jsxs(St,{value:d,onValueChange:f,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Méthode"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Toutes les méthodes"}),s.jsx(we,{value:"cash",children:"Espèces"}),s.jsx(we,{value:"transfer",children:"Virement"}),s.jsx(we,{value:"paypal",children:"PayPal"}),s.jsx(we,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(kl,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(yo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"all",className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsxs(Ot,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(Gx,{className:"w-4 h-4"}),"Mes achats",j().length>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:j().length})]}),s.jsxs(Ot,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(Hx,{className:"w-4 h-4"}),"Mes ventes",y().length>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:y().length})]})]}),s.jsx(Lt,{value:"all",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(NA,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(tt,{children:"Historique complet de vos transactions"})]}),s.jsx(G,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,S)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},S))}):w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(an,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:w().map(E=>s.jsx(yy,{request:E,userRole:E.buyerId===t.uid?"buyer":"seller"},E.id))})})]})}),s.jsx(Lt,{value:"purchases",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Gx,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(tt,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(G,{children:j().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gx,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:j().map(E=>s.jsx(yy,{request:E,userRole:"buyer"},E.id))})})]})}),s.jsx(Lt,{value:"sales",className:"space-y-4",children:s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Hx,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(tt,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(G,{children:y().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Hx,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:y().map(E=>s.jsx(yy,{request:E,userRole:"seller"},E.id))})})]})})]}),s.jsxs(ft,{className:"border-blue-200 bg-blue-50",children:[s.jsx(pt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(mt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(an,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var Fj="Collapsible",[die,XO]=qr(Fj),[hie,Uj]=die(Fj),ZO=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=$r({prop:r,defaultProp:i,onChange:o});return s.jsx(hie,{scope:n,disabled:a,contentId:Lr(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:s.jsx(_e.div,{"data-state":zj(c),"data-disabled":a?"":void 0,...l,ref:e})})});ZO.displayName=Fj;var JO="CollapsibleTrigger",e3=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=Uj(JO,n);return s.jsx(_e.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":zj(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:le(t.onClick,i.onOpenToggle)})});e3.displayName=JO;var $j="CollapsibleContent",t3=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Uj($j,t.__scopeCollapsible);return s.jsx(Fn,{present:n||i.open,children:({present:a})=>s.jsx(fie,{...r,ref:e,present:a})})});t3.displayName=$j;var fie=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=Uj($j,n),[l,c]=p.useState(r),u=p.useRef(null),d=We(e,u),f=p.useRef(0),m=f.current,v=p.useRef(0),x=v.current,w=o.open||l,j=p.useRef(w),y=p.useRef();return p.useEffect(()=>{const g=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(g)},[]),En(()=>{const g=u.current;if(g){y.current=y.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const b=g.getBoundingClientRect();f.current=b.height,v.current=b.width,j.current||(g.style.transitionDuration=y.current.transitionDuration,g.style.animationName=y.current.animationName),c(r)}},[o.open,r]),s.jsx(_e.div,{"data-state":zj(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&i})});function zj(t){return t?"open":"closed"}var mie=ZO,pie=e3,gie=t3,ra="Accordion",vie=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Bj,xie,yie]=tf(ra),[Uv,Oae]=qr(ra,[yie,XO]),qj=XO(),n3=xe.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(Bj.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(_ie,{...a,ref:e}):s.jsx(jie,{...i,ref:e})})});n3.displayName=ra;var[r3,wie]=Uv(ra),[s3,bie]=Uv(ra,{collapsible:!1}),jie=xe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[l,c]=$r({prop:n,defaultProp:r,onChange:i});return s.jsx(r3,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:xe.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(s3,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(i3,{...o,ref:e})})})}),_ie=xe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o=[],l]=$r({prop:n,defaultProp:r,onChange:i}),c=xe.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=xe.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return s.jsx(r3,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(s3,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(i3,{...a,ref:e})})})}),[Nie,$v]=Uv(ra),i3=xe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,l=xe.useRef(null),c=We(l,e),u=xie(n),f=Sl(i)==="ltr",m=le(t.onKeyDown,v=>{var I;if(!vie.includes(v.key))return;const x=v.target,w=u().filter(A=>{var N;return!((N=A.ref.current)!=null&&N.disabled)}),j=w.findIndex(A=>A.ref.current===x),y=w.length;if(j===-1)return;v.preventDefault();let g=j;const b=0,E=y-1,S=()=>{g=j+1,g>E&&(g=b)},M=()=>{g=j-1,g<b&&(g=E)};switch(v.key){case"Home":g=b;break;case"End":g=E;break;case"ArrowRight":a==="horizontal"&&(f?S():M());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(f?M():S());break;case"ArrowUp":a==="vertical"&&M();break}const k=g%y;(I=w[k].ref.current)==null||I.focus()});return s.jsx(Nie,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(Bj.Slot,{scope:n,children:s.jsx(_e.div,{...o,"data-orientation":a,ref:c,onKeyDown:r?void 0:m})})})}),xg="AccordionItem",[Eie,Wj]=Uv(xg),a3=xe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=$v(xg,n),o=wie(xg,n),l=qj(n),c=Lr(),u=r&&o.value.includes(r)||!1,d=a.disabled||t.disabled;return s.jsx(Eie,{scope:n,open:u,disabled:d,triggerId:c,children:s.jsx(mie,{"data-orientation":a.orientation,"data-state":h3(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});a3.displayName=xg;var o3="AccordionHeader",l3=xe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=$v(ra,n),a=Wj(o3,n);return s.jsx(_e.h3,{"data-orientation":i.orientation,"data-state":h3(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});l3.displayName=o3;var jw="AccordionTrigger",c3=xe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=$v(ra,n),a=Wj(jw,n),o=bie(jw,n),l=qj(n);return s.jsx(Bj.ItemSlot,{scope:n,children:s.jsx(pie,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...r,ref:e})})});c3.displayName=jw;var u3="AccordionContent",d3=xe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=$v(ra,n),a=Wj(u3,n),o=qj(n);return s.jsx(gie,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});d3.displayName=u3;function h3(t){return t?"open":"closed"}var Sie=n3,Cie=a3,Tie=l3,f3=c3,m3=d3;const kie=Sie,p3=p.forwardRef(({className:t,...e},n)=>s.jsx(Cie,{ref:n,className:Pe("border-b",t),...e}));p3.displayName="AccordionItem";const g3=p.forwardRef(({className:t,children:e,...n},r)=>s.jsx(Tie,{className:"flex",children:s.jsxs(f3,{ref:r,className:Pe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(g4,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));g3.displayName=f3.displayName;const v3=p.forwardRef(({className:t,children:e,...n},r)=>s.jsx(m3,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Pe("pb-4 pt-0",t),children:e})}));v3.displayName=m3.displayName;const nC=[{category:"Compte et Inscription",icon:ef,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:an,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:pt,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Wt,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:lr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:dv,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Iie=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:Wt,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:Sr,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:mu,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:bA,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],Pie=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:ka,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:pt,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:pu,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:lr,duration:"4 min",type:"Infographie"}],Aie=()=>{const{currentUser:t,userProfile:e}=Yt(),[n,r]=p.useState(""),[i,a]=p.useState("all"),[o,l]=p.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=p.useState(!1),d=nC.filter(m=>{if(i!=="all"&&m.category!==i)return!1;if(n){const v=n.toLowerCase();return m.questions.some(x=>x.question.toLowerCase().includes(v)||x.answer.toLowerCase().includes(v))}return!0}),f=async m=>{if(m.preventDefault(),!o.subject||!o.message){ee.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(v=>setTimeout(v,1e3)),ee.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{ee.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{u(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(zp,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(Rn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(ke,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:m=>r(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Iie.map((m,v)=>s.jsx(H,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(m.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:m.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),s.jsx($,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},v))}),s.jsxs(kl,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(yo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(zp,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(Ot,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(bA,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(Ot,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(Wt,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(Lt,{value:"faq",className:"space-y-6",children:[s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx($,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),nC.map(m=>s.jsxs($,{variant:i===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?s.jsx(H,{children:s.jsxs(G,{className:"pt-12 pb-12 text-center",children:[s.jsx(Rn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx($,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:d.map((m,v)=>s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),s.jsx(G,{children:s.jsx(kie,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((x,w)=>s.jsxs(p3,{value:`${v}-${w}`,children:[s.jsx(g3,{className:"text-left",children:x.question}),s.jsx(v3,{className:"text-muted-foreground leading-relaxed",children:x.answer})]},w))})})]},v))})]}),s.jsxs(Lt,{value:"guides",className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(kA,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(tt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),s.jsx(G,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Pie.map((m,v)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:m.title}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:m.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),m.duration]}),s.jsxs($,{size:"sm",variant:"outline",children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},v))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(RA,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs($,{variant:"outline",size:"sm",children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(ts,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs($,{variant:"outline",size:"sm",children:[s.jsx(ts,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(ef,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs($,{variant:"outline",size:"sm",children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(Lt,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Gc,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(tt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(G,{children:s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"subject",children:"Sujet *"}),s.jsx(ke,{id:"subject",value:o.subject,onChange:m=>l(v=>({...v,subject:m.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"category",children:"Catégorie"}),s.jsxs(St,{value:o.category,onValueChange:m=>l(v=>({...v,category:m})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"account",children:"Compte et profil"}),s.jsx(we,{value:"listing",children:"Annonces"}),s.jsx(we,{value:"payment",children:"Paiements"}),s.jsx(we,{value:"security",children:"Sécurité"}),s.jsx(we,{value:"technical",children:"Problème technique"}),s.jsx(we,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"priority",children:"Priorité"}),s.jsxs(St,{value:o.priority,onValueChange:m=>l(v=>({...v,priority:m})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsxs(bt,{children:[s.jsx(we,{value:"low",children:"Basse - Question générale"}),s.jsx(we,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(we,{value:"high",children:"Haute - Problème bloquant"}),s.jsx(we,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"message",children:"Message *"}),s.jsx(js,{id:"message",value:o.message,onChange:m=>l(v=>({...v,message:m.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(ft,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(mt,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx($,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(Ae,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(Ae,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(Ae,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(SA,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sr,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wt,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(El,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pu,{className:"w-5 h-5"}),"État du système"]})}),s.jsxs(G,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs($,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Rie=[{category:"Rencontres et Échanges",icon:ir,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Je},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:qc},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Je},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Je}]},{category:"Vérification d'Identité",icon:AA,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Je},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Je},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Jt},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Je}]},{category:"Paiements Sécurisés",icon:an,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Je},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:qc},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Je},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Jt}]},{category:"Communication",icon:Wt,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Je},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Je},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Jt},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Je}]}],Die=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Jt},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:an},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:ir},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:Wo},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:ef},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:Wt},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:ln},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:ul}],Mie=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:mu,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:Vo,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:Wt,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:pt,color:"text-green-600"}],Oie=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(pt,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs(ft,{className:"border-green-200 bg-green-50",children:[s.jsx(pt,{className:"h-4 w-4 text-green-600"}),s.jsx(mt,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs($,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(ts,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(pt,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(AA,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(ln,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(ka,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Rie.map((t,e)=>s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(G,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(tt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(G,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Die.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(Ae,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(mu,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(tt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(G,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Mie.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(sW,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs($,{variant:"outline",className:"w-full",children:[s.jsx(ts,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(zp,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx($,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(fe,{to:"/help",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(H,{children:s.jsxs(G,{className:"pt-6 text-center",children:[s.jsx(Wt,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs($,{variant:"outline",className:"w-full",children:[s.jsx(Vo,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(ft,{className:"border-blue-200 bg-blue-50",children:[s.jsx(kA,{className:"h-4 w-4 text-blue-600"}),s.jsxs(mt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Lie(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Hj="ScrollArea",[x3,Lae]=qr(Hj),[Vie,as]=x3(Hj),y3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[f,m]=p.useState(null),[v,x]=p.useState(null),[w,j]=p.useState(null),[y,g]=p.useState(0),[b,E]=p.useState(0),[S,M]=p.useState(!1),[k,I]=p.useState(!1),A=We(e,P=>c(P)),N=Sl(i);return s.jsx(Vie,{scope:n,type:r,dir:N,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:v,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:M,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:g,onCornerHeightChange:E,children:s.jsx(_e.div,{dir:N,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});y3.displayName=Hj;var w3="ScrollAreaViewport",b3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:a,...o}=t,l=as(w3,n),c=p.useRef(null),u=We(e,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(_e.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Kie({asChild:i,children:r},d=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});b3.displayName=w3;var di="ScrollAreaScrollbar",Gj=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(di,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(Fie,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(Uie,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(j3,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(Kj,{...r,ref:e}):null});Gj.displayName=di;var Fie=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(di,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Fn,{present:n||a,children:s.jsx(j3,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Uie=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(di,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Bv(()=>c("SCROLL_END"),100),[l,c]=Lie("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const v=u[d];f!==v&&(c("SCROLL"),o()),f=v};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,a,c,o]),s.jsx(Fn,{present:n||l!=="hidden",children:s.jsx(Kj,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:le(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:le(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),j3=p.forwardRef((t,e)=>{const n=as(di,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=Bv(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return su(n.viewport,c),su(n.content,c),s.jsx(Fn,{present:r||a,children:s.jsx(Kj,{"data-state":a?"visible":"hidden",...i,ref:e})})}),Kj=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=as(di,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=C3(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,v){return Hie(m,o.current,l,v)}return n==="horizontal"?s.jsx($ie,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,v=rC(m,l,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=f(m,i.dir))}}):n==="vertical"?s.jsx(zie,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,v=rC(m,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=f(m))}}):null}),$ie=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=as(di,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(N3,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":zv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),k3(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:wg(o.paddingLeft),paddingEnd:wg(o.paddingRight)}})}})}),zie=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=as(di,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(N3,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":zv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),k3(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:wg(o.paddingTop),paddingEnd:wg(o.paddingBottom)}})}})}),[Bie,_3]=x3(di),N3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=t,v=as(di,n),[x,w]=p.useState(null),j=We(e,A=>w(A)),y=p.useRef(null),g=p.useRef(""),b=v.viewport,E=r.content-r.viewport,S=mn(d),M=mn(c),k=Bv(f,10);function I(A){if(y.current){const N=A.clientX-y.current.left,P=A.clientY-y.current.top;u({x:N,y:P})}}return p.useEffect(()=>{const A=N=>{const P=N.target;(x==null?void 0:x.contains(P))&&S(N,E)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,x,E,S]),p.useEffect(M,[r,M]),su(x,k),su(v.content,k),s.jsx(Bie,{scope:n,scrollbar:x,hasThumb:i,onThumbChange:mn(a),onThumbPointerUp:mn(o),onThumbPositionChange:M,onThumbPointerDown:mn(l),children:s.jsx(_e.div,{...m,ref:j,style:{position:"absolute",...m.style},onPointerDown:le(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=x.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),I(A))}),onPointerMove:le(t.onPointerMove,I),onPointerUp:le(t.onPointerUp,A=>{const N=A.target;N.hasPointerCapture(A.pointerId)&&N.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=g.current,v.viewport&&(v.viewport.style.scrollBehavior=""),y.current=null})})})}),yg="ScrollAreaThumb",E3=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=_3(yg,t.__scopeScrollArea);return s.jsx(Fn,{present:n||i.hasThumb,children:s.jsx(qie,{ref:e,...r})})}),qie=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=as(yg,n),o=_3(yg,n),{onThumbPositionChange:l}=o,c=We(e,f=>o.onThumbChange(f)),u=p.useRef(),d=Bv(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const v=Gie(f,l);u.current=v,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,l]),s.jsx(_e.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:le(t.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),x=f.clientX-v.left,w=f.clientY-v.top;o.onThumbPointerDown({x,y:w})}),onPointerUp:le(t.onPointerUp,o.onThumbPointerUp)})});E3.displayName=yg;var Yj="ScrollAreaCorner",S3=p.forwardRef((t,e)=>{const n=as(Yj,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(Wie,{...t,ref:e}):null});S3.displayName=Yj;var Wie=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=as(Yj,n),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return su(i.scrollbarX,()=>{var f;const d=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),su(i.scrollbarY,()=>{var f;const d=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(_e.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function wg(t){return t?parseInt(t,10):0}function C3(t,e){const n=t/e;return isNaN(n)?0:n}function zv(t){const e=C3(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Hie(t,e,n,r="ltr"){const i=zv(n),a=i/2,o=e||a,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return T3([c,u],f)(t)}function rC(t,e,n="ltr"){const r=zv(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=mh(t,c);return T3([0,o],[0,l])(u)}function T3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function k3(t,e){return t>0&&t<e}var Gie=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Bv(t,e){const n=mn(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function su(t,e){const n=mn(e);En(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function Kie(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const i=p.Children.only(r);return p.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var I3=y3,Yie=b3,Qie=S3;const Qj=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(I3,{ref:r,className:Pe("relative overflow-hidden",t),...n,children:[s.jsx(Yie,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(P3,{}),s.jsx(Qie,{})]}));Qj.displayName=I3.displayName;const P3=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(Gj,{ref:r,orientation:e,className:Pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(E3,{className:"relative flex-1 rounded-full bg-border"})}));P3.displayName=Gj.displayName;const sC=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const f=d.participants.find(v=>v!==(a==null?void 0:a.uid)),m=f?d.participantDetails[f]:null;return(m==null?void 0:m.name.toLowerCase().includes(n.toLowerCase()))||d.listingTitle.toLowerCase().includes(n.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const f=d.participants.find(m=>m!==(a==null?void 0:a.uid));return f?d.participantDetails[f]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(uv,{className:"w-4 h-4"})}),s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(vA,{className:"w-4 h-4"})}),s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(dv,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Rechercher conversations...",value:n,onChange:d=>r(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(Qj,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,f)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},f))}):l.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(Wt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(Sr,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:l.map(d=>{var x,w;const f=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,v=(i==null?void 0:i.id)===d.id;return s.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${v?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(Ki,{className:"w-10 h-10",children:[s.jsx(Yi,{src:f==null?void 0:f.avatar}),s.jsx(Qi,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((w=(x=f==null?void 0:f.name)==null?void 0:x[0])==null?void 0:w.toUpperCase())||s.jsx(hr,{className:"w-4 h-4"})})]}),(f==null?void 0:f.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(pt,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(hr,{className:"w-3 h-3 text-muted-foreground"}),(f==null?void 0:f.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),_u(d.lastMessage.sentAt,{addSuffix:!0,locale:Kn})]}),m>0&&s.jsx(Ae,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?s.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(TA,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?s.jsx(lr,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),c(d.listingPrice)]})]}),d.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Gc,{className:"w-3 h-3"}):s.jsx(Wt,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},iC=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var U,Q;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=Tv(),[d,f]=p.useState(""),[m,v]=p.useState(40),[x,w]=p.useState(!1),[j,y]=p.useState(!1),[g,b]=p.useState(""),[E,S]=p.useState(""),M=p.useRef(null),k=p.useRef(null),I=()=>{var ie;(ie=k.current)==null||ie.scrollIntoView({behavior:"smooth"})},A=p.useCallback(()=>{const ie=M.current;if(!ie)return;ie.style.height="auto";const Ce=Math.max(40,Math.min(ie.scrollHeight,120));v(Ce)},[]),N=p.useCallback(ie=>{const Ce=ie.target.value;f(Ce),w(!!Ce.trim()),setTimeout(A,0)},[A]),P=async()=>{if(!d.trim()||!t||!r)return;const ie=d.trim();f(""),w(!1),v(40),await a(t.id,ie,r.uid,r.displayName||"Utilisateur",r.photoURL)},R=ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),P())},T=async()=>{!t||!r||await l(t.id,r.uid)},F=async()=>{if(!t||!r||!g.trim())return;const ie=t.participants.find(Ce=>Ce!==r.uid);ie&&(await c(t.id,r.uid,ie,g,E),y(!1),b(""),S(""))},W=async()=>{!t||!r||(await u(t.id,r.uid),i())};if(p.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),p.useEffect(I,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Wt,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Rn,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const Y=t.participants.find(ie=>ie!==(r==null?void 0:r.uid)),L=Y?t.participantDetails[Y]:null,O=ie=>{const Ce=new Date,Xe=new Date(ie);return Xe.toDateString()===Ce.toDateString()?Xe.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((Ce.getTime()-Xe.getTime())/(1e3*60*60*24))<7?Xe.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Xe.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},B=ie=>ie.senderId!==(r==null?void 0:r.uid)?null:ie.seen?s.jsx(Qq,{className:"w-3 h-3 text-blue-500"}):s.jsx(Xq,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx($,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(qo,{className:"w-4 h-4"})}),s.jsxs(Ki,{className:"w-8 h-8",children:[s.jsx(Yi,{src:L==null?void 0:L.avatar}),s.jsx(Qi,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((Q=(U=L==null?void 0:L.name)==null?void 0:U[0])==null?void 0:Q.toUpperCase())||s.jsx(hr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(hr,{className:"w-3 h-3 text-muted-foreground"}),(L==null?void 0:L.name)||"Utilisateur"]}),(L==null?void 0:L.verified)&&s.jsx(pt,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(ir,{className:"w-3 h-3"}),L==null?void 0:L.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(mu,{className:"w-4 h-4"})}),s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(RA,{className:"w-4 h-4"})}),s.jsxs(sw,{children:[s.jsx(iw,{asChild:!0,children:s.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(eW,{className:"w-4 h-4"})})}),s.jsxs(Xp,{align:"end",children:[s.jsx(Et,{asChild:!0,children:s.jsxs(fe,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(Et,{children:[s.jsx(ka,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(Et,{children:[s.jsx(Wq,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Ms,{}),s.jsxs(Et,{onClick:()=>y(!0),children:[s.jsx(Vo,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(Et,{onClick:T,children:[s.jsx(Kq,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(Et,{onClick:W,className:"text-destructive",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(H,{className:"mt-2",children:s.jsx(G,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(TA,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Lb,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(lr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx($,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(fe,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(or,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(Qj,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((ie,Ce)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${Ce%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},Ce))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Wt,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Gc,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(ie=>{const Ce=ie.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${Ce?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${Ce?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${Ce?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:ie.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${Ce?"justify-end":"justify-start"}`,children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsx("span",{children:O(ie.sentAt)}),B(ie)]})]})},ie.id)}),s.jsx("div",{ref:k})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(js,{ref:M,value:d,placeholder:"Tapez votre message...",onChange:N,onKeyDown:R,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx($,{onClick:P,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Gc,{className:"h-3.5 w-3.5"})})]}),x&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(Wt,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(Ri,{open:j,onOpenChange:y,children:s.jsxs(Js,{children:[s.jsx(Di,{children:s.jsxs(ei,{className:"flex items-center gap-2",children:[s.jsx(Vo,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(St,{value:g,onValueChange:b,children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez un motif"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sr,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(we,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx(we,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vo,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx(we,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(we,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(Wt,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(js,{id:"report-description",value:E,onChange:ie=>S(ie.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),s.jsxs($,{onClick:F,disabled:!g,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(Vo,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Xie=()=>{const{currentUser:t,userProfile:e}=Yt(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=Tv(),[d,f]=p.useState(""),[m,v]=p.useState(!1);p.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),p.useEffect(()=>{r&&l(r.id)},[r,l]);const x=j=>{c(j),v(!0)},w=()=>{v(!1),c(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:m?s.jsx(iC,{conversation:r,messages:i,loading:a,currentUser:t,onBack:w}):s.jsx(sC,{conversations:n,loading:a,searchQuery:d,setSearchQuery:f,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:x})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(sC,{conversations:n,loading:a,searchQuery:d,setSearchQuery:f,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:x}),s.jsx(iC,{conversation:r,messages:i,loading:a,currentUser:t,onBack:w})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Wt,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx($,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(fe,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),"Se connecter"]})})]})},Zie=Le.object({email:Le.string().email("Email invalide"),password:Le.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Jie=Le.object({displayName:Le.string().min(2,"Le nom doit contenir au moins 2 caractères"),email:Le.string().email("Email invalide").refine(t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:Le.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Le.string().min(1,"Veuillez indiquer votre année de diplôme"),password:Le.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:Le.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),eae=Le.object({university:Le.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Le.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Le.string().min(1,"Veuillez indiquer votre année de diplôme")}),aC=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],oC=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],tae=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),nae=()=>{var T,F,W,Y;const{currentUser:t,signIn:e,signInWithGoogle:n}=Yt(),[r,i]=p.useState(!1),[a,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState(""),[v,x]=p.useState(""),[w,j]=p.useState(null),[y,g]=p.useState(!1),[b,E]=p.useState(null),S=ea(),M=Ko({resolver:Yo(Zie),defaultValues:{email:"",password:""}}),k=Ko({resolver:Yo(Jie),defaultValues:{displayName:"",email:"",university:"",fieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),I=Ko({resolver:Yo(eae),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}}),A=((F=(T=S.state)==null?void 0:T.from)==null?void 0:F.pathname)||"/";if(p.useEffect(()=>{(async()=>{if(t)try{const O=await Pi(lt(Ne,"users",t.uid));if(O.exists()){const B=O.data();if(!(t.emailVerified||t.providerData.some(Q=>Q.providerId==="google.com"))&&!B.emailVerified){x(t.email||""),d(!0);return}}else{if(t.providerData.some(U=>U.providerId==="google.com")){if(!tae(t.email||"")){m("Vous devez utiliser une adresse email universitaire"),Ls.signOut();return}E({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),g(!0);return}const B=localStorage.getItem("pendingUserData");if(B&&t.emailVerified){const U=JSON.parse(B);await zo(lt(Ne,"users",t.uid),{...U,emailVerified:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail")}}}catch(O){console.error("Error checking user profile:",O)}})()},[t]),t&&!y&&!u)return s.jsx(Ik,{to:A,replace:!0});if(y&&b)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(H,{className:"w-full max-w-md",children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(mW,{className:"w-6 h-6 text-green-600"})})}),s.jsx(Ee,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(tt,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs(ft,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(mt,{children:["Connecté avec ",s.jsx("strong",{children:b.email})]})]}),f&&s.jsxs(ft,{variant:"destructive",children:[s.jsx(wc,{className:"h-4 w-4"}),s.jsx(mt,{children:f})]}),s.jsxs("form",{onSubmit:I.handleSubmit(async L=>{c(!0),m("");try{await zo(lt(Ne,"users",b.uid),{email:b.email,displayName:b.displayName,photoURL:b.photoURL,university:L.university,fieldOfStudy:L.fieldOfStudy,graduationYear:parseInt(L.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),g(!1)}catch(O){console.error("Error completing profile:",O),m("Erreur lors de la sauvegarde du profil")}finally{c(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"university",children:"Université"}),s.jsxs(St,{onValueChange:L=>I.setValue("university",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:aC.map(L=>s.jsx(we,{value:L,children:L},L))})]}),I.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.university.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(St,{onValueChange:L=>I.setValue("fieldOfStudy",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Filière"})}),s.jsx(bt,{children:oC.map(L=>s.jsx(we,{value:L,children:L},L))})]}),I.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.fieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(St,{onValueChange:L=>I.setValue("graduationYear",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année"})}),s.jsx(bt,{children:Array.from({length:8},(L,O)=>2024+O).map(L=>s.jsx(we,{value:L.toString(),children:L},L))})]}),I.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:I.formState.errors.graduationYear.message})]})]}),s.jsxs($,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx($,{variant:"outline",onClick:()=>{Ls.signOut(),g(!1),E(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(u)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(H,{className:"w-full max-w-md",children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Sr,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(Ee,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsx(tt,{children:"Un lien d'activation a été envoyé"})]}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs(ft,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(mt,{children:["Nous avons envoyé un lien d'activation à ",s.jsx("strong",{children:v}),". Cliquez sur le lien pour activer votre compte."]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs($,{onClick:async()=>{if(t){c(!0);try{await I2(t),m(""),alert("Email d'activation renvoyé !")}catch(L){m("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",L)}c(!1)}},variant:"outline",className:"w-full",disabled:l||!t,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),f&&s.jsxs(ft,{variant:"destructive",children:[s.jsx(wc,{className:"h-4 w-4"}),s.jsx(mt,{children:f})]}),s.jsx($,{variant:"link",onClick:()=>{d(!1),x(""),j(null),m(""),t&&Ls.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const N=async L=>{c(!0),m("");try{await e(L.email,L.password)}catch(O){O.code==="auth/invalid-credential"?m("Email ou mot de passe incorrect"):O.code==="auth/user-not-found"?m("Aucun compte trouvé avec cet email"):O.code==="auth/user-disabled"?m("Ce compte a été désactivé"):O.code==="auth/too-many-requests"?m("Trop de tentatives. Réessayez plus tard."):m("Erreur de connexion: "+(O.message||"Erreur inconnue")),console.error("Sign in error:",O)}finally{c(!1)}},P=async L=>{c(!0),m("");try{const B=(await vI(Ls,L.email,L.password)).user,U={displayName:L.displayName,university:L.university,fieldOfStudy:L.fieldOfStudy,graduationYear:parseInt(L.graduationYear),email:L.email,createdAt:new Date().toISOString(),emailVerified:!1,isStudent:!0,provider:"email"};await zo(lt(Ne,"users",B.uid),U),await I2(B,{url:`${window.location.origin}/auth`,handleCodeInApp:!1}),localStorage.setItem("pendingUserData",JSON.stringify(U)),localStorage.setItem("pendingUserEmail",L.email),j(U),x(L.email),d(!0)}catch(O){console.error("Sign up error:",O),O.code==="auth/email-already-in-use"?m("Cette adresse email est déjà utilisée"):O.code==="auth/weak-password"?m("Le mot de passe est trop faible"):O.code==="auth/invalid-email"?m("Adresse email invalide"):m("Erreur lors de la création du compte")}finally{c(!1)}},R=async()=>{c(!0),m("");try{await n()}catch(L){L.code==="auth/popup-closed-by-user"?m("Connexion annulée"):L.code==="auth/popup-blocked"?m("Popup bloquée par le navigateur"):L.code==="auth/account-exists-with-different-credential"?m("Un compte existe déjà avec cet email"):m("Erreur de connexion avec Google: "+(L.message||"Erreur inconnue")),console.error("Google sign in error:",L)}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(H,{className:"w-full max-w-md",children:[s.jsxs(je,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(Zh,{className:"w-6 h-6 text-white"})})}),s.jsx(Ee,{className:"text-2xl",children:r?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(tt,{children:r?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),r&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(Ae,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(pt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(G,{className:"space-y-6",children:[f&&s.jsxs(ft,{variant:"destructive",children:[s.jsx(wc,{className:"h-4 w-4"}),s.jsx(mt,{children:f})]}),s.jsxs($,{variant:"outline",className:"w-full",onClick:R,disabled:l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Qr,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:r?k.handleSubmit(P):M.handleSubmit(N),className:"space-y-4",children:[r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"displayName",children:"Nom complet"}),s.jsxs("div",{className:"relative",children:[s.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{id:"displayName",type:"text",placeholder:"Votre nom complet",className:"pl-10",...k.register("displayName")})]}),k.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...r?k.register("email"):M.register("email")})]}),(r?k.formState.errors.email:M.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(W=r?k.formState.errors.email:M.formState.errors.email)==null?void 0:W.message}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"university",children:"Université"}),s.jsxs(St,{onValueChange:L=>k.setValue("university",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:aC.map(L=>s.jsx(we,{value:L,children:L},L))})]}),k.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.university.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(St,{onValueChange:L=>k.setValue("fieldOfStudy",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Filière"})}),s.jsx(bt,{children:oC.map(L=>s.jsx(we,{value:L,children:L},L))})]}),k.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.fieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(St,{onValueChange:L=>k.setValue("graduationYear",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année"})}),s.jsx(bt,{children:Array.from({length:8},(L,O)=>2024+O).map(L=>s.jsx(we,{value:L.toString(),children:L},L))})]}),k.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{id:"password",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...r?k.register("password"):M.register("password")}),s.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>o(!a),children:a?s.jsx(tW,{className:"w-4 h-4"}):s.jsx(Wc,{className:"w-4 h-4"})})]}),(r?k.formState.errors.password:M.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(Y=r?k.formState.errors.password:M.formState.errors.password)==null?void 0:Y.message})]}),r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{id:"confirmPassword",type:a?"text":"password",placeholder:"••••••••",className:"pl-10",...k.register("confirmPassword")})]}),k.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.confirmPassword.message})]}),s.jsxs($,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:l,children:[l?s.jsx(yr,{className:"w-4 h-4 mr-2 animate-spin"}):null,r?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"text-center",children:s.jsx($,{variant:"link",onClick:()=>i(!r),disabled:l,children:r?"Déjà un compte ? Se connecter":"Pas encore de compte ? Rejoindre la communauté"})}),r&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]})})},cs=({children:t})=>{const{currentUser:e}=Yt(),n=ea();return e?s.jsx(s.Fragment,{children:t}):s.jsx(Ik,{to:"/auth\\",state:{from:n},replace:!0})},A3=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=Vn(),i=e,a=0,o=0,l=i+a-o,c=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Za,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((u,d)=>u+d.quantity,0),")"]}),s.jsx("span",{children:c(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(hv,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:c(l)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs($,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(an,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(Bs,{className:"ml-2 h-4 w-4"})]})]})})]})},rae=()=>{const{currentUser:t}=Yt(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=bu(),o=Vn(),[l,c]=p.useState(""),[u,d]=p.useState(!1),f=(x,w)=>{if(!(w<1)){if(w>10){ee.error("Maximum 10 articles par produit");return}n(x,w)}},m=x=>{r(x),ee.success("Article retiré du panier")},v=()=>{l.trim()&&(d(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?ee.success("Code promo appliqué : 10% de réduction"):ee.error("Code promo invalide ou expiré"),d(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs($,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(qo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Za,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs($,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Za,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:"/products",children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((x,w)=>x+w.quantity,0),")"]}),s.jsxs($,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(G,{children:s.jsx("div",{className:"space-y-4",children:e.map(x=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(Go,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:x.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>f(x.id,x.quantity-1),disabled:x.quantity<=1,children:s.jsx(PA,{className:"h-3 w-3"})}),s.jsx(ke,{type:"number",value:x.quantity,onChange:w=>{const j=parseInt(w.target.value);isNaN(j)||f(x.id,j)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>f(x.id,x.quantity+1),disabled:x.quantity>=10,children:s.jsx(Ho,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(x.price*x.quantity)}),s.jsxs($,{variant:"ghost",size:"sm",onClick:()=>m(x.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(Ai,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},x.id))})})]}),s.jsx(H,{className:"mt-6",children:s.jsxs(G,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Code promo",value:l,onChange:x=>c(x.target.value),className:"pl-10"})]}),s.jsx($,{onClick:v,disabled:!l.trim()||u,children:u?s.jsxs(s.Fragment,{children:[s.jsx(qi,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(A3,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs(ft,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(mt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},ym=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Xj=wu((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=qt(vt(Ne,"orders"),hn("userId","==",n),es(100)),i=await fn(r),a=[];i.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:ym(l.createdAt),updatedAt:ym(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),ee.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Pi(lt(Ne,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:ym(i.createdAt),updatedAt:ym(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),ee.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:wn(),updatedAt:wn()},a=await Qa(vt(Ne,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),ee.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),ee.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:wn()};i&&(a.notes=i),await ar(lt(Ne,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:i||l.notes,updatedAt:new Date}:l)})),ee.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),ee.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await ar(lt(Ne,"orders",n),{status:"cancelled",notes:r,updatedAt:wn()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),ee.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),ee.error("Erreur lors de l'annulation de la commande")}}})),sae=()=>{const{currentUser:t,userProfile:e}=Yt(),n=Vn(),r=ea(),{cart:i,cartTotal:a,clearCart:o}=bu(),{createOrder:l}=Xj(),[c,u]=p.useState("shipping"),[d,f]=p.useState(!1),[m,v]=p.useState(null),[x,w]=p.useState({}),[j,y]=p.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[g,b]=p.useState({}),[E,S]=p.useState(!1);p.useEffect(()=>{var P;i.length===0&&!((P=r.state)!=null&&P.directCheckout)&&(n("/cart"),ee.error("Votre panier est vide"))},[i,n,r]);const M=()=>{const P={};return j.fullName||(P.fullName="Nom complet requis"),j.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)||(P.email="Format d'email invalide"):P.email="Email requis",j.phone||(P.phone="Téléphone requis"),j.address||(P.address="Adresse requise"),j.city||(P.city="Ville requise"),j.postalCode||(P.postalCode="Code postal requis"),b(P),Object.keys(P).length===0},k=P=>{P.preventDefault(),M()&&(u("payment"),window.scrollTo(0,0))},I=(P,R)=>{v(P),w(R),P==="card"&&R.stripePaymentId&&(u("review"),window.scrollTo(0,0))},A=()=>{if(!m){ee.error("Veuillez sélectionner un mode de paiement");return}u("review"),window.scrollTo(0,0)},N=async()=>{if(!t){n("/auth");return}if(!E){ee.error("Veuillez accepter les conditions générales");return}f(!0);try{const P={userId:t.uid,items:i,total:a,shipping:j,payment:{method:m,details:x,transactionId:x.stripePaymentId},status:m==="card"?"processing":"pending"},R=await l(P);o(),n(`/order-confirmation/${R}`)}catch(P){console.error("Error placing order:",P),ee.error("Erreur lors de la création de la commande")}finally{f(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs($,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(qo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${c==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Bs,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="payment"||c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Bs,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c==="shipping"&&s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(hv,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(tt,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(G,{children:s.jsxs("form",{onSubmit:k,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(hr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(ke,{id:"fullName",value:j.fullName,onChange:P=>y({...j,fullName:P.target.value}),className:g.fullName?"border-red-500":""}),g.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.fullName})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(Sr,{className:"w-4 h-4"}),"Email *"]}),s.jsx(ke,{id:"email",type:"email",value:j.email,onChange:P=>y({...j,email:P.target.value}),className:g.email?"border-red-500":""}),g.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.email})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(mu,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(ke,{id:"phone",value:j.phone,onChange:P=>y({...j,phone:P.target.value}),className:g.phone?"border-red-500":""}),g.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.phone})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),"Université"]}),s.jsx(ke,{id:"university",value:j.university,onChange:P=>y({...j,university:P.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(ke,{id:"address",value:j.address,onChange:P=>y({...j,address:P.target.value}),className:g.address?"border-red-500":""}),g.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(ke,{id:"city",value:j.city,onChange:P=>y({...j,city:P.target.value}),className:g.city?"border-red-500":""}),g.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.city})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(ke,{id:"postalCode",value:j.postalCode,onChange:P=>y({...j,postalCode:P.target.value}),className:g.postalCode?"border-red-500":""}),g.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.postalCode})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(ir,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(ke,{id:"country",value:j.country,onChange:P=>y({...j,country:P.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(pg,{id:"saveInfo",checked:j.saveInfo,onCheckedChange:P=>y({...j,saveInfo:P})}),s.jsx(oe,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs($,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Bs,{className:"ml-2 h-4 w-4"})]})})]})})]}),c==="payment"&&s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(tt,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(FM,{amount:a,currency:"EUR",onMethodSelect:I,selectedMethod:m}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs($,{variant:"outline",onClick:()=>u("shipping"),children:[s.jsx(qo,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs($,{onClick:A,disabled:!m||m==="card"&&!x.stripePaymentId,children:["Vérifier la commande",s.jsx(Bs,{className:"ml-2 h-4 w-4"})]})]})]})})]}),c==="review"&&s.jsxs(H,{children:[s.jsxs(je,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Je,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(tt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>u("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:j.fullName}),s.jsx("p",{children:j.address}),s.jsxs("p",{children:[j.postalCode," ",j.city,", ",j.country]}),s.jsx("p",{children:j.email}),s.jsx("p",{children:j.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>u("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[m==="card"&&"Carte bancaire",m==="paypal"&&"PayPal",m==="transfer"&&"Virement bancaire",m==="cash"&&"Paiement à la livraison",m==="lydia"&&"Lydia"]}),m==="card"&&x.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),m==="paypal"&&x.paypalEmail&&s.jsx("p",{children:x.paypalEmail}),m==="lydia"&&x.lydiaPhone&&s.jsx("p",{children:x.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(P=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[P.image&&s.jsx("img",{src:P.image,alt:P.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:P.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",P.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P.price*P.quantity)})]},P.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(pg,{id:"terms",checked:E,onCheckedChange:P=>S(P)}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs($,{variant:"outline",onClick:()=>u("payment"),children:[s.jsx(qo,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx($,{onClick:N,disabled:d||!E,className:"bg-gradient-to-r from-primary to-secondary",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ul,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(A3,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs(ft,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(pt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(mt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(H,{className:"mt-4",children:s.jsx(G,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Xa,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx($,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6",children:[s.jsx(Za,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx($,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},iae=()=>{const{currentUser:t}=Yt(),{orders:e,fetchUserOrders:n,loading:r}=Xj(),i=Vn(),[a,o]=p.useState(""),[l,c]=p.useState("all"),[u,d]=p.useState("date-desc"),[f,m]=p.useState("all");p.useEffect(()=>{t&&n(t.uid)},[t,n]);const v=()=>e.filter(y=>{const g=!a||y.id.toLowerCase().includes(a.toLowerCase()),b=l==="all"||y.status===l;let E=!0;if(f!=="all"){const S=new Date(y.createdAt),M=new Date;if(f==="last-30-days"){const k=new Date;k.setDate(M.getDate()-30),E=S>=k}else if(f==="last-6-months"){const k=new Date;k.setMonth(M.getMonth()-6),E=S>=k}}return g&&b&&E}).sort((y,g)=>u==="date-desc"?new Date(g.createdAt).getTime()-new Date(y.createdAt).getTime():u==="date-asc"?new Date(y.createdAt).getTime()-new Date(g.createdAt).getTime():u==="total-desc"?g.total-y.total:u==="total-asc"?y.total-g.total:0),x=y=>{switch(y){case"pending":return s.jsxs(Ae,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(Ae,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(Ae,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(hv,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(Ae,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(qc,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(Ae,{children:y})}},w=y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(y),j=()=>{const y={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(S=>({id:S.id,date:S.createdAt,status:S.status,total:S.total,items:S.items.length}))},g=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),b=URL.createObjectURL(g),E=document.createElement("a");E.href=b,E.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(b)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ft,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs($,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[s.jsx(ts,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(H,{children:s.jsx(G,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:y=>o(y.target.value),className:"pl-10"})]}),s.jsxs(St,{value:l,onValueChange:c,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Statut"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Tous les statuts"}),s.jsx(we,{value:"pending",children:"En attente"}),s.jsx(we,{value:"processing",children:"En traitement"}),s.jsx(we,{value:"shipped",children:"Expédiée"}),s.jsx(we,{value:"delivered",children:"Livrée"}),s.jsx(we,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(St,{value:f,onValueChange:m,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Période"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"all",children:"Toutes les périodes"}),s.jsx(we,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(we,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(St,{value:u,onValueChange:d,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Trier par"})}),s.jsxs(bt,{children:[s.jsx(we,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx(we,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx(we,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx(we,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(kl,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(yo,{className:"grid w-full grid-cols-4",children:[s.jsx(Ot,{value:"all",children:"Toutes"}),s.jsx(Ot,{value:"active",children:"En cours"}),s.jsx(Ot,{value:"completed",children:"Terminées"}),s.jsx(Ot,{value:"cancelled",children:"Annulées"})]}),s.jsx(Lt,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((y,g)=>s.jsx(H,{className:"animate-pulse",children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},g))}):v().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:"/listings",children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:v().map(y=>s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),_n(new Date(y.createdAt),"dd MMMM yyyy",{locale:Kn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(y.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:`/order/${y.id}`,children:["Détails",s.jsx(Bs,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((g,b)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},b)),y.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),s.jsx(Lt,{value:"active",className:"space-y-4",children:v().filter(y=>["pending","processing","shipped"].includes(y.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ln,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(y=>["pending","processing","shipped"].includes(y.status)).map(y=>s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),_n(new Date(y.createdAt),"dd MMMM yyyy",{locale:Kn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(y.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:`/order/${y.id}`,children:["Détails",s.jsx(Bs,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((g,b)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},b)),y.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),s.jsx(Lt,{value:"completed",className:"space-y-4",children:v().filter(y=>y.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Je,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(y=>y.status==="delivered").map(y=>s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),_n(new Date(y.createdAt),"dd MMMM yyyy",{locale:Kn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(y.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:`/order/${y.id}`,children:["Détails",s.jsx(Bs,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((g,b)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},b)),y.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),s.jsx(Lt,{value:"cancelled",className:"space-y-4",children:v().filter(y=>y.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(qc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(y=>y.status==="cancelled").map(y=>s.jsx(H,{className:"hover:shadow-md transition-shadow",children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),_n(new Date(y.createdAt),"dd MMMM yyyy",{locale:Kn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(y.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),s.jsx($,{asChild:!0,children:s.jsxs(fe,{to:`/order/${y.id}`,children:["Détails",s.jsx(Bs,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((g,b)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},b)),y.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx($,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},aae=()=>{var d,f;const{orderId:t}=_1(),{getOrderById:e}=Xj(),[n,r]=p.useState(null),[i,a]=p.useState(!0);p.useEffect(()=>{(async()=>{if(t)try{a(!0);const v=await e(t);r(v)}catch(v){console.error("Error loading order:",v)}finally{a(!1)}})()},[t,e]);const o=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),l=m=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[m]||m,c=()=>{const m=new Date,v=new Date(m);return v.setDate(m.getDate()+3),_n(v,"EEEE d MMMM",{locale:Kn})},u=()=>{navigator.clipboard.writeText(t||""),ee.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Je,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),s.jsxs(H,{className:"mb-6",children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx($,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,children:s.jsx(EA,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:_n(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Qr,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((m,v)=>s.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&s.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:m.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",m.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(m.price*m.quantity)})]},v))})]}),s.jsx(Qr,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(hv,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(gs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",c()]})]})})]})})]}),s.jsxs(H,{children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(an,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((d=n.payment.details)==null?void 0:d.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((f=n.payment.details)==null?void 0:f.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs(ft,{className:"mt-2",children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx(mt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ln,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx($,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(fe,{to:"/orders",children:[s.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs($,{variant:"outline",className:"flex-1",children:[s.jsx(ts,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(fe,{to:"/listings",children:[s.jsx(Go,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs($,{variant:"link",className:"text-primary",children:[s.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs($,{variant:"link",className:"text-primary",children:[s.jsx(ah,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(H,{children:s.jsxs(G,{className:"pt-6",children:[s.jsx(Jt,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx($,{asChild:!0,children:s.jsx(fe,{to:"/orders",children:"Voir mes commandes"})})]})})})},oae=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:l}=Yt(),{addToCart:c}=bu(),u=Vn(),d=(v,x)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:x}).format(v),f=()=>{if(!l){ee.error("Veuillez vous connecter pour ajouter au panier"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},m=()=>{if(!l){ee.error("Veuillez vous connecter pour acheter"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),u("/checkout")};return s.jsxs(H,{className:"overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(Gq,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(Ae,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(je,{children:[s.jsx(Ee,{children:e}),s.jsx(tt,{children:n})]}),s.jsx(G,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[d(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(A4,{className:"flex gap-2",children:[s.jsxs($,{variant:"outline",className:"flex-1",onClick:f,children:[s.jsx(Za,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:m,children:"Acheter"})]})]})},_w=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],lae=t=>_w.find(e=>e.priceId===t),R3="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";TM(R3);const cae={isConfigured:!0,key:`${R3.substring(0,8)}...`};async function uae(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function dae(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const hae=()=>{const{getCartItemCount:t}=bu(),e=Vn(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs($,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(qo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Go,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&s.jsxs($,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(Za,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!cae.isConfigured,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_w.map(r=>s.jsx(oae,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),_w.length===0&&s.jsx(H,{className:"text-center py-12",children:s.jsxs(G,{className:"pt-6",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},fae=()=>{const[t]=N1(),e=Vn(),{currentUser:n}=Yt(),{clearCart:r}=bu(),[i,a]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,f]=p.useState(null),m=t.get("session_id"),v=t.get("type")==="subscription";p.useEffect(()=>{r();async function w(){if(n)try{if(a(!0),v){const y=await uae();l(y)}else{const g=(await dae())[0];u(g)}}catch(y){console.error("Error fetching checkout result:",y),f("Impossible de charger les détails de votre achat")}finally{a(!1)}}const j=setTimeout(()=>{w()},2e3);return()=>clearTimeout(j)},[n,v,m,r]);const x=()=>{if(v&&(o!=null&&o.price_id)){const w=lae(o.price_id);return w?w.name:"Abonnement"}else if(c)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(yr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):d?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(ft,{className:"border-red-200 bg-red-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-red-600"}),s.jsx(mt,{className:"text-red-800",children:d})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx($,{asChild:!0,children:s.jsx(fe,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Je,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",v?"abonnement":"commande"," a été confirmé",v?"":"e","."]})]}),s.jsxs(H,{className:"mb-6",children:[s.jsx(je,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[v?s.jsx(an,{className:"w-5 h-5"}):s.jsx(Ft,{className:"w-5 h-5"}),x()]})}),s.jsx(G,{children:s.jsx("div",{className:"space-y-4",children:v&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:c.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:c.currency}).format(c.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:c.order_status==="completed"?"Complété":c.order_status==="pending"?"En attente":c.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ft,{className:"bg-blue-50 border-blue-200",children:[s.jsx(gs,{className:"h-4 w-4 text-blue-600"}),s.jsx(mt,{className:"text-blue-800",children:v?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx($,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(fe,{to:"/orders",children:[s.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(fe,{to:"/products",children:[s.jsx(Go,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(ah,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(ft,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(mt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx($,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})},mae=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],pae=()=>{const{id:t}=_1(),e=Vn(),{currentUser:n}=Yt(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=uf(),[l,c]=p.useState({title:"",description:"",price:"",images:[]}),[u,d]=p.useState([]),[f,m]=p.useState(!1),[v,x]=p.useState(null),[w,j]=p.useState(""),[y,g]=p.useState([]),[b,E]=p.useState("");p.useEffect(()=>{t&&r(t)},[t,r]),p.useEffect(()=>{var R;a&&(c({title:a.title||"",description:a.description||"",price:((R=a.price)==null?void 0:R.toString())||"",images:a.images||[]}),j(a.category||""),g(a.tags||[]))},[a]);const S=R=>{c({...l,[R.target.name]:R.target.value})},M=R=>{if(!R.target.files)return;const T=Array.from(R.target.files);d(F=>[...F,...T])},k=R=>{c({...l,images:l.images.filter((T,F)=>F!==R)})},I=R=>{d(u.filter((T,F)=>F!==R))},A=()=>{b.trim()&&!y.includes(b.trim())&&y.length<5&&(g([...y,b.trim()]),E(""))},N=R=>{g(y.filter(T=>T!==R))},P=async R=>{if(R.preventDefault(),!(!t||!n)){m(!0);try{let T=[];u.length>0&&(T=await Promise.all(u.map(W=>gae(W,n.uid))));const F=[...l.images,...T];await i(t,{...l,price:parseFloat(l.price),images:F,category:w,tags:y}),e(`/listing/${t}`)}catch{x("Erreur lors de la mise à jour de l'annonce")}finally{m(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?v?s.jsx("div",{className:"text-red-500",children:v}):s.jsx("form",{onSubmit:P,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(ke,{id:"title",name:"title",value:l.title,onChange:S,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(js,{id:"description",name:"description",value:l.description,onChange:S,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(ke,{id:"price",name:"price",value:l.price,onChange:S,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:w,onChange:R=>j(R.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),mae.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map(R=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[R,s.jsx($,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>N(R),children:"×"})]},R))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{placeholder:"Ajouter un tag...",value:b,onChange:R=>E(R.target.value),onKeyDown:R=>R.key==="Enter"&&(R.preventDefault(),A()),className:"flex-1"}),s.jsx($,{type:"button",onClick:A,disabled:!b.trim()||y.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(oe,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((R,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:R,alt:`photo-${T}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx($,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>k(T),children:"×"})]},T)),u.map((R,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(R),alt:`new-photo-${T}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx($,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>I(T),children:"×"})]},T)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:M,disabled:f})]})]})]}),s.jsx($,{type:"submit",className:"w-full",disabled:f,children:f?"Enregistrement...":"Enregistrer les modifications"}),v&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:v})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function gae(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=Db(Ob,r),a=await Ab(i,t);return await Rb(a.ref)}function vae(){return s.jsx(MV,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx($q,{children:s.jsxs(TV,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(HQ,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsxs(wV,{children:[s.jsx(Xt,{path:"/",element:s.jsx(uJ,{})}),s.jsx(Xt,{path:"/listings",element:s.jsx(WJ,{})}),s.jsx(Xt,{path:"/listing/:id",element:s.jsx(Rne,{})}),s.jsx(Xt,{path:"/auth",element:s.jsx(nae,{})}),s.jsx(Xt,{path:"/help",element:s.jsx(Aie,{})}),s.jsx(Xt,{path:"/safety",element:s.jsx(Oie,{})}),s.jsx(Xt,{path:"/cart",element:s.jsx(rae,{})}),s.jsx(Xt,{path:"/products",element:s.jsx(hae,{})}),s.jsx(Xt,{path:"/checkout/success",element:s.jsx(fae,{})}),s.jsx(Xt,{path:"/checkout",element:s.jsx(cs,{children:s.jsx(sae,{})})}),s.jsx(Xt,{path:"/orders",element:s.jsx(cs,{children:s.jsx(iae,{})})}),s.jsx(Xt,{path:"/order-confirmation/:orderId",element:s.jsx(cs,{children:s.jsx(aae,{})})}),s.jsx(Xt,{path:"/create",element:s.jsx(cs,{children:s.jsx(Ase,{})})}),s.jsx(Xt,{path:"/profile",element:s.jsx(cs,{children:s.jsx(Ose,{})})}),s.jsx(Xt,{path:"/settings",element:s.jsx(cs,{children:s.jsx(Gse,{})})}),s.jsx(Xt,{path:"/impact",element:s.jsx(cs,{children:s.jsx(sie,{})})}),s.jsx(Xt,{path:"/saved-searches",element:s.jsx(cs,{children:s.jsx(aie,{})})}),s.jsx(Xt,{path:"/favorites",element:s.jsx(cs,{children:s.jsx(cie,{})})}),s.jsx(Xt,{path:"/payments",element:s.jsx(cs,{children:s.jsx(uie,{})})}),s.jsx(Xt,{path:"/messages",element:s.jsx(cs,{children:s.jsx(Xie,{})})}),s.jsx(Xt,{path:"/edit-listing/:id",element:s.jsx(pae,{})})]})}),s.jsx(KQ,{})]}),s.jsx(kF,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}bk(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(vae,{})}));
